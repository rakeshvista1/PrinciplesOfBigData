/* @license
==========================================================================
SproutCore Costello -- Property Observing Library
Copyright ©2006-2011, Strobe Inc. and contributors.
Portions copyright ©2008-2010 Apple Inc. All rights reserved.

Permission is hereby granted, free of charge, to any person obtaining a 
copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation 
the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the 
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
DEALINGS IN THE SOFTWARE.

For more information about SproutCore, visit http://www.sproutcore.com

==========================================================================
@license */
var require=require||function require(){};
var sc_require=sc_require||require;var sc_resource=sc_resource||function sc_resource(){};
sc_require("license");var YES=true;var NO=false;if(typeof console==="undefined"){window.console={};
console.log=console.info=console.warn=console.error=function(){}}var SC=SC||{};var SproutCore=SproutCore||SC;
SC._baseMixin=function(c){var g=Array.prototype.slice.call(arguments,1),a,f=g[0]||{},h=1,e=g.length,j,b,i;
if(e===1){f=this||{};h=0}for(;h<e;h++){if(!(j=g[h])){continue}for(i in j){if(!j.hasOwnProperty(i)){continue
}b=j[i];if(f===b){continue}if(b!==undefined&&(c||(f[i]===undefined))){f[i]=b}}}return f
};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);
return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);
a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",typeOf:function(b){if(b===undefined){return SC.T_UNDEFINED
}if(b===null){return SC.T_NULL}var a=typeof(b);if(a=="object"){if(b instanceof Array){a=SC.T_ARRAY
}else{if(b instanceof Function){a=b.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(SC.Error&&(b instanceof SC.Error)){a=SC.T_ERROR
}else{if(b instanceof SC.Object){a=SC.T_OBJECT}else{a=SC.T_HASH}}}}}else{if(a===SC.T_FUNCTION){a=(b.isClass)?SC.T_CLASS:SC.T_FUNCTION
}}return a},none:function(a){return a===null||a===undefined},empty:function(a){return a===null||a===undefined||a===""
},isArray:function(c){if(c&&c.objectAt){return YES}var a=(c?c.length:null),b=typeof c;
return !((a===undefined)||(a===null)||(c instanceof Function)||(b==="string")||c.setInterval)
},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]
}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()
}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;
while(--a>=0){b[a]=c[a]}return b},guidKey:"_sc_guid_"+new Date().getTime(),_nextGUID:0,_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(e){if(e===undefined){return"(undefined)"
}if(e===null){return"(null)"}var a=this.guidKey;if(e[a]){return e[a]}if(e===Object){return"(Object)"
}if(e===Array){return"(Array)"}var b,c;switch(typeof e){case SC.T_NUMBER:b=this._numberGuids;
c=b[e];if(!c){c="nu"+e;b[e]=c}return c;case SC.T_STRING:b=this._stringGuids;c=b[e];
if(!c){c="st"+e;b[e]=c}return c;case SC.T_BOOL:return(e)?"(true)":"(false)";default:return SC.generateGuid(e)
}},keyFor:function(e,c){var b,a=this._keyCache[e];if(!a){a=this._keyCache[e]={}}b=a[c];
if(!b){b=a[c]=e+"_"+c}return b},generateGuid:function(b){var a=("sc"+(this._nextGUID++));
if(b){b[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",g,e,b;
for(b=0;b<a;++b){g=arguments[b];c+=(g&&(e=g.hash)&&(typeof e===SC.T_FUNCTION))?e.call(g):this.guidFor(g)
}return c===""?null:c},isEqual:function(e,c){if(e===null){return c===null}else{if(e===undefined){return c===undefined
}else{return this.hashFor(e)===this.hashFor(c)}}},compare:function(t,q){if(t===q){return 0
}var k=SC.typeOf(t);var h=SC.typeOf(q);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var e=SC.ORDER_DEFINITION;
b=SC.ORDER_DEFINITION_MAPPING={};var s,o;for(s=0,o=e.length;s<o;++s){b[e[s]]=s}delete SC.ORDER_DEFINITION
}var u=b[k];var c=b[h];if(u<c){return -1}if(u>c){return 1}switch(k){case SC.T_BOOL:case SC.T_NUMBER:if(t<q){return -1
}if(t>q){return 1}return 0;case SC.T_STRING:var m=t.localeCompare(q);if(m<0){return -1
}if(m>0){return 1}return 0;case SC.T_ARRAY:var p=t.length;var n=q.length;var f=Math.min(p,n);
var a=0;var j=0;var g=arguments.callee;while(a===0&&j<f){a=g(t[j],q[j]);j++}if(a!==0){return a
}if(p<n){return -1}if(p>n){return 1}return 0;case SC.T_OBJECT:if(t.constructor.isComparable===YES){return t.constructor.compare(t,q)
}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null
}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)
}return b},copy:function(e,b){var c=e,a;if(e){if(e.isCopyable){return e.copy(b)}if(e.clone&&SC.typeOf(e.clone)===SC.T_FUNCTION){return e.clone()
}}switch(SC.typeOf(e)){case SC.T_ARRAY:c=e.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)
}}break;case SC.T_HASH:case SC.T_OBJECT:c={};for(var f in e){c[f]=b?SC.copy(e[f],true):e[f]
}break}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])
}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(e){var a,b=[];
for(var c in e){a=e[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function() { ... }"
}b.push(c+": "+a)}return"{"+b.join(" , ")+"}"},tupleForPropertyPath:function(f,a){if(typeof f==="object"&&(f instanceof Array)){return f
}var c;var b=f.indexOf("*");if(b<0){b=f.lastIndexOf(".")}c=(b>=0)?f.slice(b+1):f;
var e=this.objectForPropertyPath(f,a,b);return(e&&c)?[e,c]:null},objectForPropertyPath:function(g,c,e){var h,b,f,a;
if(!c){c=window}if(SC.typeOf(g)===SC.T_STRING){if(e===undefined){e=g.length}h=0;while((c)&&(h<e)){b=g.indexOf(".",h);
if((b<0)||(b>e)){b=e}f=g.slice(h,b);c=c.get?c.get(f):c[f];h=b+1}if(h<e){c=undefined
}}else{h=0;a=g.length;f=null;while((h<a)&&c){f=g[h++];if(f){c=(c.get)?c.get(f):c[f]
}}if(h<a){c=undefined}}return c},STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);
return this}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];
SC.mixin(Function.prototype,{property:function(){this.dependentKeys=SC.$A(arguments);
var a=SC.guidFor(this);this.cacheKey="__cache__"+a;this.lastSetValueKey="__lastValue__"+a;
this.isProperty=YES;return this},cacheable:function(a){this.isProperty=YES;if(!this.dependentKeys){this.dependentKeys=[]
}this.isCacheable=(a===undefined)?YES:a;return this},idempotent:function(a){this.isProperty=YES;
if(!this.dependentKeys){this.dependentKeys=[]}this.isVolatile=(a===undefined)?YES:a;
return this},observes:function(a){var f=arguments.length,b=null,e=null;while(--f>=0){var c=arguments[f];
if((c.indexOf(".")<0)&&(c.indexOf("*")<0)){if(!b){b=this.localPropertyPaths=[]}b.push(c)
}else{if(!e){e=this.propertyPaths=[]}e.push(c)}}return this}});String.prototype.fmt=function(){var b=arguments,a=0;
return this.replace(/%@([0-9]+)?/g,function(c,e){e=(e)?parseInt(e,0)-1:a++;c=b[e];
return((c===null)?"(null)":(c===undefined)?"":c).toString()})};String.prototype.loc=function(){var a=SC.STRINGS[this]||this;
return a.fmt.apply(a,arguments)};String.prototype.w=function(){var c=[],e=this.split(" "),b=e.length,f,a=0;
for(a=0;a<b;++a){f=e[a];if(f.length!==0){c.push(f)}}return c};if(!Date.now){Date.now=function(){return new Date().getTime()
}}SC.ObserverSet={targets:0,_membersCacheIsValid:NO,add:function(e,f,b){var c=(e)?SC.guidFor(e):"__this__";
var a=this[c];if(!a){a=this[c]=SC.CoreSet.create();a.target=e;a.isTargetSet=YES;this.targets++
}a.add(f);if(b!==undefined){if(!a.contexts){a.contexts={}}a.contexts[SC.guidFor(f)]=b
}this._membersCacheIsValid=NO},remove:function(c,e){var b=(c)?SC.guidFor(c):"__this__";
var a=this[b];if(!a){return NO}a.remove(e);if(a.length<=0){a.target=null;a.isTargetSet=NO;
a.contexts=null;delete this[b];this.targets--}else{if(a.contexts){delete a.contexts[SC.guidFor(e)]
}}this._membersCacheIsValid=NO;return YES},invokeMethods:function(){var b,c,a,e,f;
for(b in this){if(!this.hasOwnProperty(b)){continue}c=this[b];if(c&&c.isTargetSet){a=c.length;
e=c.target;while(--a>=0){f=c[a];if(f){f.call(e)}}}}},getMembers:function(){if(this._membersCacheIsValid){return this._members
}if(!this._members){this._members=[]}else{this._members.length=0}var b=this._members;
for(var c in this){if(!this.hasOwnProperty(c)){continue}var e=this[c];if(e&&e.isTargetSet){var a=e.length;
var f=e.target;var h=e.contexts;if(h){while(--a>=0){var g=e[a];b.push([f,g,h[SC.guidFor(g)]])
}}else{while(--a>=0){b.push([f,e[a]])}}}}this._membersCacheIsValid=YES;return b},clone:function(){var b,e,c,a=SC.ObserverSet.create();
for(c in this){if(!this.hasOwnProperty(c)){continue}b=this[c];if(b&&b.isTargetSet){e=b.clone();
e.target=b.target;if(b.contexts){e.contexts=SC.clone(b.contexts)}a[c]=e}}a.targets=this.targets;
a._membersCacheIsValid=NO;return a},create:function(){return SC.beget(this)}};SC.ObserverSet.slice=SC.ObserverSet.clone;
require("private/observer_set");SC.LOG_OBSERVERS=NO;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES
},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)
}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}
}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)
}}else{return b}}},set:function(i,g){var b=this[i],j=this.automaticallyNotifiesObserversFor(i),f=g,c,a,h,e;
if(!j&&this._kvo_cacheable&&(a=this._kvo_cache)){c=this._kvo_cachedep;if(!c||(c=c[i])===undefined){c=this._kvo_computeCachedDependentsFor(i)
}if(c){h=c.length;while(--h>=0){e=c[h];a[e.cacheKey]=a[e.lastSetValueKey]=undefined
}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==g)){if(!a){a=this._kvo_cache={}
}a[b.lastSetValueKey]=g;if(j){this.propertyWillChange(i)}f=b.call(this,i,g);if(b.isCacheable){a[b.cacheKey]=f
}if(j){this.propertyDidChange(i,f,YES)}}}else{if(b===undefined){if(j){this.propertyWillChange(i)
}this.unknownProperty(i,g);if(j){this.propertyDidChange(i,f)}}else{if(this[i]!==g){if(j){this.propertyWillChange(i)
}f=this[i]=g;if(j){this.propertyDidChange(i,f)}}}}return this},unknownProperty:function(a,b){if(!(b===undefined)){this[a]=b
}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;
return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;
var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()
}return this},propertyWillChange:function(a){return this},propertyDidChange:function(m,k,c){this._kvo_revision=(this._kvo_revision||0)+1;
var b=this._kvo_changeLevel||0,h,l,i,a,e,g=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO);
if(a=this._kvo_cache){if(!c){e=this[m];if(e&&e.isProperty){a[e.cacheKey]=a[e.lastSetValueKey]=undefined
}}if(this._kvo_cacheable){h=this._kvo_cachedep;if(!h||(h=h[m])===undefined){h=this._kvo_computeCachedDependentsFor(m)
}if(h){l=h.length;while(--l>=0){i=h[l];a[i.cacheKey]=a[i.lastSetValueKey]=undefined
}}}}var f=SC.Observers.isObservingSuspended;if((b>0)||f){var j=this._kvo_changes;
if(!j){j=this._kvo_changes=SC.CoreSet.create()}j.add(m);if(f){if(g){console.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))
}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(m)
}return this},registerDependentKey:function(i,c){var f=this._kvo_dependents,b=this[i],j,h,a,g,e;
if(typeof c==="object"&&(c instanceof Array)){j=c;a=0}else{j=arguments;a=1}h=j.length;
if(!f){this._kvo_dependents=f={}}while(--h>=a){g=j[h];e=f[g];if(!e){e=f[g]=[]}e.push(i)
}},_kvo_addCachedDependents:function(b,g,i,c){var a=g.length,f,e,h;while(--a>=0){e=g[a];
c.add(e);f=this[e];if(f&&(f instanceof Function)&&f.isProperty){if(f.isCacheable){b.push(f)
}if((h=i[e])&&h.length>0){this._kvo_addCachedDependents(b,h,i,c)}}}},_kvo_computeCachedDependentsFor:function(c){var e=this._kvo_cachedep,g=this._kvo_dependents,f=g?g[c]:null,a,b;
if(!e){e=this._kvo_cachedep={}}if(!f||f.length===0){return e[c]=null}a=e[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());
b.add(c);this._kvo_addCachedDependents(a,f,g,b);b.clear();if(a.length===0){a=e[c]=null
}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}
}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();
this._kvo_cloned[c]=YES}}return a},addObserver:function(c,g,i,b){var e,a,f,h;if(i===undefined){i=g;
g=this}if(!g){g=this}if(typeof i==="string"){i=g[i]}if(!i){throw"You must pass a method to addObserver()"
}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,g,i,b);
a.masterTarget=g;a.masterMethod=i;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)
}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(g===this){g=null
}e=SC.keyFor("_kvo_observers",c);this._kvo_for(e,SC.ObserverSet).add(g,i,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)
}if(this.didAddObserver){this.didAddObserver(c,g,i)}return this},removeObserver:function(c,g,i){var e,f,b,h,a;
if(i===undefined){i=g;g=this}if(!g){g=this}if(typeof i==="string"){i=g[i]}if(!i){throw"You must pass a method to removeObserver()"
}c=c.toString();if(c.indexOf(".")>=0){e=SC.keyFor("_kvo_chains",c);if(f=this[e]){f=this._kvo_for(e);
a=f.length;while(--a>=0){b=f[a];if(b&&(b.masterTarget===g)&&(b.masterMethod===i)){f[a]=b.destroyChain()
}}}}else{if(g===this){g=null}e=SC.keyFor("_kvo_observers",c);if(h=this[e]){h=this._kvo_for(e);
h.remove(g,i);if(h.targets<=0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)
}}}if(this.didRemoveObserver){this.didRemoveObserver(c,g,i)}return this},hasObserverFor:function(b){SC.Observers.flush(this);
var e=this[SC.keyFor("_kvo_observers",b)],c=this[SC.keyFor("_kvo_local",b)],a;if(c&&c.length>0){return YES
}if(e&&e.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return
}this._observableInited=YES;var g,n,l,k,i,f,m,h,c,o,b,j,e,a;if(n=this._observers){h=n.length;
for(g=0;g<h;g++){l=n[g];i=this[l];f=i.propertyPaths;m=(f)?f.length:0;for(c=0;c<m;
c++){o=f[c];b=o.indexOf(".");if(b<0){this.addObserver(o,this,i)}else{if(o.indexOf("*")===0){this.addObserver(o.slice(1),this,i)
}else{j=null;if(b===0){j=this;o=o.slice(1)}else{if(b===4&&o.slice(0,5)==="this."){j=this;
o=o.slice(5)}else{if(b<0&&o.length===4&&o==="this"){j=this;o=""}}}SC.Observers.addObserver(o,this,i,j)
}}}}}this.bindings=[];if(n=this._bindings){for(g=0,a=n.length;g<a;g++){l=n[g];k=this[l];
e=l.slice(0,-7);this[l]=this.bind(e,k)}}if(n=this._properties){for(g=0,a=n.length;
g<a;g++){l=n[g];if(k=this[l]){if(k.isCacheable){this._kvo_cacheable=YES}if(k.dependentKeys&&(k.dependentKeys.length>0)){this.registerDependentKey(l,k.dependentKeys)
}}}}},observersForKey:function(a){var b=this._kvo_for("_kvo_observers",a);return b.getMembers()||[]
},_notifyPropertyObservers:function(v){if(!this._observableInited){this.initObservable()
}SC.Observers.flush(this);var h=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO),p,t,n,e,o,m,s,q,k,a,g,u,c,j,f,b,i,l;
if(h){i=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";console.log('%@%@: notifying observers after change to key "%@"'.fmt(i,this,v))
}e=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((t=this._kvo_changes)&&(t.length>0))||v){s=++this.propertyRevision;
if(!t){t=SC.CoreSet.create()}this._kvo_changes=null;if(v==="*"){t.add("*");t.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))
}else{if(v){t.add(v)}}if(n=this._kvo_dependents){for(o=0;o<t.length;o++){v=t[o];m=n[v];
if(m&&(j=m.length)){if(h){console.log("%@...including dependent keys for %@: %@".fmt(i,v,m))
}l=this._kvo_cache;if(!l){l=this._kvo_cache={}}while(--j>=0){t.add(v=m[j]);if(f=this[v]){this[f.cacheKey]=undefined;
l[f.cacheKey]=l[f.lastSetValueKey]=undefined}}}}}while(t.length>0){v=t.pop();p=this[SC.keyFor("_kvo_observers",v)];
if(p){q=p.getMembers();k=q.length;for(g=0;g<k;g++){a=q[g];if(a[3]===s){continue}u=a[0]||this;
c=a[1];b=a[2];a[3]=s;if(h){console.log('%@...firing observer on %@ for key "%@"'.fmt(i,u,v))
}if(b!==undefined){c.call(u,this,v,null,b,s)}else{c.call(u,this,v,null,s)}}}q=this[SC.keyFor("_kvo_local",v)];
if(q){k=q.length;for(g=0;g<k;g++){a=q[g];c=this[a];if(c){if(h){console.log('%@...firing local observer %@.%@ for key "%@"'.fmt(i,this,a,v))
}c.call(this,this,v,null,s)}}}if(e&&v!=="*"){q=e.getMembers();k=q.length;for(g=0;
g<k;g++){a=q[g];u=a[0]||this;c=a[1];b=a[2];if(h){console.log('%@...firing * observer on %@ for key "%@"'.fmt(i,u,v))
}if(b!==undefined){c.call(u,this,v,null,b,s)}else{c.call(u,this,v,null,s)}}}if(this.propertyObserver){if(h){console.log('%@...firing %@.propertyObserver for key "%@"'.fmt(i,this,v))
}this.propertyObserver(this,v,null,s)}}if(t){t.destroy()}v=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;
if(h){SC.KVO_SPACES=i.slice(0,-2)}return YES},bind:function(a,c,f){var e,b;if(f!==undefined){c=[c,f]
}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){e=this[a+"BindingDefault"]||SC.Binding;
e=e.beget().from(c)}else{e=c}e=e.to(a,this).connect();this.bindings.push(e);return e
},didChangeFor:function(a){var b,g,f,k,e,c,i,j,h;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;
if(!b){b=this._kvo_didChange_valueCache={}}g=this._kvo_didChange_revisionCache;if(!g){g=this._kvo_didChange_revisionCache={}
}f=b[a]||{};k=g[a]||{};e=false;c=this._kvo_revision||0;i=arguments.length;while(--i>=1){j=arguments[i];
if(k[j]!=c){h=this.get(j);if(f[j]!==h){e=true;f[j]=h}}k[j]=c}b[a]=f;g[a]=k;return e
},setIfChanged:function(a,b){return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);
if(a===null||a[0]===null){return undefined}return a[0].get(a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);
if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);
if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)
}return this},getEach:function(){var e=SC.A(arguments),c=[],a,b;for(a=0,b=e.length;
a<b;a++){c[c.length]=this.getPath(e[a])}return c},incrementProperty:function(b,a){if(!a){a=1
}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1
}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true
}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)
},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);
return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");
return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)
},logProperty:function(){var b=SC.$A(arguments),e,c,a;for(a=0,c=b.length;a<c;a++){e=b[a];
console.log("%@:%@: ".fmt(SC.guidFor(this),e),this.get(e))}},propertyRevision:1};
SC.logChange=function logChange(c,a,b){console.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))
};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]
}if(a.get){return a.get(b)}return a[b]}});SC.mixin(Array.prototype,SC.Observable);
SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;
var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);
this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)
}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")
}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;
this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null
}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;
return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];
var a=this._contextCache;a.push(b);return null};require("core");require("system/enumerator");
SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]
},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)
}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);
return a}.property(),lastObject:function(){var a=this.get("length");if(a===0){return undefined
}if(this.objectAt){return this.objectAt(a-1)}}.property(),enumerator:function(){return SC.Enumerator.create(this)
},forEach:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;
if(g===undefined){g=null}var f=null;var c=SC.Enumerator._popContext();for(var a=0;
a<b;a++){var e=this.nextObject(a,f,c);h.call(g,e,a,this);f=e}f=null;c=SC.Enumerator._pushContext(c);
return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null
},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)
}else{c[a]=b}}},this);return this},map:function(i,h){if(typeof i!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=[];
var g=null;var e=SC.Enumerator._popContext();for(var a=0;a<b;a++){var f=this.nextObject(a,g,e);
c[a]=i.call(h,f,a,this);g=f}g=null;e=SC.Enumerator._pushContext(e);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null
})},filter:function(i,h){if(typeof i!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;
if(h===undefined){h=null}var c=[];var g=null;var e=SC.Enumerator._popContext();for(var a=0;
a<b;a++){var f=this.nextObject(a,g,e);if(i.call(h,f,a,this)){c.push(f)}g=f}g=null;
e=SC.Enumerator._pushContext(e);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,e;
if(this instanceof Array){e=this}else{e=[];this.forEach(function(f){e.push(f)})}if(!e){return[]
}return e.sort(function(h,g){var f,j,l,k,i=0;for(f=0;i===0&&f<a;f++){j=c[f];l=h?(h.get?h.get(j):h[j]):null;
k=g?(g.get?g.get(j):g[j]):null;i=SC.compare(l,k)}return i})},filterProperty:function(k,g){var e=this.get?this.get("length"):this.length;
var f=[];var j=null;var b=SC.Enumerator._popContext();for(var h=0;h<e;h++){var c=this.nextObject(h,j,b);
var i=c?(c.get?c.get(k):c[k]):null;var a=(g===undefined)?!!i:SC.isEqual(i,g);if(a){f.push(c)
}j=c}j=null;b=SC.Enumerator._pushContext(b);return f},find:function(i,e){var c=this.get?this.get("length"):this.length;
if(e===undefined){e=null}var h=null,b,j=NO,f=null;var a=SC.Enumerator._popContext();
for(var g=0;g<c&&!j;g++){b=this.nextObject(g,h,a);if(j=i.call(e,b,g,this)){f=b}h=b
}b=h=null;a=SC.Enumerator._pushContext(a);return f},findProperty:function(j,g){var c=this.get?this.get("length"):this.length;
var k=NO,e=null,i=null,b,h;var a=SC.Enumerator._popContext();for(var f=0;f<c&&!k;
f++){b=this.nextObject(f,i,a);h=b?(b.get?b.get(j):b[j]):null;k=(g===undefined)?!!h:SC.isEqual(h,g);
if(k){e=b}i=b}i=b=null;a=SC.Enumerator._pushContext(a);return e},every:function(i,h){if(typeof i!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=YES;
var g=null;var e=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var f=this.nextObject(a,g,e);
if(!i.call(h,f,a,this)){c=NO}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},everyProperty:function(j,f){var c=this.get?this.get("length"):this.length;
var e=YES;var i=null;var a=SC.Enumerator._popContext();for(var g=0;e&&(g<c);g++){var b=this.nextObject(g,i,a);
var h=b?(b.get?b.get(j):b[j]):null;e=(f===undefined)?!!h:SC.isEqual(h,f);i=b}i=null;
a=SC.Enumerator._pushContext(a);return e},some:function(i,h){if(typeof i!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=NO;
var g=null;var e=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var f=this.nextObject(a,g,e);
if(i.call(h,f,a,this)){c=YES}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},someProperty:function(j,f){var c=this.get?this.get("length"):this.length;
var e=NO;var i=null;var a=SC.Enumerator._popContext();for(var g=0;!e&&(g<c);g++){var b=this.nextObject(g,i,a);
var h=b?(b.get?b.get(j):b[j]):null;e=(f===undefined)?!!h:SC.isEqual(h,f);i=b}i=null;
a=SC.Enumerator._pushContext(a);return e},reduce:function(h,i,j){if(typeof h!=="function"){throw new TypeError()
}var c=this.get?this.get("length"):this.length;if(c===0&&i===undefined){throw new TypeError()
}var e=i;var g=null;var a=SC.Enumerator._popContext();for(var f=0;f<c;f++){var b=this.nextObject(f,g,a);
if(b!==null){if(e===undefined){e=b}else{e=h.call(null,e,b,f,this,j)}}g=b}g=null;a=SC.Enumerator._pushContext(a);
if(e===undefined){throw new TypeError()}return e},invoke:function(i){var f=this.get?this.get("length"):this.length;
if(f<=0){return[]}var j;var h=[];var c=arguments.length;if(c>1){for(j=1;j<c;j++){h.push(arguments[j])
}}var g=[];var k=null;var b=SC.Enumerator._popContext();for(j=0;j<f;j++){var e=this.nextObject(j,k,b);
var a=e?e[i]:null;if(a){g[j]=a.apply(e,h)}k=e}k=null;b=SC.Enumerator._pushContext(b);
return g},invokeWhile:function(e,j){var g=this.get?this.get("length"):this.length;
if(g<=0){return null}var k;var i=[];var c=arguments.length;if(c>2){for(k=2;k<c;k++){i.push(arguments[k])
}}var h=e;var l=null;var b=SC.Enumerator._popContext();for(k=0;(h===e)&&(k<g);k++){var f=this.nextObject(k,l,b);
var a=f?f[j]:null;if(a){h=a.apply(f,i)}l=f}l=null;b=SC.Enumerator._pushContext(b);
return h},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a
},groupBy:function(k){var e=this.get?this.get("length"):this.length,f=[],j=null,a=SC.Enumerator._popContext(),g=[],l=[];
for(var h=0;h<e;h++){var c=this.nextObject(h,j,a);var i=c?(c.get?c.get(k):c[k]):null;
if(SC.none(g[i])){g[i]=[];l.push(i)}g[i].push(c);j=c}j=null;a=SC.Enumerator._pushContext(a);
for(var h=0,b=l.length;h<b;h++){f.push(g[l[h]])}return f}};SC._buildReducerFor=function(a,b){return function(e,f){var g=this[a];
if(SC.typeOf(g)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(e,f):null
}else{var c=SC.Enumerable.reduce.call(this,g,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this
}.property(),enumerableContentDidChange:function(b,a){this.notifyPropertyChange("[]");
return this},reducedProperty:function(j,h,g){if(!j||j.charAt(0)!=="@"){return undefined
}var e=j.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!e||e.length<2){return undefined}var i=e[1];
var k=e[3];i="reduce"+i.slice(0,1).toUpperCase()+i.slice(1);var a=this[i];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined
}if(g===NO){return SC.Enumerable.reduce.call(this,a,null,k)}var c=SC._buildReducerFor(i,k);
var b=this.constructor.prototype;if(b){b[j]=c;var f=b._properties||[];f.push(j);b._properties=f;
this.registerDependentKey(j,"[]")}return SC.Enumerable.reduce.call(this,a,null,k)
},reduceMax:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}if(a===null){return f
}return(f>a)?f:a},reduceMaxObject:function(b,g,c,h,f){var a=b,i=g;if(f){if(g){i=g.get?g.get(f):g[f]
}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g}return(i>a)?g:b},reduceMin:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]
}if(a===null){return f}return(f<a)?f:a},reduceMinObject:function(b,g,c,h,f){var a=b,i=g;
if(f){if(g){i=g.get?g.get(f):g[f]}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g
}return(i<a)?g:b},reduceAverage:function(b,h,f,i,g){if(g&&h){h=h.get?h.get(g):h[g]
}var c=(b||0)+h;var a=i.get?i.get("length"):i.length;if(f>=a-1){c=c/a}return c},reduceSum:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]
}return(a===null)?f:a+f}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);
Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(h){var f=this.length;
var g=[];for(var e=0;e<f;e++){var i=this[e];g[e]=i?(i.get?i.get(h):i[h]):null}return g
},filterProperty:function(i,k){var g=this.length;var h=[];for(var f=0;f<g;f++){var j=this[f];
var l=j?(j.get?j.get(i):j[i]):null;var e=(k===undefined)?!!l:SC.isEqual(l,k);if(e){h.push(j)
}}return h},groupBy:function(l){var g=this.length,h=[],i=[],m=[];for(var j=0;j<g;
j++){var f=this[j];var k=f?(f.get?f.get(l):f[l]):null;if(SC.none(i[k])){i[k]=[];m.push(k)
}i[k].push(f)}for(var j=0,e=m.length;j<e;j++){h.push(i[m[j]])}return h},find:function(k,j){if(typeof k!=="function"){throw new TypeError()
}var f=this.length;if(j===undefined){j=null}var h,g=null,i=NO;for(var e=0;e<f&&!i;
e++){h=this[e];if(i=k.call(j,h,e,this)){g=h}}h=null;return g},findProperty:function(h,k){var f=this.length;
var i,l,j=NO,g=null;for(var e=0;e<f&&!j;e++){l=(i=this[e])?(i.get?i.get(h):i[h]):null;
j=(k===undefined)?!!l:SC.isEqual(l,k);if(j){g=i}}i=null;return g},everyProperty:function(h,j){var f=this.length;
var g=YES;for(var e=0;g&&(e<f);e++){var i=this[e];var k=i?(i.get?i.get(h):i[h]):null;
g=(j===undefined)?!!k:SC.isEqual(k,j)}return g},someProperty:function(h,j){var f=this.length;
var g=NO;for(var e=0;!g&&(e<f);e++){var i=this[e];var k=i?(i.get?i.get(h):i[h]):null;
g=(j===undefined)?!!k:SC.isEqual(k,j)}return g},invoke:function(g){var f=this.length;
if(f<=0){return[]}var e;var i=[];var k=arguments.length;if(k>1){for(e=1;e<k;e++){i.push(arguments[e])
}}var h=[];for(e=0;e<f;e++){var j=this[e];var l=j?j[g]:null;if(l){h[e]=l.apply(j,i)
}}return h},invokeWhile:function(g,l){var i=this.length;if(i<=0){return null}var m;
var k=[];var f=arguments.length;if(f>2){for(m=2;m<f;m++){k.push(arguments[m])}}var j=g;
for(m=0;(j===g)&&(m<i);m++){var h=this[m];var e=h?h[l]:null;if(e){j=e.apply(h,k)}}return j
},toArray:function(){var f=this.length;if(f<=0){return[]}var g=[];for(var e=0;e<f;
e++){var h=this[e];g.push(h)}return g},getEach:function(h){var g=[];var f=this.length;
for(var e=0;e<f;e++){var i=this[e];g[e]=i?(i.get?i.get(h):i[h]):null}return g},setEach:function(g,h){var f=this.length;
for(var e=0;e<f;e++){var i=this[e];if(i){if(i.set){i.set(g,h)}else{i[g]=h}}}return this
}};var c={forEach:function(i,h){if(typeof i!=="function"){throw new TypeError()}var f=this.length;
if(h===undefined){h=null}for(var e=0;e<f;e++){var g=this[e];i.call(h,g,e,this)}return this
},map:function(j,i){if(typeof j!=="function"){throw new TypeError()}var f=this.length;
if(i===undefined){i=null}var g=[];for(var e=0;e<f;e++){var h=this[e];g[e]=j.call(i,h,e,this)
}return g},filter:function(j,i){if(typeof j!=="function"){throw new TypeError()}var f=this.length;
if(i===undefined){i=null}var g=[];for(var e=0;e<f;e++){var h=this[e];if(j.call(i,h,e,this)){g.push(h)
}}return g},every:function(j,i){if(typeof j!=="function"){throw new TypeError()}var f=this.length;
if(i===undefined){i=null}var g=YES;for(var e=0;g&&(e<f);e++){var h=this[e];if(!j.call(i,h,e,this)){g=NO
}}return g},some:function(j,i){if(typeof j!=="function"){throw new TypeError()}var f=this.length;
if(i===undefined){i=null}var g=NO;for(var e=0;(!g)&&(e<f);e++){var h=this[e];if(j.call(i,h,e,this)){g=YES
}}return g},reduce:function(k,g,j){if(typeof k!=="function"){throw new TypeError()
}var f=this.length;if(f===0&&g===undefined){throw new TypeError()}var h=g;for(var e=0;
e<f;e++){var i=this[e];if(i!==null){if(h===undefined){h=i}else{h=k.call(null,h,i,e,this,j)
}}}if(h===undefined){throw new TypeError()}return h}};for(var b in c){if(!c.hasOwnProperty(b)){continue
}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]
}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";
return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(e,g,f,h,c,a){var b=SC.beget(this);
b.source=e;b.indexes=g?g.frozenCopy():null;b.target=f;b.method=h;b.context=c;b.isDeep=a||NO;
b.beginObserving();return b},extend:function(f){var e=SC.beget(this),c=arguments,b=c.length,a;
for(a=0;a<b;a++){SC.mixin(e,c[a])}return e},destroy:function(a){this.endObserving();
return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this
}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this
},beginObserving:function(){if(!this.isDeep){return this}var b=this.observing;if(!b){b=this.observing=SC.CoreSet.create()
}var a=this._beginObservingForEach;if(!a){a=this._beginObservingForEach=function(c){var e=this.source.objectAt(c);
if(e&&e.addObserver){b.push(e);e._kvo_needsRangeObserver=YES}}}this.indexes.forEach(a,this);
this.isObserving=NO;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(a){var e=this.observing;
if(this.isObserving||!e||(e.get("length")===0)){return YES}if(e.contains(a)){this.isObserving=YES;
var b=this._setupPendingForEach;if(!b){var c=this.source,f=this.objectPropertyDidChange;
b=this._setupPendingForEach=function(g){var j=this.source.objectAt(g),h=SC.guidFor(j),i;
if(j&&j.addObserver){e.push(j);j.addObserver("*",this,f);i=this[h];if(i===undefined||i===null){this[h]=g
}else{if(i.isIndexSet){i.add(g)}else{i=this[h]=SC.IndexSet.create(i).add(g)}}}}}this.indexes.forEach(b,this);
return YES}else{return NO}},endObserving:function(){if(!this.isDeep){return this}var f=this.observing;
if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,g,e;if(f){g=f.length;
for(a=0;a<g;a++){e=f[a];e.removeObserver("*",this,b);this[SC.guidFor(e)]=null}f.length=0
}this.isObserving=NO}if(f){f.clear()}return this},rangeDidChange:function(b){var a=this.indexes;
if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);
this.beginObserving()}return this},objectPropertyDidChange:function(e,g,h,a){var f=this.context,i=this.method,c=SC.guidFor(e),b=this[c];
if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}if(f){i.call(this.target,this.source,e,g,b,f,a)
}else{i.call(this.target,this.source,e,g,b,a)}}};sc_require("mixins/observable");
sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";
SC.Array={isSCArray:YES,replace:function(a,c,b){throw"replace() must be implemented to support SC.Array"
},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined
}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)
}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION
}this.replace(a,0,[b]);return this},removeAt:function(e,a){var c=0,b=[];if(typeof e===SC.T_NUMBER){if((e<0)||(e>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION
}if(a===undefined){this.replace(e,1,b);return this}else{e=SC.IndexSet.create(e,a)
}}this.beginPropertyChanges();e.forEachRange(function(g,f){g-=c;c+=f;this.replace(g,f,b)
},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;
while(--c>=0){var a=this.objectAt(c);if(a==b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();
a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this
},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();
a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this
},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);
this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null
}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);
return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)
},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false
}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false
}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true
},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this
}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];
this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},max:function(){return Math.max.apply(Math,this)
},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,addRangeObserver:function(e,g,i,f){var a=this._array_rangeObservers;
if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")
}var h=this.rangeObserverClass;var b=NO;var c=h.create(this,e,g,i,f,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;
this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)
},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;
if(a){a.remove(c)}return b},enumerableContentDidChange:function(i,h,g){var a=this._array_rangeObservers,e=this._array_oldLength,f,c,b;
this.beginPropertyChanges();this.notifyPropertyChange("length");if(a&&a.length>0){if(e===undefined){e=0
}this._array_oldLength=f=this.get("length");if(i===undefined){i=0}if(g===undefined){g=f-e
}if(g!==0||h===undefined){c=f-i;if(g<0){c-=g}}else{c=h}b=this._array_rangeChanges;
if(!b){b=this._array_rangeChanges=SC.IndexSet.create()}b.add(i,c)}this.notifyPropertyChange("[]");
this.endPropertyChanges();return this},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,e=this._array_rangeChanges,b=c?c.length:0,a,f;
if(b>0&&e&&e.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(e)}e.clear()}}};SC.mixin(Array.prototype,SC.Array);
SC.Array=SC.mixin({},SC.Enumerable,SC.Array);SC.Array.slice=function(b,e){var a=[];
var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(e)||(e>c)){e=c}while(b<e){a[a.length]=this.objectAt(b++)
}return a};SC.Array.indexOf=function(e,c){var b,a=this.get("length");if(c===undefined){c=0
}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b)===e){return b
}}return -1};if(!Array.prototype.indexOf){Array.prototype.indexOf=SC.Array.indexOf
}SC.Array.lastIndexOf=function(e,c){var b,a=this.get("length");if(c===undefined){c=a-1
}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===e){return b
}}return -1};if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=SC.Array.lastIndexOf
}(function(){SC.mixin(Array.prototype,{replace:function(e,h,g){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(!g||g.length===0){this.splice(e,h)}else{var f=[e,h].concat(g);this.splice.apply(this,f)
}var c=g?(g.get?g.get("length"):g.length):0;this.enumerableContentDidChange(e,h,c-h);
return this},unknownProperty:function(e,f){var c=this.reducedProperty(e,f);if((f!==undefined)&&c===undefined){c=this[e]=f
}return c}});var b=Array.prototype.indexOf;if(!b||(b===SC.Array.indexOf)){Array.prototype.indexOf=function(g,f){var e,c=this.length;
if(f===undefined){f=0}else{f=(f<0)?Math.ceil(f):Math.floor(f)}if(f<0){f+=c}for(e=f;
e<c;e++){if(this[e]===g){return e}}return -1}}var a=Array.prototype.lastIndexOf;if(!a||(a===SC.Array.lastIndexOf)){Array.prototype.lastIndexOf=function(g,f){var e,c=this.length;
if(f===undefined){f=c-1}else{f=(f<0)?Math.ceil(f):Math.floor(f)}if(f<0){f+=c}for(e=f;
e>=0;e--){if(this[e]===g){return e}}return -1}}})();SC.Comparable={isComparable:YES,compare:function(e,c){throw"%@.compare() is not implemented".fmt(this.toString())
}};SC.Copyable={isCopyable:YES,copy:function(a){throw"%@.copy() is not implemented"
},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this
}else{if(a===undefined){throw"%@ does not support freezing".fmt(this)}else{return this.copy().freeze()
}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;
if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,e;
while(b<a){e=arguments[b];if(e&&e[c]!==undefined){return e}b++}return(this[c]!==undefined)?this:null
},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this
}var e=c[a];return e?e.apply(c,b):null},getDelegateProperty:function(e,f){var b=1,a=arguments.length,c;
while(b<a){c=arguments[b++];if(c&&c[e]!==undefined){return c.get?c.get(e):c[e]}}return(this[e]!==undefined)?this.get(e):undefined
}};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)
}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");
sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");
SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(b){var c,a,e=SC.Set._pool,f=this.isObservable;
if(!f&&b===undefined&&e.length>0){c=e.pop()}else{c=SC.beget(this);if(f){c.initObservable()
}if(b&&b.isEnumerable&&b.get("length")>0){c.isObservable=NO;if(b.isSCArray){a=b.get?b.get("length"):b.length;
while(--a>=0){c.add(b.objectAt(a))}}else{if(b.isSet){a=b.length;while(--a>=0){c.add(b[a])
}}else{b.forEach(function(g){c.add(g)},this)}}c.isObservable=f}}return c},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined
}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;
return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];
return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO
}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES
},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()
}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return
}this.setObservers.remove(a)},add:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(f===null||f===undefined){return this}var c,e=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f),b=this[e],a=this.length;
if((b===null||b===undefined)||(b>=a)||(this[b]!==f)){this[a]=f;this[e]=a;this.length=a+1;
if(this.setObservers){this.didAddItem(f)}}if(this.isObservable){this.enumerableContentDidChange()
}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)
}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");
while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])
}}else{c.forEach(function(e){this.add(e)},this)}}if(b){this.endPropertyChanges()}return this
},remove:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR}if(f===null||f===undefined){return this
}var c,e=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f),b=this[e],a=this.length;
if((b===null||b===undefined)||(b>=a)||(this[b]!==f)){return this}delete this[e];if(b<(a-1)){tmp=this[b]=this[a-1];
e=(tmp&&(c=tmp.hash)&&(typeof c===SC.T_FUNCTION))?c.call(tmp):SC.guidFor(tmp);this[e]=b
}this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(f)
}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;
if(a){this.remove(a)}return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;
if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))
}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(e){this.remove(e)
},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)
},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())
}return this},forEach:function(c,e){var b=this.length;if(!e){e=this}for(var a=0;a<b;
a++){c.call(e,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];
for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var e=this.setObservers;
if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didAddItem(this,c)}},didRemoveItem:function(c){var e=this.setObservers;
if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});
SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;
SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;
SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;
sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,e,f,b){var a;
if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a){a[0].addObserver(a[1],e,f)
}else{this.queue.push([c,e,f,b])}},removeObserver:function(g,h,i,e){var c,b,a,f;a=SC.tupleForPropertyPath(g,e);
if(a){a[0].removeObserver(a[1],h,i)}c=this.queue.length;b=this.queue;while(--c>=0){f=b[c];
if((f[0]===g)&&(f[1]===h)&&(f[2]==i)&&(f[3]===e)){b[c]=null}}},addPendingRangeObserver:function(a){var b=this.rangeObservers;
if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(a){var f=this.queue;
if(f&&f.length>0){var i=(this.queue=[]);var j=f.length;while(--j>=0){var k=f[j];if(!k){continue
}var g=SC.tupleForPropertyPath(k[0],k[3]);if(g){g[0].addObserver(g[1],k[1],k[2])}else{i.push(k)
}}}if(a._kvo_needsRangeObserver){var h=this.rangeObservers,e=h?h.get("length"):0,b=this._TMP_OUT,c;
for(j=0;j<e;j++){c=h[j];if(c.setupPending(a)){b.push(c)}}if(b.length>0){h.removeEach(b)
}b.length=0;a._kvo_needsRangeObserver=NO}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)
},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;
if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();
var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null
}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");
sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._object_extend=function _object_extend(h,g){if(!g){throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"
}h._kvo_cloned=null;var y,n,u,f,i=h.concatenatedProperties,l=SC.K;var c,b;n=(i)?i.length:0;
var a=(n>0)?{}:null;while(--n>=0){y=i[n];c=h[y];b=g[y];if(c){if(!(c instanceof Array)){c=SC.$A(c)
}a[y]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[y]=b}}var x=h._bindings,m=NO;
var v=h._observers,w=NO;var j=h._properties,e=NO;var q,k,o;var t=h.outlets,s=NO;if(g.outlets){t=(t||SC.EMPTY_ARRAY).concat(g.outlets);
s=YES}for(y in g){if(y==="_kvo_cloned"){continue}if(!g.hasOwnProperty(y)){continue
}var p=(a.hasOwnProperty(y)?a[y]:null)||g[y];if(y.length>7&&y.slice(-7)==="Binding"){if(!m){x=(x||SC.EMPTY_ARRAY).slice();
m=YES}if(x===null){x=(h._bindings||SC.EMPTY_ARRAY).slice()}x[x.length]=y}else{if(p&&(p instanceof Function)){if(!p.superclass&&(p!==(f=h[y]))){p.superclass=p.base=f||l
}if(p.propertyPaths){if(!w){v=(v||SC.EMPTY_ARRAY).slice();w=YES}v[v.length]=y}if(q=p.localPropertyPaths){k=q.length;
while(--k>=0){o=h._kvo_for(SC.keyFor("_kvo_local",q[k]),SC.CoreSet);o.add(y);h._kvo_for("_kvo_observed_keys",SC.CoreSet).add(q[k])
}}if(p.dependentKeys){if(!e){j=(j||SC.EMPTY_ARRAY).slice();e=YES}j[j.length]=y}if(p.autoconfiguredOutlet){if(!s){t=(t||SC.EMPTY_ARRAY).slice();
s=YES}t[t.length]=y}}}h[y]=p}if(g.hasOwnProperty("toString")){y="toString";p=(a.hasOwnProperty(y)?a[y]:null)||g[y];
if(!p.superclass&&(p!==(f=h[y]))){p.superclass=p.base=f||l}h[y]=p}h._bindings=x||[];
h._observers=v||[];h._properties=j||[];h.outlets=t||[];return h};SC.Object=function(a){return this._object_init(a)
};SC.mixin(SC.Object,{mixin:function(b){var a=arguments.length,c;for(c=0;c<a;c++){SC.mixin(this,arguments[c])
}return this},superclass:null,extend:function(f){var e=SC.BENCHMARK_OBJECTS;if(e){SC.Benchmark.start("SC.Object.extend")
}var h,c=function(i){return this._object_init(i)};for(h in this){if(!this.hasOwnProperty(h)){continue
}c[h]=this[h]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;
SC.generateGuid(c);c.subclasses=SC.Set.create();this.subclasses.add(c);var g=(c.prototype=SC.beget(this.prototype));
var b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(g,arguments[b])}g.constructor=c;
if(e){SC.Benchmark.end("SC.Object.extend")}return c},create:function(){var b=this,a=new b(arguments);
if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a
},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)
},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES
}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO
},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this
}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))
}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;
for(b=0;b<a;b++){SC._object_extend(this,c[b])}SC.generateGuid(this);this.init();var e=this.initMixin;
a=(e)?e.length:0;for(b=0;b<a;b++){e[b].call(this)}return this},mixin:function(){var b,a=arguments.length;
for(b=0;b<a;b++){SC.mixin(this,arguments[b])}for(b=0;b<a;b++){var c=arguments[b].initMixin;
if(c){c.call(this)}}return this},init:function(){this.initObservable();return this
},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);
var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.bindings.invoke("disconnect");
this.bindings=null;return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)
},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(b){var a=arguments.callee.caller;
if(!a){throw"superclass cannot determine the caller method"}return a.superclass?a.superclass.apply(this,arguments):null
},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)
},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor);
var b="%@:%@".fmt(a,SC.guidFor(this));if(a){this._object_toString=b}else{return b
}}return this._object_toString},awake:function(c){var f=this.outlets,b,a,e;for(b=0,a=f.length;
b<a;++b){e=f[b];this.get(e)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);
return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);
return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};
SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);
function findClassNames(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;
var b=[];var c=false;var a=function(e,f,i){i--;if(b.indexOf(f)>=0){return}b.push(f);
for(var g in f){if(g=="__scope__"){continue}if(g=="superclass"){continue}if(g=="__SC__"){g="SC"
}if(!g.match(/^[A-Z0-9]/)){continue}if(g=="SC"){if(c){continue}c=true}var j=(e)?[e,g].join("."):g;
var h=f[g];switch(SC.typeOf(h)){case SC.T_CLASS:if(!h._object_className){h._object_className=j
}if(i>=0){a(j,h,i)}break;case SC.T_OBJECT:if(i>=0){a(j,h,i)}break;case SC.T_HASH:if(((e)||(j==="SC"))&&(i>=0)){a(j,h,i)
}break;default:break}}};window.__SC__=SC;a(null,window,2)}SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)
};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))
};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){findClassNames()
}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass
}return(a&&a._object_className)?a._object_className:"Anonymous"};require("system/object");
SC._ChainObserver=function(a){this.property=a};SC._ChainObserver.createChain=function(e,k,g,a,b){var c=k.split("."),i=new SC._ChainObserver(c[0]),h=i,f=c.length;
for(var j=1;j<f;j++){h=h.next=new SC._ChainObserver(c[j])}i.objectDidChange(e);h.target=g;
h.method=a;h.context=b;return i};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,target:null,method:null,objectDidChange:function(a){if(a===this.object){return
}if(this.object&&this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)
}this.object=a;if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)
}this.propertyDidChange()},propertyDidChange:function(){var b=this.object;var f=this.property;
var e=(b&&b.get)?b.get(f):null;if(this.next){this.next.objectDidChange(e)}var g=this.target,h=this.method,c=this.context;
if(g&&h){var a=b?b.propertyRevision:null;if(c){h.call(g,b,f,e,c,a)}else{h.call(g,b,f,e,a)
}}},destroyChain:function(){var a=this.object;if(a&&a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)
}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;
return null}};sc_require("system/object");SC.LOG_BINDINGS=NO;SC.BENCHMARK_BINDING_NOTIFICATIONS=NO;
SC.BENCHMARK_BINDING_SETUP=NO;SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";
SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={beget:function(b){var a=SC.beget(this);
a.parentBinding=this;if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)
};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this
}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;
c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;
c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this
}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);
return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;
var c,a,b=SC.BENCHMARK_BINDING_SETUP;if(b){SC.Benchmark.start("SC.Binding.connect()")
}c=this._fromPropertyPath;a=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);
if(!a){a=this._toRoot}}else{if(c.indexOf("*")===0){c=[this._fromRoot||this._toRoot,c.slice(1)];
a=null}}}this._fromObserverData=[c,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);
if(!this._oneWay){c=this._toPropertyPath;a=this._toRoot;this._toObserverData=[c,this,this.toPropertyDidChange,a];
SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(b){SC.Benchmark.end("SC.Binding.connect()")
}if(this._syncOnConnect){this._syncOnConnect=NO;if(b){SC.Benchmark.start("SC.Binding.connect().sync")
}this.sync();if(b){SC.Benchmark.end("SC.Binding.connect().sync")}}},disconnect:function(){if(!this.isConnected){return this
}if(this._connectionPending){this._connectionPending=NO}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);
if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)
}}this.isConnected=NO;return this},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;
if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;
SC.Binding._changeQueue.add(this)}},toPropertyDidChange:function(c,b){if(this._oneWay){return
}var a=c.get(b);if(a!==this._transformedBindingValue){this._setBindingValue(c,b);
this._changePending=YES;SC.Binding._changeQueue.add(this)}},_setBindingValue:function(b,a){this._bindingSource=b;
this._bindingKey=a},_computeBindingValue:function(){var h=this._bindingSource,f=this._bindingKey,c,b;
this._bindingValue=c=(h?h.getPath(f):null);var g=this._transforms;if(g){var a=g.length,e;
for(b=0;b<a;b++){e=g[b];c=e(c,this)}}if(this._noError&&SC.typeOf(c)===SC.T_ERROR){c=null
}this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing){return NO
}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,c=SC.LOG_BINDINGS,a,e;
while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;
this._alternateConnectQueue=a;while(e=a.pop()){e._connect()}}while((a=this._changeQueue).length>0){if(c){console.log("Begin: Trigger changed bindings")
}b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;
while(e=a.pop()){e.applyBindingValue()}if(c){console.log("End: Trigger changed bindings")
}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._changePending=NO;
this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,e=SC.LOG_BINDINGS;
if(!this._oneWay&&this._fromTarget){if(e){console.log("%@: %@ -> %@".fmt(this,a,b))
}if(c){SC.Benchmark.start(this.toString()+"->")}this._fromTarget.setPathIfChanged(this._fromPropertyKey,a);
if(c){SC.Benchmark.end(this.toString()+"->")}}if(this._toTarget){if(e){console.log("%@: %@ <- %@".fmt(this,a,b))
}if(c){SC.Benchmark.start(this.toString()+"<-")}this._toTarget.setPathIfChanged(this._toPropertyKey,b);
if(c){SC.Benchmark.start(this.toString()+"<-")}}},sync:function(){if(!this.isConnected){return this
}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();
var c=this._fromTarget,b=this._fromPropertyKey;if(!c||!b){return this}var a=c.getPath(b);
if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;
SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var c,b,a;
c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);
if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];
b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]
}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);
if(a){this._toTarget=a[0];this._toPropertyKey=a[1]}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;
c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;
return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;
if(a&&(a===c.parentBinding._transform)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]
}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;
a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;
c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;
return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(f,e){if(f&&f.isEnumerable){var c=f.get("length");
f=(c>1)?a:(c<=0)?null:f.firstObject()}return f})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER
}return this.from(b).transform(function(e,c){if(SC.none(e)||(e==="")||(SC.isArray(e)&&e.length===0)){e=a
}return e})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(e,c){if(SC.none(e)){e=a
}return e})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]
}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},and:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,and:function(){return(this.get("valueA")&&this.get("valueB"))
}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,or:function(){return(this.get("valueA")||this.get("valueB"))
}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)
})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
return(c===SC.T_ERROR)?b:SC.none(b)})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;
var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;
var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)
}};SC.binding=function(b,a){return SC.Binding.from(b,a)};SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);
this.write();arguments.callee.base.apply(this,arguments)},write:function(){var b=this.get("name"),j=this.get("value"),c=this.get("expires"),l=this.get("path"),f=this.get("domain"),a=this.get("secure");
var i="";if(c&&(SC.typeOf(c)===SC.T_NUMBER||(SC.DateTime&&c.get&&c.get("milliseconds"))||SC.typeOf(c.toUTCString)===SC.T_FUNCTION)){var e;
if(SC.typeOf(c)===SC.T_NUMBER){e=new Date();e.setTime(e.getTime()+(c*24*60*60*1000))
}else{if(SC.DateTime&&c.get&&c.get("milliseconds")){e=new Date(c.get("milliseconds"))
}else{if(SC.typeOf(c.toUTCString)===SC.T_FUNCTION){e=c}}}if(e){i="; expires="+e.toUTCString()
}}var k=l?"; path="+l:"";var h=f?"; domain="+f:"";var g=a?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),i,k,h,g].join("");
return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!=""){var e=document.cookie.split(";");
for(var c=0;c<e.length;c++){var b=String(e[c]).trim();if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})
}}}return null}});SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this
}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))
},isError:YES});SC.Error.desc=function(e,a,f,c){var b={message:e};if(a!==undefined){b.label=a
}if(c!==undefined){b.code=c}if(f!==undefined){b.errorValue=f}return this.create(b)
};SC.$error=function(b,a,e,f){return SC.Error.desc(b,a,e,f)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)
};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null
}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");
sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");
SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(f){if(f.length<1000){return f.slice()
}var e=0,a=[],b=f[0];while(b!==0){a[e]=b;e=(b<0)?(0-b):b;b=f[e]}a[e]=0;this._hint(0,e,a);
return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");
if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;
a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];
return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined
}.property(),rangeStartForIndex:function(c){var g=this._content,a=this.get("max"),b,f,e;
if(c>=a){return a}if(Math.abs(g[c])>c){return c}e=c-(c%SC.IndexSet.HINT_SIZE);b=g[e];
if(b<0||b>c){b=e}f=Math.abs(g[b]);while(f<c){b=f;f=Math.abs(g[b])}return b},isEqual:function(c){if(c===this){return YES
}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var f=this._content,b=c._content,e=0,a=f[e];
do{if(b[e]!==a){return NO}e=Math.abs(a);a=f[e]}while(e!==0);return YES},indexBefore:function(b){if(b===0){return -1
}b--;var c=this._content,a=this.get("max"),e=this.rangeStartForIndex(b);if(!c){return null
}while((e===a)||(c[e]<0)){if(e===0){return -1}b=e-1;e=this.rangeStartForIndex(b)}return b
},indexAfter:function(b){var e=this._content,a=this.get("max"),f,c;if(!e||(b>=a)){return -1
}b++;f=this.rangeStartForIndex(b);c=e[f];while(c<0){if(c===0){return -1}b=f=Math.abs(c);
c=e[f]}return b},contains:function(h,c){var b,g,a,f,e;if(c===undefined){if(h===null||h===undefined){return NO
}if(typeof h===SC.T_NUMBER){c=1}else{if(h&&h.isIndexSet){if(h===this){return YES}b=h._content;
g=0;a=b[g];while(a!==0){if((a>0)&&!this.contains(g,a-g)){return NO}g=Math.abs(a);
a=b[g]}return YES}else{c=h.length;h=h.start}}}f=this.rangeStartForIndex(h);e=this._content[f];
return(e>0)&&(f<=h)&&(e>=(h+c))},intersects:function(g,c){var b,f,a,e;if(c===undefined){if(typeof g===SC.T_NUMBER){c=1
}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;f=0;a=b[f];while(a!==0){if((a>0)&&this.intersects(f,a-f)){return YES
}f=Math.abs(a);a=b[f]}return NO}else{c=g.length;g=g.start}}}f=this.rangeStartForIndex(g);
b=this._content;a=b[f];e=g+c;while(f<e){if(a===0){return NO}if((a>0)&&(a>g)){return YES
}f=Math.abs(a);a=b[f]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()
}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1
}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange().endPropertyChanges();
return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;
this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR
}var f,j,e;if(a&&a.isIndexSet){f=a._content;if(!f){return this}j=0;e=f[0];while(e!==0){if(e>0){this.add(j,e-j)
}j=e<0?0-e:e;e=f[j]}return this}else{if(b===undefined){if(a===null||a===undefined){return this
}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1
}}}if(b<=0){return this}var g=this.get("max"),c=g,i,h;f=this._content;if(a===g){if(a>0){j=this.rangeStartForIndex(a-1);
e=f[j];if(e>0){delete f[g];f[j]=g=a+b;a=j}else{f[g]=g=a+b}}else{f[a]=g=b}f[g]=0;this.set("max",g);
this.set("length",this.length+b);b=g-a}else{if(a>g){f[g]=0-a;f[a]=a+b;f[a+b]=0;this.set("max",a+b);
this.set("length",this.length+b);b=a+b-g;a=g}else{j=this.rangeStartForIndex(a);e=f[j];
g=a+b;i=0;if((a>0)&&(j===a)&&(e<=0)){j=this.rangeStartForIndex(a-1);e=f[j]}if(e<0){f[j]=0-a;
if(Math.abs(e)>g){f[a]=0-g;f[g]=e}else{f[a]=e}}else{a=j;if(e>g){g=e}}j=a;while(j<g){h=f[j];
if(h===0){f[g]=0;e=g;i+=g-j}else{e=Math.abs(h);if(e>g){f[g]=h;e=g}if(h<0){i+=e-j}}delete f[j];
j=e}if((j=f[g])>0){delete f[g];g=j}f[a]=g;if(g>c){this.set("max",g)}this.set("length",this.get("length")+i);
b=g-a}}this._hint(a,b);if(i!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1
}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;
a=a.start}}}}if(b<=0){return this}var g=this.get("max"),c=g,f=this._content,k,e,j,h,i;
if(a>=g){return this}k=this.rangeStartForIndex(a);e=f[k];i=a+b;j=0;if((a>0)&&(k===a)&&(e>0)){k=this.rangeStartForIndex(a-1);
e=f[k]}if(e>0){f[k]=a;if(e>i){f[a]=i;f[i]=e}else{f[a]=e}}else{a=k;e=Math.abs(e);if(e>i){i=e
}}k=a;while(k<i){h=f[k];if(h===0){f[i]=0;e=i}else{e=Math.abs(h);if(e>i){f[i]=h;e=i
}if(h>0){j+=e-k}}delete f[k];k=e}if((k=f[i])<0){delete f[i];i=Math.abs(k)}if(f[i]===0){delete f[i];
f[a]=0;this.set("max",a)}else{f[a]=0-i}this.set("length",this.get("length")-j);b=i-a;
this._hint(a,b);if(j!==0){this.enumerableContentDidChange()}return this},_hint:function(h,e,c){if(c===undefined){c=this._content
}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[h]),g=h-(h%b)+b,f=h+e;while(g<f){while((a!==0)&&(a<=g)){h=a;
a=Math.abs(c[h])}if(a===0){delete c[g]}else{if(g!==h){c[g]=h}}g+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR
}var a=this.length;this._content.length=1;this._content[0]=0;this.set("length",0).set("max",0);
if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR
}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))
}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();
return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();
var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)
},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)
},inspect:function(){var f=this._content,b=f.length,a=0,c=[],e;for(a=0;a<b;a++){e=f[a];
if(e!==undefined){c.push("%@:%@".fmt(a,e))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))
},forEachRange:function(g,e){var b=this._content,f=0,a=b[f],c=this.source;if(e===undefined){e=null
}while(a!==0){if(a>0){g.call(e,f,a-f,this,c)}f=Math.abs(a);a=b[f]}return this},forEachIn:function(b,c,k,g){var h=this._content,j=0,i=0,e=b+c,a=this.source,f=h[j];
if(g===undefined){g=null}while(f!==0){if(j<b){j=b}while((j<f)&&(j<e)){k.call(g,j++,i++,this,a)
}if(j>=e){j=f=0}else{j=Math.abs(f);f=h[j]}}return this},lengthIn:function(h,e){var a=0;
if(e===undefined){if(h===null||h===undefined){return 0}else{if(typeof h===SC.T_NUMBER){e=1
}else{if(h.isIndexSet){h.forEachRange(function(j,i){a+=this.lengthIn(j,i)},this);
return a}else{e=h.length;h=h.start}}}}if(this.get("length")===0){return 0}var c=this._content,g=0,b=c[g],f=h+e;
while(g<f&&b!==0){if(b>0){a+=(b>f)?f-g:b-g}g=Math.abs(b);b=c[g]}return a},source:null,indexOf:function(e,c){var g=this.source;
if(!g){throw"%@.indexOf() requires source".fmt(this)}var b=g.get("length"),f=this._content,h=f[0]<0?Math.abs(f[0]):0,a;
while(h>=0&&h<b){a=g.indexOf(e,h);if(a<0){return -1}if(this.contains(a)){return a
}h=a+1}return -1},lastIndexOf:function(e,c){var f=this.source;if(!f){throw"%@.lastIndexOf() requires source".fmt(this)
}var b=f.get("length"),g=this.max-1,a;if(g>=b){g=b-1}while(g>=0){a=f.lastIndexOf(e,g);
if(a<0){return -1}if(this.contains(a)){return a}g=a+1}return -1},forEachObject:function(h,f){var e=this.source;
if(!e){throw"%@.forEachObject() requires source".fmt(this)}var c=this._content,g=0,a=0,b=c[g];
if(f===undefined){f=null}while(b!==0){while(g<b){h.call(f,e.objectAt(g),g,e,this);
g++}g=Math.abs(b);b=c[g]}return this},addObject:function(c,e){var f=this.source;if(!f){throw"%@.addObject() requires source".fmt(this)
}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.add(a);
if(e){return this}g=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)
},this);return this},removeObject:function(c,e){var f=this.source;if(!f){throw"%@.removeObject() requires source".fmt(this)
}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.remove(a);
if(e){return this}g=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)
},this);return this},LOG_OBSERVING:NO,forEach:function(h,f){var c=this._content,g=0,a=0,e=this.source,b=c[g];
if(f===undefined){f=null}while(b!==0){while(g<b){h.call(f,g++,a++,this,e)}g=Math.abs(b);
b=c[g]}return this},nextObject:function(g,b,c){var f=this._content,e=c.next,a=this.get("max");
if(b===null){b=e=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===e){do{b=Math.abs(e);
e=f[b]}while(e<0);c.next=e}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))
},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;
SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";
SC.LOGGER_LOG_INFO="INFO: ";SC.LOGGER_LOG_WARN="WARNING: ";SC.LOGGER_LOG_DEBUG="DEBUG: ";
SC.Logger=SC.Object.create({debugEnabled:NO,exists:function(){return typeof(this.get("reporter"))!=="undefined"&&this.get("reporter")!=null
}.property("reporter").cacheable(),fallBackOnAlert:NO,fallBackOnLog:YES,format:YES,reporter:console,log:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.log)==="function"){if(this.get("format")){a.log(this._argumentsToString.apply(this,arguments))
}else{a.log.apply(a,arguments)}return true}else{if(this.fallBackOnAlert){var b=this.get("format")?this._argumentsToString.apply(this,arguments):arguments;
if(this.get("exists")&&typeof(a.alert)==="function"){a.alert(b)}else{alert(b)}return true
}}return false},debug:function(){var c=this.get("reporter");if(this.get("debugEnabled")!==YES){return false
}if(this.get("exists")&&(typeof c.debug==="function")){c.debug.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_DEBUG)
}return this.log.apply(this,b)}}return false},dir:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.dir)==="function"){a.dir.apply(a,arguments);return true
}return(this.fallBackOnLog)?this.log.apply(this,arguments):false},dirxml:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.dirxml)==="function"){a.dirxml.apply(a,arguments);
return true}return(this.fallBackOnLog)?this.log.apply(this,arguments):false},error:function(){var c=this.get("reporter");
if(this.get("exists")&&typeof(c.error)==="function"){c.error.apply(c,arguments);return true
}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_ERROR)
}return this.log.apply(this,b)}}return false},group:function(b){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.group)==="function"){a.group(b);return true}return false
},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.groupEnd)==="function"){a.groupEnd();
return true}return false},info:function(){var c=this.get("reporter");if(this.get("exists")&&typeof(c.info)==="function"){c.info.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_INFO)
}return this.log.apply(this,b)}}return false},profile:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.profile)==="function"){a.profile();return true}return false
},profileEnd:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.profileEnd)==="function"){a.profileEnd();
return true}return false},time:function(b){var a=this.get("reporter");if(this.get("exists")&&typeof(a.time)==="function"){a.time(b);
return true}return false},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&typeof(a.timeEnd)==="function"){a.timeEnd(b);
return true}return false},trace:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.trace)==="function"){a.trace();
return true}return false},warn:function(){var c=this.get("reporter");if(this.get("exists")&&typeof(c.warn)==="function"){c.warn.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_WARN)
}return this.log.apply(this,b)}}return false},_argumentsToArray:function(e){if(!e){return[]
}var b=[];for(var c=0;c<e.length;c++){b[c]=e[c]}return b},_argumentsToString:function(){var b="";
for(var a=0;a<arguments.length-1;a++){b+=arguments[a]+SC.LOGGER_LOG_DELIMITER}b+=arguments[arguments.length-1];
return b}});sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();
if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))
}this._runLoopInProgress=YES;return this},isRunLoopInProgress:function(){return this._runLoopInProgress
}.property(),endRunLoop:function(){var a;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")
}do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a);
this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.endRunLoop ~ End")
}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;return this},invokeOnce:function(a,b){if(b===undefined){b=a;
a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()
}this._invokeQueue.add(a,b);return this},invokeLast:function(a,b){if(b===undefined){b=a;
a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()
}this._invokeLastQueue.add(a,b);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;
if(a&&a.targets>0){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b
},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.targets>0){this._invokeLastQueue=null;
b=YES;if(b){a.invokeMethods()}}return b}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;
SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()
}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;
if(!a){throw"SC.RunLoop.end() called outside of a runloop!"}a.endRunLoop();return this
};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")
}return NO};SC.run=function(g,f,b){if(b){var a=SC.RunLoop.isRunLoopInProgress();if(!a){SC.RunLoop.begin()
}g.call(f);if(!a){SC.RunLoop.end()}}else{try{SC.RunLoop.begin();if(g){g.call(f)}SC.RunLoop.end()
}catch(c){if(SC.ExceptionHandler){SC.ExceptionHandler.handleException(c)}if(!SC.browser.msie){throw c
}}}};sc_require("system/object");sc_require("mixins/enumerable");sc_require("mixins/copyable");
sc_require("mixins/freezable");SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;
if(c){a+=c.get("length")}if(b){b.forEach(function(e){a+=e.get("length")})}return a
}.property().cacheable(),sources:function(){var c=[],e=this._sets,b=e?e.length:0,a,g,f;
for(a=0;a<b;a++){g=e[a];if(g&&g.get("length")>0&&g.source){c.push(g.source)}}return c
}.property().cacheable(),indexSetForSource:function(f){if(!f||!f.isSCArray){return null
}var b=this._indexSetCache,e=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(f)];
if(c&&c._sourceRevision&&(c._sourceRevision!==f.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(f,NO);
if(c&&c.get("length")===0){c=null}if(e){if(c){c=c.copy()}e.forEach(function(g){if((a=f.indexOf(g))>=0){if(!c){c=SC.IndexSet.create()
}c.add(a)}},this)}if(c){c=b[SC.guidFor(f)]=c.frozenCopy();c._sourceRevision=f.propertyRevision
}}return c},_indexSetForSource:function(g,h){if(h===undefined){h=YES}var e=SC.guidFor(g),c=this[e],f=this._sets,a=f?f.length:0,b=null;
if(c>=a){c=null}if(SC.none(c)){if(h&&!this.isFrozen){this.propertyWillChange("sources");
if(!f){f=this._sets=[]}b=f[a]=SC.IndexSet.create();b.source=g;this[e]=a;this.propertyDidChange("sources")
}}else{b=f?f[c]:null}return b},add:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR
}var h,g,k,j,c,f,i,l;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.add()"
}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){h=a._sets;l=a._objects;
g=h?h.length:0;this.beginPropertyChanges();for(k=0;k<g;k++){j=h[k];if(j&&j.get("length")>0){this.add(j.source,j)
}}if(l){this.addObjects(l)}this.endPropertyChanges();return this}}j=this._indexSetForSource(a,YES);
c=this.get("length");i=j.get("length");f=c-i;j.add(b,e);this._indexSetCache=null;
f+=j.get("length");if(f!==c){this.propertyDidChange("length");this.enumerableContentDidChange();
if(i===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR
}var h,g,k,j,c,f,i,l;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.remove()"
}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){h=a._sets;l=a._objects;
g=h?h.length:0;this.beginPropertyChanges();for(k=0;k<g;k++){j=h[k];if(j&&j.get("length")>0){this.remove(j.source,j)
}}if(l){this.removeObjects(l)}this.endPropertyChanges();return this}}j=this._indexSetForSource(a,YES);
c=this.get("length");f=c-j.get("length");if(j&&(l=this._objects)){if(e!==undefined){b=SC.IndexSet.create(b,e);
e=undefined}l.forEach(function(m){k=a.indexOf(m);if(b.contains(k)){l.remove(m);f--
}},this)}j.remove(b,e);i=j.get("length");f+=i;this._indexSetCache=null;if(f!==c){this.propertyDidChange("length");
this.enumerableContentDidChange();if(i===0){this.notifyPropertyChange("sources")}}return this
},contains:function(b,e,a){if(e===undefined&&a===undefined){return this.containsObject(b)
}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(e,a)},intersects:function(b,e,a){var c=this.indexSetForSource(b,NO);
if(!c){return NO}return c.intersects(e,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;
c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var e=this._objects,b,c;
if(!e){e=this._objects=SC.CoreSet.create()}b=e.get("length");e.addEach(a);c=e.get("length");
this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()
}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);
c.length=0;return a},removeObjects:function(b){var f=this._objects,c,e,a;if(!f){return this
}c=f.get("length");f.removeEach(b);e=f.get("length");if(a=this._sets){a.forEach(function(g){c+=g.get("length");
g.removeObjects(b);e+=g.get("length")},this)}this._indexSetCache=null;if(e!==c){this.propertyDidChange("length");
this.enumerableContentDidChange()}return this},containsObject:function(c){var f=this._objects;
if(f&&f.contains(c)){return YES}var e=this._sets,b=e?e.length:0,a,g;for(a=0;a<b;a++){g=e[a];
if(g&&g.indexOf(c)>=0){return YES}}return NO},constrain:function(e){var f,b,a,c;this.beginPropertyChanges();
this.get("sources").forEach(function(g){if(g===e){return}var h=this._indexSetForSource(e,NO);
if(h){this.remove(e,h)}},this);f=this._indexSetForSource(e,NO);if(f&&((a=f.get("max"))>(b=e.get("length")))){this.remove(e,b,a-b)
}if(c=this._objects){c.forEach(function(g){if(e.indexOf(g)<0){this.removeObject(g)
}},this)}this.endPropertyChanges();return this},isEqual:function(h){var g,e,b,a,c,f;
if(!h||!h.isSelectionSet){return NO}if(h===this){return YES}if((this._sets===h._sets)&&(this._objects===h._objects)){return YES
}if(this.get("length")!==h.get("length")){return NO}g=this._objects;e=h._objects;
if(g||e){if((g?g.get("length"):0)!==(e?e.get("length"):0)){return NO}if(g&&!g.isEqual(e)){return NO
}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){f=c.objectAt(b);g=this._indexSetForSource(f,NO);
e=this._indexSetForSource(f,NO);if(!!e!==!!g){return NO}if(g&&!g.isEqual(e)){return NO
}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0
}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");
this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this
},copy:function(){var c=this.constructor.create(),e=this._sets,b=e?e.length:0,a,f;
if(e&&b>0){e=c._sets=e.slice();for(a=0;a<b;a++){if(!(f=e[a])){continue}f=e[a]=f.copy();
c[SC.guidFor(f.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c
},freeze:function(){if(this.isFrozen){return this}var a=this._sets,b=a?a.length:0,c;
while(--b>=0){if(c=a[b]){c.freeze()}}if(this._objects){this._objects.freeze()}return arguments.callee.base.apply(this,arguments)
},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))
},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))
},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var f=b?b[0]:null,e=f?f.source:null,a=f?f.firstObject():-1;
if(e&&a>=0){return e.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,f,b){var e,a;
if(c===0){e=b.objects=[];this.forEach(function(g){e.push(g)},this);b.max=e.length
}e=b.objects;a=e[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(h,f){var c=this._sets,e=this._objects,b=c?c.length:0,g,a;
for(a=0;a<b;a++){g=c[a];if(g){g.forEachObject(h,f)}}if(e){e.forEach(h,f)}return this
}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();
sc_require("mixins/enumerable");sc_require("mixins/array");sc_require("mixins/observable");
sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;
if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;
a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0
}.property().cacheable(),provideLength:function(a){if(SC.none(a)){this._sa_content=null
}if(a!==this._length){this._length=a;if(this._requestingLength<=0){this.enumerableContentDidChange()
}}return this},rangeWindowSize:1,requestedRangeIndex:[],objectAt:function(a){var c=this._sa_content,b;
if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){this.requestIndex(a);b=c[a]
}return b},definedIndexes:function(e){var c=SC.IndexSet.create(),f=this._sa_content,b,a;
if(!f){return c.freeze()}if(e){e.forEach(function(g){if(f[g]!==undefined){c.add(g)
}})}else{a=f.length;for(b=0;b<a;b++){if(f[b]!==undefined){c.add(b)}}}return c.freeze()
},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),f=b;
if(a>1){f=f-Math.floor(f%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var e=this._TMP_RANGE;
if(this.wasRangeRequested(f)===-1){e.start=f;e.length=a;c.sparseArrayDidRequestRange(this,e);
this.requestedRangeIndex.push(f)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,f+a)
}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;
b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);
if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,f){var c=this._sa_content;
if(!c){c=this._sa_content=[]}var e=b.start,a=b.length;while(--a>=0){c[e+a]=f[a]}if(this._requestingIndex<=0){this.enumerableContentDidChange()
}return this},_TMP_PROVIDE_ARRAY:[],_TMP_PROVIDE_RANGE:{length:1},provideObjectAtIndex:function(c,b){var e=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;
e[0]=b;a.start=c;return this.provideObjectsInRange(a,e)},objectsDidChangeInRange:function(a){var b=this._sa_content;
if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var e=a.start,c=Math.min(e+a.length,b.length);
while(--c>=e){b[c]=undefined}}}this.enumerableContentDidChange(a);return this},indexOf:function(c){var a=this.delegate;
if(a&&a.sparseArrayDidRequestIndexOf){return a.sparseArrayDidRequestIndexOf(this,c)
}else{var b=this._sa_content;if(!b){b=this._sa_content=[]}return b.indexOf(c)}},replace:function(b,h,f){f=f||[];
var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,h,f)){return this
}}var e=this._sa_content;if(!e){e=this._sa_content=[]}e.replace(b,h,f);var a=f?(f.get?f.get("length"):f.length):0;
var g=a-h;if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=g;
this.propertyDidChange("length")}this.enumerableContentDidChange(b,h,g);return this
},reset:function(){this._sa_content=null;this._length=null;this.enumerableContentDidChange();
this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});
SC.SparseArray.array=function(a){return this.create({_length:a||0})};if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/runtime")
}SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()
}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);
var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;
this.strings=a}}},hasStrings:NO,strings:{},toString:function(){if(!this.language){SC.Locale._assignLocales()
}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(b,c){var a=this.strings[b];
if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c
}}return b}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;
var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;
var e=((c)?SC.browser.language:null)||b||SC.browser.language||"en";e=SC.Locale.normalizeLanguage(e);
var a=this.localeClassFor(e);if(e!=this.currentLanguage){this.currentLanguage=e;this.currentLocale=a.create()
}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);
var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()
}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;
if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)
}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;
if(a){if(!this.prototype.hasOwnProperty("strings")){this.prototype.strings=SC.clone(a)
}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;
return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"
}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a
}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"
},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;
a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;
return a}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};
SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this
};sc_require("system/locale");SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"});
SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.SAFARI_FOCUS_BEHAVIOR=YES;
SC.mixin({data:function(c,b,e){c=(c===window)?"@window":c;var f=SC.hashFor(c);var a=SC._data_cache;
if(!a){SC._data_cache=a={}}var g=a[f];if(b&&!g){a[f]=g={}}if(g&&(e!==undefined)){g[b]=e
}return(b)?g[b]:g},removeData:function(e,c){e=(e===window)?"@window":e;var f=SC.hashFor(e);
var a=SC._data_cache;if(!a){return undefined}var g=a[f];if(!g){return undefined}var b=(c)?g[c]:g;
if(c){delete g[c]}else{delete a[f]}return b}});SC.mixin(Function.prototype,{invokeLater:function(h,a){if(a===undefined){a=1
}var g=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);
b.unshift(h);var e=this,c=g;g=function(){return c.apply(e,b.slice(1))}}return SC.Timer.schedule({target:h,action:g,interval:a})
}});SC.Controller=SC.Object.extend({isEditable:YES});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")
}.property(),selection:function(c,g){var b=this._scsel_selection,h=b?b.get("length"):0,e,f,a;
if((g===undefined)||!this.get("allowsSelection")){g=b}a=(g&&g.isEnumerable)?g.get("length"):0;
if((a>1)&&!this.get("allowsMultipleSelection")){if(h>1){g=SC.SelectionSet.create().addObject(b.get("firstObject")).freeze();
a=1}else{g=b;a=h}}if((a===0)&&!this.get("allowsEmptySelection")){if(h===0){g=this.get("firstSelectableObject");
if(g){g=SC.SelectionSet.create().addObject(g).freeze()}else{g=SC.SelectionSet.EMPTY
}a=g.get("length")}else{g=b;a=h}}if(a===0){g=SC.SelectionSet.EMPTY}g=g.frozenCopy();
this._scsel_selection=g;return g}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");
return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)
}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()
}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)
}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this
}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();
this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this
}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");
var b=this.get("selection");var e=this.get("allowsEmptySelection");var c;if(!b){return this
}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){b=b.copy().constrain(a).freeze();
this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!e){this.selectObject(this.get("firstSelectableObject"),NO)
}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");
SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this
}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;
a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)
}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;
a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;
a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)
}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");
return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;
return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw"%@ cannot add content".fmt(this)
}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)
}else{throw"%@.content does not support addObject".fmt(this)}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw"%@ cannot remove content".fmt(this)
}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)
}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();
return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();
return b?b.objectAt(a):undefined},replace:function(h,g,e){if(!e||e.get("length")===0){if(!this.get("canRemoveContent")){throw"%@ cannot remove objects from the current content".fmt(this)
}}else{if(!this.get("canReorderContent")){throw"%@ cannot add or reorder the current content".fmt(this)
}}var c=this.get("content");var b=[],a,f;if(this.get("destroyOnRemoval")){for(a=0;
a<g;a++){b.push(c.objectAt(a+h))}}if(c){c.replace(h,g,e)}for(a=0,f=b.length;a<f;a++){b[a].destroy()
}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1
},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()
},_scac_cached:NO,_scac_observableContent:function(){var b=this._scac_cached;if(b!==NO){return b
}var f=this.get("content"),g,e,c,a;if(SC.none(f)){return this._scac_cached=[]}if(!f.isEnumerable){b=this.get("allowsSingleContent")?[f]:[];
return(this._scac_cached=b)}g=this.get("orderBy");if(!g){if(f.isSCArray){return(this._scac_cached=f)
}else{throw"%@.orderBy is required for unordered content".fmt(this)}}switch(SC.typeOf(g)){case SC.T_STRING:g=[g];
break;case SC.T_FUNCTION:e=g;break;case SC.T_ARRAY:break;default:throw"%@.orderBy must be Array, String, or Function".fmt(this)
}if(!e){a=g.get("length");e=function(k,i){var h=0,j=0,l,n,m,o;for(h=0;(h<a)&&(j===0);
h++){l=g.objectAt(h);o=NO;if(l.indexOf("ASC")>-1){l=l.split("ASC ")[1]}else{if(l.indexOf("DESC")>-1){l=l.split("DESC ")[1];
o=YES}}if(!k){n=k}else{if(k.isObservable){n=k.get(l)}else{n=k[l]}}if(!i){m=i}else{if(i.isObservable){m=i.get(l)
}else{m=i[l]}}j=SC.compare(n,m);if(o){j=(-1)*j}}return j}}b=[];f.forEach(function(h){b.push(h)
});b.sort(e);e=null;return(this._scac_cached=b)},_scac_contentDidChange:function(){this._scac_cached=NO;
var i=this.get("content"),e=!!this.get("orderBy"),j=this._scac_content,a=this._scac_length||0,h=this._scac_rangeObserver,b=this._scac_rangeDidChange,g=this._scac_enumerableDidChange,c=this._scac_contentStatusDidChange,f;
if(j===i){return this}if(j){if(h&&j.isSCArray){j.removeRangeObserver(h)}else{if(j.isEnumerable){j.removeObserver("[]",this,g)
}}j.removeObserver("status",this,c)}h=null;this._scac_cached=NO;this._scac_content=i;
if(i){if(!e&&i.isSCArray){h=i.addRangeObserver(null,this,b)}else{if(i.isEnumerable){i.addObserver("[]",this,g)
}}f=i.isEnumerable?i.get("length"):1;i.addObserver("status",this,c)}else{f=SC.none(i)?0:1
}this._scac_rangeObserver=h;this._scac_length=f;this._scac_contentStatusDidChange();
this.enumerableContentDidChange(0,f,f-a);this.updateSelectionAfterContentChange()
}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;
this._scac_length=c;this.beginPropertyChanges();this._scac_cached=NO;this.enumerableContentDidChange(0,c,c-b);
this.endPropertyChanges();this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_rangeDidChange:function(f,e,b,a){if(b!=="[]"){return
}var c=this.get("content");this._scac_length=c.get("length");this._scac_cached=NO;
if(a){this.beginPropertyChanges();a.forEachRange(function(h,g){this.enumerableContentDidChange(h,g,0)
},this);this.endPropertyChanges();this.updateSelectionAfterContentChange()}},_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")
}});require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))
}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;
if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()
}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");
if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);
return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()
}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,e){if(b==="content"){if(e!==undefined){this.content=e
}return this.content}var c=this.get("observableContent"),g,f,a;if(c===null||c===undefined){return undefined
}if(e===undefined){if(c.isEnumerable){e=c.getEach(b);g=e.get("length");if(g>0){a=YES;
f=e.objectAt(0);while((--g>0)&&a){if(f!==e.objectAt(g)){a=NO}}if(a){e=f}}else{e=undefined
}}else{e=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw"%@.%@ is not editable".fmt(this,b)
}if(c.isEnumerable){c.setEach(b,e)}else{if(c.isObservable){c.set(b,e)}else{c[b]=e
}}}return e},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()
}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");
if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)
}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,e=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;
if(b===e){return this}this._scoc_observableContent=e;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)
}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(e){if(e.isEnumerable){e.addObserver("[]",this,c)
}else{if(e.isObservable){e.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(e&&e.isEnumerable)){this._scoc_enumerableContentDidChange()
}else{this.contentPropertyDidChange(e,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;
if(c){c.forEach(function(e){if(e.isObservable){e.removeObserver("*",this,a)}},this);
c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(e){if(c.contains(e)){return
}c.add(e);if(e.isObservable){e.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;
this.contentPropertyDidChange(b,"*");return this}});SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED
},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)
},treeItemBranchIndexes:function(f,c){var e=this.get("treeItemChildren"),b,h,a,g;
if(!e){return null}b=SC.IndexSet.create();h=e.get("length");for(a=0;a<h;a++){if(!(g=e.objectAt(a))){continue
}if(!g.get("treeItemChildren")){continue}if(g.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)
}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;
SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(b,c,a){var e=b.get("selection");
return e?e.contains(c,a):NO},contentIndexIsEnabled:function(b,c,a){return b.get("isEnabled")
},contentGroupIndexes:function(a,b){return null},contentIndexIsGroup:function(b,c,a){return NO
},contentIndexOutlineLevel:function(b,c,a){return -1},contentIndexDisclosureState:function(b,c,a){return SC.LEAF_NODE
},contentIndexExpand:function(b,c,a){console.log("contentIndexExpand(%@, %@, %@)".fmt(b,c,a))
},contentIndexCollapse:function(b,c,a){console.log("contentIndexCollapse(%@, %@, %@)".fmt(b,c,a))
}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");
SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{item:null,delegate:null,parentObserver:null,parentItem:function(){var a=this.get("parentObserver");
return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var f=this.get("item"),b,g,a,e,c;
if(!f){return SC.IndexSet.EMPTY}else{if(f.isTreeItemContent){g=this.get("parentItem");
a=this.get("index");return f.treeItemBranchIndexes(g,a)}else{e=this.get("children");
if(!e){return null}c=SC.IndexSet.create();b=e.get("length");g=f;for(a=0;a<b;a++){if(!(f=e.objectAt(a))){continue
}if(!this._computeChildren(f,g,a)){continue}if(this._computeDisclosureState(f,g,a)!==SC.LEAF_NODE){c.add(a)
}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")
}.property("parentObserver").cacheable(),length:0,objectAt:function(e){var a=this.get("length"),g=this.get("item"),b=this._objectAtCache,i=e,h=0,c,f;
if(e>=a){return undefined}if(this.get("isHeaderVisible")){if(e===0){return g}else{i--
}}g=null;if(!b){b=this._objectAtCache=[]}if((g=b[e])!==undefined){return g}f=this.get("children");
if(!f){return undefined}if(c=this.get("branchIndexes")){c.forEach(function(l){if(g||(l>i)){return
}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>i){g=k.objectAt(i-l);
i=-1}else{i-=j-1}},this)}if(i>=0){g=f.objectAt(i)}b[e]=g;return g},replace:function(a,b,k,e){var j=a,h=null,f,g,i;
if(e===undefined){e=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){j--}if(j<0){throw"Tree Item cannot replace itself"
}if(f=this.get("branchIndexes")){f.forEach(function(l){if(h||(l>=j)){return}if(!(h=this.branchObserverAt(l))){return
}g=h.get("length");if((l+g===j)&&e===SC.DROP_AFTER){j-=l}else{if(l+g>j){j-=l}else{j-=g-1;
h=null}}},this)}if(h){h.replace(j,b,k,e);return this}i=j+b;if(b>1&&f){f.forEachIn(j,f.get("max")-j,function(l){if(l>i){return
}if(!(h=this.branchObserverAt(l))){return}g=h.get("length");i-=g-1},this)}b=i-j;var c=this.get("children");
if(!c){throw"cannot replace() tree item with no children"}if((b<0)||(i>c.get("length"))){throw"replace() range must lie within a single tree item"
}c.replace(j,b,k,e);return this},observerContentDidChange:function(h,g,f){this.invalidateBranchObserversAt(h);
this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;
this._contentGroupIndexes=NO;this.notifyPropertyChange("branchIndexes");var b=this.get("length"),c=this._computeLength(),a=this.get("parentObserver"),e;
if(b!==c){this.set("length",c)}if(!this._notifyParent){return this}if(a){e=SC.IndexSet.create(this.get("index"));
a._childrenRangeDidChange(a.get("children"),null,"[]",e)}else{if(b===c){g=this.expandChildIndex(h+g);
h=this.expandChildIndex(h);g=g-h;f=0}else{h=this.expandChildIndex(h);g=c-h;f=c-b}this.enumerableContentDidChange(h,g,f)
}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");
if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(e){b+=this.branchObserverAt(e).get("length")-1
},this);return b},_contentGroupIndexes:NO,contentGroupIndexes:function(h,f){if(f!==this){return null
}var g=this._contentGroupIndexes;if(g!==NO){return g}if(this.get("parentObserver")){return null
}var k=this.get("item"),j,b,e,i,c,a;if(k&&k.isTreeItemContent){j=k.get("treeItemIsGrouped")
}else{j=!!this.delegate.get("treeItemIsGrouped")}if(j){g=SC.IndexSet.create();b=this.get("branchIndexes");
a=this.get("children");e=a?a.get("length"):0;i=c=0;if(b){b.forEach(function(m){g.add(i,(m+1)-c);
i+=(m+1)-c;c=m+1;var l=this.branchObserverAt(m);if(l){i+=l.get("length")-1}},this)
}if(c<e){g.add(i,e-c)}}else{g=null}this._contentGroupIndexes=g;return g},contentIndexIsGroup:function(b,e,a){var c=this.contentGroupIndexes(b,e);
return c?c.contains(a):NO},contentIndexOutlineLevel:function(k,h,f){if(h!==this){return -1
}var a=this._outlineLevelCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._outlineLevelCache=[]
}var g=this.get("length"),l=f,e=0,i=null,c,b,j;if(f>=g){return -1}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("outlineLevel")-1
}else{l--}}if(c=this.get("branchIndexes")){c.forEach(function(o){if((i!==null)||(o>l)){return
}var n=this.branchObserverAt(o),m;if(!n){return}m=n.get("length");if(o+m>l){i=n.contentIndexOutlineLevel(k,n,l-o);
l=-1}else{l-=m-1}},this)}if(l>=0){i=this.get("outlineLevel")}a[f]=i;return i},contentIndexDisclosureState:function(k,h,f){if(h!==this){return -1
}var a=this._disclosureStateCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._disclosureStateCache=[]
}var g=this.get("length"),l=f,e=0,i=null,c,b,j;if(f>=g){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("disclosureState")
}else{l--}}if(c=this.get("branchIndexes")){c.forEach(function(o){if((i!==null)||(o>l)){return
}var n=this.branchObserverAt(o),m;if(!n){return}m=n.get("length");if(o+m>l){i=n.contentIndexDisclosureState(k,n,l-o);
l=-1}else{l-=m-1}},this)}if(l>=0){i=SC.LEAF_NODE}a[f]=i;return i},contentIndexExpand:function(b,g,a){var c,h=a,e,f;
if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));
return}else{h--}}if(c=this.get("branchIndexes")){c.forEach(function(l){if(l>=h){return
}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){k.contentIndexExpand(b,k,h-l);
h=-1}else{h-=j-1}},this)}if(h>=0){e=this.get("children");f=e?e.objectAt(h):null;if(f){this._expand(f,this.get("item"),h)
}}},contentIndexCollapse:function(b,g,a){var c,e,f,h=a;if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));
return}else{h--}}if(c=this.get("branchIndexes")){c.forEach(function(l){if(l>=h){return
}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){k.contentIndexCollapse(b,k,h-l);
h=-1}else{h-=j-1}},this)}if(h>=0){e=this.get("children");f=e?e.objectAt(h):null;if(f){this._collapse(f,this.get("item"),h)
}}},branchObserverAt:function(e){var h=this._branchObserversByIndex,c=this._branchObserverIndexes,f,i,b,k,a,g,j;
if(!h){h=this._branchObserversByIndex=[]}if(!c){c=this._branchObserverIndexes=SC.IndexSet.create()
}if(f=h[e]){return f}a=this.get("children");k=a?a.objectAt(e):null;if(!k){return null
}h[e]=f=SC.TreeItemObserver.create({item:k,delegate:this.get("delegate"),parentObserver:this,index:e,outlineLevel:this.get("outlineLevel")+1});
c.add(e);return f},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;
if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(f){var e=b[f];
if(e){e.destroy()}},this);b.length=c;return this},init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("item");if(!a){throw"SC.TreeItemObserver.item cannot be null"}a.addObserver("*",this,this._itemPropertyDidChange);
this._itemPropertyDidChange(a,"*");this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);
this._objectAtCache=null;var c=this.get("item");if(c){c.removeObserver("*",this,this._itemPropertyDidChange)
}var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)
}arguments.callee.base.apply(this,arguments)},_itemPropertyDidChange:function(g,b){var a=this.get("children"),f=this.get("disclosureState"),e=this.get("item"),c;
this.beginPropertyChanges();c=this._computeDisclosureState(e);if(f!==c){this.set("disclosureState",c)
}c=this._computeChildren(e);if(a!==c){this.set("children",c)}this.endPropertyChanges()
},_childrenDidChange:function(){var c=this.get("disclosureState"),e=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;
if(b===e){return this}if(a){b.removeRangeObserver(a)}if(e){this._childrenRangeObserver=e.addRangeObserver(null,this,this._childrenRangeDidChange)
}else{this._childrenRangeObserver=null}this._children=e;this._childrenRangeDidChange(e,null,"[]",null)
}.observes("children","disclosureState"),_childrenRangeDidChange:function(g,j,i,e){var a=this.get("children"),f=a?a.get("length"):0,c=e?e.get("min"):0,h=e?e.get("max"):f,b=this._childrenLen||0;
this._childrenLen=f;this.observerContentDidChange(c,h-c,f-b)},_computeDisclosureState:function(e,f,b){var c,a;
if(!e||!this._computeChildren(e)){return SC.LEAF_NODE}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")
}if(b===undefined){b=this.get("index")}return e.treeItemDisclosureState(f,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}return e.get(c)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(e,f,b){var c,a;
if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")
}if(b===undefined){b=this.get("index")}e.treeItemCollapse(f,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}e.setIfChanged(c,NO)}}return this},_expand:function(e,f,b){var c,a;
if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")
}if(b===undefined){b=this.get("index")}e.treeItemExpand(f,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}e.setIfChanged(c,YES)}}return this},_computeChildren:function(c){var a,b;
if(!c){return null}else{if(c.isTreeItemContent){return c.get("treeItemChildren")}else{b=this._treeItemChildrenKey;
if(!b){a=this.get("delegate");b=a?a.get("treeItemChildrenKey"):"treeItemChildren";
this._treeItemChildrenKey=b}return c.get(b)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,e=this.get("disclosureState"),c=this.get("children"),a;
if((e===SC.BRANCH_OPEN)&&c){b+=c.get("length");if(a=this.get("branchIndexes")){a.forEach(function(f){var g=this.branchObserverAt(f);
b+=g.get("length")-1},this)}}return b}});sc_require("controllers/object");sc_require("mixins/selection_support");
sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:function(){var a,b=this.get("content");
if(b){a=SC.TreeItemObserver.create({item:b,delegate:this})}else{a=null}this._sctc_arrangedObjects=a;
return a}.property().cacheable(),_sctc_invalidateArrangedObjects:function(){this.propertyWillChange("arrangedObjects");
var a=this._sctc_arrangedObjects;if(a){a.destroy()}this._sctc_arrangedObjects=null;
this.propertyDidChange("arrangedObjects")}.observes("content","treeItemIsExpandedKey","treeItemChildrenKey","treeItemIsGrouped"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()
}.observes("*arrangedObjects.[]"),firstSelectableObject:function(){var e=this.get("arrangedObjects"),c,b,a=0;
if(!e){return null}c=e.contentGroupIndexes(null,e);b=e.get("length");while(c.contains(a)&&(a<b)){a++
}return a>=b?null:e.objectAt(a)}.property()});SC.mixin(SC.Object.prototype,{invokeLater:function(b,a){if(a===undefined){a=1
}var g=b,c,e;if(arguments.length>2){c=SC.$A(arguments).slice(2);if(SC.typeOf(g)===SC.T_STRING){g=this[b]
}e=g;g=function(){return e.apply(this,c)}}return SC.Timer.schedule({target:this,action:g,interval:a})
},invokeWith:function(b,c,e){if(e===undefined){e=c;c=this}if(!c){c=this}if(SC.typeOf(e)===SC.T_STRING){e=c[e]
}var a=this.getPath(b);e.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()
}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);
this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);
this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);
return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO
}var e=this.get("startTime"),f=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(f,e);
b=f.length;for(c=0;c<b;c++){f[c].fire()}a=f.length>0;f.length=0;this._firing=NO;return a
},scheduleNextTimeout:function(){var e=this._timerQueue;var b=NO;if(!e){if(this._timeout){clearTimeout(this._timeout)
}}else{var c=e._timerQueueRunTime;if(this._timeoutAt!==c){if(this._timeout){clearTimeout(this._timeout)
}var a=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);
this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;
a._timeout=a._timeoutAt=null;SC.run()}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();
/* @license

Portions of this software are copyright Yahoo, Inc, used under the following license:

Software License Agreement (BSD License)
Copyright (c) 2009, Yahoo! Inc.
All rights reserved.
Redistribution and use of this software in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the
following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
Neither the name of Yahoo! Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission of Yahoo! Inc.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

Sources of Intellectual Property Included in the YUI Library
Where not otherwise indicated, all YUI content is authored by Yahoo! engineers and consists of Yahoo!-owned intellectual property. YUI is issued by Yahoo! under the BSD license above. In some specific instances, YUI will incorporate work done by developers outside of Yahoo! with their express permission.

*/
/* @license
  jQuery 1.2.6 - New Wave Javascript

  Copyright (c) 2008 John Resig (jquery.com)
  Dual licensed under the MIT (MIT-LICENSE.txt)
  and GPL (GPL-LICENSE.txt) licenses.
  
  $Date: 2008-05-24 14:22:17 -0400 (Sat, 24 May 2008) $
  $Rev: 5685 $
*/
SC.Button={value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");
return(a&&this.get("localize"))?a.loc():(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,renderTitle:function(b,a){var h=this.get("icon"),e="",i=this.get("displayTitle"),j=(!SC.none(i)&&i.length>0),c,k,f;
if(this.get("escapeHTML")){i=SC.RenderContext.escapeHTML(i)}if(h){var g=SC.BLANK_IMAGE_URL;
if(h.indexOf("/")>=0){e='<img src="'+h+'" alt="" class="icon" />'}else{e='<img src="'+g+'" alt="" class="'+h+'" />'
}j=YES}f=e+i;if(a){if(this.get("needsEllipsis")){b.push('<label class="sc-button-label ellipsis">'+f+"</label>")
}else{b.push('<label class="sc-button-label">'+f+"</label>")}this._ImageTitleCached=f
}else{c=this.$("label");if((k=c[0])){if(j){c.setClass("ellipsis",this.get("needsEllipsis"));
if(this._ImageTitleCached!==f){this._ImageTitleCached=f;k.innerHTML=f}}else{k.innerHTML=""
}}}return b},contentPropertyDidChange:function(i,c){var b=this.get("displayDelegate"),f=this.get("content"),h;
var e=this.getDelegateProperty("contentValueKey",b);if(e&&(c===e||c==="*")){this.set("value",f?(f.get?f.get(e):f[e]):null)
}var a=this.getDelegateProperty("contentTitleKey",b);if(a&&(c===a||c==="*")){this.set("title",f?(f.get?f.get(a):f[a]):null)
}var g=this.getDelegateProperty("contentIconKey",b);if(g&&(c===g||c==="*")){this.set("icon",f?(f.get?f.get(g):f[g]):null)
}return this},_button_displayObserver:function(){this.displayDidChange()}.observes("title","icon","value"),performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO
}if(!this.get("isEnabled")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)
}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)
}}return NO},triggerAction:function(a){throw"SC.Button.triggerAction() is not defined in %@".fmt(this)
},computeIsSelectedForValue:function(e){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(e)===SC.T_ARRAY){if(e.length===1){c=(e[0]==b)
}else{c=null;e.find(function(f){a=(f==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE
}}return c===SC.MIXED_STATE})}}else{if(e===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(e===b)
}}return c},initMixin:function(){if(!SC.none(this.get("value"))){this._button_valueDidChange()
}},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);
this.set("isSelected",a)}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));
if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))
}}.observes("isSelected")};SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",displayProperties:["content"],contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()
},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);
this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;
if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)
}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;
if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)
}}},_display_contentDidChange:function(e,a,c){if((c=this.get("content"))===this._display_content){return
}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;
if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content","contentDisplayProperties"),_display_contentPropertyDidChange:function(f,c,e,b){if(c==="*"){this.displayDidChange()
}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()
}}}};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);
SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);
SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_TRIM_REGEXP=(/^\s+|\s+$/g);SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);
SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);
SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};
SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};
SC.String={loc:function(){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()
}var a=SC.Locale.currentLocale.locWithDefault(this);if(SC.typeOf(a)!==SC.T_STRING){a=this
}return a.fmt.apply(a,arguments)},locWithDefault:function(b){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()
}var c=SC.Locale.currentLocale.locWithDefault(this,b);if(SC.typeOf(c)!==SC.T_STRING){c=this
}var a=SC.$A(arguments);a.shift();return c.fmt.apply(c,a)},capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)
},capitalizeEach:function(){return this.replace(SC.STRING_TITLEIZE_REGEXP,function(c,a,b){return(b)?(a+b.toUpperCase()):a
}).capitalize()},titleize:function(){var a=this.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");
return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,e,b){return(b)?(" "+b.toUpperCase()):" "
}).capitalize()},camelize:function(){var b=this.replace(SC.STRING_TITLEIZE_REGEXP,function(f,g,e){return(e)?e.toUpperCase():""
});var c=b.charAt(0),a=c.toLowerCase();return(c!==a)?(a+b.slice(1)):b},classify:function(){var a=this.replace(SC.STRING_TITLEIZE_REGEXP,function(f,g,e){return(e)?e.toUpperCase():""
});var c=a.charAt(0),b=c.toUpperCase();return(c!==b)?(b+a.slice(1)):a},decamelize:function(){return this.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()
},dasherize:function(){var a=SC.STRING_DASHERIZE_CACHE,b=a[this];if(b){return b}else{b=this.decamelize().replace(SC.STRING_DASHERIZE_REGEXP,"-");
a[this]=b}return b},humanize:function(){return this.decamelize().replace(SC.STRING_HUMANIZE_REGEXP," ")
},escapeForRegExp:function(){return this.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")
},removeDiacritics:function(){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};
a=SC.diacriticMappingTable}var e,f,b="",g=this.length;for(var c=0;c<=g;++c){e=this.charAt(c);
f=a[e];if(f){b+=f}else{b+=e}}return b},trim:function(){return this.replace(SC.STRING_TRIM_REGEXP,"")
},trimLeft:function(){return this.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(){return this.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")
},pluralize:function(){var k,f,b=this.split(/\s/).pop(),h=this.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;
b=b.toLowerCase();for(k=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;k<f;k++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[k];
if(b==g){return this.toString()}}for(k=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;
k<f;k++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[k][0],j=SC.INFLECTION_CONSTANTS.IRREGULAR[k][1];
if((b==c)||(b==j)){if(a){j=j.capitalize()}return h+j}}for(k=0,f=SC.INFLECTION_CONSTANTS.PLURAL.length;
k<f;k++){var i=SC.INFLECTION_CONSTANTS.PLURAL[k][0],e=SC.INFLECTION_CONSTANTS.PLURAL[k][1];
if(i.test(b)){return this.replace(i,e)}}},singularize:function(){var k,f,b=this.split(/\s/).pop(),h=this.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;
b=b.toLowerCase();for(k=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;k<f;k++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[k];
if(b==g){return this.toString()}}for(k=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;
k<f;k++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[k][0],j=SC.INFLECTION_CONSTANTS.IRREGULAR[k][1];
if((b==c)||(b==j)){if(a){c=c.capitalize()}return h+c}}for(k=0,f=SC.INFLECTION_CONSTANTS.SINGULAR.length;
k<f;k++){var i=SC.INFLECTION_CONSTANTS.SINGULAR[k][0],e=SC.INFLECTION_CONSTANTS.SINGULAR[k][1];
if(i.test(b)){return this.replace(i,e)}}}};SC.String.strip=SC.String.trim;SC.supplement(String.prototype,SC.String);
String.prototype.loc=SC.String.loc;SC.String.fmt=String.prototype.fmt;sc_require("mixins/string");
SC.MIXED_STATE="__MIXED__";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";
SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";
SC.Control={initMixin:function(){this._control_contentDidChange()},isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),value:null,content:null,contentValueKey:null,contentPropertyDidChange:function(b,a){return this.updatePropertyFromContent("value",a,"contentValueKey")
},updatePropertyFromContent:function(g,b,f,e){var c=b==="*";if(f===undefined){f="content"+g.capitalize()+"Key"
}if(e===undefined){e=this.get("content")}f=this[f]?this.get(f):this.getDelegateProperty(f,this.displayDelegate);
if(f&&(c||b===f)){var a=(e)?(e.get?e.get(f):e[f]):null;this.set(g,a)}return this},updateContentWithValueObserver:function(){var a=this.contentValueKey?this.get("contentValueKey"):this.getDelegateProperty("contentValueKey",this.displayDelegate),b=this.get("content");
if(!a||!b){return}var c=this.get("value");if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(a,c)
}else{if(b[a]!==c){b[a]=c}}}.observes("value"),fieldKey:null,fieldLabel:null,errorLabel:function(){var a,c,b;
if(a=this.get("fieldLabel")){return a}c=this.get("fieldKey")||this.constructor.toString();
b=(c||"").humanize().capitalize();return"ErrorLabel."+c.locWithDefault(("FieldKey."+c).locWithDefault(b))
}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:"isEnabled isSelected isActive controlSize".w(),_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(a,f){var c=this.get("isSelected"),b=!this.get("isEnabled"),e=this._CONTROL_TMP_CLASSNAMES;
e.mixed=c===SC.MIXED_STATE;e.sel=c&&(c!==SC.MIXED_STATE);e.active=this.get("isActive");
a.setClass(e).addClass(this.get("controlSize"))},_control_content:null,_control_contentDidChange:function(){var b=this.get("content");
if(this._control_content===b){return}var c=this.contentPropertyDidChange,a=this._control_content;
if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._control_content=b;if(b&&b.addObserver){b.addObserver("*",this,c)
}this.contentPropertyDidChange(b,"*")}.observes("content")};SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO
}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);
this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")
},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);
this.resignFirstResponder();return YES}};SC.mixin(SC.browser,(function(){var a=window.innerWidth,c=SC.browser,b=navigator.standalone;
SC.extend(c,{isOpera:!!c.opera,isIe:!!c.msie,isIE:!!c.msie,isSafari:!!c.safari,isMobileSafari:(!!c.mobileSafari||!!c.standalone),isMozilla:!!c.mozilla,isWindows:!!c.windows,isMac:!!c.mac,isiPhone:((!!c.mobileSafari||!!c.standalone)&&(a==320||a==480)),current:c.msie?"msie":c.mozilla?"mozilla":c.safari?"safari":c.opera?"opera":"unknown",compareVersion:function(){if(this._versionSplit===undefined){var h=function(i){return Number(i.match(/^[0-9]+/))
};this._versionSplit=SC.A(this.version.split(".")).map(h)}var g=SC.A(arguments).map(Number);
for(var f=0;f<g.length;f++){var e=this._versionSplit[f]-g[f];if(isNaN(e)){return 0
}if(e!==0){return e}}return 0}});return c})());SC.Builder=function(a){return SC.Builder.create(a)
};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString
}var a=function(){var e=SC.beget(b);e.defaultClass=this;e.constructor=a;return e.init.apply(e,arguments)
};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a
};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])
}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;
while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;
this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);
a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()
},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))
},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,e;for(b in a){if(!a.hasOwnProperty(b)){continue
}e=Array.prototype[b]||a[b];c[b]=e}})();require("system/builder");SC.CoreQuery=(function(){var F=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,j=/^.[^:#\[\.]*$/;
var x=/ CQ\d+="(?:\d+|null)"/g,f=/(<(\w+)[^>]*?)\/>/g,q=/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i,b=/\s+/,g=/^\s+/,i=/^body|html$/i,D=/href|src|style/,k=/(button|input|object|select|textarea)/i,y=/alpha\([^)]*\)/,t=/opacity=([^)]*)/;
var C=SC.browser.msie?"styleFloat":"cssFloat";var u=(SC.browser.safari&&parseInt(SC.browser.version,0)<417)?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";
var z=new RegExp("^("+u+"+)(#)("+u+"+)");var o=new RegExp("^([#.]?)("+u+"*)");var h=new RegExp("([#.]?)("+u+"*)","g");
var n=["Left","Right"];var e=["Top","Bottom"];var p={position:"absolute",visibility:"hidden",display:"block"};
var B=function B(I,H,N){var M=H==="width"?I.offsetWidth:I.offsetHeight;var K=0,G=0,L=N.length,J;
while(--L>=0){J=N[L];K+=parseFloat(c.curCSS(I,"padding"+J,true))||0;G+=parseFloat(c.curCSS(I,"border"+J+"Width",true))||0
}M-=Math.round(K+G);return M};var l=SC.guidKey,A=0,E={},a=/z-?index|font-?weight|opacity|zoom|line-?height/i,v=document.defaultView||{};
var s=function s(H){if(!SC.browser.safari){return false}var G=v.getComputedStyle(H,null);
return !G||G.getPropertyValue("color")===""};function m(G,H){return G[0]&&parseInt(c.curCSS(G[0],H,true),10)||0
}var w,c;c=w=SC.Builder.create({jquery:"SC.CoreQuery",init:function(G,I){G=G||document;
if(G.nodeType){this[0]=G;this.length=1;return this}else{if(typeof G==="string"){var H=F.exec(G);
if(H&&(H[1]||!I)){if(H[1]){G=c.clean([H[1]],I)}else{var J=document.getElementById(H[3]);
if(J){if(J.id!=H[3]){return c().find(G)}return c(J)}G=[]}}else{return c(I).find(G)
}}else{if(SC.typeOf(G)===SC.T_FUNCTION){return SC.ready(G)}}}return this.setArray(c.makeArray(G))
},size:function(){return this.length},get:function(G){return G===undefined?c.makeArray(this):this[G]
},find:function(G){var H=c.map(this,function(I){return c.find(G,I)});return this.pushStack(H)
},filter:function(G){return this.pushStack((SC.typeOf(G)===SC.T_FUNCTION)&&c.grep(this,function(I,H){return G.call(I,H)
})||c.multiFilter(G,this))},not:function(G){if(typeof G==="string"){if(j.test(G)){return this.pushStack(c.multiFilter(G,this,true))
}else{G=c.multiFilter(G,this)}}var H=G.length&&G[G.length-1]!==undefined&&!G.nodeType;
return this.filter(function(){return H?c.inArray(this,G)<0:this!=G})},setArray:function(G){this.length=0;
Array.prototype.push.apply(this,G);return this},map:function(G){return this.pushStack(c.map(this,function(I,H){return G.call(I,H,I)
}))},each:function(H,G){return c.each(this,H,G)},index:function(G){if(G&&G.jquery){G=G[0]
}return Array.prototype.indexOf.call(this,G)},eq:function(G){return this.slice(G,+G+1)
},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))
},add:function(G){return this.pushStack(c.merge(this.get(),typeof G==="string"?c(G):c.makeArray(G)).uniq())
},attr:function(H,J,I){var G=H;if(typeof H==="string"){if(J===undefined){return this[0]&&c[I||"attr"](this[0],H)
}else{G={};G[H]=J}}return this.each(function(K){for(H in G){c.attr((I)?this.style:this,H,c.prop(this,G[H],I,K,H))
}})},html:function(G){return G===undefined?(this[0]?this[0].innerHTML.replace(x,""):null):this.empty().append(G)
},andSelf:function(){return this.add(this.prevObject)},is:function(G){return !!G&&c.multiFilter(G,this).length>0
},hasClass:function(G){return Array.prototype.every.call(this,function(H){return(H.nodeType===1)&&c.className.has(H,G)
})},val:function(M){if(M===undefined){var G=this[0];if(G){if(c.nodeName(G,"option")){return(G.attributes.value||{}).specified?G.value:G.text
}if(c.nodeName(G,"select")){var K=G.selectedIndex,N=[],O=G.options,J=G.type==="select-one",I;
if(K<0){return null}var H,L=J?K+1:O.length;for(H=J?K:0;H<L;H++){I=O[H];if(I.selected){M=c(I).val();
if(J){return M}N.push(M)}}return N}return(G.value||"").replace(/\r/g,"")}return undefined
}else{if(typeof M==="number"){M+=""}this.each(function(){if(this.nodeType!==1){return
}if(SC.typeOf(M)===SC.T_ARRAY&&(/radio|checkbox/).test(this.type)){this.checked=(c.inArray(this.value,M)>=0||c.inArray(this.name,M)>=0)
}else{if(c.nodeName(this,"select")){var P=c.makeArray(M);c("option",this).each(function(){this.selected=(c.inArray(this.value,P)>=0||c.inArray(this.text,P)>=0)
});if(!P.length){this.selectedIndex=-1}}else{this.value=M}}})}return this},clone:function(){var G=this.map(function(){if(SC.browser.msie&&!c.isXMLDoc(this)){var J=this.cloneNode(true),I=document.createElement("div");
I.appendChild(J);return c.clean([I.innerHTML])[0]}else{return this.cloneNode(true)
}});var H=G.find("*").andSelf().each(function(){if(this[SC.guidKey]!==undefined){this[SC.guidKey]=null
}});return G},css:function(G,H){if((G==="width"||G==="height")&&parseFloat(H,0)<0){H=undefined
}return this.attr(G,H,"curCSS")},text:function(H){if(H!==undefined&&typeof H!=="object"&&H!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(H))
}var G="";c.each(H||this,function(){c.each(this.childNodes,function(){if(this.nodeType!==8){G+=this.nodeType!==1?this.nodeValue:c.fn.text([this])
}})});return G},show:function(){var G=SC.$.isVisible;this.each(function(){if(!G(this)){this.style.display=this.oldblock||"";
if(c.css(this,"display")==="none"){var H=c("<"+this.tagName+"/>");c("body").append(H);
this.style.display=H.css("display");if(this.style.display==="none"){this.style.display="block"
}H.remove();H=null}}});return this},hide:function(){var G=SC.$.isVisible;this.each(function(){if(G(this)){this.oldblock=this.oldblock||c.css(this,"display");
this.style.display="none"}});return this},domManip:function(I,J,H,L){var K=this.length>1,G;
return this.each(function(){if(!G){G=c.clean(I,this.ownerDocument);if(H){G.reverse()
}}var M=this;if(J&&c.nodeName(this,"table")&&c.nodeName(G[0],"tr")){M=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"))
}c.each(G,function(){var N=K?c(this).clone(true)[0]:this;L.call(M,N)})})},append:function(){return this.domManip(arguments,true,false,function(G){if(this.nodeType===1){this.appendChild(G)
}})},prepend:function(){return this.domManip(arguments,true,true,function(G){if(this.nodeType===1){this.insertBefore(G,this.firstChild)
}})},before:function(){return this.domManip(arguments,false,false,function(G){this.parentNode.insertBefore(G,this)
})},after:function(){return this.domManip(arguments,false,true,function(G){this.parentNode.insertBefore(G,this.nextSibling)
})},replaceWith:function(G){return this.after(G).remove()},removeData:function(G){return this.each(function(){SC.removeData(this,G)
})}});w.mixin({nodeName:function(H,G){return H.nodeName&&H.nodeName.toUpperCase()===G.toUpperCase()
},map:function(G,L){var H=[],K,I,J;for(I=0,J=G.length;I<J;I++){K=L(G[I],I);if(K!=null){H[H.length]=K
}}return H.concat.apply([],H)},each:function(I,M,H){var G,J=0,K=I.length;if(H){if(K===undefined){for(G in I){if(M.apply(I[G],H)===false){break
}}}else{for(;J<K;){if(M.apply(I[J++],H)===false){break}}}}else{if(K===undefined){for(G in I){if(M.call(I[G],G,I[G])===false){break
}}}else{for(var L=I[0];J<K&&M.call(L,J,L)!==false;L=I[++J]){}}}return I},isXMLDoc:function(G){return G.documentElement&&!G.body||G.tagName&&G.ownerDocument&&!G.ownerDocument.body
},clean:function(G,I){var H=[];I=I||document;if(typeof I.createElement=="undefined"){I=I.ownerDocument||I[0]&&I[0].ownerDocument||document
}c.each(G,function(M,O){if(typeof O==="number"){O+=""}if(!O){return}if(typeof O==="string"){O=O.replace(f,function(S,T,Q){return Q.match(q)?S:T+"></"+Q+">"
});var L=O.replace(g,"").substring(0,10).toLowerCase(),P=I.createElement("div");var N=!L.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!L.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||L.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!L.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!L.indexOf("<td")||!L.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!L.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||SC.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];
P.innerHTML=N[1]+O+N[2];while(N[0]--){P=P.lastChild}if(SC.browser.msie){var K=!L.indexOf("<table")&&L.indexOf("<tbody")<0?P.firstChild&&P.firstChild.childNodes:N[1]==="<table>"&&L.indexOf("<tbody")<0?P.childNodes:[];
for(var J=K.length-1;J>=0;--J){if(c.nodeName(K[J],"tbody")&&!K[J].childNodes.length){K[J].parentNode.removeChild(K[J])
}}if(/^\s/.test(O)){P.insertBefore(I.createTextNode(O.match(/^\s*/)[0]),P.firstChild)
}}O=c.makeArray(P.childNodes)}if(O.length===0&&(!c.nodeName(O,"form")&&!c.nodeName(O,"select"))){return
}if(O[0]===undefined||c.nodeName(O,"form")||O.options){H.push(O)}else{H=c.merge(H,O)
}});return H},find:function(U,H){var O;if(typeof U!=="string"){return[U]}if(U.indexOf(",")>=0){O=U.split(",").map(function(W){return c.find(W,H)
});return O.concat.apply([],O).uniq()}if(H&&H.nodeType!==1&&H.nodeType!==9){return[]
}H=H||document;O=[H];var Q,G=YES,K=U.match(h),N=K.length,J;for(var S=0;S<N;S++){U=K[S];
if(U===" "||U===""){G=YES}else{if(G){J=o.exec(U);if((J[1]==="")&&(S<(N-1))&&(K[S+1].charAt(0)==="#")){U=K[S+1];
K[S+1]=K[S];J=o.exec(U)}var M=[],L=O.length,P,T,I=J[2],V;for(P=0;P<L;P++){T=O[P];
switch(J[1]){case"":if(!I){I="*"}if(I==="*"&&T.nodeName.toLowerCase()==="object"){I="param"
}M=c.merge(M,T.getElementsByTagName(I));break;case"#":if(T===document){V=document.getElementById(I);
if(SC.browser.msie&&V&&V.getAttribute("id")!==I){V=NO}else{if(V){M.push(V)}V=YES}}else{V=NO
}if(!V){V=T.getElementsByTagName("*");V=Array.prototype.find.call(V,function(W){return W.getAttribute&&(W.getAttribute("id")===I)
});if(V){M.push(V)}}break;case".":if(T.getElementsByClassName){M=c.merge(M,T.getElementsByClassName(I))
}else{M=c.merge(M,c.classFilter(T.getElementsByTagName("*"),I))}break;default:}}delete O;
O=M;G=NO}else{O=c.filter(U,O)}}}if(O&&O[0]==H){O.shift()}return O.uniq()},classFilter:function(L,G,K){G=" "+G+" ";
var I=[],J;for(var H=0;L[H];H++){J=(" "+L[H].className+" ").indexOf(G)>=0;if(!K&&J||K&&!J){I.push(L[H])
}}return I},filter:function(H,L,K){var G=o.exec(H),M=G[2],J=G[1],I;if(J==="."){return c.classFilter(c.makeArray(L),M,K)
}else{if(J==="#"){I=function(O){var N=O&&O.getAttribute&&(O.getAttribute("id")===M);
return(K)?!N:N}}else{I=function(O){var N=c.nodeName(O,M);return(K)?!N:N}}return Array.prototype.filter.call(c.makeArray(L),I)
}},multiFilter:function(J,G,I){J=J.indexOf(",")?J.split(","):[J];var L=J.length,K,H=[];
while(--L>=0){K=c.filter(J[L].trim(),G,I);H=I?G=K:c.merge(K,H)}return H},merge:function(J,G){var H=0,I,K=J.length;
if(SC.browser.msie){while(I=G[H++]){if(I.nodeType!==8){J[K++]=I}}}else{while(I=G[H++]){J[K++]=I
}}return J},makeArray:function(I){var G=[];if(!SC.none(I)){var H=I.length;if(H==null||typeof I==="string"||I.setInterval){G[0]=I
}else{while(H){G[--H]=I[H]}}}return G},inArray:function(G,H){return H.indexOf?H.indexOf(G):Array.prototype.indexOf.call(H,G)
},boxModel:!SC.browser.msie||document.compatMode==="CSS1Compat",props:{"for":"htmlFor","class":"className","float":C,cssFloat:C,styleFloat:C,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan"},prop:function(J,K,I,H,G){if(SC.typeOf(K)===SC.T_FUNCTION){K=K.call(J,H)
}return K&&(typeof K==="number")&&I==="curCSS"&&!a.test(G)?K+"px":K},grep:function(H,L,G){var I=[];
for(var J=0,K=H.length;J<K;J++){if(!G!=!L(H[J],J)){I.push(H[J])}}return I},className:{add:function(H,I){var G=c.className.has;
c.each((I||"").split(b),function(J,K){if(H.nodeType===1&&!G(H.className,K)){H.className+=(H.className?" ":"")+K
}})},remove:function(G,H){if(G.nodeType===1){G.className=H!==undefined?c.grep(G.className.split(b),function(I){return !c.className.has(H,I)
}).join(" "):""}},has:function(H,G){return H&&c.inArray(G,(H.className||H).toString().split(b))>-1
}},swap:function(L,K,N,M,G){var H={},J;for(J in K){H[J]=L.style[J];L.style[J]=K[J]
}var I=N(L,M,G);for(J in K){L.style[J]=H[J]}return I},css:function(I,G,J){if(G==="width"||G==="height"){var L,K=(G==="width")?n:e,H=p;
L=SC.$.isVisible(I)?B(I,G,K):c.swap(I,H,B,G,K);return Math.max(0,L)}return c.curCSS(I,G,J)
},curCSS:function(M,H,I){var S,G=M.style;if(H==="opacity"&&SC.browser.msie){S=c.attr(G,"opacity");
return S===""?"1":S}if(SC.browser.opera&&H==="display"){var T=G.outline;G.outline="0 solid black";
G.outline=T}var J=H.match(/float/i);if(J){H=C}if(!I&&G&&G[H]){S=G[H]}else{if(v.getComputedStyle){if(J){H="float"
}H=H.replace(/([A-Z])/g,"-$1").toLowerCase();var U=v.getComputedStyle(M,null);if(U&&!s(M,v)){S=U.getPropertyValue(H)
}else{var L=[],V=[],W=M,O=0,Q,N;for(;W&&s(W);W=W.parentNode){V.unshift(W)}for(N=V.length;
O<N;O++){var X=V[O];if(X&&X.style&&s(X)){L[O]=X.style.display;X.style.display="block"
}}S=(H==="display"&&L[V.length-1]!==null)?"none":(U&&U.getPropertyValue(H))||"";for(O=0,Q=L.length;
O<Q;O++){if(L[O]!==null){V[O].style.display=L[O]}}}if(H==="opacity"&&S===""){S="1"
}}else{if(M.currentStyle){S=M.currentStyle[H]||M.currentStyle[H.camelize()];if(!(/^\d+(px)?$/i).test(S)&&(/^\d/).test(S)){var K=G.left,P=M.runtimeStyle.left;
M.runtimeStyle.left=M.currentStyle.left;G.left=S||0;S=G.pixelLeft+"px";G.left=K;M.runtimeStyle.left=P
}}}}return S},dir:function(I,H){var G=[],J=I[H];while(J&&J!=document){if(J.nodeType===1){G.push(J)
}J=J[H]}return G},nth:function(K,G,I,J){G=G||1;var H=0;for(;K;K=K[I]){if(K.nodeType===1&&++H==G){break
}}return K},sibling:function(I,H){var G=[];for(;I;I=I.nextSibling){if(I.nodeType===1&&I!=H){G.push(I)
}}return G},attr:function(H,G,N){if(!H||H.nodeType===3||H.nodeType===8){return undefined
}var I=!c.isXMLDoc(H),M=N!==undefined,K=SC.browser.msie;G=I&&c.props[G]||G;if(H.tagName){var L=D.test(G);
if(G==="selected"&&H.parentNode){H.parentNode.selectedIndex}if(G in H&&I&&!L){if(M){if(G==="type"&&c.nodeName(H,"input")&&H.parentNode){throw"type property can't be changed"
}H[G]=N}if(c.nodeName(H,"form")&&H.getAttributeNode(G)){return H.getAttributeNode(G).nodeValue
}if(G==="tabIndex"){var O=H.getAttributeNode("tabIndex");return O&&O.specified?O.value:H.nodeName.match(k)?0:H.nodeName.match(/^(a|area)$/i)&&H.href?0:undefined
}return H[G]}if(K&&I&&G==="style"){return c.attr(H.style,"cssText",N)}if(M){H.setAttribute(G,""+N)
}var J=(K&&I&&L)?H.getAttribute(G,2):H.getAttribute(G);return J===null?undefined:J
}if(K&&G==="opacity"){if(M){H.zoom=1;H.filter=(H.filter||"").replace(y,"")+(parseInt(N,0)+""=="NaN"?"":"alpha(opacity="+N*100+")")
}return H.filter&&H.filter.indexOf("opacity=")>=0?(parseFloat(H.filter.match(t)[1])/100)+"":""
}G=G.camelize();if(M){H[G]=N}return H[G]}});c.fn.init.prototype=c.fn;c.each({parent:function(G){return G.parentNode
},parents:function(G){return c.dir(G,"parentNode")},next:function(G){return c.nth(G,2,"nextSibling")
},prev:function(G){return c.nth(G,2,"previousSibling")},nextAll:function(G){return c.dir(G,"nextSibling")
},prevAll:function(G){return c.dir(G,"previousSibling")},siblings:function(G){return c.sibling(G.parentNode.firstChild,G)
},children:function(G){return c.sibling(G.firstChild)},contents:function(G){return c.nodeName(G,"iframe")?G.contentDocument||G.contentWindow.document:c.makeArray(G.childNodes)
}},function(G,H){c.fn[G]=function(I){var J=c.map(this,H);if(I&&typeof I==="string"){J=c.multiFilter(I,J)
}return this.pushStack(J.uniq())}});c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(G,H){c.fn[G]=function(){var I=arguments;
return this.each(function(){for(var J=0,K=I.length;J<K;J++){c(I[J])[H](this)}})}});
c.each({removeAttr:function(G){c.attr(this,G,"");if(this.nodeType===1){this.removeAttribute(G)
}},addClass:function(G){c.className.add(this,G)},removeClass:function(G){c.className.remove(this,G)
},toggleClass:function(G){c.className[c.className.has(this,G)?"remove":"add"](this,G)
},remove:function(G){if(!G||c.filter(G,[this]).length){if(this.parentNode){this.parentNode.removeChild(this)
}}},empty:function(){while(this.firstChild){this.removeChild(this.firstChild)}}},function(G,H){c.fn[G]=function(){return this.each(H,arguments)
}});c.each(["Height","Width"],function(K,I){var L=I.toLowerCase(),H;c.fn[L]=function(M){if(this[0]===window){if(SC.browser.opera){H=document.body["client"+I]
}else{if(SC.browser.safari){H=window["inner"+I]}else{if(document.compatMode){H=documentElement["client"+I]
}else{H=document.body["client"+I]}}}}else{if(this[0]===document){H=Math.max(Math.max(document.body["scroll"+I],document.documentElement["scroll"+I]),Math.max(document.body["offset"+I],document.documentElement["offset"+I]))
}else{if(M===undefined){return this.length?c.css(this[0],L):null}else{return this.css(L,(typeof M==="string")?M:M+"px")
}}}return H};var G=K?"Left":"Top",J=K?"Right":"Bottom";c.fn["inner"+I]=function(){return this[I.toLowerCase()]()+m(this,"padding"+G)+m(this,"padding"+J)
};c.fn["outer"+I]=function(M){return this["inner"+I]()+m(this,"border"+G+"Width")+m(this,"border"+J+"Width")+(M?m(this,"margin"+G)+m(this,"margin"+J):0)
}});w.fn.offset=function(){var H=0,P=0,I=this[0],V=SC.browser,L;if(!I){return undefined
}function K(W){U(c.curCSS(W,"borderLeftWidth",true),c.curCSS(W,"borderTopWidth",true))
}function U(W,X){H+=parseInt(W,10)||0;P+=parseInt(X,10)||0}var S=I.parentNode,O=I,G=I.offsetParent,Q=I.ownerDocument,T=V.safari&&parseInt(V.version,0)<522&&!(/adobeair/i).test(V.userAgent),N=c.curCSS,J=c.css(I,"position")==="fixed";
if(!(V.mozilla&&I==document.body)&&I.getBoundingClientRect){var M=I.getBoundingClientRect();
U(M.left+Math.max(Q.documentElement.scrollLeft,Q.body.scrollLeft),M.top+Math.max(Q.documentElement.scrollTop,Q.body.scrollTop));
U(-Q.documentElement.clientLeft,-Q.documentElement.clientTop)}else{U(I.offsetLeft,I.offsetTop);
while(G){U(G.offsetLeft,G.offsetTop);if(V.mozilla&&!(/^t(able|d|h)$/i).test(G.tagName)||V.safari&&!T){K(G)
}if(!J&&N(G,"position")==="fixed"){J=true}O=(/^body$/i).test(G.tagName)?O:G;G=G.offsetParent
}while(S&&S.tagName&&!(i).test(S.tagName)){if(!(/^inline|table.*$/i).test(N(S,"display"))){U(-S.scrollLeft,-S.scrollTop)
}if(V.mozilla&&N(S,"overflow")!=="visible"){K(S)}S=S.parentNode}if((T&&(J||N(O,"position")==="absolute"))||(V.mozilla&&N(O,"position")!=="absolute")){U(-Q.body.offsetLeft,-Q.body.offsetTop)
}if(J){U(Math.max(Q.documentElement.scrollLeft,Q.body.scrollLeft),Math.max(Q.documentElement.scrollTop,Q.body.scrollTop))
}}L={top:P,left:H};return L};w.fn.mixin({position:function(){var K=0,J=0,H;if(this[0]){var I=this.offsetParent(),L=this.offset(),G=i.test(I[0].tagName)?{top:0,left:0}:I.offset();
L.top-=m(this,"marginTop");L.left-=m(this,"marginLeft");G.top+=m(I,"borderTopWidth");
G.left+=m(I,"borderLeftWidth");H={top:L.top-G.top,left:L.left-G.left}}return H},offsetParent:function(){var G=this[0].offsetParent||document.body;
while(G&&(!(i).test(G.tagName)&&c.css(G,"position")==="static")){G=G.offsetParent
}return c(G)}});c.each(["Left","Top"],function(H,G){var I="scroll"+G;c.fn[I]=function(J){if(!this[0]){return
}return J!==undefined?this.each(function(){this==window||this==document?window.scrollTo(!H?J:c(window).scrollLeft(),H?J:c(window).scrollTop()):this[I]=J
}):this[0]==window||this[0]==document?self[H?"pageYOffset":"pageXOffset"]||c.boxModel&&document.documentElement[I]||document.body[I]:this[0][I]
}});return w}());SC.$=(typeof jQuery=="undefined")?SC.CoreQuery:jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;
for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))
},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)
})},first:function(){return this.pushStack([this[0]])},last:function(){return this.pushStack([this[this.length-1]])
},view:function(){return this.map(function(){var b=null,a=SC.viewKey,e=this,c;while(!b&&e&&(e!==document)){if(e.nodeType===1&&(c=e.getAttribute("id"))){b=SC.View.views[c]
}e=e.parentNode}e=null;return b})},setClass:function(e,c){if(SC.none(e)){return this
}var f=SC.typeOf(e)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return
}var i=this.className.split(/\s+/),h=NO;if(f){for(var g in e){if(!e.hasOwnProperty(g)){continue
}h=a(i,g,e[g])||h}}else{h=a(i,e,c)}if(h){this.className=i.join(" ")}});return this
},_fixupClass:function(e,a,c){var b=e.indexOf(a);if(c){if(b<0){e.push(a);return YES
}}else{if(b>=0){e[b]=null;return YES}}return NO},within:function(f){f=SC.$(f);var e,c,h,b,a=f.length,g=this.length;
while(!e&&(--g>=0)){h=this[g];for(b=0;!e&&(b<a);b++){c=f[b];while(c&&(c!==h)){c=c.parentNode
}e=c===h}}h=c=null;return e}});(function(){var c={},g={find:function(j,i){return(i!==undefined)?SC.Enumerable.find.call(this,j,i):c.find.call(this,j)
},filter:function(j,i){return(i!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,j,i)):c.filter.call(this,j)
},filterProperty:function(i,j){return this.pushStack(SC.Enumerable.filterProperty.call(this,i,j))
},indexOf:SC.$.index,map:function(j,i){return(i!==undefined)?SC.Enumerable.map.call(this,j,i):c.map.call(this,j)
}};var h=SC.$.jquery==="SC.CoreQuery",e=SC.$.fn,a=h?g:SC.Enumerable,f;for(var b in a){if(!a.hasOwnProperty(b)){continue
}f=a[b];if(b in g){c[b]=e[b];f=g[b]}e[b]=f}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;
return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")
}});sc_require("system/core_query");SC.Event=function(a){if(a){this.originalEvent=a;
var g=SC.Event._props,e=g.length,i=e,j;while(--i>=0){j=g[i];this[j]=a[j]}}this.timeStamp=this.timeStamp||Date.now();
if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode
}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement
}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var h=document.documentElement,c=document.body;
this.pageX=this.clientX+(h&&h.scrollLeft||c&&c.scrollLeft||0)-(h.clientLeft||0);this.pageY=this.clientY+(h&&h.scrollTop||c&&c.scrollTop||0)-(h.clientTop||0)
}if(!this.which&&((this.charCode||a.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode
}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))
}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"){var b=1,f=parseFloat(SC.browser.version);
if(SC.browser.safari&&a.wheelDelta!==undefined){this.wheelDelta=0-(a.wheelDeltaY||a.wheelDeltaX);
this.wheelDeltaY=0-(a.wheelDeltaY||0);this.wheelDeltaX=0-(a.wheelDeltaX||0);if(f>=533.17&&f<=533.19){b=0.004
}else{if(f<533||f>=534){b=40}}}else{if(!SC.none(a.detail)){b=10;if(a.axis&&(a.axis===a.HORIZONTAL_AXIS)){this.wheelDeltaX=a.detail;
this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=a.detail;
this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.msie?0-a.wheelDelta:a.wheelDelta;
this.wheelDeltaX=0}}this.wheelDelta*=b;this.wheelDeltaX*=b;this.wheelDeltaY*=b}return this
};SC.mixin(SC.Event,{create:function(a){return new SC.Event(a)},add:function(f,e,g,h,c){if(f&&f.isCoreQuery){if(f.length>0){f.forEach(function(i){this.add(i,e,g,h,c)
},this);return this}else{f=f[0]}}if(!f){return this}if(f.nodeType===3||f.nodeType===8){return SC.Event
}if(SC.browser.msie&&f.setInterval){f=window}if(SC.typeOf(g)===SC.T_FUNCTION){c=h;
h=g;g=null}else{if(g&&SC.typeOf(h)===SC.T_STRING){h=g[h]}}var b=SC.data(f,"events")||SC.data(f,"events",{}),a=b[e];
if(!a){a=b[e]={};this._addEventListener(f,e)}a[SC.hashFor(g,h)]=[g,h,c];SC.Event._global[e]=YES;
f=b=a=null;return this},remove:function(g,f,h,i){if(g&&g.isCoreQuery){if(g.length>0){g.forEach(function(j){this.remove(j,f,h,i)
},this);return this}else{g=g[0]}}if(!g){return this}if(g.nodeType===3||g.nodeType===8){return SC.Event
}if(SC.browser.msie&&g.setInterval){g=window}var a,e,c=SC.data(g,"events");if(!c){return this
}if(f===undefined){for(f in c){this.remove(g,f)}}else{if(a=c[f]){var b=NO;if(h||i){if(SC.typeOf(h)===SC.T_FUNCTION){i=h;
h=null}else{if(SC.typeOf(i)===SC.T_STRING){i=h[i]}}delete a[SC.hashFor(h,i)];e=null;
for(e in a){break}if(e===null){b=YES}}else{b=YES}if(b){delete c[f];this._removeEventListener(g,f)
}e=null;for(e in c){break}if(!e){SC.removeData(g,"events");delete this._elements[SC.guidFor(g)]
}}}g=c=a=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(e,c,b){var a=SC.Event.create({type:c,target:e,preventDefault:function(){this.cancelled=YES
},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES
},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});
if(b){SC.mixin(a,b)}return a},trigger:function(c,b,j,k){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(n){this.trigger(n,b,j,k)
},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined
}j=SC.A(j);var i,l=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,h,f,m;a=j[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);
j.unshift(a)}a.type=b;h=c;do{i=SC.Event.handle.apply(h,j);h=(h===document)?null:(h.parentNode||document)
}while(!i&&a.bubbles&&h);h=null;f=c["on"+b];m=SC.CoreQuery.nodeName(c,"a")&&b==="click";
if((!l||m)&&f&&f.apply(c,j)===NO){i=NO}if(l&&k!==NO&&i!==NO&&!m){this.triggered=YES;
try{c[b]()}catch(g){}}this.triggered=NO;return i},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES
}var c,h,f,j,e,i,k,l,a,g;i=SC.A(arguments);i[0]=b=SC.Event.normalizeEvent(b||window.event);
e=(SC.data(this,"events")||{})[b.type];if(!e){return NO}for(k in e){l=e[k];a=l[1];
b.handler=a;b.data=b.context=l[2];g=l[0]||this;h=a.apply(g,i);if(c!==NO){c=h}if(h===NO){b.preventDefault();
b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])
}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();
return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.msie){return NO
}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.msie){return NO
}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES
},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";
return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.msie){return NO
}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.msie){return NO
}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES
}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(e,c){var b=e.relatedTarget;
while(b&&b!=c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(e,c){var f,b=this.special[c];
if(!b||b.setup.call(e)===NO){var a=SC.guidFor(e);this._elements[a]=e;f=SC.data(e,"listener")||SC.data(e,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[a],arguments)
});if(e.addEventListener){e.addEventListener(c,f,NO)}else{if(e.attachEvent){e.attachEvent("on"+c,f)
}}}e=b=f=null},_removeEventListener:function(c,b){var e,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){e=SC.data(c,"listener");
if(e){if(c.removeEventListener){c.removeEventListener(b,e,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,e)
}}}}c=a=e=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)
}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime".split(" ")});
SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)
}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)
}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this
},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()
}a.returnValue=NO}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;
if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;
return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.msie){if(this.keyCode==8||this.keyCode==9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)
}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null
}},commandCodes:function(){var f=this.keyCode,b=null,c=null,a="",e;if(f){b=SC.FUNCTION_KEYS[f];
if(!b&&(this.altKey||this.ctrlKey||this.metaKey)){b=SC.PRINTABLE_KEYS[f]}if(b){if(this.altKey){a+="alt_"
}if(this.ctrlKey||this.metaKey){a+="ctrl_"}if(this.shiftKey){a+="shift_"}}}if(!b){f=this.which;
c=b=String.fromCharCode(f);e=b.toLowerCase();if(this.metaKey){a="meta_";b=e}else{b=null
}}if(b){b=a+b}return[b,c]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;
SC.Event.fire=SC.Event.trigger;if(SC.browser.msie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)
}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};
SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};
SC.SYSTEM_CURSOR="default";SC.AUTO_CURSOR=SC.DEFAULT_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";
SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";
SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";
SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";
SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";
SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);
if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)
}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;
return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var e,g,c,f,h,b,a;
e=this.get("cursorStyle")||SC.DEFAULT_CURSOR;g=this._rule;if(g){g.style.cursor=e;
return}c="."+this.get("className");f=this.constructor.sharedStyleSheet();h=(f.cssRules?f.cssRules:f.rules)||[];
for(b=0,a=h.length;b<a;++b){g=h[b];if(g.selectorText===c){this._rule=g;g.style.cursor=e;
break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var b,a=this._styleSheet;
if(!a){a=document.createElement("style");a.type="text/css";b=document.getElementsByTagName("head")[0];
if(!b){b=document.documentElement}b.appendChild(a);a=document.styleSheets[document.styleSheets.length-1];
this._styleSheet=a}return a};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();
if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)
}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");
if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}});
sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");
sc_require("system/responder");sc_require("mixins/string");SC.viewKey=SC.guidKey+"_view";
SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";
SC._VIEW_DEFAULT_DIMS="marginTop marginLeft".w();SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};
SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};
SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};
SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC.CONTEXT_MENU_ENABLED=YES;
SC.TABBING_ONLY_INSIDE_DOCUMENT=YES;SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;
SC.View=SC.Responder.extend(SC.DelegateSupport,{concatenatedProperties:"outlets displayProperties layoutProperties classNames renderMixin didCreateLayerMixin willDestroyLayerMixin".w(),pane:function(){var a=this;
while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,splitView:function(){var a=this;
while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable(),parentView:null,backgroundColor:null,useStaticLayout:NO,isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){var a=this.get("isEnabled"),b;
if(a&&(b=this.get("parentView"))){a=b.get("isEnabledInPane")}return a}.property("parentView","isEnabled"),_sc_view_isEnabledDidChange:function(){if(!this.get("isEnabled")&&this.get("isFirstResponder")){this.resignFirstResponder()
}}.observes("isEnabled"),isVisible:YES,isVisibleBindingDefault:SC.Binding.bool(),isVisibleInWindow:NO,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED
}.property(),recomputeIsVisibleInWindow:function(c){var f=this.get("isVisibleInWindow"),h=this.get("isVisible"),e;
if(h){if(c===undefined){e=this.get("parentView");c=e?e.get("isVisibleInWindow"):NO
}h=h&&c}if(f!==h){this.set("isVisibleInWindow",h);var g=this.get("childViews"),b=g.length,a;
for(a=0;a<b;a++){g[a].recomputeIsVisibleInWindow(h)}if(h){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)
}}else{if(this.get("isFirstResponder")){this.resignFirstResponder()}}}this.updateLayerIfNeeded(YES);
return this},_sc_isVisibleDidChange:function(){this.displayDidChange();this.recomputeIsVisibleInWindow()
}.observes("isVisible"),childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,insertBefore:function(b,e){b.beginPropertyChanges();
if(b.get("parentView")){b.removeFromParent()}if(this.willAddChild){this.willAddChild(b,e)
}if(b.willAddToParent){b.willAddToParent(this,e)}b.set("parentView",this);var a,c=this.get("childViews");
if(c.needsClone){this.set(c=[])}a=(e)?c.indexOf(e):c.length;if(a<0){a=c.length}c.insertAt(a,b);
b.parentViewDidChange();b.layoutDidChange();var f=b.get("pane");if(f&&f.get("isPaneAttached")){b._notifyDidAppendToDocument()
}if(this.didAddChild){this.didAddChild(b,e)}if(b.didAddToParent){b.didAddToParent(this,e)
}b.endPropertyChanges();return this},removeChild:function(b){if(!b){return this}if(b.parentView!==this){throw"%@.removeChild(%@) must belong to parent".fmt(this,b)
}if(b.willRemoveFromParent){b.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(b)
}b.set("parentView",null);var c=this.get("childViews"),a=c.indexOf(b);if(a>=0){c.removeAt(a)
}b.parentViewDidChange();if(this.didRemoveChild){this.didRemoveChild(b)}if(b.didRemoveFromParent){b.didRemoveFromParent(this)
}return this},removeAllChildren:function(){var b=this.get("childViews"),a;while(a=b.objectAt(b.get("length")-1)){this.removeChild(a)
}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)
}return this},replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();
this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();
b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){var b=c.get("length"),a;
this.beginPropertyChanges();this.destroyLayer().removeAllChildren();for(a=0;a<b;a++){this.appendChild(c.objectAt(a))
}this.replaceLayer();this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)
},parentViewDidChange:function(){this.recomputeIsVisibleInWindow();this.set("layerLocationNeedsUpdate",YES);
this.invokeOnce(this.updateLayerLocationIfNeeded);this._invalidatePaneCacheForSelfAndAllChildViews();
return this},_invalidatePaneCacheForSelfAndAllChildViews:function(){var e,c=this.get("childViews"),b=c.length,a;
this.notifyPropertyChange("pane");for(a=0;a<b;++a){e=c[a];if(e._invalidatePaneCacheForSelfAndAllChildViews){e._invalidatePaneCacheForSelfAndAllChildViews()
}}},layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;
if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}if(b){this._view_layer=c=this.findLayerInParentLayer(b)
}b=null}}return c}.property("isVisibleInWindow").cacheable(),$:function(c){var a,b=this.get("layer");
a=!b?SC.$([]):(c===undefined)?SC.$(b):SC.$(c,b);b=null;return a},containerLayer:function(){return this.get("layer")
}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId
}return SC.guidFor(this)}.property().cacheable(),_lastLayerId:null,layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;
if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;
SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),findLayerInParentLayer:function(f){var g=this.get("layerId"),c,j,b,k,e,h;
e=document.getElementById(g);if(SC.browser.msie&&e&&e.id!==g){e=null}if(!e){e=f.firstChild;
var a=[];a.push(f);while(a.length!==0){c=a.shift();if(c.id===g){return c}k=c.childNodes;
for(j=0,b=k.length;j<b;++j){a.push(k[j])}}e=null}return e},isDescendantOf:function(a){var b=this.get("parentView");
if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){this.set("layerNeedsUpdate",YES);
return this},layerNeedsUpdate:NO,_view_layerNeedsUpdateDidChange:function(){if(this.get("layerNeedsUpdate")){this.invokeOnce(this.updateLayerIfNeeded)
}}.observes("layerNeedsUpdate"),updateLayerIfNeeded:function(b){var c=this.get("layerNeedsUpdate"),a=c&&(b||this.get("isVisibleInWindow"));
if(a){if(this.get("layer")){this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);
this.updateLayer();this.endPropertyChanges()}}return this},updateLayer:function(){var a=this.renderContext(this.get("layer"));
this.prepareContext(a,NO);a.update();if(a._innerHTMLReplaced){var b=this.get("pane");
if(b&&b.get("isPaneAttached")){this._notifyDidAppendToDocument()}}if(this.useStaticLayout){this.viewDidResize()
}if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()
}return this},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){if(this.get("layer")){return this
}var a=this.renderContext(this.get("tagName"));this.prepareContext(a,YES);this.set("layer",a.element());
this._notifyDidCreateLayer();return this},_notifyDidCreateLayer:function(){if(this.didCreateLayer){this.didCreateLayer()
}var c=this.didCreateLayerMixin,b,a,e=this.get("childViews"),f;if(c){b=c.length;for(a=0;
a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){f=e[a];if(!f){continue}f.notifyPropertyChange("layer");
f._notifyDidCreateLayer()}},destroyLayer:function(){var a=this.get("layer");if(a){this._notifyWillDestroyLayer();
if(a.parentNode){a.parentNode.removeChild(a)}a=null}return this},replaceLayer:function(){this.destroyLayer();
this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded)
},_notifyWillDestroyLayer:function(){if(this.willDestroyLayer){this.willDestroyLayer()
}var c=this.willDestroyLayerMixin,b,a,e=this.get("childViews");if(c){b=c.length;for(a=0;
a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){e[a]._notifyWillDestroyLayer()
}this.set("layer",null)},prepareContext:function(c,b){var f,g,h,e,j,i,a;if(b){e=this.layerId?this.get("layerId"):SC.guidFor(this);
c.id(e).classNames(this.get("classNames"),YES);this.renderLayout(c,b)}else{c.resetClassNames();
c.classNames(this.get("classNames"),YES)}a=[];if(this.get("isTextSelectable")){a.push("allow-select")
}if(!this.get("isEnabled")){a.push("disabled")}if(!this.get("isVisible")){a.push("hidden")
}if(this.get("isFirstResponder")){a.push("focus")}if(this.get("useStaticLayout")){a.push("sc-static-layout")
}j=this.get("backgroundColor");if(j){c.addStyle("backgroundColor",j)}i=this.get("cursor");
if(!i&&this.get("shouldInheritCursor")){i=this.getPath("parentView.cursor")}if(SC.typeOf(i)===SC.T_STRING){i=SC.objectForPropertyPath(i)
}if(i instanceof SC.Cursor){a.push(i.get("className"))}c.addClass(a);this.beginPropertyChanges();
this.set("layerNeedsUpdate",NO);this.render(c,b);if(f=this.renderMixin){g=f.length;
for(h=0;h<g;++h){f[h].call(this,c,b)}}this.endPropertyChanges()},renderChildViews:function(f,g){var e=this.get("childViews"),b=e.length,a,c;
for(a=0;a<b;++a){c=e[a];if(!c){continue}f=f.begin(c.get("tagName"));c.prepareContext(f,g);
f=f.end()}return f},render:function(a,b){if(b){this.renderChildViews(a,b)}},_notifyDidAppendToDocument:function(){if(this.didAppendToDocument){this.didAppendToDocument()
}var c=0,e,a,b=this.get("childViews");for(c=0,a=b.length;c<a;c++){e=b[c];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()
}}},childViewsObserver:function(){var c=this.get("childViews"),b,a,e;for(b=0,a=c.length;
b<a;b++){e=c[b];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()}}}.observes("childViews"),tagName:"div",classNames:["sc-view"],toolTip:null,isTextSelectable:NO,displayProperties:["isFirstResponder"],cursor:null,shouldInheritCursor:YES,layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(a){if(this.get("layerLocationNeedsUpdate")){this.updateLayerLocation()
}return this},updateLayerLocation:function(){var f=this.get("layer"),e=this.get("parentView"),b=e?e.get("containerLayer"):null;
if(f&&f.parentNode&&f.parentNode!==b){f.parentNode.removeChild(f)}if(!e){if(f&&f.parentNode){f.parentNode.removeChild(f)
}}else{if(!b){if(f){if(f.parentNode){f.parentNode.removeChild(f)}this.destroyLayer()
}}else{if(!f){this.createLayer();f=this.get("layer");if(!f){return}}var g=e.get("childViews"),c=g.objectAt(g.indexOf(this)+1),a=(c)?c.get("layer"):null;
if(c&&(!a||a.parentNode!==b)){c.updateLayerLocationIfNeeded();a=c.get("layer")}if((f.parentNode!==b)||(f.nextSibling!==a)){b.insertBefore(f,a)
}}}b=e=f=a=null;this.set("layerLocationNeedsUpdate",NO);return this},nextResponder:function(){return this.get("parentView")
}.property("parentView").cacheable(),acceptsFirstResponder:NO,isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){},interpretKeyEvents:function(b){var a=b.commandCodes(),e=a[0],f=a[1],h;
if(!e&&!f){return null}if(e){var i=SC.MODIFIED_KEY_BINDINGS[e]||SC.BASE_KEY_BINDINGS[e.match(/[^_]+$/)[0]];
if(i){var g=this,c=this.get("pane"),j=null;while(g&&!(j=g.tryToPerform(i,b))){g=(g===c)?null:g.get("nextResponder")
}return j}}if(f&&this.respondsTo("insertText")){h=this.insertText(f,b);return h?(h===YES?this:h):null
}return null},insertText:function(a){return NO},performKeyEquivalent:function(f,c){var e=NO,g=this.get("childViews"),b=g.length,a=-1;
while(!e&&(++a<b)){e=g[a].performKeyEquivalent(f,c)}return e},nextKeyView:null,nextValidKeyView:function(){var a=[],c=this.get("pane"),b=this.get("nextKeyView");
if(!b){b=c._computeNextValidKeyView(this,a)}if(SC.TABBING_ONLY_INSIDE_DOCUMENT&&!b){b=c._computeNextValidKeyView(c,a)
}return b}.property("nextKeyView"),_computeNextValidKeyView:function(h,b){var c=this.get("nextKeyView"),f,e,a,g;
if(this!==h&&b.indexOf(h)!=-1&&this.get("acceptsFirstResponder")&&this.get("isVisibleInWindow")){return this
}b.push(this);if(!c){f=this.get("childViews");for(e=0,a=f.length;e<a;e++){g=f[e];
if(g.get("isVisibleInWindow")&&g.get("isVisible")){c=g._computeNextValidKeyView(h,b)
}if(c){return c}}c=null}return c},previousKeyView:null,previousValidKeyView:function(){var a=[],c=this.pane(),b=this.get("previousKeyView");
if(!b){b=c._computePreviousValidKeyView(this,a)}return b}.property("previousKeyView"),_computePreviousValidKeyView:function(g,a){var b=this.get("previousKeyView"),e,c,f;
if(this!==g&&a.indexOf(g)!=-1&&this.get("acceptsFirstResponder")&&this.get("isVisibleInWindow")){return this
}a.push(this);if(!b){e=this.get("childViews");for(c=e.length-1;0<=c;c--){f=e[c];if(f.get("isVisibleInWindow")&&f.get("isVisible")){b=f._computePreviousValidKeyView(g,a)
}if(b){return b}}b=null}return b},init:function(){var f,h,c,b,a,e,i;arguments.callee.base.apply(this,arguments);
SC.View.views[this.get("layerId")]=this;var g=this.get("childViews");this.childViews=g?g.slice():[];
this.createChildViews();i=this.get("displayProperties");b=i.length;while(--b>=0){this.addObserver(i[b],this,this.displayDidChange)
}if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)
}},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;
for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},destroy:function(){if(this.get("isDestroyed")){return this
}this._destroy();this.removeFromParent();if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)
}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}arguments.callee.base.apply(this,arguments);
return this},_destroy:function(){if(this.get("isDestroyed")){return this}this.destroyLayer();
var c=this.get("childViews"),b=c.length,a;if(b){c=c.slice();for(a=0;a<b;++a){c[a].destroy()
}}delete SC.View.views[this.get("layerId")];delete this._CQ;delete this.page;return this
},createChildViews:function(){var g=this.get("childViews"),b=g.length,a,f,e,c;this.beginPropertyChanges();
for(a=0;a<b;++a){if(f=(c=g[a])){if(typeof f===SC.T_STRING){c=this[f]}else{f=null}if(!c){console.error("No view with name "+f+" has been found in "+this.toString());
continue}if(c.isClass){c=this.createChildView(c);if(f){this[f]=c}}}g[a]=c}this.endPropertyChanges();
return this},createChildView:function(a,b){if(!b){b={}}b.owner=b.parentView=this;
b.isVisibleInWindow=this.get("isVisibleInWindow");if(!b.page){b.page=this.page}a=a.create(b);
return a},propertyDidChange:function(b,e,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var f=this._kvo_dependents[b];
if(f&&f.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()
}arguments.callee.base.apply(this,arguments)},adjust:function(a,e){var b=SC.clone(this.get("layout")),c=NO,g;
if(a===undefined){return this}if(SC.typeOf(a)===SC.T_STRING){g=b[a];if(SC.none(e)){if(g!==undefined){c=YES
}delete b[a]}else{if(g!==e){c=YES}b[a]=e}}else{var f=a;for(a in f){if(!f.hasOwnProperty(a)){continue
}e=f[a];g=b[a];if(e===null){if(g!==undefined){c=YES}delete b[a]}else{if(e!==undefined){if(g!==e){c=YES
}b[a]=e}}}}if(c){this.set("layout",b)}return this},layout:{top:0,left:0,bottom:0,right:0},convertFrameToView:function(j,e){var c=0,b=0,h=0,g=0,a=this,i;
while(a){i=a.get("frame");c+=i.x;b+=i.y;a=a.get("layoutView")}if(e){a=e;while(a){i=a.get("frame");
h+=i.x;g+=i.y;a=a.get("layoutView")}}c=j.x+c-h;b=j.y+b-g;return{x:c,y:b,width:j.width,height:j.height}
},convertFrameFromView:function(j,e){var c=0,b=0,h=0,g=0,a=this,i;while(a&&(i=a.get("frame"))){c+=i.x;
b+=i.y;a=a.get("parentView")}if(e){a=e;while(a){i=a.get("frame");h+=i.x;g+=i.y;a=a.get("parentView")
}}c=j.x-c+h;b=j.y-b+g;return{x:c,y:b,width:j.width,height:j.height}},scrollToVisible:function(){var a=this.get("parentView");
while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();
return a.scrollToVisible(this)}else{return NO}},frame:function(){return this.computeFrameWithParentFrame(null)
}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(i){var t=this.get("layout"),s={},p,w,o=SC.LAYOUT_AUTO,q=this.get("useStaticLayout"),n=this.get("parentView"),j,e,m,b,a=t.right,c=t.left,v=t.top,h=t.bottom,u=t.width,g=t.height,l=t.centerX,k=t.centerY;
if(u!==undefined&&u===SC.LAYOUT_AUTO&&q!==undefined&&!q){p=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);
console.error(p.toString());throw p}if(g!==undefined&&g===SC.LAYOUT_AUTO&&q!==undefined&&!q){p=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);
console.error(p.toString());throw p}if(q){if(w=this.get("layer")){s=SC.viewportOffset(w);
if(n){s=n.convertFrameFromView(s,null)}s.width=w.offsetWidth;s.height=w.offsetHeight;
return s}return null}if(!i){i=this.computeParentDimensions(t)}j=i.height;e=i.width;
if(!SC.none(c)){if(SC.isPercentage(c)){s.x=e*c}else{s.x=c}if(u!==undefined){if(u===o){s.width=o
}else{if(SC.isPercentage(u)){s.width=e*u}else{s.width=u}}}else{s.width=e-s.x;if(a&&SC.isPercentage(a)){s.width=s.width-(a*e)
}else{s.width=s.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(u)){if(SC.isPercentage(a)){s.width=e-(e*a)
}else{s.width=e-a}s.x=0}else{if(u===o){s.width=o}else{if(SC.isPercentage(u)){s.width=e*u
}else{s.width=(u||0)}}if(SC.isPercentage(u)){s.x=e-(a*e)-s.width}else{s.x=e-a-s.width
}}}else{if(!SC.none(l)){if(u===o){s.width=o}else{if(SC.isPercentage(u)){s.width=u*e
}else{s.width=(u||0)}}if(SC.isPercentage(l)){s.x=(e-s.width)/2+(l*e)}else{s.x=(e-s.width)/2+l
}}else{s.x=0;if(SC.none(u)){s.width=e}else{if(u===o){s.width=o}if(SC.isPercentage(u)){s.width=u*e
}else{s.width=(u||0)}}}}}if(!SC.none(v)){if(SC.isPercentage(v)){s.y=v*j}else{s.y=v
}if(g!==undefined){if(g===o){s.height=o}else{if(SC.isPercentage(g)){s.height=g*j}else{s.height=g
}}}else{if(h&&SC.isPercentage(h)){s.height=j-s.y-(h*j)}else{s.height=j-s.y-(h||0)
}}}else{if(!SC.none(h)){if(SC.none(g)){if(SC.isPercentage(h)){s.height=j-(h*j)}else{s.height=j-h
}s.y=0}else{if(g===o){s.height=o}if(g&&SC.isPercentage(g)){s.height=g*j}else{s.height=(g||0)
}if(SC.isPercentage(h)){s.y=j-(h*j)-s.height}else{s.y=j-h-s.height}}}else{if(!SC.none(k)){if(g===o){s.height=o
}if(g&&SC.isPercentage(g)){s.height=g*j}else{s.height=(g||0)}if(SC.isPercentage(k)){s.y=(j-s.height)/2+(k*j)
}else{s.y=(j-s.height)/2+k}}else{s.y=0;if(SC.none(g)){s.height=j}else{if(g===o){s.height=o
}if(SC.isPercentage(g)){s.height=g*j}else{s.height=g||0}}}}}s.x=Math.floor(s.x);s.y=Math.floor(s.y);
if(s.height!==o){s.height=Math.floor(s.height)}if(s.width!==o){s.width=Math.floor(s.width)
}if(s.height===o||s.width===o){w=this.get("layer");if(s.height===o){s.height=w?w.clientHeight:0
}if(s.width===o){s.width=w?w.clientWidth:0}}if(this.get("hasBorder")){m=this.get("borderTop");
b=this.get("borderLeft");s.height-=m+this.get("borderBottom");s.y+=m;s.width-=b+this.get("borderRight");
s.x+=b}if(n&&n.isScrollContainer){n=n.get("parentView");s.x-=n.get("horizontalScrollOffset");
s.y-=n.get("verticalScrollOffset")}if(!SC.none(t.maxHeight)&&(s.height>t.maxHeight)){s.height=t.maxHeight
}if(!SC.none(t.minHeight)&&(s.height<t.minHeight)){s.height=t.minHeight}if(!SC.none(t.maxWidth)&&(s.width>t.maxWidth)){s.width=t.maxWidth
}if(!SC.none(t.minWidth)&&(s.width<t.minWidth)){s.width=t.minWidth}if(s.height<0){s.height=0
}if(s.width<0){s.width=0}return s},computeParentDimensions:function(g){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;
if(a){b={width:a.width,height:a.height}}else{var e=g||{};b={width:(e.left||0)+(e.width||0)+(e.right||0),height:(e.top||0)+(e.height||0)+(e.bottom||0)}
}return b},clippingFrame:function(){var e=this.get("frame"),a=e,b,c;if(!e){return null
}b=this.get("parentView");if(b){c=b.get("contentClippingFrame");if(!c){return e}a=SC.intersectRects(c,e)
}a.x-=e.x;a.y-=e.y;return a}.property("parentView","frame").cacheable(),contentClippingFrame:function(){return this.get("clippingFrame")
}.property("clippingFrame").cacheable(),_sc_view_clippingFrameDidChange:function(){var e=this.get("childViews"),b=e.length,a,c;
for(a=0;a<b;++a){c=e[a];if(!c.hasStaticLayout){c.notifyPropertyChange("clippingFrame");
c._sc_view_clippingFrameDidChange()}}},parentViewDidResize:function(){var b,c,e,a,f;
if(this.useStaticLayout){b=YES}else{c=this.get("layout");e=((c.left!==undefined)&&(c.top!==undefined)&&(c.width!==undefined)&&(c.height!==undefined));
if(e){a=SC.isPercentage;f=(a(c.left)||a(c.top)||a(c.width)||a(c.right)||a(c.centerX)||a(c.centerY))
}b=(!e||f)}if(b){this.viewDidResize()}},viewDidResize:function(){this._viewFrameDidChange();
var e=this.childViews,b=e.length,a,c;for(a=0;a<b;++a){c=e[a];c.parentViewDidResize()
}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._sc_view_clippingFrameDidChange()
},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()
}var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];if(c.beginLiveResize){c.beginLiveResize()
}}return this},endLiveResize:function(){var e=this.get("childViews"),b=e.length,a,c;
for(a=b-1;a>=0;--a){c=e[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()
}return this},wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){return this.get("wantsAcceleratedLayer")&&SC.platform.supportsAcceleratedLayers
}.property("wantsAcceleratedLayer").cacheable(),layoutStyle:function(){var w=this.get("layout"),A={},k=null,t,p=SC.LAYOUT_AUTO,q=SC._VIEW_DEFAULT_DIMS,j=q.length,l,s,B,u=this.get("useStaticLayout"),a=w.right,f=w.left,z=w.top,h=w.bottom,y=w.width,g=w.height,c=w.maxWidth,i=w.maxHeight,o=w.centerX,n=w.centerY,e=this.get("hasAcceleratedLayer"),b=0,v=0;
if(y!==undefined&&y===SC.LAYOUT_AUTO&&!u){t=SC.Error.desc("%@.layout() you cannot use width:auto if "+"staticLayout is disabled".fmt(this),"%@".fmt(this),-1);
console.error(t.toString());throw t}if(g!==undefined&&g===SC.LAYOUT_AUTO&&!u){t=SC.Error.desc("%@.layout() you cannot use height:auto if "+"staticLayout is disabled".fmt(this),"%@".fmt(this),-1);
console.error(t.toString());throw t}if(!SC.none(f)){if(SC.isPercentage(f)){A.left=(f*100)+"%"
}else{if(e&&!SC.empty(y)){v=Math.floor(f);A.left=0}else{A.left=Math.floor(f)}}A.marginLeft=0;
if(y!==undefined){if(y===SC.LAYOUT_AUTO){A.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(y)){A.width=(y*100)+"%"
}else{A.width=Math.floor(y)}}A.right=null}else{A.width=null;if(a&&SC.isPercentage(a)){A.right=(a*100)+"%"
}else{A.right=Math.floor(a||0)}}}else{if(!SC.none(a)){if(SC.isPercentage(a)){A.right=Math.floor(a*100)+"%"
}else{A.right=Math.floor(a)}A.marginLeft=0;if(SC.none(y)){if(SC.none(c)){A.left=0
}A.width=null}else{A.left=null;if(y===SC.LAYOUT_AUTO){A.width=SC.LAYOUT_AUTO}else{if(y&&SC.isPercentage(y)){A.width=(y*100)+"%"
}else{A.width=Math.floor(y||0)}}}}else{if(!SC.none(o)){A.left="50%";if(y&&SC.isPercentage(y)){A.width=(y*100)+"%"
}else{A.width=Math.floor(y||0)}if(y&&SC.isPercentage(y)&&(SC.isPercentage(o)||SC.isPercentage(o*-1))){A.marginLeft=Math.floor((o-y/2)*100)+"%"
}else{if(y&&y>=1&&!SC.isPercentage(o)){A.marginLeft=Math.floor(o-A.width/2)}else{console.warn("You have to set width and centerX usign both percentages or pixels");
A.marginLeft="50%"}}A.right=null}else{if(!SC.none(y)){A.left=0;A.right=null;if(y===SC.LAYOUT_AUTO){A.width=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(y)){A.width=(y*100)+"%"}else{A.width=Math.floor(y)}}A.marginLeft=0
}else{A.left=0;A.right=0;A.width=null;A.marginLeft=0}}}}A.minWidth=(w.minWidth===undefined)?null:w.minWidth;
A.maxWidth=(w.maxWidth===undefined)?null:w.maxWidth;if(!SC.none(z)){if(SC.isPercentage(z)){A.top=(z*100)+"%"
}else{if(e&&!SC.empty(g)){b=Math.floor(z);A.top=0}else{A.top=Math.floor(z)}}if(g!==undefined){if(g===SC.LAYOUT_AUTO){A.height=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(g)){A.height=(g*100)+"%"}else{A.height=Math.floor(g)}}A.bottom=null
}else{A.height=null;if(h&&SC.isPercentage(h)){A.bottom=(h*100)+"%"}else{A.bottom=Math.floor(h||0)
}}A.marginTop=0}else{if(!SC.none(h)){A.marginTop=0;if(SC.isPercentage(h)){A.bottom=(h*100)+"%"
}else{A.bottom=Math.floor(h)}if(SC.none(g)){if(SC.none(i)){A.top=0}A.height=null}else{A.top=null;
if(g===SC.LAYOUT_AUTO){A.height=SC.LAYOUT_AUTO}else{if(g&&SC.isPercentage(g)){A.height=(g*100)+"%"
}else{A.height=Math.floor(g||0)}}}}else{if(!SC.none(n)){A.top="50%";A.bottom=null;
if(g&&SC.isPercentage(g)){A.height=(g*100)+"%"}else{A.height=Math.floor(g||0)}if(g&&SC.isPercentage(g)&&(SC.isPercentage(n)||SC.isPercentage(n*-1))){A.marginTop=Math.floor((n-g/2)*100)+"%"
}else{if(g&&g>=1&&!SC.isPercentage(n)){A.marginTop=Math.floor(n-A.height/2)}else{console.warn("You have to set height and centerY to use both percentages or pixels");
A.marginTop="50%"}}}else{if(!SC.none(g)){A.top=0;A.bottom=null;if(g===SC.LAYOUT_AUTO){A.height=SC.LAYOUT_AUTO
}else{if(g&&SC.isPercentage(g)){A.height=(g*100)+"%"}else{A.height=Math.floor(g||0)
}}A.marginTop=0}else{A.top=0;A.bottom=0;A.height=null;A.marginTop=0}}}}A.minHeight=(w.minHeight===undefined)?null:w.minHeight;
A.maxHeight=(w.maxHeight===undefined)?null:w.maxHeight;A.zIndex=SC.none(w.zIndex)?null:w.zIndex.toString();
A.backgroundPosition=SC.none(w.backgroundPosition)?null:w.backgroundPosition.toString();
while(--j>=0){l=q[j];if(A[l]===0){A[l]=null}}if(e){var m="translateX("+v+"px) translateY("+b+"px)";
if(SC.platform.supportsCSS3DTransforms){m+=" translateZ(0px)"}A[SC.platform.domCSSPrefix+"Transform"]=m
}for(B in A){s=A[B];if(typeof s===SC.T_NUMBER){A[B]=(s+"px")}}return A}.property().cacheable(),layoutView:function(){return this.get("parentView")
}.property("parentView").cacheable(),layoutDidChange:function(){var c=this._previousLayout,f=this.get("layout"),a=YES,i,g,e,h;
if(c&&c!==f){i=c.width;if(i!==undefined){e=f.width;if(i===e){g=c.height;if(c!==undefined){h=f.height;
if(g===h){a=NO}}}}}this.beginPropertyChanges();this.notifyPropertyChange("layoutStyle");
if(a){this.viewDidResize()}else{this._viewFrameDidChange()}this.endPropertyChanges();
var b=this.get("layoutView");if(b){b.set("childViewsNeedLayout",YES);b.layoutDidChangeFor(this);
if(b.get("childViewsNeedLayout")){b.invokeOnce(b.layoutChildViewsIfNeeded)}}return this
},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;
if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")
}if(a&&this.get("childViewsNeedLayout")){this.set("childViewsNeedLayout",NO);this.layoutChildViews()
}return this},layoutChildViews:function(){var c=this._needLayoutViews,a=c?c.length:0,b;
for(b=0;b<a;++b){c[b].updateLayout()}c.clear()},updateLayout:function(){var b=this.get("layer"),a;
if(b){a=this.renderContext(b);this.renderLayout(a);a.update();if(this.useStaticLayout){this.viewDidResize()
}}b=null;return this},renderLayout:function(a,b){a.addStyle(this.get("layoutStyle"))
},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(!this.get("isContextMenuEnabled")){a.stop()
}return true},touchBoundary:{left:50,right:50,top:50,bottom:50},_touchBoundaryFrame:function(){return this.get("parentView").convertFrameToView(this.get("frame"),null)
}.property("frame","parentView").cacheable(),touchIsInBoundary:function(i){var c=this.get("_touchBoundaryFrame"),e=0,b=0,h=this.get("touchBoundary");
var a=i.pageX,g=i.pageY;if(a<c.x){a=c.x-a;e=h.left}else{if(a>c.x+c.width){a=a-(c.x+c.width);
e=h.right}else{a=0;e=1}}if(g<c.y){g=c.y-g;b=h.top}else{if(g>c.y+c.height){g=g-(c.y+c.height);
b=h.bottom}else{g=0;b=1}}if(a>100||g>100){return NO}return YES}});SC.View.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this
}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))
}return a},layout:function(a){this.prototype.layout=a;return this},convertLayoutToAnchoredLayout:function(g,n){var i={top:0,left:0,width:n.width,height:n.height},e=n.width,l=n.height,m=g.right,a=g.left,k=g.top,h=g.bottom,j=g.width,f=g.height,c=g.centerX,b=g.centerY;
if(!SC.none(a)){if(SC.isPercentage(a)){i.left=a*e}else{i.left=a}if(j!==undefined){if(j===SC.LAYOUT_AUTO){i.width=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(j)){i.width=j*e}else{i.width=j}}}else{if(m&&SC.isPercentage(m)){i.width=e-i.left-(m*e)
}else{i.width=e-i.left-(m||0)}}}else{if(!SC.none(m)){if(SC.none(j)){i.left=0;if(m&&SC.isPercentage(m)){i.width=e-(m*e)
}else{i.width=e-(m||0)}}else{if(j===SC.LAYOUT_AUTO){i.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(j)){i.width=j*e
}else{i.width=j}if(SC.isPercentage(m)){i.left=e-(i.width+m)}else{i.left=e-(i.width+m)
}}}}else{if(!SC.none(c)){if(j&&SC.isPercentage(j)){i.width=(j*e)}else{i.width=(j||0)
}i.left=((e-i.width)/2);if(SC.isPercentage(c)){i.left=i.left+c*e}else{i.left=i.left+c
}}else{if(!SC.none(j)){i.left=0;if(j===SC.LAYOUT_AUTO){i.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(j)){i.width=j*e
}else{i.width=j}}}else{i.left=0;i.width=0}}}}if(g.minWidth!==undefined){i.minWidth=g.minWidth
}if(g.maxWidth!==undefined){i.maxWidth=g.maxWidth}if(!SC.none(k)){if(SC.isPercentage(k)){i.top=k*l
}else{i.top=k}if(f!==undefined){if(f===SC.LAYOUT_AUTO){i.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){i.height=f*l
}else{i.height=f}}}else{i.height=l-i.top;if(h&&SC.isPercentage(h)){i.height=i.height-(h*l)
}else{i.height=i.height-(h||0)}}}else{if(!SC.none(h)){if(SC.none(f)){i.top=0;if(h&&SC.isPercentage(h)){i.height=l-(h*l)
}else{i.height=l-(h||0)}}else{if(f===SC.LAYOUT_AUTO){i.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){i.height=f*l
}else{i.height=f}i.top=l-i.height;if(SC.isPercentage(h)){i.top=i.top-(h*l)}else{i.top=i.top-h
}}}}else{if(!SC.none(b)){if(f&&SC.isPercentage(f)){i.height=(f*l)}else{i.height=(f||0)
}i.top=((l-i.height)/2);if(SC.isPercentage(b)){i.top=i.top+b*l}else{i.top=i.top+b
}}else{if(!SC.none(f)){i.top=0;if(f===SC.LAYOUT_AUTO){i.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){i.height=f*l
}else{i.height=f}}}else{i.top=0;i.height=0}}}}if(i.top){i.top=Math.floor(i.top)}if(i.bottom){i.bottom=Math.floor(i.bottom)
}if(i.left){i.left=Math.floor(i.left)}if(i.right){i.right=Math.floor(i.right)}if(i.width!==SC.LAYOUT_AUTO){i.width=Math.floor(i.width)
}if(i.height!==SC.LAYOUT_AUTO){i.height=Math.floor(i.height)}if(g.minHeight!==undefined){i.minHeight=g.minHeight
}if(g.maxHeight!==undefined){i.maxHeight=g.maxHeight}return i},convertLayoutToCustomLayout:function(b,a,c){},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);
this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;
return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()
}b.push(a);this.prototype.childViews=b;return this},bind:function(b,e){var c=this.prototype,a=this.superclass.prototype;
var f=c._bindings;if(!f||f===a._bindings){f=c._bindings=(f||[]).slice()}b=b+"Binding";
c[b]=e;f.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]
}return b},viewFor:function(e,c){var b=SC.$A(arguments);if(SC.none(e)){b.shift()}else{b[0]={rootElement:SC.$(e)[0]}
}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=this,a=new b(arguments);
if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(f){var b=f.childViews;
delete f.childViews;this.applyLocalizedAttributes(f);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))
}var e=this.prototype.childViews,a=e.length,c;while(--a>=0){c=e[a];f=b[a];if(f&&c&&c.loc){c.loc(f)
}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});
SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))
}.property()};SC.View.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue
}delete a[b]}}};if(SC.browser.msie){SC.Event.add(window,"unload",SC.View,SC.View.unload)
}SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR
}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;
if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);
if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK
}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK
},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES
},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()
},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b
},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a
},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))
},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));
if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)
}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")
}}.observes("validator","ownerForm")};sc_require("views/view");sc_require("mixins/control");
sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{isTextArea:NO,_field_isMouseDown:NO,fieldValue:function(){var a=this.get("value");
if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)
}.property("value","validator").cacheable(),$input:function(){if(this.get("isTextArea")){return this.$("textarea").andSelf().filter("textarea")
}else{return this.$("input").andSelf().filter("input")}},setFieldValue:function(b){if(SC.none(b)){b=""
}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()
},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)
},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);
this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))
}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));
SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},didAppendToDocument:function(){if(this.get("isTextArea")){this.setFieldValue(this.get("fieldValue"));
SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)}},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)
},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)
}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);
a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)
}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;
b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$input()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");
if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);
this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();
if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a}});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,length:function(){var b=this.get("start");
var a=this.get("end");if((b)===-1||(a===-1)){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end")})
},toString:function(){var a=this.get("length");if(a&&a>0){if(a===1){return"[%@ character selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))
}else{return"[%@ characters selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))
}}else{return"[no text selected; caret at %@]".fmt(this.get("start"))}}});SC.StaticLayout={hasStaticLayout:YES};
sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/static_layout");
sc_require("mixins/editable");SC.TextFieldView=SC.FieldView.extend(SC.StaticLayout,SC.Editable,{tagName:"label",classNames:["sc-text-field-view"],isTextField:YES,applyImmediately:YES,isPassword:NO,isTextArea:NO,hint:"",isEditing:NO,hintON:YES,defaultTabbingEnabled:YES,isContextMenuEnabled:YES,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:YES,maxLength:5096,_isFocused:NO,init:function(){var a=this.get("hintON"),b=this.get("value");
if(!b||b&&b.length===0){this.set("hintON",YES)}else{this.set("hintON",NO)}return arguments.callee.base.apply(this,arguments)
},isEditable:function(){return this.get("isEnabled")}.property("isEnabled").cacheable(),selection:function(k,i){var e=this.$input()[0],f,a,c;
if(i===undefined){if(e){a=null;c=null;if(!e.value){a=c=0}else{if("selectionStart" in e){a=e.selectionStart
}if("selectionEnd" in e){c=e.selectionEnd}if(a===null||c===null){var j=document.selection;
if(j){var h=j.type;if(h&&(h==="None"||h==="Text")){f=j.createRange();if(!this.get("isTextArea")){var b=f.text.length;
a=Math.abs(f.moveStart("character",0-(e.value.length+1)));c=a+b}else{var g=f.duplicate();
g.moveToElementText(e);g.setEndPoint("EndToStart",f);a=g.text.length;c=a+f.text.length
}}}}}return SC.TextSelection.create({start:a,end:c})}else{return null}}else{if(!i||!i.kindOf||!i.kindOf(SC.TextSelection)){throw"When setting the selection, you must specify an SC.TextSelection instance."
}if(e){if(e.setSelectionRange){e.setSelectionRange(i.get("start"),i.get("end"))}else{f=e.createTextRange();
a=i.get("start");f.move("character",a);f.moveEnd("character",i.get("end")-a);f.select()
}}return i}}.property("fieldValue").cacheable(),displayProperties:"hint fieldValue isEditing leftAccessoryView rightAccessoryView isTextArea".w(),createChildViews:function(){arguments.callee.base.apply(this,arguments);
this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabled")
}.property("isEnabled"),accessoryViewObserver:function(){var g,j=["leftAccessoryView","rightAccessoryView"],a=j.length,b,f,e,h;
for(b=0;b<a;b++){f=j[b];e=this["_"+f];h=this.get(f);if(!(e&&h&&(e===h))){if(e){g=e.get("classNames");
g=g.without("sc-text-field-accessory-view");e.set("classNames",g);this.removeChild(e);
e=null;this["_"+f]=null}if(h){if(h.isClass){h=h.create({layoutView:this})}g=h.get("classNames");
var c="sc-text-field-accessory-view";if(g.indexOf(c)<0){g=SC.clone(g);g.push(c);h.set("classNames",g)
}this.appendChild(h);this["_"+f]=h}}}}.observes("leftAccessoryView","rightAccessoryView"),layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")
}if(a&&this.get("childViewsNeedLayout")){var b=this.get("rightAccessoryView");if(b&&b.get){var c=b.get("layout");
if(c){c.left=null;if(!c.right){c.right=0}b.adjust({layout:c})}}}arguments.callee.base.apply(this,arguments)
},render:function(f,g){arguments.callee.base.apply(this,arguments);var a,e,c,b;a=this.get("fieldValue");
if(SC.none(a)){a=""}a=String(a);f.setClass("not-empty",a.length>0);e=this._getAccessoryViewWidths();
c=e.left;b=e.right;if(c){c+="px"}if(b){b+="px"}this._renderField(f,g,a,c,b);if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)
}},_forceRenderFirstTime:NO,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",YES)
}.observes("isTextArea"),_renderField:function(c,j,p,h,m){var n=this.get("hint"),f,v,q,e,s,b,k,g,o=this.get("spellCheckEnabled"),u,i=this.get("maxLength"),a;
c.setClass("text-area",this.get("isTextArea"));a=(parseInt(SC.browser.safari,0)<532);
c.setClass("oldWebKitFieldPadding",a);u=o?' spellcheck="true"':' spellcheck="false"';
if(j||this._forceRenderFirstTime){this._forceRenderFirstTime=NO;f=this.get("isEnabled")?"":'disabled="disabled"';
v=this.get("layerId");c.push('<span class="border"></span>');q="";if(h||m){q='style="';
if(h){q+="left: "+h+"; "}if(m){q+="right: "+m+";"}q+='"'}c.push('<span class="padding" '+q+">");
p=this.get("escapeHTML")?SC.RenderContext.escapeHTML(p):p;if(!this.get("_supportsPlaceHolder")&&(!p||(p&&p.length===0))){p=this.get("hint");
c.setClass("sc-hint",YES)}g=(SC.browser.mozilla&&(parseFloat(SC.browser.mozilla)<1.9||SC.browser.mozilla.match(/1\.9\.0|1\.9\.1/)))?"field oldGecko":"field";
if(this.get("isTextArea")){c.push('<textarea class="',g,'" name="',v,'" ',f,' placeholder="',n,'"',u,' maxlength="',i,'">',p,"</textarea></span>")
}else{e=this.get("isPassword")?"password":"text";c.push('<input class="',g,'" type="',e,'" name="',v,'" ',f,' value="',p,'" placeholder="',n,'"',u,' maxlength="',i,'" /></span>')
}}else{var l=this.$input();if(!this.get("_supportsPlaceHolder")){var t=this.get("value");
if((!t||(t&&t.length===0))){if(this.get("hintON")&&!this.get("isFirstResponder")){c.setClass("sc-hint",YES);
l.val(n)}else{c.setClass("sc-hint",NO);l.val("")}}}else{l.attr("placeholder",n)}b=l[0];
if(b){if(!this.get("isEnabled")){b.disabled="true"}else{b.disabled=null}k=b.parentNode.style;
if(h){if(k.left!==h){k.left=h}}else{k.left=null}if(m){if(k.right!==m){k.right=m}}else{k.right=null
}}}},_getAccessoryViewWidths:function(){var c={},l=["left","right"],e=l.length,g,h,m,k,a,j,f,b;
for(g=0;g<e;g++){h=l[g];m=this.get(h+"AccessoryView");if(m){if(m.isClass){m=m.create({layoutView:this})
}if(m.get){b=m.get("frame");if(b){a=b.width;if(a){j=m.get("layout");if(j){f=j[h];
a+=f}c[h]=a}}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);
if(!this.get("_supportsPlaceHolder")&&this.get("hintON")){var b=this.$input().val();
if(!b||(b&&b.length===0)){this.$input().val(this.get("hint"))}}if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)
}else{this._addTextAreaEvents();if(SC.browser.mozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)
}}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);
SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange);
if(SC.browser.mozilla){this._cacheInputElement=this.$input();this._cachePaddingElement=this.$(".padding")
}},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();
SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);
SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"focus",this,this._firefox_dispatch_keypress)
},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",YES);
this.fieldDidFocus(a);var b=this.get("value");if(!this.get("_supportsPlaceHolder")&&((!b)||(b&&b.length===0))){this.set("hintON",NO)
}},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",NO);
this.fieldDidBlur(this._origEvent);var b=this.get("value");if(!this.get("_supportsPlaceHolder")&&((!b)||(b&&b.length===0))){this.set("hintON",YES)
}},this)},fieldDidFocus:function(a){this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();
this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("usingTouchIntercept")){b.hideTouchIntercept();
this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.commitEditing(a);
var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(NO)
},this)}},_topOffsetForFirefoxCursorFix:3,_applyFirefoxCursorFix:function(){if(parseFloat(SC.browser.mozilla)<1.9&&!this.get("useStaticLayout")){var i,e,c,j,b,h,f,g;
f=this._cacheInputElement;g=this._cachePaddingElement;if(g&&g[0]){h=g[0];b=SC.$(h).offset();
if(SC.browser.compareVersion(1,9,2)<0&&f[0].tagName.toLowerCase()==="input"){i=b.top+this._topOffsetForFirefoxCursorFix
}else{i=b.top}e=b.left;c=h.offsetWidth;j=h.offsetHeight;var a="position: fixed; top: %@px; left: %@px; width: %@px; height: %@px;".fmt(i,e,c,j);
if(!this._prevStyle||this._prevStyle!=a){f.attr("style",a)}this._prevStyle=a}}return this
},_firefox_dispatch_keypress:function(a){var e=this.get("selection"),f=this.get("value"),c=f?f.length:0,b;
if(!e||((e.get("length")===0&&(e.get("start")===0)||e.get("end")===c))){b=SC.RootResponder.responder;
b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")
},willBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];
try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)
}}},willLoseKeyResponderTo:function(a){},_selectRootElement:function(){var a=this.$input()[0];
if(a){a.select()}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];
if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");
if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0
}},parentViewDidResize:function(){if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)
}arguments.callee.base.apply(this,arguments)},keyDown:function(b){var f=b.which,c=false;
if((f===13&&!b.isIMEInput)&&!this.get("isTextArea")){return NO}if(f===27){return NO
}if(f===9&&this.get("defaultTabbingEnabled")){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(!SC.browser.safari&&this.get("isTextArea")){var e=this.get("value");
if(e&&b.which>47&&(e.length>=this.get("maxLength"))){c=true}}if((this.performValidateKeyDown(b)||SC.platform.touch)&&!c){this._isKeyDown=YES;
b.allowDefault()}else{b.stop()}if(this.get("applyImmediately")){this.invokeLater(this.fieldValueDidChange,1)
}return YES},keyUp:function(a){if(SC.browser.mozilla&&a.keyCode===13){this.fieldValueDidChange()
}this.notifyPropertyChange("selection");this._isKeyDown=NO;a.allowDefault();return YES
},mouseDown:function(a){var b=this.get("fieldValue");this._txtFieldMouseDown=YES;
if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)
}},mouseUp:function(a){this._txtFieldMouseDown=NO;this.notifyPropertyChange("selection");
if(!this.get("isEnabled")){a.stop();return YES}return arguments.callee.base.apply(this,arguments)
},mouseWheel:function(a){a.allowDefault();return YES},selectStart:function(a){return YES
},_supportsPlaceHolder:function(){return SC.browser.safari&&!this.get("isTextArea")
}.property("isTextArea").cacheable(),valueObserver:function(){var a=this.get("value");
if(a&&a.length>0){this.set("hintON",NO)}else{this.set("hintON",YES)}}.observes("value")});
sc_require("views/text_field");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.DelegateSupport,{_topOffsetForFirefoxCursorFix:0,beginEditing:function(b){if(!b){throw"InlineTextField.beginEditing() requires options"
}if(this.get("isEditing")){return NO}var e={},g,c,f,a;a=this._delegate=b.delegate;
this.set("delegate",a);if(!this.invokeDelegateMethod(a,"inlineEditorShouldBeginEditing",this)){SC.Logger.warn("InlineTextField.beginEditing() cannot begin without inlineEditorShouldBeginEditing() on the delegate.");
return NO}this.beginPropertyChanges();this.set("isEditing",YES);this.set("escapeHTML",b.escapeHTML);
this._optframe=b.frame;this._optIsCollection=b.isCollection;this._exampleElement=b.exampleElement;
if(!this._optframe||!a){throw"At least frame and delegate options are required for inline editor"
}this._originalValue=b.value;if(SC.none(this._originalValue)){this._originalValue=""
}this._multiline=(b.multiline!==undefined)?b.multiline:NO;if(this._multiline){this.set("isTextArea",YES)
}else{this.set("isTextArea",NO)}this._commitOnBlur=(b.commitOnBlur!==undefined)?b.commitOnBlur:YES;
this.set("validator",b.validator);this.set("value",this._originalValue);g=a.get("pane");
e.height=this._optframe.height;e.width=this._optframe.width;c=this._delegate.get("layout");
f=g.$()[0];if(this._optIsCollection&&c.left){e.left=this._optframe.x-c.left-f.offsetLeft-1;
if(SC.browser.msie==7){e.left--}}else{e.left=this._optframe.x-f.offsetLeft-1;if(SC.browser.msie==7){e.left--
}}if(this._optIsCollection&&c.top){e.top=this._optframe.y-c.top-f.offsetTop;if(SC.browser.msie==7){e.top=e.top-2
}}else{e.top=this._optframe.y-f.offsetTop;if(SC.browser.msie==7){e.top=e.top-2}}this.set("layout",e);
this.set("parentNode",g);g.appendChild(this);this._className=this.getDelegateProperty(a,"inlineEditorClassName");
if(this._className&&!this.hasClassName(this._className)){this.setClassName(this._className,true)
}this.invokeDelegateMethod(a,"inlineEditorWillBeginEditing",this);this._previousFirstResponder=g?g.get("firstResponder"):null;
this.becomeFirstResponder();this.endPropertyChanges();this.invokeLast(function(){this.invokeDelegateMethod(a,"inlineEditorDidBeginEditing",this)
});return this},commitEditing:function(a){if(!SC.$ok(this.validateSubmit())){return NO
}return this._endEditing(this.get("value"),a)},discardEditing:function(){return this._endEditing(this._originalValue,null,YES)
},blurEditor:function(a){if(!this.get("isEditing")){return YES}return this._commitOnBlur?this.commitEditing(a):this.discardEditing(a)
},_endEditing:function(e,b,c){if(!this.get("isEditing")){return YES}var a=this._delegate;
if(!this.invokeDelegateMethod(a,"inlineEditorShouldEndEditing",this,e,b,c)){SC.Logger.warn("InlineTextField._endEditing() cannot end without inlineEditorShouldEndEditing() on the delegate.");
return NO}this.invokeDelegateMethod(a,"inlineEditorDidEndEditing",this,e,b,c);if(this._className){this.setClassName(this._className,false)
}this._originalValue=this._delegate=this._exampleElement=this._optframe=this._className=null;
this.set("isEditing",NO);if(this.get("isFirstResponder")){var f=this.get("pane");
if(f&&this._previousFirstResponder){f.makeFirstResponder(this._previousFirstResponder)
}else{this.resignFirstResponder()}}this._previousFirstResponder=null;if(this.get("parentNode")){this.removeFromParent()
}return YES},isEditing:NO,mouseDown:function(a){arguments.callee.base.call(this,a);
return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},keyDown:function(a){var b=this.interpretKeyEvents(a);
this.fieldValueDidChange(true);return !b?NO:b},insertText:null,_scitf_blurInput:function(){var a=this.$input()[0];
if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()
},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;
this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();
return YES},fieldValueDidChange:function(a){arguments.callee.base.call(this,a)},insertNewline:function(a){if(this._multiline){a.allowDefault();
return arguments.callee.base.call(this,a)}else{if(this.get("value")!=this.$input().val()){this.set("value",this.$input().val())
}this.commitEditing();return YES}},insertTab:function(a){var c=this._delegate;this.resignFirstResponder();
this.commitEditing();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()
}}return YES},insertBacktab:function(a){var b=this._delegate;this.resignFirstResponder();
this.commitEditing();if(b){var c=b.get("previousValidKeyView");if(c&&c.beginEditing){c.beginEditing()
}}return YES},deleteForward:function(a){a.allowDefault();return YES},deleteBackward:function(a){a.allowDefault();
return YES}});SC.InlineTextFieldView.mixin({beginEditing:function(b){this._exampleElement=b.exampleElement;
var a=b.exampleInlineTextFieldView?b.exampleInlineTextFieldView:this,g=b.delegate.get("layout"),f=this.updateViewStyle(),h=this.updateViewPaddingStyle();
var i=".inline-editor input{"+f+"} ";i=i+".inline-editor textarea{"+f+"} .inline-editor .padding{"+h+"}";
var e=document.getElementsByTagName("head")[0],c=document.createElement("style");
c.type="text/css";c.media="screen";if(c.styleSheet){c.styleSheet.cssText=i}else{c.appendChild(document.createTextNode(i))
}e.appendChild(c);this.editor=a.create({classNames:"inline-editor",layout:g});return this.editor.beginEditing(b)
},commitEditing:function(){return this.editor?this.editor.commitEditing():YES},discardEditing:function(){return this.editor?this.editor.discardEditing():YES
},updateViewStyle:function(){var b=this._exampleElement[0],c="",a=SC.getStyle(b,"font-size");
if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");
if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");
if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");
if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");
if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");
if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");
if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");
if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");
if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");
if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},updateViewPaddingStyle:function(){var b=this._exampleElement[0];
var c="";var a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "
}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "
}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "
}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "
}return c},editor:null});sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")
}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");
if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this
}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name
}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);
return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,f,e){var b,c;
for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue
}e.push(b);c._scrc_name=e.join(".");if(f>0){this._findResponderNamesFor(c,f-1,e)}e.pop()
}}},makeFirstResponder:function(b,a){var g=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),c;
if(this._locked){if(f){console.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))
}this._pendingResponder=b;return}if(f){console.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))
}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;
c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===e)?null:this.nextResponderFor(c)
}if(!c){c=e}this._notifyWillLoseFirstResponder(g,g,c,a);if(g){g.set("isFirstResponder",NO)
}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)
}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;
if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null
}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,f,b,a){if(f===b){return
}f.willLoseFirstResponder(c,a);f.set("hasFirstResponder",NO);var e=this.nextResponderFor(f);
if(e){this._notifyWillLoseFirstResponder(c,e,b)}},_notifyDidBecomeFirstResponder:function(b,e,a){if(e===a){return
}var c=this.nextResponderFor(e);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}e.set("hasFirstResponder",YES);
e.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");
if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(h,e,c){var a=this.get("firstResponder"),f=this.get("nextResponder"),g=this.get("trace"),i=NO,b;
this._locked=YES;if(g){console.log("%@: begin action '%@' (%@, %@)".fmt(this,h,e,c))
}if(!i&&!a&&this.tryToPerform){i=this.tryToPerform(h,e,c)}while(!i&&a){if(a.tryToPerform){i=a.tryToPerform(h,e,c)
}if(!i){a=(a===f)?null:this.nextResponderFor(a)}}if(g){if(!i){console.log("%@:  action '%@' NOT HANDLED".fmt(this,h))
}else{console.log("%@: action '%@' handled by %@".fmt(this,h,this.responderNameFor(a)))
}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)
}return a}};sc_require("views/view");sc_require("mixins/responder_context");SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,currentWindowSize:null,computeParentDimensions:function(h){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}var e=this.get("currentWindowSize"),i={x:0,y:0,width:1000,height:1000},g=this.get("layout");
if(e){i.width=e.width;i.height=e.height}else{if(SC.RootResponder.responder){var b=SC.RootResponder.responder.get("currentWindowSize");
if(b){i.width=b.width;i.height=b.height}}else{var f,a,c;if(!this._bod||!this._docElement){a=document.body;
c=document.documentElement;this._body=a;this._docElement=c}else{a=this._body;c=this._docElement
}if(window.innerHeight){i.width=window.innerWidth;i.height=window.innerHeight}else{if(c&&c.clientHeight){i.width=c.clientWidth;
i.height=c.clientHeight}else{if(a){i.width=a.clientWidth;i.height=a.clientHeight}}}this.windowSizeDidChange(null,i)
}}if(g.minHeight||g.minWidth){if(g.minHeight){i.height=Math.max(i.height,g.minHeight)
}if(g.minWidth){i.width=Math.max(i.width,g.minWidth)}}return i},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);
this.parentViewDidResize();return this},paneLayoutDidChange:function(){this.invokeOnce(this.updateLayout)
}.observes("layout"),sendEvent:function(c,a,e){var b;if(!e){e=this.get("firstResponder")
}while(e&&!e.tryToPerform(c,a)){e=(e===this)?null:e.get("nextResponder")}if(!e&&(e=this.get("defaultResponder"))){if(typeof e===SC.T_STRING){e=SC.objectForPropertyPath(e)
}if(!e){e=null}else{e=e.tryToPerform(c,a)?e:null}}else{if(!e&&!(e=this.get("defaultResponder"))){e=this.tryToPerform(c,a)?this:null
}}return a.mouseHandler||e},performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);
if(!b){var e=this.get("defaultResponder");if(e){if(e.performKeyEquivalent){b=e.performKeyEquivalent(c,a)
}if(!b&&e.tryToPerform){b=e.tryToPerform(c,a)}}}return b},nextResponder:function(){return null
}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this
}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this
}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(b,a){var e=this.get("firstResponder"),c=this.get("isKeyPane");
if(e===b){return this}if(SC.platform.touch&&b&&b.kindOf(SC.TextFieldView)&&!b.get("focused")){return this
}if(e){e.willLoseFirstResponder(e,a)}if(c){if(e){e.willLoseKeyResponderTo(b)}if(b){b.willBecomeKeyResponderFrom(e)
}}if(e){e.beginPropertyChanges().set("isFirstResponder",NO).set("isKeyResponder",NO).endPropertyChanges()
}this.set("firstResponder",b);if(b){b.beginPropertyChanges().set("isFirstResponder",YES).set("isKeyResponder",c).endPropertyChanges()
}if(c){if(b){b.didBecomeKeyResponderFrom(e)}if(e){e.didLoseKeyResponderTo(b)}}if(b){b.didBecomeFirstResponder(b)
}return this},keyDown:function(a){var b;if(a.which===9&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")
}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}}return NO
},_forwardKeyChange:function(e,b,h,g){var c,a,f;if(e&&(a=this.get("firstResponder"))){f=(h)?h.get("firstResponder"):null;
c=this.get("firstResponder");if(c){c[b](f)}if((g!==undefined)&&a){a.set("isKeyResponder",g)
}}},willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);
return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);
return this},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);
this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");
this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);
return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)
},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)
},remove:function(){if(!this.get("isVisibleInWindow")){return this}if(!this.get("isPaneAttached")){return this
}var b=this.get("layer");if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null;this._removeIntercept();
this.resignKeyPane();var a=this.rootResponder;if(this.get("isMainPane")){a.makeMainPane(null)
}a.panes.remove(this);this.rootResponder=null;this.set("isPaneAttached",NO);this.parentViewDidChange();
return this},appendTo:function(b){var a=this.get("layer");if(!a){a=this.createLayer().get("layer")
}if(this.get("isPaneAttached")&&(a.parentNode===b)){return this}b.insertBefore(a,null);
b=a=null;return this.paneDidAttach()},prependTo:function(b){if(this.get("isPaneAttached")){return this
}var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}if(this.get("isPaneAttached")&&(a.parentNode===b)){return this
}b.insertBefore(a,b.firstChild);b=a=null;return this.paneDidAttach()},before:function(c){if(this.get("isPaneAttached")){return this
}var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}var b=c.parentNode;
if(this.get("isPaneAttached")&&(a.parentNode===b)){return this}b.insertBefore(a,c);
b=c=a=null;return this.paneDidAttach()},after:function(c){var a=this.get("layer");
if(!a){a=this.createLayer().get("layer")}var b=c.parentNode;if(this.get("isPaneAttached")&&(a.parentNode===b)){return this
}b.insertBefore(a,c.nextSibling);b=c=a=null;return this.paneDidAttach()},removeFromParent:function(){},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);
a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);
this.parentViewDidChange();this._notifyDidAppendToDocument();this._addIntercept();
return this},isPaneAttached:NO,hasTouchIntercept:NO,zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")&&SC.platform.touch){this.set("usingTouchIntercept",YES);
var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";
a.top="0px";a.right="0px";a.bottom="0px";a.webkitTransform="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");
b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;
document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);
this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"
}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"
}},recomputeIsVisibleInWindow:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}var c=this.get("isVisibleInWindow"),f=this.get("isVisible")&&this.get("isPaneAttached");
if(c!==f){this.set("isVisibleInWindow",f);var e=this.get("childViews"),b=e.length,a;
for(a=0;a<b;a++){e[a].recomputeIsVisibleInWindow(f)}if(f){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)
}}else{if(this.get("isKeyPane")){this.resignKeyPane()}}}this.updateLayerIfNeeded(YES);
return this},updateLayerLocation:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}return this},init:function(){var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);
if(a){this.paneDidAttach()}},classNames:"sc-pane".w()});sc_require("mixins/responder_context");
SC.Application=SC.Responder.extend(SC.ResponderContext,{});sc_require("core");SC.Benchmark={verbose:NO,enabled:YES,stats:{},globalStartTime:null,start:function(b,a,f,e){if(!this.enabled){return
}var g=(f||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(e&&c._starts.length>0){c._starts.push("ignore")
}else{c._starts.push(g)}c._times.push({start:g,_subStats:{}});return b},end:function(c,b,g){var f;
if(!this.enabled){return}if(b){f=this._subStatFor(c,b)}else{f=this._statFor(c)}var h=f._starts.pop();
if(!h){console.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));
return}if(h=="ignore"){return}var a=(g||Date.now());var e=a-h;f._times[f._times.length-1].end=a;
f._times[f._times.length-1].dur=e;f.amt+=e;f.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a
},bench:function(f,e,a){if(!e){e="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;
while(--a>=0){var c=SC.Benchmark.start(e);b=f();SC.Benchmark.end(c)}return b},install:function(a,e,b){a["b__"+e]=a[e];
var c=a["b__"+e];a[e]=function(){var g="%@(%@)".fmt(e,$A(arguments).join(", "));SC.Benchmark.start(g,b);
var f=c.apply(this,arguments);SC.Benchmark.end(g);return f}},restore:function(a,b){a[b]=a["b__"+b]
},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue
}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;
var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];
var e=this._compileChartData(true);for(var c=0;c<e.length;c++){if(e[c][4]){b.push(this._timelineGenSubReport(e[c]))
}else{b.push(this._timelineGenReport(e[c]))}}return b.join("\n")},timelineChart:function(u){var p=0;
this.hideChart();var n=this._compileChartData(false);var k=n.length;if(k===0){return
}var b=this.globalStartTime?this.globalStartTime:n[0][1];var e=n[k-1][2]-b;var o=50+k*30;
var q=Math.ceil(e/200)+1;var t=q*50;var c=document.createElement("div");c.className="sc-benchmark-graph";
document.body.appendChild(c);var v=document.createElement("div");v.innerHTML=((u)?u:"SproutCore Application")+(" - Total Captured Time: "+e+" ms - Points Captured: "+k)+' [<a href="javascript:SC.Benchmark.hideChart();">Hide Chart</a>]';
v.className="sc-benchmark-title";c.appendChild(v);var g=document.createElement("div");
g.className="sc-benchmark-top";g.style.width=t+"px";c.appendChild(g);for(p=0;p<q;
p++){var s=document.createElement("div");s.className="sc-benchmark-tick";s.style.left=(p*50)+"px";
s.style.height=o+"px";var f=document.createElement("div");f.className="sc-benchmark-tick-label";
f.style.left=(p*50)+"px";f.innerHTML=p*200+" ms";c.appendChild(s);c.appendChild(f)
}for(p=0;p<k;p++){var l=document.createElement("div");l.style.top=(75+(p*30))+"px";
l.style.width=t+"px";l.className=(p%2===0)?"sc-benchmark-row even":"sc-benchmark-row";
c.appendChild(l);var m=document.createElement("div");var j=n[p][1];var h=n[p][2];
var a=n[p][3];m.innerHTML="&nbsp;"+(n[p][0]+" <span class='sc-benchmark-emphasis'>"+a+"ms</span>");
m.className="sc-benchmark-bar";m.style.cssText="left:"+(((j-b)/4))+"px; width: "+((a/4))+"px; top: "+(53+(p*30))+"px;";
m.title="start: "+(j-b)+" ms, end: "+(h-b)+" ms, duration: "+a+" ms";c.appendChild(m)
}this._graph=c},hideChart:function(){if(this._graph){try{document.body.removeChild(this._graph)
}catch(a){}}},log:function(e){var c=this.report(e).split("\n"),b=c.length,a;for(a=0;
a<b;a++){console.log(c[a])}},startProfile:function(a){if(!this.enabled){return}if(console&&console.profile){console.profile(a)
}},endProfile:function(a){if(!this.enabled){return}if(console&&console.profileEnd){console.profileEnd(a)
}},_compileChartData:function(h){var m=[],a;for(var n in this.stats){var f=this.stats[n];
for(var g=0;g<f._times.length;g++){var o=f._times[g];a=(f._times.length>1)?(g+1)+" - "+n:n;
m.push([a,o.start,o.end,o.dur,false]);if(h){var b=o._subStats;for(var c in b){var l=b[c];
for(var e=0;e<l._times.length;e++){var p=l._times[e];a=(l._times.length>1)?(e+1)+" - "+c:c;
m.push([a,p.start,p.end,p.dur,true])}}}}}m.sort(function(j,i){if(j[1]<i[1]){return -1
}else{if(j[1]==i[1]){if(j[3]&&!i[3]){return -1}if(!j[3]&&i[3]){return 1}return 0}}return 1
});return m},_genReport:function(a){var b=this._statFor(a);var c=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;
return"BENCH %@ msec: %@ (%@x)".fmt(c,(b.name||a),b.runs)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])
}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])
}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(e,c){var f=this.stats[c]._times.length;
if(f===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;
var b=a[e];if(!b){a[e]={runs:0,amt:0,name:e,_starts:[],_times:[]};b=a[e]}return b
},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};
a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)
},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.mixin({logBundleLoading:NO,bundleIsLoaded:function(a){var b=SC.BUNDLE_INFO[a];
return b?!!b.loaded:NO},_scb_bundleDidLoad:function(b,j,a,k){var f=a,o=j;if(SC.typeOf(j)===SC.T_STRING){o=SC.objectForPropertyPath(j)
}if(SC.typeOf(a)===SC.T_STRING){f=SC.objectForPropertyPath(a,o)}if(!f){if(SC.LAZY_INSTANTIATION[b]){var n=SC.LAZY_INSTANTIATION[b];
if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' is marked for lazy instantiation, instantiating it now…".fmt(b))
}for(var g=0,c=n.length;g<c;g++){try{n[g]()}catch(h){console.error("SC.loadBundle(): Failted to lazily instatiate entry for  '%@'".fmt(b))
}}delete SC.LAZY_INSTANTIATION[b];if(SC.typeOf(j)===SC.T_STRING){o=SC.objectForPropertyPath(j)
}if(SC.typeOf(a)===SC.T_STRING){f=SC.objectForPropertyPath(a,o)}if(!a){throw"SC.loadBundle(): could not find callback for lazily instantiated bundle '%@'".fmt(b)
}}else{throw"SC.loadBundle(): could not find callback for '%@'".fmt(b)}}if(!k){k=[]
}k.push(b);var l=!!SC.RunLoop.currentRunLoop;if(l){SC.run(function(){f.apply(o,k)
})}else{f.apply(o,k)}},tryToLoadBundle:function(e,f,g,b){var a,c;if(SC.typeOf(f)===SC.T_STRING){c=SC.objectForPropertyPath(f)
}if(SC.typeOf(g)===SC.T_STRING){a=SC.objectForPropertyPath(g,c)}if(a||SC.LAZY_INSTANTIATION[e]){if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' found through other means, will attempt to load…".fmt(e))
}SC.BUNDLE_INFO[e]={loaded:YES};return SC.BUNDLE_INFO[e]}return NO},loadBundle:function(v,z,e){var t,w;
if(e===undefined&&SC.typeOf(z)===SC.T_FUNCTION){e=z;z=null}var o=SC.BUNDLE_INFO[v],y,x,c=SC.A(arguments).slice(3),k=SC.logBundleLoading;
if(k){console.log("SC.loadBundle(): Attempting to load '%@'".fmt(v))}if(!o){if(k){console.log("SC.loadBundle(): Attemping to load %@ without SC.BUNDLE_INFO entry… could be loaded through other means.".fmt(v))
}o=this.tryToLoadBundle(v,z,e,c)}if(!o){throw"SC.loadBundle(): could not find bundle '%@'".fmt(v)
}else{if(o.loaded){if(k){console.log("SC.loadBundle(): Bundle '%@' already loaded, skipping.".fmt(v))
}if(e){if(SC.isReady){SC._scb_bundleDidLoad(v,z,e,c)}else{SC.ready(SC,function(){SC._scb_bundleDidLoad(v,z,e,c)
})}}}else{if(k){console.log("SC.loadBundle(): Bundle '%@' is not loaded, loading now.".fmt(v))
}y=o.callbacks||[];if(e){y.push(function(){SC._scb_bundleDidLoad(v,z,e,c)});o.callbacks=y
}if(!o.loading){var b=o.requires||[];var h=YES;for(t=0,w=b.length;t<w;++t){var p=b[t];
var l=SC.BUNDLE_INFO[p];if(!l){throw"SC.loadBundle(): could not find required bundle '%@' for bundle '%@'".fmt(p,v)
}else{if(l.loading){h=NO;break}else{if(l.loaded){continue}else{h=NO;var s=l.dependents;
if(!s){l.dependents=s=[]}s.push(v);if(k){console.log("SC.loadBundle(): '%@' depends on '%@', loading dependency…".fmt(v,p))
}SC.loadBundle(p);break}}}}if(h){var m,f,g,a,i,n;i=document.getElementsByTagName("head")[0];
if(!i){i=document.documentElement}m=o.styles||[];for(t=0,w=m.length;t<w;++t){g=m[t];
if(g.length>0){a=document.createElement("link");a.setAttribute("href",g);a.setAttribute("rel","stylesheet");
a.setAttribute("type","text/css");i.appendChild(a)}}var j=this._jsBundleLoadQueue;
if(!j){this._jsBundleLoadQueue=j={}}j[v]=[];var u=j[v];f=o.scripts||[];for(t=0,w=f.length;
t<w;++t){g=f[t];if(g.length>0){u.push(g)}}o.loading=YES;this.scriptDidLoad(v)}}}}},scriptDidLoad:function(c){var a=this._jsBundleLoadQueue;
if(a){var f=a[c];if(f){var b=f.shift();if(SC.logBundleLoading){console.log("SC.scriptDidLoad(): Loading next file in '%@' -> '%@'".fmt(c,b))
}var e=document.createElement("script");e.setAttribute("type","text/javascript");
e.setAttribute("src",b);document.body.appendChild(e)}}},bundleDidLoad:function(e){var h=SC.BUNDLE_INFO[e],f=SC.logBundleLoading,g,c;
if(!h){h=SC.BUNDLE_INFO[e]={loaded:YES};return}if(h.loaded&&f){console.log("SC.bundleDidLoad() called more than once for bundle '%@'. Skipping.".fmt(e));
return}delete h.loading;h.loaded=YES;if(SC.isReady){SC._invokeCallbacksForBundle(e)
}else{SC.ready(SC,function(){SC._invokeCallbacksForBundle(e)})}var i=h.dependents||[];
for(var b=0,a=i.length;b<a;++b){if(f){console.log("SC.loadBundle(): Bundle '%@' has completed loading, loading '%@' that depended on it.".fmt(e,i[b]))
}SC.loadBundle(i[b])}},_invokeCallbacksForBundle:function(c){var f=SC.BUNDLE_INFO[c],e;
if(!f){return}if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' has completed loading, invoking callbacks.".fmt(c))
}e=f.callbacks||[];SC.RunLoop.begin();for(var b=0,a=e.length;b<a;++b){e[b]()}SC.RunLoop.end()
}});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");
SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");
SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");
SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR
}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,f){if(f===undefined){f=c
}var e=this.scan(f);var b=new RegExp("^\\d{"+c+","+f+"}");var a=e.match(b);if(!a){throw SC.SCANNER_INT_ERROR
}if(a[0].length<f){this.scanLocation+=a[0].length-f}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR
}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b
}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;
b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;
return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()
},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)
},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)
},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)
},toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone
},isEqual:function(a){return SC.DateTime.compare(this,a)===0},copy:function(){return this
},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})
}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:"_SC.DateTime.dayNames".loc().w(),_englishDayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".w(),abbreviatedDayNames:"_SC.DateTime.abbreviatedDayNames".loc().w(),monthNames:"_SC.DateTime.monthNames".loc().w(),abbreviatedMonthNames:"_SC.DateTime.abbreviatedMonthNames".loc().w(),_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};
if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var e=(b!==undefined)?b:this._tz;
var a=this._toMilliseconds(c,this._ms,e);return this._setCalcState(a,e)},_get:function(w,b,n){var l,t,h,o,e,j,k,f,p,a;
var c,i;var s=this._date;var q,g=null;q=this._setCalcState(b,n);if(w==="milliseconds"){g=s.getTime()
}else{if(w==="timezone"){g=this._tz}}if(g===null){p=w.slice(0,4);a=w.slice(4);if(p==="last"||p==="next"){c=this._get("dayOfWeek",b,n);
i=this._englishDayNames.indexOf(a);if(i>=0){var u=i-c;if(p==="last"&&u>=0){u-=7}if(p==="next"&&u<0){u+=7
}this._advance({day:u},b,n);g=this._createFromCurrentState()}}}if(g===null){if(n!==undefined){this._setCalcState(s.getTime()-(n*60000),0)
}switch(w){case"year":g=s.getUTCFullYear();break;case"month":g=s.getUTCMonth()+1;
break;case"day":g=s.getUTCDate();break;case"dayOfWeek":g=s.getUTCDay();break;case"hour":g=s.getUTCHours();
break;case"minute":g=s.getUTCMinutes();break;case"second":g=s.getUTCSeconds();break;
case"millisecond":g=s.getUTCMilliseconds();break}if((g===null)&&(w==="isLeapYear")){e=this._get("year");
g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(w==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;
break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(w==="dayOfYear")){l=s.getTime();
h=this._get("day");this._setCalcStateFromHash({day:1});for(o=this._get("month")-1;
o>0;o--){this._setCalcStateFromHash({month:o});h+=this._get("daysInMonth")}s.setTime(l);
g=h}if((g===null)&&(w.slice(0,4)==="week")){j=w.length===4?1:parseInt(w.slice("4"),10);
k=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(j===0){g=parseInt((f-k+7)/7,10)
}else{g=parseInt((f-(k-1+7)%7+7)/7,10)}}}this._setCalcState(q.milliseconds,q.timezone);
return g},_adjust:function(c,g,f,a){var e=c?SC.clone(c):{};var b=this._toMilliseconds(c,g,f,a);
this._setCalcState(b,f);return this},_advance:function(a,g,e){var c=a?SC.clone(a):{};
var f;for(var b in c){c[b]+=this._get(b,g,e)}f=(c.timezone!==undefined)?c.timezone:e;
return this._adjust(c,g,f,NO)},_toMilliseconds:function(j,c,h,f){var a=j?SC.clone(j):{};
var i=this._date;var g=i.getTime();var b,e;if(!SC.none(c)){i.setTime(c)}e=(h!==undefined)?h:(this.timezone!==undefined)?this.timezone:0;
i.setTime(i.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0
}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0
}}if(SC.none(a.year)){a.year=i.getUTCFullYear()}if(SC.none(a.month)){a.month=i.getUTCMonth()+1
}if(SC.none(a.day)){a.day=i.getUTCDate()}if(SC.none(a.hour)){a.hour=i.getUTCHours()
}if(SC.none(a.minute)){a.minute=i.getUTCMinutes()}if(SC.none(a.second)){a.second=i.getUTCSeconds()
}if(SC.none(a.millisecond)){a.millisecond=i.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);
i.setTime(b+(e*60000));b=i.getTime();i.setTime(g);return b},create:function(){var j=arguments.length===0?{}:arguments[0];
var e;if(SC.typeOf(j)===SC.T_NUMBER){j={milliseconds:j}}e=(j.timezone!==undefined)?j.timezone:this.timezone;
if(e===undefined){e=0}if(!SC.none(j.milliseconds)){var i="nu"+j.milliseconds+e,a=this._dt_cache;
var f=a[i];if(!f){var g,h=this._dt_cache_index,b=this;f=a[i]=new b([{_ms:j.milliseconds,timezone:e}]);
h=this._dt_cache_index=(h+1)%this._DT_CACHE_MAX_LENGTH;g=a[h];if(g!==undefined&&a[g]){delete a[g]
}a[h]=i}return f}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(j,c.getTime(),e,j.resetCascadingly),timezone:e})
}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})
},parse:function(o,c){var p=new RegExp("(?:%([aAbBcdHIjmMpSUWwxXyYZ%])|(.))","g");
var n,j,a={},b={},i=SC.Scanner.create({string:o});if(SC.none(c)){c=SC.DATETIME_ISO8601
}try{while((j=p.exec(c))!==null){switch(j[1]){case"a":b.dayOfWeek=i.scanArray(this.abbreviatedDayNames);
break;case"A":b.dayOfWeek=i.scanArray(this.dayNames);break;case"b":a.month=i.scanArray(this.abbreviatedMonthNames)+1;
break;case"B":a.month=i.scanArray(this.monthNames)+1;break;case"c":throw"%c is not implemented";
case"d":a.day=i.scanInt(1,2);break;case"H":a.hour=i.scanInt(1,2);break;case"I":a.hour=i.scanInt(1,2);
break;case"j":throw"%j is not implemented";case"m":a.month=i.scanInt(1,2);break;case"M":a.minute=i.scanInt(1,2);
break;case"p":a.meridian=i.scanArray(["AM","PM"]);break;case"S":a.second=i.scanInt(1,2);
break;case"U":throw"%U is not implemented";case"W":throw"%W is not implemented";case"w":throw"%w is not implemented";
case"x":throw"%x is not implemented";case"X":throw"%X is not implemented";case"y":a.year=i.scanInt(2);
a.year+=(a.year>70?1900:2000);break;case"Y":a.year=i.scanInt(4);break;case"Z":var g=i.scan(1);
if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var k=i.scanInt(2);if(i.scan(1)!==":"){i.scan(-1)
}var f=i.scanInt(2);a.timezone=(g==="+"?-1:1)*(k*60+f)}}break;case"%":i.skipString("%");
break;default:i.skipString(j[0]);break}}}catch(l){console.log("SC.DateTime.createFromString "+l.toString());
return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if(a.meridian===1){a.hour=(a.hour+12)%24
}delete a.meridian}n=SC.DateTime.create(a);if(!SC.none(b.dayOfWeek)&&n.get("dayOfWeek")!==b.dayOfWeek){return null
}return n},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c
}return c},__toFormattedString:function(b,f,c){var a,e;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];
case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];
case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();
case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"h":return this._get("hour");
case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;
case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);
case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));
case"p":return this._get("hour")>11?"PM":"AM";case"S":return this._pad(this._get("second"));
case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));
case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");
case"x":return this._date.toDateString();case"X":return this._date.toTimeString();
case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");
case"Z":e=-1*c;return(e>=0?"+":"-")+this._pad(parseInt(Math.abs(e)/60,10))+":"+this._pad(Math.abs(e)%60);
case"%":return"%"}},_toFormattedString:function(c,f,b){var a=this;var e=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;
this._setCalcState(f-(b*60000),0);return c.replace(/\%([aAbBcdDHiIjmMpSUWwxXyYZ\%])/g,function(){var g=a.__toFormattedString.call(a,arguments,f,b);
return g})},compare:function(e,c){var g=e.get("milliseconds");var f=c.get("milliseconds");
return g<f?-1:g===f?0:1},compareDate:function(e,c){if(e.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR
}var g=e.adjust({hour:0}).get("milliseconds");var f=c.adjust({hour:0}).get("milliseconds");
return g<f?-1:g===f?0:1}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null
})};if(SC.RecordAttribute&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c
}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b
}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})
}SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({_isReadyBound:NO,_bindReady:function(){if(this._isReadyBound){return
}this._isReadyBound=YES;if(document.addEventListener&&!SC.browser.opera){document.addEventListener("DOMContentLoaded",SC._didBecomeReady,NO)
}if(SC.browser.msie&&(window===top)){(function(){if(SC.isReady){return}try{document.documentElement.doScroll("left")
}catch(a){setTimeout(arguments.callee,0);return}SC._didBecomeReady()})()}if(SC.browser.opera){document.addEventListener("DOMContentLoaded",function(){if(SC.isReady){return
}for(var a=0;a<document.styleSheets.length;a++){if(document.styleSheets[a].disabled){setTimeout(arguments.callee,0);
return}}SC._didBecomeReady()},NO)}if(SC.browser.safari&&SC.browser.safari<530){console.error("ready() is not yet supported on Safari 3.1 and earlier")
}SC.Event.add(window,"load",SC._didBecomeReady)},_readyQueue:[],_afterReadyQueue:[],isReady:NO,_didBecomeReady:function(){if(SC.isReady){return
}if(typeof SC.mapDisplayNames===SC.T_FUNCTION){SC.mapDisplayNames()}if(typeof SC.addInvokeOnceLastDebuggingInfo===SC.T_FUNCTION){SC.addInvokeOnceLastDebuggingInfo()
}SC.Locale.createCurrentLocale();if(document&&document.getElementsByTagName){var a=document.getElementsByTagName("body")[0];
if(a){var b=a.className;var c=SC.Locale.currentLanguage.toLowerCase();a.className=(b&&b.length>0)?[b,c].join(" "):c
}}SC.Benchmark.start("ready");SC.run(function(){var h,g,f,e;do{g=SC._readyQueue;SC._readyQueue=[];
for(f=0,e=g.length;f<e;f++){h=g[f];var i=h[0]||document;var j=h[1];if(j){j.call(i)
}}}while(SC._readyQueue.length>0);SC.isReady=YES;SC._readyQueue=null;SC.Event.trigger(document,"ready",null,NO);
if(SC.removeLoading){SC.$("#loading").remove()}if(SC.userDefaults.get("ready")){if((SC.mode===SC.APP_MODE)&&(typeof main!="undefined")&&(main instanceof Function)&&!SC.suppressMain){main()
}}else{SC.userDefaults.readyCallback(window,main)}},this);SC.Benchmark.end("ready");
if(SC.BENCHMARK_LOG_READY){SC.Benchmark.log()}},ready:function(b,c){var a=this._readyQueue;
if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!c){return this
}if(this.isReady){return c.call(b||document)}a.push([b,c]);return this}});SC._bindReady();
SC.removeLoading=YES;SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;
require("system/ready");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);
this.panes=SC.Set.create()},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");
if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)
}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();
return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this
}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this
},keyPane:null,previousKeyPanes:[],makeKeyPane:function(g){var f,a,e;if(g){if(!g.get("acceptsKeyPane")){return this
}else{a=this.get("keyPane");if(a===g){return this}else{if(a){e=this.get("previousKeyPanes");
e.push(a)}f=g}}}else{a=this.get("keyPane");e=this.get("previousKeyPanes");f=null;
while(e.length>0){var c=e.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){f=c;
break}}}if(!f){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){f=b}}if(a){a.willLoseKeyPaneTo(f)
}if(f){f.willBecomeKeyPaneFrom(a)}this.set("keyPane",f);if(f){f.didBecomeKeyPaneFrom(a)
}if(a){a.didLoseKeyPaneTo(f)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;
if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;
this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}
}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}
}}}return c},resize:function(){this._resize();return YES},_resize:function(){var b=this.computeWindowSize(),c=this.get("currentWindowSize");
this.set("currentWindowSize",b);if(!SC.rectsEqual(b,c)){if(SC.platform.touch){var a=SC.$(document.body);
if(b.height>=b.width){SC.device.set("orientation","portrait")}else{SC.device.set("orientation","landscape")
}}if(this.panes){SC.run(function(){this.panes.invoke("windowSizeDidChange",c,b)},this)
}}},hasFocus:NO,focus:function(){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");
SC.run(function(){this.set("hasFocus",YES)},this)}return YES},focusin:function(){this.focus()
},focusout:function(){this.blur()},blur:function(){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");
SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;
this._drag=a},defaultResponder:null,sendAction:function(c,e,b,f,a){e=this.targetForAction(c,e,b,f);
if(e&&e.isResponderContext){return !!e.sendAction(c,b,a)}else{return e&&e.tryToPerform(c,b)
}},_responderFor:function(c,a){var b=c?c.get("defaultResponder"):null;if(c){c=c.get("firstResponder")||c;
do{if(c.respondsTo(a)){return c}}while((c=c.get("nextResponder")))}if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b)
}if(!b){return null}else{if(b.isResponderContext){return b}else{if(b.respondsTo(a)){return b
}else{return null}}}},targetForAction:function(b,f,e,g){if(!b||(SC.typeOf(b)!==SC.T_STRING)){return null
}if(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)||SC.objectForPropertyPath(f,e)
}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(b)){f=null}else{if(SC.typeOf(f[b])!==SC.T_FUNCTION){f=null
}}}return f}if(g){return this._responderFor(g,b)}var a=this.get("keyPane"),c=this.get("mainPane");
if(a&&(a!==g)){f=this._responderFor(a,b)}if(!f&&c&&(c!==a)){f=this._responderFor(c,b)
}if(!f&&(f=this.get("defaultResponder"))){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f);
if(f){this.set("defaultResponder",f)}}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(b)){f=null
}else{if(SC.typeOf(f[b])!==SC.T_FUNCTION){f=null}}}}return f},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null
},sendEvent:function(c,a,e){var f,b;SC.run(function(){if(e){f=e.get("pane")}else{f=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")
}b=(f)?f.sendEvent(c,a,e):null},this);return b},listenFor:function(c,b,a){a=a?a:this;
c.forEach(function(e){var f=a[e];if(f){SC.Event.add(b,e,a,f)}},this);b=null;return a
},setup:function(){this.listenFor("touchstart touchmove touchend touchcancel".w(),document);
this.listenFor("keydown keyup beforedeactivate mousedown mouseup click dblclick mousemove selectstart contextmenu".w(),document).listenFor("resize".w(),window);
if(SC.browser.msie){this.listenFor("focusin focusout".w(),document)}else{this.listenFor("focus blur".w(),window)
}this.listenFor("webkitAnimationStart webkitAnimationIteration webkitAnimationEnd".w(),document);
if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.mozilla){var e=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);
return e.keypress.call(e,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)
}}"drag selectstart".w().forEach(function(i){var j=this[i];if(j){if(SC.browser.msie){var f=this;
document.body["on"+i]=function(k){return j.call(f,SC.Event.normalizeEvent(event||window.event))
};SC.Event.add(window,"unload",this,function(){document.body["on"+i]=null})}else{SC.Event.add(document,i,this,j)
}}},this);var b=SC.browser.mozilla?"DOMMouseScroll":"mousewheel";SC.Event.add(document,b,this,this.mousewheel);
if(SC.browser&&SC.platform&&SC.browser.mobileSafari&&!SC.platform.touch){SC.platform.simulateTouchEvents()
}this.set("currentWindowSize",this.computeWindowSize());this.focus();if(SC.browser.mobileSafari){var g=SC.RunLoop.prototype.endRunLoop,h;
h=function(){if(g){g.apply(this,arguments)}var l=SC.RootResponder.responder._touches,k,f,m,i,o,p=NO;
if(l){for(k in l){if(l[k]._rescuedElement){continue}m=f=l[k].target;while(f&&(f=f.parentNode)&&!p){p=(f===document.body)
}if(!p&&m){if(m.parentNode&&m.cloneNode){var n=m.cloneNode(true);m.parentNode.replaceChild(n,m);
m.swapNode=n}var j=SC.touchHoldingPen;if(!j){j=SC.touchHoldingPen=document.createElement("div");
j.style.display="none";document.body.appendChild(j)}j.appendChild(m);l[k]._rescuedElement=m
}}}};SC.RunLoop.prototype.endRunLoop=h}if(SC.platform.touch){var c=this.computeWindowSize(),a=SC.$(document.body);
if(c.height>=c.width){SC.device.set("orientation","portrait")}else{SC.device.set("orientation","landscape")
}}},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches
}},averagedTouchesForView:function(g,f){var k=this.touchesForView(g);if((!k||k.length===0)&&!f){return{x:0,y:0,d:0,touchCount:0}
}var c;if(k){c=k.toArray()}else{c=[]}if(f){c.push(f)}var h,e=c.length,b,a=0,m=0,l,j,i=0;
for(h=0;h<e;h++){b=c[h];a+=b.pageX;m+=b.pageY}a/=e;m/=e;for(h=0;h<e;h++){b=c[h];l=Math.abs(b.pageX-a);
j=Math.abs(b.pageY-m);i+=Math.pow(l*l+j*j,0.5)}i/=e;return{x:a,y:m,d:i,touchCount:e}
},assignTouch:function(b,a){if(b.hasEnded){throw"Attemt to assign a touch that is already finished."
}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};
a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++
},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];
b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;
delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},makeTouchResponder:function(g,f,c,l){var i=g.touchResponders,b;
if(g.touchResponder===f){return}var a;if(f){a=f.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")
}if(i.indexOf(f)<0){if(l){try{f=(a)?a.sendEvent("touchStart",g,f):null}catch(h){SC.Logger.error("Error in touchStart: "+h);
f=null}}else{if((f.get?f.get("acceptsMultitouch"):f.acceptsMultitouch)||!f.hasTouch){if(!f.touchStart(g)){f=null
}}else{}}}if(!c||(i.indexOf(f)>-1&&i[i.length-1]!==f)){this.unassignTouch(g);var j=i.length-1,k=i[j];
while(k&&k!==f){b=this.touchesForView(k);if((k.get?k.get("acceptsMultitouch"):k.acceptsMultitouch)||!b){if(k.touchCancelled){k.touchCancelled(g)
}}j--;k=i[j];i.pop();g.touchResponder=i[j];g.nextTouchResponder=i[j-1]}}if(f){this.assignTouch(g,f);
if(f!==g.touchResponder){i.push(f);g.touchResponder=f;g.nextTouchResponder=i[i.length-2]
}}},captureTouch:function(i,f,h){if(!f){f=this}var g=i.targetView,c=g,e=[],b,a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Received one touch on %@".fmt(g.toString()))
}while(c&&(c!==f)){e.unshift(c);c=c.get("nextResponder")}for(a=e.length,b=0;b<a;b++){c=e[b];
if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Checking %@ for captureTouch response…".fmt(c.toString()))
}if(c.tryToPerform("captureTouch",i)){if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Making %@ touch responder because it returns YES to captureTouch".fmt(c.toString()))
}this.makeTouchResponder(i,c,h,YES);return}}if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Didn't find a view that returned YES to captureTouch, so we're calling touchStart")
}this.makeTouchResponder(i,g,h,YES)},endMissingTouches:function(f){var b,a=f.length,e={},c=[];
for(b=0;b<a;b++){e[f[b].identifier]=YES}for(b in this._touches){var g=this._touches[b].identifier;
if(!e[g]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){this.endTouch(c[b]);
this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,i,c){if(!i){i="touchEnd"
}var a,h,f,g;this.unassignTouch(b);if(b.touchResponder){g=b.touchResponder;h=b.touchResponders;
a=h.length-1;f=h[a];while(f){try{if(f[i]){f[i](b,c)}}catch(j){console.error("crashed on endTouch")
}if(b.touchResponder!==g){break}a--;f=h[a];i="touchCancelled"}}},finishTouch:function(b){var a;
this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)
}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;
a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;
b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]
}},touchstart:function(a){var b=NO;SC.run(function(){this.endMissingTouches(a.touches);
var f,i=a.changedTouches,e=i.length,h,g,j,c;a.touchContext=this;for(f=0;f<e;f++){j=i[f];
c=SC.Touch.create(j,this);if(!c.targetView){continue}if(c.hidesTouchIntercept){b=YES
}c.timeStamp=a.timeStamp;this._touches[j.identifier]=c;c.event=a;this.captureTouch(c,this);
c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){SC.run(function(){var c=a.changedTouches,b,o,m,g=c.length,l,k,j,n,h={},f,i,e=NO;
if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)
}for(m=0;m<g;m++){b=c[m];o=this._touches[b.identifier];if(!o){continue}if(o.hidesTouchIntercept){e=YES
}o.pageX=b.pageX;o.pageY=b.pageY;o.timeStamp=a.timeStamp;o.event=a;if(o.touchResponder){l=o.touchResponder;
i=SC.guidFor(l);if(!h[i]){h[i]={view:l,touches:[]}}h[i].touches.push(o)}}if(e){a.allowDefault();
return YES}for(m in h){l=h[m].view;k=h[m].touches;a.viewChangedTouches=k;j=this.touchesForView(l);
n=j.firstObject();a.pageX=n.pageX;a.pageY=n.pageY;a.touchContext=this;l.tryToPerform("touchesDragged",a,j)
}c=a.changedTouches;g=c.length;for(m=0;m<g;m++){b=c[m];o=this._touches[b.identifier];
o.event=null}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;
SC.run(function(){var i=a.changedTouches,h,o,m,j=i.length,k,c,g=a.isCancel?"touchCancelled":"touchEnd",l,n,e,f;
for(m=0;m<j;m++){h=i[m];h.type="touchend";o=this._touches[h.identifier];if(!o){continue
}o.timeStamp=a.timeStamp;o.pageX=h.pageX;o.pageY=h.pageY;o.type="touchend";o.event=a;
if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("-- Received touch end")}if(o.hidesTouchIntercept){o.unhideTouchIntercept();
b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",h);this._drag=null}this.endTouch(o,g,a);
this.finishTouch(o)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;
this.touchend(a)},attemptKeyEquivalent:function(b){var e=null;var c=b.commandCodes()[0];
if(!c){return NO}var g=this.get("menuPane"),a=this.get("keyPane"),f=this.get("mainPane");
if(g){e=g.performKeyEquivalent(c,b);if(e){return e}}if(a){e=a.performKeyEquivalent(c,b);
if(e||a.get("isModal")){return e}}if(!e&&f&&(f!==a)){e=f.performKeyEquivalent(c,b);
if(e||f.get("isModal")){return e}}return e},_lastModifiers:null,_handleModifierChanges:function(b){var a;
a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;
if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;
c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES
},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||((a.charCode!==a.which)&&SC.FUNCTION_KEYS[a.which]))
},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},keydown:function(a){if(SC.none(a)){return YES
}var f=a.keyCode;if(f===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)
}if(f===27&&this._drag){this._drag.cancelDrag();this._drag=null;this._mouseDownView=null;
return YES}if(SC.browser.mozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),e=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(e===document.body);
if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(f>=37&&f<=40&&SC.browser.mozilla){return YES
}b=this.sendEvent("keyDown",a);if(!b){b=!this.attemptKeyEquivalent(a)}else{b=a.hasCustomEventHandling;
if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,f=b.keyCode,g=!!SC.browser.mozilla;
if(g&&(b.which===8)){b.which=f;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES
}else{var e=(f>=37&&f<=40&&g),a=b.charCode;if((a!==undefined&&a===0)&&!e){return YES
}if(e){b.which=f}return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}},keyup:function(a){if(this._ffevt){this._ffevt=null
}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;
this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES
},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];
if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(f){if(SC.platform.touch){f.allowDefault();
return YES}if(!SC.browser.msie){window.focus()}this._clickCount+=1;if(!this._lastMouseUpAt||((Date.now()-this._lastMouseUpAt)>200)){this._clickCount=1
}else{var e=this._lastMouseDownX-f.clientX,a=this._lastMouseDownY-f.clientY,g=Math.sqrt(e*e+a*a);
if(g>8){this._clickCount=1}}f.clickCount=this._clickCount;this._lastMouseDownX=f.clientX;
this._lastMouseDownY=f.clientY;var c,b=this.targetViewForEvent(f);if(b){c=b.getPath("pane.firstResponder")
}if(c&&c.kindOf(SC.InlineTextFieldView)&&c!==b){c.resignFirstResponder()}b=this._mouseDownView=this.sendEvent("mouseDown",f,b);
if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}return b?f.hasCustomEventHandling:YES
},mouseup:function(b){if(SC.platform.touch){b.allowDefault();return YES}this.targetViewForEvent(b);
if(this._drag){this._drag.tryToPerform("mouseUp",b);this._drag=null}var e=null,a=this._mouseDownView,c=this.targetViewForEvent(b);
this._lastMouseUpAt=Date.now();b.clickCount=this._clickCount;if(a){e=this.sendEvent("mouseUp",b,a);
if(!e&&(this._clickCount===2)){e=this.sendEvent("doubleClick",b,a)}if(!e){e=this.sendEvent("click",b,a)
}}if(!e){if(this._clickCount===2){e=this.sendEvent("doubleClick",b,c)}if(!e){e=this.sendEvent("click",b,c)
}}this._mouseCanDrag=NO;this._mouseDownView=null;return(e)?b.hasCustomEventHandling:YES
},dblclick:function(a){if(SC.browser.isIE){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);
return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.platform.touch){a.allowDefault();
return YES}if(SC.browser.msie){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return
}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){if(this._drag){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){this._drag.tryToPerform("mouseDragged",a)
}}else{this._drag.tryToPerform("mouseDragged",a)}}else{var e=this._lastHovered||[],f=[],h,g,b,c=this.targetViewForEvent(a);
while(c&&(c!==this)){f.push(c);c=c.get("nextResponder")}for(g=0,b=e.length;g<b;g++){c=e[g];
h=c.respondsTo("mouseExited");if(h&&f.indexOf(c)===-1){c.tryToPerform("mouseExited",a)
}}for(g=0,b=f.length;g<b;g++){c=f[g];if(e.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)
}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=f;if(this._mouseDownView){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)
}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);
if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)
}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b);
return this.sendEvent("contextMenu",b,a)},webkitAnimationStart:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidStart",b,a)}catch(c){console.warn("Exception during animationDidStart: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationIteration:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidIterate",b,a)}catch(c){console.warn("Exception during animationDidIterate: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationEnd:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidEnd",b,a)}catch(c){console.warn("Exception during animationDidEnd: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES}});SC.Touch=function(e,a){this.touchContext=a;
this.identifier=e.identifier;var c=e.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){e.target.style.webkitTransform="translate3d(0px,-5000px,0px)";
c=document.elementFromPoint(e.pageX,e.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;
if(c.tagName==="INPUT"){this.hidesTouchIntercept=e.target}else{e.target.style.webkitTransform="translate3d(0px,0px,0px)"
}}else{b=e.target?SC.$(e.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;
this.type=e.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;
this.touchResponders=[];this.startX=this.pageX=e.pageX;this.startY=this.pageY=e.pageY
};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;
if(a){setTimeout(function(){a.style.webkitTransform="translate3d(0px,0px,0px)"},500)
}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()
}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()
}},end:function(){this.touchContext.endTouch(this)},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)
},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)
},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))
}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;
a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});SC.platform={touch:("createTouch" in document)&&!navigator.userAgent.match("Chrome/9"),bounceOnScroll:(/iPhone|iPad|iPod/).test(navigator.platform),pinchToZoom:(/iPhone|iPad|iPod/).test(navigator.platform),input:function(e){var f={},c=e.length,g=document.createElement("input"),b,a;
for(a=0;a<c;a++){b=e[a];f[b]=!!(b in g)}return f}(("autocomplete readonly list size required multiple maxlength pattern min max step placeholder").w()),standalone:!!navigator.standalone,cssPrefix:null,domCSSPrefix:null,simulateTouchEvents:function(){if(this.touch){SC.Logger.info("Can't simulate touch events in an environment that supports them.");
return}SC.platform.touch=YES;document.body.className=document.body.className+" touch";
this._simtouch_counter=1;this.removeEvents("click dblclick mouseout mouseover mousewheel".w());
this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);
this.replaceEvent("mouseup",this._simtouch_mouseup)},removeEvents:function(e){var b,a=e.length,c;
for(b=0;b<a;b++){c=e[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])
}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);
SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){return NO
}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)
},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");
return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);
this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(a,c){var e,b=this._simtouch_counter;
e={type:c,target:a.target,identifier:b,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY};
a.changedTouches=a.touches=[e];return a},supportsCSSTransitions:NO,supportsCSSTransforms:NO,understandsCSS3DTransforms:NO,supportsCSS3DTransforms:NO,supportsAcceleratedLayers:NO,supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)
}()};(function(){var a=navigator.userAgent.toLowerCase();if((/webkit/).test(a)){SC.platform.cssPrefix="webkit";
SC.platform.domCSSPrefix="Webkit"}else{if((/opera/).test(a)){SC.platform.cssPrefix="opera";
SC.platform.domCSSPrefix="O"}else{if((/msie/).test(a)&&!(/opera/).test(a)){SC.platform.cssPrefix="ms";
SC.platform.domCSSPrefix="ms"}else{if((/mozilla/).test(a)&&!(/(compatible|webkit)/).test(a)){SC.platform.cssPrefix="moz";
SC.platform.domCSSPrefix="Moz"}}}}})();(function(){var e=document.createElement("div");
var f=["-moz-","-moz-","-o-","-ms-","-webkit-"];var a=["moz","Moz","o","ms","webkit"];
var c="",b=null;for(b=0;b<f.length;b++){c+=f[b]+"transition:all 1s linear;";c+=f[b]+"transform: translate(1px, 1px);";
c+=f[b]+"perspective: 500px;"}e.style.cssText=c;for(b=0;b<a.length;b++){if(e.style[a[b]+"TransitionProperty"]!==undefined){SC.platform.supportsCSSTransitions=YES
}if(e.style[a[b]+"Transform"]!==undefined){SC.platform.supportsCSSTransforms=YES}if(e.style[a[b]+"Perspective"]!==undefined||e.style[a[b]+"PerspectiveProperty"]!==undefined){SC.platform.understandsCSS3DTransforms=YES;
SC.platform.supportsCSS3DTransforms=YES}}if(window.media&&window.media.matchMedium){if(!window.media.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO
}}else{if(window.styleMedia&&window.styleMedia.matchMedium){if(!window.styleMedia.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO
}}}if(SC.platform.supportsCSSTransforms&&SC.platform.cssPrefix==="webkit"){SC.platform.supportsAcceleratedLayers=YES
}})();require("system/ready");require("system/root_responder");require("system/platform");
SC.device=SC.Object.create({orientation:"desktop",isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;
if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);
if(SC.platform.touch){this.orientationchange()}if(navigator&&navigator.onLine===false){this.set("isOffline",YES)
}this.panes=SC.Set.create()},setup:function(){var a=SC.RootResponder.responder;a.listenFor("orientationchange".w(),window,this);
a.listenFor("online offline".w(),document,this)},orientationchange:function(a){if(window.orientation===0||window.orientation===180){this.set("orientation","portrait")
}else{this.set("orientation","landscape")}},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");
if(b==="portrait"){a.setClass("portrait",YES);a.setClass("landscape",NO)}if(b==="landscape"){a.setClass("portrait",NO);
a.setClass("landscape",YES)}}.observes("orientation"),online:function(a){this.set("isOffline",NO)
},offline:function(a){this.set("isOffline",YES)}});SC.ready(function(){SC.device.setup()
});SC.ExceptionHandler={handleException:function(a){if(this.isShowingErrorDialog){return
}this._displayErrorDialog(a)},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");
c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";
c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;
a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];
return a.join("")},isShowingErrorDialog:NO};sc_require("system/locale");SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);
SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageCache=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,f,g,e){var b=SC.typeOf(f);
if(SC.none(g)&&SC.typeOf(f)===SC.T_FUNCTION){f=null;g=f}if(SC.typeOf(g)===SC.T_STRING){g=f[g]
}if(SC.none(e)){e=SC.none(f)&&SC.none(g)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(g){g.call(f||c.image,c.url,c.image)
}}else{if(f||g){this._addCallback(c,f,g)}c.retainCount++;this._scheduleImageEntry(c,e)
}},releaseImage:function(a,e,f){var c=this._imageEntryFor(a,NO);if(!c){return this
}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(e||f){var b=SC.typeOf(e);if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;
f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]}this._removeCallback(c,e,f)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);
if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;
if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;
while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()
}}this.set("isLoading",!!c);if(c){var b=c.image;b.onabort=this._imageDidAbort;b.onerror=this._imageDidError;
b.onload=this._imageDidLoad;b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");
this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var e=this._images[c];
if(!e&&a){var b=new Image();e=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};
b.entry=e}return e},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]
},_addCallback:function(c,e,f){var b=c.callbacks;var a=b.find(function(g){return g[0]===e&&g[1]===f
},this);if(!a){b.push([e,f])}b=null;return this},_removeCallback:function(b,c,e){var a=b.callbacks;
a.forEach(function(g,f){if(g[0]===c&&g[1]===e){a[f]=null}},this);a=null;return this
},_scheduleImageEntry:function(e,c){var b=this._backgroundQueue;var f=this._foregroundQueue;
if(e.status===this.IMAGE_LOADED){return this}if((e.status===this.IMAGE_QUEUED)&&!c&&e.isBackground){b[b.indexOf(e)]=null;
e.status=this.IMAGE_WAITING}if(e.status!==this.IMAGE_QUEUED){var a=(c)?b:f;a.push(e);
e.status=this.IMAGE_QUEUED;e.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)
}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this
}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;
if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)
}return this},_imageDidAbort:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.ABORTED)
},this)},_imageDidError:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.ERROR)
},this)},_imageDidLoad:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.LOADED)
},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var e;switch(a){case this.LOADED:e=c.image;
break;case this.ABORTED:e=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:e=SC.IMAGE_FAILED_ERROR;
break;default:e=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(g){var h=g[0],i=g[1];
i.call(h,b,e)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;
var f=c.image;if(f){f.onload=f.onerror=f.onabort=null;if(a!==this.LOADED){c.image=null
}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()
}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);
this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]
},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});
SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)
}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()
}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);
case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;
i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space
}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)
}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")
}}}());SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a
},round:function(e,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();
b=c.substring(0,c.indexOf("1")+1)}e=e.valueOf();return Math.round(e*b)/b}});SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];
if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()
}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;
for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})
}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)
},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];
if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;
SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";
SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach("area base basefront br hr input img link meta".w()),init:function(f,e){var b,a;
if(e){this.prevObject=e;this.strings=e.strings;this.offset=e.length+e.offset}if(!this.strings){this.strings=[]
}if(f===undefined){f="div";a=YES}else{if(f==="div"||f==="label"||f==="a"){a=YES}else{if(SC.typeOf(f)===SC.T_STRING){f=f.toLowerCase();
a=YES}}}if(a){this._tagName=f;this._needsTag=YES;this.needsContent=YES;var g=this;
while(g){g.length++;g=g.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(f)
}else{this._elem=f;this._needsTag=NO;this.length=0;this.needsContent=NO}return this
},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];
return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},push:function(e){var b=this.strings,a=arguments.length;
if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(e)}var f=this;
while(f){f.length+=a;f=f.prevObject}this.needsContent=YES;return this},text:function(c){var b=arguments.length,a=0;
for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this
},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""
},begin:function(a){return SC.RenderContext(a,this)},element:function(){if(this._elem){return this._elem
}var a=SC.RenderContext,b=a.factory,c,e;if(!b){b=a.factory=document.createElement("div")
}b.innerHTML=this.join();if(SC.browser.msie){if(b.innerHTML.length>0){e=b.firstChild.cloneNode(true);
b.innerHTML=""}else{e=null}}else{e=b.firstChild}return e},remove:function(a){if(!a){return
}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);
b=null}},update:function(){var a=this._elem,f=this.updateMode,h,l,j,g,n,c,k,e,i;this._innerHTMLReplaced=NO;
if(!a){return}h=SC.$(a);if(this.length>0){this._innerHTMLReplaced=YES;if(f===SC.MODE_REPLACE){a.innerHTML=this.join()
}else{c=a.cloneNode(false);c.innerHTML=this.join();i=(f===SC.MODE_APPEND)?null:a.firstChild;
k=c.firstChild;while(k){e=k.nextSibling;a.insertBefore(k,e);k=e}k=e=c=i=null}}if(this._attrsDidChange&&(j=this._attrs)){for(l in j){if(!j.hasOwnProperty(l)){continue
}g=j[l];if(g===null){a.removeAttribute(l)}else{h.attr(l,g)}}}if(this._classNamesDidChange&&(j=this._classNames)){h.attr("class",j.join(" "))
}if(this._idDidChange&&(j=this._id)){h.attr("id",j)}if(this._stylesDidChange&&(n=this._styles)){var b=this._STYLE_PAIR_ARRAY,m=this._JOIN_ARRAY;
for(l in n){if(!n.hasOwnProperty(l)){continue}j=n[l];if(j===null){continue}if(typeof j===SC.T_NUMBER&&l!=="zIndex"){j+="px"
}b[0]=this._dasherizeStyleName(l);b[1]=j;m.push(b.join(": "))}h.attr("style",m.join("; "));
m.length=0}a=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},_TAG_ARRAY:[],_JOIN_ARRAY:[],_STYLE_PAIR_ARRAY:[],end:function(){var n=this._TAG_ARRAY,b,l,j,h,k=this._attrs,e=this._classNames,a=this._id,m=this._styles;
n[0]="<";n[1]=this._tagName;if(k||e||m||a){if(!k){k=this._DEFAULT_ATTRS}if(a){k.id=a
}if(e){k["class"]=e.join(" ")}if(m){l=this._JOIN_ARRAY;b=this._STYLE_PAIR_ARRAY;for(j in m){if(!m.hasOwnProperty(j)){continue
}h=m[j];if(h===null){continue}if(!isNaN(h)&&j!=="zIndex"){h+="px"}b[0]=this._dasherizeStyleName(j);
b[1]=h;l.push(b.join(": "))}k.style=l.join("; ");l.length=0}n.push(" ");for(j in k){if(!k.hasOwnProperty(j)){continue
}h=k[j];if(h===null){continue}n.push(j,'="',h,'" ')}if(k===this._DEFAULT_ATTRS){delete k.style;
delete k["class"];delete k.id}}var i=this.strings;var g=(this._selfClosing===NO)?NO:(this.length===1);
n.push(g?" />":">");i[this.offset]=n.join("");n.length=0;if(!g){n[0]="</";n[1]=this._tagName;
n[2]=">";i.push(n.join(""));var f=this;while(f){f.length++;f=f.prevObject}n.length=0
}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()
},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName
}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this
}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id
}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(b,a){if(b===undefined){if(!this._classNames&&this._elem){this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(this._cloneClassNames){this._classNames=(this._classNames||[]).slice();this._cloneClassNames=NO
}if(!this._classNames){this._classNames=[]}return this._classNames}else{this._classNames=b;
this._cloneClassNames=a||NO;this._classNamesDidChange=YES;return this}},hasClass:function(a){return this.classNames().indexOf(a)>=0
},addClass:function(e){if(e===undefined||e===null){console.warn("You are adding an undefined or empty class"+this.toString());
return this}var f=this.classNames();if(SC.typeOf(e)===SC.T_STRING){if(f.indexOf(e)<0){f.push(e);
this._classNamesDidChange=YES}}else{for(var c=0,a=e.length;c<a;c++){var b=e[c];if(f.indexOf(b)<0){f.push(b);
this._classNamesDidChange=YES}}}return this},removeClass:function(b){var c=this._classNames,a;
if(!c&&this._elem){c=this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(c&&(a=c.indexOf(b))>=0){if(this._cloneClassNames){c=this._classNames=c.slice();
this._cloneClassNames=NO}c[a]=null;this._classNamesDidChange=YES}return this},resetClassNames:function(){this._classNames=[];
this._classNamesDidChange=YES;return this},setClass:function(e,c){var g,a,b,f;if(c!==undefined){return c?this.addClass(e):this.removeClass(e)
}else{g=this._classNames;if(!g&&this._elem){g=this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(!g){g=this._classNames=[]}if(this._cloneClassNames){g=this._classNames=g.slice();
this._cloneClassNames=NO}f=NO;for(b in e){if(!e.hasOwnProperty(b)){continue}a=g.indexOf(b);
if(e[b]){if(a<0){g.push(b);f=YES}}else{if(a>=0){g[a]=null;f=YES}}}if(f){this._classNamesDidChange=YES
}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(e,f){var a,c,b;
if(e===undefined){if(!this._styles&&this._elem){a=SC.$(this._elem).attr("style");
if(a&&(a=a.toString()).length>0){if(SC.browser.msie){a=a.toLowerCase()}e={};c=this._STYLE_REGEX;
c.lastIndex=0;while(b=c.exec(a)){e[this._camelizeStyleName(b[1])]=b[2]}this._styles=e;
this._cloneStyles=NO}else{this._styles={}}}else{if(!this._styles){this._styles={}
}else{if(this._cloneStyles){this._styles=SC.beget(this._styles);this._cloneStyles=NO
}}}return this._styles}else{this._styles=e;this._cloneStyles=f||NO;this._stylesDidChange=YES;
return this}},addStyle:function(a,f){var b,e=NO,c=this.styles();if(typeof a===SC.T_STRING){if(f===undefined){return c[a]
}else{if(c[a]!==f){c[a]=f;this._stylesDidChange=YES}}}else{for(b in a){if(!a.hasOwnProperty(b)){continue
}f=a[b];if(c[b]!==f){c[b]=f;e=YES}}if(e){this._stylesDidChange=YES}}return this},removeStyle:function(a){if(!this._styles&&!this._elem){return this
}var b=this.styles();if(b[a]){b[a]=null;this._stylesDidChange=YES}},attr:function(a,f){var c,b=this._attrs,e=NO;
if(!b){this._attrs=b={}}if(typeof a===SC.T_STRING){if(f===undefined){return b[a]}else{if(b[a]!==f){b[a]=f;
this._attrsDidChange=YES}}}else{for(c in a){if(!a.hasOwnProperty(c)){continue}f=a[c];
if(b[c]!==f){b[c]=f;e=YES}}if(e){this._attrsDidChange=YES}}return this},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=a.camelize();
if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=a.dasherize();
if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});SC.RenderContext.fn.html=SC.RenderContext.fn.push;
SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle;if(!SC.browser.isSafari||parseInt(SC.browser.version,10)<526){SC.RenderContext._safari3=YES
}SC.RenderContext.escapeHTML=function(e){var c,b,a;if(SC.none(e)){return e}c=this.escapeHTMLElement;
if(!c){c=this.escapeHTMLElement=document.createElement("div")}b=this.escapeTextNode;
if(!b){b=this.escapeTextNode=document.createTextNode("");c.appendChild(b)}b.data=e;
a=c.innerHTML;if(SC.RenderContext._safari3){a=a.replace(/>/g,"&gt;")}b=c=null;return a
};SC.Response=SC.Object.extend({isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");
while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")
}.property("request").cacheable(),address:function(){return this.getPath("request.address")
}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO
}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO
}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")
}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");
if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})
}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")
}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;
if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()
}var b=a.get("timeout");if(b){var e=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});
this.set("timeoutTimer",e)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)
}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)
},receive:function(f,a){if(!this.get("timedOut")){var e=this.get("timeoutTimer");
if(e){e.invalidate()}this.set("timedOut",NO);var b=this.get("request");var c=b?b.get("source"):null;
SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}f.call(a,!this.get("isCancelled"));
if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()
}},this)}SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);
this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);
this.cancelTransport();SC.Request.manager.transportDidClose(this);var a=SC.$error("HTTP Request timed out","Request",408);
a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);var b=this.get("request");
var c=b?b.get("source"):null;if(!this.get("isCancelled")&&c&&c.didTimeout){c.didTimeout(b,this)
}}},cancelTransport:function(){},_notifyListener:function(b,a){var f=b[a],g,e,c;if(!f){return NO
}g=(f.params||[]).copy();g.unshift(this);e=f.target;c=f.action;if(SC.typeOf(c)===SC.T_STRING){c=e[c]
}return c.apply(e,g)},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,e=NO;
if(!b){return this}e=this._notifyListener(b,a);if(!e){e=this._notifyListener(b,c)
}if(!e){e=this._notifyListener(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);
return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))
}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};
if(!b){return a}b.split("\n").forEach(function(h){var e=h.indexOf(":"),f,g;if(e>=0){f=h.slice(0,e);
g=h.slice(e+1).trim();a[f]=g}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");
return b?b.getResponseHeader(a):null},encodedBody:function(){var b=this.get("rawRequest"),a;
if(!b){a=null}else{if(this.get("isXML")){a=b.responseXML}else{a=b.responseText}}return a
}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");
if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var e,h,b,c,g;
function f(){for(var j=0;j<arguments.length;j++){try{var k=arguments[j]();return k
}catch(l){}}return NO}e=f(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")
},function(){return new ActiveXObject("Microsoft.XMLHTTP")});this.set("rawRequest",e);
c=!!this.getPath("request.isAsynchronous");if(c){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(e,"readystatechange",this,this.finishRequest,e)
}else{h=this;b=function(){if(!h){return null}var i=h.finishRequest();if(i){h=null
}return i};e.onreadystatechange=b}}e.open(this.get("type"),this.get("address"),c);
g=this.getPath("request.headers");for(var a in g){e.setRequestHeader(a,g[a])}e.send(this.getPath("request.encodedBody"));
if(!c){this.finishRequest()}return e},finishRequest:function(c){var f=this.get("rawRequest"),a=f.readyState,e,b,g;
if(a===4){this.receive(function(h){if(!h){return}b=-1;try{b=f.status||0}catch(j){}if((b<200)||(b>=300)){try{g=f.statusText||""
}catch(i){g=""}e=SC.$error(g||"HTTP Request failed","Request",b);e.set("errorValue",this);
this.set("isError",YES);this.set("errorObject",e)}this.set("status",b)},this);if(!SC.browser.msie){SC.Event.remove(f,"readystatechange",this,this.finishRequest)
}else{f.onreadystatechange=null}return YES}return NO}});sc_require("system/response");
SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{isAsynchronous:YES,isJSON:NO,isXML:NO,init:function(){arguments.callee.base.apply(this,arguments);
this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version","1.4")
},headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");
if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},didTimeout:function(b,a){},COPY_KEYS:"isAsynchronous isJSON isXML address type timeout body responseClass willSend didSend willReceive didReceive".w(),copy:function(){var a={},e=this.COPY_KEYS,g=e.length,b,c,f;
while(--g>=0){b=e[g];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))
}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;
return this.constructor.create(a)},header:function(a,b){var c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;
if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");
if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;
this.beginPropertyChanges();for(a in c){if(!c.hasOwnProperty(a)){continue}this.header(a,c[a])
}this.endPropertyChanges();return this}}return this},async:function(a){if(a===undefined){a=YES
}return this.set("isAsynchronous",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)
}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)
}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");
if(this.get("isJSON")&&!a){this.header("Content-Type","application/json")}else{if(this.get("isXML")&&!a){this.header("Content-Type","text/xml")
}}return this},send:function(a){var b=this.get("timeout");if(b){if(!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"
}}else{if(b===0){throw"The timeout value must either not be specified or must be greater than 0"
}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())
},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)
},notify:function(a,f,e,g){var c=YES;if(SC.typeOf(a)!==SC.T_NUMBER){g=SC.A(arguments).slice(2);
e=f;f=a;a=0;c=NO}else{g=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})
}b[a]={target:f,action:e,params:g};return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")
},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)
}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")
},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)
}return c}});SC.Request.manager=SC.Object.create(SC.DelegateSupport,{maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null
}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);
this.fireRequestIfNeeded();return a},cancel:function(b){var e=this.get("pending"),c=this.get("inflight"),a;
if(e.indexOf(b)>=0){this.propertyWillChange("pending");e.removeObject(b);this.propertyDidChange("pending");
return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();
return YES}else{return NO}}},cancelAll:function(){if(this.get("pending").length||this.get("inflight").length){this.set("pending",[]);
this.get("inflight").forEach(function(a){a.cancel()});this.set("inflight",[]);return YES
}else{return NO}},fireRequestIfNeeded:function(){var e=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;
if((e.length>0)&&(c.length<a)){b=e.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("inflight").removeObject(a);
this.fireRequestIfNeeded()}});require("system/platform");SC.routes=SC.Object.create({_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(c){var a={},j=c.route||"",f,b,e,h,g,k;
f=(j.indexOf("?")<0&&j.indexOf("&")>=0)?"&":"?";b=j.split(f);j=b[0];if(b.length===1){b=[]
}else{if(b.length===2){b=b[1].split("&")}else{if(b.length>2){b.shift()}}}h=b.length;
for(e=0;e<h;++e){g=b[e].split("=");a[g[0]]=g[1]}for(k in c){if(c.hasOwnProperty(k)&&k!=="route"){a[k]=""+c[k]
}}b=[];for(k in a){b.push([k,a[k]].join("="))}a.params=f+b.join("&");a.route=j;return a
},location:function(b,c){var a;if(c!==undefined){if(c===null){c=""}if(typeof(c)==="object"){a=this._extractParametersAndRoute(c);
c=a.route+a.params}if(!SC.empty(c)||(this._location&&this._location!==c)){window.location.hash=encodeURI(c)
}this._location=c;return this}return this._location}.property(),ping:function(){var a;
if(!this._didSetup){this._didSetup=YES;if(SC.platform.supportsHashChange){this.hashChange();
SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();
setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}},hashChange:function(a){var b=window.location.hash;
b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)
}if(this.get("location")!==b){SC.run(function(){this.set("location",b)},this)}},add:function(a,b,c){if(!this._didSetup){this.invokeLast(this.ping)
}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]
}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);
return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),e,c;
if(a){e=this._extractParametersAndRoute({route:b});b=e.route;delete e.route;delete e.params;
c=a.routeForParts(b.split("/"),e);if(c&&c.target&&c.method){c.method.call(c.target,e)
}}},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,f){var a,e;
c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=f}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);
if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()
}e=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}
}e=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}
}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}e=this.staticRoutes[a]
}if(e){e.add(c,b,f)}}},routeForParts:function(e,f){var b,c,a;e=SC.clone(e);if(!e||e.length===0){return this.method?this:null
}else{b=e.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(e,f)
}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(e,f);if(a){f[c]=b;
return a}}for(c in this.wildcardRoutes){e.unshift(b);f[c]=e.join("/");return this.wildcardRoutes[c].routeForParts(null,f)
}return null}}}})});SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");
SC.TaskQueue=SC.Task.extend({runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:[],hasTasks:function(){return this._tasks.length>0
}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length
}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")
},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();
this.notifyPropertyChange("taskCount");return a},_taskCountDidChange:function(){this._setupIdle()
}.observes("taskCount"),_setupIdle:function(){if(this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){var a=this;
setTimeout(function(){a._idleEntry()},this.get("interval"));this._idleIsScheduled=YES
}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;
if(Date.now()-a>this.get("minimumIdleDuration")){this.run()}else{SC.run(function(){this._setupIdle()
},this);SC.RunLoop.lastRunLoopEnd=a}},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")
}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this._setupIdle();
this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});
SC.time=function(a){var b=SC.beget(fn);b.value=timeOffset;return b};(function(){var a=new Date();
SC.mixin(SC.time,{month:function(c,b){a.setTime(c);if(b===undefined){return a.getMonth()
}a.setMonth(b);return a.getTime()},utc:function(b){a.setTime(b);return b+(a.getTimezoneOffset()*60*1000)
},local:function(b){a.setTime(b);return b-(a.getTimezoneOffset()*60*1000)},parse:function(b){},format:function(b){}})
})();SC.time.fmt=SC.time.format;SC.time.fn={done:function(){return this.value}};"month day year".split(" ").forEach(function(a){SC.time.fn[a]=function(b){if(b===undefined){return SC.time[a](this.value)
}else{this.value=SC.time[a](this.value,b);return this}}});var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
var DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");
function LZ(a){return(a<0||a>9?"":"0")+a}SC.Locale.define("en",{longMonthNames:"January February March April May".split(" "),shortMonthNames:[],shortDateFormat:"dd/mm/yy",longDateFormat:""});
SC.mixin(Date,{isDate:function(c,b){var a=Date.getDateFromFormat(c,b);if(a==0){return false
}return true},compareDates:function(f,g,c,e){var b=Date.getDateFromFormat(f,g);var a=Date.getDateFromFormat(c,e);
if(b==0||a==0){return -1}else{if(b>a){return 1}}return 0},getDateFromFormat:function(B,s){B=B+"";
s=s+"";var A=0;var m=0;var u="";var g="";var z="";var j,h;var b=new Date();var k=b.getFullYear();
var w=b.getMonth()+1;var v=1;var e=b.getHours();var t=b.getMinutes();var o=b.getSeconds();
var l="";var p=SC.Locale.currentLocale;while(m<s.length){u=s.charAt(m);g="";while((s.charAt(m)==u)&&(m<s.length)){g+=s.charAt(m++)
}if(g=="yyyy"||g=="yy"||g=="y"){if(g=="yyyy"){j=4;h=4}if(g=="yy"){j=2;h=2}if(g=="y"){j=2;
h=4}k=Date._getInt(B,A,j,h);if(k==null){return 0}A+=k.length;if(k.length==2){if(k>70){k=1900+(k-0)
}else{k=2000+(k-0)}}}else{if(g=="MMM"||g=="NNN"){w=0;for(var q=0;q<MONTH_NAMES.length;
q++){var f=MONTH_NAMES[q];if(B.substring(A,A+f.length).toLowerCase()==f.toLowerCase()){if(g=="MMM"||(g=="NNN"&&q>11)){w=q+1;
if(w>12){w-=12}A+=f.length;break}}}if((w<1)||(w>12)){return 0}}else{if(g=="EE"||g=="E"){for(var q=0;
q<DAY_NAMES.length;q++){var n=DAY_NAMES[q];if(B.substring(A,A+n.length).toLowerCase()==n.toLowerCase()){A+=n.length;
break}}}else{if(g=="MM"||g=="M"){w=Date._getInt(B,A,g.length,2);if(w==null||(w<1)||(w>12)){return 0
}A+=w.length}else{if(g=="dd"||g=="d"){v=Date._getInt(B,A,g.length,2);if(v==null||(v<1)||(v>31)){return 0
}A+=v.length}else{if(g=="hh"||g=="h"){e=Date._getInt(B,A,g.length,2);if(e==null||(e<1)||(e>12)){return 0
}A+=e.length}else{if(g=="HH"||g=="H"){e=Date._getInt(B,A,g.length,2);if(e==null||(e<0)||(e>23)){return 0
}A+=e.length}else{if(g=="KK"||g=="K"){e=Date._getInt(B,A,g.length,2);if(e==null||(e<0)||(e>11)){return 0
}A+=e.length}else{if(g=="kk"||g=="k"){e=Date._getInt(B,A,g.length,2);if(e==null||(e<1)||(e>24)){return 0
}A+=e.length;e--}else{if(g=="mm"||g=="m"){t=Date._getInt(B,A,g.length,2);if(t==null||(t<0)||(t>59)){return 0
}A+=t.length}else{if(g=="ss"||g=="s"){o=Date._getInt(B,A,g.length,2);if(o==null||(o<0)||(o>59)){return 0
}A+=o.length}else{if(g=="a"){if(B.substring(A,A+2).toLowerCase()=="am"){l="AM"}else{if(B.substring(A,A+2).toLowerCase()=="pm"){l="PM"
}else{return 0}}A+=2}else{if(B.substring(A,A+g.length)!=g){return 0}else{A+=g.length
}}}}}}}}}}}}}}if(A!=B.length){return 0}if(w==2){if(((k%4==0)&&(k%100!=0))||(k%400==0)){if(v>29){return 0
}}else{if(v>28){return 0}}}if((w==4)||(w==6)||(w==9)||(w==11)){if(v>30){return 0}}if(e<12&&l=="PM"){e=e-0+12
}else{if(e>11&&l=="AM"){e-=12}}var a=new Date(k,w-1,v,e,t,o);return a.getTime()},parseDate:function(k){var g=(arguments.length==2)?arguments[1]:false;
generalFormats=new Array("E NNN dd HH:mm:ss UTC yyyy","y-M-d","y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","d MMM y","d.MMM.y","y MMM d","y.MMM.d");
monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");
var b=new Array("generalFormats",g?"dateFirst":"monthFirst",g?"monthFirst":"dateFirst");
var h=null;h=0;var e=new Date().getTime();switch(k.toLowerCase()){case"yesterday".loc():h=e-(24*60*60*1000);
break;case"today".loc():case"now".loc():h=e;break;case"tomorrow".loc():h=e+(24*60*60*1000);
break}if(h>0){return new Date(h)}for(var f=0;f<b.length;f++){var a=window[b[f]];for(var c=0;
c<a.length;c++){h=Date.getDateFromFormat(k,a[c]);if(h==0){h=Date.getDateFromFormat(k,a[c]+" H:m:s")
}if(h==0){h=Date.getDateFromFormat(k,a[c]+" h:m:s a")}if(h!=0){return new Date(h)
}}}return null},_isInteger:function(c){var b="1234567890";for(var a=0;a<c.length;
a++){if(b.indexOf(c.charAt(a))==-1){return false}}return true},_getInt:function(g,e,f,c){for(var a=c;
a>=f;a--){var b=g.substring(e,e+a);if(b.length<f){return null}if(Date._isInteger(b)){return b
}}return null}});SC.mixin(Date.prototype,{format:function(F){F=F+"";var J=this;var l="";
var w=0;var I="";var f="";var j=J.getFullYear()+"";var g=J.getMonth()+1;var G=J.getDate();
var o=J.getDay();var n=J.getHours();var z=J.getMinutes();var q=J.getSeconds();var u,v,b,t,L,e,D,C,A,p,O,n,N,i,a,B;
var x=new Object();if(j.length<4){j=""+(j-0+1900)}x.y=""+j;x.yyyy=j;x.yy=j.substring(2,4);
x.M=g;x.MM=LZ(g);x.MMM=MONTH_NAMES[g-1];x.NNN=MONTH_NAMES[g+11];x.d=G;x.dd=LZ(G);
x.E=DAY_NAMES[o+7];x.EE=DAY_NAMES[o];x.H=n;x.HH=LZ(n);if(n==0){x.h=12}else{if(n>12){x.h=n-12
}else{x.h=n}}x.hh=LZ(x.h);if(n>11){x.K=n-12}else{x.K=n}x.k=n+1;x.KK=LZ(x.K);x.kk=LZ(x.k);
if(n>11){x.a="PM"}else{x.a="AM"}x.m=z;x.mm=LZ(z);x.s=q;x.ss=LZ(q);while(w<F.length){I=F.charAt(w);
f="";while((F.charAt(w)==I)&&(w<F.length)){f+=F.charAt(w++)}if(x[f]!=null){l=l+x[f]
}else{l=l+f}}return l},utcFormat:function(){return(new Date(this.getTime()+(this.getTimezoneOffset()*60*1000))).format("E NNN dd HH:mm:ss UTC yyyy")
}});SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1
}var f=this.get("startTime");if(!f||f===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");
if(c<f){c=f}var b;if(this.get("repeats")){if(a===0){b=c}else{b=f+(Math.floor((c-f)/a)+1)*a
}}else{b=f+a}var e=this.get("until");if(e&&e>0&&b>e){b=e}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this
}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))
}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);
SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this
},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);SC.RunLoop.currentRunLoop.cancelTimer(this);
this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)
}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");
if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()
}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)
}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var f=this.action.split(".");
var c=f.pop();var e=SC.objectForPropertyPath(f,window);var b=e.get?e.get(c):e[c];
if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(e,this)}else{throw"%@: Timer could not find a function at %@".fmt(this,this.action)
}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);
if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()
}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH
}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue
}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;
if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b
}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;
var a=c;var e=null;while(a&&a._timerQueueRunTime<b){e=a;a=a._timerQueueNext}if(e){e._timerQueueNext=this;
this._timerQueuePrevious=e}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a
}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this
}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null
}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;
if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)
}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]
}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]
}this._timerPool.push(a);return this};SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;
this.allPropertiesDidChange()},readDefault:function(i){var c=undefined,a,j,h,k,g;
i=this._normalizeKeyName(i);a=this._userKeyName(i);if(this._written){c=this._written[a]
}if(SC.browser.msie=="7.0"){j=document.body;try{j.load("SC.UserDefaults")}catch(b){console.err("Couldn't load userDefaults in IE7: "+b.description)
}}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{j=window.localStorage;
if(!j&&window.globalStorage){j=window.globalStorage[window.location.hostname]}}}if(j||g){h=["SC.UserDefaults",a].join("-at-");
if(SC.browser.msie=="7.0"){c=j.getAttribute(h.replace(/\W/gi,""))}else{if(g){c=this.dataHash[h]
}else{c=j[h]}}if(!SC.none(c)){try{c=SC.json.decode(c)}catch(f){c=undefined}}else{c=undefined
}}k=this.delegate;if(k&&k.userDefaultsNeedsDefault){c=k.userDefaultsNeedsDefault(this,i,a)
}if((c===undefined)&&this._defaults){c=this._defaults[a]||this._defaults[i]}return c
},writeDefault:function(k,i){var f,b,l,j,m,h;k=this._normalizeKeyName(k);f=this._userKeyName(k);
b=this._written;if(!b){b=this._written={}}b[f]=i;if(SC.browser.msie=="7.0"){l=document.body
}else{if(this.HTML5DB_noLocalStorage){h=this._safari3DB}else{l=window.localStorage;
if(!l&&window.globalStorage){l=window.globalStorage[window.location.hostname]}}}j=["SC.UserDefaults",f].join("-at-");
if(l||h){var a=SC.json.encode(i);if(SC.browser.msie=="7.0"){l.setAttribute(j.replace(/\W/gi,""),a);
l.save("SC.UserDefaults")}else{if(h){var c=this;h.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[j],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+j+"', '"+a+"');",[],c._nullDataHandler,c.killTransaction)
})});this.dataHash[j]=a}else{try{l[j]=a}catch(g){console.error("Failed using localStorage. "+g)
}}}}m=this.delegate;if(m&&m.userDefaultsDidChange){m.userDefaultsDidChange(this,k,i,f)
}return this},resetDefault:function(h){var g,a,b,e,f,c;g=this._normalizeKeyName(h);
a=this._userKeyName(g);this.propertyWillChange(h);this.propertyWillChange(g);b=this._written;
if(b){delete b[a]}if(SC.browser.msie=="7.0"){e=document.body}else{if(this.HTML5DB_noLocalStorage){c=this._safari3DB
}else{e=window.localStorage;if(!e&&window.globalStorage){e=window.globalStorage[window.location.hostname]
}}}f=["SC.UserDefaults",a].join("-at-");if(e){if(SC.browser.msie=="7.0"){e.setAttribute(f.replace(/\W/gi,""),null);
e.save("SC.UserDefaults")}else{if(c){var i=this;c.transaction(function(j){j.executeSql("delete from SCLocalStorage where key = ?",[f],null)
});delete this.dataHash[f]}else{delete e[f]}}}this.propertyDidChange(h);this.propertyDidChange(g);
return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)
}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";
a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";
return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");
a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");
a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);
if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var g=SC.userDefaults.get("dataHash");
if(g){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");
this._scud_appDomain=this.get("appDomain");if(SC.browser.msie=="7.0"){document.body.addBehavior("#default#userData")
}this.HTML5DB_noLocalStorage=((parseInt(SC.browser.safari,0)>523)&&(parseInt(SC.browser.safari,0)<528));
if(this.HTML5DB_noLocalStorage){var f;try{if(!window.openDatabase){console.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");
return}else{var a="scdb",c="1.0",b="SproutCore database",j=65536;f=openDatabase(a,c,b,j)
}}catch(i){console.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");
return}if(f){var h=this;f.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],h._nullDataHandler,h.killTransaction)
});f.transaction(function(e){e.parent=h;e.executeSql("SELECT * from SCLocalStorage;",[],function(p,m){var n={},o;
for(var l=0,k=m.rows.length;l<k;l++){o=m.rows.item(l);n[o.key]=o.value}p.parent.dataHash=n;
SC.run(function(){SC.userDefaults.set("ready",YES)})},h.killTransaction)});this._safari3DB=f
}}else{this.set("ready",YES)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){},readyCallback:function(a,b){this.func=b;
this.ob=a},readyChanged:function(){if(this.ready===YES){var a=this.func;if(a){a.apply(this.ob)
}}}.observes("ready")});SC.userDefaults=SC.UserDefaults.create();sc_require("system/browser");
SC.mixin({_downloadFrames:0,_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace"],download:function(e){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;
SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";
a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",e)
}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",e)
}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));
c=null};b.invokeLater(null,2000)}a=null},normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a
}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a
}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0
},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)
},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)
},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2
},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))
},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO
}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO
}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};
c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};
c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}
},stringFromRect:function(a){if(!a){return"(null)"}else{return"{x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+"}"
}},stringFromLayout:function(f){var e=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left"],a=[],c,b=e.length;
while(--b>=0){c=e[b];if(f.hasOwnProperty(c)){a.push(c+":"+f[c])}}return"{"+a.join(", ")+"}"
},heightForString:function(i,c,b,a,h){var f=this._heightCalcElement,g,j;if(!h){i=SC.RenderContext.escapeHTML(i)
}g=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!f){f=this._heightCalcElement=document.createElement("div");
document.body.insertBefore(f,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";
var e=SC.$(f);e.attr("style",b);if(g!==""){e.attr("class",g)}f.innerHTML=i;j=f.clientHeight;
f=null;return j},prepareStringMeasurement:function(o,a){var l=this._metricsCalculationElement,j,p,c,e;
j=SC.A(a).join(" ");if(!l){l=this._metricsCalculationElement=document.createElement("div");
document.body.insertBefore(l,null)}e=SC.$(l);if(SC.typeOf(o)!=SC.T_STRING){var h=null;
if(document.defaultView&&document.defaultView.getComputedStyle){h=document.defaultView.getComputedStyle(o,null)
}else{h=o.currentStyle}c=h.cssText;if(!c||c.trim()===""){var n=this._copy_computed_props;
for(var k=0;k<n.length;k++){var b=n[k],g=h[b];l.style[b]=g}var m=l.style;if(m.font===""){var f="";
if(m.fontStyle){f+=m.fontStyle+" "}if(m.fontVariant){f+=m.fontVariant+" "}if(m.fontWeight){f+=m.fontWeight+" "
}if(m.fontSize){f+=m.fontSize}else{f+="10px"}if(m.lineHeight){f+="/"+m.lineHeight
}f+=" ";if(m.fontFamily){f+=m.fontFamily}else{m+="sans-serif"}l.style.font=f}SC.mixin(l.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"})
}else{e.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")
}h=null}else{c=o;e.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")
}l.className=j;l=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;
a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){if(!b){c=SC.RenderContext.escapeHTML(c)
}var e=this._metricsCalculationElement;if(!e){throw"measureString requires a string measurement environment to be set up. Did you mean metricsForString?"
}if(typeof e.innerText!="undefined"){e.innerText=c}else{e.textContent=c}var a={width:e.clientWidth,height:e.clientHeight};
e=null;return a},metricsForString:function(c,e,f,b){if(!b){c=SC.RenderContext.escapeHTML(c)
}SC.prepareStringMeasurement(e,f);var a=SC.measureString(c);SC.teardownStringMeasurement();
return a},viewportOffset:function(c){if(c.getBoundingClientRect){var e=c.getBoundingClientRect();
return{x:e.left,y:e.top}}var j=0,f=0,k,h,g,l,b,i=c,a=SC.browser.mozilla>=3;while(i){k=SC.$(i);
f+=(i.offsetTop||0);if(!a||(i!==c)){f+=(i.clientTop||0)}j+=(i.offsetLeft||0);if(!a||(i!==c)){j+=(i.clientLeft||0)
}if(SC.browser.mozilla){h=k.attr("overflow");if(h!=="visible"){g=parseInt(k.attr("borderLeftWidth"),0)||0;
l=parseInt(k.attr("borderTopWidth"),0)||0;if(c!==i){g*=2;l*=2}j+=g;f+=l}b=i.offsetParent;
if(SC.browser.mozilla.match(/1[.]9/)&&b){f-=b.clientTop;j-=b.clientLeft}}if(i.offsetParent==document.body&&k.attr("position")==="absolute"){break
}i=i.offsetParent}i=c;while(i){if(!SC.browser.isOpera||i.tagName==="BODY"){f-=i.scrollTop||0;
j-=i.scrollLeft||0}i=i.parentNode}return{x:j,y:f}},ZERO_POINT:{x:0,y:0},ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))
},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)
},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c
}var e=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:e,length:a-e}
},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND
}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var e=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));
if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND
}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),e=Math.min(SC.maxRange(c),SC.maxRange(b));
if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},cloneRange:function(a){return{start:a.start,length:a.length}
},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0
}return(b.start==a.start)&&(b.length==a.length)},convertHsvToHex:function(k,x,u){var a=0,l=0,o=0;
if(u>0){var j=(k==1)?0:Math.floor(k*6),m=(k==1)?0:(k*6)-j,e=u*(1-x),c=u*(1-(x*m)),w=u*(1-(x*(1-m))),n=[[u,w,e],[c,u,e],[e,u,w],[e,c,u],[w,e,u],[u,e,c]];
a=Math.round(255*n[j][0]);l=Math.round(255*n[j][1]);o=Math.round(255*n[j][2])}return this.parseColor("rgb("+a+","+l+","+o+")")
},convertHexToHsv:function(i){var c=this.expandColor(i),a=Math.max(Math.max(c[0],c[1]),c[2]),e=Math.min(Math.min(c[0],c[1]),c[2]),g=(a===0)?0:(1-e/a),b=a/255,f=(a==e)?0:((a==c[0])?((c[1]-c[2])/(a-e)/6):((a==c[1])?((c[2]-c[0])/(a-e)/6+1/3):((c[0]-c[1])/(a-e)/6+2/3)));
f=(f<0)?(f+1):((f>1)?(f-1):f);return[f,g,b]},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,f,e,a;
c=this.parseColor(b);if(c){f=parseInt(c.slice(1,3),16);e=parseInt(c.slice(3,5),16);
a=parseInt(c.slice(5,7),16);return[f,e,a]}},parseColor:function(e){var f=0,a="#",c,b;
if(c=this.PARSE_COLOR_RGBRE.exec(e)){for(f=1;f<=3;f++){b=Math.max(0,Math.min(255,parseInt(c[f],0)));
a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(e)){if(c[1].length==3){for(f=0;
f<3;f++){a+=c[1].charAt(f)+c[1].charAt(f)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255
}var b=a.toString(16);if(a<16){return"0"+b}return b},getStyle:function(a,b){var c="";
if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)
}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(e,f){return f.toUpperCase()
});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(f){var a,c="",b,e;for(b=0,e=f.length;
b<e;b++){a=f.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);
c=c+String.fromCharCode(a)}return c}});require("tasks/task");SC.didPreloadBundle=function(){};
SC.PreloadBundleTask=SC.Task.extend({bundle:null,target:"SC",action:"preloaded",run:function(a){var b;
if(b=this.get("bundle")){var c=Date.now();SC.loadBundle(this.get("bundle"),this.get("target"),this.get("action"))
}}});SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b
},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true
},validateError:function(a,b){return SC.$error("Invalid.General(%@)".loc(b.get("fieldValue")),b.get("fieldKey"))
},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)
},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)
},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)
}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});
SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(f,h,g){var c;if(!g){return
}if(g instanceof SC.Validator){c=g}else{if(g.isClass){c=g.create()}else{if(SC.typeOf(g)===SC.T_STRING){var b=null;
var a=g.match(/^(.+)\[(.*)\]/);if(a){g=a[1];b=a[2]}g=g.classify();var e=SC.Validator[g];
if(SC.none(e)){throw"validator %@ not found for %@".fmt(g,h)}else{if(b){if(!f){throw"named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,h)
}if(!f._validatorHash){f._validatorHash={}}c=(b)?f._validatorHash[b]:null;if(!c){c=e.create()
}if(b){f._validatorHash[b]=c}}else{c=e.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)
}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)
}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")
}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.CreditCard(%@)".loc(a),a)
},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(k){if(!k||k.length===0){return YES
}k=k.replace(/[^0-9]/g,"");var a="0123456789";var h=k.length;var g=parseInt(k,0);
var m=k.toString();m=m.replace(/^\s+|\s+$/g,"");var l=0;var o=true;var b=false;var n;
var e;for(var c=0;c<h;c++){n=""+m.substring(c,c+1);if(a.indexOf(n)=="-1"){o=false
}}if(!o){b=false}if((h===0)&&(b)){b=false}else{if(h>=15){for(var f=h;f>0;f--){e=parseInt(g,0)%10;
e=parseInt(e,0);l+=e;f--;g=g/10;e=parseInt(g,0)%10;e=e*2;switch(e){case 10:e=1;break;
case 12:e=3;break;case 14:e=5;break;case 16:e=7;break;case 18:e=9;break;default:e=e
}g=g/10;l+=e}if((l%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");
SC.Validator.Date=SC.Validator.extend({format:"NNN d, yyyy h:mm:ss a",fieldValueForObject:function(b,c,e){var a;
if(typeof(b)==="number"){a=new Date(b)}else{if(b instanceof Date){a=b}}if(a){b=a.format(this.get("format"))
}return b},objectForFieldValue:function(c,b,e){if(c){var a=Date.parseDate(c);c=(a)?a.getTime():null
}return c}});require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))
}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))
}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.Email(%@)".loc(a),a)
}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");
return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");
SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");
if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";
return SC.$error("Invalid.NotEmpty(%@)".loc(a.capitalize()),c.get("errorLabel"))}});
sc_require("validators/validator");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));
break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,e){var a;
c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null
}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length==1&&c.match(/-/)){c=null
}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""
}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");
return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";
return SC.$error("Invalid.Number(%@)".loc(a),a)},validateKeyDown:function(b,c,a){var e=c.$input().val();
if(!e){e=""}e+=a;if(this.get("places")===0){if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===e
}}else{if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===e
}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);
if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(f){if(!this.fields||this.fields.length===0){return true
}var e=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(h){var g=h.get("fieldValue");
if(g!=c){a=false}if(!g||g.length===0){e=true}if(g&&g.length>0){b=true}});if(f){return(b===false)?false:a
}else{return(e===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true
}var a="Invalid.Password".loc();var e=this._field;this.fields.forEach(function(g){var h=(b)?null:((g==e)?a:"");
c.setErrorFor(g,h)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))
},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");
if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE
}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);
break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a
},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")
}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");
break}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.Number(%@)".loc(a),a)
},validateKeyDown:function(b,c,a){var e=c.$input().val();if(!e){e=""}e+=a;if(a.length===0){return true
}else{return e.match(/^[0-9\0]*/)[0]===e}}});sc_require("views/view");SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],nowShowing:null,contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();
if(a){this.appendChild(a)}},createChildViews:function(){var a=this.get("contentView");
if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},awake:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("nowShowing");if(a&&a.length>0){this.nowShowingDidChange()}},nowShowingDidChange:function(){var a=this.get("nowShowing");
if(a===SC.CONTENT_SET_DIRECTLY){return}if(SC.typeOf(a)===SC.T_STRING&&a.length>0){if(a.indexOf(".")>0){a=SC.objectForPropertyPath(a)
}else{a=SC.objectForPropertyPath(a,this.get("page"))}}if(SC.typeOf(a)===SC.T_CLASS){if(a.kindOf(SC.View)){a=a.create()
}else{a=null}}if(a&&!(a instanceof SC.View)){a=null}this.set("contentView",a)}.observes("nowShowing"),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))
}.observes("contentView")});sc_require("views/view");sc_require("mixins/control");
SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";
SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_STATE_SPRITE="sprite";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";
SC.BLANK_IMAGE_URL=SC.browser.msie&&SC.browser.msie<8?"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/sproutcore/foundation/en_us/A/blank.gif":SC.BLANK_IMAGE_DATAURL;
SC.ImageView=SC.View.extend(SC.Control,{classNames:"sc-image-view",tagName:"img",status:SC.IMAGE_STATE_NONE,value:null,useImageCache:YES,canLoadInBackground:NO,localize:YES,displayProperties:"status toolTip".w(),render:function(c,g){var a=this.get("status"),e=this.get("value");
if(a===SC.IMAGE_STATE_NONE&&e){this._image_valueDidChange()}a=this.get("status");
var f=(a===SC.IMAGE_STATE_LOADED)?e:SC.BLANK_IMAGE_URL;if(a===SC.IMAGE_STATE_SPRITE){c.addClass(e)
}c.attr("src",f);var b=this.get("toolTip");if(SC.typeOf(b)===SC.T_STRING){if(this.get("localize")){b=b.loc()
}c.attr("title",b);c.attr("alt",b)}},_image_valueDidChange:function(){var b=this.get("value"),c;
if(b&&b.isEnumerable){b=b.firstObject()}c=SC.ImageView.valueIsUrl(b);if(c&&this.get("useImageCache")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");
this._loadingUrl=b;SC.imageCache.loadImage(b,this,this.imageDidLoad,a);if(this._loadingUrl){this.set("status",SC.IMAGE_STATE_LOADING)
}}else{this._loadingUrl=null;this.set("status",(c)?SC.IMAGE_STATE_LOADED:SC.IMAGE_STATE_SPRITE);
this.displayDidChange()}}.observes("value"),imageDidLoad:function(a,b){if(a===this._loadingUrl){this._loadingUrl=null
}if(this.get("value")===a){this.set("status",SC.$ok(b)?SC.IMAGE_STATE_LOADED:SC.IMAGE_STATE_FAILED);
this.displayDidChange()}}});SC.ImageView.valueIsUrl=function(a){return a?a.indexOf("/")>=0:NO
};sc_require("views/view");sc_require("mixins/control");SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";
SC.ALIGN_CENTER="center";SC.REGULAR_WEIGHT="normal";SC.BOLD_WEIGHT="bold";SC.LabelView=SC.View.extend(SC.Control,{classNames:["sc-label-view"],fontWeight:SC.REGULAR_WEIGHT,escapeHTML:true,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),localize:false,localizeBindingDefault:SC.Binding.oneWay().bool(),formatter:null,value:"",hint:null,exampleInlineTextFieldView:SC.InlineTextFieldView,icon:null,textAlign:SC.ALIGN_LEFT,isInlineEditorMultiline:NO,displayValue:function(){var h,f;
h=this.get("value");f=this.getDelegateProperty("formatter",this.displayDelegate);
if(f){var g=(SC.typeOf(f)===SC.T_FUNCTION)?f(h,this):f.fieldValueForObject(h,this);
if(!SC.none(g)){h=g}}if(SC.typeOf(h)===SC.T_ARRAY){var e=[];for(var b=0,c=h.get("length");
b<c;b++){var a=h.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}e.push(a)
}h=e.join(",")}if(!SC.none(h)&&h.toString){h=h.toString()}if(h&&this.getDelegateProperty("localize",this.displayDelegate)){h=h.loc()
}if(this.get("escapeHTML")){h=SC.RenderContext.escapeHTML(h)}return h}.property("value","localize","formatter","escapeHTML").cacheable(),hintValue:function(){var a=this.get("hint");
if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}return a}.property("hint","escapeHTML").cacheable(),isEditable:NO,isEditableBindingDefault:SC.Binding.bool(),isEditing:NO,validator:null,doubleClick:function(a){return this.beginEditing()
},beginEditing:function(){if(this.get("isEditing")){return YES}if(!this.get("isEditable")){return NO
}var b=this.$(),e=this.get("value"),c=SC.viewportOffset(b[0]),a=this.convertFrameFromView(this.get("frame"),null);
c.width=a.width;c.height=a.height;SC.InlineTextFieldView.beginEditing({frame:c,delegate:this,exampleElement:b,value:e,multiline:this.get("isInlineEditorMultiline"),isCollection:NO,validator:this.get("validator"),exampleInlineTextFieldView:this.get("exampleInlineTextFieldView")})
},discardEditing:function(){if(!this.get("isEditing")){return YES}return SC.InlineTextFieldView.discardEditing()
},commitEditing:function(){if(!this.get("isEditing")){return YES}return SC.InlineTextFieldView.commitEditing()
},inlineEditorWillBeginEditing:function(a){this.set("isEditing",YES)},inlineEditorDidBeginEditing:function(b){var a=this.$();
this._oldOpacity=a.css("opacity");a.css("opacity",0)},inlineEditorShouldBeginEditing:function(){return this.get("isEditable")
},inlineEditorShouldEndEditing:function(a,b){return YES},inlineEditorDidEndEditing:function(a,b){this.setIfChanged("value",b);
this.$().css("opacity",this._oldOpacity);this._oldOpacity=null;this.set("isEditing",NO)
},displayProperties:"displayValue textAlign fontWeight icon".w(),_TEMPORARY_CLASS_HASH:{},render:function(e,a){var l=this.get("displayValue"),k=this.get("icon"),h=this.get("hintValue"),g,f,m,i=false,c=false;
if(k){var b=(k.indexOf("/")>=0)?k:SC.BLANK_IMAGE_URL,j=(b===k)?"":k;k='<img src="'+b+'" alt="" class="icon '+j+'" />';
if(k!==this._iconCache){this._iconCache=k;i=true}}if(h&&(!l||l==="")){m='<span class="sc-hint">'+h+"</span>"
}else{m=l}if(m!==this._textCache){this._textCache=m;c=true}if(a||c||i){e.push(k,m)
}f={"text-align":this.get("textAlign"),"font-weight":this.get("fontWeight")};if(this.get("isEditing")){f.opacity=0
}e.addStyle(f);g=this._TEMPORARY_CLASS_HASH;g.icon=!!this.get("icon");e.setClass(g)
}});require("panes/pane");SC.MainPane=SC.Pane.extend({layout:{top:0,left:0,bottom:0,right:0,minHeight:200,minWidth:200},paneDidAttach:function(){var b=arguments.callee.base.apply(this,arguments);
var a=this.rootResponder;a.makeMainPane(this);if(!a.get("keyRootView")){a.makeKeyPane(this)
}return b},acceptsKeyPane:YES,classNames:["sc-main"]});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/foundation")
}SC.stringsFor("English",{"Invalid.CreditCard(%@)":"%@ is not a valid credit card number","Invalid.Email(%@)":"%@ is not a valid email address","Invalid.NotEmpty(%@)":"%@ must not be empty","Invalid.Password":"Your passwords do not match.  Please try typing them again.","Invalid.General(%@)":"%@ is invalid.  Please try again.","Invalid.Number(%@)":"%@ is not a number."});
SC.allowsBackspaceToPreviousPage=NO;SC.BORDER_BEZEL="sc-bezel-border";SC.BORDER_BLACK="sc-black-border";
SC.BORDER_GRAY="sc-gray-border";SC.BORDER_TOP="sc-top-border";SC.BORDER_BOTTOM="sc-bottom-border";
SC.BORDER_NONE=null;SC.Border={borderTop:0,borderRight:0,borderBottom:0,borderLeft:0,borderStyle:SC.BORDER_GRAY,hasBorder:YES,displayProperties:["borderStyle"],_BORDER_REGEXP:(/-border$/),initMixin:function(){this._sc_border_borderStyleDidChange()
},renderMixin:function(a,c){var b=this.get("borderStyle");if(b){if(this._BORDER_REGEXP.exec(b)){a.addClass(b)
}else{a.addStyle("border","1px "+b+" solid")}}},_sc_border_borderStyleDidChange:function(){var a=this.get("borderStyle"),b=SC.Border.dimensions[a];
if(b){this.borderTop=b;this.borderRight=b;this.borderBottom=b;this.borderLeft=b}}};
SC.mixin(SC.Border,{dimensions:{"sc-bezel-border":1,"sc-black-border":1,"sc-gray-border":1,"sc-top-border":1,"sc-bottom-border":1}});
SC.CollectionFastPath={initMixin:function(){this._indexMap={}},poolForExampleView:function(a){var b="_pool_"+SC.guidFor(a);
if(!this[b]){this[b]=[]}return this[b]},createItemViewFromExampleView:function(c,b){var a=c.create(b);
if(a.isPoolable){a.owningPool=this.poolForExampleView(c)}a.createdFromExampleView=c;
return a},configureItemView:function(b,a){b.beginPropertyChanges();b.setIfChanged("content",a.content);
b.setIfChanged("contentIndex",a.contentIndex);b.setIfChanged("parentView",a.parentView);
b.setIfChanged("layerId",a.layerId);b.setIfChanged("isEnabled",a.isEnabled);b.setIfChanged("isSelected",a.isSelected);
b.setIfChanged("outlineLevel",a.outlineLevel);b.setIfChanged("layout",a.layout);b.setIfChanged("disclosureState",a.disclosureState);
b.setIfChanged("isVisibleInWindow",a.isVisibleInWindow);b.setIfChanged("isGroupView",a.isGroupView);
b.setIfChanged("page",this.page);b.endPropertyChanges()},wakePooledView:function(b,a){this.configureItemView(b,a);
if(b.awakeFromPool){b.awakeFromPool(b.owningPool,this)}},allocateItemView:function(e,b){var a;
if(e.prototype.isPoolable){var c=this.poolForExampleView(e);if(c.length>0){a=c.pop();
this.wakePooledView(a,b)}}if(!a){a=this.createItemViewFromExampleView(e,b)}return a
},releaseItemView:function(b){if(!b.isPoolable){b.destroy();return}var a=b.owningPool;
a.push(b);if(b.hibernateInPool){b.hibernateInPool(a,this)}},contentIndexIsGroup:function(a,e,c){var f=this.get("contentDelegate");
var b=this.get("_contentGroupIndexes"),g=NO;g=b&&b.contains(c);if(g){g=f.contentIndexIsGroup(this,this.get("content"),c)
}return g},exampleViewForItem:function(g,e){var b=this.get("contentDelegate"),c=this.get("_contentGroupIndexes"),f,a,h=this.contentIndexIsGroup(this,this.get("content"),e);
if(h){f=this.get("contentGroupExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")
}}else{f=this.get("contentExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("exampleView")
}}return a},setAttributesForItem:function(g,e,c){var b=this.get("contentDelegate"),h=this.contentIndexIsGroup(this,this.get("content"),e),a=this.exampleViewForItem(g,e),f=this.get("content");
c.createdFromExampleView=a;c.parentView=this.get("containerView")||this;c.contentIndex=e;
c.owner=c.displayDelegate=this;c.content=g;c.page=this.page;c.layerId=this.layerIdFor(e);
c.isEnabled=b.contentIndexIsEnabled(this,f,e);c.isSelected=b.contentIndexIsSelected(this,f,e);
c.outlineLevel=b.contentIndexOutlineLevel(this,f,e);c.disclosureState=b.contentIndexDisclosureState(this,f,e);
c.isVisibleInWindow=this.get("isVisibleInWindow");c.isGroupView=h;c.layout=this.layoutForContentIndex(e);
if(!c.layout){c.layout=a.prototype.layout}},mappedViewsForItem:function(a,b){if(!b){b=this._viewMap
}return b[SC.guidFor(a)]},mappedViewForItem:function(c,b,e){if(!e){e=this._viewMap
}var a=e[SC.guidFor(c)];if(!a){return undefined}return a[b]},mapView:function(f,c,b,h){if(!h){h=this._viewMap
}var e=SC.guidFor(f),a=h[e];if(!a){a=h[e]={_length:0}}a[c]=b;a._length++},unmapView:function(f,c,h){if(!h){h=this._viewMap
}var e=SC.guidFor(f),a=h[e];if(!a){return}if(a[c]){var b=a[c];delete a[c];a._length--;
if(a._length<=0){delete h[e]}}},itemViewForContentIndex:function(b){var e=this.get("content");
if(!e){return}var c=e.objectAt(b);if(!c){return null}var f=this.exampleViewForItem(c,b),a=this._indexMap[b];
if(a&&a.createdFromExampleView!==f){this.removeItemView(a);this.unmapView(c,b);a=null
}if(!a){a=this.addItemView(f,c,b)}return a},nearestMappedViewIndexForItem:function(f,c,g){var b=this.mappedViewsForItem(f,g);
if(!b){return null}var e=null,i=-1,h=0;for(var a in b){a=parseInt(a,10);if(isNaN(a)){continue
}h=Math.abs(c-a);if(i<0||h<i){i=h;e=a}}return e},remapItemViews:function(b){var k=this._viewMap||{},a=(this._viewMap={}),j=(this._indexMap={}),l=[],i=this.get("content"),o;
if(!i){return}var g=this._itemsToAdd;b.forEach(function(p){o=i.objectAt(p);var s=this.mappedViewsForItem(o,k);
if(s){if(s[p]){var q=s[p];this.unmapView(o,p,k);this.mapView(o,p,q,a);j[p]=q}else{l.push(p)
}}else{g.push(p)}},this);for(var n=0,h=l.length;n<h;n++){var m=l[n];o=i.objectAt(m);
var f=this.nearestMappedViewIndexForItem(o,m,k),c;if(!SC.none(f)){c=this.mappedViewForItem(o,f,k);
var e=this.exampleViewForItem(o,m);if(e===c.createdFromExampleView){this.unmapView(o,f,k);
this.mapView(o,m,c,a);j[m]=c}else{g.push(m)}}else{g.push(m)}}return k},reloadIfNeeded:function(g,b){var e=this.get("content"),f;
if(!g||!g.isIndexSet){g=this.get("nowShowing")}if(!b){f=this._invalidIndexes;if(!f||!this.get("isVisibleInWindow")){return this
}this._invalidIndexes=NO;if(f.isIndexSet&&f.contains(g)){f=YES}if(this.willReload){this.willReload(f===YES?null:f)
}}var h=this._itemsToAdd||(this._itemsToAdd=[]);var a=this.remapItemViews(g);this.processRemovals(a);
if(f){this.processUpdates(f===YES?g:f)}this.processAdds();if(!b){this.clearDOMPools()
}h.length=0;if(!b){var c=this.computeLayout();if(c){this.adjust(c)}if(this.didReload){this.didReload(f===YES?null:f)
}}return this},processRemovals:function(c){var g=this.get("content");for(var e in c){var b=c[e];
for(var f in b){f=parseInt(f,10);if(isNaN(f)){continue}var a=b[f];if(this._indexMap[f]===a){delete this._indexMap[f]
}a._isInCollection=NO;this.removeItemView(a)}}},processUpdates:function(f){var b=this._itemsToUpdate,e=this.get("content"),c,a;
f.forEach(function(g){c=e.objectAt(g);if(a=this.mappedViewForItem(c,g)){if(!a._isInCollection){return
}var h=this.exampleViewForItem(c,g);this.updateItemView(a,h,c,g)}},this)},processAdds:function(){var g=this.get("content");
var h=this._itemsToAdd,b,a=h.length,f,e;for(b=0;b<a;b++){f=h[b];e=g.objectAt(f);var i=this.exampleViewForItem(e,f);
var c=this.addItemView(i,e,f)}},clearDOMPools:function(){var a=this._domPools||(this._domPools={});
for(var b in a){this.clearDOMPool(a[b])}},domPoolSize:10,clearDOMPool:function(c){var b,a=c.length,e;
for(b=this.domPoolSize;b<a;b++){e=c[b];this.removeChild(e);this.releaseItemView(e)
}c.length=Math.min(c.length,this.domPoolSize)},domPoolForExampleView:function(e){var c=this._domPools||(this._domPools={}),a=SC.guidFor(e);
var b=c[a];if(!b){b=c[a]=[]}return b},itemFromDOMPool:function(c){var b=this.domPoolForExampleView(c);
if(b.length<1){return null}var a=b.shift();if(a.wakeFromDOMPool){a.wakeFromDOMPool()
}return a},sendToDOMPool:function(a){var b=this.domPoolForExampleView(a.createdFromExampleView);
b.push(a);var c=a.get("frame");a.adjust({top:-c.height});a.set("layerId",SC.guidFor(a));
if(a.sleepInDOMPool){a.sleepInDOMPool()}},addItemView:function(f,e,c){var a,b=this._TMP_ATTRS||(this._TMP_ATTRS={});
this.setAttributesForItem(e,c,b);if(a=this.itemFromDOMPool(f)){this.configureItemView(a,b);
a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;return a}a=this.allocateItemView(f,b);
this.appendChild(a);a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;
return a},removeItemView:function(a){if(a.get("layerIsCacheable")){this.sendToDOMPool(a)
}else{this.removeChild(a)}a._isInCollection=NO},updateItemView:function(e,f,c,b){if(!e.get("layerIsCacheable")||e.createdFromExampleView!==f){this.unmapView(e,b);
delete this._indexMap[b];this.removeItemView(e,c,b);var g=this.addItemView(f,c,b)
}else{var a=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(c,b,a);
this.configureItemView(e,a)}},_lastTopUpdate:0,_lastLeftUpdate:0,_tolerance:100,touchScrollDidChange:function(h,g){if(Date.now()-this._lastTouchScrollTime<25){return
}var i=this.get("clippingFrame");var f=this._inScrollClippingFrame||(this._inScrollClippingFrame={x:0,y:0,width:0,height:0});
f.x=i.x;f.y=i.y;f.width=i.width;f.height=i.height;f.x=h;f.y=g;var e=this.contentIndexesInRect(f);
if(!e){return}var b=this.get("length"),a=e.get("max"),c=e.get("min");if(a>b||c<0){e=e.copy();
e.remove(b,a-b).remove(c,0-c).freeze()}if(this._lastNowShowing){if(e.contains(this._lastNowShowing)&&this._lastNowShowing.contains(e)){return
}}this._lastNowShowing=e;this.reloadIfNeeded(e,YES);this._lastTouchScrollTime=Date.now()
}};SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:YES,rowHeight:18,customRowHeightIndexes:null,contentIndexRowHeight:function(a,b,c){return this.get("rowHeight")
}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b
},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b
},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO
}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);
return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);
return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES
},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null
},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,e,f,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:f
},collectionViewPerformDragOperation:function(b,e,f,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null
},ghostActsLikeCursor:NO};SC.Scrollable={initMixin:function(){console.warn("SC.Scrollable is deprecated and will be removed in a future version of SproutCore.  Consider pulling the mixin into your own app if you want to keep using it.")
},isScrollable:true,verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("innerFrame").height
}.property("innerFrame"),horizontalPageScroll:function(){return this.get("innerFrame").width
}.property("innerFrame"),hasVerticalScroller:function(){return this.get("scrollFrame").height>this.get("innerFrame").height
}.property("scrollFrame"),hasHorizontalScroller:function(){return this.get("scrollFrame").width>this.get("innerFrame").width
}.property("scrollFrame"),scrollBy:function(a){var b=this.get("scrollFrame");var c=this.get("innerFrame");
if(!this.get("hasVerticalScroller")){a.y=0}if(b.height<=c.height){a.y=0}if(!this.get("hasHorizontalScroller")){a.x=0
}if(b.width<=c.width){a.x=0}var e={x:b.x-(a.x||0),y:b.y-(a.y||0)};this.set("scrollFrame",e);
e=this.get("scrollFrame");return{x:e.x-b.x,y:e.y-b.y}},scrollTo:function(a,b){this.set("scrollFrame",{x:0-a,y:0-b})
},scrollToVisible:function(b){var g=this.get("innerFrame");var e=this.get("scrollFrame");
var a=this.convertFrameFromView(b.get("frame"),b);a.x-=(g.x+e.x);a.y-=(g.y+e.y);var c={x:0-e.x,y:0-e.y,width:g.width,height:g.height};
c.y-=Math.max(0,SC.minY(c)-SC.minY(a));c.x-=Math.max(0,SC.minX(c)-SC.minX(a));c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c));
c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c));this.scrollTo(c.x,c.y)},scrollDownLine:function(a){if(a===undefined){a=1
}return this.scrollBy({y:this.get("verticalLineScroll")*a}).y},scrollUpLine:function(a){if(a===undefined){a=1
}return 0-this.scrollBy({y:0-this.get("verticalLineScroll")*a}).y},scrollRightLine:function(a){if(a===undefined){a=1
}return this.scrollTo({y:this.get("horizontalLineScroll")*a}).x},scrollLeftLine:function(a){if(a===undefined){a=1
}return 0-this.scrollTo({y:0-this.get("horizontalLineScroll")*a}).x},scrollDownPage:function(a){if(a===undefined){a=1
}return this.scrollBy({y:this.get("verticalPageScroll")*a}).y},scrollUpPage:function(a){if(a===undefined){a=1
}return 0-this.scrollBy({y:0-this.get("verticalPageScroll")*a}).y},scrollRightPage:function(a){if(a===undefined){a=1
}return this.scrollTo({y:this.get("horizontalPageScroll")*a}).x},scrollLeftPage:function(a){if(a===undefined){a=1
}return 0-this.scrollTo({y:0-this.get("horizontalPageScroll")*a}).x}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",layout:{top:0,left:0,bottom:0,right:0},_openPaneCount:0,paneWillAppend:function(a){this._openPaneCount++;
if(!this.get("isVisibleInWindow")){this.append()}return this},paneDidRemove:function(a){this._openPaneCount--;
if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()
}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)
}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({layout:{left:0,right:0,top:0,bottom:0},classNames:["sc-panel"],acceptsKeyPane:YES,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),render:function(a,b){if(a.needsContent){this.renderChildViews(a,b);
a.push("<div class='top-left-edge'></div>","<div class='top-edge'></div>","<div class='top-right-edge'></div>","<div class='right-edge'></div>","<div class='bottom-right-edge'></div>","<div class='bottom-edge'></div>","<div class='bottom-left-edge'></div>","<div class='left-edge'></div>")
}},replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;
if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))
}.observes("contentView"),_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});
this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;
b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);
if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)
}}return a},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("isVisibleInWindow")&&(b=this._modalPane())){this._isShowingModal=YES;
b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;
b.paneDidRemove(this)}}}.observes("isModal"),paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);
this.becomeKeyPane();return a}});SC.ButtonView=SC.View.extend(SC.Control,SC.Button,SC.StaticLayout,{tagName:"div",classNames:["sc-button-view"],theme:"square",buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),href:"",action:null,target:null,supportFocusRing:NO,_labelMinWidthIE7:0,triggerAction:function(a){if(!this.get("isEnabled")){return NO
}this.set("isActive",YES);this.invokeLater("_triggerActionAfterDelay",200,a);return YES
},_triggerActionAfterDelay:function(a){this._action(a,YES);this.didTriggerAction();
this.set("isActive",NO)},didTriggerAction:function(){},titleMinWidth:80,init:function(){arguments.callee.base.apply(this,arguments);
if(this.get("keyEquivalent")){this._defaultKeyEquivalent=this.get("keyEquivalent")
}},_TEMPORARY_CLASS_HASH:{},displayProperties:["href","icon","title","value","toolTip"],renderStyle:"renderDefault",render:function(e,g){var a,b,c,f;
if(this.get("tagName")==="a"){a=this.get("href");if(!a||(a.length===0)){a="javascript:;"
}e.attr("href",a)}b=this.get("toolTip");if(SC.typeOf(b)===SC.T_STRING){if(this.get("localize")){b=b.loc()
}e.attr("title",b);e.attr("alt",b)}c=this._TEMPORARY_CLASS_HASH;c.def=this.get("isDefault");
c.cancel=this.get("isCancel");c.icon=!!this.get("icon");e.attr("role","button").setClass(c);
f=this.get("theme");if(f&&!e.hasClass(f)){e.addClass(f)}this[this.get("renderStyle")](e,g)
},renderDefault:function(a,b){if(b){a=a.push("<span class='sc-button-inner' style = 'min-width:",this.get("titleMinWidth"),"px'>");
this.renderTitle(a,b);a.push("</span>");if(this.get("supportFocusRing")){a.push('<div class="focus-ring">','<div class="focus-left"></div>','<div class="focus-middle"></div>','<div class="focus-right"></div></div>')
}}else{this.renderTitle(a,b)}},renderImage:function(a,c){var b=this.get("icon");a.addClass("no-min-width");
if(b){a.push("<div class='img "+b+"'></div>")}else{a.push("<div class='img'></div>")
}},_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var a=!!this.get("isDefault"),b=!a&&this.get("isCancel");
if(this.didChangeFor("defaultCancelChanged","isDefault","isCancel")){this.displayDidChange();
if(a){this.set("keyEquivalent","return")}else{if(b){this.setIfChanged("keyEquivalent","escape")
}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}}}.observes("isDefault","isCancel"),isMouseDown:false,mouseDown:function(a){var b=this.get("buttonBehavior");
if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;
if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)
}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)
}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;
if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);
if(a&&this.get("isEnabled")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");
if(!this.get("isEnabled")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)
}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder();
if(this.get("isVisibleInWindow")){this.$()[0].focus()}}}b.preventDefault();return YES
},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)
}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO
}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);
if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)){this._action()
}}a.preventDefault();return YES},keyDown:function(b){if(b.which===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13){this.triggerAction(b);
return YES}return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");
if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))
}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;
case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);
break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),e=this.get("target")||null,b=this.getPath("pane.rootResponder");
if(c){if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)}else{if(b){b.sendAction(c,e,this,this.get("pane"))
}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();
this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},_hasLegacyActionHandler:function(){var a=this.get("action");
if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!=-1)){return true
}return false},_triggerLegacyActionHandler:function(evt){if(!this._hasLegacyActionHandler()){return false
}var action=this.get("action");if(SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)
}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");
this.action(evt)}},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){var b=this.$()[0];if(b){b.focus()
}}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(parseInt(SC.browser.msie,0)===7&&this.get("useStaticLayout")){var f=this.get("layout"),e=this.$(),a=0;
if(e&&e[0]&&(a=e[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),i=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),h=parseInt(c.css("marginRight"),0),g=parseInt(c.css("marginLeft"),0);
if(h=="auto"){console.log(h+","+g+","+i+","+b)}if(!i&&isNaN(i)){i=0}if(!b&&isNaN(b)){b=0
}if(!h&&isNaN(h)){h=0}if(!g&&isNaN(g)){g=0}this._labelMinWidthIE7=a-(i+b)-(h+g);c.css("minWidth",this._labelMinWidthIE7+"px")
}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.TOGGLE_BEHAVIOR="toggle";
SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";
SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.msie?600:300;SC.REGULAR_BUTTON_HEIGHT=24;
sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";
SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:"sc-alert",delegate:null,icon:"sc-icon-alert-48",message:"",description:"",displayDescription:function(){var a=this.get("description");
if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"
}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");
if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"
}.property("caption").cacheable(),buttonOne:SC.outlet("contentView.childViews.1.childViews.1"),buttonTwo:SC.outlet("contentView.childViews.1.childViews.0"),buttonThree:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend(SC.StaticLayout,{classNames:["info"],render:function(a,e){var c=this.get("pane");
var b=SC.BLANK_IMAGE_URL;if(c.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+b+'" class="icon '+c.get("icon")+'" />');
a.begin("h1").attr("class","header").text(c.get("message")||"").end();a.push(c.get("displayDescription")||"");
a.push(c.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:64,layout:{right:5,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"Cancel",isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"OK",isDefault:YES,action:"dismiss"})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},isVisible:NO,childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"Extra",action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate;
if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}this.remove()
},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()
}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane._normalizeArguments=function(b){b=SC.A(b);
var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;
return b};SC.AlertPane.show=function(q,m,o,b,c,p,a,h){var g=this._normalizeArguments(arguments);
var f=this.create({message:g[0]||"",description:g[1]||null,caption:g[2]||null,icon:g[6]||"sc-icon-alert-48",delegate:g[7]});
var l="buttonOne buttonTwo buttonThree".w(),e,i;for(var k=0;k<3;k++){e=f.get(l[k]);
i=g[k+3];if(i){e.set("title",i).set("isVisible",YES);if(i=="?"){e.set("titleMinWidth",0)
}if(k==2){var n=f.get("buttonThreeWrapper");n.set("isVisible",YES)}}}var j=f.append();
f.adjust("height",f.childViews[0].$().height());f.updateLayout();return j};SC.AlertPane.warn=function(f,e,a,i,g,h,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-alert-48";return this.show.apply(this,b)};SC.AlertPane.info=function(f,e,a,i,g,h,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-info-48";return this.show.apply(this,b)};SC.AlertPane.error=function(f,e,a,i,g,h,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-error-48";return this.show.apply(this,b)};SC.AlertPane.plain=function(f,e,a,i,g,h,c){var b=this._normalizeArguments(arguments);
b[6]="blank";return this.show.apply(this,b)};sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend({classNames:"sc-palette",isModal:NO,modalPane:SC.ModalPane,isAnchored:NO,_mouseOffsetX:null,_mouseOffsetY:null,mouseDown:function(a){var b=this.get("frame");
this._mouseOffsetX=b?(b.x-a.pageX):0;this._mouseOffsetY=b?(b.y-a.pageY):0;return YES
},mouseDragged:function(a){if(!this.isAnchored){this.set("layout",{width:this.layout.width,height:this.layout.height,left:this._mouseOffsetX+a.pageX,top:this._mouseOffsetY+a.pageY});
this.updateLayout()}return YES},touchStart:function(a){return this.mouseDown(a)},touchesDragged:function(a){return this.mouseDragged(a)
}});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";
SC.PICKER_MENU_POINTER="menu-pointer";SC.POINTER_LAYOUT=["perfectRight","perfectLeft","perfectTop","perfectBottom"];
SC.PickerPane=SC.PalettePane.extend({classNames:"sc-picker",isAnchored:YES,isModal:YES,pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:null,anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:0,popup:function(e,c,f,a){var b;
if(e){b=e.isView?e.get("layer"):e}this.beginPropertyChanges();this.set("anchorElement",b);
if(c){this.set("preferType",c)}if(f){this.set("preferMatrix",f)}if(a){this.set("pointerOffset",a)
}this.endPropertyChanges();this.positionPane();return this.append()},positionPane:function(g){var g=g&&this.get("anchorCached"),b=g?this.get("anchorCached"):this.get("anchorElement"),c=this.get("preferType"),e=this.get("preferMatrix"),f=this.get("layout"),a;
if(b){if(!g){b=this.computeAnchorRect(b);this.set("anchorCached",b)}if(b.x===0&&b.y===0){return
}a=SC.cloneRect(b);if(c){switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!e||e.length!==3){this.set("preferMatrix",[1,4,3])
}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];
break;default:a.y+=a.height;break}}else{a.y+=a.height}a=this.fitPositionToScreen(a,this.get("frame"),b);
this.adjust({width:a.width,height:a.height,left:a.x,top:a.y})}else{this.adjust({width:f.width,height:f.height,centerX:0,centerY:0})
}this.updateLayout();return this},computeAnchorRect:function(c){var f,b,e,a=SC.RootResponder.responder.computeWindowSize();
if(c.getBoundingClientRect){f=c.getBoundingClientRect();b={x:f.left,y:f.top,width:f.width,height:f.height};
if(b.width===undefined||b.height===undefined){e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()
}}else{b=SC.viewportOffset(c);e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()
}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.msie&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;
b.y+=window.scrollY}else{if(SC.browser.msie&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;
b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(f,c,b){var a=SC.RootResponder.responder.computeWindowSize(),e={x:0,y:0,width:a.width,height:a.height};
c.x=f.x;c.y=f.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(e,c,this.get("isSubMenu"));
break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(e,c,b);
break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(e,c,b);
break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(e,c,b)
}this.displayDidChange();this._hideOverflow();return c},fitPositionToScreenDefault:function(c,e,b){if(SC.maxX(e)>c.width){var g=Math.max(SC.maxX(b),e.width);
e.x=Math.min(g,c.width)-e.width}if(SC.minX(e)<0){e.x=SC.minX(Math.max(b,0));if(SC.maxX(e)>c.width){e.x=Math.max(0,c.width-e.width)
}}if(SC.maxY(e)>c.height){g=Math.max((b.y-e.height),0);if(g>c.height){e.y=Math.max(0,c.height-e.height)
}else{e.y=g}}if(SC.minY(e)<0){g=Math.min(SC.maxY(b),(c.height-b.height));e.y=Math.max(g,0)
}return e},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");
b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)
}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;
b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))
}}return b},fitPositionToScreenMenuPointer:function(c,e,b){e=this.fitPositionToScreenPointer(c,e,b);
if(e.height+e.y+35>=c.height){e.height=c.height-e.y-(SC.MenuPane.VERTICAL_OFFSET*2)
}return e},fitPositionToScreenPointer:function(p,n,o){var j=[this.pointerOffset[0],this.pointerOffset[1],this.pointerOffset[2],this.pointerOffset[3]];
var g=[[o.x+o.width+j[0],o.y+parseInt(o.height/2,0)-40],[o.x-n.width+j[1],o.y+parseInt(o.height/2,0)-40],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y-n.height+j[2]],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y+o.height+j[3]]];
var c=[[o.x+o.width+n.width+j[0],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+j[1],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+j[2]],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+o.height+n.height+j[3]]];
var h=[[g[0][1]>0?0:0-g[0][1],c[0][0]<p.width?0:c[0][0]-p.width,c[0][1]<p.height?0:c[0][1]-p.height,g[0][0]>0?0:0-g[0][0]],[g[1][1]>0?0:0-g[1][1],c[1][0]<p.width?0:c[1][0]-p.width,c[1][1]<p.height?0:c[1][1]-p.height,g[1][0]>0?0:0-g[1][0]],[g[2][1]>0?0:0-g[2][1],c[2][0]<p.width?0:c[2][0]-p.width,c[2][1]<p.height?0:c[2][1]-p.height,g[2][0]>0?0:0-g[2][0]],[g[3][1]>0?0:0-g[3][1],c[3][0]<p.width?0:c[3][0]-p.width,c[3][1]<p.height?0:c[3][1]-p.height,g[3][0]>0?0:0-g[3][0]]];
var e=this.preferMatrix;if(e[4]===-1){n.x=o.x+parseInt(o.width/2,0);n.y=o.y+parseInt(o.height/2,0)-parseInt(n.height/2,0);
this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(n.height/2,0)-40)
}else{n.x=g[e[4]][0];n.y=g[e[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[e[4]]);
this.set("pointerPosY",0)}this.set("pointerPosX",0);for(var k=0,b,l=SC.POINTER_LAYOUT.length;
k<l;k++){b=e[k];if(h[b][0]===0&&h[b][1]===0&&h[b][2]===0&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0];
n.y=g[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])
}k=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&h[b][0]===0&&h[b][1]===0&&h[b][2]<n.height-91&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0];
this.set("pointerPos",SC.POINTER_LAYOUT[b])}n.y=g[b][1]-h[b][2];this.set("pointerPosY",h[b][2]);
k=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&h[b][0]===0&&h[b][1]===0&&h[b][2]<=n.height-51&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0]
}n.y=g[b][1]-(n.height-51);this.set("pointerPosY",(n.height-53));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-low");
k=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&h[b][0]===0&&h[b][1]<=parseInt(n.width/2,0)-this.get("extraRightOffset")&&h[b][2]===0&&h[b][3]===0){if(e[4]!==b){n.y=g[b][1]
}n.x=g[b][0]-(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-right");
k=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&h[b][0]===0&&h[b][1]===0&&h[b][2]===0&&h[b][3]<=parseInt(n.width/2,0)-this.get("extraRightOffset")){if(e[4]!==b){n.y=g[b][1]
}n.x=g[b][0]+(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-left");
k=SC.POINTER_LAYOUT.length}}}}}}return n},setupPointer:function(g){var h=this.pointerOffset,f=SC.PickerPane;
if(!h||h.length!==4){if(this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",f.TINY_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",f.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",f.SMALL_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",f.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",f.REGULAR_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",f.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",f.LARGE_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",f.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",f.HUGE_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",f.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break}}else{var e=(g.width<16)?((g.width<4)?9:6):0,b=(g.height<16)?((g.height<4)?9:6):0,c=f.PICKER_POINTER_OFFSET;
var i=[c[0]+e,c[1]-e,c[2]-b,c[3]+b];this.set("pointerOffset",i);this.set("extraRightOffset",f.PICKER_EXTRA_RIGHT_OFFSET)
}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")==SC.PICKER_MENU_POINTER?[3,0,1,2,3]:[0,1,2,3,2])
}},displayProperties:["pointerPosY"],render:function(b,e){var a=arguments.callee.base.apply(this,arguments);
if(b.needsContent){if(this.get("preferType")==SC.PICKER_POINTER||this.get("preferType")==SC.PICKER_MENU_POINTER){b.push('<div class="sc-pointer '+this.get("pointerPos")+'" style="margin-top: '+this.get("pointerPosY")+'px"></div>');
b.addClass(this.get("pointerPos"))}}else{if(this.get("preferType")==SC.PICKER_POINTER||this.get("preferType")==SC.PICKER_MENU_POINTER){var c=this.$(".sc-pointer");
c.attr("class","sc-pointer "+this.get("pointerPos"));c.attr("style","margin-top: "+this.get("pointerPosY")+"px");
b.addClass(this.get("pointerPos"))}}return a},modalPaneDidClick:function(a){var b=this.get("frame");
if(!this.clickInside(b,a)){this.remove()}return YES},mouseDown:function(a){return this.modalPaneDidClick(a)
},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){this.positionPane()
},remove:function(){this._showOverflow();return arguments.callee.base.apply(this,arguments)
},_hideOverflow:function(){var b=SC.$(document.body),a=SC.$(".sc-main"),e=parseInt(a.css("minWidth"),0),f=parseInt(a.css("minHeight"),0),c=SC.RootResponder.responder.get("currentWindowSize");
if(c.width>=e&&c.height>=f){this._previousOverflow=b.css("overflow");b.css("overflow","hidden")
}},_showOverflow:function(){var a=SC.$(document.body);if(this._previousOverflow){a.css("overflow",this._previousOverflow);
this._previousOverflow=null}}});SC.PickerPane.PICKER_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.PICKER_EXTRA_RIGHT_OFFSET=20;SC.PickerPane.TINY_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.SMALL_PICKER_MENU_POINTER_OFFSET=[9,-9,-8,8];
SC.PickerPane.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET=11;SC.PickerPane.REGULAR_PICKER_MENU_POINTER_OFFSET=[9,-9,-12,12];
SC.PickerPane.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET=13;SC.PickerPane.LARGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-16,16];
SC.PickerPane.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=17;SC.PickerPane.HUGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")
}a.addClass(this.get("layoutDirection"))}});sc_require("views/button");sc_require("views/separator");
SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{displayProperties:["title","isEnabled","isSeparator"],classNames:["sc-menu-item"],escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES
}.property("content").cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES
}.property("content.isEnabled").cacheable(),subMenu:function(){var c=this.get("content"),b,a;
if(!c){return null}a=this.get("parentMenu");b=c.get(a.itemSubMenuKey);if(b){if(SC.kindOf(b,SC.MenuPane)){b.set("isModal",NO);
b.set("isSubMenu",YES);b.set("parentMenu",a);return b}else{return SC.MenuPane.create({layout:{width:200},items:b,isModal:NO,isSubMenu:YES,parentMenu:a,controlSize:a.get("controlSize")})
}}return null}.property("content").cacheable(),hasSubMenu:function(){return !!this.get("subMenu")
}.property("subMenu").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.contentDidChange()},render:function(b,i){var c=this.get("content"),a,g,f=this.get("parentMenu"),e=this.get("itemWidth")||f.layout.width,h=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT;
this.set("itemWidth",e);this.set("itemHeight",h);b=b.begin("a").addClass("menu-item");
if(c.get(f.itemSeparatorKey)){b.push('<span class="separator"></span>');b.addClass("disabled")
}else{g=c.get(f.itemIconKey);if(g){this.renderImage(b,g);b.addClass("has-icon")}g=this.get("title");
if(SC.typeOf(g)!==SC.T_STRING){g=g.toString()}this.renderLabel(b,g);if(this.getContentProperty("itemCheckboxKey")){b.push('<div class="checkbox"></div>')
}if(this.get("hasSubMenu")){this.renderBranch(b)}g=this.getContentProperty("itemShortCutKey");
if(g){this.renderShortcut(b,g)}}b=b.end()},renderImage:function(b,e){var a,c;if(e&&SC.ImageView.valueIsUrl(e)){a=e;
c=""}else{c=e;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).attr("src",a).end()
},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)
}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')
},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");
if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");
if(a&&b){b=b.loc()}return b||""}.property("content.title").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");
if(a){return a.get(c.get(b))}},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");
if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")||this.get("hasSubMenu")){return NO
}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()
}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;
this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES
},sendAction:function(){var c=this.getContentProperty("itemActionKey"),e=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;
this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;
e=(e===undefined)?b.get("target"):e;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(e,[b]);
SC.Logger.warn("Support for menu item action functions has been deprecated. Please use target and action.")
}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,e,this)
}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")
}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++
}},mouseDown:function(a){return YES},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");
if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);
c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()
}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)
}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;
if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");
if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);
return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)
},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,e;
if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){e=c.get("previousMenuItem");
if(e){e.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");
if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");
if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES
},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)
},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();
return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");
if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return
}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)
}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");
var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)
},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return
}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)
}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")
}.observes("content"),contentPropertyDidChange:function(h,k){var b=this.get("parentMenu");
if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,j=SC.keys(a),f,g,e,c;
if(k==="*"){for(f=0,g=j.length;f<g;++f){e=j[f];c=a[e];this.notifyPropertyChange(c)
}}else{for(f=0,g=j.length;f<g;++f){e=j[f];if(b.get(e)===k){c=a[e];this.notifyPropertyChange(c)
}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemSeparatorKey:"isSeparator",itemSubMenuKey:"subMenu"};
require("panes/picker");require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],items:[],controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:null,itemSeparatorHeight:null,menuHeight:0,menuHeightPadding:null,submenuOffsetX:null,selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(b,c){var a;
this.beginPropertyChanges();if(b){a=b.isView?b.get("layer"):b}this.set("anchorElement",a);
this.set("anchor",b);if(c){this.set("preferMatrix",c)}this.adjust("height",this.get("menuHeight"));
this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();this.append()
},remove:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);
this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}return arguments.callee.base.apply(this,arguments)
},itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemValueKey:"value",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"separator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",menuItemKeys:"itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemSeparatorKey itemActionKey itemCheckboxKey itemShortCutKey itemHeightKey itemSubMenuKey itemKeyEquivalentKey itemTargetKey".w(),preferType:SC.PICKER_MENU,isModal:YES,_menuView:null,init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.TINY_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.TINY_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.TINY_SUBMENU_OFFSET_X);
break;case SC.SMALL_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.SMALL_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.SMALL_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.SMALL_SUBMENU_OFFSET_X);
break;case SC.REGULAR_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.REGULAR_SUBMENU_OFFSET_X);
break;case SC.LARGE_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.LARGE_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.LARGE_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.LARGE_SUBMENU_OFFSET_X);
break;case SC.HUGE_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.HUGE_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.HUGE_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.HUGE_SUBMENU_OFFSET_X);
break}return arguments.callee.base.apply(this,arguments)},setIfNull:function(a,b){if(this.get(a)===null){this.set(a,b)
}},render:function(a,b){a.addClass(this.get("controlSize"));return arguments.callee.base.apply(this,arguments)
},createChildViews:function(){var b,a,c;b=this.createChildView(SC.MenuScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});
a=this._menuView=SC.View.create();c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});
a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);
a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);
this.parentViewDidChange();this._notifyDidAppendToDocument();this.becomeMenuPane();
return this},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)
}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)
}return this},menuItemViews:function(){var p=[],m=this.get("displayItems"),k=this.get("exampleView"),s,n,q,c,l,b,g,f,i,a,h,e,o,j;
if(!m){return p}c=this.get("itemHeightKey");l=this.get("itemSeparatorKey");b=this.get("itemHeight");
a=this.get("itemKeyEquivalentKey");g=this.get("itemSeparatorHeight");i=Math.floor(this.get("menuHeightPadding")/2);
f=i;e=this.menuItemKeys.map(SC._menu_fetchKeys,this);j=m.get("length");for(o=0;o<j;
o++){s=m[o];q=s.get(c);if(!q){q=s.get(l)?g:b}n=this._menuView.createChildView(k,{layout:{height:q,top:f},contentDisplayProperties:e,content:s,parentMenu:this});
p[o]=n;f+=q;h=s.get(a);if(h){this._keyEquivalents[h]=n}}this.set("menuHeight",f+i);
return p}.property("displayItems").cacheable(),menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");
if(!b){return undefined}return b.objectAt(a)},_keyEquivalents:{},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")
}return this}.property("isSubMenu").cacheable(),windowSizeDidChange:function(b,a){this.remove();
return arguments.callee.base.apply(this,arguments)},displayItems:function(){var e=this.get("items"),c=this.get("localize"),i=this.get("itemHeight"),b,f=[],a,g,h;
if(!e){return null}b=e.get("length");for(a=0;a<b;a++){g=e.objectAt(a);if(!g){continue
}h=SC.typeOf(g);if(h===SC.T_STRING){g=SC.Object.create({title:g,value:g,isEnabled:YES})
}else{if(h===SC.T_HASH){g=SC.Object.create(g)}else{if(h===SC.T_ARRAY){g=this.convertArrayMenuItemToObject(g)
}}}g.contentIndex=a;f.push(g)}return f}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("menuItemViews");
this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))
}.observes("items"),convertArrayMenuItemToObject:function(g){SC.Logger.warn("Support for Array-based menu items has been deprecated.  Please update your menus to use a hash.");
var f,c=SC._menu_fetchKeys,b=SC._menu_fetchItem,i,e=SC.Object.create(),a,h;f=this.menuItemKeys.map(c,this);
e[f[0]]=g[0];e[f[1]]=g[1];e[f[2]]=g[2];e[f[3]]=g[3];e[f[4]]=g[4];e[f[5]]=g[5];e[f[6]]=g[6];
e[f[7]]=g[7];e[f[8]]=g[8];e[f[9]]=g[9];e[f[10]]=g[10];e[f[11]]=g[11];e[f[12]]=g[12];
return e},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)
}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem
}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");
if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)
}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return
}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();
a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))
},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(a){this.set("mouseHasEntered",YES)
},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),e=this.get("menuItemViews"),b,f,a;
if(!c){a=e.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES
}a=b-1}while(a>=0){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);e[a].becomeFirstResponder();
break}a--}return YES},moveDown:function(){var e=this.get("currentMenuItem"),f=this.get("menuItemViews"),b=f.get("length"),c,g,a;
if(!e){a=0}else{c=e.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(f[a].get("isEnabled")){this.set("currentMenuItem",f[a]);
f[a].becomeFirstResponder();break}a++}return YES},insertText:function(b,a){var e=this._timer,c=this._keyBuffer;
if(e){e.invalidate()}e=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});
c=c||"";c+=b.toUpperCase();this.selectMenuItemForString(c);this._keyBuffer=c;return YES
},performKeyEquivalent:function(b){if(!this.get("isVisibleInWindow")){return NO}var a=this._keyEquivalents[b];
if(a){a.performAction(YES);return YES}if(b==="escape"||b==="return"){this.remove();
return YES}return NO},selectMenuItemForString:function(c){var e=this.get("menuItemViews"),g,h,b,a,f;
if(!e){return}f=c.length;a=e.get("length");for(b=0;b<a;b++){g=e.objectAt(b);h=g.get("title");
if(!h){continue}h=h.replace(/ /g,"").substr(0,f).toUpperCase();if(h===c){this.set("currentMenuItem",g);
g.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(a){this.remove();
return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null
}return this.get?this.get(a):this[a]};SC.MenuPane.TINY_MENU_ITEM_HEIGHT=10;SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT=2;
SC.MenuPane.TINY_MENU_HEIGHT_PADDING=2;SC.MenuPane.TINY_SUBMENU_OFFSET_X=0;SC.MenuPane.SMALL_MENU_ITEM_HEIGHT=16;
SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT=7;SC.MenuPane.SMALL_MENU_HEIGHT_PADDING=4;
SC.MenuPane.SMALL_SUBMENU_OFFSET_X=2;SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT=20;SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT=9;
SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING=6;SC.MenuPane.REGULAR_SUBMENU_OFFSET_X=2;
SC.MenuPane.LARGE_MENU_ITEM_HEIGHT=60;SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT=20;
SC.MenuPane.LARGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.LARGE_SUBMENU_OFFSET_X=4;SC.MenuPane.HUGE_MENU_ITEM_HEIGHT=20;
SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.HUGE_MENU_HEIGHT_PADDING=0;
SC.MenuPane.HUGE_SUBMENU_OFFSET_X=0;SC.MenuPane.VERTICAL_OFFSET=23;sc_require("views/button");
SC.SelectButtonView=SC.ButtonView.extend({escapeHTML:YES,objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,iconKey:null,isEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["select-button"],menu:null,itemList:[],itemIdx:null,value:null,checkboxEnabled:YES,separatorPostion:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","objects"],preferMatrix:null,SELECT_BUTTON_SPRITE_WIDTH:28,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,customView:null,customViewClassName:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,supportFocusRing:YES,isContextMenuEnabled:NO,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectButtonView.TINY_OFFSET_X;
case SC.SMALL_CONTROL_SIZE:return SC.SelectButtonView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectButtonView.REGULAR_OFFSET_X;
case SC.LARGE_CONTROL_SIZE:return SC.SelectButtonView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectButtonView.HUGE_OFFSET_X
}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");
b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)
})}return b},render:function(b,f){arguments.callee.base.apply(this,arguments);var c,a,o,s,v,g,u,h,m,p,l,e,j,w,q,n,t,k,i;
c=this.layout.width;if(f&&c){this.adjust({width:c-this.SELECT_BUTTON_SPRITE_WIDTH})
}a=this.get("objects");a=this.sortObjects(a);o=a.length;s=this.get("nameKey");v=this.get("iconKey");
g=this.get("valueKey");i=this.get("isEnabledKey");u=this.get("checkboxEnabled");h=this.get("value");
m=this.get("localize");p=this.get("separatorPostion");l=[];e=YES;j=0;a.forEach(function(x){if(x){w=s?(x.get?x.get(s):x[s]):x.toString();
w=m?w.loc():w;q=v?(x.get?x.get(v):x[v]):null;if(SC.none(x[v])){q=null}n=(g)?(x.get?x.get(g):x[g]):x;
if(!SC.none(h)&&!SC.none(n)){if(h===n){this.set("title",w);this.set("icon",q)}}if(n===this.get("value")){this.set("itemIdx",j);
e=!u?NO:YES}else{e=NO}k=(i)?(x.get?x.get(i):x[i]):x;if(NO!==k){k=YES}if(j===0){this._defaultVal=n;
this._defaultTitle=w;this._defaultIcon=q}var y=SC.Object.create({title:w,icon:q,value:n,isEnabled:k,checkbox:e,target:this,action:"displaySelectedItem"});
l.push(y)}j+=1;if(p&&j===(o-p)){var z=SC.Object.create({separator:YES});l.push(z)
}this.set("itemList",l)},this);if(f){this.invokeLast(function(){var x=this.get("value");
if(SC.none(x)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);
this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this.itemIdx)
},_action:function(p){var j,a,m,n,v,s,C,f,B,c,q,w,t,z,g,h,o,b,A,i,l,D,k;j=this.$(".sc-button-label")[0];
D=SC.SelectButtonView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:D+=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;
break;case SC.SMALL_CONTROL_SIZE:D+=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;
break;case SC.REGULAR_CONTROL_SIZE:D+=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;
break;case SC.LARGE_CONTROL_SIZE:D+=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;
break;case SC.HUGE_CONTROL_SIZE:D+=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;
break}}a=this.get("layer").offsetWidth+D;m=j.scrollWidth;n=this.get("lastMenuWidth");
if(m){v=j.offsetWidth;if(m&&v){a=a+m-v}}if(!n||(a>n)){n=a}s=this.get("itemList");
var x=this.get("customViewClassName"),u=this.get("customViewMenuOffsetWidth"),e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";
e=x?(e+" "+x):e;i=(this.get("customView")||SC.MenuItemView).create();l=i.get("escapeHTML");
var k=document.body;for(q=0,A=s.length;q<A;++q){B=s.objectAt(q);c=document.createElement("div");
c.style.cssText="top:-10000px; left: -10000px;  position: absolute;";c.className=e;
c.innerHTML=l?SC.RenderContext.escapeHTML(B.title):B.title;k.appendChild(c);C=c.offsetWidth+u;
if(!f||(C>f)){f=C}k.removeChild(c)}f=(f>n)?f:n;var y=SC.RootResponder.responder.get("currentWindowSize").width;
if(f>y){f=(y-25)}this.set("lastMenuWidth",n);w=this.get("value");t=this.get("itemList");
z=this.get("controlSize");h=this.get("customView");o=h?h:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:t,exampleView:o,isEnabled:YES,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:f},controlSize:z,itemWidth:n,performKeyEquivalent:function(F,E){switch(F){case"tab":case"shift_tab":return YES;
default:return arguments.callee.base.apply(this,arguments)}}});if(!b){return NO}b.popup(this,this.preferMatrix);
this.set("menu",b);h=b.menuItemViewForContentIndex(this.get("itemIdx"));b.set("currentMenuItem",h);
if(h){h.becomeFirstResponder()}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=this.getPath("menu.selectedItem");
if(!b){return NO}this.set("value",b.get("value"));this.set("title",b.get("title"));
this.set("itemIdx",b.get("contentIndex"));return YES},changeSelectButtonPreferMatrix:function(){var c=0,h=0;
switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectButtonView.TINY_OFFSET_Y;
h=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectButtonView.SMALL_OFFSET_Y;
h=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectButtonView.REGULAR_OFFSET_Y;
h=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectButtonView.LARGE_OFFSET_Y;
h=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectButtonView.HUGE_OFFSET_Y;
h=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var f=c,b=this.get("itemIdx"),a=this.get("leftAlign"),g,e;
if(this.get("isDefaultPosition")){g=[1,0,3];this.set("preferMatrix",g)}else{if(b){f=b*h+c
}e=[a,-f,2];this.set("preferMatrix",e)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();
this.invokeLast(this._recordMouseDownTimestamp);return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()
},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("menu"),g=SC.platform.touch,a;
if(f){a=f.getPath("rootMenu.targetMenuItem");if(a&&a.get("mouseHasEntered")){if(!a.performAction()){f.remove()
}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){if(!f.get("mouseHasEntered")&&!this.get("isDefaultPosition")){a=f.get("currentMenuItem");
if(a&&!a.performAction()){f.remove()}}else{f.remove()}}}}this._isMouseDown=NO;return YES
},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES
}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()
}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)
},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),_button_isSelectedDidChange:function(){}.observes("isSelected"),didAppendToDocument:function(){}});
SC.SelectButtonView.TINY_OFFSET_X=0;SC.SelectButtonView.TINY_OFFSET_Y=0;SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET=0;
SC.SelectButtonView.SMALL_OFFSET_X=-18;SC.SelectButtonView.SMALL_OFFSET_Y=3;SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;
SC.SelectButtonView.REGULAR_OFFSET_X=-17;SC.SelectButtonView.REGULAR_OFFSET_Y=3;SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;
SC.SelectButtonView.LARGE_OFFSET_X=-17;SC.SelectButtonView.LARGE_OFFSET_Y=6;SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;
SC.SelectButtonView.HUGE_OFFSET_X=0;SC.SelectButtonView.HUGE_OFFSET_Y=0;SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;
SC.SelectButtonView.MENU_WIDTH_OFFSET=-2;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:"sc-sheet",modalPane:SC.ModalPane,transitionDuration:200,_state:"NO_VIEW",init:function(){arguments.callee.base.apply(this,arguments);
if(SC.Animatable){SC.SheetPane.ANIMATABLE_AVAILABLE=YES;this.mixin(SC.Animatable);
if(!this.transitions){this.transitions={}}if(!this.transitions.top){this.transitions.top={duration:this.transitionDuration===200?0.3:this.transitionDuration/1000,action:"_complete",target:this}
}}},append:function(){var a=this.get("layout");if(!a.height||!a.top){a=SC.View.convertLayoutToAnchoredLayout(a,this.computeParentDimensions())
}a.top=-1*a.height;if(this.disableAnimation){this.disableAnimation()}this.adjust(a);
this.updateLayout();if(this.enableAnimation){this.enableAnimation()}return arguments.callee.base.apply(this,arguments)
},remove:function(){var b=this,a=arguments;this.invokeLater(function(){a.callee.base.apply(b,a)
},this.transitionDuration);this.slideUp();return this},paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);
this.slideDown();return a},slideDown:function(){this._state=SC.SheetPane.ANIMATING;
this._direction=SC.SheetPane.SLIDE_DOWN;if(SC.SheetPane.ANIMATABLE_AVAILABLE){this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_OUT;
this.adjust("top",0)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this.tick()}},slideUp:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_UP;
if(SC.SheetPane.ANIMATABLE_AVAILABLE){var a=this.get("layout");this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_IN;
this.adjust("top",-1*a.height)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this.tick()}},_complete:function(){var a=this._direction;if(a===SC.SheetPane.SLIDE_DOWN){if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",0)
}this.adjust({centerX:0,left:null});if(SC.browser.mozilla){this.parentViewDidChange()
}}else{var b=this.get("layout");if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",-1*b.height)
}}this._state=SC.SheetPane.READY;this.updateLayout()},blurTo:function(a){this.setFirstResponder("")
},tick:function(){this._timer=null;var b=Date.now();var f=(b-this._start)/(this._end-this._start),h=this,a=this._direction,c=this.get("layout"),e,g;
if(f<0){f=0}if(f>=1){this._complete();return this}g=Math.floor(c.height*f);if(a==SC.SheetPane.SLIDE_DOWN){h.adjust("top",0-(c.height-g))
}else{if(a==SC.SheetPane.SLIDE_UP){h.adjust("top",0-g)}}this._timer=this.invokeLater(this.tick,20);
h.updateLayout();return this}});SC.SheetPane.mixin({ANIMATABLE_AVAILABLE:NO,NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",SLIDE_DOWN:"SLIDEDOWN",SLIDE_UP:"SLIDEUP"});
SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=7;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;
SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,slideBack:YES,mouseDownEvent:null,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]
}var e=this.data;if(e){var a=[];for(var b in e){if(e.hasOwnProperty(b)){a.push(b)
}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]
}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)
},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)
}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)==SC.T_FUNCTION){return b.dragDataForType(this,a)
}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){this._createGhostView();
var i=this.event;var f={x:i.pageX,y:i.pageY};this.set("location",f);var b=this._getDragView();
var j=b.get("parentView");var g=j?j.convertFrameToView(b.get("frame"),null):b.get("frame");
if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)
}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(f.x-g.x),y:(f.y-g.y)}
}if(!this._ghostViewHidden){this._positionGhostView(i)}this.ghostView.rootResponder.dragDidStart(this);
var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,f)}var c=this._dropTargets();
for(var h=0,e=c.length;h<e;h++){c[h].tryToPerform("dragStarted",this,i)}},cancelDrag:function(){var b=this._lastTarget,c=this.get("location");
if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}this._destroyGhostView();
if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)
}this._dragViewWasVisible=null}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,c,SC.DRAG_NONE)
}this._lastTarget=null;this._dragInProgress=NO},mouseDragged:function(a){var b=this._autoscroll(a);
var g=this.get("location");if(!b&&(a.pageX===g.x)&&(a.pageY===g.y)){return}g={x:a.pageX,y:a.pageY};
this.set("location",g);this._lastMouseDraggedEvent=a;var e=this.source;var c=this._lastTarget;
var f=this._findDropTarget(a);var h=SC.DRAG_NONE;while(f&&(f!==c)&&(h===SC.DRAG_NONE)){if(f&&e&&e.dragSourceOperationMaskFor){h=e.dragSourceOperationMaskFor(this,f)
}else{h=SC.DRAG_ANY}if((h!==SC.DRAG_NONE)&&f&&f.computeDragOperations){h=h&f.computeDragOperations(this,a,h)
}else{h=SC.DRAG_NONE}this.allowedDragOperations=h;if(h===SC.DRAG_NONE){f=this._findNextDropTarget(f)
}}if(f!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(f){if(f.dragEntered){f.dragEntered(this,a)
}if(f.dragUpdated){f.dragUpdated(this,a)}}this._lastTarget=f}else{if(f&&f.dragUpdated){f.dragUpdated(this,a)
}}if(e&&e.dragDidMove){e.dragDidMove(this,g)}if(!this._ghostViewHidden){this._positionGhostView(a)
}},mouseUp:function(m){var h={x:m.pageX,y:m.pageY},i=this._lastTarget,f=this.allowedDragOperations;
this.set("location",h);try{if(i&&i.acceptDragOperation&&i.acceptDragOperation(this,f)){f=i.performDragOperation?i.performDragOperation(this,f):SC.DRAG_NONE
}else{f=SC.DRAG_NONE}}catch(j){console.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(j))
}try{if(i&&i.dragExited){i.dragExited(this,m)}}catch(k){console.error("Exception in SC.Drag.mouseUp(target.dragExited): %@".fmt(k))
}var c=this._dropTargets();for(var l=0,g=c.length;l<g;l++){try{c[l].tryToPerform("dragEnded",this,m)
}catch(b){console.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(c[l],b))
}}this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)
}this._dragViewWasVisible=null}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,h,f)
}this._lastTarget=null;this._dragInProgress=NO},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw"Source can't be used as dragView, because it's not a view."
}this.dragView=this.source}return this.dragView},_createGhostView:function(){var c=this,b=this._getDragView(),e=b.get("frame"),a;
a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:{top:e.y,left:e.x,width:e.width,height:e.height},owner:this,didCreateLayer:function(){if(b){var f=b.get("layer");
if(f){f=f.cloneNode(true);f.style.top="0px";f.style.left="0px";this.get("layer").appendChild(f)
}}}});a.append()},_positionGhostView:function(a){var c=this.get("location");c.x-=this.ghostOffset.x;
c.y-=this.ghostOffset.y;var b=this.ghostView;if(b){b.adjust({top:c.y,left:c.x});b.invokeOnce("updateLayout")
}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();
this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;
this._createGhostView()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();
this.ghostView=null;this._ghostViewHidden=NO}},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets
}var b=[];var e=SC.Drag._dropTargets;for(var c in e){if(e.hasOwnProperty(c)){b.push(e[c])
}}var g={};var f=SC.Drag._dropTargets;var a=function(h){if(!h){return 0}var j=SC.guidFor(h);
var i=g[j];if(!i){i=1;while(h=h.get("parentView")){if(f[SC.guidFor(h)]!==undefined){i++
}}g[j]=i}return i};b.sort(function(i,h){if(i===h){return 0}i=a(i);h=a(h);return(i>h)?-1:1
});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var h={x:c.pageX,y:c.pageY};
var f,g;var e=this._dropTargets();for(var b=0,a=e.length;b<a;b++){f=e[b];if(!f.get("isVisibleInWindow")){continue
}g=f.convertFrameToView(f.get("clippingFrame"),null);if(SC.pointInRect(h,g)){return f
}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a
}}return null},_autoscroll:function(m){if(!m){m=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO
}var h=m?{x:m.pageX,y:m.pageY}:this.get("location"),i=this._findScrollableView(h),n=null,l,c,e,j,b,a,g;
while(i&&!n){l=i.get("canScrollVertical")?1:0;c=i.get("canScrollHorizontal")?1:0;
if(l||c){a=i.get("containerView");if(a){g=i.convertFrameToView(a.get("frame"),null)
}else{l=c=0}}if(l){j=SC.maxY(g);e=j-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.y>=e&&h.y<=j){l=1
}else{e=SC.minY(g);j=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.y>=e&&h.y<=j){l=-1}else{l=0
}}}if(c){j=SC.maxX(g);e=j-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.x>=e&&h.x<=j){c=1
}else{e=SC.minX(g);j=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.x>=e&&h.x<=j){c=-1}else{c=0
}}}if(l||c){n=i}else{i=this._findNextScrollableView(i)}}if(n&&(this._lastScrollableView===n)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;
this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=n;this._horizontalScrollAmount=15;
this._verticalScrollAmount=15;this._hotzoneStartTime=(n)?Date.now():null;c=l=0}if(n&&(c||l)){var k={x:c*this._horizontalScrollAmount,y:l*this._verticalScrollAmount};
n.scrollBy(k)}if(n){if(m){this._lastAutoscrollEvent={pageX:m.pageX,pageY:m.pageY}
}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;
return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView
}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])
}}a=a.sort(function(g,e){var f=g;while(f=f.get("parentView")){if(e==f){return -1}}return 1
});this._cachedScrollableView=a;return a},_findScrollableView:function(g){var c=this._scrollableViews(),b=c?c.length:0,e,f,a;
for(a=0;a<b;a++){e=c[a];if(!e.get("isVisibleInWindow")){continue}f=e.convertFrameToView(e.get("clippingFrame"),null);
if(SC.pointInRect(g,f)){return e}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;
while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);
a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a
},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a
},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});
SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};
SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};
require("core");SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null
}.property("undoStack"),redoActionName:function(){return this.redoStack?this.redoStack.name:null
}.property("redoStack"),canUndo:function(){return this.undoStack!=null}.property("undoStack"),canRedo:function(){return this.redoStack!=null
}.property("redoStack"),undo:function(){this._undoOrRedo("undoStack","isUndoing")
},redo:function(){this._undoOrRedo("redoStack","isRedoing")},isUndoing:false,isRedoing:false,groupingLevel:0,registerUndo:function(b,a){this.beginUndoGroup(a);
this._activeGroup.actions.push(b);this.endUndoGroup(a)},beginUndoGroup:function(b){if(this._activeGroup){this.groupingLevel++
}else{var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,actions:[],prev:this.get(a)};
this.set(a,this._activeGroup);this.groupingLevel=1}},endUndoGroup:function(a){if(!this._activeGroup){raise("endUndoGroup() called outside group.")
}if(this.groupingLevel>1){this.groupingLevel--}else{this._activeGroup=null;this.groupingLevel=0
}this.propertyDidChange(this.isUndoing?"redoStack":"undoStack")},setActionName:function(a){if(!this._activeGroup){raise("setActionName() called outside group.")
}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(a,c){if(this._activeGroup){return false
}if(this.get(a)==null){return true}this.set(c,true);var f=this.get(a);this.set(a,f.prev);
var b;var e=f.actions.length>1;if(e){this.beginUndoGroup(f.name)}while(b=f.actions.pop()){b()
}if(e){this.endUndoGroup(f.name)}this.set(c,false)}});SC.CheckboxView=SC.ButtonView.extend(SC.StaticLayout,SC.Button,{classNames:["sc-checkbox-view"],tagName:"label",needsEllipsis:NO,render:function(b,a){var c,e,j=this.get("value"),i=j===SC.MIXED_MODE?"mixed":(j===this.get("toggleOnValue")?"true":"false");
if(a){var g=SC.BLANK_IMAGE_URL,f=this.get("isEnabled")?"":'disabled="disabled"',h=SC.guidFor(this);
b.attr("role","checkbox");c=this._field_currentDisplayTitle=this.get("displayTitle");
if(SC.browser.msie){b.attr("for",h)}b.push('<span class="button" ></span>');if(this.get("needsEllipsis")){b.push('<span class="label ellipsis">',c,"</span>")
}else{b.push('<span class="label">',c,"</span>")}b.attr("name",h)}else{c=this.get("displayTitle");
if(c!==this._field_currentDisplayTitle){this._field_currentDisplayTitle=c;this.$("span.label").text(c)
}}b.attr("aria-checked",i)},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;if(a){a.allowDefault()}return YES
},mouseUp:function(a){if(!this.get("isEnabled")||(a&&a.target&&!this.$().within(a.target))){return YES
}var b=this.get("value");if(b===this.get("toggleOnValue")){this.$().attr("aria-checked","false");
this.set("value",this.get("toggleOffValue"))}else{this.$().attr("aria-checked","true");
this.set("value",this.get("toggleOnValue"))}this.set("isActive",NO);this._isMouseDown=NO;
return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";
SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.Control,{classNames:["sc-list-item-view"],content:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,contentIconKey:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,isEditing:NO,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")
}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");
return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),render:function(c,a){var g=this.get("content"),n=this.displayDelegate,b=this.get("outlineLevel"),f=this.get("outlineIndent"),m,k,j,o=[];
o.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));
j=c.begin("div").addClass("sc-outline");if(b>=0&&f>0){j.addStyle("left",f*(b+1))}k=this.get("disclosureState");
if(k!==SC.LEAF_NODE){this.renderDisclosure(j,k);o.push("has-disclosure")}m=this.getDelegateProperty("contentCheckboxKey",n);
if(m){k=g?(g.get?g.get(m):g[m]):NO;this.renderCheckbox(j,k);o.push("has-checkbox")
}if(this.getDelegateProperty("hasContentIcon",n)){m=this.getDelegateProperty("contentIconKey",n);
k=(m&&g)?(g.get?g.get(m):g[m]):null;this.renderIcon(j,k);o.push("has-icon")}m=this.getDelegateProperty("contentValueKey",n);
k=(m&&g)?(g.get?g.get(m):g[m]):g;if(k&&SC.typeOf(k)!==SC.T_STRING){k=k.toString()
}if(this.get("escapeHTML")){k=SC.RenderContext.escapeHTML(k)}this.renderLabel(j,k);
if(this.getDelegateProperty("hasContentRightIcon",n)){m=this.getDelegateProperty("contentRightIconKey",n);
k=(m&&g)?(g.get?g.get(m):g[m]):null;this.renderRightIcon(j,k);o.push("has-right-icon")
}m=this.getDelegateProperty("contentUnreadCountKey",n);k=(m&&g)?(g.get?g.get(m):g[m]):null;
if(!SC.none(k)&&(k!==0)){this.renderCount(j,k);var e=["zero","one","two","three","four","five"];
var l=k.toString().length;var i=e.length;var h=(l<i)?e[l]:e[i-1];o.push("has-count "+h+"-digit")
}m=this.getDelegateProperty("listItemActionProperty",n);k=(m&&g)?(g.get?g.get(m):g[m]):null;
if(k){this.renderAction(j,k);o.push("has-action")}if(this.getDelegateProperty("hasContentBranch",n)){m=this.getDelegateProperty("contentIsBranchKey",n);
k=(m&&g)?(g.get?g.get(m):g[m]):NO;this.renderBranch(j,k);o.push("has-branch")}c.addClass(o);
c=j.end()},renderDisclosure:function(f,g){var e=(g===SC.BRANCH_OPEN)?"open":"closed",a=this._scli_disclosureHtml,c,b;
if(!a){a=this.constructor.prototype._scli_disclosureHtml={}}c=a[e];if(!c){c=a[e]='<img src="'+SC.BLANK_IMAGE_URL+'" class="disclosure button '+e+'" />'
}f.push(c)},renderCheckbox:function(g,i){var f=(i===SC.MIXED_STATE)?"mixed":i?"sel":"nosel",b=this._scli_checkboxHtml,h=this.get("contentIsEditable")&&this.get("isEnabled"),e,c,a=[];
if(!h){f=SC.keyFor("disabled",f)}if(!b){b=this.constructor.prototype._scli_checkboxHtml={}
}e=b[f];if(!e){c=SC.RenderContext("div").attr("role","button").classNames(SC.clone(SC.CheckboxView.prototype.classNames));
if(i===SC.MIXED_STATE){a.push("mixed")}else{if(i){a.push("sel")}}if(!h){a.push("disabled")
}c.addClass(a);c.push('<span class="button"></span>');e=b[f]=c.join()}g.push(e)},renderIcon:function(c,f){var b=null,e=null,a=[];
if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push(e,"icon");
c.begin("img").addClass(a).attr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")
},$label:function(){return this.$("label")},renderRightIcon:function(c,f){var b=null,e=null,a=[];
if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push("right-icon",e);
c.begin("img").addClass(a).attr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")
},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')
},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");
c.begin("span").addClass(a).push("&nbsp;").end()},_isInsideElementWithClassName:function(f,a){var c=this.get("layer");
if(!c){return NO}var e=SC.$(a.target);var b=NO,g;while(!b&&e.length>0&&(e[0]!==c)){if(e.hasClass(f)){b=YES
}e=e.parent()}e=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;
var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)
},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO
}return this._isInsideElementWithClassName("disclosure",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;
var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);
return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(!this.get("contentIsEditable")){return NO
}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;
this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();
this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();
this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO
},mouseUp:function(i){var c=NO,j,e,b,a,h,g;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(i)){j=this.displayDelegate;
e=this.getDelegateProperty("contentCheckboxKey",j);b=this.get("content");if(b&&b.get){var f=b.get(e);
f=(f===SC.MIXED_STATE)?YES:!f;b.set(e,f);this.displayDidChange()}}this._removeCheckboxActiveState();
c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(i)){a=this.get("disclosureState");
h=this.get("contentIndex");g=(!SC.none(h))?SC.IndexSet.create(h):null;j=this.get("displayDelegate");
if(a===SC.BRANCH_OPEN){if(g&&j&&j.collapse){j.collapse(g)}else{this.set("disclosureState",SC.BRANCH_CLOSED)
}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(g&&j&&j.expand){j.expand(g)
}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();
c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES
}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;
this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();
this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();
this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();
this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();
this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();
this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();
this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)
},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)
},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){var a=this.get("isEnabled");
this.$(".sc-checkbox-view").setClass("active",a)},_removeCheckboxActiveState:function(){this.$(".sc-checkbox-view").removeClass("active")
},_addDisclosureActiveState:function(){var a=this.get("isEnabled");this.$("img.disclosure").setClass("active",a)
},_removeDisclosureActiveState:function(){this.$("img.disclosure").removeClass("active")
},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)
},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active")
},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);
if(!c){return NO}var f=this.$label()[0];if(!f){return NO}var g=b.target,e=this.get("layer");
while(g&&(g!==e)&&(g!==window)){if(g===f){return YES}g=g.parentNode}return NO},beginEditing:function(){if(this.get("isEditing")){return YES
}return this._beginEditing(YES)},_beginEditing:function(x){var q=this.get("content"),i=this.get("displayDelegate"),h=this.getDelegateProperty("contentValueKey",i),j=this.get("parentView"),w=j?j.get("frame"):null,a=this.$label(),e=this.get("validator"),t,l,g,m,b,o,c,p,u,s,y;
if(x&&this.scrollToVisible()){var k=this.get("owner"),n=this.get("contentIndex");
this.invokeLast(function(){var f=k.itemViewForContentIndex(n);if(f&&f._beginEditing){f._beginEditing(NO)
}});return YES}if(!j||!a||a.get("length")===0){return NO}l=(h&&q&&q.get)?q.get(h):null;
t=this.computeFrameWithParentFrame(null);g=SC.viewportOffset(a[0]);m=a.css("lineHeight");
b=a.css("fontSize");o=this.$().css("top");if(o){o=parseInt(o.substring(0,o.length-2),0)
}else{o=0}c=m;u=0;if(b&&c){s=b*1.5;if(s<c){a.css({lineHeight:"1.5"});u=(c-s)/2}else{m=null
}}t.x=g.x;t.y=g.y+o+u;t.height=a[0].offsetHeight;t.width=a[0].offsetWidth;p=this.get("escapeHTML");
y=SC.InlineTextFieldView.beginEditing({frame:t,exampleElement:a,delegate:this,value:l,multiline:NO,isCollection:YES,validator:e,escapeHTML:p});
if(m){a.css({lineHeight:m})}return y},commitEditing:function(){if(!this.get("isEditing")){return YES
}return SC.InlineTextFieldView.commitEditing()},discardEditing:function(){if(!this.get("isEditing")){return YES
}return SC.InlineTextFieldView.discardEditing()},inlineEditorWillBeginEditing:function(a){this.set("isEditing",YES)
},inlineEditorDidBeginEditing:function(b){var a=this.$label();this._oldOpacity=a.css("opacity");
a.css("opacity",0)},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorShouldBeginEditing:function(a,b){return YES
},inlineEditorShouldEndEditing:function(a,b){return YES},inlineEditorDidEndEditing:function(c,f){this.set("isEditing",NO);
var e=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);
if(b&&e&&e.set){e.set(b,f)}this.displayDidChange()}});sc_require("mixins/collection_view_delegate");
sc_require("views/list_item");SC.DRAG_REORDER=16;SC.HORIZONTAL_ORIENTATION="horizontal";
SC.VERTICAL_ORIENTATION="vertical";SC.BENCHMARK_RELOAD=NO;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){return this.computeNowShowing()
}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.ListItemView,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,computeLayout:function(){return null
},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()
}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(){var c=this.contentIndexesInRect(this.get("clippingFrame"));
if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");
if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");
return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");
return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))
}.property("contentDelegate","content").cacheable(),contentRangeDidChange:function(e,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");
this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var e=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");
if(!c){return}if(a){c.updateRangeObserver(a,e)}else{var b=this.contentRangeDidChange;
a=c.addRangeObserver(e,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;
if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");
this.set("length",a?a.get("length"):0)},_cv_contentDidChange:function(){var b=this.get("content"),a=this.contentLengthDidChange;
if(b===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,a)
}this._content=b;if(b){b.addObserver("length",this,a)}this.contentLengthDidChange();
this.contentRangeDidChange(b,null,"[]",null)}.observes("content"),_invalidIndexes:NO,reload:function(a){var b=this._invalidIndexes;
if(a&&b!==YES){if(b){b.add(a)}else{b=this._invalidIndexes=a.clone()}}else{this._invalidIndexes=YES
}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this
},reloadIfNeeded:function(){var z=this._invalidIndexes;if(!z||!this.get("isVisibleInWindow")){return this
}this._invalidIndexes=NO;var w=this.get("content"),x,y,o,B=this.computeLayout(),A=SC.BENCHMARK_RELOAD,c=this.get("nowShowing"),C=this._sc_itemViews,p=this.get("containerView")||this,a,t,v,u,m,q,j,s,f,n,l,D,e,b,h,k,g;
if(z.isIndexSet&&z.contains(c)){z=YES}if(this.willReload){this.willReload(z===YES?null:z)
}a=this.get("exampleView");v=a?a.isReusableInCollections:NO;t=this.get("groupExampleView");
u=t?t.isReusableInCollections:NO;if(z.isIndexSet){if(A){SC.Benchmark.start(A="%@#reloadIfNeeded (Partial)".fmt(this),YES)
}q=[];j=[];s=[];z.forEach(function(i){o=C?C[i]:null;if(c.contains(i)){if(o&&o.parentView===p){j.push(i)
}else{s.push(i)}}else{if(o&&o.parentView===p){q.push(i)}}},this);for(x=0,y=q.length;
x<y;++x){n=q[x];o=C?C[n]:null;delete C[n];h=this.get("contentDelegate");k=this.get("_contentGroupIndexes");
g=k&&k.contains(n);if(g){g=h.contentIndexIsGroup(this,w,n)}m=g?u:v;if(m){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;
b.push(o);o.destroyLayer()}D=o.get("layer");if(D&&D.parentNode){D.parentNode.removeChild(D)
}p.removeChild(o);if(!m){o.destroy()}}for(x=0,y=j.length;x<y;++x){n=j[x];o=C?C[n]:null;
l=this.itemViewForContentIndex(n,YES);o.destroyLayer();p.replaceChild(l,o)}for(x=0,y=s.length;
x<y;++x){n=s[x];l=this.itemViewForContentIndex(n,YES);p.insertBefore(l,null)}if(A){SC.Benchmark.end(A)
}}else{if(A){SC.Benchmark.start(A="%@#reloadIfNeeded (Full)".fmt(this),YES)}if(C){C.length=0
}f=p.get("childViews");if(f){f=f.copy()}p.beginPropertyChanges();if(this.willRemoveAllChildren){this.willRemoveAllChildren()
}p.destroyLayer().removeAllChildren();if(f){for(x=0,y=f.length;x<y;++x){l=f[x];g=l.get("isGroupView");
m=g?u:v;if(m){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(l);l.destroyLayer()
}else{l.destroy()}}}f=[];c.forEach(function(i){f.push(this.itemViewForContentIndex(i,YES))
},this);p.set("childViews",f);p.replaceLayer();p.endPropertyChanges();if(A){SC.Benchmark.end(A)
}}if(B){this.adjust(B)}if(this.didReload){this.didReload(z===YES?null:z)}return this
},displayProperties:"isFirstResponder isEnabled isActive".w(),render:function(a,b){a.setClass("focus",this.get("isFirstResponder"));
a.setClass("disabled",!this.get("isEnabled"));a.setClass("active",this.get("isActive"));
return arguments.callee.base.apply(this,arguments)},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:"sc-collection-item".w(),_GROUP_COLLECTION_CLASS_NAMES:"sc-collection-item sc-group-item".w(),_VIEW_POOL:null,_GROUP_VIEW_POOL:null,itemViewForContentIndex:function(m,a){var x;
var w=this._sc_itemViews;if(!w){w=this._sc_itemViews=[]}else{if(!a&&(x=w[m])){return x
}}var o=this.get("content"),q=o.objectAt(m),i=this.get("contentDelegate"),k=this.get("_contentGroupIndexes"),j=NO,y,l,s,g,t,e,b,c,v,h,f,p,u;
j=k&&k.contains(m);if(j){j=i.contentIndexIsGroup(this,o,m)}if(j){y=this.get("contentGroupExampleViewKey");
if(y&&q){l=q.get(y)}if(!l){l=this.get("groupExampleView")||this.get("exampleView")
}t="_GROUP_VIEW_POOL"}else{y=this.get("contentExampleViewKey");if(y&&q){l=q.get(y)
}if(!l){l=this.get("exampleView")}t="_VIEW_POOL"}c=this.get("containerView")||this;
g=this.layerIdFor(m);v=i.contentIndexIsEnabled(this,o,m);h=i.contentIndexIsSelected(this,o,m);
f=i.contentIndexOutlineLevel(this,o,m);p=i.contentIndexDisclosureState(this,o,m);
u=this.isVisibleInWindow;s=this.layoutForContentIndex(m);if(l&&l.isReusableInCollections){e=this[t];
if(!e){e=this[t]=[]}if(e.length>0){x=e.pop();b=x.prepareForReuse;if(b){b.call(x)}x.beginPropertyChanges();
x.set("contentIndex",m);x.set("layerId",g);x.set("isEnabled",v);x.set("isSelected",h);
x.set("outlineLevel",f);x.set("disclosureState",p);x.set("isVisibleInWindow",u);x.set("parentView",c);
SC.View.views[g]=x;if(s){x.set("layout",s)}else{x.set("layout",l.prototype.layout)
}x.set("content",q);x.endPropertyChanges()}}if(!x){var n=this._TMP_ATTRS;n.contentIndex=m;
n.content=q;n.owner=n.displayDelegate=this;n.parentView=c;n.page=this.page;n.layerId=g;
n.isEnabled=v;n.isSelected=h;n.outlineLevel=f;n.disclosureState=p;n.isGroupView=j;
n.isVisibleInWindow=u;if(j){n.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{n.classNames=this._COLLECTION_CLASS_NAMES
}if(s){n.layout=s}else{delete n.layout}x=this.createItemView(l,m,n)}w[m]=x;return x
},itemViewForContentObject:function(a){return this.itemViewForContentIndex(this.get("content").indexOf(a))
},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;
b[0]=SC.guidFor(this);b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null
}var b=this._baseLayerId;if(!b){b=this._baseLayerId=SC.guidFor(this)+"-"}if((c.length<=b.length)||(c.indexOf(b)!==0)){return null
}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(k){var e=this.getPath("pane.rootResponder");
if(!e){return null}var c=SC.guidFor(this)+"-",a=c.length,f=k.target,h=this.get("layer"),g=null,b,j,i;
while(f&&f!==document&&f!==h){b=f?SC.$(f).attr("id"):null;if(b&&(g=this.contentIndexForLayerId(b))!==null){break
}f=f.parentNode}if(g===null||(f===h)){f=h=null;return null}if(g>=this.get("length")){throw"layout for item view %@ was found when item view does not exist (%@)".fmt(b,this)
}return this.itemViewForContentIndex(g)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");
b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,e)
}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");
b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,e)
}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;
if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)
}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),e;
this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)
}if(c&&b){e=c.without(b).add(b.without(c))}else{e=c||b}if(e&&e.get("length")>0){this.reloadSelectionIndexes(e)
}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;
if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES
}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)
}return this},reloadSelectionIndexesIfNeeded:function(){var f=this._invalidSelection;
if(!f||!this.get("isVisibleInWindow")){return this}var e=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");
this._invalidSelection=NO;if(b===YES||!e){return this}if(f===YES){f=e}if(b&&b.isIndexSet){f=f.without(b)
}f.forEach(function(g){if(!e.contains(g)){return}var h=this.itemViewForContentIndex(g,NO);
if(h){h.set("isSelected",c?c.contains(a,g):NO)}},this);return this},select:function(c,g){var e=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),f;
if(!this.get("isSelectable")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)
}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,g);
if(!c||c.get("length")===0){return this}}else{c=null}if(g&&(f=this.get("selection"))){f=f.copy()
}else{f=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1){f.addObject(e.objectAt(c.get("firstObject")))
}else{f.add(e,c)}}f=a.collectionViewSelectionForProposedSelection(this,f);if(!f){f=SC.SelectionSet.create()
}this._selectionAnchor=null;this.set("selection",f.freeze());return this},deselect:function(b){var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");
if(!this.get("isSelectable")){return this}if(!e||e.get("length")===0){return this
}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);
if(!b||b.get("length")===0){return this}e=e.copy().remove(c,b);e=a.collectionViewSelectionForProposedSelection(this,e);
if(!e){e=SC.SelectionSet.create()}this.set("selection",e.freeze());return this},_findNextSelectableItemFromIndex:function(i,a){var c=this.get("length"),e=SC.IndexSet.create(),f=this.get("content"),j=this.get("selectionDelegate"),h=this.get("_contentGroupIndexes"),g,b;
if(!h&&(j.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return i
}while(i<c){if(!h||!h.contains(i)){e.add(i);g=j.collectionViewShouldSelectIndexes(this,e);
if(g&&g.get("length")>=1){return i}e.remove(i)}i++}if(a===undefined){b=this.get("selection");
a=b?b.get("max"):-1}return a},_findPreviousSelectableItemFromIndex:function(b,i){var c=SC.IndexSet.create(),g=this.get("content"),a=this.get("selectionDelegate"),f=this.get("_contentGroupIndexes"),e;
if(SC.none(b)){b=-1}if(!f&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b
}while(b>=0){if(!f||!f.contains(b)){c.add(b);e=a.collectionViewShouldSelectIndexes(this,c);
if(e&&e.get("length")>=1){return b}c.remove(b)}b--}if(i===undefined){var h=this.get("selection");
i=h?h.get("min"):-1}if(SC.none(i)){i=-1}return i},selectPreviousItem:function(i,b){if(SC.none(b)){b=1
}if(SC.none(i)){i=false}var g=this.get("selection"),f=this.get("content");if(g){g=g.indexSetForSource(f)
}var h=g?g.get("min"):-1,a=g?g.get("max")-1:-1,e=this._selectionAnchor;if(SC.none(e)){e=h
}if(i){if(a>e){a=a-b}else{h=this._findPreviousSelectableItemFromIndex(h-b)}if(SC.none(h)||(h<0)){h=0
}if(!f.objectAt(h)){h=g?g.get("min"):-1}if(a<h){a=h}}else{h=this._findPreviousSelectableItemFromIndex(h-b);
if(SC.none(h)||(h<0)){h=0}if(!f.objectAt(h)){h=g?g.get("min"):-1}a=h;e=null}var c=h;
g=SC.IndexSet.create(h,a+1-h);this.scrollToContentIndex(c);this.select(g);this._selectionAnchor=e;
return this},selectNextItem:function(i,j){if(SC.none(j)){j=1}if(SC.none(i)){i=false
}var b=this.get("selection"),h=this.get("content");if(b){b=b.indexSetForSource(h)
}var a=b?b.get("min"):-1,e=b?b.get("max")-1:-1,f=this._selectionAnchor,c=this.get("length");
if(SC.none(f)){f=a}if(i){if(a<f){a=a+j}else{e=this._findNextSelectableItemFromIndex(e+j,e)
}if(e>=c){e=c-1}if(!h.objectAt(e)){e=b?b.get("max")-1:-1}if(a>e){a=e}}else{e=this._findNextSelectableItemFromIndex(e+j,e);
if(e>=c){e=c-1}if(!h.objectAt(e)){e=b?b.get("max")-1:-1}a=e;f=null}var g=e;b=SC.IndexSet.create(a,e-a+1);
this.scrollToContentIndex(g);this.select(b);this._selectionAnchor=f;return this},deleteSelection:function(){if(!this.get("canDeleteContent")){return NO
}var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=e&&c?e.indexSetForSource(c):null;
if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);
if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);
return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);
if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()
}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b
},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");
if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO
}},selectAll:function(a){var b=this.get("content"),c=b?SC.IndexSet.create(0,b.get("length")):null;
this.select(c,NO);return YES},deleteBackward:function(a){return this.deleteSelection()
},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(l){if(l.ctrlKey||l.metaKey){return NO
}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,l,this.ACTION_DELAY)
}else{var c=this.get("selection"),j=this.get("content"),h=c?c.indexSetForSource(j):null;
if(h){var m=undefined,g=false,i=undefined;if(h.get("length")===1){i=h.get("firstObject");
m=this.get("contentDelegate");var b=m.contentIndexDisclosureState(this,j,i);if(b!==SC.BRANCH_OPEN){g=true
}}if(g){var a=m.contentIndexOutlineLevel(this,j,i)-1;if(a>=0){var f=-1;while(f<0){var e=this._findPreviousSelectableItemFromIndex(i-1);
if(e<0){return false}i=e;var k=m.contentIndexOutlineLevel(this,j,i);if(k===a){f=e
}}if(f!==-1){this.select(i)}}}else{this.collapse(h)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO
}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)
}else{var e=this.get("selection"),c=this.get("content"),b=e?e.indexSetForSource(c):null;
if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(b,a){this.selectNextItem(true,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUpAndModifySelection:function(b,a){this.selectPreviousItem(true,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(e,c){var b=this.get("isEditable")&&this.get("canEditContent"),h,g,i,a,f;
if(b){h=this.get("selection");g=this.get("content");if(h&&h.get("length")===1){i=h.indexSetForSource(g);
a=i?i.get("min"):-1;b=a>=0}}if(b){f=this.itemViewForContentIndex(a);b=f&&SC.typeOf(f.beginEditing)===SC.T_FUNCTION
}if(b){this.scrollToContentIndex(a);f=this.itemViewForContentIndex(a);f.beginEditing()
}else{this.invokeLater(this._cv_action,0,f,null)}return YES},mouseDown:function(j){var h=this.itemViewForEvent(j),g=this.get("content"),f=h?h.get("contentIndex"):-1,c,e,b,a,k,i=g.get("allowsMultipleSelection");
c=this.mouseDownInfo={event:j,itemView:h,contentIndex:f,at:Date.now()};this.becomeFirstResponder();
if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!h){return
}b=this.get("selection");a=b&&b.containsObject(h.get("content"));if(a){this.deselect(f)
}else{if(!i){this.select(f,NO)}else{this.select(f,YES)}}}return YES}if(!h){if(this.get("allowDeselectAll")){this.select(null,false)
}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(g)}a=b?b.contains(f):NO;
c.modifierKeyPressed=k=j.ctrlKey||j.metaKey;if(k&&a){c.shouldDeselect=f>=0}else{if(j.shiftKey&&b&&b.get("length")>0&&i){b=this._findSelectionExtendedByShift(b,f);
e=this._selectionAnchor;this.select(b);this._selectionAnchor=e}else{if(!k&&a){c.shouldReselect=f>=0
}else{if((j.shiftKey||k)&&!i){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(f,k)
}else{c.shouldSelect=f>=0}}}}c.previousContentIndex=f;return YES},mouseUp:function(j){var k=this.itemViewForEvent(j),e=this.mouseDownInfo,g=this.get("content"),f,c,a,b,h,l,i=g.get("allowsMultipleSelection");
if(this.get("useToggleSelection")){if(!k||this.get("selectOnMouseDown")){return NO
}c=this.get("selection");f=(k)?k.get("contentIndex"):-1;a=c&&c.containsObject(k.get("content"));
if(a){this.deselect(f)}else{if(!i){this.select(f,NO)}else{this.select(f,YES)}}}else{if(e){l=e.contentIndex;
f=(k)?k.get("contentIndex"):-1;if(e.shouldSelect){this.select(l,e.modifierKeyPressed)
}if(e.shouldDeselect){this.deselect(l)}if(e.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");
if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){h=this.itemViewForContentIndex(l);
b=h&&(!h.contentHitTest||h.contentHitTest(j));b=(b&&h.beginEditing)?h.beginEditing():NO
}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,l,false)
}}this._cleanupMouseDown()}}this._cv_performSelectAction(k,j,0,j.clickCount);return NO
},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue
}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;
if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)
}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;
this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(e){if(this.get("useToggleSelection")){return true
}var b=this.itemViewForEvent(e),c=this.get("content"),g=b?b.get("contentIndex"):-1,f,a;
this.becomeFirstResponder();this.select(g,NO);this._cv_performSelectAction(this,e);
return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){this.select(null,NO);
c.makeTouchResponder(c.nextTouchResponder)}},this)},touchCancelled:function(a){this.select(null,NO)
},_findSelectionExtendedByShift:function(f,i){if(!f||f.get("length")===0){return SC.IndexSet.create(i)
}var e=this.get("content"),h=e.get("length")-1,c=f.get("min"),a=f.get("max")-1,g=this.mouseDownInfo,b=this._selectionAnchor;
if(SC.none(b)){b=-1}if(i<c){c=i;if(b<0){this._selectionAnchor=b=a}}else{if(i>a){a=i;
if(b<0){this._selectionAnchor=b=c}}else{if(i>=c&&i<=a){if(b<0){this._selectionAnchor=b=c
}if(i===b){c=a=i}else{if(i>b){c=b;a=i}else{if(i<b){c=i;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)
},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(i){var j=this.get("selectionDelegate"),f=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,g=this.get("_contentGroupIndexes"),e,b,h;
if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(j.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){e=SC.IndexSet.create(c.contentIndex)
}else{e=a?a.indexSetForSource(f):null}if(e&&g&&g.get("length")>0){e=e.copy().remove(g);
if(e.get("length")===0){e=null}else{e.freeze()}}if(!e){return YES}else{e=e.frozenCopy()
}e={content:f,indexes:e};this.set("dragContent",e);b=this.get("dragDataTypes");if(b&&b.get("length")>0){h=j.collectionViewDragViewFor(this,e.indexes);
if(!h){h=this._cv_dragViewFor(e.indexes)}h.createLayer();SC.Drag.start({event:c.event,source:this,dragView:h,ghost:NO,ghostActsLikeCursor:j.ghostActsLikeCursor,slideBack:YES,dataSource:this});
this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)
}return YES}},_cv_dragViewFor:function(e){var b=this.get("nowShowing").without(e);
b=this.get("nowShowing").without(b);var c=this.get("layer").cloneNode(false);var a=SC.View.create({layer:c,parentView:this});
SC.$(c).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);
b.forEach(function(h){var j=this.itemViewForContentIndex(h),f,g;if(j){f=j.get("isSelected");
j.set("isSelected",NO);j.updateLayerIfNeeded();g=j.get("layer");if(g){g=g.cloneNode(true)
}j.set("isSelected",f);j.updateLayerIfNeeded()}if(g){c.appendChild(g)}g=null},this);
c=null;return a},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;
if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)
}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")
}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)
},computeDragOperations:function(c,b){var e=SC.DRAG_NONE,a=this.get("selectionDelegate");
if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){e=SC.DRAG_REORDER
}}e=a.collectionViewComputeDragOperations(this,c,e);if(e&SC.DRAG_REORDER){e=SC.DRAG_MOVE
}return e},_computeDropOperationState:function(c,m,f){var h=this.convertFrameFromView(c.get("location"),null),l=SC.DROP_BEFORE,n=this.get("selectionDelegate"),e=this.get("canReorderContent"),o,i,a,j,g,b;
var k=this.insertionIndexForLocation(h,SC.DROP_ON);if(SC.typeOf(k)===SC.T_ARRAY){l=k[1];
k=k[0]}if(l===SC.DROP_ON){this.set("proposedInsertionIndex",k);this.set("proposedDropOperation",l);
b=n.collectionViewValidateDragOperation(this,c,f,k,l);k=this.get("proposedInsertionIndex");
l=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;
if(b!==SC.DRAG_NONE){return[k,l,b]}else{l=SC.DROP_BEFORE;k=this.insertionIndexForLocation(h,SC.DROP_BEFORE);
if(SC.typeOf(k)===SC.T_ARRAY){l=k[1];k=k[0]}}}if((k>=0)&&e&&(l!==SC.DROP_ON)){o=c.dataForType(this.get("reorderDataType"));
if(o){i=this.get("content");if(l===SC.DROP_BEFORE){a=o.indexes.contains(k-1);j=o.indexes.contains(k)
}else{a=o.indexes.contains(k);j=o.indexes.contains(k-1)}if(a&&j){if(SC.none(this._lastInsertionIndex)){if(l===SC.DROP_BEFORE){while((k>=0)&&o.indexes.contains(k)){k--
}}else{g=i?i.get("length"):0;while((k<g)&&o.indexes.contains(k)){k++}}}else{k=this._lastInsertionIndex
}}if(k>=0){f=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",k);this.set("proposedDropOperation",l);
f=n.collectionViewValidateDragOperation(this,c,f,k,l);k=this.get("proposedInsertionIndex");
l=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;
return[k,l,f]},dragUpdated:function(g,b){var i=g.get("allowedDragOperations"),h=this._computeDropOperationState(g,b,i),a=h[0],c=h[1],f=h[2];
if(f!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var e=this.itemViewForContentIndex(a);
this.showInsertionPoint(e,c)}this._lastInsertionIndex=a;this._lastDropOperation=c
}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null
}return(f&SC.DRAG_REORDER)?SC.DRAG_MOVE:f},dragExited:function(){this.hideInsertionPoint();
this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES
},performDragOperation:function(f,h){var a=this._computeDropOperationState(f,null,h),l=a[0],k=a[1],i=a[2],m=this.get("selectionDelegate"),c,n,e,j,b,g;
if(i&SC.DRAG_REORDER){h=(h&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{h=h&i}if(h===SC.DRAG_NONE){return h
}c=m.collectionViewPerformDragOperation(this,f,h,l,k);if((c===SC.DRAG_NONE)&&(h&SC.DRAG_REORDER)){e=f.dataForType(this.get("reorderDataType"));
if(!e){return SC.DRAG_NONE}j=this.get("content");g=e.indexes;if(g.get("length")===1){if(((k===SC.DROP_BEFORE)||(k===SC.DROP_AFTER))&&(g.get("min")===l)){return SC.DRAG_MOVE
}}j.beginPropertyChanges();n=[];b=0;e.indexes.forEach(function(o){n.push(j.objectAt(o-b));
j.removeAt(o-b);b++;if(o<l){l--}},this);if(k===SC.DROP_AFTER){l++}j.replace(l,0,n,k);
this.select(SC.IndexSet.create(l,n.length));j.endPropertyChanges();h=SC.DRAG_MOVE
}return h},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")
},insertionIndexForLocation:function(a,b){return -1},_cv_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)
}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}}}.observes("isVisibleInWindow"),collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")
},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,e,f,c;
if(a!==b){if(a&&b){f=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);
e=f.add(c)}else{e=a||b}}if(e&&e.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;
this.updateContentRangeObserver();this.reload(e)}if(f){f.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);
if(this.useFastPath){this.mixin(SC.CollectionFastPath)}if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()
}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()
}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)
}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,e,c,a){var f;
if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()
}f=this.get("selection");f=f?f.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()
}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,e,f)}},_cv_action:function(b,a,c){var e=this.get("action");
var f=this.get("target")||null;this._cv_actionTimer=null;if(e){if(SC.typeOf(e)===SC.T_FUNCTION){return this.action(b,a)
}var g=this.get("pane");if(g){g.rootResponder.sendAction(e,f,this,g,c)}}else{if(!b){return
}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)
}}}}}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:"%a %b %d %H %I %j %m %M %p %S %U %W %y %Y".w(),_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");
var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")
}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})
}.property("format").cacheable(),tabsSelections:function(){var g=[];var e=this.get("format");
var j=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(e)){throw"The format string is empty, and must be a valid string."
}var h,k,c,f=0,a=0,i=0;while(f<e.length&&e.indexOf("%",f)!==-1){h=e.indexOf("%",f);
k=e.substring(h,h+2);f=h+2;c=j.indexOf(k);if(c===-1){throw"SC.DateFieldView: The format's key '%@' is not supported.".fmt(k)
}a=a+h-i;g.push(SC.Object.create({key:k,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));
a=a+b[c];i=f}h=k=c=null;return g}.property("format").cacheable(),updateTextSelecitonObserver:function(){var a=this.get("activeSelection");
var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))
}}.observes("activeSelection","value"),updateValue:function(b,c){var f=(c===0)?-1:1;
var e=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",e.advance({day:f}));
break;case"%b":case"%m":this.set("value",e.advance({month:f}));break;case"%H":case"%I":this.set("value",e.advance({hour:f}));
break;case"%M":this.set("value",e.advance({minute:f}));break;case"%p":a=e.get("hour")>=12?-12:12;
this.set("value",e.advance({hour:a}));break;case"%S":this.set("value",e.advance({second:f}));
break;case"%U":this.set("value",e.advance({week1:f}));break;case"%W":this.set("value",e.advance({week0:f}));
break;case"%y":case"%Y":this.set("value",e.advance({year:f}));break}},_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();
return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES
},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");
this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");
var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},insertText:function(a){return YES
},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;
if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");
var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);
return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;
if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;
if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);
var f=this.get("selection");if(SC.none(f)){this.set("activeSelection",0)}else{var j=f.get("start");
var h=this.get("tabsSelections");var a=h.length,g;for(var e=0;e<a;e++){g=h[e].get("textSelection");
if(j>=g.get("start")&&j<=g.get("end")){this.set("activeSelection",e)}}}return c},deleteBackward:function(a){return YES
},deleteForward:function(a){return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],theme:"disclosure",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),render:function(a,c){var b=this.get("displayTitle");
if(c){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="button" alt="" />');if(this.get("needsEllipsis")){a.push('<span class="ellipsis sc-button-label">',b,"</span>")
}else{a.push('<span class="sc-button-label">',b,"</span>")}}else{this.$("label").text(b)
}},keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));
return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));
return YES}arguments.callee.base.apply(this,arguments)}});sc_require("views/collection");
sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{classNames:["sc-list-view"],acceptsFirstResponder:YES,showAlternatingRows:NO,render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));
return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");
return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sclv_rowDelegateDidChange:function(){var e=this._sclv_rowDelegate,b=this.get("rowDelegate"),c=this._sclv_rowHeightDidChange,a=this._sclv_customRowHeightIndexesDidChange;
if(e===b){return this}this._sclv_rowDelegate=b;if(e){e.removeObserver("rowHeight",this,c);
e.removeObserver("customRowHeightIndexes",this,a)}if(!b){throw"Internal Inconsistancy: ListView must always have CollectionRowDelegate"
}b.addObserver("rowHeight",this,c);b.addObserver("customRowHeightIndexes",this,a);
this._sclv_rowHeightDidChange()._sclv_customRowHeightIndexesDidChange();return this
}.observes("rowDelegate"),_sclv_rowHeightDidChange:function(){var b=this.get("rowDelegate"),a=b.get("rowHeight"),c;
if(a===this._sclv_rowHeight){return this}this._sclv_rowHeight=a;c=SC.IndexSet.create(0,this.get("length"));
this.rowHeightDidChangeForIndexes(c);return this},_sclv_customRowHeightIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),e=this._sclv_customRowHeightIndexes,c=this._sclv_customRowHeightIndexesContentDidChange;
if((b===e)||(e&&e.isEqual(b))){return this}if(e&&this._sclv_isObservingCustomRowHeightIndexes){e.removeObserver("[]",this,c)
}if(this._sclv_isObservingCustomRowHeightIndexes=b&&!b.get("isFrozen")){b.addObserver("[]",this,c)
}this._sclv_customRowHeightIndexesContentDidChange();return this},_sclv_customRowHeightIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),c=this._sclv_customRowHeightIndexes,e;
if(b&&c){e=b.copy().add(c)}else{e=b||c}this._sclv_customRowHeightIndexes=b?b.frozenCopy():null;
this.rowHeightDidChangeForIndexes(e);return this},rowOffsetForContentIndex:function(i){if(i===0){return 0
}var k=this.get("rowDelegate"),a=k.get("rowHeight"),g,f,c,b,j,h,e;f=i*a;g=this.get("rowSpacing");
if(g){f+=i*g}if(k.customRowHeightIndexes&&(c=k.get("customRowHeightIndexes"))){b=this._sclv_offsetCache;
if(!b){b=[];j=h=0;c.forEach(function(l){j+=this.rowHeightForContentIndex(l)-a;b[l+1]=j;
h=l},this);this._sclv_max=h+1;this._sclv_offsetCache=b}j=b[i];if(j===undefined){j=b[i]=b[i-1];
if(j===undefined){h=this._sclv_max;if(i<h){h=c.indexBefore(i)+1}j=b[i]=b[h]||0}}f+=j
}return f},rowHeightForContentIndex:function(a){var b=this.get("rowDelegate"),f,c,g,e;
if(b.customRowHeightIndexes&&(e=b.get("customRowHeightIndexes"))){c=this._sclv_heightCache;
if(!c){c=[];g=this.get("content");e.forEach(function(h){c[h]=b.contentIndexRowHeight(this,g,h)
},this);this._sclv_heightCache=c}f=c[a];if(f===undefined){f=b.get("rowHeight")}}else{f=b.get("rowHeight")
}return f},rowHeightDidChangeForIndexes:function(b){var a=this.get("length");this._sclv_heightCache=this._sclv_offsetCache=null;
if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));return this
},computeLayout:function(){var a=this._sclv_layout;if(!a){a=this._sclv_layout={}}a.minHeight=this.rowOffsetForContentIndex(this.get("length"));
this.set("calculatedHeight",a.minHeight);return a},layoutForContentIndex:function(a){return{top:this.rowOffsetForContentIndex(a),height:this.rowHeightForContentIndex(a),left:0,right:0}
},contentIndexesInRect:function(i){var a=this.get("rowDelegate").get("rowHeight"),h=SC.minY(i),b=SC.maxY(i),j=i.height||0,g=this.get("length"),f,c,e;
c=(h-(h%a))/a;f=this.rowOffsetForContentIndex(c);while(c>0&&f>h){c--;f-=this.rowHeightForContentIndex(c)
}f+=this.rowHeightForContentIndex(c);while(c<g&&f<=h){c++;f+=this.rowHeightForContentIndex(c)
}if(c<0){c=0}if(c>=g){c=g}e=c+((j-(j%a))/a);if(e>g){e=g}f=this.rowOffsetForContentIndex(e);
while(e>=c&&f>=b){e--;f-=this.rowHeightForContentIndex(e)}f+=this.rowHeightForContentIndex(e);
while(e<g&&f<b){e++;f+=this.rowHeightForContentIndex(e)}e++;if(e<c){e=c}if(e>g){e=g
}return SC.IndexSet.create(c,e-c)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",render:function(a,b){if(b){a.push('<div class="anchor"></div>')
}}}),showInsertionPoint:function(h,g){var i=this._insertionPointView;if(!i){i=this._insertionPointView=this.get("insertionPointView").create()
}var e=h.get("contentIndex"),f=this.get("length"),c=SC.clone(h.get("layout")),a=h.get("outlineLevel"),b=h.get("outlineIndent")||0,j;
if((e>=f)&&e>0){j=this.itemViewForContentIndex(f-1);if(j.get("isGroupView")){a=1;
b=j.get("outlineIndent")}}if(SC.none(a)){a=-1}if(g&SC.DROP_ON){this.hideInsertionPoint();
h.set("isSelected",YES);this._lastDropOnView=h}else{if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);
this._lastDropOnView=null}if(g&SC.DROP_AFTER){c.top+=c.height}c.height=2;c.right=0;
c.left=((a+1)*b)+12;delete c.width;i.set("layout",c);this.appendChild(i)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);
this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()
}this._insertionPointView=null},insertionIndexForLocation:function(h,l){var b={x:h.x,y:h.y,width:1,height:1},g=this.contentIndexesInRect(b),i=g.get("min"),j=this.get("length"),c,m,n,f,p,e,o,k,a;
if(SC.none(i)||i<0){if((j===0)||(h.y<=this.rowOffsetForContentIndex(0))){i=0}else{if(h.y>=this.rowOffsetForContentIndex(j)){i=j
}}}c=this.rowOffsetForContentIndex(i);m=c+this.rowHeightForContentIndex(i);if(l==SC.DROP_ON){if(this.get("isEditable")){n=Math.min(Math.floor((m-c)*0.2),5)
}else{n=0}if(h.y>=(c+n)||h.y<=(m+n)){return[i,SC.DROP_ON]}}if((i<j)&&(h.y>=m-10)){i++
}if(i>0){k=this.itemViewForContentIndex(i-1);o=(k?k.get("outlineIndent"):0)||0;e=k?k.get("outlineLevel"):0;
if(i<j){k=this.itemViewForContentIndex(i);f=k?k.get("outlineLevel"):0;p=(k?k.get("outlineIndent"):0)||0;
p*=f}else{f=k.get("isGroupView")?1:0;p=o*f}o*=e;if((f!==e)&&(p!==o)){if(o>p){i--;
l=SC.DROP_AFTER}}}if(l===SC.DROP_BEFORE){k=(i<j)?this.itemViewForContentIndex(i):null;
if(!k||k.get("isGroupView")){if(i>0){k=this.itemViewForContentIndex(i-1);if(!k.get("isGroupView")||(k.get("disclosureState")===SC.BRANCH_OPEN)){i=i-1;
l=SC.DROP_AFTER}else{i=-1}}else{i=-1}}if(i<0){l=SC.DRAG_NONE}}return[i,l]},mouseWheel:function(a){var b=SC.InlineTextFieldView.editor;
if(b&&b.get("isEditing")){if(b.get("delegate").get("displayDelegate")===this){SC.InlineTextFieldView.commitEditing()
}}return NO},init:function(){arguments.callee.base.apply(this,arguments);this._sclv_rowDelegateDidChange()
}});require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var b=this.get("frame"),a=this.get("columnWidth")||0;
return(a<=0)?1:Math.floor(b.width/a)}.property("clippingFrame","columnWidth").cacheable(),contentIndexesInRect:function(f){var e=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(f)/e)*b,a=Math.ceil(SC.maxY(f)/e)*b;
return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(h){var e=this.get("rowHeight")||48,a=this.get("clippingFrame").width,b=this.get("itemsPerRow"),f=Math.floor(a/b),g=Math.floor(h/b),c=h-(b*g);
return{left:c*f,top:g*e,height:e,width:f}},computeLayout:function(){var f=this.get("content"),e=(f)?f.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),g=Math.ceil(e/a);
var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=g*c;this.calculatedHeight=b.minHeight;
return b},insertionPointClass:SC.View.extend({classNames:["grid-insertion-point"],render:function(a,b){if(b){a.push('<span class="anchor"></span>')
}}}),showInsertionPoint:function(c,g){if(!c){return}if(g===SC.DROP_ON){if(c!==this._dropOnInsertionPoint){this.hideInsertionPoint();
this._dropOnInsertionPoint=c}}else{if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null
}if(!this._insertionPointView){this._insertionPointView=this.insertionPointClass.create()
}var b=this._insertionPointView;var a=c.get("frame");var e={height:a.height-6,x:a.x,y:a.y+6,width:0};
if(!SC.rectsEqual(b.get("frame"),e)){b.set("frame",e)}if(b.parentNode!==c.parentNode){c.parentNode.appendChild(b)
}}},hideInsertionPoint:function(){var a=this._insertionPointView;if(a){a.removeFromParent()
}if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}},insertionIndexForLocation:function(e,k){var g=this.get("frame"),h=this.get("clippingFrame"),l=this.get("itemsPerRow"),a=Math.floor(g.width/l),n=Math.floor((e.y-g.y-h.y)/this.get("rowHeight"));
var j=SC.DROP_BEFORE,c=(e.x-g.x-h.x),b=Math.floor(c/a),m=(c/a)-b;if(k===SC.DROP_ON){if(m>0.8){b++
}if((m>=0.2)&&(m<=0.8)){j=SC.DROP_ON}}else{if(m>0.45){b++}}var i=(n*l)+b;return[i,j]
},_gv_clippingFrameDidChange:function(){var e=this.get("nowShowing"),c,b,a;this.notifyPropertyChange("itemsPerRow");
a=e.get("length");for(b=0;b<a;b++){c=this.itemViewForContentIndex(b);c.adjust(this.layoutForContentIndex(b))
}}.observes("clippingFrame")});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){var b=this.get("minimum");
if(c!==undefined){this._scs_value=c}c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)
}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")
}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:11,displayProperties:"thumbPosition thumbLength isEnabled controlsHidden".w(),render:function(c,a){var b={},j="",f,l,h,g,m,k,i,e,n;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;
break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;break}b.disabled=!this.get("isEnabled");
b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);l=this.get("thumbLength");
f=this.get("thumbPosition");if(a){if(this.get("hasButtons")){j='<div class="button-bottom"></div><div class="button-top"></div>'
}else{j='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',j,'<div class="thumb" style="height: '+l+"px; top: "+f+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>');
break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',j,'<div class="thumb" style="width: '+l+"px; left: "+f+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>')
}}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,l)
}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){this.set("_touchScrollValue",NO)
},touchScrollDidChange:function(a){this.set("_touchScrollValue",a)},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);
this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return
}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;
case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return
}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,20));
break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,20));break}this._thumbSize=b
},trackLength:function(){var a=this.get("scrollerLength");a-=this.capLength-this.capOverlap;
a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;
case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;
a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,20)
}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var h=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),e=this.get("thumbLength"),g=this.get("capLength"),f=this.get("capOverlap"),a;
a=(h/c)*(b-e);a+=g-f;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1
}.property("proportion").cacheable(),valueForPosition:function(h){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),g=this.get("capLength"),e=this.get("capOverlap"),f;
f=h-(g-e);f=f/(a-c);f=f*b;return f},mouseDown:function(k){if(!this.get("isEnabled")){return NO
}this._altIsDown=k.altKey;this._shiftIsDown=k.shiftKey;var f=k.target,c=this.get("thumbPosition"),j,e,h,g=this.get("scrollerLength");
if(f.className.indexOf("thumb")>=0){e=this.convertFrameFromView({x:k.pageX,y:k.pageY});
e.x-=c;e.y-=c;this._thumbDragging=YES;this._thumbOffset=e;this._mouseDownLocation={x:k.pageX,y:k.pageY};
this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")
}else{if(f.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?g:30));
this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES
}else{if(f.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?g:30));
this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES
}else{var m=this.get("shouldScrollToClick");if(k.altKey){m=!m}var a=this.get("trackLength"),i=this.get("thumbLength"),b=this.convertFrameFromView({x:k.pageX,y:k.pageY}),l;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=l=b.y;
break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=l=b.x;break}if(m){this.set("value",this.valueForPosition(l-(i/2)));
c=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:b.x-c,y:b.y-c};
this._mouseDownLocation={x:k.pageX,y:k.pageY};this._thumbPositionAtDragStart=c;this._valueAtDragStart=this.get("value")
}else{if(l<c){this.decrementProperty("value",g);this.startMouseDownTimer("page")}else{this.incrementProperty("value",g);
this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,e;
if(c){c.removeClass("active");b=YES}e=this._mouseDownTimer;if(e){e.invalidate();this._mouseDownTimer=null
}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(n){var l,b,m,c,j=n.target,f=this._thumbPositionAtDragStart,h=this._isScrollingUp,p=this._isScrollingDown,e=this._scs_buttonActive,a;
if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:m=(n.pageY-this._mouseDownLocation.y);
break;case SC.LAYOUT_HORIZONTAL:m=(n.pageX-this._mouseDownLocation.x);break}if(n.altKey){if(!this._altIsDown||(this._shiftIsDown!==n.shiftKey)){f=this._thumbPositionAtDragStart=f+m;
m=0;this._mouseDownLocation={x:n.pageX,y:n.pageY};this._valueAtDragStart=this.get("value")
}if(n.shiftKey){m=-m}this.set("value",Math.round(this._valueAtDragStart+m*2))}else{c=f+m;
b=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((c/b)*this.get("maximum")))
}}else{if(h||p){var o=NO,g=NO;var k=this.$(".button-top")[0].getBoundingClientRect();
var i=this.$(".button-bottom")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(n.pageY<k.bottom){o=YES
}else{g=YES}break;case SC.LAYOUT_HORIZONTAL:if(n.pageX<k.right){o=YES}else{g=YES}break
}if((o||g)&&o!==h){if(e){e.removeClass("active")}this._mouseDownTimerAction=o?"scrollUp":"scrollDown";
if(o){this.makeButtonActive(".button-top")}else{if(g){this.makeButtonActive(".button-bottom")
}}this._isScrollingUp=o;this._isScrollingDown=g}}}this._altIsDown=n.altKey;this._shiftIsDown=n.shiftKey;
return YES},startMouseDownTimer:function(b,a){var c;this._mouseDownTimerAction=b;
this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})
},mouseDownTimerDidFire:function(){var e=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),f=50;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;
break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?e:30);
break;case"scrollUp":this.decrementProperty("value",this._altIsDown?e:30);break;case"page":f=150;
if(a<c){this.decrementProperty("value",e)}else{if(a>c+b){this.incrementProperty("value",e)
}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:f})
},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")
}});SC.TouchScrollerView=SC.ScrollerView.extend({classNames:["sc-touch-scroller-view"],scrollbarThickness:12,capLength:5,capOverlap:0,hasButtons:NO,buttonOverlap:36,adjustThumb:function(e,b,g){var c=this.$(".thumb-inner");
var a=this.get("scrollerLength")-this.capLength,f=this.get("minimum")+this.capLength;
if(b+g>a){b=Math.min(a-20,b);g=a-b}if(b<f){g-=f-b;b=f}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d(0px,"+b+"px,0px)")
}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d(0px,"+Math.round(g-1044)+"px,0px)")
}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d("+b+"px,0px,0px)")
}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d("+Math.round(g-1044)+"px,0px,0px)")
}break}this._thumbPosition=b;this._thumbSize=g},render:function(c,a){var b=[],j="",f,l,h,g,m,k,i,e,n;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.push("sc-vertical");
break;case SC.LAYOUT_HORIZONTAL:b.push("sc-horizontal");break}if(!this.get("isEnabled")){b.push("disabled")
}if(this.get("controlsHidden")){b.push("controls-hidden")}c.addClass(b);l=this.get("thumbLength");
f=this.get("thumbPosition");if(a){if(this.get("hasButtons")){j='<div class="button-bottom"></div><div class="button-top"></div>'
}else{j='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',j,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateY('+(l-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>');
break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',j,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateX('+(l-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>')
}}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,l)
}}});sc_require("views/scroller");sc_require("mixins/border");SC.NORMAL_SCROLL_DECELERATION=0.95;
SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend(SC.Border,{classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,horizontalScrollOffset:function(b,e){if(e!==undefined){var c=this.minimumHorizontalScrollOffset(),a=this.get("maximumHorizontalScrollOffset");
this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_horizontalScrollOffset||0
}.property().cacheable(),verticalScrollOffset:function(b,e){if(e!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");
this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_verticalScrollOffset||0
}.property().cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0
}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)
}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0
}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)
}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView"),b=0,a=0;
if(c&&c.get("frame")){b=c.get("frame").width}if(c){a=c.calculatedWidth||0}if(c&&c.calculatedWidth&&c.calculatedWidth!==0){b=c.calculatedWidth
}b*=this._scale;var e=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,e)
}return this.maximumScrollOffset(b,e,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=0,b=0;
if(a&&a.get("frame")){c=a.get("frame").height}if(a){b=a.calculatedHeight||0}if(a&&a.calculatedHeight&&a.calculatedHeight!==0){c=a.calculatedHeight
}c*=this._scale;var e=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,e)
}return this.maximumScrollOffset(c,e,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var b=this.get("contentView");
var a=b?b.get("frame").width:0;if(b&&b.calculatedWidth&&b.calculatedWidth!==0){a=b.calculatedWidth
}a*=this._scale;var c=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){a=Math.min(a,c)
}return this.minimumScrollOffset(a,c,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");
var b=(a&&a.get("frame"))?a.get("frame").height:0;if(a&&a.calculatedHeight&&a.calculatedHeight!==0){b=a.calculatedHeight
}b*=this._scale;var c=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){b=Math.min(b,c)
}return this.minimumScrollOffset(b,c,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height
}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width
}.property("frame"),hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.TouchScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))
}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.TouchScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))
}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES
}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES
}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView.extend({}),scrollTo:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;
a=a.x}if(!SC.none(a)){a=Math.max(this.get("minimumHorizontalScrollOffset"),Math.min(this.get("maximumHorizontalScrollOffset"),a));
this.set("horizontalScrollOffset",a)}if(!SC.none(b)){b=Math.max(this.get("minimumVerticalScrollOffset"),Math.min(this.get("maximumVerticalScrollOffset"),b));
this.set("verticalScrollOffset",b)}return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;
a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;
return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)
}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO
}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame"));
a.x=this.get("horizontalScrollOffset");a.y=this.get("verticalScrollOffset");var e=a.x,c=a.y;
a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));
a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));if((e!==a.x)||(c!==a.y)){this.scrollTo(a.x,a.y);
return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)
},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)
},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)
},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)
},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)
},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))
},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)
},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)
},tile:function(){var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;
var i=c&&this.get("isHorizontalScrollerVisible");var k=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;
var g=k&&this.get("isVerticalScrollerVisible");var f=this.get("containerView");var n={left:0,top:0};
var m,h,b,o,e,a;var j=((i)?c.get("scrollbarThickness"):0);var l=(g)?k.get("scrollbarThickness"):0;
if(i){a=this.get("horizontalScrollerLayout");h={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+l-1:l-1),height:j};
c.set("layout",h);o=this.get("horizontalOverlay");n.bottom=o?0:(h.bottom+j)}else{n.bottom=0
}if(c){c.set("isVisible",i)}if(g){j=j+this.get("verticalScrollerBottom");e=this.get("verticalScrollerLayout");
h={top:(e?e.top:0),bottom:(e?e.bottom+j:j),right:(e?e.right:0),width:l};k.set("layout",h);
b=this.get("verticalOverlay");n.right=b?0:(h.right+l)}else{n.right=0}if(k){k.set("isVisible",g)
}f.adjust(n)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){var b=(SC.browser.safari&&SC.browser.version>533)?120:1;
this._scroll_wheelDeltaX+=a.wheelDeltaX/b;this._scroll_wheelDeltaY+=a.wheelDeltaY/b;
this.invokeLater(this._scroll_mouseWheel,10);return this.get("canScrollHorizontal")||this.get("canScrollVertical")
},_scroll_mouseWheel:function(){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY);
if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);
this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)
}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);
this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)
}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){this._scale=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))
}return this._scale}.property().cacheable(),minimumScale:0.25,maximumScale:2,autoScaleRange:NO,_scale_css:"",updateScale:function(b){var a=this.get("contentView");
if(!a){return}if(a.isScalable){this.get("contentView").applyScale(b);this._scale_css=""
}else{this._scale_css="scale3d("+b+", "+b+", 1)"}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)
}},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)
}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)
}},_applyCSSTransforms:function(b){var a="";this.updateScale(this._scale);a+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) ";
a+=this._scale_css;b.style.webkitTransform=a;b.style.webkitTransformOrigin="top left"
},captureTouch:function(a){return YES},touchGeneration:0,touchStart:function(b){var a=++this.touchGeneration;
if(!this.tracking&&this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,a)
}else{if(!this.tracking){this.invokeLater(this.beginTouchesInContent,1,a)}}this.beginTouchTracking(b,YES);
return YES},beginTouchesInContent:function(b){if(b!==this.touchGeneration){return
}var c=this.touch,a;if(c&&this.tracking&&!this.dragging&&!c.touch.scrollHasEnded){c.touch.captureTouch(this,YES);
if(!c.touch.touchResponder){c.touch.makeTouchResponder(this)}else{if(c.needsScrollEnd){this._touchScrollDidEnd()
}}}},beginTouchTracking:function(e,o){var h=e.averagedTouchesForView(this,o);var b=this._scroll_verticalScrollOffset||0,c=this._scroll_horizontalScrollOffset||0,j=c,i=b,f=NO;
if(this.touch&&this.touch.timeout){clearTimeout(this.touch.timeout);this.touch.timeout=null;
j=this.touch.startClipOffset.x;i=this.touch.startClipOffset.y;f=YES}var k=this.get("contentView");
var a=k?k.get("frame").width:0,m=k?k.get("frame").height:0;if(k.calculatedWidth&&k.calculatedWidth!==0){a=k.calculatedWidth
}if(k.calculatedHeight&&k.calculatedHeight!==0){m=k.calculatedHeight}var l=this.get("containerView").get("frame").width,q=this.get("containerView").get("frame").height;
var g=this.convertFrameToView(this.get("frame"),null),p=(c+(h.x-g.x))/this._scale,n=(b+(h.y-g.y))/this._scale;
this.touch={startTime:e.timeStamp,notCalculated:YES,enableScrolling:{x:a*this._scale>l||this.get("alwaysBounceHorizontal"),y:m*this._scale>q||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},startClipOffset:{x:j,y:i},lastScrollOffset:{x:c,y:b},startTouchOffset:{x:h.x,y:h.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:p,y:n},containerSize:{width:l,height:q},contentSize:{width:a,height:m},startScale:this._scale,startDistance:h.d,canScale:this.get("canScale"),minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:g,layer:this.get("contentView").get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:e.timeStamp,touch:(o?e:(this.touch?this.touch.touch:null)),needsScrollEnd:f};
if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(g,e,b,c,a){var f;
if(g<e){f=g-e}else{if(g>b){f=b-g}else{return g}}f=Math.pow(c,Math.abs(f))*a;if(g<e){f=f-a
}else{f=-f+a}return Math.min(Math.max(e,g),b)+f},touchesDragged:function(a,c){var b=a.averagedTouchesForView(this);
this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(k,j,e,h){var g=this.touch,a=k-g.globalFrame.x,l=j-g.globalFrame.y,u,m,v,n,B,z;
var c=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+l)/this._scale;
var y=c-g.startTouchOffset.x,x=b-g.startTouchOffset.y;var i=g.dragging;if(!g.scrolling.x&&Math.abs(y)>g.scrollTolerance.x&&g.enableScrolling.x){i=YES;
g.scrolling.x=YES;g.scrollTolerance.y=g.secondaryScrollTolerance;g.startTouchOffset.x=k;
y=0}if(!g.scrolling.y&&Math.abs(x)>g.scrollTolerance.y&&g.enableScrolling.y){i=YES;
g.scrolling.y=YES;g.scrollTolerance.x=g.secondaryScrollTolerance;g.startTouchOffset.y=j;
x=0}if(i&&!g.dragging){g.dragging=YES;this.dragging=YES;this._touchScrollDidStart()
}if(!g.scrolling.x&&!g.scrolling.y&&!g.canScale){return}if(g.scrolling.x&&!g.scrolling.y){if(y>g.scrollLock&&!g.scrolling.y){g.enableScrolling.y=NO
}}if(g.scrolling.y&&!g.scrolling.x){if(x>g.scrollLock&&!g.scrolling.x){g.enableScrolling.x=NO
}}if(g.canScale){var p=g.startDistance,w=e-p;if(Math.abs(w)>g.scaleTolerance){g.scrolling.y=YES;
g.scrolling.x=YES;var A=g.startScale*(e/Math.max(p,50));var q=this._adjustForEdgeResistance(A,g.minimumScale,g.maximumScale,g.resistanceCoefficient,g.resistanceAsymptote);
this.dragging=YES;this._scale=q;var t=c*this._scale,s=b*this._scale}}B=this.minimumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,this.get("horizontalAlign"));
z=this.minimumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,this.get("verticalAlign"));
n=this.maximumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,this.get("horizontalAlign"));
m=this.maximumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,this.get("verticalAlign"));
v=g.startTouchOffsetInContent.x*this._scale-a;u=g.startTouchOffsetInContent.y*this._scale-l;
v=this._adjustForEdgeResistance(v,B,n,g.resistanceCoefficient,g.resistanceAsymptote);
u=this._adjustForEdgeResistance(u,z,m,g.resistanceCoefficient,g.resistanceAsymptote);
if(g.scrolling.x){this._scroll_horizontalScrollOffset=v}if(g.scrolling.y){this._scroll_verticalScrollOffset=u
}this._applyCSSTransforms(g.layer);this._touchScrollDidChange();if(h-g.lastEventTime>=1||g.notCalculated){g.notCalculated=NO;
var f=this._scroll_horizontalScrollOffset;var o=this._scroll_verticalScrollOffset;
g.scrollVelocity.x=((f-g.lastScrollOffset.x)/Math.max(1,h-g.lastEventTime));g.scrollVelocity.y=((o-g.lastScrollOffset.y)/Math.max(1,h-g.lastEventTime));
g.lastScrollOffset.x=f;g.lastScrollOffset.y=o;g.lastEventTime=h}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);
c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;
a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()
}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)
}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(c){var a=this.touch,b=c.averagedTouchesForView(this);
if(!this.touch||!this.touch.timeout){this.beginPropertyChanges();this.set("scale",this._scale);
this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);
this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()
}this.dragging=NO;this.touch=null}},startDecelerationAnimation:function(a){var b=this.touch;
b.decelerationVelocity={x:b.scrollVelocity.x*10,y:b.scrollVelocity.y*10};this.decelerateAnimation()
},bouncyBounce:function(c,f,e,g,h,b,a){if(f<e){if(c<0){c=c+((e-f)*h)}else{c=Math.min((e-f)*b+a,e-f-0.01)
}}else{if(f>g){if(c>0){c=c-((f-g)*h)}else{c=-Math.min((f-g)*b+a,f-g-0.01)}}}return c
},decelerateAnimation:function(){var b=this.touch,v=this._scale,u=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),s=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),i=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),h=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),a=Date.now(),f=Math.max(a-b.lastEventTime,1),n=this._scroll_horizontalScrollOffset+b.decelerationVelocity.x*(f/10),k=this._scroll_verticalScrollOffset+b.decelerationVelocity.y*(f/10);
var m=b.decelerationFromEdge,o=b.accelerationToEdge;var e=n>=u&&n<=i;var p=k>=s&&k<=h;
n/=this._scale;k/=this._scale;var j=0;j=this.bouncyBounce(j,v,b.minimumScale,b.maximumScale,m,o,0);
this._scale=v=v+j;n*=this._scale;k*=this._scale;u=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));
s=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));
i=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));
h=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));
if(e&&(n<u||n>i)){n=Math.max(u,Math.min(n,i))}if(p&&(k<s||k>h)){k=Math.max(s,Math.min(k,h))
}this._scroll_horizontalScrollOffset=n;this._scroll_verticalScrollOffset=k;this._applyCSSTransforms(b.layer);
SC.RunLoop.begin();this._touchScrollDidChange();SC.RunLoop.end();var q=b.decelerationRate;
b.decelerationVelocity.y*=Math.pow(q,(f/10));b.decelerationVelocity.x*=Math.pow(q,(f/10));
b.decelerationVelocity.x=this.bouncyBounce(b.decelerationVelocity.x,n,u,i,m,o,0.3);
b.decelerationVelocity.y=this.bouncyBounce(b.decelerationVelocity.y,k,s,h,m,o,0.3);
var l=Math.abs(b.decelerationVelocity.x);var c=Math.abs(b.decelerationVelocity.y);
if(c<0.01&&l<0.01&&Math.abs(j)<0.01){b.timeout=null;this.touch=null;SC.RunLoop.begin();
this._touchScrollDidEnd();this.beginPropertyChanges();this.set("scale",this._scale);
this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);
this.endPropertyChanges();SC.RunLoop.end();return}var g=this;b.lastEventTime=Date.now();
this.touch.timeout=setTimeout(function(){g.decelerateAnimation()},10)},createChildViews:function(){var b=[],a;
if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));
this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");
if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset"});
b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");
if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset"});
b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b;this.contentViewDidChange();
this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");
var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)
}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)
}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var e=this.get("contentView"),a=this._scroll_contentView,b=this.contentViewFrameDidChange,c=this.contentViewLayerDidChange;
if(e!==a){if(a){a.removeObserver("frame",this,b);a.removeObserver("layer",this,c)
}this._scroll_contentView=e;if(e){e.addObserver("frame",this,b);e.addObserver("layer",this,c)
}this.containerView.set("contentView",e);this.contentViewFrameDidChange()}}.observes("contentView"),render:function(a,b){this.invokeLast(this.adjustElementScroll);
if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)
},oldMaxHOffset:0,oldMaxVOffset:0,contentViewFrameDidChange:function(b){var o=this.get("contentView"),m=(o)?o.get("frame"):null,i=this._scale,c=(m)?m.width*i:0,q=(m)?m.height*i:0,k,j,n;
if(!b&&(c===this._scroll_contentWidth)&&(q===this._scroll_contentHeight)){return}this._scroll_contentWidth=c;
this._scroll_contentHeight=q;k=this.getPath("containerView.frame");j=k.width;n=k.height;
if(this.get("hasHorizontalScroller")&&(o=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.set("isHorizontalScrollerVisible",c>j)
}o.setIfChanged("maximum",c-j);o.setIfChanged("proportion",j/c)}if(this.get("hasVerticalScroller")&&(o=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",q>n)
}o.setIfChanged("maximum",q-n);o.setIfChanged("proportion",n/q)}if(!this.get("isVerticalScrollerVisible")&&(this.get("verticalScrollOffset")!==0)&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",0)
}if(!this.get("isHorizontalScrollerVisible")&&(this.get("horizontalScrollOffset")!==0)&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",0)
}var p=this.get("maximumVerticalScrollOffset"),l=this.get("verticalScrollOffset"),h=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),g=p<l,e=h<a;
if(g||e){this.forceDimensionsRecalculation(e,g,l,a)}},frameDidChange:function(){this.contentViewFrameDidChange(YES)
}.observes("frame"),contentViewLayerDidChange:function(){if(this._verticalScrollOffset!==0){this._verticalScrollOffset=-1
}if(this._horizontalScrollOffset!==0){this._horizontalScrollOffset=-1}this.invokeLast(this.adjustElementScroll)
},_scroll_horizontalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)
}.observes("horizontalScrollOffset"),_scroll_verticalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)
}.observes("verticalScrollOffset"),adjustElementScroll:function(){var a=this.get("containerView"),e=this.get("contentView"),c=this.get("verticalScrollOffset"),b=this.get("horizontalScrollOffset");
if(e){SC.RunLoop.begin();e._viewFrameDidChange();SC.RunLoop.end();if(SC.platform.touch){this._applyCSSTransforms(e.get("layer"))
}}if(a&&!SC.platform.touch){a=a.$()[0];if(a){if(c!==this._verticalScrollOffset){a.scrollTop=c;
this._verticalScrollOffset=c}if(b!==this._horizontalScrollOffset){a.scrollLeft=b;
this._horizontalScrollOffset=b}}}},forceDimensionsRecalculation:function(b,c,f,a){var g=a;
var e=f;this.scrollTo(0,0);if(b&&c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),this.get("maximumVerticalScrollOffset"))
}if(b&&!c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),e)}if(!b&&c){this.scrollTo(g,this.get("maximumVerticalScrollOffset"))
}},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0});sc_require("views/scroll");
SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c
}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"
}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);
break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);
break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);
break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);
break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);
break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");
a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";
a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}a.setClass("disabled",!this.get("isEnabled"))
},didCreateLayer:function(){},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;
SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);
this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)
},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.RunLoop.begin();
var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50);
SC.RunLoop.end()}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),e=this._sc_lastScroll,c=this.get("layer"),a=0;
if(e&&(b-e)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;
this._sc_lastScroll=b;SC.RunLoop.begin();if(!this.get("isEnabled")){return}this._sc_scrollValue=a=c.scrollTop;
this.set("value",a);SC.RunLoop.end()},_scrollMenu:function(){var b=this.get("value"),a;
if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)
}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)
}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,100)
}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;
SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;
SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,tile:function(){var h,u,i,b,s,j,c;
h=this.get("hasVerticalScroller");u=h?this.get("verticalScrollerView"):null;i=h?this.get("verticalScrollerView2"):null;
b=u&&this.get("isVerticalScrollerVisible");s=this.get("containerView");j={left:0,top:0};
if(b){c=0;var a=u.get("scrollerThickness")||i.get("scrollerThickness");var k=this.get("contentView"),p,q=(k)?k.get("frame"):null,l=(q)?q.height:0,t=this.containerView.$()[0],m=this.get("verticalScrollOffset"),g={height:0,top:0,right:0,left:0},o={height:a,top:0,right:0,left:0},e={height:a,bottom:0,right:0,left:0},n={height:0,bottom:0,right:0,left:0};
if(t){c=t.offsetHeight}if(m===0){j.top=0;j.bottom=a;u.set("layout",g);i.set("layout",e)
}else{if(m>=(l-c-a)){j.top=a;j.bottom=0;u.set("layout",o);i.set("layout",n)}else{j.top=a;
j.bottom=a;u.set("layout",o);i.set("layout",e)}}}if(u){u.set("isVisible",b);i.set("isVisible",b)
}s.set("layout",j)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,e=this.get("controlSize");
if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));
this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});
c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});
c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;
this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);
this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)
}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)
}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,i=(c)?c.get("frame"):null,g=(i)?i.width:0,a=(i)?i.height:0,j=this.get("frame"),e,h;
this._scroll_contentWidth=g;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;
if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>j.height)
}a-=this.get("verticalScrollerBottom");e=0;h=this.containerView.$()[0];if(h){e=h.offsetHeight
}a=a-e;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");
var a=this.get("contentView");if(a){a.adjust("top",0-b)}}.observes("verticalScrollOffset")});
sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))
}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()
}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")
}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");
if(!a.isClass||!a){return}this.menu=a.create();this._setupMenu()},acceptsFirstResponder:YES,instantiatedMenu:function(){var a=this.get("menu");
if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");
if(!b){SC.Logger.warn("SC.PopupButton - Unable to show menu because the menu property is set to %@.".fmt(b));
return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this._isMouseDown=YES;this._action();this.invokeLast(this._recordMouseDownTimestamp);
this.becomeFirstResponder();return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()
},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("instantiatedMenu"),g=SC.platform.touch,a;
if(f){a=f.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){f.remove()
}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){f.remove()}}}this._isMouseDown=NO;
arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES
},performKeyEquivalent:function(b,a){if(!this.get("isEnabled")){return NO}var c=this.get("instantiatedMenu");
return(!!c&&c.performKeyEquivalent(b,a))},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled")});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()
}}});SC.ProgressView=SC.View.extend(SC.Control,{value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),offsetRange:24,contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),animatedBackgroundMatrix:[],contentIsIndeterminateKey:null,classNames:"sc-progress-view",_backgroundOffset:0,_currentBackground:1,_nextBackground:1,init:function(){arguments.callee.base.apply(this,arguments);
this.animateProgressBar()},animateProgressBar:function(){if(this.get("isRunning")&&this.get("isVisibleInWindow")){this._animateProgressBar(500)
}}.observes("isRunning","isVisibleInWindow"),_animateProgressBar:function(a){if(a===0){a=1000/30
}if(this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange();
this.invokeLater(this._animateProgressBar,a,600)}},displayProperties:"value minimum maximum isIndeterminate".w(),render:function(c,b){var o,f,l,e,i,g=this.get("isIndeterminate"),n=this.get("isRunning"),k=this.get("isEnabled"),m=this.get("offsetRange"),h=(g&&n)?(Math.floor(Date.now()/75)%m-m):0;
if(!k){l="0%"}else{if(g){l="120%"}else{l=(this.get("_percentageNumeric")*100)+"%"
}}var a={"sc-indeterminate":g,"sc-empty":(l<=0),"sc-complete":(l>=100)};if(b){var j=this._createClassNameString(a);
c.push('<div class="sc-inner ',j,'" style="width: ',l,";left: ",h,'px;">','<div class="sc-inner-head">',"</div>",'<div class="sc-inner-tail"></div></div>','<div class="sc-outer-head"></div>','<div class="sc-outer-tail"></div>')
}else{c.setClass(a);o=this.$(".sc-inner");f=this.get("animatedBackgroundMatrix");
e="width: "+l+"; ";e=e+"left: "+h+"px; ";if(f.length===3){o.css("backgroundPosition","0px -"+(f[0]+f[1]*this._currentBackground)+"px");
if(this._currentBackground===f[2]-1||this._currentBackground===0){this._nextBackground*=-1
}this._currentBackground+=this._nextBackground;e=e+"backgroundPosition: "+i+"px; ";
o.attr("style",e)}else{o.attr("style",e)}}},contentPropertyDidChange:function(c,a){var b=this.get("content");
this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()
},_percentageNumeric:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;
a=(a-b)/(c-b);if(a>1){a=1}if(isNaN(a)){a=0}if(a<b){a=0}if(a>c){a=1}return a}.property("value").cacheable(),_createClassNameString:function(c){var b=[],a;
for(a in c){if(!c.hasOwnProperty(a)){continue}if(c[a]){b.push(a)}}return b.join(" ")
}});SC.RadioView=SC.View.extend(SC.Control,{classNames:["sc-radio-view"],value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)
}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)
}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;
this.notifyPropertyChange("_displayItems")},displayProperties:["value","_displayItems"],render:function(b,h){var k=this.get("_displayItems"),n=this.get("value"),i=SC.isArray(n),s,j,p,t,m,q,e,a,c,o,g,l,f;
b.addClass(this.get("layoutDirection"));if(i&&n.length<=0){n=n[0];i=NO}if(this._renderAsFirstTime){h=YES;
this._renderAsFirstTime=NO}if(h){b.attr("role","radiogroup");t=SC.guidFor(this);q=k.length;
for(j=0;j<q;j++){s=k[j];p=s[3];if(p){e=(p.indexOf("/")>=0)?p:SC.BLANK_IMAGE_URL;a=(e===p)?"":p;
p='<img src="'+e+'" class="icon '+a+'" alt="" />'}else{p=""}if(s){o=(i)?(n.indexOf(s[1])>=0):(n===s[1])
}else{o=NO}f=this._getSelectionStateClassNames(s,o,n,i,false);g=this.escapeHTML?SC.RenderContext.escapeHTML(s[0]):s[0];
m=s[4];b.push('<div class="sc-radio-button ',f,'" ',m?'style="width: '+m+'px;" ':"",'aria-checked="',o?"true":"false",'" ','role="radio"',' index="',j,'">','<span class="button"></span>','<span class="sc-button-label">',p,g,"</span></div>")
}}else{this.$(".sc-radio-button").forEach(function(u){u=this.$(u);j=parseInt(u.attr("index"),0);
s=(j>=0)?k[j]:null;if(s){o=(i)?(n.indexOf(s[1])>=0):(n===s[1])}else{o=NO}m=s[4];if(m){u.width(m)
}l=this._getSelectionStateClassNames(s,o,n,i,true);u.attr("aria-checked",o?"true":"false");
u.setClass(l);j=l=null},this)}},_displayItems:function(){var i=this.get("items"),e=this.get("localize"),b=this.get("itemTitleKey"),c=this.get("itemValueKey"),l=this.get("itemWidthKey"),a=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,h=this.get("itemIsEnabledKey"),s=this.get("itemIconKey"),q=[],m=(i)?i.get("length"):0,o,t,j,k,g,f,p,n;
for(g=0;g<m;g++){o=i.objectAt(g);if(SC.typeOf(o)===SC.T_ARRAY){t=o[0];k=o[1]}else{if(o){if(b){t=o.get?o.get(b):o[b]
}else{t=(o.toString)?o.toString():null}if(l&&a){j=o.get?o.get(l):o[l]}if(c){k=o.get?o.get(c):o[c]
}else{k=o}if(h){p=o.get?o.get(h):o[h]}else{p=YES}if(s){n=o.get?o.get(s):o[s]}else{n=null
}}else{t=k=n=null;p=NO}}if(e){t=t.loc()}q.push([t,k,p,n,j])}return q}.property("items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey").cacheable(),_getSelectionStateClassNames:function(e,g,f,a,b){var i,c;
i={sel:(g&&!a),mixed:(g&&a),disabled:(!e[2])};if(b){return i}else{var h=[];for(c in i){if(!i.hasOwnProperty(c)){continue
}if(i[c]){h.push(c)}}return h.join(" ")}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}var b=a.target;while(b){if(b.className&&b.className.indexOf("sc-radio-button")>-1){break
}b=b.parentNode}if(!b){return NO}b=this.$(b);if(b.hasClass("disabled")){return YES
}b.addClass("active");this._activeRadioButton=b;a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES
}var g=this._activeRadioButton,f=a.target,b=this.get("_displayItems"),c,e;if(g){g.removeClass("active");
this._activeRadioButton=null}else{return YES}while(f){if(f.className&&f.className.indexOf("sc-radio-button")>-1){break
}f=f.parentNode}f=this.$(f);if(f[0]!==g[0]||f.hasClass("disabled")){return YES}c=parseInt(f.attr("index"),0);
e=b[c];this.set("value",e[1])},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
}});SC.SceneView=SC.ContainerView.extend({scenes:["master","detail"],nowShowing:null,transitionDuration:200,_state:"NO_VIEW",replaceContent:function(a){if(a&&this._state===this.READY){this.animateScene(a)
}else{this.replaceScene(a)}return this},replaceScene:function(c){var e=this._targetView,f=this.STANDARD_LAYOUT,b=this.get("scenes"),a=b?b.indexOf(this.get("nowShowing")):-1;
this._targetView=c;this._targetIndex=a;if(this._timer){this._timer.invalidate()}this._leftView=this._rightView=this._start=this._end=null;
this._timer=null;this.removeAllChildren();if(e){e.set("layout",f)}if(c){c.set("layout",f)
}if(c){this.appendChild(c)}this._state=c?this.READY:this.NO_VIEW},animateScene:function(b){var c=this._targetView,g=this._targetIndex,a=this.get("scenes"),f=a?a.indexOf(this.get("nowShowing")):-1,e;
if(g<0||f<0||g===f){return this.replaceScene(b)}this._targetView=b;this._targetIndex=f;
if(f>g){this._leftView=c;this._rightView=b;this._target=-1}else{this._leftView=b;
this._rightView=c;this._target=1}this.removeAllChildren();if(c){this.appendChild(c)
}if(b){this.appendChild(b)}this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this._state=this.ANIMATING;this.tick()},tick:function(){this._timer=null;var a=Date.now(),e=(a-this._start)/(this._end-this._start),h=this._target,g=this._leftView,b=this._rightView,c,f;
if(e<0){e=0}if(!this.get("isVisibleInWindow")||(e>=1)){return this.replaceScene(this._targetView)
}c=SC.clone(this.get("frame"));f=Math.floor(c.width*e);if(h>0){c.left=0-(c.width-f);
g.set("layout",c);c=SC.clone(c);c.left=f;b.set("layout",c)}else{c.left=0-f;g.set("layout",c);
c=SC.clone(c);c.left=c.width-f;b.set("layout",c)}this._timer=this.invokeLater(this.tick,20);
return this},NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",STANDARD_LAYOUT:{top:0,left:0,bottom:0,right:0}});
SC.SegmentedView=SC.View.extend(SC.Control,{classNames:["sc-segmented-view"],theme:"square",value:null,isEnabled:YES,allowsEmptySelection:NO,allowsMultipleSelection:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:[],itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemKeyEquivalentKey:null,itemKeys:"itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey".w(),displayItems:function(){var g=this.get("items"),c=this.get("localize"),l=null,e,j,f=[],h=g.get("length"),i,k,b=SC._segmented_fetchKeys,a=SC._segmented_fetchItem;
for(i=0;i<h;i++){k=g.objectAt(i);if(SC.none(k)){continue}e=SC.typeOf(k);if(e===SC.T_STRING){j=[k.humanize().titleize(),k,YES,null,null,null,i]
}else{if(e!==SC.T_ARRAY){if(l===null){l=this.itemKeys.map(b,this)}j=l.map(a,k);j[j.length]=i;
if(!l[0]&&k.toString){j[0]=k.toString()}if(!l[1]){j[1]=k}if(!l[2]){j[2]=YES}}}if(c&&j[0]){j[0]=j[0].loc()
}if(c&&j[5]&&SC.typeOf(j[5])===SC.T_STRING){j[5]=j[5].loc()}f[f.length]=j}return f
}.property("items","itemTitleKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemWidthKey","itemToolTipKey"),itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)
}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)
}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this.set("renderLikeFirstTime",YES);
this.notifyPropertyChange("displayItems")},init:function(){arguments.callee.base.apply(this,arguments);
this.itemsDidChange()},displayProperties:["displayItems","value","activeIndex"],render:function(b,a){var h=this.get("displayItems");
var c=this.get("theme");if(c){b.addClass(c)}if(a||this.get("renderLikeFirstTime")){this._seg_displayItems=h;
this.renderDisplayItems(b,h);b.addStyle("text-align",this.get("align"));this.set("renderLikeFirstTime",NO)
}else{var l=this.get("activeIndex"),j=this.get("value"),e=SC.isArray(j);if(e&&j.get("length")===1){j=j.objectAt(0);
e=NO}var i={},f=h.length,g=this.$(".sc-segment"),k;while(--f>=0){k=h[f];i.sel=e?(j.indexOf(k[1])>=0):(k[1]===j);
i.active=(l===f);i.disabled=!k[2];SC.$(g[f]).setClass(i)}i=h=j=h=null}},renderDisplayItems:function(e,m){var p=this.get("value"),j=SC.isArray(p),t=this.get("activeIndex"),k=m.length,o,n,b,l,g,s,a,c,h,f,q;
for(h=0;h<k;h++){g=e.begin("a").attr("role","button");s=m[h];o=s[0];n=s[3];a=s[5];
f={};q=[];if(this.get("layoutDirection")==SC.LAYOUT_HORIZONTAL){f.display="inline-block"
}q.push("sc-segment");if(!s[2]){q.push("disabled")}if(h===0){q.push("sc-first-segment")
}if(h===(k-1)){q.push("sc-last-segment")}if(h!==0&&h!==(k-1)){q.push("sc-middle-segment")
}if(j?(p.indexOf(s[1])>=0):(s[1]===p)){q.push("sel")}if(t===h){q.push("active")}if(s[4]){c=s[4];
f.width=c+"px"}g.addClass(q);g.addStyle(f);if(a){g.attr("title",a)}if(n){b=(n.indexOf("/")>=0)?n:SC.BLANK_IMAGE_URL;
l=(b===n)?"":n;n='<img src="'+b+'" alt="" class="icon '+l+'" />'}else{n=""}g.push('<span class="sc-button-inner"><label class="sc-button-label">',n+o,"</label></span>");
g.end()}},displayItemIndexForEvent:function(a){return this.displayItemIndexForPosition(a.pageX,a.pageY)
},displayItemIndexForPosition:function(f,e){var c=this.$(".sc-segment"),b=c.length,a,h,g;
for(a=0;a<b;a++){h=c[a];g=h.getBoundingClientRect();if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(e>g.top&&e<g.bottom){return a
}}else{if(f>g.left&&f<g.right){return a}}}return -1},keyDown:function(e){var g,h,f,a,j,c;
if(e.which===9){var b=e.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(b){b.becomeFirstResponder()}else{e.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")&&!this.get("allowsEmptySelection")){f=this.get("displayItems");
a=f.length;j=this.get("value");c=SC.isArray(j);if(e.which===39||e.which===40){for(g=0;
g<a-1;g++){h=f[g];if(c?(j.indexOf(h[1])>=0):(h[1]===j)){this.triggerItemAtIndex(g+1)
}}return YES}else{if(e.which===37||e.which===38){for(g=1;g<a;g++){h=f[g];if(c?(j.indexOf(h[1])>=0):(h[1]===j)){this.triggerItemAtIndex(g-1)
}}return YES}}}return YES},mouseDown:function(b){if(!this.get("isEnabled")){return YES
}var a=this.displayItemIndexForEvent(b);if(a>=0){this._isMouseDown=YES;this.set("activeIndex",a)
}return YES},mouseUp:function(b){var a=this.displayItemIndexForEvent(b);if(this._isMouseDown&&(a>=0)){this.triggerItemAtIndex(a)
}this._isMouseDown=NO;this.set("activeIndex",-1);return YES},mouseMoved:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}return YES},mouseExited:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}return YES},mouseEntered:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",-1)}return YES},touchStart:function(b){if(!this.get("isEnabled")){return YES
}var a=this.displayItemIndexForEvent(b);if(a>=0){this._isTouching=YES;this.set("activeIndex",a)
}return YES},touchEnd:function(b){var a=this.displayItemIndexForEvent(b);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a)
}this._isTouching=NO;this.set("activeIndex",-1);return YES},touchesDragged:function(b,c){var e=this.touchIsInBoundary(b);
if(e){if(!this._isTouching){this._touchDidEnter(b)}var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}else{if(this._isTouching){this._touchDidExit(b)}}this._isTouching=e;
return YES},_touchDidExit:function(b){var a=this.displayItemIndexForEvent(b);this.set("activeIndex",-1);
return YES},_touchDidEnter:function(b){var a=this.displayItemIndexForEvent(b);this.set("activeIndex",a);
return YES},triggerItemAtIndex:function(l){var j=this.get("displayItems"),m=j.objectAt(l),b,k,c,h,g;
if(!m[2]){return this}h=this.get("allowsEmptySelection");g=this.get("allowsMultipleSelection");
b=m[1];k=c=this.get("value");if(!SC.isArray(k)){k=[k]}if(!g){if(h&&(k.get("length")===1)&&(k.objectAt(0)===b)){k=[]
}else{k=[b]}}else{if(k.indexOf(b)>=0){if(k.get("length")>1||(k.objectAt(0)!==b)||h){k=k.without(b)
}}else{k=k.concat([b])}}switch(k.get("length")){case 0:k=null;break;case 1:k=k.objectAt(0);
break;default:break}var n=this.get("itemActionKey"),a=this.get("itemTargetKey"),f,i=null,e=this.getPath("pane.rootResponder");
if(n&&(m=this.get("items").objectAt(m[6]))){f=m.get?m.get(n):m[n];if(a){i=m.get?m.get(a):m[a]
}if(e){e.sendAction(f,i,this,this.get("pane"))}}if(!f&&c!==undefined){this.set("value",k)
}f=this.get("action");if(f&&e){e.sendAction(f,this.get("target"),this,this.get("pane"))
}},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}}});
SC._segmented_fetchKeys=function(a){return this.get(a)};SC._segmented_fetchItem=function(a){if(!a){return null
}return this.get?this.get(a):this[a]};sc_require("views/button");SC.SelectView=SC.ButtonView.extend({items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"separator",localize:YES,disableSort:YES,classNames:["sc-select-view"],_itemList:[],_currentSelItem:null,_itemIdx:null,value:null,showCheckbox:YES,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","items"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isSelectedBinding:"*menu.isVisibleInWindow",positionMenuBelow:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,leftAlign:function(){var b=0,a=this.get("controlSize");
if(a===SC.SMALL_CONTROL_SIZE){b=-14}if(a===SC.REGULAR_CONTROL_SIZE){b=-16}return b
}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");
b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)
})}return b},render:function(b,g){arguments.callee.base.apply(this,arguments);var c,k,o,q,u,h,f,t,i,m,a,l,e,j,v,p,n,s;
k=this.get("items");k=this.sortObjects(k);o=k.length;q=this.get("itemTitleKey");u=this.get("itemIconKey");
h=this.get("itemValueKey");f=this.get("itemSeparatorKey");t=this.get("showCheckbox");
i=this.get("value");m=this.get("localize");l=[];e=YES;j=0;k.forEach(function(w){if(w||w===0){v=q?(w.get?w.get(q):w[q]):w.toString();
v=m?v.loc():v;p=u?(w.get?w.get(u):w[u]):null;if(SC.none(w[u])){p=null}n=(h)?(w.get?w.get(h):w[h]):w;
if(!SC.none(i)&&!SC.none(n)){if(i===n){this.set("title",v);this.set("icon",p)}}if(n===this.get("value")){this.set("_itemIdx",j);
e=!t?NO:YES}else{e=NO}a=f?(w.get?w.get(f):w[f]):NO;if(j===0){this._defaultVal=n;this._defaultTitle=v;
this._defaultIcon=p}var x=SC.Object.create({separator:a,title:v,icon:p,value:n,isEnabled:YES,checkbox:e,action:this.displaySelectedItem});
l.push(x)}j+=1;this.set("_itemList",l)},this);if(g){this.invokeLast(function(){var w=this.get("value");
if(SC.none(w)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);
this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this._itemIdx)
},_action:function(m){var i,a,j,k,s,o,z,f,y,c,n,u,p,w,g,h,l,b,x;i=this.$(".sc-button-label")[0];
a=this.get("layer").offsetWidth;j=i.scrollWidth;k=this.get("lastMenuWidth");if(j){s=i.offsetWidth;
if(j&&s){a=a+j-s}}if(!k||(a>k)){k=a}o=this.get("_itemList");var t=this.get("customViewClassName");
var q=this.get("customViewMenuOffsetWidth");var e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";
e=t?(e+" "+t):e;SC.prepareStringMeasurement("",e);for(n=0,x=o.length;n<x;++n){y=o.objectAt(n);
z=SC.measureString(y.title).width;if(!f||(z>f)){f=z}}SC.teardownStringMeasurement();
k=(f+this.menuItemPadding>k)?f+this.menuItemPadding:k;var v=SC.RootResponder.responder.get("currentWindowSize").width;
if(k>v){k=(v-25)}this.set("lastMenuWidth",k);u=this.get("_currentSelItem");p=this.get("_itemList");
w=this.get("controlSize");g=this.get("menuPaneHeightPadding");h=this.get("exampleView");
l=h?h:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:p,exampleView:l,isEnabled:YES,menuHeightPadding:g,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:k},controlSize:w,itemWidth:k,contentView:SC.View.extend({})});
if(!b){return NO}b.popup(this,this.preferMatrix);b.set("currentSelectedMenuItem",u);
return YES},displaySelectedItem:function(){var k,b,g,j,c,a=0,h,f,i,l=null,e;k=this.parentMenu();
b=k.get("currentSelectedMenuItem");g=k.menuItemViews;if(b&&g){a=g.indexOf(b)}h=k.get("anchor");
f=k.get("items");i=f.length;while(!l&&(--i>=0)){e=f[i];j=!SC.none(e.title)?e.title:f.toString();
c=!SC.none(e.value)?e.value:j;if(j===this.get("value")&&(a===i)){l=f;h.set("value",c);
h.set("title",j)}}h.set("icon",this.get("icon")).set("_currentSelItem",b).set("_itemIdx",a)
},changeSelectButtonPreferMatrix:function(){var e=0,b=this.get("_itemIdx"),a=this.get("leftAlign"),f,c;
if(this.get("positionMenuBelow")){f=[a,4,3];this.set("preferMatrix",f)}else{if(b){e=b*this.CUSTOM_MENU_ITEM_HEIGHT
}c=[a,-e,2];this.set("preferMatrix",c)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();
return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{arguments.callee.base.apply(this,arguments)
}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()
}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)
}});SC.SelectFieldView=SC.FieldView.extend({tagName:"select",classNames:["sc-select-field-view"],objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,emptyName:null,localize:false,cpDidChange:YES,disableSort:NO,validateMenuItem:function(b,a){return true
},sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");
if(a){b=b.sortProperty(a)}else{b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];
c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}}return b},render:function(c,a){if(this.get("cpDidChange")){this.set("cpDidChange",NO);
var g=this.get("nameKey");var k=this.get("valueKey");var j=this.get("objects");var b=this.get("value");
var e,h;if(!this.get("isEnabled")){c.attr("disabled","disabled")}var i=this.get("localize");
if(!k&&b){b=SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(j){j=this.sortObjects(j);
if(!a){h=this.$input()[0];if(!h){return}h.innerHTML=""}var f=this.get("emptyName");
if(f){if(i){f=f.loc()}if(a){c.push('<option value="***">'+f+"</option>",'<option disabled="disabled"></option>')
}else{e=document.createElement("option");e.value="***";e.innerHTML=f;h.appendChild(e);
e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}j.forEach(function(o,n){if(o){var m=g?(o.get?o.get(g):o[g]):o.toString();
if(i){m=m.loc()}var p=(k)?(o.get?o.get(k):o[k]):o;if(!f&&n===0&&b==="***"){this.set("value",p)
}if(p){p=(SC.guidFor(p))?SC.guidFor(p):p.toString()}var l=(this.validateMenuItem&&this.validateMenuItem(p,m))?"":'disabled="disabled" ';
if(a){c.push("<option "+l+'value="'+p+'">'+m+"</option>")}else{e=document.createElement("option");
e.value=p;e.innerHTML=m;if(l.length>0){e.disable="disabled"}h.appendChild(e)}}else{if(a){c.push('<option disabled="disabled"></option>')
}else{e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}},this);
this.setFieldValue(b)}else{this.set("value",null)}}else{this.$().attr("disabled",this.get("isEnabled")?null:"disabled")
}},displayProperties:["objects","nameKey","valueKey","isEnabled"],_objectsObserver:function(){this.set("cpDidChange",YES)
}.observes("objects"),_objectArrayObserver:function(){this.set("cpDidChange",YES);
this.propertyDidChange("objects")}.observes("*objects.[]"),_nameKeyObserver:function(){this.set("cpDidChange",YES)
}.observes("nameKey"),_valueKeyObserver:function(){this.set("cpDidChange",YES)}.observes("valueKey"),acceptsFirstResponder:function(){return this.get("isEnabled")
}.property("isEnabled"),$input:function(){return this.$()},mouseDown:function(a){if(!this.get("isEnabled")){a.stop();
return YES}else{return arguments.callee.base.apply(this,arguments)}},getFieldValue:function(){var g=arguments.callee.base.apply(this,arguments);
var c=this.get("valueKey");var f=this.get("objects");var e=null;var a;if(g=="***"){g=null
}else{if(g&&f){var h=(SC.typeOf(f.length)===SC.T_FUNCTION)?f.length():f.length;while(!e&&(--h>=0)){a=f.objectAt?f.objectAt(h):f[h];
if(!a){continue}if(c){a=(a.get)?a.get(c):a[c]}var b=(a)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null;
if(g==b){e=a}}}}return(c||e)?e:g},setFieldValue:function(a){if(SC.none(a)){a="***"
}else{a=((a)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null)}this.$input().val(a);
return this},fieldDidFocus:function(){var a=this.get("isFocused");if(!a){this.set("isFocused",true)
}},fieldDidBlur:function(){var a=this.get("isFocused");if(a){this.set("isFocused",false)
}},_isFocusedObserver:function(){this.$().setClass("focus",this.get("isFocused"))
}.observes("isFocused"),didCreateLayer:function(){var a=this.$input();if(this.get("isEnabled")===false){this.$()[0].disabled=true
}SC.Event.add(a,"blur",this,this.fieldDidBlur);SC.Event.add(a,"focus",this,this.fieldDidFocus);
return arguments.callee.base.apply(this,arguments)},willDestroyLayer:function(){var a=this.$input();
SC.Event.remove(a,"focus",this,this.fieldDidFocus);SC.Event.remove(a,"blur",this,this.fieldDidBlur);
return arguments.callee.base.apply(this,arguments)}});SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",handleSelector:"img.sc-handle",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,displayProperties:"value minimum maximum".w(),render:function(e,h){arguments.callee.base.apply(this,arguments);
var c=this.get("minimum"),a=this.get("maximum"),g=this.get("value"),f=this.get("step");
g=Math.min(Math.max(g,c),a);if(!SC.none(f)&&f!==0){g=Math.round(g/f)*f}if(g!==0){g=Math.floor((g-c)/(a-c)*100)
}if(h){var b=SC.BLANK_IMAGE_URL;e.push('<span class="sc-inner">','<span class="sc-leftcap"></span>','<span class="sc-rightcap"></span>','<img src="',b,'" class="sc-handle" style="left: ',g,'%" />',"</span>")
}else{this.$(this.get("handleSelector")).css("left",g+"%")}},_isMouseDown:NO,mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,true)
},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)
}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b
},mouseWheel:function(b){if(!this.get("isEnabled")){return YES}var e=this.get("minimum"),a=this.get("maximum"),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*0.01),f=this.get("step"),g=Math.round(c/f)*f;
if(c<e){this.setIfChanged("value",e)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)
}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(b,f){var g=this.get("frame").width,e=this.get("minimum"),a=this.get("maximum"),h=this.get("step"),c=this.get("value"),i;
if(f){i=this.convertFrameFromView({x:b.pageX}).x;this._evtDiff=b.pageX-i}else{i=b.pageX-this._evtDiff
}i=Math.max(Math.min(i,g-8),8)-8;g-=16;i=i/g;i=e+((a-e)*i);if(h!==0){i=Math.round(i/h)*h
}if(Math.abs(c-i)>=0.01){this.set("value",i)}return YES},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},keyDown:function(c){if(c.which===9){var b=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(b){b.becomeFirstResponder()}else{c.allowDefault()}return YES}if(c.which===37||c.which===38||c.which===39||c.which===40){var f=this.get("minimum"),a=this.get("maximum"),g=this.get("step"),e=a-f,i=0,h;
if(c.which===37||c.which===38){if(g===0){if(e<100){i=this.get("value")-1}else{h=Math.abs(e/100);
if(h<2){h=2}i=this.get("value")-Math.abs(e/100)}}else{i=this.get("value")-g}}if(c.which===39||c.which===40){if(g===0){if(e<100){i=this.get("value")+2
}else{h=Math.abs(e/100);if(h<2){h=2}i=this.get("value")+h}}else{i=this.get("value")+g
}}if(i>=f&&i<=a){this.set("value",i)}}SC.RunLoop.begin().end();return YES},contentPropertyDidChange:function(c,a){var b=this.get("content");
this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()
}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')
},createChildViews:function(){},contentPropertyDidChange:function(g,c){var f=this.get("content");
var i=this.outlet("labelView");if(f===null){i.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);
return}else{i.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)
}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var h=(f&&f.get&&b)?f.get(b):f;
if(h!=this._title){this._title=h;if(h){h=h.capitalize()}i.set("title",h)}}var e=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);
if((c=="*")||(e&&(c==e))){if(e){i.removeClassName("no-disclosure");var a=(f&&f.get)?!!f.get(e):YES;
if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);i.set("value",a)}}else{i.addClassName("no-disclosure")
}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return
}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);
if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)
}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))
}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");
SC.BENCHMARK_SOURCE_LIST_VIEW=YES;SC.SourceListView=SC.ListView.extend({classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});
SC.RESIZE_BOTH="resize-both";SC.RESIZE_TOP_LEFT="resize-top-left";SC.RESIZE_BOTTOM_RIGHT="resize-bottom-right";
SC.SplitView=SC.View.extend({classNames:["sc-split-view"],displayProperties:["layoutDirection"],delegate:null,layoutDirection:SC.LAYOUT_HORIZONTAL,canCollapseViews:YES,autoresizeBehavior:SC.RESIZE_BOTTOM_RIGHT,defaultThickness:0.5,isSplitView:YES,topLeftView:SC.View,dividerView:SC.SplitDividerView,bottomRightView:SC.View,topLeftThickness:function(){var a=this.get("topLeftView");
return a?this.thicknessForView(a):0}.property("topLeftView").cacheable(),bottomRightThickness:function(){var a=this.get("bottomRightView");
return a?this.thicknessForView(a):0}.property("bottomRightView").cacheable(),thumbViewCursor:null,canCollapseView:function(a){return this.invokeDelegateMethod(this.delegate,"splitViewCanCollapse",this,a)
},thicknessForView:function(a){var c=this.get("layoutDirection"),b=a.get("frame");
return(c===SC.LAYOUT_HORIZONTAL)?b.width:b.height},createChildViews:function(){var f=[],e=["topLeftView","dividerView","bottomRightView"],c,b,a;
for(b=0,a=e.length;b<a;++b){if(c=this.get(e[b])){c=this[e[b]]=this.createChildView(c,{layoutView:this,rootElementPath:[b]});
f.push(c)}}this.set("childViews",f);return this},updateChildLayout:function(){var a=this.get("topLeftView"),b=this.get("bottomRightView"),i=this.get("dividerView"),j=this.get("layoutDirection"),e=this._desiredTopLeftThickness;
var k=this.get("dividerThickness");k=(!SC.none(k))?k:7;var h=(j===SC.LAYOUT_HORIZONTAL)?this.get("frame").width:this.get("frame").height,l=h-k-e,c=this.get("autoresizeBehavior"),g,f;
f=a.get("isCollapsed")||NO;a.setIfChanged("isVisible",!f);g=SC.clone(a.get("layout"));
if(j===SC.LAYOUT_HORIZONTAL){g.top=0;g.left=0;g.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:g.right=l+k;delete g.width;break;case SC.RESIZE_BOTTOM_RIGHT:delete g.right;
delete g.height;g.width=e;break}}else{g.top=0;g.left=0;g.right=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:g.bottom=l+k;delete g.height;break;case SC.RESIZE_BOTTOM_RIGHT:delete g.bottom;
delete g.width;g.height=e;break}}a.set("layout",g);if(i){g=SC.clone(i.get("layout"));
if(j===SC.LAYOUT_HORIZONTAL){g.width=k;delete g.height;g.top=0;g.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:delete g.left;g.right=l;delete g.centerX;delete g.centerY;
break;case SC.RESIZE_BOTTOM_RIGHT:g.left=e;delete g.right;delete g.centerX;delete g.centerY;
break}}else{delete g.width;g.height=k;g.left=0;g.right=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:delete g.top;g.bottom=l;delete g.centerX;delete g.centerY;
break;case SC.RESIZE_BOTTOM_RIGHT:g.top=e;delete g.bottom;delete g.centerX;delete g.centerY;
break}}i.set("layout",g)}f=b.get("isCollapsed")||NO;b.setIfChanged("isVisible",!f);
g=SC.clone(b.get("layout"));if(j===SC.LAYOUT_HORIZONTAL){g.top=0;g.bottom=0;g.right=0;
switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:g.left=e+k;
delete g.width;break;case SC.RESIZE_TOP_LEFT:delete g.left;g.width=l;break}}else{g.left=0;
g.right=0;g.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_BOTTOM_RIGHT:g.top=e+k;delete g.height;break;case SC.RESIZE_TOP_LEFT:delete g.top;
g.height=l;break}}b.set("layout",g);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")
},renderLayout:function(b,a){if(a||this._recalculateDivider){if(!this.get("thumbViewCursor")){this.set("thumbViewCursor",SC.Cursor.create())
}var e=this.get("layoutDirection"),g=this.get("frame"),f,j=this.$(),i=this.get("defaultThickness"),c=this.get("autoresizeBehavior");
var h=this.get("dividerThickness");h=(!SC.none(h))?h:7;if(this._recalculateDivider===undefined&&i<1){this._recalculateDivider=YES
}else{if(this._recalculateDivider){this._recalculateDivider=NO}}if(j[0]){f=(e===SC.LAYOUT_HORIZONTAL)?j[0].offsetWidth:j[0].offsetHeight
}else{f=(e===SC.LAYOUT_HORIZONTAL)?g.width:g.height}if(SC.none(i)||(i>0&&i<1)){i=Math.floor((f-(h))*(i||0.5))
}if(c===SC.RESIZE_BOTTOM_RIGHT){this._desiredTopLeftThickness=i}else{this._desiredTopLeftThickness=f-h-i
}this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");
this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));
this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");
this._updateTopLeftThickness(0);this._setCursorStyle();this.updateChildLayout()}arguments.callee.base.apply(this,arguments)
},render:function(b,c){arguments.callee.base.apply(this,arguments);if(this._inLiveResize){this._setCursorStyle()
}var a=this.get("layoutDirection");if(a===SC.LAYOUT_HORIZONTAL){b.addClass("sc-horizontal")
}else{b.addClass("sc-vertical")}},mouseDownInThumbView:function(a,c){var b=this.getPath("pane.rootResponder");
if(!b){return NO}b.dragDidStart(this);this._mouseDownX=a.pageX;this._mouseDownY=a.pageY;
this._thumbView=c;this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");
this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));
this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");
this.beginLiveResize();this._inLiveResize=YES;return YES},mouseDragged:function(a){var b=(this._layoutDirection===SC.LAYOUT_HORIZONTAL)?a.pageX-this._mouseDownX:a.pageY-this._mouseDownY;
this._updateTopLeftThickness(b);return YES},mouseUp:function(a){if(this._inLiveResize===YES){this._thumbView=null;
this._inLiveResize=NO;this.endLiveResize();return YES}return NO},touchesDragged:function(a){return this.mouseDragged(a)
},touchEnd:function(a){return this.mouseUp(a)},doubleClickInThumbView:function(b,e){var a=this._topLeftView,c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);
if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)
}else{this._updateBottomRightThickness(this.bottomRightThickness()*-1)}if(!a.get("isCollapsed")){this._uncollapsedThickness=null
}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)
}else{this._updateBottomRightThickness(this._uncollapsedThickness)}a._uncollapsedThickness=null
}this._setCursorStyle();return true},_updateTopLeftThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),h=this.thicknessForView(c),k=this._dividerThickness,j=0,b=this._topLeftViewThickness+f,n=this._layoutDirection,p=this.canCollapseView(c),m=b,l=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),o,i,q;
if(!a.get("isCollapsed")){j+=g}if(!c.get("isCollapsed")){j+=h}if(!SC.none(l)){m=Math.min(l,m)
}if(!SC.none(e)){m=Math.max(e,m)}l=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");
o=j-m;if(!SC.none(l)){o=Math.min(l,o)}if(!SC.none(e)){o=Math.max(e,o)}m=j-o;m=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,m);
m=Math.min(m,j);m=Math.max(0,m);i=a.get("collapseAtThickness");if(!i){i=0}q=c.get("collapseAtThickness");
q=SC.none(q)?j:(j-q);if((b<=i)&&this.canCollapseView(a)){l=c.get("maxThickness");
if(!l||(k+j)<=l){m=0}}else{if(b>=q&&this.canCollapseView(c)){l=a.get("maxThickness");
if(!l||(k+j)<=l){m=j}}}if(m!=this.thicknessForView(a)){this._desiredTopLeftThickness=m;
a.set("isCollapsed",m===0);c.set("isCollapsed",m>=j);this.updateChildLayout();this.displayDidChange()
}},_updateBottomRightThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),h=this.thicknessForView(c),k=this._dividerThickness,j=0,b=this._topLeftViewThickness+f,n=this._layoutDirection,p=this.canCollapseView(c),m=b,l=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),o,i,q;
if(!a.get("isCollapsed")){j+=g}if(!c.get("isCollapsed")){j+=h}if(!SC.none(l)){m=Math.min(l,m)
}if(!SC.none(e)){m=Math.max(e,m)}l=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");
o=j-m;if(!SC.none(l)){o=Math.min(l,o)}if(!SC.none(e)){o=Math.max(e,o)}m=j-o;m=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,m);
m=Math.min(m,j);m=Math.max(0,m);i=a.get("collapseAtThickness");if(!i){i=0}q=c.get("collapseAtThickness");
q=SC.none(q)?j:(j-q);if((b<=i)&&this.canCollapseView(a)){l=c.get("maxThickness");
if(!l||(k+j)<=l){m=0}}else{if(b>=q&&this.canCollapseView(c)){l=a.get("maxThickness");
if(!l||(k+j)<=l){m=j}}}if(m!=this.thicknessForView(a)){this._desiredTopLeftThickness=m;
a.set("isCollapsed",m===0);c.set("isCollapsed",m>=j);this.updateChildLayout();this.displayDidChange()
}},_setCursorStyle:function(){var e=this._topLeftView,f=this._bottomRightView,a=this.get("thumbViewCursor"),b=this.thicknessForView(e),c=this.thicknessForView(f);
this._layoutDirection=this.get("layoutDirection");if(e.get("isCollapsed")||b===this.get("topLeftMinThickness")||c==this.get("bottomRightMaxThickness")){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"s-resize")
}else{if(f.get("isCollapsed")||b===this.get("topLeftMaxThickness")||c==this.get("bottomRightMinThickness")){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"w-resize":"n-resize")
}else{if(SC.browser.msie){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"n-resize")
}else{a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"ew-resize":"ns-resize")
}}}}.observes("layoutDirection"),splitViewCanCollapse:function(b,a){if(b.get("canCollapseViews")===NO){return NO
}if(a.get("canCollapse")===NO){return NO}return YES},splitViewConstrainThickness:function(c,a,b){return b
},_forceSplitCalculation:function(){this.updateLayout()}.observes("*pane.isPaneAttached"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);
this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")
}.observes("layout")});sc_require("views/split");SC.SplitDividerView=SC.View.extend({classNames:["sc-split-divider-view"],prepareContext:function(a,c){var b=this.get("splitView");
if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)
},mouseDown:function(a){var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},doubleClick:function(a){var b=this.get("splitView");return(b)?b.doubleClickInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},touchStart:function(a){return this.mouseDown(a)}});sc_require("views/collection");
SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(a){return this.get("allContentIndexes")
},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)
}return this},_updateHeight:function(){var f=this.get("childViews"),b=f.get("length"),c,e,a;
if(b===0){a=1}else{c=f.objectAt(b-1);e=c?c.get("layer"):null;a=e?(e.offsetTop+e.offsetHeight):1;
e=null}this.adjust("height",a)},didReload:function(a){return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()
}});SC.StaticContentView=SC.View.extend(SC.StaticLayout,{classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()
},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}
}if(a.getBoundingClientRect){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,height:b.height}
}else{return{x:0,y:0,width:a.clientWidth,height:a.clientHeight}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()
},didCreateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");
if(b){a.push(b||"")}},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();
return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";
SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");
this.get("containerView").set("nowShowing",a);this.get("segmentedView").set("value",a);
return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");
var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)
}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));
return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);
this._tab_nowShowingDidChange()._tab_itemsDidChange()},awake:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);
if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var g=[],a,f,e,c=this.get("tabLocation"),b=this.get("tabHeight");
e=(c===SC.TOP_LOCATION)?{top:b/2+1,left:0,right:0,bottom:0}:(c===SC.TOP_TOOLBAR_LOCATION)?{top:b+1,left:0,right:0,bottom:0}:{top:0,left:0,right:0,bottom:b-1};
f=this.containerView.extend(SC.Border,{layout:e,borderStyle:SC.BORDER_BLACK});a=this.containerView=this.createChildView(f);
g.push(a);e=(c===SC.TOP_LOCATION||c===SC.TOP_TOOLBAR_LOCATION)?{height:b,left:0,right:0,top:0}:{height:b,left:0,right:0,bottom:0};
this.segmentedView=this.get("segmentedView").extend({layout:e,_sc_tab_segmented_valueDidChange:function(){var h=this.get("parentView");
if(h){h.set("nowShowing",this.get("value"))}this.set("layerNeedsUpdate",YES);this.invokeOnce(this.updateLayerIfNeeded)
}.observes("value"),init:function(){var h=this.get("parentView");if(h){SC._TAB_ITEM_KEYS.forEach(function(i){this[i]=h.get(i)
},this)}return arguments.callee.base.apply(this,arguments)}});a=this.segmentedView=this.createChildView(this.segmentedView);
g.push(a);this.set("childViews",g);return this},containerView:SC.ContainerView,segmentedView:SC.SegmentedView});
SC._TAB_ITEM_KEYS="itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey itemActionKey itemTargetKey".w();
SC.ThumbView=SC.View.extend({classNames:["sc-thumb-view"],isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),prepareContext:function(a,c){var b=this.get("splitView");
if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)
},mouseDown:function(a){if(!this.get("isEnabled")){return NO}var b=this.get("splitView");
return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},touchStart:function(a){return this.mouseDown(a)}});SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],anchorLocation:null,layout:{left:0,height:32,right:0},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation)
}arguments.callee.base.apply(this,arguments)}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,e){var c=this.get("value");
if(e){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0p;"></iframe>')
}else{var b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}},didCreateLayer:function(){var a=this.$("iframe");
SC.Event.add(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;
var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;
if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)
}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;
SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},createChildViews:function(){var a=this.get("contentView");
if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);
this.childViews=[a]}},render:function(a,b){if(b){a.push("<div class='top-left-edge'></div>","<div class='top-edge'></div>","<div class='top-right-edge'></div>","<div class='right-edge'></div>","<div class='bottom-right-edge'></div>","<div class='bottom-edge'></div>","<div class='bottom-left-edge'></div>","<div class='left-edge'></div>","<div class='content-background'></div>")
}arguments.callee.base.apply(this,arguments)},contentViewDidChange:function(){var a=this.get("contentView");
a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/desktop")
}SC.DataSource=SC.Object.extend({fetch:function(a,b){return NO},retrieveRecords:function(a,c,b){return this._handleEach(a,c,this.retrieveRecord,b)
},commitRecords:function(c,b,h,g,i){var e,f,a;if(b.length>0){e=this.createRecords.call(this,c,b,i)
}if(h.length>0){f=this.updateRecords.call(this,c,h,i)}if(g.length>0){a=this.destroyRecords.call(this,c,g,i)
}return((e===f)&&(e===a))?e:SC.MIXED_STATE},cancel:function(a,b){return NO},updateRecords:function(a,b,c){return this._handleEach(a,b,this.updateRecord,null,c)
},createRecords:function(a,b,c){return this._handleEach(a,b,this.createRecord,null,c)
},destroyRecords:function(a,b,c){return this._handleEach(a,b,this.destroyRecord,null,c)
},_handleEach:function(h,e,c,a,b){var f=e.length,i,g,j,k;if(!a){a=[]}for(i=0;i<f;
i++){k=a[i]?a[i]:b;j=c.call(this,h,e[i],k,b);if(g===undefined){g=j}else{if(g===YES){g=(j===YES)?YES:SC.MIXED_STATE
}else{if(g===NO){g=(j===NO)?NO:SC.MIXED_STATE}}}}return g?g:null},updateRecord:function(a,b,c){return NO
},retrieveRecord:function(a,b,c){return NO},createRecord:function(a,b,c){return NO
},destroyRecord:function(a,b,c){return NO}});sc_require("data_sources/data_source");
SC.CascadeDataSource=SC.DataSource.extend({dataSources:null,from:function(a){var b=this.get("dataSources");
if(!b){this.set("dataSources",b=[])}b.push(a);return this},fetch:function(c,h){var f=this.get("dataSources"),b=f?f.length:0,e=NO,i,g,a;
for(a=0;(e!==YES)&&a<b;a++){g=f.objectAt(a);i=g.fetch?g.fetch.apply(g,arguments):NO;
e=this._handleResponse(e,i)}return e},retrieveRecords:function(i,e,b){var c=this.get("dataSources"),f=c?c.length:0,g=NO,j,a,h;
for(h=0;(g!==YES)&&h<f;h++){a=c.objectAt(h);j=a.retrieveRecords.apply(a,arguments);
g=this._handleResponse(g,j)}return g},commitRecords:function(j,c,h,e){var b=this.get("dataSources"),f=b?b.length:0,g=NO,k,a,i;
for(i=0;(g!==YES)&&i<f;i++){a=b.objectAt(i);k=a.commitRecords.apply(a,arguments);
g=this._handleResponse(g,k)}return g},cancel:function(c,g){var f=this.get("dataSources"),b=f?f.length:0,e=NO,i,h,a;
for(a=0;(e!==YES)&&a<b;a++){h=f.objectAt(a);i=h.cancel.apply(h,arguments);e=this._handleResponse(e,i)
}return e},init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("dataSources"),a=b?b.get("length"):0,c;
while(--a>=0){c=b[a];if(SC.typeOf(c)===SC.T_STRING){b[a]=this.get(c)}}},_handleResponse:function(b,a){if(a===YES){return YES
}else{if(b===NO){return(a===NO)?NO:SC.MIXED_STATE}else{return SC.MIXED_STATE}}}});
SC.Record=SC.Object.extend({isRecord:YES,primaryKey:"guid",id:function(a,b){if(b!==undefined){this.writeAttribute(this.get("primaryKey"),b);
return b}else{return SC.Store.idFor(this.storeKey)}}.property("storeKey").cacheable(),status:function(){return this.store.readStatus(this.storeKey)
}.property("storeKey").cacheable(),store:null,storeKey:null,isDestroyed:function(){return !!(this.get("status")&SC.Record.DESTROYED)
}.property("status").cacheable(),isEditable:function(a,b){if(b!==undefined){this._screc_isEditable=b
}if(this.get("status")&SC.Record.READY){return this._screc_isEditable}else{return NO
}}.property("status").cacheable(),_screc_isEditable:YES,isLoaded:function(){var b=SC.Record,a=this.get("status");
return !((a===b.EMPTY)||(a===b.BUSY_LOADING)||(a===b.ERROR))}.property("status").cacheable(),relationships:null,attributes:function(){var a=this.get("store"),b=this.storeKey;
return a.readEditableDataHash(b)}.property(),readOnlyAttributes:function(){var a=this.get("store"),c=this.storeKey,b=a.readDataHash(c);
if(b){b=SC.clone(b,YES)}return b}.property(),childRecords:null,childRecordNamespace:null,refresh:function(){this.get("store").refreshRecord(null,null,this.get("storeKey"));
return this},destroy:function(){this.get("store").destroyRecord(null,null,this.get("storeKey"));
this.notifyPropertyChange("status");this.propagateToAggregates();return this},recordDidChange:function(a){this.get("store").recordDidChange(null,null,this.get("storeKey"),a);
this.notifyPropertyChange("status");this.propagateToAggregates();return this},_editLevel:0,beginEditing:function(){this._editLevel++;
return this},endEditing:function(a){if(--this._editLevel<=0){this._editLevel=0;this.recordDidChange(a)
}return this},readAttribute:function(c){var a=this.get("store"),e=this.storeKey;var b=a.readDataHash(e);
return b?b[c]:undefined},writeAttribute:function(c,g,f){var a=this.get("store"),e=this.storeKey,b;
b=a.readEditableDataHash(e);if(!b){throw SC.Record.BAD_STATE_ERROR}if(g!==b[c]){if(!f){this.beginEditing()
}b[c]=g;if(c===this.get("primaryKey")){SC.Store.replaceIdFor(e,g);this.propertyDidChange("id")
}if(!f){this.endEditing(c)}}return this},propagateToAggregates:function(){var p=this.get("storeKey"),e=SC.Store.recordTypeFor(p),n,i,o,b,m;
var h=e.aggregates;if(!h){var g=this.get("store").readDataHash(p);h=[];for(var c in g){if(this[c]&&this[c].get&&this[c].get("aggregate")===YES){h.push(c)
}}e.aggregates=h}var l=SC.Record,a=l.DIRTY,f=l.READY_NEW,q=l.DESTROYED,s=l.READY_CLEAN,j;
j=function(u){var k,t;if(u){k=this.get("status");if((k&a)||(k&f)||(k&q)){t=u.get("status");
if(t===s){u.get("store").recordDidChange(u.constructor,null,u.get("storeKey"),null,YES)
}}}};for(n=0,i=h.length;n<i;++n){o=h[n];b=this.get(o);m=SC.kindOf(b,SC.ManyArray)?b:[b];
m.forEach(j,this)}},storeDidChangeProperties:function(a,b){if(a){this.notifyPropertyChange("status")
}else{if(b){this.beginPropertyChanges();b.forEach(function(f){this.notifyPropertyChange(f)
},this);this.notifyPropertyChange("status");this.endPropertyChanges()}else{this.allPropertiesDidChange()
}var e=this.relationships,c=e?e.length:0;while(--c>=0){e[c].recordPropertyDidChange(b)
}}},normalize:function(f){var k=this.primaryKey,c=this.get("id"),l=this.get("store"),n=this.get("storeKey"),m,i,e,q,h,p,b,a,j,o;
var g=l.readEditableDataHash(n)||{};g[k]=c;q=l.readDataHash(n);for(m in this){i=this[m];
if(i){e=i.typeClass;if(e){o=i.get("key")||m;b=SC.typeOf(e.call(i))===SC.T_CLASS;a=i.isChildRecordTransform;
if(!b&&!a){h=this.get(m);if(h!==undefined||(h===null&&f)){g[o]=h}}else{if(a){h=this.get(m);
if(h&&h.normalize){h.normalize()}}else{if(b){h=q[o];if(h!==undefined){g[o]=h}else{j=i.get("defaultValue");
if(SC.typeOf(j)===SC.T_FUNCTION){g[o]=j(this,m,j)}else{g[o]=j}}}}}}}}return this},unknownProperty:function(b,e){if(e!==undefined){var c=this.get("storeKey"),f=SC.Store.recordTypeFor(c);
if(f.ignoreUnknownProperties===YES){this[b]=e;return e}var a=this.get("primaryKey");
this.writeAttribute(b,e);if(b===a){SC.Store.replaceIdFor(c,e)}}return this.readAttribute(b)
},commitRecord:function(b){var a=this.get("store");a.commitRecord(undefined,undefined,this.get("storeKey"),b);
return this},isError:function(){return this.get("status")&SC.Record.ERROR}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null
}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");
return a.readError(this.get("storeKey"))||SC.Record.GENERIC_ERROR}else{return null
}}.property("isError").cacheable(),set:function(a,c){var b=this[a];if(b&&b.isProperty&&b.get&&!b.get("isEditable")){return this
}return arguments.callee.base.apply(this,arguments)},toString:function(){var a=this.get("store").readDataHash(this.get("storeKey"));
return"%@(%@) %@".fmt(this.constructor.toString(),SC.inspect(a),this.statusString())
},statusString:function(){var b=[],a=this.get("status");for(var c in SC.Record){if(c.match(/[A-Z_]$/)&&SC.Record[c]===a){b.push(c)
}}return b.join(" ")},registerChildRecord:function(g,f){var c=g.primaryKey||"childRecordKey";
var e=f[c];var b=null;var a=this.get("childRecords");if(e&&a){b=a[e]}if(SC.none(b)){b=this.createChildRecord(g,f)
}return b},createChildRecord:function(b,c){var a=null;SC.run(function(){var h=SC.Record._generateChildKey();
c=c||{};var g=b.primaryKey||"childRecordKey";var i=c[g];c[g]=h;var f=this.get("store");
if(SC.none(f)){throw"Error: during the creation of a child record: NO STORE ON PARENT!"
}a=f.createRecord(b,c);a._parentRecord=this;if(this.generateIdForChild){this.generateIdForChild(a)
}var e=this.get("childRecords");if(SC.none(e)){e=SC.Object.create();this.set("childRecords",e)
}e[h]=a},this);return a},generateIdForChild:function(a){}});SC.Record.mixin({ignoreUnknownProperties:NO,CLEAN:1,DIRTY:2,EMPTY:256,ERROR:4096,READY:512,READY_CLEAN:513,READY_DIRTY:514,READY_NEW:515,DESTROYED:1024,DESTROYED_CLEAN:1025,DESTROYED_DIRTY:1026,BUSY:2048,BUSY_LOADING:2052,BUSY_CREATING:2056,BUSY_COMMITTING:2064,BUSY_REFRESH:2080,BUSY_REFRESH_CLEAN:2081,BUSY_REFRESH_DIRTY:2082,BUSY_DESTROYING:2112,BAD_STATE_ERROR:SC.$error("Internal Inconsistency"),RECORD_EXISTS_ERROR:SC.$error("Record Exists"),NOT_FOUND_ERROR:SC.$error("Not found "),BUSY_ERROR:SC.$error("Busy"),GENERIC_ERROR:SC.$error("Generic Error"),_nextChildKey:0,attr:function(a,b){return SC.RecordAttribute.attr(a,b)
},fetch:function(b,a){return SC.FetchedAttribute.attr(b,a)},toMany:function(e,b){b=b||{};
var c=b.nested;var a;if(c){a=SC.ChildrenAttribute.attr(e,b)}else{a=SC.ManyAttribute.attr(e,b)
}return a},toOne:function(e,b){b=b||{};var c=b.nested;var a;if(c){a=SC.ChildAttribute.attr(e,b)
}else{a=SC.SingleAttribute.attr(e,b)}return a},storeKeysById:function(){var b=SC.keyFor("storeKey",SC.guidFor(this)),a=this[b];
if(!a){a=this[b]={}}return a},storeKeyFor:function(c){var b=this.storeKeysById(),a=b[c];
if(!a){a=SC.Store.generateStoreKey();SC.Store.idsByStoreKey[a]=c;SC.Store.recordTypesByStoreKey[a]=this;
b[c]=a}return a},storeKeyExists:function(c){var b=this.storeKeysById(),a=b[c];return a
},find:function(a,b){return a.find(this,b)},extend:function(){var a=SC.Object.extend.apply(this,arguments);
SC.Query._scq_didDefineRecordType(a);return a},_generateChildKey:function(){var a=SC.Record._nextChildKey+1;
SC.Record._nextChildKey=a;return a}});sc_require("data_sources/data_source");sc_require("models/record");
SC.FixturesDataSource=SC.DataSource.extend({simulateRemoteResponse:NO,latency:50,cancel:function(a,b){return NO
},fetch:function(a,b){if(b.get("location")!==SC.Query.LOCAL){throw SC.$error("SC.Fixture data source can only fetch local queries")
}if(!b.get("recordType")&&!b.get("recordTypes")){throw SC.$error("SC.Fixture data source can only fetch queries with one or more record types")
}if(this.get("simulateRemoteResponse")){this.invokeLater(this._fetch,this.get("latency"),a,b)
}else{this._fetch(a,b)}},_fetch:function(a,c){var e=c.get("recordType"),b=c.get("recordTypes")||[e];
b.forEach(function(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)
}if(f){this.loadFixturesFor(a,f)}},this);a.dataSourceDidFetchQuery(c)},retrieveRecords:function(a,c){var e=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._retrieveRecords,e,a,c)
}else{this._retrieveRecords(a,c)}return b},_retrieveRecords:function(a,b){b.forEach(function(e){var c=[],h=SC.Store.recordTypeFor(e),g=a.idFor(e),f=this.fixtureForStoreKey(a,e);
c.push(e);a.dataSourceDidComplete(e,f,g)},this)},updateRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._updateRecords,e,a,c)
}else{this._updateRecords(a,c)}return b},_updateRecords:function(a,b){b.forEach(function(c){var e=a.readDataHash(c);
this.setFixtureForStoreKey(a,c,e);a.dataSourceDidComplete(c)},this)},createRecords:function(a,b,e){var c=this.get("latency");
if(this.get("simulateRemoteResponse")){this.invokeLater(this._createRecords,c,a,b)
}else{this._createRecords(a,b)}return YES},_createRecords:function(a,b){b.forEach(function(f){var h=a.idFor(f),g=a.recordTypeFor(f),e=a.readDataHash(f),c=this.fixturesFor(g);
if(!h){h=this.generateIdFor(g,e,a,f)}this._invalidateCachesFor(g,f,h);c[h]=e;a.dataSourceDidComplete(f,null,h)
},this)},destroyRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._destroyRecords,e,a,c)
}else{this._destroyRecords(a,c)}return b},_destroyRecords:function(a,b){b.forEach(function(e){var g=a.idFor(e),f=a.recordTypeFor(e),c=this.fixturesFor(f);
this._invalidateCachesFor(f,e,g);if(g){delete c[g]}a.dataSourceDidDestroy(e)},this)
},loadFixturesFor:function(a,h,c){var b=[],f,e,g;f=this.fixturesFor(h);for(e in f){g=h.storeKeyFor(e);
if(a.peekStatus(g)===SC.Record.EMPTY){b.push(f[e])}if(c){c.push(g)}}if(b&&b.length>0){a.loadRecords(h,b)
}return this},generateIdFor:function(e,b,a,c){return"@id%@".fmt(SC.Store.generateStoreKey())
},fixtureForStoreKey:function(a,c){var f=a.idFor(c),e=a.recordTypeFor(c),b=this.fixturesFor(e);
return b?b[f]:null},setFixtureForStoreKey:function(a,e,c){var g=a.idFor(e),f=a.recordTypeFor(e),b=this.fixturesFor(f);
this._invalidateCachesFor(f,e,g);b[g]=c;return this},fixturesFor:function(i){if(!this._fixtures){this._fixtures={}
}var g=this._fixtures[SC.guidFor(i)];if(g){return g}var f=i?i.FIXTURES:null,b=f?f.length:0,c=i?i.prototype.primaryKey:"guid",a,e,h;
this._fixtures[SC.guidFor(i)]=g={};for(a=0;a<b;a++){e=f[a];h=e[c];if(!h){h=this.generateIdFor(i,e)
}g[h]=e}return g},fixturesLoadedFor:function(c){if(!this._fixtures){return NO}var a=[],b=this._fixtures[SC.guidFor(c)];
return b?YES:NO},hasFixturesFor:function(b){var a=NO;b.forEach(function(e){if(a!==SC.MIXED_STATE){var f=SC.Store.recordTypeFor(e),c=f?f.FIXTURES:null;
if(c&&c.length&&c.length>0){if(a===NO){a=YES}}else{if(a===YES){a=SC.MIXED_STATE}}}},this);
return a},_invalidateCachesFor:function(e,b,c){var a=this._storeKeyCache;if(a){delete a[SC.guidFor(e)]
}return this}});SC.Record.fixtures=SC.FixturesDataSource.create();sc_require("core");
sc_require("models/record");SC.Query=SC.Object.extend(SC.Copyable,SC.Freezable,{isQuery:YES,conditions:null,orderBy:null,recordType:null,recordTypes:null,expandedRecordTypes:function(){var b=SC.CoreSet.create(),a,c;
if(a=this.get("recordType")){this._scq_expandRecordType(a,b)}else{if(a=this.get("recordTypes")){a.forEach(function(e){this._scq_expandRecordType(e,b)
},this)}else{this._scq_expandRecordType(SC.Record,b)}}c=SC.Query._scq_queriesWithExpandedRecordTypes;
if(!c){c=SC.Query._scq_queriesWithExpandedRecordTypes=SC.CoreSet.create()}c.add(this);
return b.freeze()}.property("recordType","recordTypes").cacheable(),_scq_expandRecordType:function(b,a){if(a.contains(b)){return
}a.add(b);if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}b.subclasses.forEach(function(c){this._scq_expandRecordType(c,a)
},this)},parameters:null,location:"local",scope:null,isRemote:function(){return this.get("location")===SC.Query.REMOTE
}.property("location").cacheable(),isLocal:function(){return this.get("location")===SC.Query.LOCAL
}.property("location").cacheable(),isEditable:NO,contains:function(a,e){var f,b=YES;
if(f=this.get("recordTypes")){b=f.find(function(g){return SC.kindOf(a,g)})}else{if(f=this.get("recordType")){b=SC.kindOf(a,f)
}}if(!b){return NO}var c=this.get("scope");if(c&&!c.contains(a)){return NO}if(!this._isReady){this.parse()
}if(!this._isReady){return NO}if(e===undefined){e=this.parameters||this}return this._tokenTree.evaluate(a,e)
},containsRecordTypes:function(a){var b=this.get("recordType");if(b){return !!a.find(function(c){return SC.kindOf(c,b)
})}else{if(b=this.get("recordTypes")){return !!b.find(function(c){return !!a.find(function(e){return SC.kindOf(e,c)
})})}else{return YES}}},compare:function(g,e){var c=0,f,b,a,h;if(g===e){return 0}if(!this._isReady){this.parse()
}if(!this._isReady){return SC.compare(g.get("id"),e.get("id"))}b=this._order;if(SC.typeOf(b)===SC.T_FUNCTION){c=b.call(null,g,e)
}else{a=b?b.length:0;for(h=0;c===0&&(h<a);h++){f=b[h].propertyName;if(SC.Query.comparisons[f]){c=SC.Query.comparisons[f](g.get(f),e.get(f))
}else{c=SC.compare(g.get(f),e.get(f))}if((c!==0)&&b[h].descending){c=(-1)*c}}}if(c!==0){return c
}else{return SC.compare(g.get("id"),e.get("id"))}},_isReady:NO,parse:function(){var c=this.get("conditions"),e=this.get("queryLanguage"),b,a;
b=this._tokenList=this.tokenizeString(c,e);a=this._tokenTree=this.buildTokenTree(b,e);
this._order=this.buildOrder(this.get("orderBy"));this._isReady=!!a&&!a.error;if(a&&a.error){throw a.error
}return this._isReady},queryWithScope:function(c){var b=SC.keyFor("__query__",SC.guidFor(this)),a=c[b];
if(!a){c[b]=a=this.copy();a.set("scope",c);a.freeze()}return a},copyKeys:"conditions orderBy recordType recordTypes parameters location scope".w(),concatenatedProperties:"copyKeys".w(),copy:function(){var e={},c=this.get("copyKeys"),g=c?c.length:0,b,f,a;
while(--g>=0){b=c[g];f=this.get(b);if(f!==undefined){e[b]=f}}a=this.constructor.create(e);
e=null;return a},queryLanguage:{UNKNOWN:{firstCharacter:/[^\s'"\w\d\(\)\{\}]/,notAllowed:/[\s'"\w\d\(\)\{\}]/},PROPERTY:{firstCharacter:/[a-zA-Z_]/,notAllowed:/[^a-zA-Z_0-9]/,evalType:"PRIMITIVE",evaluate:function(b,a){return b.get(this.tokenValue)
}},NUMBER:{firstCharacter:/[\d\-]/,notAllowed:/[^\d\-\.]/,format:/^-?\d+$|^-?\d+\.\d+$/,evalType:"PRIMITIVE",evaluate:function(b,a){return parseFloat(this.tokenValue)
}},STRING:{firstCharacter:/['"]/,delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return this.tokenValue
}},PARAMETER:{firstCharacter:/\{/,lastCharacter:"}",delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]
}},"%@":{rememberCount:true,reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]
}},OPEN_PAREN:{firstCharacter:/\(/,singleCharacter:true},CLOSE_PAREN:{firstCharacter:/\)/,singleCharacter:true},AND:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return e&&b}},OR:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return e||b}},NOT:{reservedWord:true,rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.rightSide.evaluate(c,a);
return !b}},"=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.isEqual(e,b)}},"!=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return !SC.isEqual(e,b)}},"<":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==-1}},"<=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=1}},">":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==1}},">=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=-1}},BEGINS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.leftSide.evaluate(c,a);
var e=this.rightSide.evaluate(c,a);return(b&&b.indexOf(e)===0)}},ENDS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,b){var c=this.leftSide.evaluate(e,b);
var a=this.rightSide.evaluate(e,b);return(c&&c.indexOf(a)===(c.length-a.length))}},CONTAINS:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(f,a){var e=this.leftSide.evaluate(f,a)||[];
var h=this.rightSide.evaluate(f,a);var c=SC.typeOf(e);if(c===SC.T_STRING){return(e.indexOf(h)!==-1)
}else{if(c===SC.T_ARRAY||e.toArray){if(c!==SC.T_ARRAY){e=e.toArray()}var g=false;
var b=0;while(g===false&&b<e.length){if(h==e[b]){g=true}b++}return g}}}},ANY:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var g=this.leftSide.evaluate(e,a);
var b=this.rightSide.evaluate(e,a);var f=false;var c=0;while(f===false&&c<b.length){if(g==b[c]){f=true
}c++}return f}},MATCHES:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return b.test(e)}},TYPE_IS:{reservedWord:true,rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var c=SC.Store.recordTypeFor(e.storeKey);
var b=this.rightSide.evaluate(e,a);var f=SC.objectForPropertyPath(b);return c==f}},"null":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return null
}},"undefined":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return undefined
}},"false":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false
}},"true":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true
}},YES:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true
}},NO:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false
}}},tokenizeString:function(x,s){var l=[],v=null,j=null,g=null,w=null,a=null,k=null,e=null,h=null,u=false,b=false,n=false,o=false,p={};
function f(t,c){j=s[t];if(j.format&&!j.format.test(c)){t="UNKNOWN"}if(j.delimeted){o=true
}if(!j.delimeted){for(var i in s){if(s[i].reservedWord&&i==c){t=i}}}j=s[t];if(j&&j.rememberCount){if(!p[t]){p[t]=0
}c=p[t];p[t]+=1}l.push({tokenType:t,tokenValue:c});a=null;k=null;e=null}if(!x){return[]
}var m=x.length;for(var q=0;q<m;q++){u=(q===m-1);v=x.charAt(q);o=false;if(a){j=s[a];
b=j.delimeted?v===h:j.notAllowed.test(v);if(!b){e+=v}if(b||u){f(a,e)}if(u&&!b){o=true
}}if(!a&&!o){for(g in s){j=s[g];if(j.firstCharacter&&j.firstCharacter.test(v)){a=g
}}if(a){j=s[a];e=v;if(j.delimeted){e="";if(j.lastCharacter){h=j.lastCharacter}else{h=v
}}if(j.singleCharacter||u){f(a,e)}}}}return l},buildTokenTree:function(m,a){var p=m.slice();
var s=0;var u=[];var c=false;var q=[];if(!m||m.length===0){return{evaluate:function(){return true
}}}function t(i){var x=i;if(x<0){return false}var l=a[p[x].tokenType];if(!l){q.push("logic for token '"+p[x].tokenType+"' is not defined");
return false}p[x].evaluate=l.evaluate;return l}function b(x,i){var y=i;var l=t(y);
if(!l){return false}if(x=="left"){return l.leftType}if(x=="right"){return l.rightType
}}function o(i){var x=i;var l=t(x);if(!l){return false}else{return l.evalType}}function g(i){p.splice(i,1);
if(i<=s){s--}}function v(i){var l=i||s;if(l>0){return true}else{return false}}function k(i){var l=i;
if(l<0){return true}return(b("left",l)&&!p[l].leftSide)||(b("right",l)&&!p[l].rightSide)
}function j(l,x){var i=(x<l)?"left":"right";if(l<0||x<0){return false}if(!b(i,l)){return false
}if(!o(x)){return false}if(b(i,l)==o(x)){return true}else{return false}}function n(i){var l=i;
if(!k(l)){return false}if(!v(l)){return false}if(j(l,l-1)){return true}else{return false
}}function e(i){var l=i;if(k(l)){return false}if(!v(l)){return false}if(!k(l-1)){return false
}if(j(l-1,l)){return true}else{return false}}function h(i){var l=i;if(l<1){return false
}p[l].leftSide=p[l-1];g(l-1)}function w(i){var l=i;if(l<1){return false}p[l-1].rightSide=p[l];
g(l)}function f(i){g(i);g(u.pop())}for(s=0;s<p.length;s++){c=false;if(p[s].tokenType=="UNKNOWN"){q.push("found unknown token: "+p[s].tokenValue)
}if(p[s].tokenType=="OPEN_PAREN"){u.push(s)}if(p[s].tokenType=="CLOSE_PAREN"){f(s)
}if(n(s)){h(s)}if(e(s)){w(s);c=true}if(c){s--}}if(p.length==1){p=p[0]}else{q.push("string did not resolve to a single tree")
}if(q.length>0){return{error:q.join(",\n"),tree:p}}else{return p}},buildOrder:function(a){if(!a){return[]
}else{if(SC.typeOf(a)===SC.T_FUNCTION){return a}else{var e=a.split(",");for(var b=0;
b<e.length;b++){var c=e[b];c=c.replace(/^\s+|\s+$/,"");c=c.replace(/\s+/,",");c=c.split(",");
e[b]={propertyName:c[0]};if(c[1]&&c[1]=="DESC"){e[b].descending=true}}return e}}}});
SC.Query.mixin({LOCAL:"local",REMOTE:"remote",storeKeyFor:function(a){return a?a.get("storeKey"):null
},containsRecords:function(h,f,e){var g=[];for(var b=0,a=f.get("length");b<a;b++){var c=f.objectAt(b);
if(c&&h.contains(c)){g.push(c.get("storeKey"))}}g=SC.Query.orderStoreKeys(g,h,e);
return g},orderStoreKeys:function(f,g,b){if(f){var a=SC.Query,e=a._TMP_STORES,h=a._TMP_QUERIES;
if(!e){e=a._TMP_STORES=[]}if(!h){h=a._TMP_QUERIES=[]}e.push(b);h.push(g);var c=f.sort(SC.Query.compareStoreKeys);
a._TMP_STORES.pop();a._TMP_QUERIES.pop()}return f},compareStoreKeys:function(j,g){var o=SC.Query,m=o._TMP_STORES,b=o._TMP_QUERIES,p=m[m.length-1],n=b[b.length-1],c=n.compare,e=p.materializeRecord(j),a=p.materializeRecord(g);
if(c!==o.prototype.compare){return c.call(n,e,a)}else{var q=0,l,f,k,h;if(e===a){return 0
}if(!n._isReady){n.parse()}if(!n._isReady){return SC.compare(e.get("id"),a.get("id"))
}f=n._order;if(SC.typeOf(f)===SC.T_FUNCTION){q=f.call(null,e,a)}else{k=f?f.length:0;
for(h=0;q===0&&(h<k);h++){l=f[h].propertyName;if(SC.Query.comparisons[l]){q=SC.Query.comparisons[l](e.get(l),a.get(l))
}else{q=SC.compare(e.get(l),a.get(l))}if((q!==0)&&f[h].descending){q=(-1)*q}}}if(q!==0){return q
}else{return SC.compare(e.get("id"),a.get("id"))}}},build:function(i,c,h,e){var a=null,g,b,j,f;
if(c&&c.isQuery){if(c.get("location")===i){return c}else{return c.copy().set("location",i).freeze()
}}if(typeof c===SC.T_STRING){g=SC.objectForPropertyPath(c);if(!g){throw"%@ did not resolve to a class".fmt(c)
}c=g}else{if(c&&c.isEnumerable){g=[];c.forEach(function(k){if(typeof k===SC.T_STRING){k=SC.objectForPropertyPath(k)
}if(!k){throw"cannot resolve record types: %@".fmt(c)}g.push(k)},this);c=g}else{if(!c){c=SC.Record
}}}if(e===undefined){e=null}if(h===undefined){h=null}if(!e&&(typeof h!==SC.T_STRING)){a=h;
h=null}if(!e&&!a){f=SC.Query._scq_recordTypeCache;if(!f){f=SC.Query._scq_recordTypeCache={}
}b=f[i];if(!b){b=f[i]={}}if(c.isEnumerable){j=c.map(function(l){return SC.guidFor(l)
});j=j.sort().join(":")}else{j=SC.guidFor(c)}if(h){j=[j,h].join("::")}g=b[j];if(!g){if(c.isEnumerable){a={recordTypes:c.copy()}
}else{a={recordType:c}}a.location=i;a.conditions=h;g=b[j]=SC.Query.create(a).freeze()
}}else{if(!a){a={}}if(!a.location){a.location=i}if(c&&c.isEnumerable){a.recordsTypes=c
}else{a.recordType=c}if(h){a.conditions=h}if(e){a.parameters=e}g=SC.Query.create(a).freeze()
}return g},local:function(c,a,b){return this.build(SC.Query.LOCAL,c,a,b)},remote:function(c,a,b){return this.build(SC.Query.REMOTE,c,a,b)
},_scq_didDefineRecordType:function(){var a=SC.Query._scq_queriesWithExpandedRecordTypes;
if(a){a.forEach(function(b){b.notifyPropertyChange("expandedRecordTypes")},this);
a.clear()}}});SC.Query.comparisons={};SC.Query.registerComparison=function(a,b){SC.Query.comparisons[a]=b
};SC.Query.registerQueryExtension=function(b,a){SC.Query.prototype.queryLanguage[b]=a
};SC.Q=SC.Query.from;sc_require("core");sc_require("models/record");sc_require("system/query");
SC.ChildRecord=SC.Record.extend({isChildRecord:YES,type:null,primaryKey:"childRecordKey",_parentRecord:null,status:function(){var a=SC.Record.EMPTY;
if(this._parentRecord){a=this._parentRecord.get("status");this.store.writeStatus(this.storeKey,a);
this.store.dataHashDidChange(this.storeKey)}else{a=this.store.readStatus(this.storeKey)
}return a}.property("storeKey").cacheable(),recordDidChange:function(){if(this._parentRecord&&this._parentRecord.recordDidChange){this._parentRecord.recordDidChange()
}else{arguments.callee.base.apply(this,arguments)}},createChildRecord:function(e,c){var a,b=this._parentRecord;
if(b){a=b.createChildRecord(e,c)}else{a=arguments.callee.base.apply(this,arguments)
}return a}});sc_require("models/record");sc_require("models/child_record");SC.RecordAttribute=SC.Object.extend({defaultValue:null,type:String,key:null,isRequired:NO,isEditable:YES,useIsoDate:YES,aggregate:NO,typeClass:function(){var a=this.get("type");
if(SC.typeOf(a)===SC.T_STRING){a=SC.objectForPropertyPath(a)}return a}.property("type").cacheable(),transform:function(){var a=this.get("typeClass")||String,c=SC.RecordAttribute.transforms,b;
while(a&&!(b=c[SC.guidFor(a)])){if(a.superclass.hasOwnProperty("create")){a=a.superclass
}else{a=SC.T_FUNCTION}}return b}.property("typeClass").cacheable(),toType:function(a,c,f){var b=this.get("transform"),e=this.get("typeClass");
if(b&&b.to){f=b.to(f,this,e,a,c)}return f},fromType:function(a,c,f){var b=this.get("transform"),e=this.get("typeClass");
if(b&&b.from){f=b.from(f,this,e,a,c)}return f},call:function(a,b,c){var e=this.get("key")||b,f;
if((c!==undefined)&&this.get("isEditable")){f=this.fromType(a,b,c);a.writeAttribute(e,f)
}f=c=a.readAttribute(e);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);
if((f!==c)&&a.get("store").readDataHash(a.get("storeKey"))){a.writeAttribute(e,c,true)
}}}else{c=this.toType(a,b,c)}return c},isProperty:YES,isCacheable:YES,dependentKeys:[],init:function(){arguments.callee.base.apply(this,arguments);
this.cacheKey="__cache__"+SC.guidFor(this);this.lastSetValueKey="__lastValue__"+SC.guidFor(this)
}});SC.RecordAttribute.attr=function(a,b){if(!b){b={}}if(!b.type){b.type=a||String
}return this.create(b)};SC.RecordAttribute.transforms={};SC.RecordAttribute.registerTransform=function(a,b){SC.RecordAttribute.transforms[SC.guidFor(a)]=b
};SC.RecordAttribute.registerTransform(Boolean,{to:function(a){return SC.none(a)?null:!!a
}});SC.RecordAttribute.registerTransform(Number,{to:function(a){return SC.none(a)?null:Number(a)
}});SC.RecordAttribute.registerTransform(String,{to:function(a){if(!(typeof a===SC.T_STRING)&&!SC.none(a)&&a.toString){a=a.toString()
}return a}});SC.RecordAttribute.registerTransform(Array,{to:function(a){if(!SC.isArray(a)&&!SC.none(a)){a=[]
}return a}});SC.RecordAttribute.registerTransform(Object,{to:function(a){if(!(typeof a==="object")&&!SC.none(a)){a={}
}return a}});SC.RecordAttribute.registerTransform(SC.Record,{to:function(f,a,e,c){var b=c.get("store");
if(SC.none(f)||(f==="")){return null}else{return b.find(e,f)}},from:function(a){return a?a.get("id"):null
}});SC.RecordAttribute.registerTransform(SC.T_FUNCTION,{to:function(f,a,e,c){e=e.apply(c);
var b=c.get("store");return b.find(e,f)},from:function(a){return a.get("id")}});SC.RecordAttribute.registerTransform(Date,{to:function(i,a){if(i===null){return null
}var c;i=i.toString()||"";if(a.get("useIsoDate")){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",h=i.match(new RegExp(e)),g=0,b=new Date(h[1],0,1),f;
if(h[3]){b.setMonth(h[3]-1)}if(h[5]){b.setDate(h[5])}if(h[7]){b.setHours(h[7])}if(h[8]){b.setMinutes(h[8])
}if(h[10]){b.setSeconds(h[10])}if(h[12]){b.setMilliseconds(Number("0."+h[12])*1000)
}if(h[14]){g=(Number(h[16])*60)+Number(h[17]);g*=((h[15]=="-")?1:-1)}g-=b.getTimezoneOffset();
f=(Number(b)+(g*60*1000));c=new Date();c.setTime(Number(f))}else{c=new Date(Date.parse(i))
}return c},_dates:{},_zeropad:function(a){return((a<0)?"-":"")+((a<10)?"0":"")+Math.abs(a)
},from:function(b){var a=this._dates[b.getTime()];if(a){return a}var e=this._zeropad,c=0-b.getTimezoneOffset()/60;
c=(c===0)?"Z":"%@:00".fmt(e(c));this._dates[b.getTime()]=a="%@-%@-%@T%@:%@:%@%@".fmt(e(b.getFullYear()),e(b.getMonth()+1),e(b.getDate()),e(b.getHours()),e(b.getMinutes()),e(b.getSeconds()),c);
return a}});if(SC.DateTime&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c
}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b
}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})
}sc_require("models/record");sc_require("models/record_attribute");SC.ChildAttribute=SC.RecordAttribute.extend({isChildRecordTransform:YES,toType:function(e,c,f){var b=null,g=SC.keyFor("__kid__",SC.guidFor(this)),h=this.get("typeClass");
if(e[g]){return e[g]}if(!e){throw"SC.Child: Error during transform: Unable to retrieve parent record."
}if(f){var a=e.get("childRecordNamespace");if(f.type&&!SC.none(a)){h=a[f.type]}if(!h||SC.typeOf(h)!==SC.T_CLASS){throw"SC.Child: Error during transform: Invalid record type."
}b=e[g]=e.registerChildRecord(h,f)}return b},fromType:function(a,b,c){return c},call:function(a,b,c){var e=this.get("key")||b,g=SC.keyFor("__kid__",SC.guidFor(this)),f;
if(c!==undefined){this.orphan(a);f=this.fromType(a,b,c);a[g]=null;a.writeAttribute(e,f);
c=this.toType(a,b,c)}else{c=a.readAttribute(e);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);
if(a.attributes()){a.writeAttribute(e,c,true)}}}else{c=this.toType(a,b,c)}}return c
},orphan:function(f){var i=SC.keyFor("__kid__",SC.guidFor(this)),b,g,c,e,h,a;a=f?f[i]:null;
if(a){c=a.get("readOnlyAttributes");for(e in c){h=a[e];if(h&&h.isChildRecordTransform){h.orphan(f)
}}b=a.get("store");if(b){g=a.storeKey}if(g){b.unloadRecord(undefined,undefined,g)
}}}});sc_require("models/record");sc_require("models/record_attribute");sc_require("models/child_attribute");
SC.ChildrenAttribute=SC.ChildAttribute.extend({toType:function(b,e,f){var h=this.get("key")||e,g=SC.keyFor("__kidsArray__",SC.guidFor(this)),c=b[g],i=this.get("typeClass"),a;
if(!c){c=SC.ChildArray.create({record:b,propertyName:h,defaultRecordType:i});b[g]=this._cachedRef=c;
a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},orphan:function(a){var f=this._cachedRef,g,j,i,h,c,b,e;
if(f){f.forEach(function(k){i=k.get("readOnlyAttributes");for(h in i){b=k[h];if(b&&b.isChildRecordTransform){b.orphan(a)
}}g=k.get("store");if(g){j=k.storeKey}if(j){g.unloadRecord(undefined,undefined,j)
}},this)}}});sc_require("models/record");sc_require("models/record_attribute");SC.FetchedAttribute=SC.RecordAttribute.extend({paramValueKey:"link",paramOwnerKey:"owner",paramRelKey:"rel",queryKey:null,isEditable:NO,toType:function(e,j,h){var i=e.get("store");
if(!i){return null}var b=this.get("paramValueKey"),a=this.get("paramOwnerKey"),g=this.get("paramRelKey"),f=this.get("queryKey")||this.get("typeClass"),c={};
if(b){c[b]=h}if(a){c[a]=e}if(g){c[g]=this.get("key")||j}return i.findAll(f,c)},fromType:function(a,b,c){return c
}});sc_require("models/record");sc_require("models/record_attribute");SC.ManyAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,orderBy:null,toType:function(b,e,g){var f=this.get("typeClass"),i=this.get("key")||e,h=SC.keyFor("__manyArray__",SC.guidFor(this)),c=b[h],a;
if(!c){c=SC.ManyArray.create({recordType:f,record:b,propertyName:i,manyAttribute:this});
b[h]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c
},fromType:function(b,f,g){var c=[];if(!SC.isArray(g)){throw"Expects toMany attribute to be an array"
}var a=g.get("length");for(var e=0;e<a;e++){c[e]=g.objectAt(e).get("id")}return c
},inverseDidRemoveRecord:function(a,b,c,e){var f=a.get(b);if(f){f.removeInverseRecord(c)
}},inverseDidAddRecord:function(a,b,c,e){var f=a.get(b);if(f){f.addInverseRecord(c)
}}});sc_require("models/record");sc_require("models/record_attribute");SC.SingleAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,call:function(c,j,b){var a=this.get("key")||j,i,h,k,g,f,e;
if(b!==undefined&&this.get("isEditable")){if(b&&!SC.kindOf(b,SC.Record)){throw"%@ is not an instance of SC.Record".fmt(b)
}i=this.get("inverse");if(i){k=this._scsa_call(c,j)}e=this.fromType(c,j,b);c.writeAttribute(a,e,!this.get("isMaster"));
f=b;if(i&&(k!==b)){if(k&&(g=k[i])){g.inverseDidRemoveRecord(k,i,c,j)}if(b&&(g=b[i])){g.inverseDidAddRecord(b,i,c,j)
}}}else{f=this._scsa_call(c,j,b)}return f},_scsa_call:SC.RecordAttribute.prototype.call,inverseDidRemoveRecord:function(c,g,h,i){var b=this.get("inverse"),f=this._scsa_call(c,g),e=this.get("isMaster"),a;
c.writeAttribute(g,null,!e);c.notifyPropertyChange(g);if((f!==h)||(i!==b)){if(f&&(a=f[b])){a.inverseDidRemoveRecord(f,b,c,g)
}}},inverseDidAddRecord:function(a,i,c,h){var f=this.get("inverse"),j=this._scsa_call(a,i),g=this.get("isMaster"),e,b;
b=this.fromType(a,i,c);a.writeAttribute(i,b,!g);a.notifyPropertyChange(i);if((j!==c)||(h!==f)){if(j&&(e=j[f])){e.inverseDidRemoveRecord(j,f,a,i)
}}}});SC.ChildArray=SC.Object.extend(SC.Enumerable,SC.Array,{defaultRecordType:null,record:null,propertyName:null,children:null,store:function(){return this.get("record").get("store")
}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")
}.property("record").cacheable(),readOnlyChildren:function(){return this.get("record").readAttribute(this.get("propertyName"))
}.property(),editableChildren:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;
b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}if(b!==this._prevChildren){this.recordPropertyDidChange()
}return b}.property(),length:function(){var a=this.get("readOnlyChildren");return a?a.length:0
}.property("readOnlyChildren"),objectAt:function(b){var f=this._records,e=this.get("readOnlyChildren"),g,c;
var a=e?e.length:0;if(!e){return undefined}if(f&&(c=f[b])){return c}if(!f){this._records=f=[]
}if(b>=a){return undefined}g=e.objectAt(b);if(!g){return undefined}f[b]=c=this._materializeChild(g);
return c},replace:function(l,a,k){var b=this.get("editableChildren"),h=k?(k.get?k.get("length"):k.length):0,g=this.get("record"),e=this.get("propertyName"),j,c;
b.replace(l,a,k);for(var f=l;f<=l+a;f+=1){this.objectAt(f)}g.recordDidChange(e);return this
},normalize:function(){this.forEach(function(b,a){if(b.normalize){b.normalize()}})
},_materializeChild:function(f){var i=this.get("store"),b=this.get("record"),e=this.get("defaultRecordType"),a,g,j,c;
if(!b){return undefined}var h=b.get("childRecordNamespace");if(f.type&&!SC.none(h)){e=h[f.type]
}if(!e||SC.typeOf(e)!==SC.T_CLASS){throw"ChildrenArray: Error during transform: Invalid record type."
}c=e.prototype.primaryKey||"childRecordKey";a=f[c];j=i.storeKeyExists(e,a);if(j){g=i.materializeRecord(j)
}else{g=b.registerChildRecord(e,f)}return g},recordPropertyDidChange:function(e){if(e&&!e.contains(this.get("propertyName"))){return this
}var b=this.get("readOnlyChildren");var c=this._prevChildren,g=this._childrenContentDidChange;
if(b===c){return this}if(c){c.removeObserver("[]",this,g)}this._prevChildren=b;if(b){b.addObserver("[]",this,g)
}var a=(b)?b.propertyRevision:-1;this._childrenContentDidChange(b,"[]",b,a)},_childrenContentDidChange:function(e,b,c,a){this._records=null;
this.enumerableContentDidChange()},init:function(){arguments.callee.base.apply(this,arguments);
this.recordPropertyDidChange()}});SC.ManyArray=SC.Object.extend(SC.Enumerable,SC.Array,{recordType:null,record:null,propertyName:null,manyAttribute:null,store:function(){return this.get("record").get("store")
}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")
}.property("record").cacheable(),readOnlyStoreIds:function(){return this.get("record").readAttribute(this.get("propertyName"))
}.property(),editableStoreIds:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;
b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}if(b!==this._prevStoreIds){this.recordPropertyDidChange()
}return b}.property(),isEditable:function(){var a=this.manyAttribute;return a?a.get("isEditable"):NO
}.property("manyAttribute").cacheable(),inverse:function(){var a=this.manyAttribute;
return a?a.get("inverse"):null}.property("manyAttribute").cacheable(),isMaster:function(){var a=this.manyAttribute;
return a?a.get("isMaster"):null}.property("manyAttribute").cacheable(),orderBy:function(){var a=this.manyAttribute;
return a?a.get("orderBy"):null}.property("manyAttribute").cacheable(),length:function(){var a=this.get("readOnlyStoreIds");
return a?a.get("length"):0}.property("readOnlyStoreIds"),objectAt:function(a){var h=this._records,g=this.get("readOnlyStoreIds"),c=this.get("store"),i=this.get("recordType"),f,e,b;
if(!g||!c){return undefined}if(h&&(e=h[a])){return e}if(!h){this._records=h=[]}b=g.objectAt(a);
if(b){f=c.storeKeyFor(i,b);if(c.readStatus(f)===SC.Record.EMPTY){c.retrieveRecord(i,null,f)
}h[a]=e=c.materializeRecord(f)}return e},replace:function(o,e,n){if(!this.get("isEditable")){throw"%@.%@[] is not editable".fmt(this.get("record"),this.get("propertyName"))
}var c=this.get("editableStoreIds"),l=n?(n.get?n.get("length"):n.length):0,j=this.get("record"),f=this.get("propertyName"),h,p,a,b,g,m,k;
a=[];for(h=0;h<l;h++){a[h]=n.objectAt(h).get("id")}g=this.get("inverse");if(g&&e>0){b=SC.ManyArray._toRemove;
if(b){SC.ManyArray._toRemove=null}else{b=[]}for(h=0;h<e;h++){b[h]=this.objectAt(o+h)
}}c.replace(o,e,a);if(g){for(h=0;h<e;h++){k=b[h];m=k?k[g]:null;if(m&&m.inverseDidRemoveRecord){m.inverseDidRemoveRecord(k,g,j,f)
}}if(b){b.length=0;if(!SC.ManyArray._toRemove){SC.ManyArray._toRemove=b}}for(h=0;
h<l;h++){k=n.objectAt(h);m=k?k[g]:null;if(m&&m.inverseDidAddRecord){m.inverseDidAddRecord(k,g,j,f)
}}}if(j&&(!g||this.get("isMaster"))){j.recordDidChange(f)}return this},removeInverseRecord:function(c){if(!c){return this
}var f=c.get("id"),e=this.get("editableStoreIds"),a=(e&&f)?e.indexOf(f):-1,b;if(a>=0){e.removeAt(a);
if(this.get("isMaster")&&(b=this.get("record"))){b.recordDidChange(this.get("propertyName"))
}}return this},addInverseRecord:function(e){if(!e){return this}var h=e.get("id"),f=this.get("editableStoreIds"),g=this.get("orderBy"),b=f.get("length"),a,c;
if(g){a=this._findInsertionLocation(e,0,b,g)}else{a=b}f.insertAt(a,e.get("id"));if(this.get("isMaster")&&(c=this.get("record"))){c.recordDidChange(this.get("propertyName"))
}return this},_findInsertionLocation:function(h,e,c,g){var b=e+Math.floor((c-e)/2),f=this.objectAt(b),a=this._compare(h,f,g);
if(a<0){if(b===0){return b}else{return this._findInsertionLocation(h,0,b,g)}}else{if(a>0){if(b>=c){return b
}else{return this._findInsertionLocation(h,b,c,g)}}else{return b}}},_compare:function(g,f,j){var i=SC.typeOf(j),h,e,c;
if(i===SC.T_FUNCTION){h=j(g,f)}else{if(i===SC.T_STRING){h=SC.compare(g,f)}else{c=j.get("length");
h=0;for(e=0;(h===0)&&(e<c);e++){h=SC.compare(g,f)}}}return h},recordPropertyDidChange:function(c){if(c&&!c.contains(this.get("propertyName"))){return this
}var g=this.get("readOnlyStoreIds");var b=this._prevStoreIds,e=this._storeIdsContentDidChange;
if(g===b){return this}if(b){b.removeObserver("[]",this,e)}this._prevStoreIds=g;if(g){g.addObserver("[]",this,e)
}var a=(g)?g.propertyRevision:-1;this._storeIdsContentDidChange(g,"[]",g,a)},_storeIdsContentDidChange:function(e,b,c,a){this._records=null;
this.enumerableContentDidChange()},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);
return a===undefined?arguments.callee.base.apply(this,arguments):a},init:function(){arguments.callee.base.apply(this,arguments);
this.recordPropertyDidChange()}});sc_require("models/record");SC.Store=SC.Object.extend({name:null,nestedStores:null,dataSource:null,isNested:NO,commitRecordsAutomatically:NO,from:function(a){this.set("dataSource",a);
return this},_getDataSource:function(){var a=this.get("dataSource");if(typeof a===SC.T_STRING){a=SC.objectForPropertyPath(a);
if(a){a=a.create()}if(a){this.set("dataSource",a)}}return a},cascade:function(a){var b=SC.A(arguments);
a=SC.CascadeDataSource.create({dataSources:b});return this.from(a)},chain:function(b,c){if(!b){b={}
}b.parentStore=this;if(c){if(SC.typeOf(c)!=="class"){throw new Error("%@ is not a valid class".fmt(c))
}if(!SC.kindOf(c,SC.NestedStore)){throw new Error("%@ is not a type of SC.NestedStore".fmt(c))
}}else{c=SC.NestedStore}var a=c.create(b),e=this.nestedStores;if(!e){e=this.nestedStores=[]
}e.push(a);return a},willDestroyNestedStore:function(a){if(this.nestedStores){this.nestedStores.removeObject(a)
}return this},hasNestedStore:function(a){while(a&&(a!==this)){a=a.get("parentStore")
}return a===this},dataHashes:null,statuses:null,revisions:null,editables:null,changelog:null,recordArraysWithQuery:null,recordErrors:null,queryErrors:null,storeKeyEditState:function(b){var c=this.editables,a=this.locks;
return(c&&c[b])?SC.Store.EDITABLE:SC.Store.LOCKED},readDataHash:function(a){return this.dataHashes[a]
},readEditableDataHash:function(b){var a=this.dataHashes[b];if(!a){return a}var c=this.editables;
if(!c){c=this.editables=[]}if(!c[b]){c[b]=1;a=this.dataHashes[b]=SC.clone(a,YES)}return a
},readEditableProperty:function(c,a){var f=this.readEditableDataHash(c),e=this.editables[c],b=f[a];
if(e===1){e=this.editables[c]={}}if(!e[a]){b=f[a];if(b&&b.isCopyable){b=f[a]=b.copy()
}e[a]=YES}return b},writeDataHash:function(b,e,a){if(e){this.dataHashes[b]=e}if(a){this.statuses[b]=a
}var c=this.editables;if(!c){c=this.editables=[]}c[b]=1;return this},removeDataHash:function(b,a){this.dataHashes[b]=null;
this.statuses[b]=a||SC.Record.EMPTY;var c=this.editables;if(c){c[b]=0}return this
},readStatus:function(a){this.readDataHash(a);return this.statuses[a]||SC.Record.EMPTY
},peekStatus:function(a){return this.statuses[a]||SC.Record.EMPTY},writeStatus:function(b,a){return this.writeDataHash(b,null,a)
},dataHashDidChange:function(i,e,f,g){if(!e){e=SC.Store.generateStoreKey()}var c,b,a,h;
c=SC.typeOf(i)===SC.T_ARRAY;if(c){b=i.length}else{b=1;h=i}for(a=0;a<b;a++){if(c){h=i[a]
}this.revisions[h]=e;this._notifyRecordPropertyChange(h,f,g)}return this},_notifyRecordPropertyChange:function(n,f,m){var a=this.records,h=this.get("nestedStores"),i=SC.Store,c,b,g,l,k,e,o;
g=h?h.length:0;for(l=0;l<g;l++){k=h[l];e=k.peekStatus(n);b=k.storeKeyEditState(n);
if(b===i.INHERITED){k._notifyRecordPropertyChange(n,f,m)}else{if(e&SC.Record.BUSY){if(k.get("hasChanges")){throw i.CHAIN_CONFLICT_ERROR
}k.reset()}}}var j=this.recordPropertyChanges;if(!j){j=this.recordPropertyChanges={storeKeys:SC.CoreSet.create(),records:SC.CoreSet.create(),hasDataChanges:SC.CoreSet.create(),propertyForStoreKeys:{}}
}j.storeKeys.add(n);if(a&&(c=a[n])){j.records.push(n);if(!f){j.hasDataChanges.push(n)
}if(m){if(!(o=j.propertyForStoreKeys[n])){o=j.propertyForStoreKeys[n]=SC.CoreSet.create()
}if(o!=="*"){o.add(m)}}else{j.propertyForStoreKeys[n]="*"}}this.invokeOnce(this.flush);
return this},flush:function(){if(!this.recordPropertyChanges){return this}var j=this.recordPropertyChanges,i=j.storeKeys,m=j.hasDataChanges,a=j.records,g=j.propertyForStoreKeys,e=SC.CoreSet.create(),c,b,f,k,h,l,n;
i.forEach(function(o){if(a.contains(o)){f=m.contains(o)?NO:YES;c=this.records[o];
n=g?g[o]:null;if(n==="*"){n=null}a.remove(o);if(c){c.storeDidChangeProperties(f,n)
}}b=SC.Store.recordTypeFor(o);e.add(b)},this);if(i.get("length")>0){this._notifyRecordArrays(i,e)
}i.clear();m.clear();a.clear();this.recordPropertyChanges.propertyForStoreKeys={};
return this},reset:function(){this.dataHashes={};this.revisions={};this.statuses={};
this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.recordErrors=null;
this.queryErrors=null;var a=this.records,b;if(a){for(b in a){if(!a.hasOwnProperty(b)){continue
}this._notifyRecordPropertyChange(parseInt(b,10),NO)}}this.set("hasChanges",NO)},commitChangesFromNestedStore:function(l,m,c){if(!c){this._verifyLockRevisions(m,l.locks)
}var h=m.length,f,p,g,a,o,b,e,n,k;b=this.revisions;g=this.dataHashes;a=this.statuses;
o=this.editables;if(!o){o=this.editables=[]}e=l.dataHashes;k=l.revisions;n=l.statuses;
for(f=0;f<h;f++){p=m[f];g[p]=e[p];a[p]=n[p];b[p]=k[p];o[p]=0;this._notifyRecordPropertyChange(p,NO)
}var q=this.changelog,j=l.changelog;if(j){if(!q){q=this.changelog=SC.CoreSet.create()
}q.addEach(j)}this.changelog=q;if(!this.get("parentStore")){this.flush()}return this
},_verifyLockRevisions:function(g,j){var a=g.length,c=this.revisions,f,h,e,b;if(j&&c){for(f=0;
f<a;f++){h=g[f];e=j[h]||1;b=c[h]||1;if(e<b){throw SC.Store.CHAIN_CONFLICT_ERROR}}}return this
},find:function(b,a){if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)
}if((arguments.length===1)&&!(b&&b.get&&b.get("isRecord"))){if(!b){throw new Error("SC.Store#find() must pass recordType or query")
}if(!b.isQuery){b=SC.Query.local(b)}return this._findQuery(b,YES,YES)}else{return this._findRecord(b,a)
}},findAll:function(c,a,b){console.warn("SC.Store#findAll() will be removed in a future version of SproutCore.  Use SC.Store#find() instead");
if(!c||!c.isQuery){c=SC.Query.local(c,a,b)}return this._findQuery(c,YES,YES)},_findQuery:function(g,a,f){var b=this._scst_recordArraysByQuery,e=SC.guidFor(g),c,h;
if(!b){b=this._scst_recordArraysByQuery={}}c=b[e];if(!c&&a){b[e]=c=SC.RecordArray.create({store:this,query:g});
h=this.get("recordArrays");if(!h){this.set("recordArrays",h=SC.Set.create())}h.add(c);
if(f){this.refreshQuery(g)}}this.flush();return c},_findRecord:function(c,b){var a;
if(c&&c.get&&c.get("isRecord")){a=c.get("storeKey")}else{a=b?c.storeKeyFor(b):null
}if(a&&(this.readStatus(a)===SC.Record.EMPTY)){a=this.retrieveRecord(c,b)}return a?this.materializeRecord(a):null
},recordArrayWillDestroy:function(b){var a=this._scst_recordArraysByQuery,c=this.get("recordArrays");
if(a){delete a[SC.guidFor(b.get("query"))]}if(c){c.remove(b)}return this},refreshQuery:function(e){if(!e){throw new Error("refreshQuery() requires a query")
}var a=this._scst_recordArraysByQuery,c=a?a[SC.guidFor(e)]:null,b=this._getDataSource();
if(b&&b.fetch){if(c){c.storeWillFetchQuery(e)}b.fetch.call(b,this,e)}return this},_notifyRecordArrays:function(b,a){var c=this.get("recordArrays");
if(!c){return this}c.forEach(function(e){if(e){e.storeDidChangeStoreKeys(b,a)}},this);
return this},recordsFor:function(g){var e=[],a=g.storeKeysById(),f,c,b;for(f in a){c=a[f];
if(this.readStatus(c)!==SC.RECORD_EMPTY){e.push(c)}}if(e.length>0){b=SC.RecordArray.create({store:this,storeKeys:e})
}else{b=e}return b},_TMP_REC_ATTRS:{},materializeRecord:function(e){var a=this.records,c,f,b;
if(!a){a=this.records={}}c=a[e];if(c){return c}f=SC.Store.recordTypeFor(e);if(!f){return null
}b=this._TMP_REC_ATTRS;b.storeKey=e;b.store=this;c=a[e]=f.create(b);return c},createRecord:function(b,e,a){var j,k,c,i=SC.Record,f,h,g;
if(!a&&(j=b.prototype.primaryKey)){a=e[j];h=b.prototype[j]?b.prototype[j].defaultValue:null;
if(!a&&SC.typeOf(h)===SC.T_FUNCTION){a=e[j]=h()}}k=a?b.storeKeyFor(a):SC.Store.generateStoreKey();
c=this.readStatus(k);if((c&i.BUSY)||(c&i.READY)||(c==i.DESTROYED_DIRTY)){throw a?i.RECORD_EXISTS_ERROR:i.BAD_STATE_ERROR
}else{if(!a&&(c==SC.DESTROYED_CLEAN||c==SC.ERROR)){throw i.BAD_STATE_ERROR}}this.writeDataHash(k,(e?e:{}),i.READY_NEW);
SC.Store.replaceRecordTypeFor(k,b);this.dataHashDidChange(k);f=this.changelog;if(!f){f=SC.Set.create()
}f.add(k);this.changelog=f;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)
}g=this.materializeRecord(k);if(g){g.propagateToAggregates()}return g},createRecords:function(e,j,a){var h=[],c,b,f,g=j.length,i;
f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(i=0;i<g;i++){if(f){c=e[i]||SC.Record}b=a?a[i]:undefined;
h.push(this.createRecord(c,j[i],b))}return h},unloadRecord:function(g,f,e,c){if(e===undefined){e=g.storeKeyFor(f)
}var b=this.readStatus(e),a=SC.Record;c=c||a.EMPTY;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this
}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{b=c}}this.removeDataHash(e,b);this.dataHashDidChange(e);
return this},unloadRecords:function(e,a,h,f){var i,g,j,b,c,k;if(h===undefined){g=SC.typeOf(e)===SC.T_ARRAY;
if(!g){c=e}if(a===undefined){i=g?e.length:1;for(j=0;j<i;j++){if(g){c=e[j]}h=this.storeKeysFor(c);
this.unloadRecords(undefined,undefined,h,f)}}else{i=a.length;for(j=0;j<i;j++){if(g){c=e[j]||SC.Record
}b=a?a[j]:undefined;this.unloadRecord(c,b,undefined,f)}}}else{i=h.length;for(j=0;
j<i;j++){k=h?h[j]:undefined;this.unloadRecord(undefined,undefined,k,f)}}return this
},destroyRecord:function(g,f,e){if(e===undefined){e=g.storeKeyFor(f)}var b=this.readStatus(e),c,a=SC.Record;
if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b==a.EMPTY){throw a.NOT_FOUND_ERROR
}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{if(b==a.READY_NEW){b=a.DESTROYED_CLEAN
}else{b=a.DESTROYED_DIRTY}}}}this.writeStatus(e,b);this.dataHashDidChange(e);c=this.changelog;
if(!c){c=this.changelog=SC.Set.create()}((b&a.DIRTY)?c.add(e):c.remove(e));this.changelog=c;
if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this
},destroyRecords:function(e,a,g){var h,f,i,b,c,j;if(g===undefined){h=a.length;f=SC.typeOf(e)===SC.T_ARRAY;
if(!f){c=e}for(i=0;i<h;i++){if(f){c=e[i]||SC.Record}b=a?a[i]:undefined;this.destroyRecord(c,b,undefined)
}}else{h=g.length;for(i=0;i<h;i++){j=g?g[i]:undefined;this.destroyRecord(undefined,undefined,j)
}}return this},recordDidChange:function(i,h,g,e,c){if(g===undefined){g=i.storeKeyFor(h)
}var b=this.readStatus(g),f,a=SC.Record;if(b&a.BUSY){throw a.BUSY_ERROR}else{if(!(b&a.READY)){throw a.NOT_FOUND_ERROR
}else{if(b!=a.READY_NEW){this.writeStatus(g,a.READY_DIRTY)}}}this.dataHashDidChange(g,null,c,e);
f=this.changelog;if(!f){f=this.changelog=SC.Set.create()}f.add(g);this.changelog=f;
if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this
},recordsDidChange:function(e,a,g){var h,f,i,b,c,j;if(g===undefined){h=a.length;f=SC.typeOf(e)===SC.T_ARRAY;
if(!f){c=e}for(i=0;i<h;i++){if(f){c=e[i]||SC.Record}b=a?a[i]:undefined;j=g?g[i]:undefined;
this.recordDidChange(c,b,j)}}else{h=g.length;for(i=0;i<h;i++){j=g?g[i]:undefined;
this.recordDidChange(undefined,undefined,j)}}return this},retrieveRecords:function(g,b,j,c){var a=this._getDataSource(),i=SC.typeOf(g)===SC.T_ARRAY,k=(!j)?b.length:j.length,l=[],h=SC.Store.generateStoreKey(),n=SC.Record,e,o,p,f,m;
if(!i){e=g}for(o=0;o<k;o++){if(j){p=j[o]}else{if(i){e=g[o]}p=e.storeKeyFor(b[o])}f=this.readStatus(p);
if((f==n.EMPTY)||(f==n.ERROR)||(f==n.DESTROYED_CLEAN)){this.writeStatus(p,n.BUSY_LOADING);
this.dataHashDidChange(p,h,YES);l.push(p)}else{if(c){if(f&n.READY){this.writeStatus(p,n.BUSY_REFRESH|(f&3));
this.dataHashDidChange(p,h,YES);l.push(p)}else{if((f==n.BUSY_DESTROYING)||(f==n.BUSY_CREATING)||(f==n.BUSY_COMMITTING)){throw n.BUSY_ERROR
}else{if(f==n.DESTROYED_DIRTY){throw n.BAD_STATE_ERROR}}}}}}m=NO;if(a){m=a.retrieveRecords.call(a,this,l,b)
}if(!m){k=l.length;h=SC.Store.generateStoreKey();for(o=0;o<k;o++){p=l[o];f=this.readStatus(p);
if(f===n.BUSY_LOADING){this.writeStatus(p,n.ERROR);this.dataHashDidChange(p,h,YES)
}else{if(f&n.BUSY_REFRESH){this.writeStatus(p,n.READY|(f&3));this.dataHashDidChange(p,h,YES)
}}}l.length=0}return l},_TMP_RETRIEVE_ARRAY:[],retrieveRecord:function(g,f,b,c){var e=this._TMP_RETRIEVE_ARRAY,a;
if(b){e[0]=b;b=e;f=null}else{e[0]=f;f=e}a=this.retrieveRecords(g,f,b,c);e.length=0;
return a[0]},refreshRecord:function(c,b,a){return !!this.retrieveRecord(c,b,a,YES)
},refreshRecords:function(b,c,e){var a=this.retrieveRecords(b,c,e,YES);return a&&a.length>0
},commitRecords:function(f,m,b,p){var l=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,c=[],j=[],k=[],q=SC.Store.generateStoreKey(),g=SC.Record,a,i,e,n,t,s,o;
if(!f&&!m&&!b){b=this.changelog}o=b?b.get("length"):(m?m.get("length"):0);for(i=0;
i<o;i++){if(b){e=b[i]}else{if(h){a=f[i]||SC.Record}else{a=f}e=a.storeKeyFor(m[i])
}n=this.readStatus(e);if((n==g.EMPTY)||(n==g.ERROR)){throw g.NOT_FOUND_ERROR}else{if(n==g.READY_NEW){this.writeStatus(e,g.BUSY_CREATING);
this.dataHashDidChange(e,q,YES);c.push(e)}else{if(n==g.READY_DIRTY){this.writeStatus(e,g.BUSY_COMMITTING);
this.dataHashDidChange(e,q,YES);j.push(e)}else{if(n==g.DESTROYED_DIRTY){this.writeStatus(e,g.BUSY_DESTROYING);
this.dataHashDidChange(e,q,YES);k.push(e)}else{if(n==g.DESTROYED_CLEAN){this.dataHashDidChange(e,q,YES)
}}}}}}if(l&&(o>0||p)){s=l.commitRecords.call(l,this,c,j,k,p)}if(s&&!f&&!m){if(b===this.changelog){this.changelog=null
}else{this.changelog.removeEach(b)}}return s},commitRecord:function(g,f,b,c){var e=this._TMP_RETRIEVE_ARRAY,a;
if(f===undefined&&b===undefined){return NO}if(b!==undefined){e[0]=b;b=e;f=null}else{e[0]=f;
f=e}a=this.commitRecords(g,f,b,c);e.length=0;return a},cancelRecords:function(f,b,j){var a=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,l=SC.Record,k=[],g,i,m,c,e,n;
i=(j===undefined)?b.length:j.length;for(m=0;m<i;m++){if(h){e=f[m]||SC.Record}else{e=f||SC.Record
}c=b?b[m]:undefined;if(j===undefined){n=e.storeKeyFor(c)}else{n=j?j[m]:undefined}if(n){g=this.readStatus(n);
if((g==l.EMPTY)||(g==l.ERROR)){throw l.NOT_FOUND_ERROR}k.push(n)}}if(a){a.cancel.call(a,this,k)
}return this},cancelRecord:function(f,e,b){var c=this._TMP_RETRIEVE_ARRAY,a;if(b!==undefined){c[0]=b;
b=c;e=null}else{c[0]=e;e=c}a=this.cancelRecords(f,e,b);c.length=0;return this},loadRecord:function(h,e,g){var a=SC.Record,c,b,f;
h=h||SC.Record;b=h.prototype.primaryKey;g=g||e[b];c=f=h.storeKeyFor(g);if(this.readStatus(f)&a.BUSY){this.dataSourceDidComplete(f,e,g)
}else{this.pushRetrieve(h,g,e,f)}return c},loadRecords:function(e,n,a){var g=SC.typeOf(e)===SC.T_ARRAY,h=n.get("length"),i=[],j=SC.Record,c,b,l,k,f,m;
if(!g){c=e||SC.Record;l=c.prototype.primaryKey}for(k=0;k<h;k++){f=n.objectAt(k);if(g){c=e.objectAt(k)||SC.Record;
l=c.prototype.primaryKey}b=(a)?a.objectAt(k):f[l];i[k]=this.loadRecord(c,f,b)}return i
},readError:function(a){var b=this.recordErrors;return b?b[a]:undefined},readQueryError:function(a){var b=this.queryErrors;
return b?b[SC.guidFor(a)]:undefined},dataSourceDidCancel:function(c){var b=this.readStatus(c),a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}switch(b){case a.BUSY_LOADING:b=a.EMPTY;break;
case a.BUSY_CREATING:b=a.READY_NEW;break;case a.BUSY_COMMITTING:b=a.READY_DIRTY;break;
case a.BUSY_REFRESH_CLEAN:b=a.READY_CLEAN;break;case a.BUSY_REFRESH_DIRTY:b=a.READY_DIRTY;
break;case a.BUSY_DESTROYING:b=a.DESTROYED_DIRTY;break;default:throw a.BAD_STATE_ERROR
}this.writeStatus(c,b);this.dataHashDidChange(c,null,YES);return this},dataSourceDidComplete:function(g,f,e){var b=this.readStatus(g),a=SC.Record,c;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}if(b===a.BUSY_DESTROYING){throw a.BAD_STATE_ERROR
}else{b=a.READY_CLEAN}this.writeStatus(g,b);if(f){this.writeDataHash(g,f,b)}if(e){SC.Store.replaceIdFor(g,e)
}c=f||e?NO:YES;this.dataHashDidChange(g,null,c);return this},dataSourceDidDestroy:function(c){var b=this.readStatus(c),a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}else{b=a.DESTROYED_CLEAN}this.removeDataHash(c,b);
this.dataHashDidChange(c);return this},dataSourceDidError:function(e,c){var b=this.readStatus(e),f=this.recordErrors,a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}else{b=a.ERROR}if(c&&c.isError){if(!f){f=this.recordErrors=[]
}f[e]=c}this.writeStatus(e,b);this.dataHashDidChange(e,null,YES);return this},pushRetrieve:function(g,f,c,e){var b=SC.Record,a;
if(e===undefined){e=g.storeKeyFor(f)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.READY_CLEAN;
if(c===undefined){this.writeStatus(e,a)}else{this.writeDataHash(e,c,a)}this.dataHashDidChange(e);
return e}return NO},pushDestroy:function(f,e,c){var b=SC.Record,a;if(c===undefined){c=f.storeKeyFor(e)
}a=this.readStatus(c);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.DESTROYED_CLEAN;
this.removeDataHash(c,a);this.dataHashDidChange(c);return c}return NO},pushError:function(h,g,c,e){var b=SC.Record,a,f=this.recordErrors;
if(e===undefined){e=h.storeKeyFor(g)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.ERROR;
if(c&&c.isError){if(!f){f=this.recordErrors=[]}f[e]=c}this.writeStatus(e,a);this.dataHashDidChange(e,null,YES);
return e}return NO},loadQueryResults:function(c,a){if(c.get("location")===SC.Query.LOCAL){throw new Error("Cannot load query results for a local query")
}var b=this._findQuery(c,YES,NO);if(b){b.set("storeKeys",a)}this.dataSourceDidFetchQuery(c);
return this},dataSourceDidFetchQuery:function(a){return this._scstore_dataSourceDidFetchQuery(a,YES)
},_scstore_dataSourceDidFetchQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;
if(c){c.storeDidFetchQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidFetchQuery(e,NO)
}return this},dataSourceDidCancelQuery:function(a){return this._scstore_dataSourceDidCancelQuery(a,YES)
},_scstore_dataSourceDidCancelQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;
if(c){c.storeDidCancelQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidCancelQuery(e,NO)
}return this},dataSourceDidErrorQuery:function(b,a){var c=this.queryErrors;if(a&&a.isError){if(!c){c=this.queryErrors={}
}c[SC.guidFor(b)]=a}return this._scstore_dataSourceDidErrorQuery(b,YES)},_scstore_dataSourceDidErrorQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;
if(c){c.storeDidErrorQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidErrorQuery(e,NO)
}return this},init:function(){arguments.callee.base.apply(this,arguments);this.reset()
},toString:function(){var b=this.get("name");if(!b){return arguments.callee.base.apply(this,arguments)
}else{var a=arguments.callee.base.apply(this,arguments);return"%@ (%@)".fmt(b,a)}},idFor:function(a){return SC.Store.idFor(a)
},recordTypeFor:function(a){return SC.Store.recordTypeFor(a)},storeKeyFor:function(b,a){return b.storeKeyFor(a)
},storeKeyExists:function(b,a){return b.storeKeyExists(a)},storeKeysFor:function(g){var a=[],f=g&&g.isEnumerable,c,e,b;
if(!this.statuses){return a}for(e in SC.Store.recordTypesByStoreKey){c=SC.Store.recordTypesByStoreKey[e];
if(f){b=g.contains(c)}else{b=c===g}if(b&&this.statuses[e]){a.push(parseInt(e,10))
}}return a},storeKeys:function(){var a=[],b;if(!this.statuses){return a}for(b in this.statuses){if(this.statuses[b]!=SC.Record.EMPTY){a.push(parseInt(b,10))
}}return a},statusString:function(a){var b=this.materializeRecord(a);return b.statusString()
}});SC.Store.mixin({CHAIN_CONFLICT_ERROR:new Error("Nested Store Conflict"),NO_PARENT_STORE_ERROR:new Error("Parent Store Required"),NESTED_STORE_UNSUPPORTED_ERROR:new Error("Unsupported In Nested Store"),NESTED_STORE_RETRIEVE_DIRTY_ERROR:new Error("Cannot Retrieve Dirty Record in Nested Store"),EDITABLE:"editable",LOCKED:"locked",INHERITED:"inherited",idsByStoreKey:[],recordTypesByStoreKey:{},queriesByStoreKey:[],nextStoreKey:1,generateStoreKey:function(){return this.nextStoreKey++
},idFor:function(a){return this.idsByStoreKey[a]},queryFor:function(a){return this.queriesByStoreKey[a]
},recordTypeFor:function(a){return this.recordTypesByStoreKey[a]},replaceIdFor:function(c,a){var e=this.idsByStoreKey[c],f,b;
if(e!==a){f=this.recordTypeFor(c);if(!f){throw new Error("replaceIdFor: storeKey %@ does not exist".fmt(c))
}this.idsByStoreKey[c]=a;b=f.storeKeysById();delete b[e];b[a]=c}return this},replaceRecordTypeFor:function(a,b){this.recordTypesByStoreKey[a]=b;
return this}});SC.Store.prototype.nextStoreIndex=1;SC.Store._getDefaultStore=function(){var a=this._store;
if(!a){this._store=a=SC.Store.create()}return a};SC.Store.updateRecords=function(g,h,i,c){console.warn("SC.Store.updateRecords() is deprecated.  Use loadRecords() instead");
var e=this._getDefaultStore(),b=g.length,a,f;if(!i){i=[];for(a=0;a<b;a++){i[a]=g[a].recordType
}}f=e.loadRecords(i,g);b=f.length;for(a=0;a<b;a++){f[a]=e.materializeRecord(f[a])
}return f};SC.Store.find=function(a,b){return this._getDefaultStore().find(b,a)};
SC.Store.findAll=function(a,b){return this._getDefaultStore().findAll(a,b)};sc_require("system/store");
SC.NestedStore=SC.Store.extend({hasChanges:NO,parentStore:null,isNested:YES,lockOnRead:YES,locks:null,chainedChanges:null,find:function(a){if(a&&a.isQuery&&a.get("location")!==SC.Query.LOCAL){throw"SC.Store#find() can only accept LOCAL queries in nested stores"
}return arguments.callee.base.apply(this,arguments)},commitChanges:function(b){if(this.get("hasChanges")){var a=this.get("parentStore");
a.commitChangesFromNestedStore(this,this.chainedChanges,b)}this.reset();return this
},discardChanges:function(){var c,g;if((c=this.records)&&(g=this.locks)){var b=this.get("parentStore"),i=b.revisions;
var h=this.revisions,f,e,a;for(f in c){if(!c.hasOwnProperty(f)){continue}if(!(e=g[f])){continue
}a=i[f];if((a!==e)||(h[f]>a)){this._notifyRecordPropertyChange(parseInt(f,10))}}}this.reset();
this.flush();return this},destroy:function(){this.discardChanges();var a=this.get("parentStore");
if(a){a.willDestroyNestedStore(this)}arguments.callee.base.apply(this,arguments);
return this},reset:function(){var a=this.get("parentStore");if(!a){throw SC.Store.NO_PARENT_STORE_ERROR
}this.dataHashes=SC.beget(a.dataHashes);this.revisions=SC.beget(a.revisions);this.statuses=SC.beget(a.statuses);
this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.set("hasChanges",NO)
},refreshQuery:function(b){var a=this.get("parentStore");if(a){a.refreshQuery(b)}return this
},readError:function(b){var a=this.get("parentStore");return a?a.readError(b):null
},readQueryError:function(b){var a=this.get("parentStore");return a?a.readQueryError(b):null
},storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:(a&&a[b])?SC.Store.LOCKED:SC.Store.INHERITED
},_lock:function(f){var e=this.locks,a,g;if(e&&e[f]){return this}if(!e){e=this.locks=[]
}g=this.editables;if(g){g[f]=0}var c=this.get("parentStore"),b;while(c&&(b=c.storeKeyEditState(f))===SC.Store.INHERITED){c=c.get("parentStore")
}if(c&&b===SC.Store.EDITABLE){this.dataHashes[f]=SC.clone(c.dataHashes[f],YES);if(!g){g=this.editables=[]
}g[f]=1}else{this.dataHashes[f]=this.dataHashes[f]}this.statuses[f]=this.statuses[f];
a=this.revisions[f]=this.revisions[f];e[f]=a||1;return this},readDataHash:function(a){if(this.get("lockOnRead")){this._lock(a)
}return this.dataHashes[a]},readEditableDataHash:function(a){this._lock(a);return arguments.callee.base.apply(this,arguments)
},writeDataHash:function(e,g,b){var c=this.locks,h=NO,a;if(g){this.dataHashes[e]=g
}else{this._lock(e);h=YES}if(b){this.statuses[e]=b}else{if(!h){this.statuses[e]=(this.statuses[e]||SC.Record.READY_NEW)
}}if(!h){a=this.revisions[e]=this.revisions[e];if(!c){c=this.locks=[]}if(!c[e]){c[e]=a||1
}}var f=this.editables;if(!f){f=this.editables=[]}f[e]=1;return this},removeDataHash:function(c,a){var b=this.locks;
if(!b){b=this.locks=[]}if(!b[c]){b[c]=this.revisions[c]||1}return arguments.callee.base.apply(this,arguments)
},dataHashDidChange:function(e,b,a,i){if(!b){b=SC.Store.generateStoreKey()}var c,f,h,j;
c=SC.typeOf(e)===SC.T_ARRAY;if(c){f=e.length}else{f=1;j=e}var g=this.chainedChanges;
if(!g){g=this.chainedChanges=SC.Set.create()}for(h=0;h<f;h++){if(c){j=e[h]}this._lock(j);
this.revisions[j]=b;g.add(j);this._notifyRecordPropertyChange(j,a,i)}this.setIfChanged("hasChanges",YES);
return this},commitChangesFromNestedStore:function(f,g,a){arguments.callee.base.apply(this,arguments);
var b=this.get("parentStore"),j=b.revisions,c;var l=this.locks,h=this.chainedChanges,e,k;
if(!l){l=this.locks=[]}if(!h){h=this.chainedChanges=SC.Set.create()}e=g.length;for(c=0;
c<e;c++){k=g[c];if(!l[k]){l[k]=j[k]||1}h.add(k)}this.setIfChanged("hasChanges",h.get("length")>0);
this.flush();return this},queryFor:function(c,a,b){return this.get("parentStore").queryFor(c,a,b)
},findAll:function(f,b,e,c,a){if(!a){a=this}return this.get("parentStore").findAll(f,b,e,c,a)
},retrieveRecords:function(g,n,b,c){var a=this.get("parentStore"),l,e,q,p=(!b)?n.length:b.length,j=SC.Record,o;
if(c){for(l=0;l<p;l++){e=!b?a.storeKeyFor(g,n[l]):b[l];o=this.peekStatus(e);if(o&j.DIRTY){throw SC.Store.NESTED_STORE_RETRIEVE_DIRTY_ERROR
}else{var h=this.dataHashes,k=this.revisions,i=this.statuses,m=this.editables,t=this.locks;
var f=NO;var s=NO;if(h&&h.hasOwnProperty(e)){delete h[e];f=YES}if(k&&k.hasOwnProperty(e)){delete k[e];
f=YES}if(m){delete m[e]}if(t){delete t[e]}if(i&&i.hasOwnProperty(e)){delete i[e];
if(!f){s=YES}f=YES}if(f){this._notifyRecordPropertyChange(e,s)}}}}return a.retrieveRecords(g,n,b,c)
},commitRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},commitRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},cancelRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},dataSourceDidCancel:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidComplete:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},dataSourceDidDestroy:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidError:function(b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},pushRetrieve:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushDestroy:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},pushError:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}});sc_require("models/record");
SC.RecordArray=SC.Object.extend(SC.Enumerable,SC.Array,{store:null,query:null,storeKeys:null,status:SC.Record.EMPTY,isEditable:function(){var a=this.get("query");
return a?a.get("isEditable"):NO}.property("query").cacheable(),length:function(){this.flush();
var a=this.get("storeKeys");return a?a.get("length"):0}.property("storeKeys").cacheable(),_scra_records:null,objectAt:function(a){this.flush();
var g=this._scra_records,f=this.get("storeKeys"),b=this.get("store"),e,c;if(!f||!b){return undefined
}if(g&&(c=g[a])){return c}if(!g){this._scra_records=g=[]}e=f.objectAt(a);if(e){if(b.peekStatus(e)===SC.Record.EMPTY){b.retrieveRecord(null,null,e)
}g[a]=c=b.materializeRecord(e)}return c},forEach:function(i,e){this.flush();var f=this._scra_records,b=this.get("storeKeys"),g=this.get("store"),c=b?b.get("length"):0,h,j,a;
if(!b||!g){return this}if(!f){f=this._scra_records=[]}if(!e){e=this}for(h=0;h<c;h++){a=f[h];
if(!a){a=f[h]=g.materializeRecord(b.objectAt(h))}i.call(e,a,h,this)}return this},replace:function(b,j,h){this.flush();
var f=this.get("storeKeys"),a=h?(h.get?h.get("length"):h.length):0,c,e;if(!f){throw"storeKeys required"
}var g=this.get("query");if(g&&!g.get("isEditable")){throw SC.RecordArray.NOT_EDITABLE
}e=[];for(c=0;c<a;c++){e[c]=h.objectAt(c).get("storeKey")}f.replace(b,j,e);return this
},contains:function(a){return this.indexOf(a)>=0},indexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using indexOf on %@ with an object that is not an SC.Record".fmt(b));
return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.indexOf(e,a):-1
},lastIndexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using lastIndexOf on %@ with an object that is not an SC.Record".fmt(b));
return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.lastIndexOf(e,a):-1
},add:function(a){if(!SC.kindOf(a,SC.Record)){return this}if(this.indexOf(a)<0){this.pushObject(a)
}return this},remove:function(a){if(!SC.kindOf(a,SC.Record)){return this}this.removeObject(a);
return this},find:function(a,b){if(a&&a.isQuery){return this.get("store").find(a.queryWithScope(this))
}else{return arguments.callee.base.apply(this,arguments)}},refresh:function(){this.get("store").refreshQuery(this.get("query"));
return this},reload:function(){this.flush(YES);return this},destroy:function(){if(!this.get("isDestroyed")){this.get("store").recordArrayWillDestroy(this)
}arguments.callee.base.apply(this,arguments)},storeWillFetchQuery:function(c){var b=this.get("status"),a=SC.Record;
if((b===a.EMPTY)||(b===a.ERROR)){b=a.BUSY_LOADING}if(b&a.READY){b=a.BUSY_REFRESH}this.setIfChanged("status",b);
return this},storeDidFetchQuery:function(a){this.setIfChanged("status",SC.Record.READY_CLEAN);
return this},storeDidCancelQuery:function(c){var b=this.get("status"),a=SC.Record;
if(b===a.BUSY_LOADING){b=a.EMPTY}else{if(b===a.BUSY_REFRESH){b=a.READY_CLEAN}}this.setIfChanged("status",b);
return this},storeDidErrorQuery:function(a){this.setIfChanged("status",SC.Record.ERROR);
return this},storeDidChangeStoreKeys:function(b,a){var c=this.get("query");if(c.get("location")!==SC.Query.LOCAL){return this
}if(!c.containsRecordTypes(a)){return this}var e=this._scq_changedStoreKeys;if(!e){e=this._scq_changedStoreKeys=SC.IndexSet.create()
}e.addEach(b);this.set("needsFlush",YES);this.enumerableContentDidChange();return this
},flush:function(a){if(this._insideFlush){this.set("needsFlush",YES);return this}if(!this.get("needsFlush")&&!a){return this
}this.set("needsFlush",NO);var j=this.get("query"),m=this.get("store");if(!m||!j||j.get("location")!==SC.Query.LOCAL){return this
}this._insideFlush=YES;var h=this.get("storeKeys"),f=this._scq_changedStoreKeys,g=NO,k=SC.Record,c,e,b,o,n,i;
var l=h;if(h&&!a){if(f){f.forEach(function(p){e=m.peekStatus(p);if(!(e&k.EMPTY)&&!((e&k.DESTROYED)||(e===k.BUSY_DESTROYING))){c=m.materializeRecord(p);
i=!!(c&&j.contains(c))}else{i=NO}if(i){if(h.indexOf(p)<0){if(!g){h=h.copy()}h.pushObject(p)
}}else{if(h.indexOf(p)>=0){if(!g){h=h.copy()}h.removeObject(p)}}},this);g=YES}}else{if(n=j.get("scope")){o=n.flush().get("storeKeys")
}else{if(b=j.get("expandedRecordTypes")){o=SC.IndexSet.create();b.forEach(function(p){o.addEach(m.storeKeysFor(p))
})}}h=[];o.forEach(function(p){e=m.peekStatus(p);if(!(e&k.EMPTY)&&!((e&k.DESTROYED)||(e===k.BUSY_DESTROYING))){c=m.materializeRecord(p);
if(c&&j.contains(c)){h.push(p)}}});g=YES}if(f){f.clear()}if(g){if(h&&(h===l)){h=h.copy()
}h=SC.Query.orderStoreKeys(h,j,m);if(SC.compare(l,h)!==0){this.set("storeKeys",SC.clone(h))
}}this._insideFlush=NO;return this},needsFlush:YES,isError:function(){return this.get("status")&SC.Record.ERROR
}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null
}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");
return a.readQueryError(this.get("query"))||SC.Record.GENERIC_ERROR}else{return null
}}.property("isError").cacheable(),_storeKeysDidChange:function(){var e=this.get("storeKeys");
var c=this._prevStoreKeys,g=this._storeKeysContentDidChange,a=this._storeKeysStateDidChange;
if(e===c){return}if(c){c.removeObserver("[]",this,g)}this._prevStoreKeys=e;if(e){e.addObserver("[]",this,g)
}var b=(e)?e.propertyRevision:-1;this._storeKeysContentDidChange(e,"[]",e,b)}.observes("storeKeys"),_storeKeysContentDidChange:function(e,b,c,a){if(this._scra_records){this._scra_records.length=0
}this.beginPropertyChanges().notifyPropertyChange("length").enumerableContentDidChange().endPropertyChanges()
},init:function(){arguments.callee.base.apply(this,arguments);this._storeKeysDidChange()
}});SC.RecordArray.mixin({NOT_EDITABLE:SC.Error.desc("SC.RecordArray is not editable")});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/datastore");
/* @license
==========================================================================
SproutCore -- JavaScript Application Framework
copyright 2006-2011, Strobe Inc., Apple Inc. and contributors.

Permission is hereby granted, free of charge, to any person obtaining a 
copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation 
the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the 
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
DEALINGS IN THE SOFTWARE.

SproutCore and the SproutCore logo are trademarks of Strobe Inc.

For more information about SproutCore, visit http://www.sproutcore.com


==========================================================================
@license */
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore")
}SC.Animatable={isAnimatable:YES,transitions:{},concatenatedProperties:["transitions"],style:{},_cssTransitionFor:{left:"left",top:"top",right:"right",bottom:"bottom",width:"width",height:"height",opacity:"opacity",transform:(SC.platform.supportsCSSTransforms?"-"+SC.platform.cssPrefix+"-transform":"transform")},_styleProperties:["opacity","display","transform"],_layoutStyles:"width height top bottom marginLeft marginTop left right zIndex minWidth maxWidth minHeight maxHeight centerX centerY".w(),_animationsToStart:{},_animationOrder:["top","left","bottom","right","width","height","centerX","centerY","opacity","display","transform"],initMixin:function(){this._animatable_original_didCreateLayer=this.didCreateLayer||function(){};
this.didCreateLayer=this._animatable_didCreateLayer;this._animatable_original_willDestroyLayer=this.willDestroyLayer||function(){};
this.willDestroyLayer=this._animatable_willDestroyLayer;this._animatable_original_willRemoveFromParent=this.willRemoveFromParent||function(){};
this.willRemoveFromParent=this._animatable_will_remove_from_parent;this.addObserver("style",this,"styleDidChange");
this._animateTickPixel.displayName="animate-tick";var b;if(SC.isArray(this.transitions)){var a={};
for(b=0;b<this.transitions.length;b++){SC.mixin(a,this.transitions[b])}this.transitions=a
}for(b in this.transitions){if(typeof this.transitions[b]=="number"){this.transitions[b]={duration:this.transitions[b]}
}}this._animatableCurrentStyle=null;this._animators={};this._animatableSetCSS="";
this._last_transition_css="";this._disableAnimation=0;this._transitionCallbacks={};
if(!SC.none(this.get("layer"))){var c=this._animatable_original_didCreateLayer;this._animatable_original_didCreateLayer=function(){};
this.didCreateLayer();this._animatable_original_didCreateLayer=c}},_animatable_didCreateLayer:function(){this.resetAnimation();
SC.Event.add(this.get("layer"),SC.platform.cssPrefix+"TransitionEnd",this,this.transitionEnd);
SC.Event.add(this.get("layer"),"transitionEnd",this,this.transitionEnd);return this._animatable_original_didCreateLayer()
},_animatable_willDestroyLayer:function(){SC.Event.remove(this.get("layer"),SC.platform.cssPrefix+"TransitionEnd",this,this.transitionEnd);
SC.Event.remove(this.get("layer"),"transitionEnd",this,this.transitionEnd);return this._animatable_original_willDestroyLayer()
},_animatable_will_remove_from_parent:function(){this.resetAnimation()},disableAnimation:function(){if(this._disableAnimation<1){this.updateStyle();
this._disableAnimation=1;this.updateStyle()}else{this._disableAnimation++}},enableAnimation:function(){if(this._disableAnimation<=1){this.updateStyle();
this._disableAnimation=0;this.updateStyle()}else{this._disableAnimation--}},adjust:function(l,m){if(!SC.none(m)){var n=l;
l={};l[n]=m}else{l=SC.clone(l)}var a=SC.clone(this.get("style")),c=NO,h=SC.clone(this.get("layout")),b=NO;
var o=this._styleProperties;for(var f in l){var j=NO;var k=(o.indexOf(f)>=0)?a:h;
var e=k[f],g=l[f];if(g!==undefined&&e!==g){if(g===null){if(e!==undefined){j=YES}delete k[f]
}else{k[f]=g;j=YES}}if(j){if(k===a){c=YES}else{b=YES}}}if(c){this.set("style",a)}if(b){this.set("layout",h)
}return this},transitionEnd:function(a){SC.run(function(){var b=a.originalEvent.propertyName,c=this._transitionCallbacks[b];
if(c){SC.Animatable.runCallback(c)}},this)},getCurrentJavaScriptStyles:function(){return this._animatableCurrentStyle
},resetAnimation:function(){this._animatableCurrentStyle=null;this._stopJavaScriptAnimations();
this.disableAnimation();this.updateStyle();this.enableAnimation();this.updateStyle()
},_stopJavaScriptAnimations:function(){for(var a in this._animators){if(this._animators[a]&&this._animators[a].isQueued){SC.Animatable.removeTimer(this._animators[a])
}}},_getStartStyleHash:function(j,h){var g=this.layout;this.layout=j;var e=this.computeParentDimensions();
var c=this.computeFrameWithParentFrame(e);this.layout=g;var a={};for(var b in h){if(c){if(b=="left"){a[b]=c.x;
continue}else{if(b=="top"){a[b]=c.y;continue}else{if(b=="right"){a[b]=e.width-c.x-c.width;
continue}else{if(b=="bottom"){a[b]=e.height-c.y-c.height;continue}else{if(b=="width"){a[b]=c.width;
continue}else{if(b=="height"){a[b]=c.height;continue}else{if(b=="centerX"){a[b]=c.x+(c.width/2)-(e.width/2);
continue}else{if(b=="centerY"){a[b]=c.y+(c.height/2)-(e.height/2);continue}}}}}}}}}if(SC.none(a[b])){if(!SC.none(j[b])){a[b]=j[b]
}else{a[b]=h[b]}}}return a},_TMP_CSS_TRANSITIONS:[],cssTimingStringFor:function(c){var b="linear";
if(c.timing||SC.Animatable.defaultTimingFunction){var a=c.timing||SC.Animatable.defaultTimingFunction;
if(SC.typeOf(a)!=SC.T_STRING){b="cubic-bezier("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"
}else{b=a}}return b},styleDidChange:function(){this.invokeLast("updateStyle")},hasAcceleratedLayer:function(){var b=this.transitions.left&&this.transitions.left.duration,a=this.transitions.top&&this.transitions.top.duration;
if(b!==a){return NO}else{if((a||b)&&!SC.platform.supportsCSSTransitions){return NO
}else{return arguments.callee.base.apply(this,arguments)}}}.property("wantsAcceleratedLayer","transitions"),updateStyle:function(){var G=this.get("layer");
var s=this.get("style");var o=NO,g="";if(this.get("hasAcceleratedLayer")){var v=s.top,b=s.bottom,C=s.height,B=s.left,x=s.right,q=s.width;
if((SC.empty(v)||(!SC.isPercentage(v)&&!SC.empty(C)))&&(SC.empty(B)||(!SC.isPercentage(B)&&!SC.empty(q)))&&(this.transitions&&(this.transitions.top||this.transitions.left))){o=YES;
this._useSpecialCaseTransform=YES}else{this._useSpecialCaseTransform=NO}}var A;if(!this._animatableCurrentStyle||this._disableAnimation>0||!G){this._animatableSetCSS="";
this._animatableCurrentStyle={};for(A in s){if(A[0]!="_"){this._animatableCurrentStyle[A]=s[A]
}}if(G){this._animatableApplyStyles(G,s)}return this}if(!G){return}var f=this._getStartStyleHash(this._animatableCurrentStyle,s);
var h={};var t;var j=this._TMP_CSS_TRANSITIONS;if(SC.platform.supportsCSSTransitions){var n;
if(o){var F=this.transitions.left||this.transitions.top;n=this.cssTimingStringFor(F);
j.push("-"+SC.platform.cssPrefix+"-transform "+F.duration+"s "+n)}for(A in this.transitions){if(!this._cssTransitionFor[A]){continue
}if(o&&(A=="left"||A=="top")){if(this.transitions.left.action){this._transitionCallbacks["-"+SC.platform.cssPrefix+"-transform"]={source:this,target:(this.transitions.left.target||this),action:this.transitions.left.action}
}if(this.transitions.top.action){this._transitionCallbacks["-"+SC.platform.cssPrefix+"-transform"]={source:this,target:(this.transitions.top.target||this),action:this.transitions.top.action}
}continue}n=this.cssTimingStringFor(this.transitions[A]);j.push(this._cssTransitionFor[A]+" "+this.transitions[A].duration+"s "+n)
}}for(A in s){if(A[0]=="_"){continue}var e=!this.transitions[A]||s[A]==f[A];if(A=="display"&&s[A]!="none"){e=true
}if(e){f[A]=s[A];var E=this._animators[A];if(E){E.endValue=s[A];E.end=0}continue}if(SC.platform.supportsCSSTransitions&&this._cssTransitionFor[A]){h[A]=s[A];
if(this.transitions[A].action){this._transitionCallbacks[this._cssTransitionFor[A]]={source:this,target:(this.transitions[A].target||this),action:this.transitions[A].action}
}continue}var z=this._animateTickPixel,c=A,p=f[A],m=s[A];if(c=="centerX"||c=="centerY"){z=this._animateTickCenter
}else{if(c=="opacity"){z=this._animateTickNumber}else{if(c=="display"){z=this._animateTickDisplay
}}}if(!this._animators[A]){this._animators[A]={}}var D=this._animators[A];D.start=null;
D.duration=Math.floor(this.transitions[A].duration*1000);D.startValue=p;D.endValue=m;
D.layer=G;D.property=c;D.action=z;D.style=G.style;D.holder=this;if(this.transitions[A].action){D.callback={source:this,target:(this.transitions[A].target||this),action:this.transitions[A].action}
}t=this.transitions[A].timing||SC.Animatable.defaultTimingFunction;if(t&&SC.typeOf(t)!=SC.T_STRING){D.timingFunction=t
}if(!D.going){this._animationsToStart[A]=D}}var u=this._animationOrder,w=this._animationOrder.length;
for(A=0;A<w;A++){var y=u[A];if(this._animationsToStart[y]){SC.Animatable.addTimer(this._animationsToStart[y]);
delete this._animationsToStart[y]}}var k=j.join(",");j.length="";this._animatableSetCSS=k;
this._animatableApplyStyles(G,f,h);return this},_style_opacity_helper:function(c,a,b){c.opacity=b.opacity;
c.mozOpacity=b.opacity;c.filter="alpha(opacity="+b.opacity*100+")"},_animatableApplyStyles:function(b,c,a){if(!b){return
}var f=NO;if(c.display&&b.style.display!==c.display){b.style.display=c.display;f=YES
}if(this._animatableSetCSS!=this._last_transition_css){b.style[SC.platform.domCSSPrefix+"Transition"]=this._animatableSetCSS;
this._last_transition_css=this._animatableSetCSS;f=YES}if(!this._animators["display-styles"]){this._animators["display-styles"]={}
}var e=this._animators["display-styles"];e.holder=this;e.action=this._animatableApplyNonDisplayStylesFromTimer;
e.inLoopAction=this._animatableApplyNonDisplayStyles;e.layer=b;e.styles=c;e.delayed=a;
this._animatableCurrentStyle=c;if(this._disableAnimation>0||!f){e.inLoopAction()}else{SC.Animatable.addTimer(e)
}},_animatableApplyNonDisplayStylesFromTimer:function(){SC.run(function(){this.inLoopAction()
},this)},_animatableApplyNonDisplayStyles:function(){var h=this.layer,l=this.holder._animatableCurrentStyle;
var e={opacity:this.holder._style_opacity_helper};var j={},m=NO,a=h.style;var b="";
for(var g in l){if(g=="display"){continue}if(this.holder._layoutStyles.indexOf(g)>=0){j[g]=l[g];
m=YES;continue}else{if(g=="transform"){b+=" "+l[g]}else{if(e[g]){e[g](a,g,l)}else{a[g]=l[g]
}}}}if(m){var c=this.holder.layout;this.holder.layout=j;this.holder.notifyPropertyChange("layoutStyle");
var f=this.holder.get("layoutStyle");for(var k in f){if(SC.none(f[k])){a[k]=""}else{if(a[k]!=f[k]){a[k]=f[k]
}}}this.holder.layout=c}if(this.delayed){SC.mixin(this.holder._animatableCurrentStyle,this.delayed);
this.styles=this.delayed;this.delayed=undefined;if(this._disableAnimation>0){this.inLoopAction()
}else{SC.Animatable.addTimer(this)}}},updateLayout:function(c,a){var b=SC.clone(this.get("style"));
var h=this.get("layout");var e=0,f=this._layoutStyles,j=f.length,g=NO;for(e=0;e<j;
e++){var k=f[e];if(b[k]!==h[k]){if(SC.none(h[k])){b[k]=undefined}else{b[k]=h[k]}g=YES
}}if(g){this.style=b;this.updateStyle()}return this},_solveBezierForT:function(b,q,n,m,g,e,o,f){var p=1/(200*f);
var l,k,j,c,a,h;for(j=o,h=0;h<8;h++){c=((b*j+n)*j+g)*j-o;if(Math.abs(c)<p){return j
}a=(3*b*j+2*n)*j+g;if(Math.abs(a)<Math.pow(10,-6)){break}j=j-c/a}l=0;k=1;j=o;if(j<l){return l
}if(j>k){return k}while(l<k){c=((b*j+n)*j+g)*j;if(Math.abs(c-o)<p){return j}if(o>c){l=j
}else{k=j}j=(k-l)*0.5+l}return j},_solveBezier:function(c,b,k,j,l,f){var g=3*c;var i=3*(k-c)-g;
var a=1-g-i;var e=3*b;var h=3*(j-b)-e;var n=1-e-h;var m=this._solveBezierForT(a,n,i,h,g,e,l,f);
return((n*m+h)*m+e)*m},_animateTickPixel:function(m){if(SC.none(this.start)){this.start=m;
this.end=this.start+this.duration}var n=this.start,g=this.end;var l=this.startValue,j=this.endValue;
var h=g-n;var b=j-l;var i=m-n;var f=Math.min(i/h,1);if(this.timingFunction){var a=this.timingFunction;
f=this.holder._solveBezier(a[0],a[1],a[2],a[3],f,h)}var k=Math.floor(l+(b*f));this.holder._animatableCurrentStyle[this.property]=k;
this.style[this.property]=k+"px";if(m<g){SC.Animatable.addTimer(this)}else{this.going=false;
if(this.callback){SC.Animatable.runCallback(this.callback)}this.styles=null;this.layer=null
}},_animateTickDisplay:function(a){if(SC.none(this.start)){this.start=a;this.end=this.start+this.duration
}var b=this.end;if(a<b){SC.Animatable.addTimer(this);return}this.holder._animatableCurrentStyle[this.property]=this.endValue;
this.style[this.property]=this.endValue;this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)
}this.styles=null;this.layer=null},_animateTickNumber:function(m){if(SC.none(this.start)){this.start=m;
this.end=this.start+this.duration}var n=this.start,g=this.end;var l=this.startValue,j=this.endValue;
var h=g-n;var b=j-l;var i=m-n;var f=Math.min(i/h,1);if(this.timingFunction){var a=this.timingFunction;
f=this.holder._solveBezier(a[0],a[1],a[2],a[3],f,h)}var k=Math.round((l+(b*f))*100)/100;
this.holder._animatableCurrentStyle[this.property]=k;this.style[this.property]=k;
if(this.property=="opacity"){this.style.zoom=1;this.style.filter="alpha(opacity="+Math.round(k*20)*5+")"
}if(m<g){SC.Animatable.addTimer(this)}else{this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)
}this.styles=null;this.layer=null}},_animateTickCenter:function(o){if(SC.none(this.start)){this.start=o;
this.end=this.start+this.duration}var p=this.start,h=this.end;var n=this.startValue,k=this.endValue;
var i=h-p;var f=k-n;var j=o-p;var g=Math.min(j/i,1);if(this.timingFunction){var b=this.timingFunction;
g=this.holder._solveBezier(b[0],b[1],b[2],b[3],g,i)}var m=n+(f*g);this.holder._animatableCurrentStyle[this.property]=m;
var l,a;if(this.property=="centerX"){l="width";a="marginLeft"}else{l="height";a="marginTop"
}this.style[a]=Math.round(m-(this.holder._animatableCurrentStyle[l]/2))+"px";if(o<h){SC.Animatable.addTimer(this)
}else{this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)
}this.styles=null;this.layer=null}}};SC.mixin(SC.Animatable,{NAMESPACE:"SC.Animatable",VERSION:"0.1.0",TRANSITION_NONE:"linear",TRANSITION_CSS_EASE:"ease",TRANSITION_CSS_EASE_IN:"ease-in",TRANSITION_CSS_EASE_OUT:"ease-out",TRANSITION_CSS_EASE_IN_OUT:"ease-in-out",TRANSITION_EASE:[0.25,0.1,0.25,1],TRANSITION_LINEAR:[0,0,1,1],TRANSITION_EASE_IN:[0.42,0,1,1],TRANSITION_EASE_OUT:[0,0,0.58,1],TRANSITION_EASE_IN_OUT:[0.42,0,0.58,1],defaultTimingFunction:null,baseTimer:{next:null},going:false,_ticks:0,_timer_start_time:null,interval:10,currentTime:new Date().getTime(),stats:SC.Object.create({lastFPS:0}),addTimer:function(a){if(a.isQueued){return
}a.prev=SC.Animatable.baseTimer;a.next=SC.Animatable.baseTimer.next;if(SC.Animatable.baseTimer.next){SC.Animatable.baseTimer.next.prev=a
}SC.Animatable.baseTimer.next=a;a.isQueued=true;if(!SC.Animatable.going){SC.Animatable.start()
}},removeTimer:function(a){if(!a.isQueued){return}if(a.next){a.next.prev=a.prev}a.prev.next=a.next;
a.isQueued=false},start:function(){SC.Animatable._ticks=0;SC.Animatable._timer_start_time=new Date().getTime();
SC.Animatable.going=true;setTimeout(function(){SC.Animatable.timeout()},SC.Animatable.interval)
},timeout:function(){SC.Animatable.currentTime=new Date().getTime();var h=SC.Animatable.currentTime;
var f=SC.Animatable.baseTimer.next;SC.Animatable.baseTimer.next=null;var e=0;while(f){var c=f.next;
f.isQueued=false;f.next=null;f.prev=null;f.action.call(f,h);f=c;e++}if(SC.Animatable._ticks<1000000){SC.Animatable._ticks++
}var b=new Date().getTime();var a=b-h;if(SC.Animatable.baseTimer.next){setTimeout(function(){SC.Animatable.timeout()
},Math.max(0,SC.Animatable.interval-a))}else{SC.Animatable.going=false;var g=b-SC.Animatable._timer_start_time;
SC.run(function(){SC.Animatable.stats.set("lastFPS",SC.Animatable._ticks/(g/1000))
})}},runCallback:function(g){var a=SC.typeOf(g.action);if(a==SC.T_FUNCTION){g.action.call(g.target,g.source)
}else{if(a===SC.T_STRING){if(g.action.indexOf(".")>=0){var f=g.action.split(".");
var c=f.pop();var e=SC.objectForPropertyPath(f,window);var b=e.get?e.get(c):e[c];
if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(e,g.source)}else{throw"SC.Animator could not find a function at %@".fmt(g.action)
}}else{SC.RootResponder.responder.sendAction(g.action,g.target,g.source,g.source.get("pane"),null,g.source)
}}}}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/animation")
}window.Scui=window.Scui||SC.Object.create();window.SCUI=window.SCUI||window.Scui;
SCUI.READY="READY";SCUI.BUSY="BUSY";SCUI.DONE="DONE";SCUI.ERROR="ERROR";SCUI.DISCLOSED_STAND_ALONE="standAlone";
SCUI.DISCLOSED_LIST_DEPENDENT="listDependent";SCUI.DISCLOSED_OPEN="open";SCUI.DISCLOSED_CLOSED="closed";
SCUI.DEFAULT_TREE="default";sc_require("core");SCUI.SearchableArrayController=SC.ArrayController.extend({search:null,searchResults:[],searchKey:"name",init:function(){arguments.callee.base.apply(this,arguments);
this.set("searchResults",[]);this._runSearch()},_searchOrContentDidChange:function(){this._runSearch()
}.observes("search","content"),_sanitizeSearchString:function(c){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];
var b=new RegExp("(\\"+a.join("|\\")+")","g");return c.replace(b,"\\$1")},_runSearch:function(){var a=[];
var n=this.get("search");var e=this.get("searchKey");var j=this.get("content"),m;
if(n===null||n===""||n===undefined){this.set("searchResults",j)}else{n=this._sanitizeSearchString(n).toLowerCase();
m=new RegExp(n,"i");var k,l,b,c,f;for(var g=0,h=j.get("length");g<h;g++){k=j.objectAt(g);
l=k.get(e);if(!l){continue}if(l.match(m)){a.push(k)}}a.set("allowsSelection",this.get("allowsSelection"));
a.set("allowsMultipleSelection",this.get("allowsMultipleSelection"));a.set("allowsEmptySelection",this.get("allowsEmptySelection"));
this.set("searchResults",a)}}});sc_require("core");SCUI.SearchableTreeController=SC.TreeController.extend({search:null,searchResults:[],searchKey:"name",iconKey:"icon",nameKey:"name",init:function(){arguments.callee.base.apply(this,arguments);
this.set("searchResults",[]);this._runSearch()},_searchDidChange:function(){this._runSearch()
}.observes("search","content"),_sanitizeSearchString:function(c){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];
var b=new RegExp("(\\"+a.join("|\\")+")","g");return c.replace(b,"\\$1")},_runSearch:function(){var e=[];
var b=this.get("search");var h=this.get("content");if(b===null||b===""||b===undefined){this.set("searchResults",h)
}else{b=this._sanitizeSearchString(b).toLowerCase();var f=new RegExp(b,"i");var g=this.get("searchKey");
this._iconKey=this.get("iconKey");this._nameKey=this.get("nameKey");e=this._runSearchOnItem(h,b,f,g);
var a=SC.Object.create({treeItemIsExpanded:YES,treeItemChildren:e});this.set("searchResults",a)
}},_runSearchOnItem:function(f,m,l,c){var a=[],i=this.get("iconKey"),g,j,k,b,e=this._nameKey,h;
if(SC.none(f)){return a}b=f.get("treeItemChildren");if(!b){b=f.get("children")}h=this;
b.forEach(function(o){if(o.treeItemChildren){var n=h._runSearchOnItem(o,m,l,c);n.forEach(function(p){a.push(p)
})}if(c&&o.get(c)){j=o.get(c).toLowerCase();if(j.match(l)){a.push(o)}}});a.set("allowsSelection",this.get("allowsSelection"));
a.set("allowsMultipleSelection",this.get("allowsMultipleSelection"));a.set("allowsEmptySelection",this.get("allowsEmptySelection"));
return a}});SCUI.SearchableTreeController.mixin({sanitizeSearchString:function(c){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];
var b=new RegExp("(\\"+a.join("|\\")+")","g");return c.replace(b,"\\$1")}});sc_require("core");
SCUI.DropDown={isShowingDropDown:NO,_dropDownPane:null,dropDown:SC.MenuPane.design({layout:{width:100,height:0},contentView:SC.View.design({}),items:["_item".loc("1"),"_item".loc("2")]}),dropDownType:SC.PICKER_MENU,initMixin:function(){var a=this.get("dropDown");
if(a&&SC.typeOf(a)===SC.T_CLASS){this._dropDownPane=a.create();if(this._dropDownPane){this.bind("isShowingDropDown","._dropDownPane.isPaneAttached")
}}if(this.target!==undefined&&this.action!==undefined){this.set("target",this);this.set("action","toggle")
}},hideDropDown:function(){if(this._dropDownPane&&SC.typeOf(this._dropDownPane.remove)===SC.T_FUNCTION){this._dropDownPane.remove();
this.set("isShowingDropDown",NO)}},showDropDown:function(){this.hideDropDown();if(this._dropDownPane&&SC.typeOf(this._dropDownPane.popup)===SC.T_FUNCTION){var a=this.get("dropDownType");
this._dropDownPane.popup(this,a);this.set("isShowingDropDown",YES)}},toggle:function(){if(this.get("isShowingDropDown")){this.hideDropDown()
}else{this.showDropDown()}}};sc_require("core");SCUI.CollectionViewDynamicDelegate={isCollectionViewDynamicDelegate:YES,collectionViewContentExampleViewFor:function(a,b,c){return null
},controllerForContent:function(a){return null},customRowViewMetadata:null,contentViewMetadataForContentIndex:function(a,e){var c=null;
if(a&&a.get("isDynamicCollection")){var b=a.get("customRowViewMetadata");if(!SC.none(b)){c=b.objectAt(e)
}}return c},contentViewDidChangeForContentIndex:function(a,c,b,e){if(a&&a.isDynamicCollection&&c&&c.isDynamicListItem){this.collectionViewSetMetadataForContentIndex(a,c.get("viewMetadata"),e)
}},collectionViewInsertMetadataForContentIndex:function(b,e,f){var c=b.get("customRowViewMetadata");
if(SC.none(c)){return}var a=c.get("length");console.log("Before Insert Length: %@".fmt(a));
if(a<1){c=[e]}else{c.replace(f,0,[e])}console.log("After Insert Length: %@".fmt(c.length));
b.set("customRowViewMetadata",c);b.rowHeightDidChangeForIndexes(f)},collectionViewSetMetadataForContentIndex:function(a,e,f){console.log("\nCollectionViewDynamicDelegate(%@): collectionViewSetMetadataForContentIndex for (%@)".fmt(this,f));
if(a&&a.get("isDynamicCollection")){var b=a.get("customRowHeightIndexes");if(SC.none(b)){b=SC.IndexSet.create()
}b.add(f,1);a.set("customRowHeightIndexes",b);var c=a.get("customRowViewMetadata");
if(SC.none(c)){c=SC.SparseArray.create()}c.replace(f,1,[e]);a.set("customRowViewMetadata",c);
a.rowHeightDidChangeForIndexes(f)}return e}};sc_require("core");SCUI.DynamicCollection={isDynamicCollection:YES,customRowViewMetadata:null,initMixin:function(){this.set("customRowViewMetadata",SC.SparseArray.create());
this.set("rowDelegate",this)},rowMargin:0,itemViewForContentIndex:function(m,l){var j=this.get("content"),e=this._sc_itemViews,q=j.objectAt(m),a=this.get("contentDelegate"),p=this.get("delegate"),k=a.contentGroupIndexes(this,j),c=NO,o,i,s,h,b,f;
if(!e){e=this._sc_itemViews=[]}if(!l&&(i=e[m])){return i}c=k&&k.contains(m);if(c){c=a.contentIndexIsGroup(this,q,m)
}if(c){o=this.get("contentGroupExampleViewKey");if(o&&q){s=q.get(o)}if(!s){s=this.get("groupExampleView")||this.get("exampleView")
}}else{s=this.invokeDelegateMethod(p,"collectionViewContentExampleViewFor",this,q,m);
if(!s){o=this.get("contentExampleViewKey");if(o&&q){s=q.get(o)}}if(!s){s=this.get("exampleView")
}}var n=this._TMP_ATTRS;n.contentIndex=m;n.content=q;n.owner=n.displayDelegate=this;
n.parentView=this.get("containerView")||this;n.page=this.page;n.layerId=this.layerIdFor(m,q);
n.isEnabled=a.contentIndexIsEnabled(this,q,m);n.isSelected=a.contentIndexIsSelected(this,q,m);
n.outlineLevel=a.contentIndexOutlineLevel(this,q,m);n.disclosureState=a.contentIndexDisclosureState(this,q,m);
n.isGroupView=c;n.isVisibleInWindow=this.isVisibleInWindow;if(c){n.classNames=this._GROUP_COLLECTION_CLASS_NAMES
}else{n.classNames=this._COLLECTION_CLASS_NAMES}h=this.layoutForContentIndex(m);if(h){n.layout=h
}else{delete n.layout}f=p.controllerForContent(q);if(f){n.rootController=f}else{delete n.rootController
}n.dynamicDelegate=p;var g=this.invokeDelegateMethod(p,"contentViewMetadataForContentIndex",this,m);
if(g){n.viewMetadata=g}else{delete n.viewMetadata}i=this.createItemView(s,m,n);if(!g){g=this.invokeDelegateMethod(p,"collectionViewSetMetadataForContentIndex",this,i.get("viewMetadata"),m)
}e[m]=i;return i},layoutForContentIndex:function(b){var a=this.get("rowMargin");return{top:this.rowOffsetForContentIndex(b),height:this.rowHeightForContentIndex(b),left:a,right:a}
},contentIndexRowHeight:function(c,f,g){var a=this.get("rowHeight");if(c&&c.get("isDynamicCollection")){var e=c.get("customRowViewMetadata");
if(!SC.none(e)){var b=e.objectAt(g);if(b&&b.height){a=b.height}}}return a}};sc_require("core");
SCUI.DynamicListItem={isDynamicListItem:YES,dynamicDelegate:null,rootController:null,viewMetadata:null,viewMetadataHasChanged:function(){var a=this.get("dynamicDelegate");
this.invokeDelegateMethod(a,"contentViewDidChangeForContentIndex",this.owner,this,this.get("content"),this.contentIndex)
}};SCUI.Mobility={viewThatMoves:null,mouseDown:function(a){var b,c;b=this.get("viewThatMoves")||this;
if(!b){return YES}c=SC.clone(b.get("layout"));c.pageX=a.pageX;c.pageY=a.pageY;this._mouseDownInfo=c;
return YES},_adjustViewLayoutOnDrag:function(l,j,h,n,f,m,c,b,e){var k=f[m],g=f[c],a=f[b],o=f[e];
if(!SC.none(o)){if(!SC.none(k)){l.adjust(m,k+n)}else{if(!SC.none(g)){l.adjust(c,g-n)
}else{if(!SC.none(a)){l.adjust(b,a+n)}}}}},mouseDragged:function(e){var f=this._mouseDownInfo;
if(f){var c=e.pageX-f.pageX,a=e.pageY-f.pageY;var b=this.get("viewThatMoves")||this;
this._adjustViewLayoutOnDrag(b,f.zoneX,f.zoneY,c,f,"left","right","centerX","width");
this._adjustViewLayoutOnDrag(b,f.zoneY,f.zoneX,a,f,"top","bottom","centerY","height");
return YES}return NO}};SCUI.Permissible={isPermitted:null,isPermittedBindingDefault:SC.Binding.oneWay().bool(),displayProperties:["isPermitted","tooltipSuffix"],tooltipSuffix:" (unauthorized)".loc(),_isPermittedDidChange:function(){if(this.get("isPermitted")){if(!SC.none(this._tooltip)){this.setIfChanged("toolTip",this._tooltip)
}}else{this._tooltip=this.get("toolTip");this.set("toolTip",this._tooltip+this.get("tooltipSuffix"))
}}.observes("isPermitted"),renderMixin:function(a,b){a.setClass("unauthorized",!this.get("isPermitted"))
}};SCUI.RECUR_ONCE="once";SCUI.RECUR_REPEAT="repeat";SCUI.RECUR_SCHEDULE="schedule";
SCUI.RECUR_ALWAYS="always";SCUI.Recurrent={isRecurrent:YES,_timer_pool:{},_guid_for_timer:1,fireOnce:function(j,e,k){if(e===undefined){e=1
}var h=j,a=k,i,g;if(!k){a=function(){return YES}}if(SC.typeOf(k)===SC.T_STRING){a=this[k]
}var b=this._name_builder(SCUI.RECUR_ONCE,j);if(arguments.length>3){i=SC.$A(arguments).slice(3);
if(SC.typeOf(h)===SC.T_STRING){h=this[j]}g=h;h=function(){delete this._timer_pool[b];
if(a.call(this)){return g.apply(this,i)}}}var c=SC.Timer.schedule({target:this,action:h,interval:e});
this._timer_pool[b]=c;return b},_name_builder:function(b,c){var a="%@_%@_%@".fmt(b,c,this._guid_for_timer);
this._guid_for_timer+=1;return a}};SCUI.Resizable={viewToResize:null,verticalMove:YES,horizontalMove:YES,maxHeight:null,minHeight:null,maxWidth:null,minWidth:null,mouseDown:function(a){var b,c={};
b=this.get("viewToResize")||this.get("parentView");if(!b){return YES}c.resizeView=b;
var e=b.get("frame");c.width=e.width;c.height=e.height;c.top=e.y;c.left=e.x;c.pageX=a.pageX;
c.pageY=a.pageY;this._mouseDownInfo=c;return YES},mouseDragged:function(n){var g=this._mouseDownInfo;
if(!g){return YES}var f=n.pageX-g.pageX,e=n.pageY-g.pageY;if(f===0&&e===0){return YES
}var k=g.resizeView;var h=SC.clone(k.get("layout"));var j=this.get("horizontalMove");
if(j){var b=g.width+f;var m=this.get("maxWidth");var a=this.get("minWidth");if(!SC.none(m)&&b>m){b=m
}else{if(!SC.none(a)&&b<a){b=a}}h.width=b}var c=this.get("verticalMove");if(c){var p=g.height+e;
var l=this.get("maxHeight");var o=this.get("minHeight");if(!SC.none(l)&&p>l){p=l}else{if(!SC.none(o)&&p<o){p=o
}}h.height=p}h.top=g.top;h.left=g.left;k.set("layout",h);k.updateLayout();return YES
}};SCUI.SimpleButton={target:null,action:null,hasState:NO,hasHover:NO,inState:NO,_hover:NO,stateClass:"state",hoverClass:"hover",activeClass:"active",_isMouseDown:NO,displayProperties:["inState","isEnabled"],mouseDown:function(a){if(!this.get("isEnabledInPane")){return YES
}this._isMouseDown=YES;this.displayDidChange();return YES},mouseExited:function(a){if(this.get("hasHover")){this._hover=NO;
this.displayDidChange()}return YES},mouseEntered:function(a){if(this.get("hasHover")){this._hover=YES;
this.displayDidChange()}return YES},mouseUp:function(a){if(!this.get("isEnabledInPane")){return YES
}this._isMouseDown=false;var c=this.get("target")||null;var b=this.get("action");
if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)}else{this.getPath("pane.rootResponder").sendAction(b,c,this,this.get("pane"))
}if(this.get("hasState")){this.set("inState",!this.get("inState"))}this.displayDidChange();
return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)
},renderMixin:function(c,g){if(this.get("hasHover")){var e=this.get("hoverClass");
c.setClass(e,this._hover&&!this._isMouseDown)}if(this.get("hasState")){var f=this.get("stateClass");
c.setClass(f,this.inState)}var b=this.get("activeClass");c.setClass(b,this._isMouseDown);
var a=this.get("toolTip");if(SC.typeOf(a)===SC.T_STRING){if(this.get("localize")){a=a.loc()
}c.attr("title",a);c.attr("alt",a)}},_hasLegacyActionHandler:function(){var a=this.get("action");
if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!==-1)){return true
}return false},_triggerLegacyActionHandler:function(evt){var target=this.get("target");
var action=this.get("action");if(target===undefined&&SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)
}else{if(target!==undefined&&SC.typeOf(action)===SC.T_FUNCTION){action.apply(target,[evt])
}}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");
this.action(evt)}}};SCUI.StatusChanged={notifyOnContentStatusChange:YES,contentStatusDidChange:function(a){},contentKey:"content",_sc_content_status_changed:function(){var a,b;
if(this.get("contentKey")&&this.get){b=this.get(this.get("contentKey"))}if(b&&b.get){a=b.get("status")
}if(this.get("notifyOnContentStatusChange")&&a&&this.contentStatusDidChange){this.contentStatusDidChange(a)
}},initMixin:function(){if(this.get("notifyOnContentStatusChange")&&this.addObserver){var a;
if(this.get("contentKey")){a="%@.status".fmt(this.get("contentKey"))}if(a&&this.addObserver){this.addObserver(a,this,this._sc_content_status_changed)
}}}};sc_require("core");SCUI.ToolTip={toolTip:"",isImage:NO,renderMixin:function(c,f){var b=this.get("toolTip");
var e=this.get("isImage"),a;b=(SC.typeOf(b)===SC.T_STRING)?SC.RenderContext.escapeHTML(b).replace(/\"/g,"'"):"";
if(e){a={title:b,alt:b}}else{a={title:b}}c=c.attr(a)}};SCUI.ContextMenuPane=SC.MenuPane.extend({usingStaticLayout:NO,popup:function(h,b){var e=this.get("items");
if(!e||e.get("length")<=0){return NO}if((!h||!h.isView)&&!this.get("usingStaticLayout")){return NO
}if(b&&b.button&&(b.which===3||(b.ctrlKey&&b.which===1))){document.oncontextmenu=function(j){if(b.preventDefault){b.preventDefault()
}else{b.stop()}b.returnValue=false;b.stopPropagation();return false};var f=h.isView?h.get("layer"):h;
var c=SC.viewportOffset(f);var a=b.pageX-c.x;var i=b.pageY-c.y;this.beginPropertyChanges();
var g=this.get("displayItems");this.set("anchorElement",f);this.set("anchor",h);this.set("preferType",SC.PICKER_MENU);
this.endPropertyChanges();return arguments.callee.base.apply(this,[h,[a+2,i+2,1]])
}else{}return NO},remove:function(){return arguments.callee.base.apply(this,arguments)
},keyUp:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])
}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO
}}},keyDown:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])
}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO
}}},exampleView:SC.MenuItemView.extend({keyUp:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])
}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO
}}},keyDown:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])
}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO
}}}})});SCUI.ModalPane=SC.PalettePane.extend({maxHeight:null,minHeight:null,maxWidth:null,minWidth:null,title:"",titleIcon:null,titleBarHeight:24,footerHeight:40,footerView:null,isResizable:YES,margin:20,isModal:YES,nowShowing:null,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),_containerView:null,_isFullscreened:NO,mouseDown:function(a){if(this._titleBarClicked===YES){arguments.callee.base.apply(this,arguments)
}return YES},mouseDragged:function(a){if(this._titleBarClicked===YES){arguments.callee.base.apply(this,arguments)
}return YES},mouseUp:function(a){this._titleBarClicked=NO;return arguments.callee.base.apply(this,arguments)
},replaceContent:function(a){this._containerView.replaceContent(a)},_fullscreen:function(){if(this._isFullscreened===NO){this._prevLayout=this.get("layout");
var e=this.get("margin");var c={top:e,bottom:e,left:e,right:e};c=SC.View.convertLayoutToAnchoredLayout(c,this.computeParentDimensions());
var b=this.get("maxWidth");if(b&&b<c.width){c.width=b;delete c.left;delete c.right;
c.centerX=0}var a=this.get("maxHeight");if(a&&a<c.height){c.height=a;delete c.top;
delete c.bottom;c.centerY=0}this.set("layout",c)}else{this.set("layout",this._prevLayout)
}this.updateLayout();this._isFullscreened=!this._isFullscreened},createChildViews:function(){var g=[];
var a=null;var c=this.get("titleBarHeight");var e=this;a=this.createChildView(SC.View.design({classNames:["header"],layout:{top:0,left:0,right:0,height:c},mouseDown:function(h){e._titleBarClicked=YES;
return NO},childViews:"closeButton fullScreenButton title".w(),closeButton:SC.View.design(SCUI.SimpleButton,{layout:{left:5,centerY:0,width:16,height:16},classNames:["modal-close-icon"],target:this,action:"remove"}),fullScreenButton:SC.View.design(SCUI.SimpleButton,{layout:{left:25,centerY:0,width:16,height:16},classNames:["modal-fullscreen-icon"],target:this,action:"_fullscreen",isVisibleBinding:SC.binding(".isResizable",this)}),title:SC.LabelView.design({layout:{left:45,right:45,top:0,bottom:0},valueBinding:SC.Binding.from("title",this).oneWay(),textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,classNames:["modal-title"],icon:this.get("titleIcon")})}));
g.push(a);var f=this.get("footerView");var b=this.get("footerHeight");a=this.createChildView(SC.ContainerView.design({layout:{top:c+1,bottom:f?(b+1):0,left:0,right:0},classNames:"body",nowShowingBinding:SC.Binding.from("nowShowing",this),contentView:this.get("contentView")}));
this._containerView=a;this.contentView=this._containerView.contentView;g.push(a);
if(SC.kindOf(f,SC.View)&&f.isClass){a=this.createChildView(f,{classNames:"footer",layout:{left:0,right:0,bottom:0,height:b}});
this.set("footerView",a);g.push(a)}else{this.set("footerView",null)}a=this.createChildView(SC.View.design(SCUI.Resizable,{classNames:["picker-resizable-handle"],layout:{bottom:0,right:0,height:16,width:16},viewToResizeBinding:SC.Binding.oneWay(".parentView"),maxHeight:this.get("maxHeight"),maxWidth:this.get("maxWidth"),minHeight:this.get("minHeight"),minWidth:this.get("minWidth"),isVisibleBinding:SC.binding(".isResizable",this)}));
g.push(a);this.set("childViews",g)}});SCUI.State=SC.Object.extend({initState:function(){},enterState:function(a){},exitState:function(a){},parallelStatechart:SCUI.DEFAULT_TREE,parentState:null,history:null,initialSubState:null,name:null,state:function(){var a=this.get("stateManager");
if(!a){throw"Cannot access the current state because state does not have a state manager"
}return a.currentState(this.get("parallelStatechart"))},goState:function(a){var b=this.get("stateManager");
if(b){b.goState(a,this.get("parallelStatechart"))}else{throw"Cannot goState cause state does not have a stateManager!"
}},goHistoryState:function(a,b){var c=this.get("stateManager");if(c){c.goHistoryState(a,this.get("parallelStatechart"),b)
}else{throw"Cannot goState cause state does not have a stateManager!"}},enterInitialSubState:function(a){var b=this.get("initialSubState");
if(b){if(!a[b]){throw"Cannot find initial sub state: %@ defined on state: %@".fmt(b,this.get("name"))
}this.set("history",b);var c=a[b];return this.goState(b,a)}return this},toString:function(){return this.get("name")
},parentStateObject:function(){var a=this.get("stateManager");if(a){return a.parentStateObject(this.get("parentState"),this.get("parallelStatechart"))
}else{throw"Cannot access parentState cause state does not have a stateManager!"}}.property("parentState").cacheable(),trace:function(){var a=this.get("stateManager");
if(a){return a._parentStates(this)}else{throw"Cannot trace cause state does not have a stateManager!"
}}.property()});require("system/state");SCUI.Statechart={isStatechart:true,LOG_NONE:0,LOG_STATE_CHANGES:1,LOG_SENT_EVENTS:2,LOG_HANDLED_EVENTS:4,LOG_UNHANDLED_EVENTS:8,LOG_ALL_EVENTS:14,LOG_ALL:15,logLevel:0,initMixin:function(){this._all_states={};
this._all_states[SCUI.DEFAULT_TREE]={};this._current_state={};this._current_state[SCUI.DEFAULT_TREE]=null;
this._goStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];
this._pendingActions=[];this.sendAction=this.sendEvent;if(this.get("startOnInit")){this.startupStatechart()
}},startOnInit:YES,statechartIsStarted:NO,startupStatechart:function(){if(!this.get("statechartIsStarted")){var f,a,h,c,e,b,g;
for(f in this){if(this.hasOwnProperty(f)&&SC.kindOf(this[f],SCUI.State)&&this[f].get&&!this[f].get("beenAddedToStatechart")){h=this[f];
this._addState(f,h)}}c=this._all_states;for(f in c){if(c.hasOwnProperty(f)){a=c[f];
for(h in a){if(a.hasOwnProperty(h)){a[h].initState()}}}}e=this.get("startStates");
if(!e){throw"Please add startStates to your statechart!"}for(f in c){if(c.hasOwnProperty(f)){b=e[f];
g=c[f];if(!b){console.error("The parallel statechart %@ must have a start state!".fmt(f))
}if(!g){throw"The parallel statechart %@ does not exist!".fmt(f)}if(!g[b]){throw"The parallel statechart %@ doesn't have a start state [%@]!".fmt(f,b)
}this.goState(b,f)}}}this.setIfChanged("statechartIsStarted",YES)},registerState:function(f,e,c){var b,a;
b=SCUI.State.create(f);if(e&&c){if(e.isStatechart){e._addState(c,b);b.initState()
}else{throw"Cannot add state: %@ because state manager does not mixin SCUI.Statechart".fmt(b.get("name"))
}}else{b.set("beenAddedToStatechart",NO)}return b},goHistoryState:function(c,a,g){var e=this._all_states[a],b,f;
if(!a||!e){throw"State requesting go history does not have a valid parallel tree"
}b=e[c];if(b){f=b.get("history")||b.get("initialSubState")}if(!f){if(!g){console.warn("Requesting History State for [%@] and it is not a parent state".fmt(c))
}f=c;this.goState(f,a)}else{if(g){this.goHistoryState(f,a,g)}else{this.goState(f,a)
}}},goState:function(n,p){var b=this._current_state[p],m=[],k=[],o,e,a,l,f,g,j,c=this.get("logLevel"),h;
if(!p){throw"#goState: State requesting go does not have a valid parallel tree"}a=this._all_states[p][n];
if(!a){throw"#goState: Could not find the requested state: %@".fmt(n)}if(this._goStateLocked){this._pendingStateTransitions.push({requestedState:a,tree:p});
if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info("%@: added [%@] to pending state transitions queue for [%@]".fmt(this,a,p))
}return}if(b===a){return}this._goStateLocked=YES;m=this._parentStates_with_root(a);
k=b?this._parentStates_with_root(b):[];l=k.find(function(q,i){e=i;o=m.indexOf(q);
if(o>=0){return YES}});if(!o){o=m.length-1}h="";for(j=0;j<e;j+=1){if(c&SCUI.Statechart.LOG_STATE_CHANGES){h+="Exiting State: [%@] in [%@]\n".fmt(k[j],p)
}k[j].exitState()}if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info(h)}h="";for(j=o-1;
j>=0;j-=1){g=m[j];if(c&SCUI.Statechart.LOG_STATE_CHANGES){h+="Entering State: [%@] in [%@]\n".fmt(g,p)
}f=m[j+1];if(f&&SC.typeOf(f)===SC.T_OBJECT){f.set("history",g.name)}g.enterState();
if(g===a){g.enterInitialSubState(this._all_states[p||SCUI.DEFAULT_TREE])}}if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info(h)
}this._current_state[p]=a;this._goStateLocked=NO;this._flushPendingStateTransition();
this._flushPendingActions()},_flushPendingStateTransition:function(){var a=this.get("logLevel");
var c=this._pendingStateTransitions.shift();var b;if(!c){return}if(a&SCUI.Statechart.LOG_STATE_CHANGES){b="%@: performing pending state transition for requested state [%@] in [%@]";
console.info(b.fmt(this,c.requestedState,c.tree))}this.goState(c.requestedState,c.tree)
},currentState:function(a){a=a||SCUI.DEFAULT_TREE;return this._current_state[a]},isInState:function(g,b){b=b||SCUI.DEFAULT_TREE;
var a=this._all_states[b],c=this.currentState(b),e=NO;var f=this._parentStates(c)||[];
if(SC.typeOf(g)===SC.T_STRING){g=a[g]}f.forEach(function(h){if(!e&&h===g){e=YES}});
return e},isResponderContext:YES,sendEvent:function(e,g,a){var b=this.get("logLevel"),i=NO,h=this._current_state,f;
if(this._sendEventLocked||this._goStateLocked){this._pendingActions.push({action:e,sender:g,context:a});
if(b&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: added %@ to pending actions queue".fmt(this,e))
}return}this._sendEventLocked=YES;if(b&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: begin action '%@' (%@, %@)".fmt(this,e,g,a))
}for(var j in h){if(h.hasOwnProperty(j)){i=NO;f=h[j];if(!f.get){continue}while(!i&&f){if(f.tryToPerform){try{i=f.tryToPerform(e,g,a)
}catch(c){console.error("Exception occurred while trying perform action: %@ \n %@".fmt(e,c))
}}if(!i){f=f.get("parentState")?this._all_states[j][f.get("parentState")]:null}}if(!i&&(b&SCUI.Statechart.LOG_UNHANDLED_EVENTS)){console.info("%@:  action '%@' NOT HANDLED in tree %@".fmt(this,e,j))
}else{if(i&&(b&SCUI.Statechart.LOG_HANDLED_EVENTS)){console.info("%@: action '%@' handled by %@ in tree %@".fmt(this,e,f.get("name"),j))
}}}}this._sendEventLocked=NO;this._flushPendingActions();return f},_flushPendingActions:function(){var a=this._pendingActions.shift();
if(!a){return}if(this.get("logLevel")&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: firing pending action %@".fmt(this,a.action))
}this.sendEvent(a.action,a.sender,a.context)},_addState:function(b,c){c.set("stateManager",this);
c.set("name",b);var a=c.get("parallelStatechart")||SCUI.DEFAULT_TREE;c.setIfChanged("parallelStatechart",a);
if(!this._all_states[a]){this._all_states[a]={}}if(this._all_states[a][b]){throw"Trying to add state %@ to state tree %@ and it already exists".fmt(b,a)
}this._all_states[a][b]=c;c.set("beenAddedToStatechart",YES)},_parentStates:function(b){var a=[],c=b;
a.push(c);c=c.get("parentStateObject");while(c){a.push(c);c=c.get("parentStateObject")
}return a},_parentStates_with_root:function(b){var a=this._parentStates(b);a.push("root");
return a},parentStateObject:function(b,a){if(b&&a&&this._all_states[a]&&this._all_states[a][b]){return this._all_states[a][b]
}return null}};sc_require("core");SCUI.CascadingComboView=SC.View.extend({content:null,propertiesHash:null,masterLabel:null,detailLabel:null,init:function(){arguments.callee.base.apply(this,arguments)
},createChildViews:function(){var f=[],b;var h=["contentPath","masterValueKey","detailValueKey","rootItemKey","childItemKey","relationKey"];
var a=null;var c=this.get("propertiesHash");var e=this.get("content");if(c){h.forEach(function(i){if(!SC.none(c[i])&&c[i]!==""){a=YES
}else{a=null}})}if(a){b=this.createChildView(SC.LabelView.design({layout:{left:20,top:10,right:20,height:22},isEditable:NO,value:this.get("masterLabel").loc()}));
f.push(b);var g="*content.%@".fmt(c.rootItemKey);this.masterCombo=b=this.createChildView(SCUI.ComboBoxView.design({layout:{left:20,right:20,top:32,height:22},objectsBinding:c.contentPath,nameKey:c.masterValueKey,valueBinding:SC.Binding.from("*content.%@".fmt(c.rootItemKey),this)}));
f.push(b);b=this.createChildView(SC.LabelView.design({layout:{left:50,top:64,right:20,height:22},isEditable:NO,value:this.get("detailLabel").loc(),isEnabled:NO,isEnabledBinding:SC.Binding.from("*masterCombo.selectedObject",this).oneWay()}));
f.push(b);b=this.createChildView(SCUI.ComboBoxView.design({layout:{left:50,right:20,top:86,height:22},objectsBinding:SC.Binding.from("*content.%@".fmt(c.relationKey),this).oneWay(),nameKey:c.detailValueKey,isEnabled:NO,isEnabledBinding:SC.Binding.from("*masterCombo.selectedObject",this).oneWay(),valueBinding:SC.Binding.from("*content.%@".fmt(c.childItemKey),this)}));
f.push(b);this.set("childViews",f)}else{b=this.createChildView(SC.View.design({layout:{top:0,left:0,bottom:0,right:0},childViews:[SC.LabelView.design({layout:{centerX:0,centerY:0,width:300,height:18},value:a?"No Content.":"Setup did not meet requirements."})]}));
f.push(b);this.set("childViews",f)}}});sc_require("core");SCUI.CollapsibleView=SC.ContainerView.extend({classNames:["scui-collapsible-view"],expandedView:null,collapsedView:null,_isCollapsed:NO,_expandedView:null,_collapsedView:null,displayProperties:["expandedView","collapsedView"],createChildViews:function(){var b=this.get("expandedView");
this._expandedView=this._createChildViewIfNeeded(b);var c=this.get("collapsedView");
this._collapsedView=this._createChildViewIfNeeded(c);this.set("nowShowing",this._expandedView);
var a=this.get("contentView");this._adjustView(a)},expand:function(){if(this._expandedView){this.set("nowShowing",this._expandedView);
var a=this.get("contentView");this._isCollapsed=NO;this.displayDidChange();this._adjustView(a)
}},collapse:function(){if(this._collapsedView){this.set("nowShowing",this._collapsedView);
var a=this.get("contentView");this._isCollapsed=YES;this.displayDidChange();this._adjustView(a)
}},toggle:function(){if(this._isCollapsed){this.expand()}else{this.collapse()}},_expandedViewDidChange:function(){var a=this.get("expandedView");
console.log("%@._expandableViewDidChange(%@)".fmt(this,a));this._expandedView=this._createChildViewIfNeeded(a);
if(!this._isCollapsed){this.expand()}}.observes("expandedView"),_collapsedViewDidChange:function(){var a=this.get("collapsedView");
console.log("%@._collapsedViewDidChange(%@)".fmt(this,a));this._collapsedView=this._createChildViewIfNeeded(a);
if(this._isCollapsed){this.collapse()}}.observes("collapsedView"),_adjustView:function(a){if(a){var c=a.get("frame");
var b=this.get("layout");console.log("CollapsibleView: Frame for (%@): width: %@, height: %@".fmt(a,c.height,c.width));
b=SC.merge(b,{height:c.height,width:c.width});this.adjust(b)}},_createChildViewIfNeeded:function(a){if(SC.typeOf(a)===SC.T_CLASS){return this.createChildView(a)
}else{return a}}});SCUI.LocalizableListItemView=SC.ListItemView.extend({render:function(c,a){var g=this.get("content"),l=this.displayDelegate,b=this.get("outlineLevel"),f=this.get("outlineIndent"),k,j,i;
c.addClass((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));
i=c.begin("div").addClass("sc-outline");if(b>=0&&f>0){i.addStyle("left",f*(b+1))}j=this.get("disclosureState");
if(j!==SC.LEAF_NODE){this.renderDisclosure(i,j);c.addClass("has-disclosure")}k=this.getDelegateProperty("contentCheckboxKey",g,l);
if(k){j=g?(g.get?g.get(k):g[k]):NO;this.renderCheckbox(i,j);c.addClass("has-checkbox")
}if(this.getDelegateProperty("hasContentIcon",g,l)){k=this.getDelegateProperty("contentIconKey",l);
j=(k&&g)?(g.get?g.get(k):g[k]):null;this.renderIcon(i,j);c.addClass("has-icon")}k=this.getDelegateProperty("contentValueKey",g,l);
j=(k&&g)?(g.get?g.get(k):g[k]):g;if(j&&SC.typeOf(j)!==SC.T_STRING){j=j.toString()
}if(l&&l.get("localize")&&j&&j.loc){j=j.loc()}if(this.get("escapeHTML")){j=SC.RenderContext.escapeHTML(j)
}this.renderLabel(i,j);if(this.getDelegateProperty("hasContentRightIcon",l)){k=this.getDelegateProperty("contentRightIconKey",l);
j=(k&&g)?(g.get?g.get(k):g[k]):null;this.renderRightIcon(i,j);c.addClass("has-right-icon")
}k=this.getDelegateProperty("contentUnreadCountKey",g,l);j=(k&&g)?(g.get?g.get(k):g[k]):null;
if(!SC.none(j)&&(j!==0)){this.renderCount(i,j);var e=["zero","one","two","three","four","five"];
var h=(j.toString().length<e.length)?e[j.toString().length]:e[e.length-1];c.addClass("has-count "+h+"-digit")
}k=this.getDelegateProperty("listItemActionProperty",g,l);j=(k&&g)?(g.get?g.get(k):g[k]):null;
if(j){this.renderAction(i,j);c.addClass("has-action")}if(this.getDelegateProperty("hasContentBranch",g,l)){k=this.getDelegateProperty("contentIsBranchKey",g,l);
j=(k&&g)?(g.get?g.get(k):g[k]):NO;this.renderBranch(i,j);c.addClass("has-branch")
}c=i.end()}});sc_require("mixins/simple_button");sc_require("views/localizable_list_item");
SCUI.ComboBoxView=SC.View.extend(SC.Control,SC.Editable,{classNames:"scui-combobox-view",isEditable:function(){return this.get("isEnabled")
}.property("isEnabled").cacheable(),objects:null,objectsBindingDefault:SC.Binding.oneWay(),value:null,selectedObject:null,valueKey:null,nameKey:null,iconKey:null,sortKey:null,disableSort:NO,localize:NO,hint:null,filter:null,useExternalFilter:NO,status:null,isBusy:function(){return(this.get("status")&SC.Record.BUSY)?YES:NO
}.property("status").cacheable(),minListHeight:20,maxListHeight:200,statusIndicatorHeight:18,filteredObjects:function(){var b,e,g,c,a,f,h;
if(this.get("useExternalFilter")){b=this.get("objects")}else{g=this.get("objects")||[];
c=this.get("nameKey");e=this._sanitizeFilter(this.get("filter"))||"";e=e.toLowerCase();
h=this.get("localize");b=[];f=this;g.forEach(function(i){a=f._getObjectName(i,c,h);
if((SC.typeOf(a)===SC.T_STRING)&&(a.toLowerCase().search(e)>=0)){b.push(i)}})}return this.sortObjects(b)
}.property("objects","filter").cacheable(),textFieldView:SC.TextFieldView.extend({classNames:"scui-combobox-text-field-view",layout:{top:0,left:0,height:22,right:28}}),dropDownButtonView:SC.ButtonView.extend({layout:{top:0,right:0,height:24,width:28},icon:"caret"}),displayProperties:["isEditing"],init:function(){arguments.callee.base.apply(this,arguments);
this._createListPane();this._valueDidChange();this.bind("status",SC.Binding.from("*objects.status",this).oneWay())
},createChildViews:function(){var c=[],a;var b=this.get("isEnabled");a=this.get("textFieldView");
if(SC.kindOf(a,SC.View)&&a.isClass){a=this.createChildView(a,{isEnabled:b,hintBinding:SC.Binding.from("hint",this),editableDelegate:this,keyDelegate:this,keyDown:function(f){var e=this.get("keyDelegate");
return(e&&e.keyDown&&e.keyDown(f))||arguments.callee.base.apply(this,arguments)},keyUp:function(f){var e=this.get("keyDelegate");
return(e&&e.keyUp&&e.keyUp(f))||arguments.callee.base.apply(this,arguments)},beginEditing:function(){var e=this.get("editableDelegate");
var f=arguments.callee.base.apply(this,arguments);if(f&&e&&e.beginEditing){e.beginEditing()
}return f},commitEditing:function(){var e=this.get("editableDelegate");var f=arguments.callee.base.apply(this,arguments);
if(f&&e&&e.commitEditing){e.commitEditing()}return f}});c.push(a);this.set("textFieldView",a)
}else{this.set("textFieldView",null)}a=this.get("dropDownButtonView");if(SC.kindOf(a,SC.View)&&a.isClass){a=this.createChildView(a,{isEnabled:b,target:this,action:"toggleList"});
c.push(a);this.set("dropDownButtonView",a)}else{this.set("dropDownButtonView",null)
}this.set("childViews",c)},renderMixin:function(a,b){a.setClass("focus",this.get("isEditing"))
},sortObjects:function(b){var a;if(!this.get("disableSort")&&b&&b.sort){a=this.get("sortKey")||this.get("nameKey");
b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}e=(SC.typeOf(e)===SC.T_STRING)?e.toLowerCase():e;
c=(SC.typeOf(c)===SC.T_STRING)?c.toLowerCase():c;return(e<c)?-1:((e>c)?1:0)})}return b
},beginEditing:function(){var a=this.get("textFieldView");if(!this.get("isEditable")){return NO
}if(this.get("isEditing")){return YES}this.set("isEditing",YES);this.set("filter",null);
if(a&&!a.get("isEditing")){a.beginEditing()}return YES},commitEditing:function(){var a=this.get("textFieldView");
if(this.get("isEditing")){this._selectedObjectDidChange();this.set("isEditing",NO);
if(!SC.browser.msie){this.hideList()}}if(a&&a.get("isEditing")){a.commitEditing()
}return YES},toggleList:function(){if(this._listPane&&this._listPane.get("isPaneAttached")){this.hideList()
}else{this.showList()}},showList:function(){if(this._listPane&&!this._listPane.get("isPaneAttached")){this.beginEditing();
this._updateListPaneLayout();this._listPane.popup(this,SC.PICKER_MENU);this._listView.reload()
}},hideList:function(){if(this._listPane&&this._listPane.get("isPaneAttached")){this._listPane.remove()
}},keyDown:function(a){this._keyDown=YES;this._shouldUpdateFilter=NO;return this.interpretKeyEvents(a)?YES:NO
},keyUp:function(a){var b=NO;if(!this._keyDown){this._shouldUpdateFilter=NO;b=this.interpretKeyEvents(a)?YES:NO
}this._keyDown=NO;return b},insertText:function(a){this._shouldUpdateFilter=YES;this.showList();
return NO},deleteBackward:function(a){this._shouldUpdateFilter=YES;this.showList();
return NO},deleteForward:function(a){this._shouldUpdateFilter=YES;this.showList();
return NO},moveDown:function(a){if(this._listPane&&this._listView){if(this._listPane.get("isPaneAttached")){this._listView.moveDown(a)
}else{this.showList()}}return YES},moveUp:function(a){if(this._listPane&&this._listView){if(this._listPane.get("isPaneAttached")){this._listView.moveUp(a)
}else{this.showList()}}return YES},insertNewline:function(a){if(this._listPane&&this._listPane.get("isPaneAttached")){return this._listView.insertNewline(a)
}return NO},insertTab:function(a){var b=NO;if(this._listPane&&this._listPane.get("isPaneAttached")){this.invokeOnce("_selectListItem");
b=YES}return b},cancel:function(a){if(this._listPane&&this._listPane.get("isPaneAttached")){this.hideList()
}return NO},_isEnabledDidChange:function(){var a;var b=this.get("isEnabled");if(!b){this.commitEditing()
}a=this.get("textFieldView");if(a&&a.set){a.set("isEnabled",b)}a=this.get("dropDownButtonView");
if(a&&a.set){a.set("isEnabled",b)}}.observes("isEnabled"),_objectsDidChange:function(){this.notifyPropertyChange("filteredObjects")
}.observes("*objects.[]"),_filteredObjectsLengthDidChange:function(){this.invokeOnce("_updateListPaneLayout")
}.observes("*filteredObjects.length"),_isBusyDidChange:function(){this.invokeOnce("_updateListPaneLayout")
}.observes("isBusy"),_selectedObjectDidChange:function(){var b=this.get("selectedObject");
var a=this.get("textFieldView");this.setIfChanged("value",this._getObjectValue(b,this.get("valueKey")));
if(a){a.setIfChanged("value",this._getObjectName(b,this.get("nameKey"),this.get("localize")))
}this.set("filter",null)}.observes("selectedObject"),_valueDidChange:function(){var e=this.get("value");
var a=this.get("selectedObject");var b=this.get("valueKey");var c;if(e){if(b){if(e!==this._getObjectValue(a,b)){c=this.get("objects");
a=(c&&c.isEnumerable)?c.findProperty(b,e):null;this.set("selectedObject",a)}}else{this.setIfChanged("selectedObject",e)
}}else{this.set("selectedObject",null)}}.observes("value"),_listSelectionDidChange:function(){var c=this.getPath("_listSelection.firstObject");
var b,a;if(c&&this._listPane&&this._listPane.get("isPaneAttached")){b=this._getObjectName(c,this.get("nameKey"),this.get("localize"));
a=this.get("textFieldView");if(a){a.setIfChanged("value",b)}}}.observes("_listSelection"),_textFieldValueDidChange:function(){if(this._shouldUpdateFilter){this._shouldUpdateFilter=NO;
this.setIfChanged("filter",this.getPath("textFieldView.value"))}}.observes("*textFieldView.value"),_createListPane:function(){var c=this.get("isBusy");
var a=this.get("statusIndicatorHeight");var b=this.get("customScrollView")||SC.ScrollView;
this._listPane=SC.PickerPane.create({classNames:["scui-combobox-list-pane","sc-menu"],acceptsKeyPane:NO,acceptsFirstResponder:NO,contentView:SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},childViews:"listView spinnerView".w(),listView:b.extend({classNames:"scui-combobox-list-scroll-view",layout:{left:0,right:0,top:0,bottom:c?a:0},hasHorizontalScroller:NO,contentView:SC.ListView.design({classNames:"scui-combobox-list-view",layout:{left:0,right:0,top:0,bottom:0},allowsMultipleSelection:NO,target:this,action:"_selectListItem",contentBinding:SC.Binding.from("filteredObjects",this).oneWay(),contentValueKey:this.get("nameKey"),hasContentIcon:this.get("iconKey")?YES:NO,contentIconKey:this.get("iconKey"),selectionBinding:SC.Binding.from("_listSelection",this),localizeBinding:SC.Binding.from("localize",this).oneWay(),exampleView:SCUI.LocalizableListItemView,mouseUp:function(){var e=arguments.callee.base.apply(this,arguments);
var g=this.get("target");var f=this.get("action");if(g&&f&&g.invokeLater){g.invokeLater(f)
}return e}})}),spinnerView:SC.View.extend({classNames:"scui-combobox-spinner-view",layout:{centerX:0,bottom:0,width:100,height:a},isVisibleBinding:SC.Binding.from("isBusy",this).oneWay(),childViews:"imageView messageView".w(),imageView:SCUI.LoadingSpinnerView.extend({layout:{left:0,top:0,bottom:0,width:18},theme:"darkTrans",callCountBinding:SC.Binding.from("isBusy",this).oneWay().transform(function(e){e=e?1:0;
return e})}),messageView:SC.LabelView.extend({layout:{left:25,top:0,bottom:0,right:0},valueBinding:SC.Binding.from("status",this).oneWay().transform(function(e){e=(e===SC.Record.BUSY_LOADING)?"Loading...".loc():"Refreshing...".loc();
return e})})})}),mouseDown:function(e){arguments.callee.base.apply(this,arguments);
return NO}});this._listView=this._listPane.getPath("contentView.listView.contentView");
this._listScrollView=this._listPane.getPath("contentView.listView")},_updateListPaneLayout:function(){var a,g,c,j,f,i,h,b,e;
if(this._listView&&this._listPane&&this._listScrollView){f=this.get("frame");c=f?f.width:200;
e=this.get("isBusy");b=this.get("statusIndicatorHeight");a=this._listView.get("rowHeight")||18;
g=this.getPath("filteredObjects.length")||(e?0:1);j=(a*g)+(e?b:0);j=Math.min(j,this.get("maxListHeight"));
j=Math.max(j,this.get("minListHeight"));this._listScrollView.adjust({bottom:e?b:0});
this._listPane.adjust({width:c,height:j});this._listPane.updateLayout();this._listPane.positionPane()
}},_selectListItem:function(){var a=this._listView?this._listView.getPath("selection.firstObject"):null;
if(a){this.set("selectedObject",a)}this.hideList()},_sanitizeFilter:function(a){return a?a.replace(this._sanitizeRegEx,"\\$1"):a
},_getObjectName:function(e,b,c){var a=e?(b?(e.get?e.get(b):e[b]):e):null;if(c&&a&&a.loc){a=a.loc()
}return a},_getObjectValue:function(b,a){return b?(a?(b.get?b.get(a):b[a]):b):null
},_listPane:null,_listScrollView:null,_listView:null,_listSelection:null,_keyDown:NO,_shouldUpdateFilter:NO,_sanitizeRegEx:new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g")});
sc_require("core");sc_require("panes/context_menu_pane");SCUI.ContentEditableView=SC.WebView.extend(SC.Editable,{value:"",valueBindingDefault:SC.Binding.single(),allowScrolling:YES,isOpaque:YES,selection:"",selectedImage:null,selectedHyperlink:null,attachedView:null,offsetWidth:null,offsetHeight:null,hasFixedDimensions:YES,inlineStyle:{},autoCommit:NO,cleanInsertedText:YES,encodeNewLine:NO,styleSheetCSS:"",rightClickMenuOptionsWithoutSelection:[],rightClickMenuOptionsWithSelection:[],rightClickMenuOptions:function(){var b=[];
var c=this.get("rightClickMenuOptionsWithoutSelection"),a=this.get("rightClickMenuOptionsWithSelection");
if(this.get("selection")&&this.get("selection").length>0){a.forEach(function(e){b.pushObject(e)
})}c.forEach(function(e){b.pushObject(e)});return b}.property("rightClickMenuOptionsWithoutSelection","rightClickMenuOptionsWithSelection","selection").cacheable(),encodeContent:YES,indentOnTab:YES,tabSize:2,insertTarget:null,isFocused:NO,selectionSaved:NO,displayProperties:["value"],render:function(e,i){var h=this.get("value");
var c=!this.get("isOpaque");var f=this.get("allowScrolling")?"yes":"no";var g=c?"0":"1";
var a="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0p;";
if(i){e.push('<iframe frameBorder="',g,'" name="',this.get("frameName"));e.push('" scrolling="',f);
e.push('" src="" allowTransparency="',c,'" style="',a,'"></iframe>')}else{if(this._document){var b=this._document.body.innerHTML;
if(this.get("encodeContent")){b=this._encodeValues(b)}if(this.get("encodeNewLine")){b=b.replace(/\r/g,"&#13;");
b=b.replace(/\n/g,"&#10;")}if(h!==b){this._document.body.innerHTML=h}}}},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);
var a=this.$("iframe");SC.Event.add(a,"load",this,this.editorSetup)},displayDidChange:function(){var a=this._document;
if(a){a.body.contentEditable=this.get("isEnabled")}arguments.callee.base.apply(this,arguments)
},willDestroyLayer:function(){var b=this._document;var a=b.body;if(this.get("indentOnTab")){SC.Event.remove(a,"keydown",this,this.keyDown)
}SC.Event.remove(a,"focus",this,this.bodyDidFocus);SC.Event.remove(a,"blur",this,this.bodyDidBlur);
SC.Event.remove(a,"mouseup",this,this.mouseUp);SC.Event.remove(a,"keyup",this,this.keyUp);
SC.Event.remove(a,"paste",this,this.paste);SC.Event.remove(a,"dblclick",this,this.doubleClick);
SC.Event.remove(b,"click",this,this.focus);SC.Event.remove(this.$("iframe"),"load",this,this.editorSetup);
SC.Event.remove(b,"mouseup",this,this.docMouseUp);SC.Event.remove(b,"contextmenu",this,this.contextmenu);
arguments.callee.base.apply(this,arguments)},editorSetup:function(){this._iframe=this._getFrame();
this._document=this._getDocument();if(SC.none(this._document)){console.error("Curse your sudden but inevitable betrayal! Can't find a reference to the document object!");
return}var h=this._document;var e=this.get("styleSheetCSS");if(!(SC.none(e)||e==="")){var g=h.getElementsByTagName("head")[0];
if(g){var c=h.createElement("style");c.type="text/css";g.appendChild(c);if(SC.browser.msie){c.styleSheet.cssText=e
}else{c.innerHTML=e}c=g=null}}var i=this.get("value");var f=h.body;f.contentEditable=true;
if(!SC.browser.msie){h.execCommand("styleWithCSS",false,false)}if(!this.get("isOpaque")){f.style.background="transparent";
this.$().setClass("sc-web-view",NO)}var b=this.get("inlineStyle");var l=this._document.body.style;
for(var j in b){if(b.hasOwnProperty(j)){l[j.toString().camelize()]=b[j]}}if(SC.browser.msie||SC.browser.safari){f.innerHTML=i
}else{this.insertHTML(i,NO)}if(!this.get("hasFixedDimensions")){var k=this.get("layout").height;
if(k){this._minHeight=k}var a=this.get("layout").width;if(a){this._minWidth=a}}SC.Event.add(f,"focus",this,this.bodyDidFocus);
SC.Event.add(f,"blur",this,this.bodyDidBlur);SC.Event.add(f,"mouseup",this,this.mouseUp);
SC.Event.add(f,"keyup",this,this.keyUp);SC.Event.add(f,"paste",this,this.paste);SC.Event.add(f,"dblclick",this,this.doubleClick);
if(this.get("indentOnTab")){SC.Event.add(f,"keydown",this,this.keyDown)}SC.Event.add(h,"click",this,this.focus);
SC.Event.add(h,"mouseup",this,this.docMouseUp);SC.Event.add(h,"contextmenu",this,this.contextmenu);
this.iframeDidLoad();this.focus()},bodyDidFocus:function(a){this.set("isFocused",YES)
},bodyDidBlur:function(a){this.set("isFocused",NO)},contextmenu:function(a){var c=this.get("rightClickMenuOptions");
var b=c.get("length");if(c.length>0){var e=this.contextMenuView.create({defaultResponder:this.get("rightClickMenuDefaultResponder"),layout:{width:200},itemTitleKey:"title",itemTargetKey:"target",itemActionKey:"action",itemSeparatorKey:"isSeparator",itemIsEnabledKey:"isEnabled",items:c});
e.popup(this,a);if(a.preventDefault){a.preventDefault()}else{a.stop()}a.returnValue=false;
a.stopPropagation();return NO}},docMouseUp:function(a){var b=this;this.invokeLast(function(){var c=b.get("selectedImage");
if(c){c.style.width=c.width+"px";c.style.height=c.height+"px";b.set("isEditing",YES)
}})},doubleClick:function(a){SC.RunLoop.begin();SC.RunLoop.end()},contextMenuView:SCUI.ContextMenuPane.extend({popup:function(e,a){if((!e||!e.isView)&&!this.get("usingStaticLayout")){return NO
}var b=e.isView?e.get("layer"):e;document.oncontextmenu=function(h){var g=e.get("rightClickMenuOptions");
var f=g.get("length");if(g.length>0){if(a.preventDefault){a.preventDefault()}else{a.stop()
}a.returnValue=false;a.stopPropagation();return false}};this.beginPropertyChanges();
var c=this.get("displayItems");this.set("anchorElement",b);this.set("anchor",e);this.set("preferType",SC.PICKER_MENU);
this.endPropertyChanges();return arguments.callee.base.base.apply(this,[e,[a.pageX+5,a.pageY+5,1]])
},exampleView:SC.MenuItemView.extend({renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)
}b.push("<span class='value ellipsis' unselectable='on'>"+a+"</span>")}})}),keyUp:function(a){SC.RunLoop.begin();
switch(SC.FUNCTION_KEYS[a.keyCode]){case"left":case"right":case"up":case"down":case"return":this.querySelection();
break}if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)}this.set("isEditing",YES);
SC.RunLoop.end()},keyDown:function(f){SC.RunLoop.begin();var g=this.get("tabSize");
if(SC.typeOf(g)!==SC.T_NUMBER){return}var b=[];for(var e=0;e<g;e++){b.push("\u00a0")
}if(SC.FUNCTION_KEYS[f.keyCode]==="tab"){f.preventDefault();this.insertHTML(b.join(""),NO)
}if(SC.browser.msie){var c=this._getSelectedElement();if(SC.FUNCTION_KEYS[f.keyCode]==="return"&&c.nodeName!=="LI"){var a=this._iframe.document.selection.createRange();
a.pasteHTML("<br>");a.collapse(false);a.select();f.preventDefault()}}SC.RunLoop.end()
},mouseUp:function(){this._mouseUp=true;SC.RunLoop.begin();if(this.get("insertInProgress")){this.set("insertInProgress",NO);
this.get("insertTarget").sendAction("insert")}this.querySelection();if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)
}this.set("isEditing",YES);SC.RunLoop.end()},paste:function(){SC.RunLoop.begin();
this.querySelection();if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)
}this.set("isEditing",YES);SC.RunLoop.end();return YES},frameName:function(){return this.get("layerId")+"_frame"
}.property("layerId").cacheable(),editorHTML:function(a,b){var c=this._document;if(!c){return NO
}if(b!==undefined){c.body.innerHTML=b;return YES}else{if(this.get("cleanInsertedText")){return this.cleanWordHTML(c.body.innerHTML)
}else{return c.body.innerHTML}}}.property(),selectionIsBold:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("bold",false,c)){this.set("isEditing",YES)
}}return this._document.queryCommandState("bold")}.property("selection").cacheable(),selectionIsItalicized:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("italic",false,c)){this.set("isEditing",YES)
}}return b.queryCommandState("italic")}.property("selection").cacheable(),selectionIsUnderlined:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("underline",false,c)){this.set("isEditing",YES)
}}return b.queryCommandState("underline")}.property("selection").cacheable(),selectionIsCenterJustified:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(SC.browser.msie){this._alignTextForIE("center")
}else{b.execCommand("justifycenter",false,c)}this.querySelection();this.set("isEditing",YES)
}return b.queryCommandState("justifycenter")}.property("selection").cacheable(),selectionIsRightJustified:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(SC.browser.msie){this._alignTextForIE("right")
}else{b.execCommand("justifyright",false,c)}this.querySelection();this.set("isEditing",YES)
}return b.queryCommandState("justifyright")}.property("selection").cacheable(),selectionIsLeftJustified:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(SC.browser.msie){this._alignTextForIE("left")
}else{b.execCommand("justifyleft",false,c)}this.querySelection();this.set("isEditing",YES)
}return b.queryCommandState("justifyleft")}.property("selection").cacheable(),selectionIsFullJustified:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(SC.browser.msie){this._alignTextForIE("justify")
}else{b.execCommand("justifyfull",false,c)}this.querySelection();this.set("isEditing",YES)
}return b.queryCommandState("justifyfull")}.property("selection").cacheable(),_alignTextForIE:function(g){var e=this._document;
var c=this._getSelectedElement();var a=e.selection.createRange();var b,f;if(c.nodeName!=="DIV"){b=a.htmlText;
f='<div align="%@" style="text-align: %@">%@</div>'.fmt(g,g,b);a.pasteHTML(f)}else{if(c.innerText!==a.text){b=a.htmlText;
f='<div align="%@" style="text-align: %@">%@</div>'.fmt(g,g,b);a.pasteHTML(f)}else{c.style.textAlign=g;
c.align=g}}},selectionIsOrderedList:function(a,c){var b=this._document;if(!b){return NO
}if(c!==undefined){if(SC.browser.msie&&c===YES){this._createListForIE("ol")}else{if(b.execCommand("insertorderedlist",false,c)){this.querySelection()
}}this.set("isEditing",YES)}return b.queryCommandState("insertorderedlist")}.property("selection").cacheable(),selectionIsUnorderedList:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(SC.browser.msie&&c===YES){this._createListForIE("ul")
}else{if(b.execCommand("insertunorderedlist",false,c)){this.querySelection()}}this.set("isEditing",YES)
}return b.queryCommandState("insertunorderedlist")}.property("selection").cacheable(),_createListForIE:function(a){var f="";
var b=this._iframe.document.selection.createRange();var g=b.text;var c=g.split("\n");
if(c.length>1){for(var e=0;e<c.length;e++){f+="<li>%@</li>".fmt(c[e])}}else{f="<li>%@<li>".fmt(g)
}b.pasteHTML("<%@>%@<%@>".fmt(a,f,a))},selectionIsIndented:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("indent",false,c)){this.set("isEditing",YES)
}}if(SC.browser.msie){return b.queryCommandState("indent")}else{return NO}}.property("selection").cacheable(),selectionIsOutdented:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("outdent",false,c)){this.set("isEditing",YES)
}}if(SC.browser.msie){return b.queryCommandState("outdent")}else{return NO}}.property("selection").cacheable(),selectionIsSubscript:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("subscript",false,c)){this.set("isEditing",YES)
}}return b.queryCommandState("subscript")}.property("selection").cacheable(),selectionIsSuperscript:function(a,c){var b=this._document;
if(!b){return NO}if(c!==undefined){if(b.execCommand("superscript",false,c)){this.set("isEditing",YES)
}}return b.queryCommandState("superscript")}.property("selection").cacheable(),selectionFontName:function(l,a){var k=this._document;
if(!k){return""}var f;if(a!==undefined){var g="%@%@".fmt(this.get("layerId"),"-ce-font-temp");
if(k.execCommand("fontname",false,g)){var m=k.getElementsByTagName("font");for(var c=0,b=m.length;
c<b;c++){var e=m[c];if(e.face===g){e.face="";e.style.fontFamily=a}}this.set("isEditing",YES)
}}else{var h=this._findFontTag(this._getSelectedElement());if(h&&h.nodeName.toLowerCase()==="font"){f=h.style.fontFamily
}else{f=null}return f}}.property("selection").cacheable(),selectionFontSize:function(m,l){var a=this._iframe;
var k=this._document;if(!k){return""}var f;if(l!==undefined){var g="%@%@".fmt(this.get("layerId"),"-ce-size-temp");
if(k.execCommand("fontname",false,g)){var n=k.getElementsByTagName("font");for(var c=0,b=n.length;
c<b;c++){var e=n[c];if(e.face===g){e.face="";e.style.fontSize=l}}this.set("isEditing",YES);
return l}}else{var h=this._findFontTag(this._getSelectedElement());if(h&&h.nodeName.toLowerCase()==="font"){f=h.style.fontSize
}else{f=null}return f}}.property("selection").cacheable(),_findFontTag:function(a){while(a.nodeName!=="BODY"){if(a.nodeName==="FONT"){return a
}else{a=a.parentNode}}},selectionFontColor:function(a,b){var c=this._document;if(!c){return""
}if(b!==undefined){if(this.get("selectionSaved")===YES){this.restoreSelection()}if(c.execCommand("forecolor",false,b)){this.saveSelection();
this.set("isEditing",YES);this._last_font_color_cache=b}}if(this._last_font_color_cache){return this._last_font_color_cache
}else{this._last_font_color_cache=SC.parseColor(c.queryCommandValue("forecolor"))||"";
return this._last_font_color_cache}}.property("selection").cacheable(),selectionBackgroundColor:function(b,c){var e=this._document;
if(!e){return""}var f;if(SC.browser.msie){f="backcolor"}else{f="hilitecolor"}if(!SC.browser.msie){e.execCommand("styleWithCSS",false,true)
}if(c!==undefined){if(this.get("selectionSaved")===YES){this.restoreSelection()}if(e.execCommand(f,false,c)){this.saveSelection();
this.set("isEditing",YES);this._last_background_color_cache=c}}if(this._last_background_color_cache){return this._last_background_color_cache
}else{var a=e.queryCommandValue(f);if(!SC.browser.msie){e.execCommand("styleWithCSS",false,false)
}if(a!=="transparent"){if(SC.parseColor(a)){this._last_background_color_cache=SC.parseColor(a);
return this._last_background_color_cache}}}return""}.property("selection").cacheable(),hyperlinkValue:function(a,b){var c=this.get("selectedHyperlink");
if(!c){return""}if(!SC.none(b)){c.href=b;this.set("isEditing",YES);return b}else{return c.href
}}.property("selectedHyperlink").cacheable(),hyperlinkHoverValue:function(a,b){var c=this.get("selectedHyperlink");
if(!c){return""}if(b!==undefined){c.title=b;this.set("isEditing",YES);return b}else{return c.title
}}.property("selectedHyperlink").cacheable(),imageAlignment:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){c.align=b;this.set("isEditing",YES);return b}else{return c.align
}}.property("selectedImage").cacheable(),imageWidth:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.width=b;c.style.width=b;
return b}else{return c.clientWidth}}.property("selectedImage").cacheable(),imageHeight:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.height=b;c.style.height=b;
return b}else{return c.clientHeight}}.property("selectedImage").cacheable(),imageDescription:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.title=b;c.alt=b;return b
}else{return c.alt}}.property("selectedImage").cacheable(),imageBorderWidth:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.style.borderWidth=b;
return b}else{return c.style.borderWidth}}.property("selectedImage").cacheable(),imageBorderColor:function(b,c){var e=this.get("selectedImage");
if(!e){return""}if(c!==undefined){this.set("isEditing",YES);e.style.borderColor=c;
return c}else{var a=e.style.borderColor;if(a!==""){return SC.parseColor(a)}else{return""
}}}.property("selectedImage").cacheable(),imageBorderStyle:function(a,b){var c=this.get("selectedImage");
if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.style.borderStyle=b;
return b}else{return c.style.borderStyle}}.property("selectedImage").cacheable(),resetImageDimensions:function(){var a=this.get("selectedImage");
if(!a){return NO}a.style.width="";a.style.height="";a.removeAttribute("width");a.removeAttribute("height");
this.set("isEditing",YES);this.notifyPropertyChange("selectedImage");return a},focus:function(){if(!SC.none(this._document)){this._document.body.focus();
this.set("selection","");this.querySelection()}},querySelection:function(){var c=this._iframe;
if(!c){return}var a="";if(SC.browser.msie){a=this._iframe.document.selection.createRange().text;
if(SC.none(a)){a=""}}else{var b=c.contentWindow;a=b.getSelection()}this._resetColorCache();
this.propertyWillChange("selection");this.set("selection",a.toString());this.propertyDidChange("selection")
},createLink:function(h){var g=this._document;var b=this._iframe;if(!(g&&b)){return NO
}if(SC.none(h)||h===""){return NO}var e="%@%@%@%@%@".fmt("http://",this.get("frameName"),new Date().getTime(),parseInt(Math.random()*100000,0),".com/");
if(g.execCommand("createlink",false,e)){var j=g.getElementsByTagName("A"),i,a;for(var f=0,c=j.length;
f<c;f++){a=j[f];if(a.href===e){i=a;break}}}if(i){i.href=h;this.set("selectedHyperlink",i);
this.set("isEditing",YES);return YES}else{return NO}},removeLink:function(){var a=this._document;
if(!a){return NO}if(a.execCommand("unlink",false,null)){this.set("selectedHyperlink",null);
this.set("isEditing",YES);return YES}return NO},insertImage:function(a){var b=this._document;
if(!b){return NO}if(SC.none(a)||a===""){return NO}if(b.execCommand("insertimage",false,a)){this.set("isEditing",YES);
return YES}return NO},insertHTML:function(b,a){var c=this._document;if(!c){return NO
}if(SC.none(b)||b===""){return NO}if(SC.none(a)||a){b+="\u00a0"}if(SC.browser.msie){if(!this.get("isFocused")){this.focus()
}c.selection.createRange().pasteHTML(b);this.set("isEditing",YES);return YES}else{if(c.execCommand("inserthtml",false,b)){this.set("isEditing",YES);
return YES}return NO}},insertView:function(a){if(SC.typeOf(a)===SC.T_STRING){if(a===SC.CONTENT_SET_DIRECTLY){return
}if(a&&a.length>0){if(a.indexOf(".")>0){a=SC.objectForPropertyPath(a,null)}else{a=SC.objectForPropertyPath(a,this.get("page"))
}}}else{if(SC.typeOf(a)===SC.T_CLASS){a=a.create()}}var c=SC.RenderContext(a);c=c.begin("span");
a.prepareContext(c,YES);c=c.end();c=c.join();var b;if(SC.browser.msie){b='<span contenteditable=false unselectable="on">'+c+"</span>"
}else{b='<span contenteditable=false style="-moz-user-select: all">'+c+"</span>"}this.insertHTML(b)
},cleanWordHTML:function(a){a=a.replace(/\<o:p>\s*<\/o:p>/g,"");a=a.replace(/\<o:p>[\s\S]*?<\/o:p>/g,"&nbsp;");
a=a.replace(/\s*<w:[^>]*>[\s\S]*?<\/w:[^>]*>/gi,"");a=a.replace(/\s*<w:[^>]*\/?>/gi,"");
a=a.replace(/\s*<\/w:[^>]+>/gi,"");a=a.replace(/\s*<m:[^>]*>[\s\S]*?<\/m:[^>]*>/gi,"");
a=a.replace(/\s*<m:[^>]*\/?>/gi,"");a=a.replace(/\s*<\/m:[^>]+>/gi,"");a=a.replace(/\s*mso-[^:]+:[^;"]+;?/gi,"");
a=a.replace(/\s*mso-[^:]+:[^;]+"?/gi,"");a=a.replace(/\s*MARGIN: 0cm 0cm 0pt\s*;/gi,"");
a=a.replace(/\s*MARGIN: 0cm 0cm 0pt\s*"/gi,'"');a=a.replace(/\s*TEXT-INDENT: 0cm\s*;/gi,"");
a=a.replace(/\s*TEXT-INDENT: 0cm\s*"/gi,'"');a=a.replace(/\s*PAGE-BREAK-BEFORE: [^\s;]+;?"/gi,'"');
a=a.replace(/\s*FONT-VARIANT: [^\s;]+;?"/gi,'"');a=a.replace(/\s*tab-stops:[^;"]*;?/gi,"");
a=a.replace(/\s*tab-stops:[^"]*/gi,"");a=a.replace(/\<\\?\?xml[^>]*>/gi,"");a=a.replace(/\<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3");
a=a.replace(/\<(\w[^>]*) language=([^ |>]*)([^>]*)/gi,"<$1$3");a=a.replace(/\<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");
a=a.replace(/\<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");a=a.replace(/\<(meta|link)[^>]+>\s*/gi,"");
return a},commitEditing:function(){var b=this._document;if(!b){return NO}var a=b.body.innerHTML;
if(this.get("cleanInsertedText")){a=this.cleanWordHTML(a)}if(this.get("encodeNewLine")){a=a.replace(/\r/g,"&#13;");
a=a.replace(/\n/g,"&#10;")}if(this.get("encodeContent")){a=this._encodeValues(a)}this.set("value",a);
this.set("isEditing",NO);return YES},selectContent:function(){var a=this._document;
if(!a){return NO}return a.execCommand("selectall",false,null)},selectionDidChange:function(){var e,a,c=null,f=null;
if(SC.browser.msie){var b=this._iframe.document.selection;a=b.createRange();if(a.length===1){e=a.item()
}if(a.parentElement){e=a.parentElement()}}else{var g=this._iframe.contentWindow;b=g.getSelection();
a=b.getRangeAt(0);e=a.startContainer.childNodes[a.startOffset];if(a.startContainer===a.endContainer){if(a.startContainer.parentNode.nodeName==="A"&&a.commonAncestorContiner!==e){f=a.startContainer.parentNode
}else{f=null}}else{f=null}}if(e){if(e.nodeName==="IMG"){c=e;if(e.parentNode.nodeName==="A"){f=e.parentNode
}}else{if(e.nodeName==="A"){f=e}else{c=null;f=null}}}this.set("selectedImage",c);
this.set("selectedHyperlink",f)}.observes("selection"),isEditingDidChange:function(){if(this.get("autoCommit")){this.commitEditing()
}}.observes("isEditing"),_updateAttachedViewLayout:function(){var c=this.get("offsetWidth");
var a=this.get("offsetHeight");var b=this.get("attachedView");var e=b.get("layout");
e=SC.merge(e,{width:c,height:a});b.adjust(e)},_updateLayout:function(){var e=this._document;
if(!e){return}var b,a;if(SC.browser.msie){b=e.body.scrollWidth;a=e.body.scrollHeight
}else{b=e.body.offsetWidth;a=e.body.offsetHeight}if(a<this._minHeight){a=this._minHeight
}if(b<this._minWidth){b=this._minWidth}this.set("offsetWidth",b);this.set("offsetHeight",a);
if(this.get("attachedView")){this._updateAttachedViewLayout()}if(!this.get("hasFixedDimensions")){var c=this.get("layout");
c=SC.merge(c,{width:b,height:a});this.propertyWillChange("layout");this.adjust(c);
this.propertyDidChange("layout")}},_getFrame:function(){var a;if(SC.browser.msie){a=document.frames(this.get("frameName"))
}else{a=this.$("iframe").firstObject()}if(!SC.none(a)){return a}return null},_getDocument:function(){var b=this._getFrame();
if(SC.none(b)){return null}var a;if(SC.browser.msie){a=b.document}else{a=b.contentDocument
}if(SC.none(a)){return null}return a},_getSelection:function(){var a;if(SC.browser.msie){a=this._getDocument().selection
}else{a=this._getFrame().contentWindow.getSelection()}return a},_encodeValues:function(e){var g=e.match(/href=".*?"/gi);
if(g){var a,f;for(var c=0,b=g.length;c<b;c++){a=f=g[c];e=e.replace(/\%3C/gi,"<");
e=e.replace(/\%3E/gi,">");e=e.replace(/\%20/g," ");e=e.replace(/\&amp;/gi,"&");e=e.replace(/\%27/g,"'");
e=e.replace(a,f)}}return e},_getSelectedElement:function(){var b=this._getSelection(),a,e;
var c=this._document;if(SC.browser.msie){a=c.selection.createRange();if(a){e=a.item?a.item(0):a.parentElement()
}}else{if(b.rangeCount>0){a=b.getRangeAt(0)}if(a){if(b.anchorNode&&(b.anchorNode.nodeType===3)){if(b.anchorNode.parentNode){e=b.anchorNode.parentNode
}if(b.anchorNode.nextSibling!==b.focusNode.nextSibling){e=b.anchorNode.nextSibling
}}if(!e){e=a.commonAncestorContainer;if(!a.collapsed){if(a.startContainer===a.endContainer){if(a.startOffset-a.endOffset<2){if(a.startContainer.hasChildNodes()){e=a.startContainer.childNodes[a.startOffset]
}}}}}}}return e},_resetColorCache:function(){this._last_font_color_cache=null;this._last_background_color_cache=null;
this.set("selectionSaved",NO)},saveSelection:function(){this.set("selectionSaved",YES);
if(SC.browser.msie){var e=this._getFrame().window;var c=e.document;var b=e.getSelection?e.getSelection():c.selection;
var a;if(b){if(b.createRange){a=b.createRange()}else{if(b.getRangeAt){a=b.getRangeAt(0)
}else{if(b.anchorNode&&b.focusNode&&c.createRange){a=c.createRange();a.setStart(b.anchorNode,b.anchorOffset);
a.setEnd(b.focusNode,b.focusOffset);if(a.collapsed!==b.isCollapsed){a.setStart(b.focusNode,b.focusOffset);
a.setEnd(b.anchorNode,b.anchorOffset)}}}}}this._range=a}},restoreSelection:function(){this.set("selectionSaved",NO);
if(SC.browser.msie){var e=this._getFrame().window;var c=e.document;var b=e.getSelection?e.getSelection():c.selection;
var a=this._range;if(b&&a){if(a.select){a.select()}else{if(b.removeAllRanges&&b.addRange){b.removeAllRanges();
b.addRange(a)}}}}}});require("core");SCUI.DisclosedView=SC.View.extend({classNames:["scui-disclosed-view"],displayProperties:["isOpen","statusIconName"],contentView:null,title:"",description:"",iconCSSName:"",statusIconName:"",_contentView:null,_collapsedView:SC.View,isOpen:YES,titleBar:SC.DisclosureView,containerView:SC.ContainerView,collapsedHeight:44,expandedHeight:300,mode:SCUI.DISCLOSED_STAND_ALONE,init:function(){arguments.callee.base.apply(this,arguments)
},createChildViews:function(){var b=[],a;var f=this.get("contentView");var c;var e=this;
a=this._titleBar=this.createChildView(this.titleBar.extend({layout:{top:0,left:5,right:5,height:e.get("collapsedHeight")},titleBinding:SC.binding(".title",this),descriptionBinding:SC.binding(".description",this),iconCSSNameBinding:SC.binding(".iconCSSName",this),statusIconNameBinding:SC.binding(".statusIconName",this),value:this.get("isOpen"),displayProperties:"statusIconName".w(),render:function(g,h){g=g.begin("div").addClass("disclosure-inner");
g=g.begin("div").addClass("disclosure-label");g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("button").end();
g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("icon").addClass(this.iconCSSName).end();
g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("status").addClass(this.statusIconName).end();
g=g.begin("span").addClass("title").push(this.get("displayTitle")).end();g.attr("title",this.description);
g.attr("alt",this.description);g=g.end();g=g.end()},mouseDown:function(g){if(g.target.className!=="button"){return NO
}else{return YES}},_valueObserver:function(){if(this.owner&&this.owner.toggle){this.owner.toggle(this.get("value"))
}}.observes("value")}),{rootElementPath:[0]});b.push(a);f=this.createChildView(f,{classNames:"processing-step-settings".w(),layout:{top:e.get("collapsedHeight")-5,left:5,right:5},render:function(g,h){arguments.callee.base.apply(this,arguments);
if(h){g=g.begin("div").addClass("bottom-left-edge").push("").end();g=g.begin("div").addClass("bottom-right-edge").push("").end()
}}});b.push(f);this.set("childViews",b);return this},render:function(a,b){this._setupView();
arguments.callee.base.apply(this,arguments)},toggle:function(a){if(!a){this.set("isOpen",NO);
if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight(YES)}else{if(this.owner&&this.owner.collapse){this.owner.collapse()
}}}else{this.set("isOpen",YES);if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight()
}else{if(this.owner&&this.owner.expand){this.owner.expand()}}}},updateHeight:function(a,b){if(a){this._updateHeight(b)
}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(b){var a;
if(!b){a=this.get("expandedHeight")}else{a=this.get("collapsedHeight")}this.adjust("height",a)
},_createChildViewIfNeeded:function(a){if(SC.typeOf(a)===SC.T_CLASS){return this.createChildView(a)
}else{return a}},_setupView:function(){var a=this.get("isOpen");var b=this.get("mode");
if(a){if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this.updateHeight()}}else{if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight(YES)
}}}});SCUI.LoadingSpinnerView=SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},totalFrames:28,frameChangeInterval:200,callCount:0,appendTo:function(a){if(this.get("callCount")===0){a.appendChild(this)
}this.set("isVisible",true);this.invokeLater(function(){this.set("callCount",this.get("callCount")+1)
});return this},remove:function(){this.set("callCount",this.get("callCount")-1);if(this.get("callCount")<=0){this.set("_state",SCUI.LoadingSpinnerView.STOPPED);
this.get("parentView").removeChild(this);this.destroy()}},callCountDidChange:function(){if(this.get("parentView")!==null){if(this.get("_state")===SCUI.LoadingSpinnerView.STOPPED&&this.get("callCount")>0){this.set("isVisible",true);
this.set("_state",SCUI.LoadingSpinnerView.PLAYING);this.get("spinnerView").nextFrame()
}}if(this.get("callCount")<=0){this.set("isVisible",false);this.set("_state",SCUI.LoadingSpinnerView.STOPPED)
}}.observes("callCount"),theme:"lightTrans",childViews:"spinnerView".w(),spinnerView:SC.View.design({layout:{centerX:0,centerY:0,height:18,width:18},classNames:["loadingSpinner"],currentFrame:0,frameChangeInterval:200,_state:null,init:function(){arguments.callee.base.apply(this,arguments);
this.get("classNames").push(this.getPath("parentView.theme"));this.set("frameChangeInterval",this.getPath("parentView.frameChangeInterval"));
this.set("_state",this.getPath("parentView._state"))},nextFrame:function(){var a=this.get("currentFrame");
var b=0-this.get("layout").height*a;this.$().css("background-position","0px %@1px".fmt(b));
if(this.get("currentState")===SCUI.LoadingSpinnerView.PLAYING){this.invokeLater(function(){this.nextFrame()
},this.get("frameChangeInterval"))}a+=1;if(a===this.getPath("parentView.totalFrames")){a=0
}this.set("currentFrame",a)},currentState:function(){return this.getPath("parentView._state")
}.property()}),_state:"STOPPED"});SC.mixin(SCUI.LoadingSpinnerView,{PLAYING:"PLAYING",STOPPED:"STOPPED"});
SCUI.SelectFieldView=SC.SelectFieldView.extend({multiple:NO,render:function(c,a){if(this.get("cpDidChange")){this.set("cpDidChange",NO);
var g=this.get("nameKey");var l=this.get("valueKey");var j=this.get("objects");var b=this.get("value");
var e,h;var k=this.get("multiple");var i=this.get("localize");if(k){c.attr("multiple",NO)
}if(!l&&b){b=(b.get&&b.get("primaryKey")&&b.get(b.get("primaryKey")))?b.get(b.get("primaryKey")):SC.guidFor(b)
}if((b===null)||(b==="")){b="***"}if(j){j=this.sortObjects(j);if(!a){h=this.$input()[0];
h.innerHTML=""}var f=this.get("emptyName");if(f){if(i){f=f.loc()}if(a){c.push('<option value="***">'+f+'</option><option disabled="disabled"></option>')
}else{e=document.createElement("option");e.value="***";e.innerHTML=f;h.appendChild(e);
e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}j.forEach(function(o){if(o){var n=g?(o.get?o.get(g):o[g]):o.toString();
if(i){n=n.loc()}var p=(l)?(o.get?o.get(l):o[l]):o;if(p){p=SC.guidFor(p)?SC.guidFor(p):p.toString()
}var m=(this.validateMenuItem&&this.validateMenuItem(p,n))?"":'disabled="disabled" ';
if(a){c.push("<option "+m+'value="'+p+'">'+n+"</option>")}else{e=document.createElement("option");
e.value=p;e.innerHTML=n;if(m.length>0){e.disable="disabled"}h.appendChild(e)}}else{if(a){c.push('<option disabled="disabled"></option>')
}else{e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}},this);
this.setFieldValue(b)}else{this.set("value",null)}}},getFieldValue:function(){var g=this.$input().val();
var l=this.get("valueKey");var h=this.get("objects");var k,b;var m=this.get("multiple");
if(m){k=[]}if(g==="***"){g=null}else{if(g&&h){var f=(SC.typeOf(h.length)===SC.T_FUNCTION)?h.length():h.length;
if(!m){k=null}while(--f>=0){b=h.objectAt?h.objectAt(f):h[f];if(l){b=(b.get)?b.get(l):b[l]
}var a;if(b&&b.get&&b.get("primaryKey")&&b.get(b.get("primaryKey"))){a=SC.guidFor(b.get(b.get("primaryKey")))
}else{if(b&&SC.guidFor(b)){a=SC.guidFor(b)}else{if(b){a=b.toString()}else{a=null}}}if(m){for(var e=0,c=g.length;
e<c;e++){if(g[e]===a){k.push(b)}}}else{if(g===a){k=b}}}}}return(l||k)?k:g},setFieldValue:function(f){if(this.get("multiple")){if(SC.none(f)){f=""
}else{if(SC.typeOf(f)==="string"){f=f.split("::")}var a;var e=[];for(var c=0,b=f.length;
c<b;c++){a=f[c];if(a&&a.get&&a.get("primaryKey")&&a.get(a.get("primaryKey"))){a=SC.guidFor(a.get(a.get("primaryKey")));
e.push(a)}else{if(a&&SC.guidFor(a)&&a!=="***"){a=SC.guidFor(a);e.push(a)}else{if(a){a=a.toString();
e.push(a)}else{a=null}}}}this.$input().val(e);return this}}else{if(SC.none(f)){f=""
}else{if(f&&f.get&&f.get("primaryKey")&&f.get(f.get("primaryKey"))){f=SC.guidFor(f.get(f.get("primaryKey")))
}else{if(f&&SC.guidFor(f)&&f!=="***"){f=SC.guidFor(f)}else{if(f){f=f.toString()}else{f=null
}}}}this.$input().val(f);return this}}});SCUI.SelectFieldTab=SC.View.extend({classNames:["scui-select-field-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");
this.get("containerView").set("nowShowing",a);this.get("selectFieldView").set("value",a);
return this}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("selectFieldView").set("items",this.get("items"));
return this}.observes("items"),_isEnabledDidChange:function(){var a=this.get("isEnabled");
if(this.containerView&&this.containerView.set){this.containerView.set("isEnabled",a)
}if(this.selectFieldView&&this.selectFieldView.set){this.selectFieldView.set("isEnabled",a)
}}.observes("isEnabled"),init:function(){arguments.callee.base.apply(this,arguments);
this._tab_nowShowingDidChange()._tab_itemsDidChange()},createChildViews:function(){var e=[],b,a;
var c=this.get("isEnabled");a=this.containerView.extend({layout:{top:24,left:0,right:0,bottom:0}});
b=this.containerView=this.createChildView(a,{isEnabled:c});e.push(b);b=this.selectFieldView=this.createChildView(this.selectFieldView,{isEnabled:c});
e.push(b);this.set("childViews",e);return this},containerView:SC.ContainerView,selectFieldView:SC.SelectFieldView.extend({layout:{left:4,right:0,height:24},items:function(a,b){if(b===undefined){return this.get("objects")
}else{return this.set("objects",b)}}.property("objects").cacheable(),itemTitleKey:function(a,b){if(b===undefined){return this.get("nameKey")
}else{return this.set("nameKey",b)}}.property("nameKey").cacheable(),itemValueKey:function(a,b){if(b===undefined){return this.get("valueKey")
}else{return this.set("valueKey",b)}}.property("valueKey").cacheable(),_scui_select_field_valueDidChange:function(){var a=this.get("parentView");
if(a){a.set("nowShowing",this.get("value"))}this.set("layerNeedsUpdate",YES);this.invokeOnce(this.updateLayerIfNeeded)
}.observes("value"),init:function(){var a=this.get("parentView");if(a){SC._TAB_ITEM_KEYS.forEach(function(b){this[SCUI._SELECT_TAB_TRANSLATOR[b]]=a.get(b)
},this)}return arguments.callee.base.apply(this,arguments)}})});SCUI._SELECT_TAB_TRANSLATOR={itemTitleKey:"nameKey",itemValueKey:"valueKey",items:"objects"};
SCUI.StepperView=SC.View.extend({layout:{top:0,left:0,width:19,height:27},value:0,increment:1,max:null,min:null,valueWraps:NO,createChildViews:function(){var f=[];
var e=this.get("value");var a=this.get("increment");var c=this;var b=this.createChildView(SC.ButtonView.design({classNames:["scui-stepper-view-top"],layout:{top:0,left:0,width:19,height:13},mouseUp:function(){arguments.callee.base.apply(this,arguments);
var j=c.get("value");j=j-0;var g=c.get("max");j=j+a;var i=c.get("valueWraps");if(g===null||j<=g){c.set("value",j)
}else{if(i){var h=c.get("min");if(h!==null){j=j-g-a;j=j+h;c.set("value",j)}}}}}));
f.push(b);b=this.createChildView(SC.ButtonView.design({classNames:["scui-stepper-view-bottom"],layout:{top:14,left:0,width:19,height:13},mouseUp:function(){arguments.callee.base.apply(this,arguments);
var j=c.get("value");j=j-0;var i=c.get("min");j=j-a;var h=c.get("valueWraps");if(i===null||j>=i){c.set("value",j)
}else{if(h){var g=c.get("max");if(g!==null){j=i-j-a;j=g-j;c.set("value",j)}}}}}));
f.push(b);this.set("childViews",f)}});SCUI.UploadView=SC.View.extend({value:null,uploadTarget:null,status:"",inputName:"Filedata",displayProperties:"uploadTarget".w(),render:function(c,i){var e=this.get("layerId")+"Frame";
var h=this.get("uploadTarget");var b=this.get("label");var a=this.get("inputName");
if(i){this._firstTime=YES;c.push('<form method="post" enctype="multipart/form-data" target="'+e+'" action="'+h+'">');
c.push('<input type="file" name="'+a+'" />');c.push("</form>");c.push('<iframe frameborder="0" id="'+e+'" name="'+e+'" style="width:0; height:0;"></iframe>')
}else{var g=this._getForm();if(g){g.action=h}}arguments.callee.base.apply(this,arguments)
},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);var b=this.$("iframe");
var a=this.$("input");SC.Event.add(b,"load",this,this._uploadDone);SC.Event.add(a,"change",this,this._checkInputValue);
this.set("status",SCUI.READY)},willDestroyLayer:function(){var b=this.$("iframe");
var a=this.$("input");SC.Event.remove(b,"load",this,this._uploadDone);SC.Event.remove(a,"change",this,this._checkInputValue);
arguments.callee.base.apply(this,arguments)},startUpload:function(){var a=this._getForm();
if(a){a.submit();this.set("status",SCUI.BUSY)}},clearFileUpload:function(){var b=this._getForm();
if(b){var a=this.$("input");SC.Event.remove(a,"change",this,this._checkInputValue);
b.innerHTML=b.innerHTML;this.set("status",SCUI.READY);this.set("value",null);a=this.$("input");
SC.Event.add(a,"change",this,this._checkInputValue)}},validateFileSelection:function(){var a=this.get("value");
if(a){return YES}return NO},_uploadDone:function(){if(SC.browser.msie){if(!this._firstTime){SC.RunLoop.begin();
this.set("status",SCUI.DONE);SC.RunLoop.end()}this._firstTime=NO}else{SC.RunLoop.begin();
this.set("status",SCUI.DONE);SC.RunLoop.end()}},_checkInputValue:function(){SC.RunLoop.begin();
var a=this._getInput();this.set("value",a.value);SC.RunLoop.end()},_getForm:function(){var a=this.$("form");
if(a&&a.length>0){return a.get(0)}return null},_getInput:function(){var a=this.$("input");
if(a&&a.length>0){return a.get(0)}return null}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/foundation")
}SCUI.PAST="past";SCUI.PRESENT="present";SCUI.TODAY="today";SCUI.FUTURE="future";
sc_require("core");SCUI.DateView=SC.View.extend(SCUI.SimpleButton,{classNames:["scui-date"],date:null,calendarView:null,timing:SCUI.PRESENT,content:null,isSelected:NO,init:function(){this.set("target",this);
this.set("action","_selectedDate");arguments.callee.base.apply(this,arguments)},displayProperties:["date","isSelected","timing"],render:function(c,f){var b=this.get("date")||SC.DateTime.create();
var e=this.get("timing");var a=this.get("isSelected");c.setClass(SCUI.PAST,SCUI.PAST===e);
c.setClass(SCUI.PRESENT,SCUI.PRESENT===e);c.setClass(SCUI.TODAY,SCUI.TODAY===e);c.setClass(SCUI.FUTURE,SCUI.FUTURE===e);
c.setClass("sel",a);c.begin("div").attr("class","date_number").push(b.get("day")).end()
},_selectedDate:function(){var a=this.get("calendarView");var b=this.get("date");
if(a){a.set("selectedDate",b)}}});sc_require("core");sc_require("views/date");SCUI.CalendarView=SC.View.extend({classNames:["scui-calendar"],monthStartOn:null,content:null,titleKey:"title",dateKey:"date",dateSize:{width:100,height:100},dateBorderWidth:0,headerHeight:null,weekdayHeight:20,exampleDateView:SCUI.DateView,selectedDate:null,weekdayStrings:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthStrings:["January","February","March","April","May","June","July","August","September","October","November","December"],_dateGrid:[],init:function(){var f=this.get("monthStartOn")||SC.DateTime.create({day:1});
this.set("monthStartOn",f);var e=this.get("dateSize");var b=e.width||100;var c=e.height||100;
var a=this.get("headerHeight")||c/4;if(a<20){a=20}this.set("dateSize",{width:b,height:c});
this.set("headerHeight",a);this._dateGrid=[];arguments.callee.base.apply(this,arguments)
},awake:function(){this.resetToSelectedDate();arguments.callee.base.apply(this,arguments)
},resetToSelectedDate:function(){var a=this.get("selectedDate");if(a){this.set("monthStartOn",a.adjust({day:1}))
}},displayProperties:["monthStartOn","selectedDate","titleKey","dateKey","content","content.[]"],render:function(a,g){var v=this.get("dateBorderWidth");
var m=this.get("dateSize");var u=(2*v)+m.width;var c=(2*v)+m.height;var o=this.get("headerHeight");
var k=this.get("weekdayHeight");var b=u*7;var s=(c*6)+(o+k);var q=this.get("layout");
q=SC.merge(q,{width:b,height:s});this.set("layout",q);var n=this.get("monthStartOn");
var h=this.get("weekdayStrings");var l=this.get("monthStrings");var f=n.get("month");
var t=n.get("year");if(g){var e='<div class="month_header" style="position: absolute; left: %@1px; right: %@1px; height: %@2px;">%@3 %@4</div>';
a.push(e.fmt(u,o,l[f-1].loc(),t));var j=0;for(var p=0;p<7;p++){a.push('<div class="weekday" style="position: absolute; left: %@1px; top: %@2px; width: %@3px; height: 20px;">%@4</div>'.fmt(j,o,m.width,h[p].loc()));
j+=u}}else{this.$(".month_header").text("%@ %@".fmt(l[f-1].loc(),t))}this._updateDates();
arguments.callee.base.apply(this,arguments)},createChildViews:function(){var j=[],l=null;
var b=this.get("dateBorderWidth");var k=this.get("dateSize");var a=(2*b)+k.width;
var m=(2*b)+k.height;var f=this.get("headerHeight");l=this.createChildView(SC.View.design(SCUI.SimpleButton,{classNames:["scui-cal-button","previous-month-icon"],layout:{left:5,top:6,width:8,height:9},target:this,action:"previousMonth"}),{rootElementPath:[0]});
j.push(l);l=this.createChildView(SC.View.design(SCUI.SimpleButton,{classNames:["scui-cal-button","next-month-icon"],layout:{right:5,top:6,width:8,height:9},target:this,action:"nextMonth"}),{rootElementPath:[1]});
j.push(l);var c=b;var h=f+this.get("weekdayHeight");var g=this.get("exampleDateView");
for(var e=0;e<42;e++){l=this.createChildView(g.design({layout:{left:c,top:h,width:k.width,height:k.height},timing:SCUI.PAST,calendarView:this,date:e}),{rootElementPath:[e+2]});
this._dateGrid.push(l);j.push(l);if(((e+1)%7)===0){h+=m;c=b}else{c+=a}}this.set("childViews",j);
return this},nextMonth:function(){var b=this.get("monthStartOn");var a=b.advance({month:1});
this.set("monthStartOn",a);this.displayDidChange()},previousMonth:function(){var a=this.get("monthStartOn");
var b=a.advance({month:-1});this.set("monthStartOn",b);this.displayDidChange()},_updateDates:function(){var f=this.get("monthStartOn");
var g=f.get("month");var h=f.get("dayOfWeek");var c=f.advance({day:-h});var i=SC.DateTime.create();
var e=this.get("selectedDate");var b,a;for(var j=0;j<42;j++){if(j<h){this._dateGrid[j].set("timing",SCUI.PAST)
}else{if(c.get("month")===g){if(e){b=SC.DateTime.compareDate(c,e)===0?YES:NO;this._dateGrid[j].set("isSelected",b)
}a=SC.DateTime.compareDate(c,i)===0?SCUI.TODAY:SCUI.PRESENT;this._dateGrid[j].set("timing",a)
}else{this._dateGrid[j].set("timing",SCUI.FUTURE)}}this._dateGrid[j].set("date",c);
c=c.advance({day:1})}}});sc_require("core");SCUI.DatePickerView=SC.View.extend({classNames:["scui-datepicker-view"],date:null,dateString:"",isShowingCalendar:NO,hint:"",dateFormat:null,_textfield:null,_date_button:null,_calendar_popup:null,_calendar:null,_layout:{width:195,height:25},displayProperties:["date"],init:function(){arguments.callee.base.apply(this,arguments);
this.set("dateString",this._genDateString(this.get("date")));var b=this.get("layout"),a=this;
b=SC.merge(this._layout,b);this.set("layout",b);this._calendar_popup=SC.PickerPane.create({layout:{width:195,height:215},contentView:SC.View.design({childViews:"calendar todayButton noneButton".w(),calendar:SCUI.CalendarView.design({layout:{left:10,top:0},dateSize:{width:25,height:25},weekdayStrings:["Su","Mo","Tu","We","Th","Fr","Sa"],selectedDateBinding:SC.Binding.from("date",a)}),todayButton:SC.View.extend(SCUI.SimpleButton,{classNames:["scui-datepicker-today"],layout:{left:10,bottom:0,width:50,height:18},target:this,action:"selectToday",render:function(c,e){if(e){c.push("Today")
}}}),noneButton:SC.View.design(SCUI.SimpleButton,{classNames:["scui-datepicker-none"],layout:{right:10,bottom:0,width:50,height:18},target:this,action:"clearSelection",render:function(c,e){if(e){c.push("None")
}}})})});if(this._calendar_popup){this.bind("isShowingCalendar","._calendar_popup.isPaneAttached");
this._calendar=this._calendar_popup.getPath("contentView.calendar")}},createChildViews:function(){var a,c=[];
a=this._textfield=this.createChildView(SC.TextFieldView.design({layout:{left:0,top:0,right:0,bottom:0},classNames:["scui-datechooser-text"],isEnabled:NO,valueBinding:".parentView.dateString",hint:this.get("hint")}));
c.push(a);var b=this;a=this._date_button=this.createChildView(SC.View.design(SCUI.SimpleButton,{classNames:["scui-datechooser-button","calendar-icon"],layout:{right:5,top:4,width:16,height:16},target:this,action:"toggle",isEnabledBinding:SC.binding("isEnabled",b)}));
c.push(a);this.set("childViews",c);arguments.callee.base.apply(this,arguments)},hideCalendar:function(){if(this._calendar_popup){this._calendar_popup.remove();
this.set("isShowingCalendar",NO)}},showCalendar:function(){if(this._calendar_popup){this._calendar_popup.popup(this._textfield);
this._calendar.resetToSelectedDate();this.set("isShowingCalendar",YES)}},toggle:function(){if(this.isShowingCalendar){this.hideCalendar()
}else{this.showCalendar()}},selectToday:function(){this._calendar.set("selectedDate",SC.DateTime.create())
},clearSelection:function(){this._calendar.set("selectedDate",null)},_genDateString:function(b){var a=this.get("dateFormat")||"%a %m/%d/%Y";
var c=b?b.toFormattedString(a):"";return c},_dateDidChange:function(){this.set("dateString",this._genDateString(this.get("date")));
this.hideCalendar()}.observes("date")});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/calendar")
}SCUI.WIDGET_TYPE="widget";SCUI.WIDGET_EDIT="editing";SCUI.DashboardDelegate={isDashboardDelegate:YES,dashboardWidgetViewFor:function(a,c,e,b){return null
},dashboardWidgetEditViewFor:function(a,c,e,b){return null},dashboardWidgetDidMove:function(a,b){},dashboardDeleteWidget:function(a,b){return NO
},dashboardWidgetDidCommitEditing:function(a,b){}};SCUI.Widget={isWidget:YES,widgetViewClassKey:"widgetViewClass",widgetEditViewClassKey:"widgetEditViewClass",positionKey:"position",sizeKey:"size",nameKey:"name",isLocked:NO,canEdit:YES,isEditing:NO,showDoneButton:YES,widgetDidMove:function(){},widgetDidCommitEditing:function(){}};
sc_require("mixins/widget");SCUI.ClockWidget=SC.Object.extend(SCUI.Widget,{widgetViewClass:"SCUI.ClockWidgetView",widgetEditViewClass:"SCUI.ClockWidgetEditView",position:{x:40,y:40},size:{width:320,height:150},showGreeting:NO,greeting:"Hello World".loc(),now:"--",value:function(){return this.get(this.get("showGreeting")?"greeting":"now")
}.property("showGreeting","greeting","now").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.tick()},tick:function(){this.set("now",new Date().format("hh:mm:ss"));this.invokeLater(this.tick,1000)
}});sc_require("models/clock_widget");SCUI.ClockWidgetView=SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},content:null,childViews:["clockView"],clockView:SC.View.design({classNames:["scui-clock-widget-view"],layout:{left:0,right:0,top:0,bottom:0},childViews:["labelView"],labelView:SC.LabelView.design({layout:{left:10,right:10,centerY:0,height:48},tagName:"h1",valueBinding:".parentView.parentView*content.value"})})});
SCUI.ClockWidgetEditView=SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},content:null,childViews:["optionView"],optionView:SC.View.design({classNames:["scui-clock-widget-view"],layout:{left:0,right:0,top:0,bottom:0},childViews:["checkboxView"],checkboxView:SC.CheckboxView.design({layout:{centerX:0,centerY:0,width:130,height:18},title:"Show Greeting".loc(),valueBinding:".parentView.parentView*content.showGreeting"})})});
SCUI.MissingWidgetView=SC.View.extend(SC.Border,{layout:{left:0,right:0,top:0,bottom:0},message:"Widget is missing or broken. Please remove and replace this widget using the plus button in the bottom left.".loc(),classNames:"missing-widget".w(),createChildViews:function(){var a=[];
a.push(this.createChildView(SC.LabelView.design({layout:{left:10,right:10,centerY:0,height:40},textAlign:SC.ALIGN_CENTER,value:this.get("message")})));
this.set("childViews",a)}});sc_require("views/missing_widget");SCUI.WidgetContainerView=SC.View.extend(SC.Control,{classNames:["scui-widget-container-view"],canDeleteWidget:NO,layout:{left:0,top:0,width:400,height:200},widgetViewClass:null,widgetEditViewClass:null,deleteHandleViewClass:SC.View.extend(SCUI.SimpleButton,{classNames:["scui-widget-delete-handle-view"],layout:{left:0,top:0,width:28,height:28}}),editHandleViewClass:SC.View.extend(SCUI.SimpleButton,{classNames:["scui-widget-edit-handle-view"],layout:{right:0,top:0,width:28,height:28}}),doneButtonViewClass:SC.ButtonView.extend({classNames:["scui-widget-done-button-view"],layout:{right:10,bottom:10,width:80,height:24},title:"Done".loc()}),displayProperties:["canDeleteWidget","isEditing"],createChildViews:function(){var f=[];
var e;var c=this.get("content");var b=c?c.get("isEditing"):NO;var g=c?c.get("showDoneButton"):NO;
var a=c?c.get("canEdit"):NO;e=this._getViewClass("widgetEditViewClass");if(!e){e=SCUI.MissingWidgetView.extend({backgroundColor:"#729c5a",message:"Widget's edit view is missing.".loc()})
}this._editView=this.createChildView(e,{content:c,isVisible:(a&&b)});f.push(this._editView);
e=this._getViewClass("doneButtonViewClass");if(e){this._doneButtonView=this.createChildView(e,{target:this,action:"commitEditing",isVisible:(a&&b&&g)});
f.push(this._doneButtonView)}e=this._getViewClass("widgetViewClass");if(!e){e=SCUI.MissingWidgetView
}this._widgetView=this.createChildView(e,{content:c,isVisible:(!b||!a)});f.push(this._widgetView);
e=this._getViewClass("editHandleViewClass");if(e){this._editHandleView=this.createChildView(e,{target:this,action:"beginEditing",isVisible:(a&&!b)});
f.push(this._editHandleView)}e=this._getViewClass("deleteHandleViewClass");if(e){this._deleteHandleView=this.createChildView(e,{target:this,action:"deleteWidget",isVisible:this.get("canDeleteWidget")});
f.push(this._deleteHandleView)}this.set("childViews",f)},beginEditing:function(){if(this.getPath("content.canEdit")){this.setPathIfChanged("content.isEditing",YES)
}},commitEditing:function(){var b=this.get("content");var a=this.get("dashboardDelegate");
this.setPathIfChanged("content.isEditing",NO);if(a&&a.dashboardWidgetDidCommitEditing){a.dashboardWidgetDidCommitEditing(this.get("owner"),b)
}if(b&&b.widgetDidCommitEditing){b.widgetDidCommitEditing()}},deleteWidget:function(){var a=this.get("owner");
if(a&&a.deleteWidget){a.deleteWidget(this.get("content"))}},contentPropertyDidChange:function(b,a){if(a===this.getPath("content.sizeKey")){this._sizeDidChange()
}else{if(a==="isEditing"){this._isEditingDidChange()}}},_sizeDidChange:function(){var a=this.getPath("content.sizeKey");
var b=a?this.getPath("content.%@".fmt(a)):null;if(b){this.adjust({width:(parseFloat(b.width)||0),height:(parseFloat(b.height)||0)})
}},_isEditingDidChange:function(){var c=this.get("content");var b=c?c.get("isEditing"):NO;
var a=c?c.get("canEdit"):NO;var e=c?c.get("showDoneButton"):NO;if(this._editView){this._editView.set("isVisible",(a&&b))
}if(this._doneButtonView){this._doneButtonView.set("isVisible",(a&&b&&e))}if(this._widgetView){this._widgetView.set("isVisible",(!b||!a))
}if(this._editHandleView){this._editHandleView.set("isVisible",(a&&!b))}},_canDeleteWidgetDidChange:function(){if(this._deleteHandleView){this._deleteHandleView.set("isVisible",this.get("canDeleteWidget"))
}}.observes("canDeleteWidget"),_contentDidChange:function(){var a=this.get("content");
if(this._widgetView){this._widgetView.set("content",a)}if(this._editView){this._editView.set("content",a)
}}.observes("content"),_getViewClass:function(f){var g=this.get(f);var e,a,b;if(SC.typeOf(g)===SC.T_STRING){e=SC.tupleForPropertyPath(g);
if(e){a=e[0];b=e[1];g=a.get?a.get(b):a[b]}}return(g&&g.kindOf(SC.View))?g:null},_widgetView:null,_editView:null,_activeView:null,_deleteHandleView:null,_editHandleView:null,_doneButtonView:null});
sc_require("views/widget_container");sc_require("mixins/dashboard_delegate");SCUI.DashboardView=SC.View.extend(SCUI.DashboardDelegate,{classNames:"scui-dashboard-view",content:null,acceptsFirstResponder:YES,canDeleteContent:NO,widgetContainerView:SCUI.WidgetContainerView,delegate:null,dashboardDelegate:function(){var a=this.get("delegate");
var b=this.get("content");return this.delegateFor("isDashboardDelegate",a,b)}.property("delegate","content").cacheable(),didCreateLayer:function(){arguments.callee.base.apply(this,arguments);
this._contentDidChange()},beginManaging:function(){this.setIfChanged("canDeleteContent",YES)
},endManaging:function(){this.setIfChanged("canDeleteContent",NO)},deleteWidget:function(c){var b=this.get("content");
var a=this.get("dashboardDelegate");if((a&&!a.dashboardDeleteWidget(this,c))||!a){if(b&&b.removeObject){b.removeObject(c)
}}},mouseDown:function(b){var c,f,e,a;this._dragData=null;if(b&&b.which===1){c=this._itemViewForEvent(b);
if(c&&!c.getPath("content.isLocked")){a=SC.clone(c.get("layout"));a.startPageX=b.pageX;
a.startPageY=b.pageY;a.view=c;a.didMove=NO;this._dragData=a}}return YES},mouseDragged:function(e){var c,b,a=this._dragData;
if(a){a.didMove=YES;c=e.pageX-a.startPageX;b=e.pageY-a.startPageY;a.view.adjust({centerX:a.centerX+c,centerY:a.centerY+b})
}return YES},mouseUp:function(b){var f,i,h,a,g,e,c;if(this._dragData&&this._dragData.didMove){f=this._dragData.view.get("content");
c=this._dragData.view.get("layout");if(f&&c){g=c.centerX||0;e=c.centerY||0;h={x:g,y:e};
this._setItemPosition(f,h);if(f.widgetDidMove){f.widgetDidMove();a=this.get("dashboardDelegate");
if(a&&a.dashboardWidgetDidMove){a.dashboardWidgetDidMove(this,f)}}}}this._dragData=null;
return YES},_contentDidChange:function(){this.invokeOnce("_updateItemViews")}.observes("*content.[]"),_canDeleteContentDidChange:function(){var b=this.get("canDeleteContent");
var a=this._itemViews||[];a.forEach(function(c){c.setIfChanged("canDeleteWidget",b)
})}.observes("canDeleteContent"),_updateItemViews:function(){var o=this.get("content");
var k=this._itemViewCache||{};var t=this._itemViews||[];var l=[];var j={};var h=this.get("dashboardDelegate");
var b=this.get("canDeleteContent");var g=this.get("widgetContainerView");var s=[],q=[];
var e=this;var n,c,u,a,f,m,p;if(o&&o.isEnumerable){o.forEach(function(v,i){u=SC.guidFor(v);
f=k[u];if(!f){m={widgetViewClass:h.dashboardWidgetViewFor(e,o,i,v)||v.get(v.get("widgetViewClassKey")),widgetEditViewClass:h.dashboardWidgetEditViewFor(e,o,i,v)||v.get(v.get("widgetEditViewClassKey")),canDeleteWidget:b,content:v,owner:e,displayDelegate:e,dashboardDelegate:h,layout:e._layoutForItemView(v),layerId:"%@-%@".fmt(SC.guidFor(e),u)};
f=e.createChildView(g,m)}l.push(f);j[u]=f})}if(!l.isEqual(t)){this.beginPropertyChanges();
this.removeAllChildren();l.forEach(function(i){e.appendChild(i)});t.forEach(function(i){if(l.indexOf(i)<0){i.set("content",null)
}});this.endPropertyChanges()}this._itemViews=l;this._itemViewCache=j},_layoutForItemView:function(c){var b=null,e,a;
if(c){e=this._getItemPosition(c)||{x:20,y:20};a=this._getItemSize(c)||{width:300,height:100};
b={centerX:e.x,centerY:e.y,width:a.width,height:a.height}}return b},_itemViewForEvent:function(j){var e=this.getPath("pane.rootResponder");
if(!e||!this._itemViewCache){return null}var c=SC.guidFor(this)+"-",a=c.length,f=j.target,g=this.get("layer"),b,i,h=null;
while(f&&f!==document&&f!==g){b=f?SC.$(f).attr("id"):null;if((b.length>c.length)&&(b.indexOf(c)===0)){i=b.slice(b.lastIndexOf("-")+1);
if(h=this._itemViewCache[i]){break}}f=f.parentNode}return h},_getItemPosition:function(b){var a,c;
if(b){a=b.get("positionKey")||"position";c=b.get(a);if(c){return{x:(parseFloat(c.x)||0),y:(parseFloat(c.y)||0)}
}}return null},_setItemPosition:function(b,c){var a;if(b){a=b.get("positionKey")||"position";
b.set(a,c)}},_getItemSize:function(c){var a,b;if(c){a=c.get("sizeKey");b=a?c.get(a):null;
if(b){return{width:(parseFloat(b.width)||10),height:(parseFloat(b.height)||10)}}}return null
},_setItemSize:function(c,b){var a;if(c){a=c.get("sizeKey");if(a){c.set(a,b)}}},_itemViewCache:null,_itemViews:null});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/dashboard")
}SCUI.LINE="line";SCUI.RECT="rect";SCUI.CIRCLE="circle";SCUI.POLY="poly";SCUI.FILL="fill";
SCUI.STROKE="stroke";SCUI.DrawingView=SC.View.extend({classNames:"scui-drawing-view",shapes:[],_drawingManager:{},shapesDidChange:function(){this.set("layerNeedsUpdate",YES);
this.updateLayerIfNeeded()}.observes("*shapes.[]"),init:function(){arguments.callee.base.apply(this,arguments);
this.registerShapeDrawing(SCUI.LINE,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width
}if(b.style.color){a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency
}}a.beginPath();a.moveTo(b.start.x,b.start.y);a.lineTo(b.end.x,b.end.y);a.stroke()
});this.registerShapeDrawing(SCUI.RECT,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width
}if(b.style.color){a.fillStyle=a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency
}}switch(b.type){case SCUI.FILL:a.fillRect(b.start.x,b.start.y,b.size.width,b.size.height);
break;case SCUI.STROKE:a.strokeRect(b.start.x,b.start.y,b.size.width,b.size.height);
break;default:a.clearRect(b.start.x,b.start.y,b.size.width,b.size.height);break}});
this.registerShapeDrawing(SCUI.CIRCLE,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width
}if(b.style.color){a.fillStyle=a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency
}}a.beginPath();a.arc(b.center.x,b.center.y,b.radius,0,Math.PI*2,true);if(b.type===SCUI.FILL){a.fill()
}else{a.stroke()}});this.registerShapeDrawing(SCUI.POLY,function(b,g){if(g.style){if(g.style.width){b.lineWidth=g.style.width
}if(g.style.color){b.fillStyle=b.strokeStyle=g.style.color}if(g.style.transparency){b.globalAlpha=g.style.transparency
}}b.beginPath();var a=g.path?g.path.length:0;if(a<2){return}var f=g.path,e;b.moveTo(f[0].x,f[0].y);
for(var c=1;c<a;c++){e=f[c];b.lineTo(e.x,e.y)}b.lineTo(f[0].x,f[0].y);if(g.type===SCUI.FILL){b.fill()
}else{b.stroke()}})},render:function(c,f){var e=this.get("frame");if(f){if(!SC.browser.msie){c.push('<canvas class="base-layer" width="%@" height="%@">You can\'t use canvas tags</canvas>'.fmt(e.width,e.height))
}}else{var b=this.$("canvas.base-layer");if(b){b.attr("width",e.width);b.attr("height",e.height);
if(b.length>0){var a=b[0].getContext("2d");if(a){a.clearRect(0,0,e.width,e.height);
this._drawShapes(a)}else{console.error("SCUI.DrawingView.render(): Canvas object context is not accessible.")
}}else{console.error("SCUI.DrawingView.render(): Canvas element array length is zero.")
}}else{console.error("SCUI.DrawingView.render(): Canvas element is not accessible.")
}}return arguments.callee.base.apply(this,arguments)},registerShapeDrawing:function(b,a){if(!b){console.error("Can't register this drawing paradigm because name is null");
return NO}this._drawingManager[b]=a;this.set("layerNeedsUpdate",YES);this.updateLayerIfNeeded();
return YES},_drawShapes:function(c){var g;var b=this.get("shapes")||[];var e;for(var f=0,a=b.length;
f<a;f++){g=b[f];e=this._drawingManager[g.shape];if(e){e(c,g)}}},didCreateLayer:function(){if(SC.browser.msie){var b=this.get("frame");
var a=document.createElement("CANVAS");a.className="base-layer";a.width=b.width;a.height=b.height;
this.$().append(a);a=G_vmlCanvasManager.initElement(a);this._canvasie=a}}});sc_require("views/drawing");
SCUI.SNAP_ZONE=2;SCUI.SNAP_LINE={shape:SCUI.LINE,start:{x:0,y:0},end:{x:0,y:0},style:{width:0.5,color:"#00c6ff"}};
SCUI.SnapLines={hasSnapLines:YES,setupData:function(p){if(!p){p=[]}this.removeLines();
this._xPositions={};this._yPositions={};var o=this._xPositions,h=this._yPositions,e=this.get("childViews"),i=this,q,c,g,l,b,f,k,a,j=(SCUI.SNAP_ZONE*2);
var n=function(w,v,s,z,t){var y=w,x=v,u=s;w=Math.floor(w/j);v=Math.floor(v/j);s=Math.floor(s/j);
if(t[w]){t[w].push({value:y,child:z})}else{t[w]=[{value:y,child:z}]}if(t[v]){t[v].push({value:x,child:z})
}else{t[v]=[{value:x,child:z}]}if(t[s]){t[s].push({value:u,child:z})}else{t[s]=[{value:u,child:z}]
}};var m=this;e.forEach(function(s){if(p.indexOf(s)<0){c=m?m.convertFrameToView(s.get("frame"),null):s.get("frame");
g=c.x;l=SC.midX(c);b=c.x+c.width;n(g,l,b,s,o);f=c.y;k=SC.midY(c);a=c.y+c.height;n(f,k,a,s,h)
}});m=this.get("parentView");c=m?m.convertFrameToView(this.get("frame"),null):this.get("frame");
this._globalFrame=c;g=c.x;l=SC.midX(c);b=c.x+c.width;n(g,l,b,this,o);f=c.y;k=SC.midY(c);
a=c.y+c.height;n(f,k,a,this,h)},drawLines:function(u,A,z,C,B,k){if(!this._xPositions||!this._yPositions){return
}if(!this._drawingView){this._drawingView=this.createChildView(SCUI.DrawingView.design({shapes:[],mouseDown:function(J){this.removeFromParent();
return YES}}));this.appendChild(this._drawingView)}if(!k){k={x:0,y:0}}var x=(SCUI.SNAP_ZONE*2),y=[],v,g,w,o,s,e,q,p,b,n,c,F,j,i,a,m,H,f,D=this._dragDirection(A,z,C,B),E,h,l=this,I,t,G;
o=u.get("parentView");w=o?o.convertFrameToView(u.get("frame"),null):u.get("frame");
w.x=w.x-k.x;w.y=w.y-k.y;s=SC.minX(w);e=SC.midX(w);q=SC.maxX(w);p=SC.minY(w);b=SC.midY(w);
n=SC.maxY(w);c=Math.floor(s/x);F=Math.floor(e/x);j=Math.floor(q/x);i=Math.floor(p/x);
a=Math.floor(b/x);m=Math.floor(n/x);E=D.UP?[{mod:c,val:0},{mod:F,val:w.width/2},{mod:j,val:w.width}]:[{mod:j,val:w.width},{mod:F,val:w.width/2},{mod:c,val:0}];
E.forEach(function(J){if(l._xPositions[J.mod]){I=J;H=l._xPositions[J.mod][0].value-l._globalFrame.x;
return}});if(!SC.none(H)){v=SC.copy(SCUI.SNAP_LINE);v.start={x:H,y:0};v.end={x:H,y:this._globalFrame.height};
y.push(v)}h=D.LEFT?[{mod:i,val:0},{mod:a,val:w.height/2},{mod:m,val:w.height}]:[{mod:m,val:w.height},{mod:a,val:w.height/2},{mod:i,val:0}];
h.forEach(function(J){if(l._yPositions[J.mod]){t=J;f=l._yPositions[J.mod][0].value-l._globalFrame.y;
return}});if(!SC.none(f)){g=SC.copy(SCUI.SNAP_LINE);g.start={y:f,x:0};g.end={y:f,x:this._globalFrame.width};
y.push(g)}this._drawingView.set("shapes",y);G={pageX:H+this._globalFrame.x,pageY:f+this._globalFrame.y,frameX:H,frameY:f};
if(I){G.pageX-=I.val;G.frameX-=I.val}if(t){G.pageY-=t.val;G.frameY-=t.val}return G
},removeLines:function(){this._xPositions=null;this._yPositions=null;this._globalFrame=null;
if(this._drawingView){this._drawingView.destroy();this._drawingView=null}},_dragDirection:function(h,g,e,c){var b=h-e,a=g-c,f={};
f.UP=b>0?NO:YES;f.DOWN=b>0?YES:NO;f.LEFT=a>0?NO:YES;f.RIGHT=a>0?YES:NO;return f}};
SCUI.DrawingPane=SC.Pane.extend({classNames:"scui-drawing-pane",layout:{top:0,left:0,bottom:0,right:0}});
sc_require("views/drawing");SCUI.DragLinkView=SCUI.DrawingView.extend({classNames:["scui-draglink"],startPoint:null,endPoint:null,linkParams:{shape:SCUI.LINE,style:{color:"black",width:2}},_pointsDidChange:function(){var e=this.get("startPoint"),a=this.get("endPoint"),f,c,b;
f=Math.abs(e.x-a.x);c=Math.abs(e.y-a.y);if(f>5||c>5){b=this.createLinkShape();this.setIfChanged("shapes",[b])
}}.observes("startPoint","endPoint","linkParams"),createLinkShape:function(b,a){var c=this.get("linkParams");
c.shape=c.shape||SCUI.LINE;c.start={x:b.x,y:b.y};c.end={x:a.x,y:a.y};c.style=c.style||{color:"black",width:2};
return c}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/drawing")
}window.LinkIt=SC.Object.create({ROUND:"round",FORWARD:"forward",REVERSE:"reverse",OUTPUT_TERMINAL:"LinkIt.TerminalOutput",INPUT_TERMINAL:"LinkIt.TerminalInput",NEVER:"never",DIRECTIONAL:"dir",INVERSE_DIRECTIONAL:"idir",ALWAYS:"always",INVITE:"invite",ACCEPT:"accept",HORIZONTAL_CURVED:"hcurved",VERTICAL_CURVED:"vcurved",STRAIGHT:"straight",PIPES:"pipes",logToConsole:YES,getLayer:function(a){if(a.kindOf(LinkIt.CanvasView)){return a
}else{var b=a.get("parentView");if(b){return this.getLayer(b)}else{LinkIt.log("Error: No layer to be found!")
}}return null},getContainer:function(a){if(a.kindOf(LinkIt.NodeContainerView)){return a
}else{var b=a.get("parentView");if(b){return this.getContainer(b)}else{LinkIt.log("Error: No Container To Be Found!")
}}return null},genLinkID:function(e){if(e){var c=e.get("startNode");var b=e.get("startTerminal");
var a=e.get("endNode");var g=e.get("endTerminal");var h=[SC.guidFor(c),b].join("_");
var f=[SC.guidFor(a),g].join("_");return(h<f)?[h,f].join("_"):[f,h].join("_")}return""
},log:function(a){if(this.logToConsole){console.log(a)}}});LinkIt.Link={isSelected:NO,linkStyle:{cap:LinkIt.ROUND,width:3,color:"#ADD8E6",lineStyle:LinkIt.VERTICAL_CURVED,directionIndicator:NO},directionIndicator:NO,selectionColor:"#FFFF64",selectionWidth:7,startNode:null,startTerminal:null,endNode:null,endTerminal:null,startPt:null,endPt:null,drawLink:function(c){var e=this.get("linkStyle")||{};
var a=(e?e.lineStyle:LinkIt.STRAIGHT)||LinkIt.STRAIGHT;var f=e.color;var g=e.width;
var b=this.get("isSelected");switch(a){case LinkIt.HORIZONTAL_CURVED:if(b){e.color=this.get("selectionColor");
e.width=this.get("selectionWidth");this.drawHorizontalCurvedLine(c,e);e.color=f;e.width=g
}this.drawHorizontalCurvedLine(c,e);break;case LinkIt.VERTICAL_CURVED:if(b){e.color=this.get("selectionColor");
e.width=this.get("selectionWidth");this.drawVerticalCurvedLine(c,e);e.color=f;e.width=g
}this.drawVerticalCurvedLine(c,e);break;default:if(b){e.color=this.get("selectionColor");
e.width=this.get("selectionWidth");this.drawStraightLine(c,e);e.color=f;e.width=g
}this.drawStraightLine(c,e);break}},drawStraightLine:function(a,b){var e=this.get("startPt");
var c=this.get("endPt");if(e&&c){a=this._initLineProperties(a,b);a.beginPath();a.moveTo(e.x,e.y);
a.lineTo(c.x,c.y);a.closePath();a.stroke()}},drawHorizontalCurvedLine:function(e,A){var v=this.get("startPt");
var y=this.get("endPt");if(v&&y){e=this._initLineProperties(e,A);var t=(v.x+y.x)/2;
var s=(v.y+y.y)/2;this._midPt={x:t,y:s};var g=(v.x-y.x);var f=(v.y-y.y);var B=Math.pow(g,2);
var c=Math.pow(f,2);var m=Math.sqrt(B+c);var z=Math.abs(v.x-y.x);var q=Math.abs(v.y-y.y);
var l=0,u;if(m>0){u=(z<q)?z:q;l=(u<50)?u/m:50/m}var k=(v.x+t)/2;var i=(v.y+s)/2;var x=(y.x+t)/2;
var w=(y.y+s)/2;var h,j;if(v.y<y.y){h=g*l;j=-(f*l)}else{h=-(g*l);j=f*l}var b=k+j;
var a=i+h;this._startControlPt={x:b,y:a};var p=x-j;var o=w-h;this._endControlPt={x:p,y:o};
e.beginPath();e.moveTo(v.x,v.y);e.quadraticCurveTo(b,a,t,s);e.quadraticCurveTo(p,o,y.x,y.y);
e.stroke();var n=this.get("directionIndicator");if(n===LinkIt.FORWARD){this.drawDirectionIndicator(e,t,s,b-t,a-s)
}else{if(n===LinkIt.REVERSE){this.drawDirectionIndicator(e,t,s,t-b,s-a)}}}},drawVerticalCurvedLine:function(e,A){var v=this.get("startPt");
var y=this.get("endPt");if(v&&y){e=this._initLineProperties(e,A);var t=(v.x+y.x)/2;
var s=(v.y+y.y)/2;this._midPt={x:t,y:s};var g=(v.x-y.x);var f=(v.y-y.y);var B=Math.pow(g,2);
var c=Math.pow(f,2);var m=Math.sqrt(B+c);var z=Math.abs(v.x-y.x);var q=Math.abs(v.y-y.y);
var l=0,u;if(m>0){u=(z<q)?z:q;l=(u<50)?u/m:50/m}var k=(v.x+t)/2;var i=(v.y+s)/2;var x=(y.x+t)/2;
var w=(y.y+s)/2;var h,j;if(v.x<y.x){h=-(g*l);j=f*l}else{h=g*l;j=-(f*l)}var b=k+j;
var a=i+h;this._startControlPt={x:b,y:a};var p=x-j;var o=w-h;this._endControlPt={x:p,y:o};
e.beginPath();e.moveTo(v.x,v.y);e.quadraticCurveTo(b,a,t,s);e.quadraticCurveTo(p,o,y.x,y.y);
e.stroke();var n=this.get("directionIndicator");if(n===LinkIt.FORWARD){this.drawDirectionIndicator(e,t,s,b-t,a-s)
}else{if(n===LinkIt.REVERSE){this.drawDirectionIndicator(e,t,s,t-b,s-a)}}}},drawDirectionIndicator:function(c,f,e,b,a){c.save();
c.translate(f,e);c.rotate(Math.atan2(a,b)-Math.atan2(1,0));c.scale(2.5,2.5);c.beginPath();
c.moveTo(0,-3);c.lineTo(2,3);c.lineTo(-2,3);c.lineTo(0,-3);c.fill();c.restore()},distanceSquaredFromLine:function(g){var i=this.get("startPt");
var f=this.get("endPt");var b=this.get("linkStyle");var a=b?(b.lineStyle||LinkIt.STRAIGHT):LinkIt.STRAIGHT;
if(a===LinkIt.STRAIGHT){return this._distanceSquaredFromLineSegment(i,f,g)}else{var e=this._distanceSquaredFromCurve(i,this._midPt,this._startControlPt,g);
var c=this._distanceSquaredFromCurve(this._midPt,f,this._endControlPt,g);var h=Math.min(e,c);
return h}},_distanceSquaredFromLineSegment:function(k,j,g){var e;if(k.x!==j.x||k.y!==j.y){var n={x:(j.x-k.x),y:(j.y-k.y)};
var c=(n.x*(g.x-k.x))+((g.y-k.y)*n.y);var m=c/((n.x*n.x)+(n.y*n.y));if(m<=0){e={x:k.x,y:k.y}
}else{if(m>=1){e={x:j.x,y:j.y}}else{var l=k.x+(m*n.x);var i=k.y+(m*n.y);e={x:l,y:i}
}}}else{e={x:k.x,y:k.y}}var f={x:(e.x-g.x),y:(e.y-g.y)};var h=(f.x*f.x)+(f.y*f.y);
return h},_distanceSquaredFromCurve:function(o,l,k,e){var u,v,q;var j={x:o.x,y:o.y};
var i={x:l.x,y:l.y};var s=0.5,g=0.5;do{v={x:(j.x+i.x)/2,y:(j.y+i.y)/2};u=this._pointOnBezierCurve(o,k,l,s);
q=this._distanceSquared(v,u);if(q>16){var h=this._distanceSquared(j,e);var f=this._distanceSquared(i,e);
g=0.5*g;if(h<f){i=u;s=s-g}else{j=u;s=s+g}}else{break}}while(true);return this._distanceSquaredFromLineSegment(j,i,e)
},_pointOnBezierCurve:function(g,e,c,b){var a=((1-b)*(1-b)*g.x)+(2*(1-b)*b*e.x)+(b*b*c.x);
var f=((1-b)*(1-b)*g.y)+(2*(1-b)*b*e.y)+(b*b*c.y);return{x:a,y:f}},_distanceSquared:function(e,c){return((c.x-e.x)*(c.x-e.x))+((c.y-e.y)*(c.y-e.y))
},_initLineProperties:function(c,f){this.set("directionIndicator",f?f.directionIndicator:this.get("directionIndicator"));
if(c){var b=f?(f.cap||LinkIt.ROUND):LinkIt.ROUND;var a=f?(f.color||"#ADD8E6"):"#ADD8E6";
var e=f?(f.width||3):3;c.lineCap=b;c.strokeStyle=a;c.fillStyle=a;c.lineWidth=e}return c
},_midPt:null,_startControlPt:null,_endControlPt:null};LinkIt.Node={isNode:YES,terminals:null,linksKey:"links",positionKey:"position",_invalidationDelegate:null,_invalidationAction:null,initMixin:function(){var b,a;
b=this.get("terminals");if(SC.typeOf(b)===SC.T_ARRAY){this.set("terminals",SC.clone(b))
}a=this.get("linksKey");if(a){this.addObserver(a,this,"_linksDidChange")}},canLink:function(a){return YES
},canDeleteLink:function(a){return YES},registerInvalidationDelegate:function(a,b){this._invalidationDelegate=a;
this._invalidationAction=b},didCreateLink:function(a){},willDeleteLink:function(a){},createLink:function(a){if(this.didCreateLink){this.didCreateLink(a)
}},deleteLink:function(a){if(this.willDeleteLink){this.willDeleteLink(a)}},_linksDidChange:function(){if(this._invalidationDelegate){var a=this._invalidationDelegate[this._invalidationAction];
if(a){a.apply(this._invalidationDelegate)}}}};LinkIt.NodeView={isNodeView:YES,isDropTarget:YES,displayProperties:["dropState"],proxiedTerminalView:null,terminalViewFor:function(a){return null
},shouldProxyTerminalFor:function(a){return NO},willDestroyLayerMixin:function(){SC.Drag.removeDropTarget(this)
},renderMixin:function(a,c){var b=this.get("dropState");a.setClass("invite",b===LinkIt.INVITE);
a.setClass("accept",b===LinkIt.ACCEPT)},dragStarted:function(c,a){var b=this.shouldProxyTerminalFor(c);
b=b?this.terminalViewFor(b):null;this.set("proxiedTerminalView",b);if(b&&b._nodeAllowsLink(c.source)){this.set("dropState",LinkIt.INVITE)
}},dragEntered:function(b,a){this.set("dropState",LinkIt.ACCEPT)},dragExited:function(b,a){this.set("dropState",LinkIt.INVITE)
},dragEnded:function(b,a){this.set("dropState",null)},computeDragOperations:function(b,a){return SC.DRAG_LINK
},acceptDragOperation:function(b,c){var a=this.get("proxiedTerminalView");return(a&&c===SC.DRAG_LINK)?a._nodeAllowsLink(b.source):NO
},performDragOperation:function(b,c){var a=this.get("proxiedTerminalView");return a?a.performDragOperation(b,c):c
}};LinkIt.Terminal={isTerminal:YES,isLinked:NO,direction:null,terminal:null,linkStyle:null,dropState:null,displayProperties:["dropState","isLinked","linkStyle","direction"],node:null,_linkCache:null,isDropTarget:YES,terminalKey:function(){var b=this.get("node");
var a=this.get("terminal");return"%@:%@".fmt(SC.guidFor(b),a)}.property("node","terminal").cacheable(),initMixin:function(){this.isLinked=NO
},willDestroyLayerMixin:function(){SC.Drag.removeDropTarget(this)},renderMixin:function(b,e){var a=this.get("links");
b.setClass("connected",this.get("isLinked"));var c=this.get("dropState");b.setClass("invite",c===LinkIt.INVITE);
b.setClass("accept",c===LinkIt.ACCEPT)},canDragLink:function(){return YES},canDropLink:function(){return YES
},linkDragStarted:function(){},linkDragEnded:function(){},linkDragEntered:function(){},linkDragExited:function(){},mouseDown:function(a){this._mouseDownEvent=a;
this._mouseDownAt=Date.now();return YES},mouseDragged:function(k){if(this.canDragLink()&&this._mouseDownEvent){var g=LinkIt.getLayer(this);
if(g&&g.get("isEditable")){var j=this.get("parentView");var h=j.convertFrameFromView(j.get("frame"),this);
var a=this.get("frame");var f=h.x+(a.width/2);var c=h.y+(a.height/2);var b=this.get("linkDragColor");
var i=LinkIt.DragLink.create({layout:{left:0,top:0,right:0,bottom:0},startPt:{x:f,y:c},endPt:{x:f,y:c},linkStyle:this.get("linkStyle")});
g.appendChild(i);var e=SC.Drag.start({event:this._mouseDownEvent,dragLink:i,source:this,dragView:SC.View.create({layout:{left:0,top:0,width:0,height:0}}),ghost:NO,slideBack:YES,dataSource:this,anchorView:g})
}this._cleanupMouseDown()}return YES},mouseUp:function(a){this._cleanupMouseDown();
return YES},dragSourceOperationMaskFor:function(b,c){var a=c.get("isNodeView")?c.get("proxiedTerminalView"):c;
return this._nodeAllowsLink(a)?SC.DRAG_LINK:SC.DRAG_NONE},dragDidBegin:function(a,b){},dragDidMove:function(b,i){var g=b.dragLink;
var f,a;if(g){var e=g.get("parentView");var h=g.get("frame");var c=e?e.convertFrameToView(h,null):h;
if(c){f=i.x-c.x;a=i.y-c.y;g.set("endPt",{x:f,y:a})}}},dragDidEnd:function(a,c,e){var b=a.dragLink;
if(b){b.destroy()}},dragStarted:function(b,a){if(this._nodeAllowsLink(b.source)){this.set("dropState",LinkIt.INVITE);
this.linkDragStarted()}},dragEntered:function(b,a){this.set("dropState",LinkIt.ACCEPT);
this.linkDragEntered()},dragExited:function(b,a){this.set("dropState",LinkIt.INVITE);
this.linkDragExited()},dragEnded:function(b,a){this.set("dropState",null);this.linkDragEnded()
},computeDragOperations:function(b,a){return SC.DRAG_LINK},acceptDragOperation:function(b,c){var a=(c===SC.DRAG_LINK)?this._nodeAllowsLink(b.source):NO;
return a},performDragOperation:function(b,h){var e=this.get("node");var g=b.source;
if(e&&g){var a=g.get("node");if(a){var f=this._createLinkObject(this,e,g,a);e.createLink(SC.Object.create(f));
var c=this._createLinkObject(g,a,this,e);a.createLink(SC.Object.create(c))}}return h
},_getLinkObjects:function(f,c,g,a){var e,b;this._linkCache=this._linkCache||{};e="%@ %@".fmt(f.get("terminalKey"),g.get("terminalKey"));
b=this._linkCache[e]||this._createLinkObject(f,c,g,a);this._linkCache[e]=b;return b
},_nodeAllowsLink:function(i){var f,c,h,a;if(i&&i.get("isTerminal")){var g=this.get("node");
var e=i.get("node");var b=this._getLinkObjects(i,e,this,g);c=(g&&b[0])?g.canLink(b[0]):NO;
a=(e&&c&&b[1])?e.canLink(b[1]):NO}return(c&&a)},_createLinkObject:function(g,a,b,h){var f={};
var e,i;if(a&&h){var c=g.get("direction");var j=b.get("direction");if(!SC.none(c)&&c===j){return[null,null]
}if((c===LinkIt.OUTPUT_TERMINAL&&(j===LinkIt.INPUT_TERMINAL||SC.none(j)))||(j===LinkIt.INPUT_TERMINAL&&SC.none(c))){f.direction=c;
f.startNode=a;f.startTerminal=g.get("terminal");f.startTerminalView=g;f.endNode=h;
f.endTerminal=b.get("terminal");f.endTerminalView=b;e=SC.Object.create(LinkIt.Link,f);
return[e,e]}else{if((c===LinkIt.INPUT_TERMINAL&&(j===LinkIt.OUTPUT_TERMINAL||SC.none(j)))||(j===LinkIt.OUTPUT_TERMINAL&&SC.none(c))){f.direction=j;
f.startNode=h;f.startTerminal=b.get("terminal");f.startTerminalView=b;f.endNode=a;
f.endTerminal=g.get("terminal");f.endTerminalView=g;e=SC.Object.create(LinkIt.Link,f);
return[e,e]}else{f.direction=c;f.startNode=a;f.startTerminal=g.get("terminal");f.startTerminalView=g;
f.endNode=h;f.endTerminal=b.get("terminal");f.endTerminalView=b;e=SC.Object.create(LinkIt.Link,f);
f.direction=j;f.startNode=h;f.startTerminal=b.get("terminal");f.startTerminalView=b;
f.endNode=a;f.endTerminal=g.get("terminal");f.endTerminalView=g;i=SC.Object.create(LinkIt.Link,f);
return[e,i]}}}},_cleanupMouseDown:function(){this._mouseDownEvent=this._mouseDownAt=null
}};LinkIt.CanvasView=SC.CollectionView.extend({classNames:["linkit-canvas"],isEmpty:YES,acceptsFirstResponder:YES,canDeleteContent:YES,allowDeselectAll:YES,contextMenuTarget:null,contextMenuAction:null,LINK_SELECTION_FREEDOM:6,linkSelection:null,displayProperties:["frame","links.[]"],linksDidChange:function(){this.invokeOnce(this._updateLinks)
},render:function(a,c){var b=this.get("frame");if(c){if(!SC.browser.msie){a.push('<canvas class="base-layer" width="%@" height="%@">You can\'t use canvas tags</canvas>'.fmt(b.width,b.height))
}}this.invokeOnce("updateCanvas");return arguments.callee.base.apply(this,arguments)
},updateCanvas:function(){var b=this.get("clippingFrame");var a=this._canvasContext;
if(a){a.clearRect(b.x,b.y,b.width+4,b.height+4);this._drawLinks(a)}},didUpdateLayer:function(){var a;
arguments.callee.base.apply(this,arguments);a=this.$("canvas.base-layer");this._canvasContext=(a&&a.length>0)?a[0].getContext("2d"):null
},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(SC.browser.msie){var b=this.get("frame");
var a=document.createElement("CANVAS");a.className="base-layer";a.width=b.width;a.height=b.height;
this.$().append(a);a=G_vmlCanvasManager.initElement(a);this._canvasie=a}},didReload:function(h){var c={};
var g=this.get("content")||[];var a=g.get("length");var f,j,b;for(var e=0;e<a;e++){f=g.objectAt(e);
j=SC.guidFor(f);b=this.itemViewForContentIndex(e);c[j]=b}this._nodeViewIndex=c},createItemView:function(h,b,e){var c,i;
var g,a;var f=e.content;if(h){c=h.create(e)}else{c=SC.LabelView.create(e,{layout:{left:0,top:0,width:150,height:50},value:"Missing NodeView"})
}i=c.get("frame");a=this._getItemPosition(f);if(!a){a=this._genRandomPosition();this._setItemPosition(f,a)
}g={top:a.y,left:a.x,width:i.width,height:i.height};c.set("layout",g);return c},deleteSelection:function(){if(this.get("isEditable")){arguments.callee.base.apply(this,arguments);
this.deleteLinkSelection()}return YES},deleteLinkSelection:function(){var c=this.get("linkSelection");
if(c&&this.get("isEditable")){var b=c.get("startNode");var a=c.get("endNode");if(b&&a){if(b.canDeleteLink(c)&&a.canDeleteLink(c)){b.deleteLink(c);
a.deleteLink(c);this.set("linkSelection",null);this.displayDidChange()}}}},mouseDown:function(j){var k,a,g,f,e,h,c,b;
var i;arguments.callee.base.apply(this,arguments);this._dragData=null;if(j&&(j.which===3)||(j.ctrlKey&&j.which===1)){if(this.get("isEditable")){i=this.get("linkSelection");
if(i&&!this.getPath("selection.length")){b=[{title:"Delete Selected Link".loc(),target:this,action:"deleteLinkSelection",isEnabled:YES}];
c=SCUI.ContextMenuPane.create({contentView:SC.View.design({}),layout:{width:194,height:0},itemTitleKey:"title",itemTargetKey:"target",itemActionKey:"action",itemSeparatorKey:"isSeparator",itemIsEnabledKey:"isEnabled",items:b});
c.popup(this,j)}}}else{k=this.get("parentView");a=this.get("frame");g=k?k.convertFrameToView(a,null):a;
f=j.pageX-g.x;e=j.pageY-g.y;this._selectLink({x:f,y:e});if(this.get("isEditable")){h=this.itemViewForEvent(j);
if(h){this._dragData=SC.clone(h.get("layout"));this._dragData.startPageX=j.pageX;
this._dragData.startPageY=j.pageY;this._dragData.view=h;this._dragData.didMove=NO
}}}return YES},mouseDragged:function(c){var b,a;if(this._dragData){this._dragData.didMove=YES;
b=c.pageX-this._dragData.startPageX;a=c.pageY-this._dragData.startPageY;this._dragData.view.adjust({left:this._dragData.left+b,top:this._dragData.top+a});
this.invokeOnce("updateCanvas")}return YES},mouseUp:function(a){var b=arguments.callee.base.apply(this,arguments);
var f,e,c,g;if(this._dragData&&this._dragData.didMove){f=this._dragData.view.get("layout");
e=this._dragData.view.get("content");if(e&&e.get("isNode")){c={x:f.left,y:f.top};
this._setItemPosition(e,c)}}this._dragData=null;if(a&&(a.which===3)||(a.ctrlKey&&a.which===1)){g=this.get("contextMenuAction");
if(g){this.getPath("pane.rootResponder").sendAction(g,this.get("contextMenuTarget"),this,this.get("pane"),a)
}}return b},_layoutForNodeView:function(e,c){var b=null,a,f;if(e&&c){f=e.get("frame");
a=this._getItemPosition(c);if(!a){a=this._genRandomPosition();this._setItemPosition(c,a)
}b={top:a.x,left:a.y,width:f.width,height:f.height}}return b},_updateLinks:function(){var q=[];
var a=this.get("content");if(a){var b=a.get("length");var e,g,f,l,p,k,o;var c,h;for(g=0;
g<b;g++){e=a.objectAt(g);if(e&&(p=e.get("linksKey"))){l=e.get(p)||[];q=q.concat(l)
}}var n=this.get("linkSelection");this.set("linkSelection",null);if(n){var m=LinkIt.genLinkID(n);
k=q.get("length");for(g=0;g<k;g++){o=q.objectAt(g);if(LinkIt.genLinkID(o)===m){this.set("linkSelection",o);
o.set("isSelected",YES);break}}}}this.set("links",q)},_drawLinks:function(e){var a=this.get("links");
var c=a.get("length");var g,f,b,h;for(b=0;b<c;b++){g=a.objectAt(b);if(!SC.none(g)){f=this._endpointsFor(g);
if(f){g.drawLink(e)}}}},_endpointsFor:function(c){var h=this._terminalViewFor(c.get("startNode"),c.get("startTerminal"));
var i=this._terminalViewFor(c.get("endNode"),c.get("endTerminal"));var g=null,e=null,b,f;
if(h&&i){b=h.get("parentView");if(b){f=b.convertFrameToView(h.get("frame"),this);
g={};g.x=SC.midX(f);g.y=SC.midY(f);c.set("startPt",g)}b=i.get("parentView");if(b){f=b.convertFrameToView(i.get("frame"),this);
e={};e.x=SC.midX(f);e.y=SC.midY(f);c.set("endPt",e)}var a=h.get("linkStyle");if(a){c.set("linkStyle",a)
}}return g&&e?{startPt:g,endPt:e}:null},_selectLink:function(g){var b=this.get("links")||[];
var a=b.get("length");var f,h,e;var c=(this.LINE_SELECTION_FREEDOM*this.LINE_SELECTION_FREEDOM)||25;
this.set("linkSelection",null);for(e=0;e<a;e++){f=b.objectAt(e);h=f.distanceSquaredFromLine(g);
if((SC.typeOf(h)===SC.T_NUMBER)&&(h<=c)){f.set("isSelected",YES);this.set("linkSelection",f);
break}else{f.set("isSelected",NO)}}for(e=e+1;e<a;e++){f=b.objectAt(e);f.set("isSelected",NO)
}this.invokeOnce("updateCanvas")},_terminalViewFor:function(b,a){var c=this._nodeViewIndex[SC.guidFor(b)];
if(c&&c.terminalViewFor){return c.terminalViewFor(a)}return null},_handleContentDidChange:function(){this._nodeSetup();
this.linksDidChange()},_contentDidChange:function(){this.invokeOnce("_handleContentDidChange")
}.observes("*content.[]"),_nodeSetup:function(){var a=this.get("content");var c=0;
var e,f;this.set("_nodeIndex",{});if(a){c=a.get("length");for(var b=0;b<c;b++){e=a.objectAt(b);
e.registerInvalidationDelegate(this,"linksDidChange");f=SC.guidFor(e);this._nodeIndex[f]={node:e}
}}this.set("isEmpty",c<=0)},_getItemPosition:function(b){var a=b?b.get("positionKey"):null;
var c=a?b.get(a):null;if(a&&c){c={x:(parseFloat(c.x)||0),y:(parseFloat(c.y)||0)}}return c
},_setItemPosition:function(b,c){var a=b?b.get("positionKey"):null;if(a){b.set(a,c)
}},_genRandomPosition:function(){return{x:Math.floor(10+Math.random()*590),y:Math.floor(10+Math.random()*390)}
},links:[],_nodeIndex:{},_nodeViewIndex:{},_dragData:null,_canvasContext:null});sc_require("mixins/link");
LinkIt.DragLink=SC.View.extend(LinkIt.Link,{classNames:["linkIt-draglink"],displayProperties:["startPt","endPt"],render:function(c,a){if(a){if(!SC.browser.msie){c.push("<canvas>test</canvas>")
}}else{var f=this.$("canvas");var e=this.get("frame");if(f&&e){var b=e.width;var l=e.height;
f.attr("width",b);f.attr("height",l);if(f.length>0){var i=this._canvasie?this._canvasie.getContext("2d"):f[0].getContext("2d");
if(i){i.clearRect(0,0,b,l);var g=this.get("startPt");var h=this.get("endPt");var k=Math.abs(g.x-h.x);
var j=Math.abs(g.y-h.y);if(k>5||j>5){if(this.drawLink){this.drawLink(i)}}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas object context is not accessible.")
}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas element has length zero.")}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas element or frame unaccessible.")
}}arguments.callee.base.apply(this,arguments)},didCreateLayer:function(){if(SC.browser.msie){var b=this.get("frame");
var a=document.createElement("CANVAS");a.width=b.width;a.height=b.height;this.$().append(a);
a=G_vmlCanvasManager.initElement(a);this._canvasie=a}this.set("layoutNeedsUpdate",YES)
}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/linkit");
/*
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
}(function(){function aJ(){if(aJ.is(arguments[0],a8)){var b=arguments[0],e=G[bC](aJ,b.splice(0,3+aJ.is(b[0],aG))),bI=e.set();
for(var S=0,bJ=b[t];S<bJ;S++){var E=b[S]||{};bq[ah](E.type)&&bI[k](e[E.type]().attr(E))
}return bI}return G[bC](aJ,arguments)}aJ.version="1.5.2";var a=/[, ]+/,bq={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bo=/\{(\d+)\}/g,bF="prototype",ah="hasOwnProperty",ab=document,aR=window,s={was:Object[bF][ah].call(aR,"Raphael"),is:aR.Raphael},bA=function(){this.customAttributes={}
},a0,bl="appendChild",bC="apply",bx="concat",X="createTouch" in ab,aQ="",aI=" ",bD=String,J="split",T="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[J](aI),br={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aX="join",t="length",bH=bD[bF].toLowerCase,ap=Math,m=ap.max,bj=ap.min,ar=ap.abs,bm=ap.pow,aN=ap.PI,aG="number",ag="string",a8="array",a1="toString",a5="fill",aU=Object[bF][a1],bu={},k="push",h=/^url\(['"]?([^\)]+?)['"]?\)$/i,H=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,aq={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ae=ap.round,F="setAttribute",ak=parseFloat,U=parseInt,a6=" progid:DXImageTransform.Microsoft",bp=bD[bF].toUpperCase,q={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},an={along:"along",blur:aG,"clip-rect":"csv",cx:aG,cy:aG,fill:"colour","fill-opacity":aG,"font-size":aG,height:aG,opacity:aG,path:"path",r:aG,rotation:"csv",rx:aG,ry:aG,scale:"csv",stroke:"colour","stroke-opacity":aG,"stroke-width":aG,translation:"csv",width:aG,x:aG,y:aG},bt="replace",bg=/^(from|to|\d+%?)$/,be=/\s*,\s*/,n={hs:1,rg:1},bb=/,?([achlmqrstvxz]),?/gi,aS=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aH=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aP=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bn=function(i,e){return i.key-e.key
};aJ.type=(aR.SVGAngle||ab.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");
if(aJ.type=="VML"){var ay=ab.createElement("div"),aC;ay.innerHTML='<v:shape adj="1"/>';
aC=ay.firstChild;aC.style.behavior="url(#default#VML)";if(!(aC&&typeof aC.adj=="object")){return aJ.type=null
}ay=null}aJ.svg=!(aJ.vml=aJ.type=="VML");bA[bF]=aJ[bF];a0=bA[bF];aJ._id=0;aJ._oid=0;
aJ.fn={};aJ.is=function(e,b){b=bH.call(b);if(b=="finite"){return !aq[ah](+e)}return(b=="null"&&e===null)||(b==typeof e)||(b=="object"&&e===Object(e))||(b=="array"&&Array.isArray&&Array.isArray(e))||aU.call(e).slice(8,-1).toLowerCase()==b
};aJ.angle=function(S,bJ,i,bI,e,E){if(e==null){var b=S-i,bK=bJ-bI;if(!b&&!bK){return 0
}return((b<0)*180+ap.atan(-bK/-b)*180/aN+360)%360}else{return aJ.angle(S,bJ,e,E)-aJ.angle(i,bI,e,E)
}};aJ.rad=function(b){return b%360*aN/180};aJ.deg=function(b){return b*180/aN%360
};aJ.snapTo=function(e,S,b){b=aJ.is(b,"finite")?b:10;if(aJ.is(e,a8)){var E=e.length;
while(E--){if(ar(e[E]-S)<=b){return e[E]}}}else{e=+e;var bI=S%e;if(bI<b){return S-bI
}if(bI>e-b){return S-bI+e}}return S};function j(){var e=[],b=0;for(;b<32;b++){e[b]=(~~(ap.random()*16))[a1](16)
}e[12]=4;e[16]=((e[16]&3)|8)[a1](16);return"r-"+e[aX]("")}aJ.setWindow=function(b){aR=b;
ab=aR.document};var ba=function(S){if(aJ.vml){var b=/^\s+|\s+$/g;var bJ;try{var bK=new ActiveXObject("htmlfile");
bK.write("<body>");bK.close();bJ=bK.body}catch(bL){bJ=createPopup().document.body
}var E=bJ.createTextRange();ba=aB(function(i){try{bJ.style.color=bD(i)[bt](b,aQ);
var bM=E.queryCommandValue("ForeColor");bM=((bM&255)<<16)|(bM&65280)|((bM&16711680)>>>16);
return"#"+("000000"+bM[a1](16)).slice(-6)}catch(bN){return"none"}})}else{var bI=ab.createElement("i");
bI.title="Rapha\xebl Colour Picker";bI.style.display="none";ab.body[bl](bI);ba=aB(function(e){bI.style.color=e;
return ab.defaultView.getComputedStyle(bI,aQ).getPropertyValue("color")})}return ba(S)
},aD=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"
},C=function(){return this.hex};aJ.hsb2rgb=function(E,i,e,S){if(aJ.is(E,"object")&&"h" in E&&"s" in E&&"b" in E){e=E.b;
i=E.s;E=E.h;S=E.o}return aJ.hsl2rgb(E,i,e/2,S)};aJ.hsl2rgb=function(bK,bR,S,E){if(aJ.is(bK,"object")&&"h" in bK&&"s" in bK&&"l" in bK){S=bK.l;
bR=bK.s;bK=bK.h}if(bK>1||bR>1||S>1){bK/=360;bR/=100;S/=100}var bP={},bM=["r","g","b"],bL,bO,bJ,e,bN,bQ;
if(!bR){bP={r:S,g:S,b:S}}else{if(S<0.5){bL=S*(1+bR)}else{bL=S+bR-S*bR}bO=2*S-bL;for(var bI=0;
bI<3;bI++){bJ=bK+1/3*-(bI-1);bJ<0&&bJ++;bJ>1&&bJ--;if(bJ*6<1){bP[bM[bI]]=bO+(bL-bO)*6*bJ
}else{if(bJ*2<1){bP[bM[bI]]=bL}else{if(bJ*3<2){bP[bM[bI]]=bO+(bL-bO)*(2/3-bJ)*6}else{bP[bM[bI]]=bO
}}}}}bP.r*=255;bP.g*=255;bP.b*=255;bP.hex="#"+(16777216|bP.b|(bP.g<<8)|(bP.r<<16)).toString(16).slice(1);
aJ.is(E,"finite")&&(bP.opacity=E);bP.toString=C;return bP};aJ.rgb2hsb=function(b,e,bK){if(e==null&&aJ.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bK=b.b;
e=b.g;b=b.r}if(e==null&&aJ.is(b,ag)){var bM=aJ.getRGB(b);b=bM.r;e=bM.g;bK=bM.b}if(b>1||e>1||bK>1){b/=255;
e/=255;bK/=255}var bJ=m(b,e,bK),i=bj(b,e,bK),S,E,bI=bJ;if(i==bJ){return{h:0,s:0,b:bJ,toString:aD}
}else{var bL=(bJ-i);E=bL/bJ;if(b==bJ){S=(e-bK)/bL}else{if(e==bJ){S=2+((bK-b)/bL)}else{S=4+((b-e)/bL)
}}S/=6;S<0&&S++;S>1&&S--}return{h:S,s:E,b:bI,toString:aD}};aJ.rgb2hsl=function(e,i,bJ){if(i==null&&aJ.is(e,"object")&&"r" in e&&"g" in e&&"b" in e){bJ=e.b;
i=e.g;e=e.r}if(i==null&&aJ.is(e,ag)){var bN=aJ.getRGB(e);e=bN.r;i=bN.g;bJ=bN.b}if(e>1||i>1||bJ>1){e/=255;
i/=255;bJ/=255}var bI=m(e,i,bJ),E=bj(e,i,bJ),S,bM,b=(bI+E)/2,bL;if(E==bI){bL={h:0,s:0,l:b}
}else{var bK=bI-E;bM=b<0.5?bK/(bI+E):bK/(2-bI-E);if(e==bI){S=(i-bJ)/bK}else{if(i==bI){S=2+(bJ-e)/bK
}else{S=4+(e-i)/bK}}S/=6;S<0&&S++;S>1&&S--;bL={h:S,s:bM,l:b}}bL.toString=N;return bL
};aJ._path2string=function(){return this.join(",")[bt](bb,"$1")};function aB(E,e,b){function i(){var S=Array[bF].slice.call(arguments,0),bJ=S[aX]("\u25ba"),bI=i.cache=i.cache||{},bK=i.count=i.count||[];
if(bI[ah](bJ)){return b?b(bI[bJ]):bI[bJ]}bK[t]>=1000&&delete bI[bK.shift()];bK[k](bJ);
bI[bJ]=E[bC](e,S);return b?b(bI[bJ]):bI[bJ]}return i}aJ.getRGB=aB(function(b){if(!b||!!((b=bD(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}
}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(n[ah](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ba(b));
var S,e,i,bJ,E,bL,bK,bI=b.match(H);if(bI){if(bI[2]){bJ=U(bI[2].substring(5),16);i=U(bI[2].substring(3,5),16);
e=U(bI[2].substring(1,3),16)}if(bI[3]){bJ=U((bL=bI[3].charAt(3))+bL,16);i=U((bL=bI[3].charAt(2))+bL,16);
e=U((bL=bI[3].charAt(1))+bL,16)}if(bI[4]){bK=bI[4][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);
i=ak(bK[1]);bK[1].slice(-1)=="%"&&(i*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);
bI[1].toLowerCase().slice(0,4)=="rgba"&&(E=ak(bK[3]));bK[3]&&bK[3].slice(-1)=="%"&&(E/=100)
}if(bI[5]){bK=bI[5][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);i=ak(bK[1]);
bK[1].slice(-1)=="%"&&(i*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);(bK[0].slice(-3)=="deg"||bK[0].slice(-1)=="\xb0")&&(e/=360);
bI[1].toLowerCase().slice(0,4)=="hsba"&&(E=ak(bK[3]));bK[3]&&bK[3].slice(-1)=="%"&&(E/=100);
return aJ.hsb2rgb(e,i,bJ,E)}if(bI[6]){bK=bI[6][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);
i=ak(bK[1]);bK[1].slice(-1)=="%"&&(i*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);
(bK[0].slice(-3)=="deg"||bK[0].slice(-1)=="\xb0")&&(e/=360);bI[1].toLowerCase().slice(0,4)=="hsla"&&(E=ak(bK[3]));
bK[3]&&bK[3].slice(-1)=="%"&&(E/=100);return aJ.hsl2rgb(e,i,bJ,E)}bI={r:e,g:i,b:bJ};
bI.hex="#"+(16777216|bJ|(i<<8)|(e<<16)).toString(16).slice(1);aJ.is(E,"finite")&&(bI.opacity=E);
return bI}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aJ);aJ.getColor=function(e){var i=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||0.75},b=this.hsb2rgb(i.h,i.s,i.b);
i.h+=0.075;if(i.h>1){i.h=0;i.s-=0.2;i.s<=0&&(this.getColor.start={h:0,s:1,b:i.b})
}return b.hex};aJ.getColor.reset=function(){delete this.start};aJ.parsePathString=aB(function(b){if(!b){return null
}var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=[];if(aJ.is(b,a8)&&aJ.is(b[0],a8)){e=aT(b)
}if(!e[t]){bD(b)[bt](aS,function(S,E,bK){var bJ=[],bI=bH.call(E);bK[bt](aH,function(bM,bL){bL&&bJ[k](+bL)
});if(bI=="m"&&bJ[t]>2){e[k]([E][bx](bJ.splice(0,2)));bI="l";E=E=="m"?"l":"L"}while(bJ[t]>=i[bI]){e[k]([E][bx](bJ.splice(0,i[bI])));
if(!i[bI]){break}}})}e[a1]=aJ._path2string;return e});aJ.findDotsAtSegment=function(e,b,bX,bV,bJ,S,bL,bK,bR){var bP=1-bR,bO=bm(bP,3)*e+bm(bP,2)*3*bR*bX+bP*3*bR*bR*bJ+bm(bR,3)*bL,bM=bm(bP,3)*b+bm(bP,2)*3*bR*bV+bP*3*bR*bR*S+bm(bR,3)*bK,bT=e+2*bR*(bX-e)+bR*bR*(bJ-2*bX+e),bS=b+2*bR*(bV-b)+bR*bR*(S-2*bV+b),bW=bX+2*bR*(bJ-bX)+bR*bR*(bL-2*bJ+bX),bU=bV+2*bR*(S-bV)+bR*bR*(bK-2*S+bV),bQ=(1-bR)*e+bR*bX,bN=(1-bR)*b+bR*bV,E=(1-bR)*bJ+bR*bL,i=(1-bR)*S+bR*bK,bI=(90-ap.atan((bT-bW)/(bS-bU))*180/aN);
(bT>bW||bS<bU)&&(bI+=180);return{x:bO,y:bM,m:{x:bT,y:bS},n:{x:bW,y:bU},start:{x:bQ,y:bN},end:{x:E,y:i},alpha:bI}
};var aj=aB(function(bO){if(!bO){return{x:0,y:0,width:0,height:0}}bO=W(bO);var bL=0,bK=0,S=[],e=[],E;
for(var bI=0,bN=bO[t];bI<bN;bI++){E=bO[bI];if(E[0]=="M"){bL=E[1];bK=E[2];S[k](bL);
e[k](bK)}else{var bJ=a7(bL,bK,E[1],E[2],E[3],E[4],E[5],E[6]);S=S[bx](bJ.min.x,bJ.max.x);
e=e[bx](bJ.min.y,bJ.max.y);bL=E[5];bK=E[6]}}var b=bj[bC](0,S),bM=bj[bC](0,e);return{x:b,y:bM,width:m[bC](0,S)-b,height:m[bC](0,e)-bM}
}),aT=function(bJ){var E=[];if(!aJ.is(bJ,a8)||!aJ.is(bJ&&bJ[0],a8)){bJ=aJ.parsePathString(bJ)
}for(var e=0,S=bJ[t];e<S;e++){E[e]=[];for(var b=0,bI=bJ[e][t];b<bI;b++){E[e][b]=bJ[e][b]
}}E[a1]=aJ._path2string;return E},av=aB(function(S){if(!aJ.is(S,a8)||!aJ.is(S&&S[0],a8)){S=aJ.parsePathString(S)
}var bN=[],bP=0,bO=0,bS=0,bR=0,E=0;if(S[0][0]=="M"){bP=S[0][1];bO=S[0][2];bS=bP;bR=bO;
E++;bN[k](["M",bP,bO])}for(var bK=E,bT=S[t];bK<bT;bK++){var b=bN[bK]=[],bQ=S[bK];
if(bQ[0]!=bH.call(bQ[0])){b[0]=bH.call(bQ[0]);switch(b[0]){case"a":b[1]=bQ[1];b[2]=bQ[2];
b[3]=bQ[3];b[4]=bQ[4];b[5]=bQ[5];b[6]=+(bQ[6]-bP).toFixed(3);b[7]=+(bQ[7]-bO).toFixed(3);
break;case"v":b[1]=+(bQ[1]-bO).toFixed(3);break;case"m":bS=bQ[1];bR=bQ[2];default:for(var bJ=1,bL=bQ[t];
bJ<bL;bJ++){b[bJ]=+(bQ[bJ]-((bJ%2)?bP:bO)).toFixed(3)}}}else{b=bN[bK]=[];if(bQ[0]=="m"){bS=bQ[1]+bP;
bR=bQ[2]+bO}for(var bI=0,e=bQ[t];bI<e;bI++){bN[bK][bI]=bQ[bI]}}var bM=bN[bK][t];switch(bN[bK][0]){case"z":bP=bS;
bO=bR;break;case"h":bP+=+bN[bK][bM-1];break;case"v":bO+=+bN[bK][bM-1];break;default:bP+=+bN[bK][bM-2];
bO+=+bN[bK][bM-1]}}bN[a1]=aJ._path2string;return bN},0,aT),z=aB(function(S){if(!aJ.is(S,a8)||!aJ.is(S&&S[0],a8)){S=aJ.parsePathString(S)
}var bM=[],bO=0,bN=0,bR=0,bQ=0,E=0;if(S[0][0]=="M"){bO=+S[0][1];bN=+S[0][2];bR=bO;
bQ=bN;E++;bM[0]=["M",bO,bN]}for(var bK=E,bS=S[t];bK<bS;bK++){var b=bM[bK]=[],bP=S[bK];
if(bP[0]!=bp.call(bP[0])){b[0]=bp.call(bP[0]);switch(b[0]){case"A":b[1]=bP[1];b[2]=bP[2];
b[3]=bP[3];b[4]=bP[4];b[5]=bP[5];b[6]=+(bP[6]+bO);b[7]=+(bP[7]+bN);break;case"V":b[1]=+bP[1]+bN;
break;case"H":b[1]=+bP[1]+bO;break;case"M":bR=+bP[1]+bO;bQ=+bP[2]+bN;default:for(var bJ=1,bL=bP[t];
bJ<bL;bJ++){b[bJ]=+bP[bJ]+((bJ%2)?bO:bN)}}}else{for(var bI=0,e=bP[t];bI<e;bI++){bM[bK][bI]=bP[bI]
}}switch(b[0]){case"Z":bO=bR;bN=bQ;break;case"H":bO=b[1];break;case"V":bN=b[1];break;
case"M":bR=bM[bK][bM[bK][t]-2];bQ=bM[bK][bM[bK][t]-1];default:bO=bM[bK][bM[bK][t]-2];
bN=bM[bK][bM[bK][t]-1]}}bM[a1]=aJ._path2string;return bM},null,aT),bE=function(e,E,b,i){return[e,E,b,i,b,i]
},bk=function(e,E,bJ,S,b,i){var bI=1/3,bK=2/3;return[bI*e+bK*bJ,bI*E+bK*S,bI*b+bK*bJ,bI*i+bK*S,b,i]
},aa=function(bR,cm,b0,bY,bS,bM,S,bQ,cl,bT){var bX=aN*120/180,b=aN/180*(+bS||0),b4=[],b1,ci=aB(function(cn,cq,i){var cp=cn*ap.cos(i)-cq*ap.sin(i),co=cn*ap.sin(i)+cq*ap.cos(i);
return{x:cp,y:co}});if(!bT){b1=ci(bR,cm,-b);bR=b1.x;cm=b1.y;b1=ci(bQ,cl,-b);bQ=b1.x;
cl=b1.y;var e=ap.cos(aN/180*bS),bO=ap.sin(aN/180*bS),b6=(bR-bQ)/2,b5=(cm-cl)/2;var cg=(b6*b6)/(b0*b0)+(b5*b5)/(bY*bY);
if(cg>1){cg=ap.sqrt(cg);b0=cg*b0;bY=cg*bY}var E=b0*b0,b9=bY*bY,cb=(bM==S?-1:1)*ap.sqrt(ar((E*b9-E*b5*b5-b9*b6*b6)/(E*b5*b5+b9*b6*b6))),bV=cb*b0*b5/bY+(bR+bQ)/2,bU=cb*-bY*b6/b0+(cm+cl)/2,bL=ap.asin(((cm-bU)/bY).toFixed(9)),bK=ap.asin(((cl-bU)/bY).toFixed(9));
bL=bR<bV?aN-bL:bL;bK=bQ<bV?aN-bK:bK;bL<0&&(bL=aN*2+bL);bK<0&&(bK=aN*2+bK);if(S&&bL>bK){bL=bL-aN*2
}if(!S&&bK>bL){bK=bK-aN*2}}else{bL=bT[0];bK=bT[1];bV=bT[2];bU=bT[3]}var bP=bK-bL;
if(ar(bP)>bX){var bW=bK,bZ=bQ,bN=cl;bK=bL+bX*(S&&bK>bL?1:-1);bQ=bV+b0*ap.cos(bK);
cl=bU+bY*ap.sin(bK);b4=aa(bQ,cl,b0,bY,bS,0,S,bZ,bN,[bK,bW,bV,bU])}bP=bK-bL;var bJ=ap.cos(bL),ck=ap.sin(bL),bI=ap.cos(bK),cj=ap.sin(bK),b7=ap.tan(bP/4),ca=4/3*b0*b7,b8=4/3*bY*b7,ch=[bR,cm],cf=[bR+ca*ck,cm-b8*bJ],ce=[bQ+ca*cj,cl-b8*bI],cc=[bQ,cl];
cf[0]=2*ch[0]-cf[0];cf[1]=2*ch[1]-cf[1];if(bT){return[cf,ce,cc][bx](b4)}else{b4=[cf,ce,cc][bx](b4)[aX]()[J](",");
var b2=[];for(var cd=0,b3=b4[t];cd<b3;cd++){b2[cd]=cd%2?ci(b4[cd-1],b4[cd],b).y:ci(b4[cd],b4[cd+1],b).x
}return b2}},ad=function(e,b,E,i,bL,bK,bJ,bI,bM){var S=1-bM;return{x:bm(S,3)*e+bm(S,2)*3*bM*E+S*3*bM*bM*bL+bm(bM,3)*bJ,y:bm(S,3)*b+bm(S,2)*3*bM*i+S*3*bM*bM*bK+bm(bM,3)*bI}
},a7=aB(function(E,e,bI,S,bT,bS,bP,bM){var bR=(bT-2*bI+E)-(bP-2*bT+bI),bO=2*(bI-E)-2*(bT-bI),bL=E-bI,bK=(-bO+ap.sqrt(bO*bO-4*bR*bL))/2/bR,bJ=(-bO-ap.sqrt(bO*bO-4*bR*bL))/2/bR,bN=[e,bM],bQ=[E,bP],i;
ar(bK)>"1e12"&&(bK=0.5);ar(bJ)>"1e12"&&(bJ=0.5);if(bK>0&&bK<1){i=ad(E,e,bI,S,bT,bS,bP,bM,bK);
bQ[k](i.x);bN[k](i.y)}if(bJ>0&&bJ<1){i=ad(E,e,bI,S,bT,bS,bP,bM,bJ);bQ[k](i.x);bN[k](i.y)
}bR=(bS-2*S+e)-(bM-2*bS+S);bO=2*(S-e)-2*(bS-S);bL=e-S;bK=(-bO+ap.sqrt(bO*bO-4*bR*bL))/2/bR;
bJ=(-bO-ap.sqrt(bO*bO-4*bR*bL))/2/bR;ar(bK)>"1e12"&&(bK=0.5);ar(bJ)>"1e12"&&(bJ=0.5);
if(bK>0&&bK<1){i=ad(E,e,bI,S,bT,bS,bP,bM,bK);bQ[k](i.x);bN[k](i.y)}if(bJ>0&&bJ<1){i=ad(E,e,bI,S,bT,bS,bP,bM,bJ);
bQ[k](i.x);bN[k](i.y)}return{min:{x:bj[bC](0,bQ),y:bj[bC](0,bN)},max:{x:m[bC](0,bQ),y:m[bC](0,bN)}}
}),W=aB(function(bS,bN){var S=z(bS),bO=bN&&z(bN),bP={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},bJ=function(bT,bU){var i,bV;
if(!bT){return["C",bU.x,bU.y,bU.x,bU.y,bU.x,bU.y]}!(bT[0] in {T:1,Q:1})&&(bU.qx=bU.qy=null);
switch(bT[0]){case"M":bU.X=bT[1];bU.Y=bT[2];break;case"A":bT=["C"][bx](aa[bC](0,[bU.x,bU.y][bx](bT.slice(1))));
break;case"S":i=bU.x+(bU.x-(bU.bx||bU.x));bV=bU.y+(bU.y-(bU.by||bU.y));bT=["C",i,bV][bx](bT.slice(1));
break;case"T":bU.qx=bU.x+(bU.x-(bU.qx||bU.x));bU.qy=bU.y+(bU.y-(bU.qy||bU.y));bT=["C"][bx](bk(bU.x,bU.y,bU.qx,bU.qy,bT[1],bT[2]));
break;case"Q":bU.qx=bT[1];bU.qy=bT[2];bT=["C"][bx](bk(bU.x,bU.y,bT[1],bT[2],bT[3],bT[4]));
break;case"L":bT=["C"][bx](bE(bU.x,bU.y,bT[1],bT[2]));break;case"H":bT=["C"][bx](bE(bU.x,bU.y,bT[1],bU.y));
break;case"V":bT=["C"][bx](bE(bU.x,bU.y,bU.x,bT[1]));break;case"Z":bT=["C"][bx](bE(bU.x,bU.y,bU.X,bU.Y));
break}return bT},e=function(bT,bU){if(bT[bU][t]>7){bT[bU].shift();var bV=bT[bU];while(bV[t]){bT.splice(bU++,0,["C"][bx](bV.splice(0,6)))
}bT.splice(bU,1);bQ=m(S[t],bO&&bO[t]||0)}},E=function(bX,bW,bU,bT,bV){if(bX&&bW&&bX[bV][0]=="M"&&bW[bV][0]!="M"){bW.splice(bV,0,["M",bT.x,bT.y]);
bU.bx=0;bU.by=0;bU.x=bX[bV][1];bU.y=bX[bV][2];bQ=m(S[t],bO&&bO[t]||0)}};for(var bL=0,bQ=m(S[t],bO&&bO[t]||0);
bL<bQ;bL++){S[bL]=bJ(S[bL],bP);e(S,bL);bO&&(bO[bL]=bJ(bO[bL],b));bO&&e(bO,bL);E(S,bO,bP,b,bL);
E(bO,S,b,bP,bL);var bK=S[bL],bR=bO&&bO[bL],bI=bK[t],bM=bO&&bR[t];bP.x=bK[bI-2];bP.y=bK[bI-1];
bP.bx=ak(bK[bI-4])||bP.x;bP.by=ak(bK[bI-3])||bP.y;b.bx=bO&&(ak(bR[bM-4])||b.x);b.by=bO&&(ak(bR[bM-3])||b.y);
b.x=bO&&bR[bM-2];b.y=bO&&bR[bM-1]}return bO?[S,bO]:S},null,aT),x=aB(function(bM){var bL=[];
for(var bI=0,bN=bM[t];bI<bN;bI++){var b={},bK=bM[bI].match(/^([^:]*):?([\d\.]*)/);
b.color=aJ.getRGB(bK[1]);if(b.color.error){return null}b.color=b.color.hex;bK[2]&&(b.offset=bK[2]+"%");
bL[k](b)}for(bI=1,bN=bL[t]-1;bI<bN;bI++){if(!bL[bI].offset){var e=ak(bL[bI-1].offset||0),E=0;
for(var S=bI+1;S<bN;S++){if(bL[S].offset){E=bL[S].offset;break}}if(!E){E=100;S=bN
}E=ak(E);var bJ=(E-e)/(S-bI+1);for(;bI<S;bI++){e+=bJ;bL[bI].offset=e+"%"}}}return bL
}),aK=function(b,S,i,E){var e;if(aJ.is(b,ag)||aJ.is(b,"object")){e=aJ.is(b,ag)?ab.getElementById(b):b;
if(e.tagName){if(S==null){return{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}
}else{return{container:e,width:S,height:i}}}}else{return{container:1,x:b,y:S,width:i,height:E}
}},bf=function(b,i){var e=this;for(var E in i){if(i[ah](E)&&!(E in b)){switch(typeof i[E]){case"function":(function(S){b[E]=b===e?S:function(){return S[bC](e,arguments)
}})(i[E]);break;case"object":b[E]=b[E]||{};bf.call(this,b[E],i[E]);break;default:b[E]=i[E];
break}}}},aF=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);
b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},am=function(b,e){if(e.top===b){return
}aF(b,e);b.next=null;b.prev=e.top;e.top.next=b;e.top=b},p=function(b,e){if(e.bottom===b){return
}aF(b,e);b.next=e.bottom;b.prev=null;e.bottom.prev=b;e.bottom=b},K=function(e,b,i){aF(e,i);
b==i.top&&(i.top=e);b.next&&(b.next.prev=e);e.next=b.next;e.prev=b;b.next=e},aM=function(e,b,i){aF(e,i);
b==i.bottom&&(i.bottom=e);b.prev&&(b.prev.next=e);e.prev=b.prev;b.prev=e;e.next=b
},A=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")
}};aJ.pathToRelative=av;if(aJ.svg){a0.svgns="http://www.w3.org/2000/svg";a0.xlink="http://www.w3.org/1999/xlink";
ae=function(b){return +b+(~~b===b)*0.5};var bi=function(i,b){if(b){for(var e in b){if(b[ah](e)){i[F](e,bD(b[e]))
}}}else{i=ab.createElementNS(a0.svgns,i);i.style.webkitTapHighlightColor="rgba(0,0,0,0)";
return i}};aJ[a1]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version
};var y=function(b,E){var e=bi("path");E.canvas&&E.canvas[bl](e);var i=new aV(e,E);
i.type="path";ao(i,{fill:"none",stroke:"#000",path:b});return i};var g=function(S,bR,b){var bO="linear",bL=0.5,bJ=0.5,bT=S.style;
bR=bD(bR)[bt](aP,function(bV,i,bW){bO="radial";if(i&&bW){bL=ak(i);bJ=ak(bW);var bU=((bJ>0.5)*2-1);
bm(bL-0.5,2)+bm(bJ-0.5,2)>0.25&&(bJ=ap.sqrt(0.25-bm(bL-0.5,2))*bU+0.5)&&bJ!=0.5&&(bJ=bJ.toFixed(5)-0.00001*bU)
}return aQ});bR=bR[J](/\s*\-\s*/);if(bO=="linear"){var bK=bR.shift();bK=-ak(bK);if(isNaN(bK)){return null
}var bI=[0,0,ap.cos(bK*aN/180),ap.sin(bK*aN/180)],bQ=1/(m(ar(bI[2]),ar(bI[3]))||1);
bI[2]*=bQ;bI[3]*=bQ;if(bI[2]<0){bI[0]=-bI[2];bI[2]=0}if(bI[3]<0){bI[1]=-bI[3];bI[3]=0
}}var bN=x(bR);if(!bN){return null}var e=S.getAttribute(a5);e=e.match(/^url\(#(.*)\)$/);
e&&b.defs.removeChild(ab.getElementById(e[1]));var E=bi(bO+"Gradient");E.id=j();bi(E,bO=="radial"?{fx:bL,fy:bJ}:{x1:bI[0],y1:bI[1],x2:bI[2],y2:bI[3]});
b.defs[bl](E);for(var bM=0,bS=bN[t];bM<bS;bM++){var bP=bi("stop");bi(bP,{offset:bN[bM].offset?bN[bM].offset:!bM?"0%":"100%","stop-color":bN[bM].color||"#fff"});
E[bl](bP)}bi(S,{fill:"url(#"+E.id+")",opacity:1,"fill-opacity":1});bT.fill=aQ;bT.opacity=1;
bT.fillOpacity=1;return 1};var ac=function(e){var b=e.getBBox();bi(e.pattern,{patternTransform:aJ.format("translate({0},{1})",b.x,b.y)})
};var ao=function(bQ,bZ){var bT={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bV=bQ.node,bR=bQ.attrs,bN=bQ.rotate(),bJ=function(b6,b5){b5=bT[bH.call(b5)];
if(b5){var b3=b6.attrs["stroke-width"]||"1",b1={round:b3,square:b3,butt:0}[b6.attrs["stroke-linecap"]||bZ["stroke-linecap"]]||0,b4=[];
var b2=b5[t];while(b2--){b4[b2]=b5[b2]*b3+((b2%2)?1:-1)*b1}bi(bV,{"stroke-dasharray":b4[aX](",")})
}};bZ[ah]("rotation")&&(bN=bZ.rotation);var bM=bD(bN)[J](a);if(!(bM.length-1)){bM=null
}else{bM[1]=+bM[1];bM[2]=+bM[2]}ak(bN)&&bQ.rotate(0,true);for(var bU in bZ){if(bZ[ah](bU)){if(!q[ah](bU)){continue
}var bS=bZ[bU];bR[bU]=bS;switch(bU){case"blur":bQ.blur(bS);break;case"rotation":bQ.rotate(bS,true);
break;case"href":case"title":case"target":var bX=bV.parentNode;if(bH.call(bX.tagName)!="a"){var S=bi("a");
bX.insertBefore(S,bV);S[bl](bV);bX=S}if(bU=="target"&&bS=="blank"){bX.setAttributeNS(bQ.paper.xlink,"show","new")
}else{bX.setAttributeNS(bQ.paper.xlink,bU,bS)}break;case"cursor":bV.style.cursor=bS;
break;case"clip-rect":var e=bD(bS)[J](a);if(e[t]==4){bQ.clip&&bQ.clip.parentNode.parentNode.removeChild(bQ.clip.parentNode);
var i=bi("clipPath"),bW=bi("rect");i.id=j();bi(bW,{x:e[0],y:e[1],width:e[2],height:e[3]});
i[bl](bW);bQ.paper.defs[bl](i);bi(bV,{"clip-path":"url(#"+i.id+")"});bQ.clip=bW}if(!bS){var bY=ab.getElementById(bV.getAttribute("clip-path")[bt](/(^url\(#|\)$)/g,aQ));
bY&&bY.parentNode.removeChild(bY);bi(bV,{"clip-path":aQ});delete bQ.clip}break;case"path":if(bQ.type=="path"){bi(bV,{d:bS?bR.path=z(bS):"M0,0"})
}break;case"width":bV[F](bU,bS);if(bR.fx){bU="x";bS=bR.x}else{break}case"x":if(bR.fx){bS=-bR.x-(bR.width||0)
}case"rx":if(bU=="rx"&&bQ.type=="rect"){break}case"cx":bM&&(bU=="x"||bU=="cx")&&(bM[1]+=bS-bR[bU]);
bV[F](bU,bS);bQ.pattern&&ac(bQ);break;case"height":bV[F](bU,bS);if(bR.fy){bU="y";
bS=bR.y}else{break}case"y":if(bR.fy){bS=-bR.y-(bR.height||0)}case"ry":if(bU=="ry"&&bQ.type=="rect"){break
}case"cy":bM&&(bU=="y"||bU=="cy")&&(bM[2]+=bS-bR[bU]);bV[F](bU,bS);bQ.pattern&&ac(bQ);
break;case"r":if(bQ.type=="rect"){bi(bV,{rx:bS,ry:bS})}else{bV[F](bU,bS)}break;case"src":if(bQ.type=="image"){bV.setAttributeNS(bQ.paper.xlink,"href",bS)
}break;case"stroke-width":bV.style.strokeWidth=bS;bV[F](bU,bS);if(bR["stroke-dasharray"]){bJ(bQ,bR["stroke-dasharray"])
}break;case"stroke-dasharray":bJ(bQ,bS);break;case"translation":var bK=bD(bS)[J](a);
bK[0]=+bK[0]||0;bK[1]=+bK[1]||0;if(bM){bM[1]+=bK[0];bM[2]+=bK[1]}B.call(bQ,bK[0],bK[1]);
break;case"scale":bK=bD(bS)[J](a);bQ.scale(+bK[0]||1,+bK[1]||+bK[0]||1,isNaN(ak(bK[2]))?null:+bK[2],isNaN(ak(bK[3]))?null:+bK[3]);
break;case a5:var bI=bD(bS).match(h);if(bI){i=bi("pattern");var bP=bi("image");i.id=j();
bi(i,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bi(bP,{x:0,y:0});bP.setAttributeNS(bQ.paper.xlink,"href",bI[1]);
i[bl](bP);var b0=ab.createElement("img");b0.style.cssText="position:absolute;left:-9999em;top-9999em";
b0.onload=function(){bi(i,{width:this.offsetWidth,height:this.offsetHeight});bi(bP,{width:this.offsetWidth,height:this.offsetHeight});
ab.body.removeChild(this);bQ.paper.safari()};ab.body[bl](b0);b0.src=bI[1];bQ.paper.defs[bl](i);
bV.style.fill="url(#"+i.id+")";bi(bV,{fill:"url(#"+i.id+")"});bQ.pattern=i;bQ.pattern&&ac(bQ);
break}var E=aJ.getRGB(bS);if(!E.error){delete bZ.gradient;delete bR.gradient;!aJ.is(bR.opacity,"undefined")&&aJ.is(bZ.opacity,"undefined")&&bi(bV,{opacity:bR.opacity});
!aJ.is(bR["fill-opacity"],"undefined")&&aJ.is(bZ["fill-opacity"],"undefined")&&bi(bV,{"fill-opacity":bR["fill-opacity"]})
}else{if((({circle:1,ellipse:1})[ah](bQ.type)||bD(bS).charAt()!="r")&&g(bV,bS,bQ.paper)){bR.gradient=bS;
bR.fill="none";break}}E[ah]("opacity")&&bi(bV,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});
case"stroke":E=aJ.getRGB(bS);bV[F](bU,E.hex);bU=="stroke"&&E[ah]("opacity")&&bi(bV,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity});
break;case"gradient":(({circle:1,ellipse:1})[ah](bQ.type)||bD(bS).charAt()!="r")&&g(bV,bS,bQ.paper);
break;case"opacity":if(bR.gradient&&!bR[ah]("stroke-opacity")){bi(bV,{"stroke-opacity":bS>1?bS/100:bS})
}case"fill-opacity":if(bR.gradient){var b=ab.getElementById(bV.getAttribute(a5)[bt](/^url\(#|\)$/g,aQ));
if(b){var bL=b.getElementsByTagName("stop");bL[bL[t]-1][F]("stop-opacity",bS)}break
}default:bU=="font-size"&&(bS=U(bS,10)+"px");var bO=bU[bt](/(\-.)/g,function(b1){return bp.call(b1.substring(1))
});bV.style[bO]=bS;bV[F](bU,bS);break}}}Q(bQ,bZ);if(bM){bQ.rotate(bM.join(aI))}else{ak(bN)&&bQ.rotate(bN,true)
}};var o=1.2,Q=function(b,S){if(b.type!="text"||!(S[ah]("text")||S[ah]("font")||S[ah]("font-size")||S[ah]("x")||S[ah]("y"))){return
}var bM=b.attrs,e=b.node,bO=e.firstChild?U(ab.defaultView.getComputedStyle(e.firstChild,aQ).getPropertyValue("font-size"),10):10;
if(S[ah]("text")){bM.text=S.text;while(e.firstChild){e.removeChild(e.firstChild)}var E=bD(S.text)[J]("\n");
for(var bI=0,bN=E[t];bI<bN;bI++){if(E[bI]){var bK=bi("tspan");bI&&bi(bK,{dy:bO*o,x:bM.x});
bK[bl](ab.createTextNode(E[bI]));e[bl](bK)}}}else{E=e.getElementsByTagName("tspan");
for(bI=0,bN=E[t];bI<bN;bI++){bI&&bi(E[bI],{dy:bO*o,x:bM.x})}}bi(e,{y:bM.y});var bJ=b.getBBox(),bL=bM.y-(bJ.y+bJ.height/2);
bL&&aJ.is(bL,"finite")&&bi(e,{y:bM.y+bL})},aV=function(e,b){var E=0,i=0;this[0]=e;
this.id=aJ._oid++;this.node=e;e.raphael=this;this.paper=b;this.attrs=this.attrs||{};
this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);
this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bd=aV[bF];
aV[bF].rotate=function(e,b,E){if(this.removed){return this}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)
}return this._.rt.deg}var i=this.getBBox();e=bD(e)[J](a);if(e[t]-1){b=ak(e[1]);E=ak(e[2])
}e=ak(e[0]);if(b!=null&&b!==false){this._.rt.deg=e}else{this._.rt.deg+=e}(E==null)&&(b=null);
this._.rt.cx=b;this._.rt.cy=E;b=b==null?i.x+i.width/2:b;E=E==null?i.y+i.height/2:E;
if(this._.rt.deg){this.transformations[0]=aJ.format("rotate({0} {1} {2})",this._.rt.deg,b,E);
this.clip&&bi(this.clip,{transform:aJ.format("rotate({0} {1} {2})",-this._.rt.deg,b,E)})
}else{this.transformations[0]=aQ;this.clip&&bi(this.clip,{transform:aQ})}bi(this.node,{transform:this.transformations[aX](aI)});
return this};aV[bF].hide=function(){!this.removed&&(this.node.style.display="none");
return this};aV[bF].show=function(){!this.removed&&(this.node.style.display="");return this
};aV[bF].remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);
for(var b in this){delete this[b]}this.removed=true};aV[bF].getBBox=function(){if(this.removed){return this
}if(this.type=="path"){return aj(this.attrs.path)}if(this.node.style.display=="none"){this.show();
var E=true}var bK={};try{bK=this.node.getBBox()}catch(bI){}finally{bK=bK||{}}if(this.type=="text"){bK={x:bK.x,y:Infinity,width:0,height:0};
for(var b=0,S=this.node.getNumberOfChars();b<S;b++){var bJ=this.node.getExtentOfChar(b);
(bJ.y<bK.y)&&(bK.y=bJ.y);(bJ.y+bJ.height-bK.y>bK.height)&&(bK.height=bJ.y+bJ.height-bK.y);
(bJ.x+bJ.width-bK.x>bK.width)&&(bK.width=bJ.x+bJ.width-bK.x)}}E&&this.hide();return bK
};aV[bF].attr=function(b,bM){if(this.removed){return this}if(b==null){var bL={};for(var bI in this.attrs){if(this.attrs[ah](bI)){bL[bI]=this.attrs[bI]
}}this._.rt.deg&&(bL.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bL.scale=this.scale());
bL.gradient&&bL.fill=="none"&&(bL.fill=bL.gradient)&&delete bL.gradient;return bL
}if(bM==null&&aJ.is(b,ag)){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()
}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient
}return this.attrs[b]}if(bM==null&&aJ.is(b,a8)){var bO={};for(var S=0,bJ=b.length;
S<bJ;S++){bO[b[S]]=this.attr(b[S])}return bO}if(bM!=null){var e={};e[b]=bM}else{if(b!=null&&aJ.is(b,"object")){e=b
}}for(var bN in this.paper.customAttributes){if(this.paper.customAttributes[ah](bN)&&e[ah](bN)&&aJ.is(this.paper.customAttributes[bN],"function")){var bK=this.paper.customAttributes[bN].apply(this,[][bx](e[bN]));
this.attrs[bN]=e[bN];for(var E in bK){if(bK[ah](E)){e[E]=bK[E]}}}}ao(this,e);return this
};aV[bF].toFront=function(){if(this.removed){return this}this.node.parentNode[bl](this.node);
var b=this.paper;b.top!=this&&am(this,b);return this};aV[bF].toBack=function(){if(this.removed){return this
}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);
p(this,this.paper);var b=this.paper}return this};aV[bF].insertAfter=function(b){if(this.removed){return this
}var e=b.node||b[b.length-1].node;if(e.nextSibling){e.parentNode.insertBefore(this.node,e.nextSibling)
}else{e.parentNode[bl](this.node)}K(this,b,this.paper);return this};aV[bF].insertBefore=function(b){if(this.removed){return this
}var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);aM(this,b,this.paper);
return this};aV[bF].blur=function(e){var b=this;if(+e!==0){var i=bi("filter"),E=bi("feGaussianBlur");
b.attrs.blur=e;i.id=j();bi(E,{stdDeviation:+e||1.5});i.appendChild(E);b.paper.defs.appendChild(i);
b._blur=i;bi(b.node,{filter:"url(#"+i.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);
delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var af=function(e,b,bI,S){var E=bi("circle");
e.canvas&&e.canvas[bl](E);var i=new aV(E,e);i.attrs={cx:b,cy:bI,r:S,fill:"none",stroke:"#000"};
i.type="circle";bi(E,i.attrs);return i},bc=function(i,b,bK,e,bI,bJ){var S=bi("rect");
i.canvas&&i.canvas[bl](S);var E=new aV(S,i);E.attrs={x:b,y:bK,width:e,height:bI,r:bJ||0,rx:bJ||0,ry:bJ||0,fill:"none",stroke:"#000"};
E.type="rect";bi(S,E.attrs);return E},aA=function(e,b,bJ,bI,S){var E=bi("ellipse");
e.canvas&&e.canvas[bl](E);var i=new aV(E,e);i.attrs={cx:b,cy:bJ,rx:bI,ry:S,fill:"none",stroke:"#000"};
i.type="ellipse";bi(E,i.attrs);return i},w=function(i,bJ,b,bK,e,bI){var S=bi("image");
bi(S,{x:b,y:bK,width:e,height:bI,preserveAspectRatio:"none"});S.setAttributeNS(i.xlink,"href",bJ);
i.canvas&&i.canvas[bl](S);var E=new aV(S,i);E.attrs={x:b,y:bK,width:e,height:bI,src:bJ};
E.type="image";return E},al=function(e,b,bI,S){var E=bi("text");bi(E,{x:b,y:bI,"text-anchor":"middle"});
e.canvas&&e.canvas[bl](E);var i=new aV(E,e);i.attrs={x:b,y:bI,"text-anchor":"middle",text:S,font:q.font,stroke:"none",fill:"#000"};
i.type="text";ao(i,i.attrs);return i},bB=function(e,b){this.width=e||this.width;this.height=b||this.height;
this.canvas[F]("width",this.width);this.canvas[F]("height",this.height);return this
},G=function(){var E=aK[bC](0,arguments),i=E&&E.container,e=E.x,bJ=E.y,S=E.width,b=E.height;
if(!i){throw new Error("SVG container not found.")}var bI=bi("svg");e=e||0;bJ=bJ||0;
S=S||512;b=b||342;bi(bI,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:S,height:b});
if(i==1){bI.style.cssText="position:absolute;left:"+e+"px;top:"+bJ+"px";ab.body[bl](bI)
}else{if(i.firstChild){i.insertBefore(bI,i.firstChild)}else{i[bl](bI)}}i=new bA;i.width=S;
i.height=b;i.canvas=bI;bf.call(i,i,aJ.fn);i.clear();return i};a0.clear=function(){var b=this.canvas;
while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bi("desc"))[bl](ab.createTextNode("Created with Rapha\xebl"));
b[bl](this.desc);b[bl](this.defs=bi("defs"))};a0.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);
for(var b in this){this[b]=A(b)}}}if(aJ.vml){var O={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aO=/([clmz]),?([^clmz]*)/gi,by=/ progid:\S+Blur\([^\)]+\)/g,bG=/-?[^,\s-]+/g,aY=1000+aI+1000,v=10,u={path:1,rect:1},bh=function(bO){var bL=/[ahqstv]/ig,E=z;
bD(bO).match(bL)&&(E=W);bL=/[clmz]/g;if(E==z&&!bD(bO).match(bL)){var bK=bD(bO)[bt](aO,function(bR,bT,bP){var bS=[],i=bH.call(bT)=="m",bQ=O[bT];
bP[bt](bG,function(bU){if(i&&bS[t]==2){bQ+=bS+O[bT=="m"?"l":"L"];bS=[]}bS[k](ae(bU*v))
});return bQ+bS});return bK}var bM=E(bO),e,b;bK=[];for(var bI=0,bN=bM[t];bI<bN;bI++){e=bM[bI];
b=bH.call(bM[bI][0]);b=="z"&&(b="x");for(var S=1,bJ=e[t];S<bJ;S++){b+=ae(e[S]*v)+(S!=bJ-1?",":aQ)
}bK[k](b)}return bK[aX](aI)};aJ[a1]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version
};y=function(i,e){var bI=az("group");bI.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";
bI.coordsize=e.coordsize;bI.coordorigin=e.coordorigin;var S=az("shape"),E=S.style;
E.width=e.width+"px";E.height=e.height+"px";S.coordsize=aY;S.coordorigin=e.coordorigin;
bI[bl](S);var bJ=new aV(S,bI,e),b={fill:"none",stroke:"#000"};i&&(b.path=i);bJ.type="path";
bJ.path=[];bJ.Path=aQ;ao(bJ,b);e.canvas[bl](bI);return bJ};ao=function(bM,bT){bM.attrs=bM.attrs||{};
var bQ=bM.node,bU=bM.attrs,bJ=bQ.style,E,bS=(bT.x!=bU.x||bT.y!=bU.y||bT.width!=bU.width||bT.height!=bU.height||bT.r!=bU.r)&&bM.type=="rect",bY=bM;
for(var bK in bT){if(bT[ah](bK)){bU[bK]=bT[bK]}}if(bS){bU.path=au(bU.x,bU.y,bU.width,bU.height,bU.r);
bM.X=bU.x;bM.Y=bU.y;bM.W=bU.width;bM.H=bU.height}bT.href&&(bQ.href=bT.href);bT.title&&(bQ.title=bT.title);
bT.target&&(bQ.target=bT.target);bT.cursor&&(bJ.cursor=bT.cursor);"blur" in bT&&bM.blur(bT.blur);
if(bT.path&&bM.type=="path"||bS){bQ.path=bh(bU.path)}if(bT.rotation!=null){bM.rotate(bT.rotation,true)
}if(bT.translation){E=bD(bT.translation)[J](a);B.call(bM,E[0],E[1]);if(bM._.rt.cx!=null){bM._.rt.cx+=+E[0];
bM._.rt.cy+=+E[1];bM.setBox(bM.attrs,E[0],E[1])}}if(bT.scale){E=bD(bT.scale)[J](a);
bM.scale(+E[0]||1,+E[1]||+E[0]||1,+E[2]||null,+E[3]||null)}if("clip-rect" in bT){var b=bD(bT["clip-rect"])[J](a);
if(b[t]==4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);var bL=bQ.clipRect||ab.createElement("div"),bX=bL.style,bI=bQ.parentNode;
bX.clip=aJ.format("rect({1}px {2}px {3}px {0}px)",b);if(!bQ.clipRect){bX.position="absolute";
bX.top=0;bX.left=0;bX.width=bM.paper.width+"px";bX.height=bM.paper.height+"px";bI.parentNode.insertBefore(bL,bI);
bL[bl](bI);bQ.clipRect=bL}}if(!bT["clip-rect"]){bQ.clipRect&&(bQ.clipRect.style.clip=aQ)
}}if(bM.type=="image"&&bT.src){bQ.src=bT.src}if(bM.type=="image"&&bT.opacity){bQ.filterOpacity=a6+".Alpha(opacity="+(bT.opacity*100)+")";
bJ.filter=(bQ.filterMatrix||aQ)+(bQ.filterOpacity||aQ)}bT.font&&(bJ.font=bT.font);
bT["font-family"]&&(bJ.fontFamily='"'+bT["font-family"][J](",")[0][bt](/^['"]+|['"]+$/g,aQ)+'"');
bT["font-size"]&&(bJ.fontSize=bT["font-size"]);bT["font-weight"]&&(bJ.fontWeight=bT["font-weight"]);
bT["font-style"]&&(bJ.fontStyle=bT["font-style"]);if(bT.opacity!=null||bT["stroke-width"]!=null||bT.fill!=null||bT.stroke!=null||bT["stroke-width"]!=null||bT["stroke-opacity"]!=null||bT["fill-opacity"]!=null||bT["stroke-dasharray"]!=null||bT["stroke-miterlimit"]!=null||bT["stroke-linejoin"]!=null||bT["stroke-linecap"]!=null){bQ=bM.shape||bQ;
var bR=(bQ.getElementsByTagName(a5)&&bQ.getElementsByTagName(a5)[0]),bV=false;!bR&&(bV=bR=az(a5));
if("fill-opacity" in bT||"opacity" in bT){var e=((+bU["fill-opacity"]+1||2)-1)*((+bU.opacity+1||2)-1)*((+aJ.getRGB(bT.fill).o+1||2)-1);
e=bj(m(e,0),1);bR.opacity=e}bT.fill&&(bR.on=true);if(bR.on==null||bT.fill=="none"){bR.on=false
}if(bR.on&&bT.fill){var i=bT.fill.match(h);if(i){bR.src=i[1];bR.type="tile"}else{bR.color=aJ.getRGB(bT.fill).hex;
bR.src=aQ;bR.type="solid";if(aJ.getRGB(bT.fill).error&&(bY.type in {circle:1,ellipse:1}||bD(bT.fill).charAt()!="r")&&g(bY,bT.fill)){bU.fill="none";
bU.gradient=bT.fill}}}bV&&bQ[bl](bR);var S=(bQ.getElementsByTagName("stroke")&&bQ.getElementsByTagName("stroke")[0]),bW=false;
!S&&(bW=S=az("stroke"));if((bT.stroke&&bT.stroke!="none")||bT["stroke-width"]||bT["stroke-opacity"]!=null||bT["stroke-dasharray"]||bT["stroke-miterlimit"]||bT["stroke-linejoin"]||bT["stroke-linecap"]){S.on=true
}(bT.stroke=="none"||S.on==null||bT.stroke==0||bT["stroke-width"]==0)&&(S.on=false);
var bP=aJ.getRGB(bT.stroke);S.on&&bT.stroke&&(S.color=bP.hex);e=((+bU["stroke-opacity"]+1||2)-1)*((+bU.opacity+1||2)-1)*((+bP.o+1||2)-1);
var bN=(ak(bT["stroke-width"])||1)*0.75;e=bj(m(e,0),1);bT["stroke-width"]==null&&(bN=bU["stroke-width"]);
bT["stroke-width"]&&(S.weight=bN);bN&&bN<1&&(e*=bN)&&(S.weight=1);S.opacity=e;bT["stroke-linejoin"]&&(S.joinstyle=bT["stroke-linejoin"]||"miter");
S.miterlimit=bT["stroke-miterlimit"]||8;bT["stroke-linecap"]&&(S.endcap=bT["stroke-linecap"]=="butt"?"flat":bT["stroke-linecap"]=="square"?"square":"round");
if(bT["stroke-dasharray"]){var bO={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};
S.dashstyle=bO[ah](bT["stroke-dasharray"])?bO[bT["stroke-dasharray"]]:aQ}bW&&bQ[bl](S)
}if(bY.type=="text"){bJ=bY.paper.span.style;bU.font&&(bJ.font=bU.font);bU["font-family"]&&(bJ.fontFamily=bU["font-family"]);
bU["font-size"]&&(bJ.fontSize=bU["font-size"]);bU["font-weight"]&&(bJ.fontWeight=bU["font-weight"]);
bU["font-style"]&&(bJ.fontStyle=bU["font-style"]);bY.node.string&&(bY.paper.span.innerHTML=bD(bY.node.string)[bt](/</g,"&#60;")[bt](/&/g,"&#38;")[bt](/\n/g,"<br>"));
bY.W=bU.w=bY.paper.span.offsetWidth;bY.H=bU.h=bY.paper.span.offsetHeight;bY.X=bU.x;
bY.Y=bU.y+ae(bY.H/2);switch(bU["text-anchor"]){case"start":bY.node.style["v-text-align"]="left";
bY.bbx=ae(bY.W/2);break;case"end":bY.node.style["v-text-align"]="right";bY.bbx=-ae(bY.W/2);
break;default:bY.node.style["v-text-align"]="center";break}}};g=function(b,bK){b.attrs=b.attrs||{};
var bL=b.attrs,bN,bI="linear",bJ=".5 .5";b.attrs.gradient=bK;bK=bD(bK)[bt](aP,function(bP,bQ,i){bI="radial";
if(bQ&&i){bQ=ak(bQ);i=ak(i);bm(bQ-0.5,2)+bm(i-0.5,2)>0.25&&(i=ap.sqrt(0.25-bm(bQ-0.5,2))*((i>0.5)*2-1)+0.5);
bJ=bQ+aI+i}return aQ});bK=bK[J](/\s*\-\s*/);if(bI=="linear"){var e=bK.shift();e=-ak(e);
if(isNaN(e)){return null}}var S=x(bK);if(!S){return null}b=b.shape||b.node;bN=b.getElementsByTagName(a5)[0]||az(a5);
!bN.parentNode&&b.appendChild(bN);if(S[t]){bN.on=true;bN.method="none";bN.color=S[0].color;
bN.color2=S[S[t]-1].color;var bO=[];for(var E=0,bM=S[t];E<bM;E++){S[E].offset&&bO[k](S[E].offset+aI+S[E].color)
}bN.colors&&(bN.colors.value=bO[t]?bO[aX]():"0% "+bN.color);if(bI=="radial"){bN.type="gradientradial";
bN.focus="100%";bN.focussize=bJ;bN.focusposition=bJ}else{bN.type="gradient";bN.angle=(270-e)%360
}}return 1};aV=function(S,bJ,b){var bI=0,i=0,e=0,E=1;this[0]=S;this.id=aJ._oid++;
this.node=S;S.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=bJ;this.paper=b;
this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;
b.top&&(b.top.next=this);b.top=this;this.next=null};bd=aV[bF];bd.rotate=function(e,b,i){if(this.removed){return this
}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)
}return this._.rt.deg}e=bD(e)[J](a);if(e[t]-1){b=ak(e[1]);i=ak(e[2])}e=ak(e[0]);if(b!=null){this._.rt.deg=e
}else{this._.rt.deg+=e}i==null&&(b=null);this._.rt.cx=b;this._.rt.cy=i;this.setBox(this.attrs,b,i);
this.Group.style.rotation=this._.rt.deg;return this};bd.setBox=function(S,bI,E){if(this.removed){return this
}var b=this.Group.style,bJ=(this.shape&&this.shape.style)||this.node.style;S=S||{};
for(var bK in S){if(S[ah](bK)){this.attrs[bK]=S[bK]}}bI=bI||this._.rt.cx;E=E||this._.rt.cy;
var bN=this.attrs,bQ,bP,bR,bM;switch(this.type){case"circle":bQ=bN.cx-bN.r;bP=bN.cy-bN.r;
bR=bM=bN.r*2;break;case"ellipse":bQ=bN.cx-bN.rx;bP=bN.cy-bN.ry;bR=bN.rx*2;bM=bN.ry*2;
break;case"image":bQ=+bN.x;bP=+bN.y;bR=bN.width||0;bM=bN.height||0;break;case"text":this.textpath.v=["m",ae(bN.x),", ",ae(bN.y-2),"l",ae(bN.x)+1,", ",ae(bN.y-2)][aX](aQ);
bQ=bN.x-ae(this.W/2);bP=bN.y-this.H/2;bR=this.W;bM=this.H;break;case"rect":case"path":if(!this.attrs.path){bQ=0;
bP=0;bR=this.paper.width;bM=this.paper.height}else{var bL=aj(this.attrs.path);bQ=bL.x;
bP=bL.y;bR=bL.width;bM=bL.height}break;default:bQ=0;bP=0;bR=this.paper.width;bM=this.paper.height;
break}bI=(bI==null)?bQ+bR/2:bI;E=(E==null)?bP+bM/2:E;var e=bI-this.paper.width/2,bO=E-this.paper.height/2,bS;
b.left!=(bS=e+"px")&&(b.left=bS);b.top!=(bS=bO+"px")&&(b.top=bS);this.X=u[ah](this.type)?-e:bQ;
this.Y=u[ah](this.type)?-bO:bP;this.W=bR;this.H=bM;if(u[ah](this.type)){bJ.left!=(bS=-e*v+"px")&&(bJ.left=bS);
bJ.top!=(bS=-bO*v+"px")&&(bJ.top=bS)}else{if(this.type=="text"){bJ.left!=(bS=-e+"px")&&(bJ.left=bS);
bJ.top!=(bS=-bO+"px")&&(bJ.top=bS)}else{b.width!=(bS=this.paper.width+"px")&&(b.width=bS);
b.height!=(bS=this.paper.height+"px")&&(b.height=bS);bJ.left!=(bS=bQ-e+"px")&&(bJ.left=bS);
bJ.top!=(bS=bP-bO+"px")&&(bJ.top=bS);bJ.width!=(bS=bR+"px")&&(bJ.width=bS);bJ.height!=(bS=bM+"px")&&(bJ.height=bS)
}}};bd.hide=function(){!this.removed&&(this.Group.style.display="none");return this
};bd.show=function(){!this.removed&&(this.Group.style.display="block");return this
};bd.getBBox=function(){if(this.removed){return this}if(u[ah](this.type)){return aj(this.attrs.path)
}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bd.remove=function(){if(this.removed){return
}aF(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]
}this.removed=true};bd.attr=function(b,bK){if(this.removed){return this}if(b==null){var bJ={};
for(var S in this.attrs){if(this.attrs[ah](S)){bJ[S]=this.attrs[S]}}this._.rt.deg&&(bJ.rotation=this.rotate());
(this._.sx!=1||this._.sy!=1)&&(bJ.scale=this.scale());bJ.gradient&&bJ.fill=="none"&&(bJ.fill=bJ.gradient)&&delete bJ.gradient;
return bJ}if(bK==null&&aJ.is(b,"string")){if(b=="translation"){return B.call(this)
}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient
}return this.attrs[b]}if(this.attrs&&bK==null&&aJ.is(b,a8)){var bN,bM={};for(S=0,bN=b[t];
S<bN;S++){bM[b[S]]=this.attr(b[S])}return bM}var e;if(bK!=null){e={};e[b]=bK}bK==null&&aJ.is(b,"object")&&(e=b);
if(e){for(var bL in this.paper.customAttributes){if(this.paper.customAttributes[ah](bL)&&e[ah](bL)&&aJ.is(this.paper.customAttributes[bL],"function")){var bI=this.paper.customAttributes[bL].apply(this,[][bx](e[bL]));
this.attrs[bL]=e[bL];for(var E in bI){if(bI[ah](E)){e[E]=bI[E]}}}}if(e.text&&this.type=="text"){this.node.string=e.text
}ao(this,e);if(e.gradient&&(({circle:1,ellipse:1})[ah](this.type)||bD(e.gradient).charAt()!="r")){g(this,e.gradient)
}(!u[ah](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bd.toFront=function(){!this.removed&&this.Group.parentNode[bl](this.Group);
this.paper.top!=this&&am(this,this.paper);return this};bd.toBack=function(){if(this.removed){return this
}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);
p(this,this.paper)}return this};bd.insertAfter=function(b){if(this.removed){return this
}if(b.constructor==ai){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)
}else{b.Group.parentNode[bl](this.Group)}K(this,b,this.paper);return this};bd.insertBefore=function(b){if(this.removed){return this
}if(b.constructor==ai){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);
aM(this,b,this.paper);return this};bd.blur=function(b){var e=this.node.runtimeStyle,i=e.filter;
i=i.replace(by,aQ);if(+b!==0){this.attrs.blur=b;e.filter=i+aI+a6+".Blur(pixelradius="+(+b||1.5)+")";
e.margin=aJ.format("-{0}px 0 0 -{0}px",ae(+b||1.5))}else{e.filter=i;e.margin=0;delete this.attrs.blur
}};af=function(e,b,bK,bI){var S=az("group"),bJ=az("oval"),i=bJ.style;S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";
S.coordsize=aY;S.coordorigin=e.coordorigin;S[bl](bJ);var E=new aV(bJ,S,e);E.type="circle";
ao(E,{stroke:"#000",fill:"none"});E.attrs.cx=b;E.attrs.cy=bK;E.attrs.r=bI;E.setBox({x:b-bI,y:bK-bI,width:bI*2,height:bI*2});
e.canvas[bl](S);return E};function au(b,S,e,i,E){if(E){return aJ.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+E,S,e-E*2,E,-E,i-E*2,E*2-e,E*2-i)
}else{return aJ.format("M{0},{1}l{2},0,0,{3},{4},0z",b,S,e,i,-e)}}bc=function(e,bJ,S,bK,i,b){var bL=au(bJ,S,bK,i,b),E=e.path(bL),bI=E.attrs;
E.X=bI.x=bJ;E.Y=bI.y=S;E.W=bI.width=bK;E.H=bI.height=i;bI.r=b;bI.path=bL;E.type="rect";
return E};aA=function(b,bL,bK,i,e){var S=az("group"),E=az("oval"),bJ=E.style;S.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";
S.coordsize=aY;S.coordorigin=b.coordorigin;S[bl](E);var bI=new aV(E,S,b);bI.type="ellipse";
ao(bI,{stroke:"#000"});bI.attrs.cx=bL;bI.attrs.cy=bK;bI.attrs.rx=i;bI.attrs.ry=e;
bI.setBox({x:bL-i,y:bK-e,width:i*2,height:e*2});b.canvas[bl](S);return bI};w=function(e,b,bK,bJ,bL,E){var S=az("group"),i=az("image");
S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";
S.coordsize=aY;S.coordorigin=e.coordorigin;i.src=b;S[bl](i);var bI=new aV(i,S,e);
bI.type="image";bI.attrs.src=b;bI.attrs.x=bK;bI.attrs.y=bJ;bI.attrs.w=bL;bI.attrs.h=E;
bI.setBox({x:bK,y:bJ,width:bL,height:E});e.canvas[bl](S);return bI};al=function(e,bL,bK,bM){var S=az("group"),E=az("shape"),bJ=E.style,bN=az("path"),b=bN.style,i=az("textpath");
S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";
S.coordsize=aY;S.coordorigin=e.coordorigin;bN.v=aJ.format("m{0},{1}l{2},{1}",ae(bL*10),ae(bK*10),ae(bL*10)+1);
bN.textpathok=true;bJ.width=e.width;bJ.height=e.height;i.string=bD(bM);i.on=true;
E[bl](i);E[bl](bN);S[bl](E);var bI=new aV(i,S,e);bI.shape=E;bI.textpath=bN;bI.type="text";
bI.attrs.text=bM;bI.attrs.x=bL;bI.attrs.y=bK;bI.attrs.w=1;bI.attrs.h=1;ao(bI,{font:q.font,stroke:"none",fill:"#000"});
bI.setBox();e.canvas[bl](S);return bI};bB=function(i,b){var e=this.canvas.style;i==+i&&(i+="px");
b==+b&&(b+="px");e.width=i;e.height=b;e.clip="rect(0 "+i+" "+b+" 0)";return this};
var az;ab.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!ab.namespaces.rvml&&ab.namespaces.add("rvml","urn:schemas-microsoft-com:vml");
az=function(b){return ab.createElement("<rvml:"+b+' class="rvml">')}}catch(ax){az=function(b){return ab.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
}}G=function(){var i=aK[bC](0,arguments),b=i.container,bL=i.height,bM,e=i.width,bK=i.x,bJ=i.y;
if(!b){throw new Error("VML container not found.")}var S=new bA,bI=S.canvas=ab.createElement("div"),E=bI.style;
bK=bK||0;bJ=bJ||0;e=e||512;bL=bL||342;e==+e&&(e+="px");bL==+bL&&(bL+="px");S.width=1000;
S.height=1000;S.coordsize=v*1000+aI+v*1000;S.coordorigin="0 0";S.span=ab.createElement("span");
S.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
bI[bl](S.span);E.cssText=aJ.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,bL);
if(b==1){ab.body[bl](bI);E.left=bK+"px";E.top=bJ+"px";E.position="absolute"}else{if(b.firstChild){b.insertBefore(bI,b.firstChild)
}else{b[bl](bI)}}bf.call(S,S,aJ.fn);return S};a0.clear=function(){this.canvas.innerHTML=aQ;
this.span=ab.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
this.canvas[bl](this.span);this.bottom=this.top=null};a0.remove=function(){this.canvas.parentNode.removeChild(this.canvas);
for(var b in this){this[b]=A(b)}return true}}var V=navigator.userAgent.match(/Version\/(.*?)\s/);
if((navigator.vendor=="Apple Computer, Inc.")&&(V&&V[1]<4||navigator.platform.slice(0,2)=="iP")){a0.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});
aR.setTimeout(function(){b.remove()})}}else{a0.safari=function(){}}var P=function(){this.returnValue=false
},bw=function(){return this.originalEvent.preventDefault()},a4=function(){this.cancelBubble=true
},aE=function(){return this.originalEvent.stopPropagation()},aw=(function(){if(ab.addEventListener){return function(bI,E,i,e){var b=X&&br[E]?br[E]:E;
var S=function(bM){if(X&&br[ah](E)){for(var bK=0,bL=bM.targetTouches&&bM.targetTouches.length;
bK<bL;bK++){if(bM.targetTouches[bK].target==bI){var bJ=bM;bM=bM.targetTouches[bK];
bM.originalEvent=bJ;bM.preventDefault=bw;bM.stopPropagation=aE;break}}}return i.call(e,bM)
};bI.addEventListener(b,S,false);return function(){bI.removeEventListener(b,S,false);
return true}}}else{if(ab.attachEvent){return function(bI,E,i,e){var S=function(bJ){bJ=bJ||aR.event;
bJ.preventDefault=bJ.preventDefault||P;bJ.stopPropagation=bJ.stopPropagation||a4;
return i.call(e,bJ)};bI.attachEvent("on"+E,S);var b=function(){bI.detachEvent("on"+E,S);
return true};return b}}}})(),a9=[],bs=function(bJ){var bL=bJ.clientX,bK=bJ.clientY,bM=ab.documentElement.scrollTop||ab.body.scrollTop,bN=ab.documentElement.scrollLeft||ab.body.scrollLeft,b,E=a9.length;
while(E--){b=a9[E];if(X){var bI=bJ.touches.length,S;while(bI--){S=bJ.touches[bI];
if(S.identifier==b.el._drag.id){bL=S.clientX;bK=S.clientY;(bJ.originalEvent?bJ.originalEvent:bJ).preventDefault();
break}}}else{bJ.preventDefault()}bL+=bN;bK+=bM;b.move&&b.move.call(b.move_scope||b.el,bL-b.el._drag.x,bK-b.el._drag.y,bL,bK,bJ)
}},f=function(S){aJ.unmousemove(bs).unmouseup(f);var E=a9.length,b;while(E--){b=a9[E];
b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,S)
}a9=[]};for(var at=T[t];at--;){(function(b){aJ[b]=aV[bF][b]=function(i,e){if(aJ.is(i,"function")){this.events=this.events||[];
this.events.push({name:b,f:i,unbind:aw(this.shape||this.node||ab,b,i,e||this)})}return this
};aJ["un"+b]=aV[bF]["un"+b]=function(E){var i=this.events,e=i[t];while(e--){if(i[e].name==b&&i[e].f==E){i[e].unbind();
i.splice(e,1);!i.length&&delete this.events;return this}}return this}})(T[at])}bd.hover=function(E,b,i,e){return this.mouseover(E,i).mouseout(b,e||i)
};bd.unhover=function(e,b){return this.unmouseover(e).unmouseout(b)};bd.drag=function(e,bI,S,b,i,E){this._drag={};
this.mousedown(function(bK){(bK.originalEvent||bK).preventDefault();var bJ=ab.documentElement.scrollTop||ab.body.scrollTop,bL=ab.documentElement.scrollLeft||ab.body.scrollLeft;
this._drag.x=bK.clientX+bL;this._drag.y=bK.clientY+bJ;this._drag.id=bK.identifier;
bI&&bI.call(i||b||this,bK.clientX+bL,bK.clientY+bJ,bK);!a9.length&&aJ.mousemove(bs).mouseup(f);
a9.push({el:this,move:e,end:S,move_scope:b,start_scope:i,end_scope:E})});return this
};bd.undrag=function(b,S,E){var e=a9.length;while(e--){a9[e].el==this&&(a9[e].move==b&&a9[e].end==E)&&a9.splice(e++,1)
}!a9.length&&aJ.unmousemove(bs).unmouseup(f)};a0.circle=function(b,i,e){return af(this,b||0,i||0,e||0)
};a0.rect=function(b,S,e,i,E){return bc(this,b||0,S||0,e||0,i||0,E||0)};a0.ellipse=function(b,E,i,e){return aA(this,b||0,E||0,i||0,e||0)
};a0.path=function(b){b&&!aJ.is(b,ag)&&!aJ.is(b[0],a8)&&(b+=aQ);return y(aJ.format[bC](aJ,arguments),this)
};a0.image=function(E,b,S,e,i){return w(this,E||"about:blank",b||0,S||0,e||0,i||0)
};a0.text=function(b,i,e){return al(this,b||0,i||0,bD(e))};a0.set=function(b){arguments[t]>1&&(b=Array[bF].splice.call(arguments,0,arguments[t]));
return new ai(b)};a0.setSize=bB;a0.top=a0.bottom=null;a0.raphael=aJ;function D(){return this.x+aI+this.y
}bd.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"
};bd.scale=function(b2,b1,bT,bR){if(this.removed){return this}if(b2==null&&b1==null){return{x:this._.sx,y:this._.sy,toString:D}
}b1=b1||b2;!+b1&&(b1=b2);var e,b,ca,b9,cd=this.attrs;if(b2!=0){var ce=this.getBBox(),S=ce.x+ce.width/2,E=ce.y+ce.height/2,b7=ar(b2/this._.sx),b6=ar(b1/this._.sy);
bT=(+bT||bT==0)?bT:S;bR=(+bR||bR==0)?bR:E;var bM=this._.sx>0,bL=this._.sy>0,bS=~~(b2/ar(b2)),bQ=~~(b1/ar(b1)),bJ=b7*bS,bI=b6*bQ,b3=this.node.style,b0=bT+ar(S-bT)*bJ*(S>bT==bM?1:-1),bZ=bR+ar(E-bR)*bI*(E>bR==bL?1:-1),bW=(b2*bS>b1*bQ?b6:b7);
switch(this.type){case"rect":case"image":var bO=cd.width*b7,bX=cd.height*b6;this.attr({height:bX,r:cd.r*bW,width:bO,x:b0-bO/2,y:bZ-bX/2});
break;case"circle":case"ellipse":this.attr({rx:cd.rx*b7,ry:cd.ry*b6,r:cd.r*bW,cx:b0,cy:bZ});
break;case"text":this.attr({x:b0,y:bZ});break;case"path":var b5=av(cd.path),bN=true,bV=bM?bJ:b7,bU=bL?bI:b6;
for(var cc=0,bY=b5[t];cc<bY;cc++){var b8=b5[cc],bP=bp.call(b8[0]);if(bP=="M"&&bN){continue
}else{bN=false}if(bP=="A"){b8[b5[cc][t]-2]*=bV;b8[b5[cc][t]-1]*=bU;b8[1]*=b7;b8[2]*=b6;
b8[5]=+(bS+bQ?!!+b8[5]:!+b8[5])}else{if(bP=="H"){for(var cb=1,bK=b8[t];cb<bK;cb++){b8[cb]*=bV
}}else{if(bP=="V"){for(cb=1,bK=b8[t];cb<bK;cb++){b8[cb]*=bU}}else{for(cb=1,bK=b8[t];
cb<bK;cb++){b8[cb]*=(cb%2)?bV:bU}}}}}var b4=aj(b5);e=b0-b4.x-b4.width/2;b=bZ-b4.y-b4.height/2;
b5[0][1]+=e;b5[0][2]+=b;this.attr({path:b5});break}if(this.type in {text:1,image:1}&&(bS!=1||bQ!=1)){if(this.transformations){this.transformations[2]="scale("[bx](bS,",",bQ,")");
this.node[F]("transform",this.transformations[aX](aI));e=(bS==-1)?-cd.x-(bO||0):cd.x;
b=(bQ==-1)?-cd.y-(bX||0):cd.y;this.attr({x:e,y:b});cd.fx=bS-1;cd.fy=bQ-1}else{this.node.filterMatrix=a6+".Matrix(M11="[bx](bS,", M12=0, M21=0, M22=",bQ,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");
b3.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}else{if(this.transformations){this.transformations[2]=aQ;
this.node[F]("transform",this.transformations[aX](aI));cd.fx=0;cd.fy=0}else{this.node.filterMatrix=aQ;
b3.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}cd.scale=[b2,b1,bT,bR][aX](aI);
this._.sx=b2;this._.sy=b1}return this};bd.clone=function(){if(this.removed){return null
}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)
};var a3={},l=function(bI,e,bM,bL,bU,bT,bS,bQ,bJ){var bP=0,bO=100,S=[bI,e,bM,bL,bU,bT,bS,bQ].join(),b=a3[S],bK,E;
!b&&(a3[S]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a3[S]
},2000);if(bJ!=null){var bR=l(bI,e,bM,bL,bU,bT,bS,bQ);bO=~~bR*10}for(var bN=0;bN<bO+1;
bN++){if(b.data[bJ]>bN){E=b.data[bN*bO]}else{E=aJ.findDotsAtSegment(bI,e,bM,bL,bU,bT,bS,bQ,bN/bO);
b.data[bN]=E}bN&&(bP+=bm(bm(bK.x-E.x,2)+bm(bK.y-E.y,2),0.5));if(bJ!=null&&bP>=bJ){return E
}bK=E}if(bJ==null){return bP}},a2=function(b,e){return function(bS,bI,bJ){bS=W(bS);
var bO,bN,E,bK,S="",bR={},bP,bM=0;for(var bL=0,bQ=bS.length;bL<bQ;bL++){E=bS[bL];
if(E[0]=="M"){bO=+E[1];bN=+E[2]}else{bK=l(bO,bN,E[1],E[2],E[3],E[4],E[5],E[6]);if(bM+bK>bI){if(e&&!bR.start){bP=l(bO,bN,E[1],E[2],E[3],E[4],E[5],E[6],bI-bM);
S+=["C",bP.start.x,bP.start.y,bP.m.x,bP.m.y,bP.x,bP.y];if(bJ){return S}bR.start=S;
S=["M",bP.x,bP.y+"C",bP.n.x,bP.n.y,bP.end.x,bP.end.y,E[5],E[6]][aX]();bM+=bK;bO=+E[5];
bN=+E[6];continue}if(!b&&!e){bP=l(bO,bN,E[1],E[2],E[3],E[4],E[5],E[6],bI-bM);return{x:bP.x,y:bP.y,alpha:bP.alpha}
}}bM+=bK;bO=+E[5];bN=+E[6]}S+=E}bR.end=S;bP=b?bM:e?bR:aJ.findDotsAtSegment(bO,bN,E[1],E[2],E[3],E[4],E[5],E[6],1);
bP.alpha&&(bP={x:bP.x,y:bP.y,alpha:bP.alpha});return bP}};var aL=a2(1),M=a2(),Z=a2(0,1);
bd.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()
}return aL(this.attrs.path)};bd.getPointAtLength=function(b){if(this.type!="path"){return
}return M(this.attrs.path,b)};bd.getSubpath=function(i,e){if(this.type!="path"){return
}if(ar(this.getTotalLength()-e)<"1e-6"){return Z(this.attrs.path,i).end}var b=Z(this.attrs.path,e,1);
return i?Z(b,i).end:b};aJ.easing_formulas={linear:function(b){return b},"<":function(b){return bm(b,3)
},">":function(b){return bm(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bm(b,3)/2
}b-=2;return(bm(b,3)+2)/2},backIn:function(e){var b=1.70158;return e*e*((b+1)*e-b)
},backOut:function(e){e=e-1;var b=1.70158;return e*e*((b+1)*e+b)+1},elastic:function(i){if(i==0||i==1){return i
}var e=0.3,b=e/4;return bm(2,-10*i)*ap.sin((i-b)*(2*aN)/e)+1},bounce:function(E){var e=7.5625,i=2.75,b;
if(E<(1/i)){b=e*E*E}else{if(E<(2/i)){E-=(1.5/i);b=e*E*E+0.75}else{if(E<(2.5/i)){E-=(2.25/i);
b=e*E*E+0.9375}else{E-=(2.625/i);b=e*E*E+0.984375}}}return b}};var Y=[],bv=function(){var bL=+new Date;
for(var bW=0;bW<Y[t];bW++){var b1=Y[bW];if(b1.stop||b1.el.removed){continue}var bI=bL-b1.start,bT=b1.ms,bS=b1.easing,bX=b1.from,bQ=b1.diff,E=b1.to,bP=b1.t,bK=b1.el,bR={},b;
if(bI<bT){var S=bS(bI/bT);for(var bU in bX){if(bX[ah](bU)){switch(an[bU]){case"along":b=S*bT*bQ[bU];
E.back&&(b=E.len-b);var bV=M(E[bU],b);bK.translate(bQ.sx-bQ.x||0,bQ.sy-bQ.y||0);bQ.x=bV.x;
bQ.y=bV.y;bK.translate(bV.x-bQ.sx,bV.y-bQ.sy);E.rot&&bK.rotate(bQ.r+bV.alpha,bV.x,bV.y);
break;case aG:b=+bX[bU]+S*bT*bQ[bU];break;case"colour":b="rgb("+[L(ae(bX[bU].r+S*bT*bQ[bU].r)),L(ae(bX[bU].g+S*bT*bQ[bU].g)),L(ae(bX[bU].b+S*bT*bQ[bU].b))][aX](",")+")";
break;case"path":b=[];for(var bZ=0,bO=bX[bU][t];bZ<bO;bZ++){b[bZ]=[bX[bU][bZ][0]];
for(var bY=1,b0=bX[bU][bZ][t];bY<b0;bY++){b[bZ][bY]=+bX[bU][bZ][bY]+S*bT*bQ[bU][bZ][bY]
}b[bZ]=b[bZ][aX](aI)}b=b[aX](aI);break;case"csv":switch(bU){case"translation":var bN=S*bT*bQ[bU][0]-bP.x,bM=S*bT*bQ[bU][1]-bP.y;
bP.x+=bN;bP.y+=bM;b=bN+aI+bM;break;case"rotation":b=+bX[bU][0]+S*bT*bQ[bU][0];bX[bU][1]&&(b+=","+bX[bU][1]+","+bX[bU][2]);
break;case"scale":b=[+bX[bU][0]+S*bT*bQ[bU][0],+bX[bU][1]+S*bT*bQ[bU][1],(2 in E[bU]?E[bU][2]:aQ),(3 in E[bU]?E[bU][3]:aQ)][aX](aI);
break;case"clip-rect":b=[];bZ=4;while(bZ--){b[bZ]=+bX[bU][bZ]+S*bT*bQ[bU][bZ]}break
}break;default:var bJ=[].concat(bX[bU]);b=[];bZ=bK.paper.customAttributes[bU].length;
while(bZ--){b[bZ]=+bJ[bZ]+S*bT*bQ[bU][bZ]}break}bR[bU]=b}}bK.attr(bR);bK._run&&bK._run.call(bK)
}else{if(E.along){bV=M(E.along,E.len*!E.back);bK.translate(bQ.sx-(bQ.x||0)+bV.x-bQ.sx,bQ.sy-(bQ.y||0)+bV.y-bQ.sy);
E.rot&&bK.rotate(bQ.r+bV.alpha,bV.x,bV.y)}(bP.x||bP.y)&&bK.translate(-bP.x,-bP.y);
E.scale&&(E.scale+=aQ);bK.attr(E);Y.splice(bW--,1)}}aJ.svg&&bK&&bK.paper&&bK.paper.safari();
Y[t]&&setTimeout(bv)},bz=function(b,i,bI,S,E){var e=bI-S;i.timeouts.push(setTimeout(function(){aJ.is(E,"function")&&E.call(i);
i.animate(b,e,b.easing)},S))},L=function(b){return m(bj(b,255),0)},B=function(b,i){if(b==null){return{x:this._.tx,y:this._.ty,toString:D}
}this._.tx+=+b;this._.ty+=+i;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+i+this.attrs.cy});
break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+i+this.attrs.y});
break;case"path":var e=av(this.attrs.path);e[0][1]+=+b;e[0][2]+=+i;this.attr({path:e});
break}return this};bd.animateWith=function(E,bI,b,bK,bJ){for(var e=0,S=Y.length;e<S;
e++){if(Y[e].el.id==E.id){bI.start=Y[e].start}}return this.animate(bI,b,bK,bJ)};bd.animateAlong=aW();
bd.animateAlongBack=aW(1);function aW(b){return function(E,i,e,bI){var S={back:b};
aJ.is(e,"function")?(bI=e):(S.rot=e);E&&E.constructor==aV&&(E=E.attrs.path);E&&(S.along=E);
return this.animate(S,i,bI)}}function aZ(bQ,E,e,bP,bO,bK){var bL=3*E,bN=3*(bP-E)-bL,b=1-bL-bN,bJ=3*e,bM=3*(bO-e)-bJ,bR=1-bJ-bM;
function bI(bS){return((b*bS+bN)*bS+bL)*bS}function i(bS,bU){var bT=S(bS,bU);return((bR*bT+bM)*bT+bJ)*bT
}function S(bS,bZ){var bY,bX,bV,bT,bW,bU;for(bV=bS,bU=0;bU<8;bU++){bT=bI(bV)-bS;if(ar(bT)<bZ){return bV
}bW=(3*b*bV+2*bN)*bV+bL;if(ar(bW)<0.000001){break}bV=bV-bT/bW}bY=0;bX=1;bV=bS;if(bV<bY){return bY
}if(bV>bX){return bX}while(bY<bX){bT=bI(bV);if(ar(bT-bS)<bZ){return bV}if(bS>bT){bY=bV
}else{bX=bV}bV=(bX-bY)/2+bY}return bV}return i(bQ,1/(200*bK))}bd.onAnimation=function(b){this._run=b||0;
return this};bd.animate=function(b3,bT,bS,bI){var e=this;e.timeouts=e.timeouts||[];
if(aJ.is(bS,"function")||!bS){bI=bS||null}if(e.removed){bI&&bI.call(e);return e}var bX={},E={},bJ=false,bO={};
for(var bU in b3){if(b3[ah](bU)){if(an[ah](bU)||e.paper.customAttributes[ah](bU)){bJ=true;
bX[bU]=e.attr(bU);(bX[bU]==null)&&(bX[bU]=q[bU]);E[bU]=b3[bU];switch(an[bU]){case"along":var b1=aL(b3[bU]);
var bV=M(b3[bU],b1*!!b3.back);var bK=e.getBBox();bO[bU]=b1/bT;bO.tx=bK.x;bO.ty=bK.y;
bO.sx=bV.x;bO.sy=bV.y;E.rot=b3.rot;E.back=b3.back;E.len=b1;b3.rot&&(bO.r=ak(e.rotate())||0);
break;case aG:bO[bU]=(E[bU]-bX[bU])/bT;break;case"colour":bX[bU]=aJ.getRGB(bX[bU]);
var bW=aJ.getRGB(E[bU]);bO[bU]={r:(bW.r-bX[bU].r)/bT,g:(bW.g-bX[bU].g)/bT,b:(bW.b-bX[bU].b)/bT};
break;case"path":var bL=W(bX[bU],E[bU]);bX[bU]=bL[0];var bQ=bL[1];bO[bU]=[];for(var b0=0,bN=bX[bU][t];
b0<bN;b0++){bO[bU][b0]=[0];for(var bZ=1,b2=bX[bU][b0][t];bZ<b2;bZ++){bO[bU][b0][bZ]=(bQ[b0][bZ]-bX[bU][b0][bZ])/bT
}}break;case"csv":var b=bD(b3[bU])[J](a),bM=bD(bX[bU])[J](a);switch(bU){case"translation":bX[bU]=[0,0];
bO[bU]=[b[0]/bT,b[1]/bT];break;case"rotation":bX[bU]=(bM[1]==b[1]&&bM[2]==b[2])?bM:[0,b[1],b[2]];
bO[bU]=[(b[0]-bX[bU][0])/bT,0,0];break;case"scale":b3[bU]=b;bX[bU]=bD(bX[bU])[J](a);
bO[bU]=[(b[0]-bX[bU][0])/bT,(b[1]-bX[bU][1])/bT,0,0];break;case"clip-rect":bX[bU]=bD(bX[bU])[J](a);
bO[bU]=[];b0=4;while(b0--){bO[bU][b0]=(b[b0]-bX[bU][b0])/bT}break}E[bU]=b;break;default:b=[].concat(b3[bU]);
bM=[].concat(bX[bU]);bO[bU]=[];b0=e.paper.customAttributes[bU][t];while(b0--){bO[bU][b0]=((b[b0]||0)-(bM[b0]||0))/bT
}break}}}}if(!bJ){var bR=[],S;for(var b4 in b3){if(b3[ah](b4)&&bg.test(b4)){bU={value:b3[b4]};
b4=="from"&&(b4=0);b4=="to"&&(b4=100);bU.key=U(b4,10);bR.push(bU)}}bR.sort(bn);if(bR[0].key){bR.unshift({key:0,value:e.attrs})
}for(b0=0,bN=bR[t];b0<bN;b0++){bz(bR[b0].value,e,bT/100*bR[b0].key,bT/100*(bR[b0-1]&&bR[b0-1].key||0),bR[b0-1]&&bR[b0-1].value.callback)
}S=bR[bR[t]-1].value.callback;if(S){e.timeouts.push(setTimeout(function(){S.call(e)
},bT))}}else{var bY=aJ.easing_formulas[bS];if(!bY){bY=bD(bS).match(c);if(bY&&bY[t]==5){var bP=bY;
bY=function(i){return aZ(i,+bP[1],+bP[2],+bP[3],+bP[4],bT)}}else{bY=function(i){return i
}}}Y.push({start:b3.start||+new Date,ms:bT,easing:bY,from:bX,diff:bO,to:E,el:e,t:{x:0,y:0}});
aJ.is(bI,"function")&&(e._ac=setTimeout(function(){bI.call(e)},bT));Y[t]==1&&setTimeout(bv)
}return this};bd.stop=function(){for(var b=0;b<Y.length;b++){Y[b].el.id==this.id&&Y.splice(b--,1)
}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])
}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bd.translate=function(b,e){return this.attr({translation:b+" "+e})
};bd[a1]=function(){return"Rapha\xebl\u2019s object"};aJ.ae=Y;var ai=function(b){this.items=[];
this[t]=0;this.type="set";if(b){for(var e=0,E=b[t];e<E;e++){if(b[e]&&(b[e].constructor==aV||b[e].constructor==ai)){this[this.items[t]]=this.items[this.items[t]]=b[e];
this[t]++}}}};ai[bF][k]=function(){var S,b;for(var e=0,E=arguments[t];e<E;e++){S=arguments[e];
if(S&&(S.constructor==aV||S.constructor==ai)){b=this.items[t];this[b]=this.items[b]=S;
this[t]++}}return this};ai[bF].pop=function(){delete this[this[t]--];return this.items.pop()
};for(var I in bd){if(bd[ah](I)){ai[bF][I]=(function(b){return function(){for(var e=0,E=this.items[t];
e<E;e++){this.items[e][b][bC](this.items[e],arguments)}return this}})(I)}}ai[bF].attr=function(e,bJ){if(e&&aJ.is(e,a8)&&aJ.is(e[0],"object")){for(var b=0,bI=e[t];
b<bI;b++){this.items[b].attr(e[b])}}else{for(var E=0,S=this.items[t];E<S;E++){this.items[E].attr(e,bJ)
}}return this};ai[bF].animate=function(e,b,bJ,bL){(aJ.is(bJ,"function")||!bJ)&&(bL=bJ||null);
var bI=this.items[t],E=bI,bM,bK=this,S;bL&&(S=function(){!--bI&&bL.call(bK)});bJ=aJ.is(bJ,ag)?bJ:S;
bM=this.items[--E].animate(e,b,bJ,S);while(E--){this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(bM,e,b,bJ,S)
}return this};ai[bF].insertAfter=function(e){var b=this.items[t];while(b--){this.items[b].insertAfter(e)
}return this};ai[bF].getBBox=function(){var b=[],bJ=[],e=[],S=[];for(var E=this.items[t];
E--;){var bI=this.items[E].getBBox();b[k](bI.x);bJ[k](bI.y);e[k](bI.x+bI.width);S[k](bI.y+bI.height)
}b=bj[bC](0,b);bJ=bj[bC](0,bJ);return{x:b,y:bJ,width:m[bC](0,e)-b,height:m[bC](0,S)-bJ}
};ai[bF].clone=function(E){E=new ai;for(var b=0,e=this.items[t];b<e;b++){E[k](this.items[b].clone())
}return E};aJ.registerFont=function(e){if(!e.face){return e}this.fonts=this.fonts||{};
var E={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var bJ in e.face){if(e.face[ah](bJ)){E.face[bJ]=e.face[bJ]
}}if(this.fonts[i]){this.fonts[i][k](E)}else{this.fonts[i]=[E]}if(!e.svg){E.face["units-per-em"]=U(e.face["units-per-em"],10);
for(var S in e.glyphs){if(e.glyphs[ah](S)){var bI=e.glyphs[S];E.glyphs[S]={w:bI.w,k:{},d:bI.d&&"M"+bI.d[bt](/[mlcxtrv]/g,function(bK){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bK]||"M"
})+"z"};if(bI.k){for(var b in bI.k){if(bI[ah](b)){E.glyphs[S].k[b]=bI.k[b]}}}}}}return e
};a0.getFont=function(bL,bM,e,S){S=S||"normal";e=e||"normal";bM=+bM||{normal:400,bold:700,lighter:300,bolder:800}[bM]||400;
if(!aJ.fonts){return}var bI=aJ.fonts[bL];if(!bI){var E=new RegExp("(^|\\s)"+bL[bt](/[^\w\d\s+!~.:_-]/g,aQ)+"(\\s|$)","i");
for(var b in aJ.fonts){if(aJ.fonts[ah](b)){if(E.test(b)){bI=aJ.fonts[b];break}}}}var bJ;
if(bI){for(var bK=0,bN=bI[t];bK<bN;bK++){bJ=bI[bK];if(bJ.face["font-weight"]==bM&&(bJ.face["font-style"]==e||!bJ.face["font-style"])&&bJ.face["font-stretch"]==S){break
}}}return bJ};a0.print=function(bI,S,b,bL,bM,bV,e){bV=bV||"middle";e=m(bj(e||0,1),-1);
var bR=this.set(),bU=bD(b)[J](aQ),bS=0,bP=aQ,bW;aJ.is(bL,b)&&(bL=this.getFont(bL));
if(bL){bW=(bM||16)/bL.face["units-per-em"];var E=bL.face.bbox.split(a),bK=+E[0],bN=+E[1]+(bV=="baseline"?E[3]-E[1]+(+bL.face.descent):(E[3]-E[1])/2);
for(var bQ=0,bJ=bU[t];bQ<bJ;bQ++){var bO=bQ&&bL.glyphs[bU[bQ-1]]||{},bT=bL.glyphs[bU[bQ]];
bS+=bQ?(bO.w||bL.w)+(bO.k&&bO.k[bU[bQ]]||0)+(bL.w*e):0;bT&&bT.d&&bR[k](this.path(bT.d).attr({fill:"#000",stroke:"none",translation:[bS,0]}))
}bR.scale(bW,bW,bK,bN).translate(bI-bK,S-bN)}return bR};aJ.format=function(e,i){var b=aJ.is(i,a8)?[0][bx](i):arguments;
e&&aJ.is(e,ag)&&b[t]-1&&(e=e[bt](bo,function(S,E){return b[++E]==null?aQ:b[E]}));
return e||aQ};aJ.ninja=function(){s.was?(aR.Raphael=s.is):delete Raphael;return aJ
};aJ.el=bd;aJ.st=ai[bF];s.was?(aR.Raphael=aJ):(Raphael=aJ)})();
/*
 * Color Picker 0.1.0 - Raphael plugin
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Based on Color Wheel (http://jweir.github.com/colorwheel) by John Weir (http://famedriver.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
sc_require("raphael");
(function(a){a.colorpicker=function(h,l,j,k,i){return new b(h,l,j,k,i)};a.fn.colorPickerIcon=function(h,o,m){var k=f*m*2/Math.min(m/8,4);
var j=f/2-f*2/k*1.5,n=["M",h,o-m,"A",m,m,0,0,1,m*Math.cos(j)+h,o-m*Math.sin(j),"L",h,o,"z"].join();
for(var l=0;l<k;l++){this.path(n).attr({stroke:"none",fill:"hsb("+(k-l)*(360/k)+", 100, 100)",rotation:[90+(360/k)*l,h,o]})
}return this.circle(h,o,m).attr({fill:"r#fff-#fff","fill-opacity":0,"stroke-width":Math.round(m*0.03),stroke:"#fff"})
};var f=Math.PI;function g(h,i){return(h<0)*180+Math.atan(-i/-h)*180/f}var e=document,c=window,b=function(q,o,E,j,i){E=E||200;
var p=3*E/200,v=E/200,w=1.6180339887,K=E/20,n=E/2,C=2*E/200,F=E+K*2+C*3,z=this,u=1,k=1,G=1,A=E-(K*4),D=i?a(i,E,F):a(q,o,E,F),l=A/6+K*2+C,m=A*2/3-C*2;
v<1&&(v=1);p<1&&(p=1);D.colorPickerIcon(n,n,n-C);z.cursor=D.set();z.cursor.push(D.circle(n,n,K/2).attr({stroke:"#000",opacity:0.5,"stroke-width":p}));
z.cursor.push(z.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":v}));
z.disc=D.circle(n,n,n-C).attr({fill:"#000","fill-opacity":0,stroke:"none",cursor:"crosshair"});
var J=z.disc.node.style;J.unselectable="on";J.MozUserSelect="none";J.WebkitUserSelect="none";
var I=K*2+2;z.brect=D.rect(C+I/w/2,E+C*2,E-C*2-I/w,I-C*2).attr({stroke:"#fff",fill:"180-#fff-#000"});
z.cursorb=D.set();z.cursorb.push(D.rect(E-C-I/w,E+C,~~(I/w),I,p).attr({stroke:"#000",opacity:0.5,"stroke-width":p}));
z.cursorb.push(z.cursorb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":v}));
z.btop=z.brect.clone().attr({stroke:"#000",fill:"#000",opacity:0});J=z.btop.node.style;
J.unselectable="on";J.MozUserSelect="none";J.WebkitUserSelect="none";z.bwidth=~~(I/w)/2;
z.minx=C+z.bwidth;z.maxx=E-I/w-C+z.bwidth;z.H=z.S=z.B=1;z.padding=C;z.raphael=D;z.size2=n;
z.size20=K;z.x=q;z.y=o;z.disc.drag(function(t,s,h,B){z.docOnMove(t,s,h,B)},function(h,B){var s=e.documentElement.scrollTop||e.body.scrollTop,t=e.documentElement.scrollLeft||e.body.scrollLeft;
z.hsOnTheMove=true;z.setHS(h+t-z.x,B+s-z.y)},function(){z.hsOnTheMove=false});z.btop.drag(function(t,s,h,B){z.docOnMove(t,s,h,B)
},function(h,t){var s=e.documentElement.scrollLeft||e.body.scrollLeft;z.bOnTheMove=true;
z.setB(h+s-z.x)},function(){z.bOnTheMove=false});z.color(j||"#fff");this.onchanged&&this.onchanged(this.color())
};b.prototype.setB=function(h){h<this.minx&&(h=this.minx);h>this.maxx&&(h=this.maxx);
this.cursorb.attr({x:h-this.bwidth});this.B=(h-this.minx)/(this.maxx-this.minx);this.onchange&&this.onchange(this.color())
};b.prototype.setHS=function(h,n){var m=h-this.size2,l=n-this.size2,i=this.size2-this.size20/2-this.padding,k=g(m,l),j=k*f/180;
isNaN(k)&&(k=0);if(m*m+l*l>i*i){h=i*Math.cos(j)+this.size2;n=i*Math.sin(j)+this.size2
}this.cursor.attr({cx:h,cy:n});this.H=(1-k/360)%1;this.S=Math.min((m*m+l*l)/i/i,1);
this.brect.attr({fill:"180-hsl("+[this.H,this.S]+",1)-#000"});this.onchange&&this.onchange(this.color())
};b.prototype.docOnMove=function(j,i,h,m){var k=e.documentElement.scrollTop||e.body.scrollTop,l=e.documentElement.scrollLeft||e.body.scrollLeft;
if(this.hsOnTheMove){this.setHS(h+l-this.x,m+k-this.y)}if(this.bOnTheMove){this.setB(h+l-this.x)
}};b.prototype.remove=function(){this.raphael.remove();this.color=function(){return false
}};b.prototype.color=function(i){if(i){i=a.getRGB(i);var l=i.hex;i=a.rgb2hsb(i.r,i.g,i.b);
m=i.h*360;this.H=i.h;this.S=i.s;this.B=i.b;this.cursorb.attr({x:this.B*(this.maxx-this.minx)+this.minx-this.bwidth});
this.brect.attr({fill:"180-hsl("+[this.H,this.S]+",1)-#000"});var m=(1-this.H)*360,k=m*f/180,j=(this.size2-this.size20/2-this.padding)*this.S,h=Math.cos(k)*j+this.size2,n=Math.sin(k)*j+this.size2;
this.cursor.attr({cx:h,cy:n});return this}else{return a.hsb2rgb(this.H,this.S,this.B).hex
}}})(window.Raphael);sc_require("color_picker/colorwheel");(function(a){a.colorwheel=function(i,m,k,l,j){return new b(i,m,k,l,j)
};var g=Math.PI;function h(i,j){return(i<0)*180+Math.atan(-j/-i)*180/g}var f=document,e=window;
var c=(function(){if(f.addEventListener){return function(m,k,j,i){var l=function(n){return j.call(i,n)
};m.addEventListener(k,l,false);return function(){m.removeEventListener(k,l,false);
return true}}}else{if(f.attachEvent){return function(n,l,k,j){var m=function(o){return k.call(j,o||e.event)
};n.attachEvent("on"+l,m);var i=function(){n.detachEvent("on"+l,m);return true};return i
}}}})();var b=function(v,q,G,k,j){G=G||200;var u=3*G/200,z=G/200,A=1.6180339887,K=g*G/5,P=G/20,p=G/2,E=2*G/200,C=this;
var w=1,l=1,I=1,D=G-(P*4);var F=j?a(j,G,G):a(v,q,G,G),n=D/6+P*2+E,o=D*2/3-E*2;z<1&&(z=1);
u<1&&(u=1);var O=g/2-g*2/K*1.3,m=p-E,N=p-E-P*2,J=["M",p,E,"A",m,m,0,0,1,m*Math.cos(O)+m+E,m-m*Math.sin(O)+E,"L",N*Math.cos(O)+m+E,m-N*Math.sin(O)+E,"A",N,N,0,0,0,p,E+P*2,"z"].join();
for(var L=0;L<K;L++){F.path(J).attr({stroke:"none",fill:"hsb("+L*(255/K)+", 255, 200)",rotation:[(360/K)*L,p,p]})
}F.path(["M",p,E,"A",m,m,0,1,1,p-1,E,"l1,0","M",p,E+P*2,"A",N,N,0,1,1,p-1,E+P*2,"l1,0"]).attr({"stroke-width":u,stroke:"#fff"});
C.cursorhsb=F.set();var M=P*2+2;C.cursorhsb.push(F.rect(p-M/A/2,E-1,M/A,M,3*G/200).attr({stroke:"#000",opacity:0.5,"stroke-width":u}));
C.cursorhsb.push(C.cursorhsb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":z}));
C.ring=F.path(["M",p,E,"A",m,m,0,1,1,p-1,E,"l1,0M",p,E+P*2,"A",N,N,0,1,1,p-1,E+P*2,"l1,0"]).attr({fill:"#000",opacity:0,stroke:"none"});
C.main=F.rect(n,n,o,o).attr({stroke:"none",fill:"#f00",opacity:1});C.main.clone().attr({stroke:"none",fill:"0-#fff-#fff",opacity:0});
C.square=F.rect(n-1,n-1,o+2,o+2).attr({r:2,stroke:"#fff","stroke-width":u,fill:"90-#000-#000",opacity:0,cursor:"crosshair"});
C.cursor=F.set();C.cursor.push(F.circle(p,p,P/2).attr({stroke:"#000",opacity:0.5,"stroke-width":u}));
C.cursor.push(C.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":z}));
C.H=C.S=C.B=1;C.raphael=F;C.size2=p;C.wh=o;C.x=v;C.xy=n;C.y=q;C.hsbon=c(C.ring.node,"mousedown",function(i){this.hsbOnTheMove=true;
this.setH(i.clientX-this.x-this.size2,i.clientY-this.y-this.size2);this.docmove=c(f,"mousemove",this.docOnMove,this);
this.docup=c(f,"mouseup",this.docOnUp,this)},C);C.clron=c(C.square.node,"mousedown",function(i){this.clrOnTheMove=true;
this.setSB(i.clientX-this.x,i.clientY-this.y);this.docmove=c(f,"mousemove",this.docOnMove,this);
this.docup=c(f,"mouseup",this.docOnUp,this)},C);C.winunload=c(e,"unload",function(){this.hsbon();
this.clron();this.docmove&&this.docmove();this.docup&&this.docup();this.winunload()
},C);C.color(k||"#f00");this.onchanged&&this.onchanged(this.color())};b.prototype.setH=function(i,l){var k=h(i,l),j=k*g/180;
this.cursorhsb.rotate(k+90,this.size2,this.size2);this.H=(k+90)/360;this.main.attr({fill:"hsb("+this.H+",1,1)"});
this.onchange&&this.onchange(this.color())};b.prototype.setSB=function(i,j){i<this.size2-this.wh/2&&(i=this.size2-this.wh/2);
i>this.size2+this.wh/2&&(i=this.size2+this.wh/2);j<this.size2-this.wh/2&&(j=this.size2-this.wh/2);
j>this.size2+this.wh/2&&(j=this.size2+this.wh/2);this.cursor.attr({cx:i,cy:j});this.B=1-(j-this.xy)/this.wh;
this.S=(i-this.xy)/this.wh;this.onchange&&this.onchange(this.color())};b.prototype.docOnMove=function(i){if(this.hsbOnTheMove){this.setH(i.clientX-this.x-this.size2,i.clientY-this.y-this.size2)
}if(this.clrOnTheMove){this.setSB(i.clientX-this.x,i.clientY-this.y)}i.preventDefault&&i.preventDefault();
i.returnValue=false;return false};b.prototype.docOnUp=function(i){this.hsbOnTheMove=this.clrOnTheMove=false;
if(this.docmove){this.docmove()}delete this.docmove;if(this.docup){this.docup()}delete this.docup;
this.onchanged&&this.onchanged(this.color())};b.prototype.remove=function(){this.raphael.remove();
this.color=function(){return false}};b.prototype.color=function(j){if(j){j=a.getRGB(j);
j=a.rgb2hsb(j.r,j.g,j.b);var k=j.h*360;this.H=j.h;this.S=j.s;this.B=j.b;this.cursorhsb.rotate(k,this.size2,this.size2);
this.main.attr({fill:"hsb("+this.H+",1,1)"});var i=this.S*this.wh+this.xy,l=(1-this.B)*this.wh+this.xy;
this.cursor.attr({cx:i,cy:l});return this}else{return a.hsb2rgb(this.H,this.S,this.B).hex
}}})(window.Raphael);sc_require("raphael");(function(){Raphael.fn.g=Raphael.fn.g||{};
Raphael.fn.g.markers={disc:"disc",o:"disc",flower:"flower",f:"flower",diamond:"diamond",d:"diamond",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"};
Raphael.fn.g.shim={stroke:"none",fill:"#000","fill-opacity":0};Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"};
Raphael.fn.g.colors=[];var b=[0.6,0.2,0.05,0.1333,0.75,0];for(var a=0;a<10;a++){if(a<b.length){Raphael.fn.g.colors.push("hsb("+b[a]+", .75, .75)")
}else{Raphael.fn.g.colors.push("hsb("+b[a-b.length]+", 1, .5)")}}Raphael.fn.g.text=function(c,f,e){return this.text(c,f,e).attr(this.g.txtattr)
};Raphael.fn.g.labelise=function(c,f,e){if(c){return(c+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(g,i,h){if(i){return(+f).toFixed(i.replace(/^#+\.?/g,"").length)
}if(h){return(f*100/e).toFixed(h.replace(/^%+\.?/g,"").length)+"%"}})}else{return(+f).toFixed(0)
}};Raphael.fn.g.finger=function(j,i,e,k,f,g,h){if((f&&!k)||(!f&&!e)){return h?"":this.path()
}g={square:"square",sharp:"sharp",soft:"soft"}[g]||"round";var m;k=Math.round(k);
e=Math.round(e);j=Math.round(j);i=Math.round(i);switch(g){case"round":if(!f){var c=Math.floor(k/2);
if(e<c){c=e;m=["M",j+0.5,i+0.5-Math.floor(k/2),"l",0,0,"a",c,Math.floor(k/2),0,0,1,0,k,"l",0,0,"z"]
}else{m=["M",j+0.5,i+0.5-c,"l",e-c,0,"a",c,c,0,1,1,0,k,"l",c-e,0,"z"]}}else{var c=Math.floor(e/2);
if(k<c){c=k;m=["M",j-Math.floor(e/2),i,"l",0,0,"a",Math.floor(e/2),c,0,0,1,e,0,"l",0,0,"z"]
}else{m=["M",j-c,i,"l",0,c-k,"a",c,c,0,1,1,e,0,"l",0,k-c,"z"]}}break;case"sharp":if(!f){var l=Math.floor(k/2);
m=["M",j,i+l,"l",0,-k,Math.max(e-l,0),0,Math.min(l,e),l,-Math.min(l,e),l+(l*2<k),"z"]
}else{var l=Math.floor(e/2);m=["M",j+l,i,"l",-e,0,0,-Math.max(k-l,0),l,-Math.min(l,k),l,Math.min(l,k),l,"z"]
}break;case"square":if(!f){m=["M",j,i+Math.floor(k/2),"l",0,-k,e,0,0,k,"z"]}else{m=["M",j+Math.floor(e/2),i,"l",1-e,0,0,-k,e-1,0,"z"]
}break;case"soft":var c;if(!f){c=Math.min(e,Math.round(k/5));m=["M",j+0.5,i+0.5-Math.floor(k/2),"l",e-c,0,"a",c,c,0,0,1,c,c,"l",0,k-c*2,"a",c,c,0,0,1,-c,c,"l",c-e,0,"z"]
}else{c=Math.min(Math.round(e/5),k);m=["M",j-Math.floor(e/2),i,"l",0,c-k,"a",c,c,0,0,1,c,-c,"l",e-2*c,0,"a",c,c,0,0,1,c,c,"l",0,k-c,"z"]
}}if(h){return m.join(",")}else{return this.path(m)}};Raphael.fn.g.disc=function(c,f,e){return this.circle(c,f,e)
};Raphael.fn.g.line=function(c,f,e){return this.rect(c-e,f-e/5,2*e,2*e/5)};Raphael.fn.g.square=function(c,f,e){e=e*0.7;
return this.rect(c-e,f-e,2*e,2*e)};Raphael.fn.g.triangle=function(c,f,e){e*=1.75;
return this.path("M".concat(c,",",f,"m0-",e*0.58,"l",e*0.5,",",e*0.87,"-",e,",0z"))
};Raphael.fn.g.diamond=function(c,f,e){return this.path(["M",c,f-e,"l",e,e,-e,e,-e,-e,e,-e,"z"])
};Raphael.fn.g.flower=function(g,f,c,e){c=c*1.25;var l=c,k=l*0.5;e=+e<3||!e?5:e;var m=["M",g,f+k,"Q"],j;
for(var h=1;h<e*2+1;h++){j=h%2?l:k;m=m.concat([+(g+j*Math.sin(h*Math.PI/e)).toFixed(3),+(f+j*Math.cos(h*Math.PI/e)).toFixed(3)])
}m.push("z");return this.path(m.join(","))};Raphael.fn.g.star=function(c,k,j,e){e=e||j*0.5;
var h=["M",c,k+e,"L"],g;for(var f=1;f<10;f++){g=f%2?j:e;h=h.concat([(c+g*Math.sin(f*Math.PI*0.2)).toFixed(3),(k+g*Math.cos(f*Math.PI*0.2)).toFixed(3)])
}h.push("z");return this.path(h.join(","))};Raphael.fn.g.cross=function(c,f,e){e=e/2.5;
return this.path("M".concat(c-e,",",f,"l",[-e,-e,e,-e,e,e,e,-e,e,e,-e,e,e,e,-e,e,-e,-e,-e,e,-e,-e,"z"]))
};Raphael.fn.g.plus=function(c,f,e){e=e/2;return this.path("M".concat(c-e/2,",",f-e/2,"l",[0,-e,e,0,0,e,e,0,0,e,-e,0,0,e,-e,0,0,-e,-e,0,0,-e,"z"]))
};Raphael.fn.g.arrow=function(c,f,e){return this.path("M".concat(c-e*0.7,",",f-e*0.4,"l",[e*0.6,0,0,-e*0.4,e,e*0.8,-e,e*0.8,0,-e*0.4,-e*0.6,0],"z"))
};Raphael.fn.g.tag=function(c,k,j,i,g){i=i||0;g=g==null?5:g;j=j==null?"$9.99":j;var f=0.5522*g,e=this.set(),h=3;
e.push(this.path().attr({fill:"#000",stroke:"none"}));e.push(this.text(c,k,j).attr(this.g.txtattr).attr({fill:"#fff"}));
e.update=function(){this.rotate(0,c,k);var m=this[1].getBBox();if(m.height>=g*2){this[0].attr({path:["M",c,k+g,"a",g,g,0,1,1,0,-g*2,g,g,0,1,1,0,g*2,"m",0,-g*2-h,"a",g+h,g+h,0,1,0,0,(g+h)*2,"L",c+g+h,k+m.height/2+h,"l",m.width+2*h,0,0,-m.height-2*h,-m.width-2*h,0,"L",c,k-g-h].join(",")})
}else{var l=Math.sqrt(Math.pow(g+h,2)-Math.pow(m.height/2+h,2));this[0].attr({path:["M",c,k+g,"c",-f,0,-g,f-g,-g,-g,0,-f,g-f,-g,g,-g,f,0,g,g-f,g,g,0,f,f-g,g,-g,g,"M",c+l,k-m.height/2-h,"a",g+h,g+h,0,1,0,0,m.height+2*h,"l",g+h-l+m.width+2*h,0,0,-m.height-2*h,"L",c+l,k-m.height/2-h].join(",")})
}this[1].attr({x:c+g+h+m.width/2,y:k});i=(360-i)%360;this.rotate(i,c,k);i>90&&i<270&&this[1].attr({x:c-g-h-m.width/2,y:k,rotation:[180+i,c,k]});
return this};e.update();return e};Raphael.fn.g.popupit=function(j,i,k,e,q){e=e==null?2:e;
q=q||5;j=Math.round(j)+0.5;i=Math.round(i)+0.5;var g=k.getBBox(),l=Math.round(g.width/2),f=Math.round(g.height/2),o=[0,l+q*2,0,-l-q*2],m=[-f*2-q*3,-f-q,0,-f-q],c=["M",j-o[e],i-m[e],"l",-q,(e==2)*-q,-Math.max(l-q,0),0,"a",q,q,0,0,1,-q,-q,"l",0,-Math.max(f-q,0),(e==3)*-q,-q,(e==3)*q,-q,0,-Math.max(f-q,0),"a",q,q,0,0,1,q,-q,"l",Math.max(l-q,0),0,q,!e*-q,q,!e*q,Math.max(l-q,0),0,"a",q,q,0,0,1,q,q,"l",0,Math.max(f-q,0),(e==1)*q,q,(e==1)*-q,q,0,Math.max(f-q,0),"a",q,q,0,0,1,-q,q,"l",-Math.max(l-q,0),0,"z"].join(","),n=[{x:j,y:i+q*2+f},{x:j-q*2-l,y:i},{x:j,y:i-q*2-f},{x:j+q*2+l,y:i}][e];
k.translate(n.x-l-g.x,n.y-f-g.y);return this.path(c).attr({fill:"#000",stroke:"none"}).insertBefore(k.node?k:k[0])
};Raphael.fn.g.popup=function(c,j,i,e,g){e=e==null?2:e;g=g||5;i=i||"$9.99";var f=this.set(),h=3;
f.push(this.path().attr({fill:"#000",stroke:"none"}));f.push(this.text(c,j,i).attr(this.g.txtattr).attr({fill:"#fff"}));
f.update=function(m,l,n){m=m||c;l=l||j;var q=this[1].getBBox(),s=q.width/2,o=q.height/2,v=[0,s+g*2,0,-s-g*2],t=[-o*2-g*3,-o-g,0,-o-g],k=["M",m-v[e],l-t[e],"l",-g,(e==2)*-g,-Math.max(s-g,0),0,"a",g,g,0,0,1,-g,-g,"l",0,-Math.max(o-g,0),(e==3)*-g,-g,(e==3)*g,-g,0,-Math.max(o-g,0),"a",g,g,0,0,1,g,-g,"l",Math.max(s-g,0),0,g,!e*-g,g,!e*g,Math.max(s-g,0),0,"a",g,g,0,0,1,g,g,"l",0,Math.max(o-g,0),(e==1)*g,g,(e==1)*-g,g,0,Math.max(o-g,0),"a",g,g,0,0,1,-g,g,"l",-Math.max(s-g,0),0,"z"].join(","),u=[{x:m,y:l+g*2+o},{x:m-g*2-s,y:l},{x:m,y:l-g*2-o},{x:m+g*2+s,y:l}][e];
if(n){this[0].animate({path:k},500,">");this[1].animate(u,500,">")}else{this[0].attr({path:k});
this[1].attr(u)}return this};return f.update(c,j)};Raphael.fn.g.flag=function(c,i,h,g){g=g||0;
h=h||"$9.99";var e=this.set(),f=3;e.push(this.path().attr({fill:"#000",stroke:"none"}));
e.push(this.text(c,i,h).attr(this.g.txtattr).attr({fill:"#fff"}));e.update=function(j,m){this.rotate(0,j,m);
var l=this[1].getBBox(),k=l.height/2;this[0].attr({path:["M",j,m,"l",k+f,-k-f,l.width+2*f,0,0,l.height+2*f,-l.width-2*f,0,"z"].join(",")});
this[1].attr({x:j+k+f+l.width/2,y:m});g=360-g;this.rotate(g,j,m);g>90&&g<270&&this[1].attr({x:j-r-f-l.width/2,y:m,rotation:[180+g,j,m]});
return this};return e.update(c,i)};Raphael.fn.g.label=function(c,g,f){var e=this.set();
e.push(this.rect(c,g,10,10).attr({stroke:"none",fill:"#000"}));e.push(this.text(c,g,f).attr(this.g.txtattr).attr({fill:"#fff"}));
e.update=function(){var i=this[1].getBBox(),h=Math.min(i.width+10,i.height+10)/2;
this[0].attr({x:i.x-h/2,y:i.y-h/2,width:i.width+h,height:i.height+h,r:h})};e.update();
return e};Raphael.fn.g.labelit=function(f){var e=f.getBBox(),c=Math.min(20,e.width+10,e.height+10)/2;
return this.rect(e.x-c/2,e.y-c/2,e.width+c,e.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(f[0])
};Raphael.fn.g.drop=function(c,i,h,f,g){f=f||30;g=g||0;var e=this.set();e.push(this.path(["M",c,i,"l",f,0,"A",f*0.4,f*0.4,0,1,0,c+f*0.7,i-f*0.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-g,c,i]}));
g=(g+90)*Math.PI/180;e.push(this.text(c+f*Math.sin(g),i+f*Math.cos(g),h).attr(this.g.txtattr).attr({"font-size":f*12/30,fill:"#fff"}));
e.drop=e[0];e.text=e[1];return e};Raphael.fn.g.blob=function(e,k,j,i,g){i=(+i+1?i:45)+90;
g=g||12;var c=Math.PI/180,h=g*12/12;var f=this.set();f.push(this.path().attr({fill:"#000",stroke:"none"}));
f.push(this.text(e+g*Math.sin((i)*c),k+g*Math.cos((i)*c)-h/2,j).attr(this.g.txtattr).attr({"font-size":h,fill:"#fff"}));
f.update=function(q,p,v){q=q||e;p=p||k;var y=this[1].getBBox(),B=Math.max(y.width+h,g*25/12),x=Math.max(y.height+h,g*25/12),m=q+g*Math.sin((i-22.5)*c),z=p+g*Math.cos((i-22.5)*c),o=q+g*Math.sin((i+22.5)*c),A=p+g*Math.cos((i+22.5)*c),D=(o-m)/2,C=(A-z)/2,n=B/2,l=x/2,u=-Math.sqrt(Math.abs(n*n*l*l-n*n*C*C-l*l*D*D)/(n*n*C*C+l*l*D*D)),t=u*n*C/l+(o+m)/2,s=u*-l*D/n+(A+z)/2;
if(v){this.animate({x:t,y:s,path:["M",e,k,"L",o,A,"A",n,l,0,1,1,m,z,"z"].join(",")},500,">")
}else{this.attr({x:t,y:s,path:["M",e,k,"L",o,A,"A",n,l,0,1,1,m,z,"z"].join(",")})
}return this};f.update(e,k);return f};Raphael.fn.g.colorValue=function(g,f,e,c){return"hsb("+[Math.min((1-g/f)*0.4,1),e||0.75,c||0.75]+")"
};Raphael.fn.g.snapEnds=function(l,m,k){var h=l,n=m;if(h==n){return{from:h,to:n,power:0}
}function o(f){return Math.abs(f-0.5)<0.25?Math.floor(f)+0.5:Math.round(f)}var j=(n-h)/k,c=Math.floor(j),g=c,e=0;
if(c){while(g){e--;g=Math.floor(j*Math.pow(10,e))/Math.pow(10,e)}e++}else{while(!c){e=e||1;
c=Math.floor(j*Math.pow(10,e))/Math.pow(10,e);e++}e&&e--}var n=o(m*Math.pow(10,e))/Math.pow(10,e);
if(n<m){n=o((m+0.5)*Math.pow(10,e))/Math.pow(10,e)}var h=o((l-(e>0?0:0.5))*Math.pow(10,e))/Math.pow(10,e);
return{from:h,to:n,power:e}};Raphael.fn.g.axis=function(s,q,m,E,h,H,k,J,l,c){c=c==null?2:c;
l=l||"t";H=H||10;var D=l=="|"||l==" "?["M",s+0.5,q,"l",0,0.001]:k==1||k==3?["M",s+0.5,q,"l",0,-m]:["M",s,q+0.5,"l",m,0],v=this.g.snapEnds(E,h,H),I=v.from,z=v.to,G=v.power,F=0,A=this.set();
d=(z-I)/H;var p=I,o=G>0?G:0;u=m/H;if(+k==1||+k==3){var e=q,w=(k-1?1:-1)*(c+3+!!(k-1));
while(e>=q-m){l!="-"&&l!=" "&&(D=D.concat(["M",s-(l=="+"||l=="|"?c:!(k-1)*c*2),e+0.5,"l",c*2+1,0]));
A.push(this.text(s+w,e,(J&&J[F++])||(Math.round(p)==p?p:+p.toFixed(o))).attr(this.g.txtattr).attr({"text-anchor":k-1?"start":"end"}));
p+=d;e-=u}if(Math.round(e+u-(q-m))){l!="-"&&l!=" "&&(D=D.concat(["M",s-(l=="+"||l=="|"?c:!(k-1)*c*2),q-m+0.5,"l",c*2+1,0]));
A.push(this.text(s+w,q-m,(J&&J[F])||(Math.round(p)==p?p:+p.toFixed(o))).attr(this.g.txtattr).attr({"text-anchor":k-1?"start":"end"}))
}}else{var g=s,p=I,o=G>0?G:0,w=(k?-1:1)*(c+9+!k),u=m/H,B=0,C=0;while(g<=s+m){l!="-"&&l!=" "&&(D=D.concat(["M",g+0.5,q-(l=="+"?c:!!k*c*2),"l",0,c*2+1]));
A.push(B=this.text(g,q+w,(J&&J[F++])||(Math.round(p)==p?p:+p.toFixed(o))).attr(this.g.txtattr));
var n=B.getBBox();if(C>=n.x-5){A.pop(A.length-1).remove()}else{C=n.x+n.width}p+=d;
g+=u}if(Math.round(g-u-s-m)){l!="-"&&l!=" "&&(D=D.concat(["M",s+m+0.5,q-(l=="+"?c:!!k*c*2),"l",0,c*2+1]));
A.push(this.text(s+m,q+w,(J&&J[F])||(Math.round(p)==p?p:+p.toFixed(o))).attr(this.g.txtattr))
}}var K=this.path(D);K.text=A;K.all=this.set([K,A]);K.remove=function(){this.text.remove();
this.constructor.prototype.remove.call(this)};return K};Raphael.el.lighter=function(e){e=e||2;
var c=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[c[0],c[1]];c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex);
c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex);c[0].b=Math.min(c[0].b*e,1);c[0].s=c[0].s/e;
c[1].b=Math.min(c[1].b*e,1);c[1].s=c[1].s/e;this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})
};Raphael.el.darker=function(e){e=e||2;var c=[this.attrs.fill,this.attrs.stroke];
this.fs=this.fs||[c[0],c[1]];c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex);c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex);
c[0].s=Math.min(c[0].s*e,1);c[0].b=c[0].b/e;c[1].s=Math.min(c[1].s*e,1);c[1].b=c[1].b/e;
this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})
};Raphael.el.original=function(){if(this.fs){this.attr({fill:this.fs[0],stroke:this.fs[1]});
delete this.fs}}})();sc_require("graphing/graphael");Raphael.fn.g.barchart=function(E,C,a,e,Q,w){w=w||{};
var S={round:"round",sharp:"sharp",soft:"soft"}[w.type]||"square",o=parseFloat(w.gutter||"20%"),O=this.set(),z=this.set(),f=this.set(),u=this.set(),A=Math.max.apply(Math,Q),P=[],c=this,D=0,H=w.colors||this.g.colors,t=Q.length;
if(this.raphael.is(Q[0],"array")){A=[];D=t;t=0;for(var M=Q.length;M--;){z.push(this.set());
A.push(Math.max.apply(Math,Q[M]));t=Math.max(t,Q[M].length)}if(w.stacked){for(var M=t;
M--;){var m=0;for(var L=Q.length;L--;){m+=+Q[L][M]||0}P.push(m)}}for(var M=Q.length;
M--;){if(Q[M].length<t){for(var L=t;L--;){Q[M].push(0)}}}A=Math.max.apply(Math,w.stacked?P:A)
}A=(w.to)||A;var F=a/(t*(100+o)+o)*100,b=F*o/100,k=w.vgutter==null?20:w.vgutter,v=[],l=E+b,g=(e-2*k)/A;
if(!w.stretch){b=Math.round(b);F=Math.floor(F)}!w.stacked&&(F/=D||1);for(var M=0;
M<t;M++){v=[];for(var L=0;L<(D||1);L++){var N=Math.round((D?Q[L][M]:Q[M])*g),n=C+e-k-N,J=this.g.finger(Math.round(l+F/2),n+N,F,N,true,S).attr({stroke:H[D?L:M],fill:H[D?L:M]});
if(D){z[L].push(J)}else{z.push(J)}J.y=n;J.x=Math.round(l+F/2);J.w=F;J.h=N;J.value=D?Q[L][M]:Q[M];
if(!w.stacked){l+=F}else{v.push(J)}}if(w.stacked){var K;u.push(K=this.rect(v[0].x-v[0].w/2,C,F,e).attr(this.g.shim));
K.bars=this.set();var p=0;for(var G=v.length;G--;){v[G].toFront()}for(var G=0,q=v.length;
G<q;G++){var J=v[G],B,N=(p+J.value)*g,I=this.g.finger(J.x,C+e-k-!!p*0.5,F,N,true,S,1);
K.bars.push(J);p&&J.attr({path:I});J.h=N;J.y=C+e-k-!!p*0.5-N;f.push(B=this.rect(J.x-J.w/2,J.y,F,J.value*g).attr(this.g.shim));
B.bar=J;B.value=J.value;p+=J.value}l+=F}l+=b}u.toFront();l=E+b;if(!w.stacked){for(var M=0;
M<t;M++){for(var L=0;L<(D||1);L++){var B;f.push(B=this.rect(Math.round(l),C+k,F,e-k).attr(this.g.shim));
B.bar=D?z[L][M]:z[M];B.value=B.bar.value;l+=F}l+=b}}O.label=function(y,V){y=y||[];
this.labels=c.set();var W,h=-Infinity;if(w.stacked){for(var x=0;x<t;x++){var T=0;
for(var s=0;s<(D||1);s++){T+=D?Q[s][x]:Q[x];if(s==D-1){var X=c.g.labelise(y[x],T,A);
W=c.g.text(z[x*(D||1)+s].x,C+e-k/2,X).insertBefore(f[x*(D||1)+s]);var U=W.getBBox();
if(U.x-7<h){W.remove()}else{this.labels.push(W);h=U.x+U.width}}}}}else{for(var x=0;
x<t;x++){for(var s=0;s<(D||1);s++){var X=c.g.labelise(D?y[s]&&y[s][x]:y[x],D?Q[s][x]:Q[x],A);
W=c.g.text(z[x*(D||1)+s].x,V?C+e-k/2:z[x*(D||1)+s].y-10,X).insertBefore(f[x*(D||1)+s]);
var U=W.getBBox();if(U.x-7<h){W.remove()}else{this.labels.push(W);h=U.x+U.width}}}}return this
};O.hover=function(i,h){u.hide();f.show();f.mouseover(i).mouseout(h);return this};
O.hoverColumn=function(i,h){f.hide();u.show();h=h||function(){};u.mouseover(i).mouseout(h);
return this};O.click=function(h){u.hide();f.show();f.click(h);return this};O.each=function(j){if(!Raphael.is(j,"function")){return this
}for(var h=f.length;h--;){j.call(f[h])}return this};O.eachColumn=function(j){if(!Raphael.is(j,"function")){return this
}for(var h=u.length;h--;){j.call(u[h])}return this};O.clickColumn=function(h){f.hide();
u.show();u.click(h);return this};O.push(z,f,u);O.bars=z;O.covers=f;return O};Raphael.fn.g.hbarchart=function(o,m,D,A,c,u){u=u||{};
var f={round:"round",sharp:"sharp",soft:"soft"}[u.type]||"square",g=parseFloat(u.gutter||"20%"),w=this.set(),C=this.set(),k=this.set(),G=this.set(),O=Math.max.apply(Math,c),a=[],p=this,E=0,n=u.colors||this.g.colors,J=c.length;
if(this.raphael.is(c[0],"array")){O=[];E=J;J=0;for(var I=c.length;I--;){C.push(this.set());
O.push(Math.max.apply(Math,c[I]));J=Math.max(J,c[I].length)}if(u.stacked){for(var I=J;
I--;){var q=0;for(var H=c.length;H--;){q+=+c[H][I]||0}a.push(q)}}for(var I=c.length;
I--;){if(c[I].length<J){for(var H=J;H--;){c[I].push(0)}}}O=Math.max.apply(Math,u.stacked?a:O)
}O=(u.to)||O;var L=Math.floor(A/(J*(100+g)+g)*100),l=Math.floor(L*g/100),h=[],b=m+l,e=(D-1)/O;
!u.stacked&&(L/=E||1);for(var I=0;I<J;I++){h=[];for(var H=0;H<(E||1);H++){var N=E?c[H][I]:c[I],K=this.g.finger(o,b+L/2,Math.round(N*e),L-1,false,f).attr({stroke:n[E?H:I],fill:n[E?H:I]});
if(E){C[H].push(K)}else{C.push(K)}K.x=o+Math.round(N*e);K.y=b+L/2;K.w=Math.round(N*e);
K.h=L;K.value=+N;if(!u.stacked){b+=L}else{h.push(K)}}if(u.stacked){var t=this.rect(o,h[0].y-h[0].h/2,D,L).attr(this.g.shim);
G.push(t);t.bars=this.set();var z=0;for(var v=h.length;v--;){h[v].toFront()}for(var v=0,F=h.length;
v<F;v++){var K=h[v],M,N=Math.round((z+K.value)*e),B=this.g.finger(o,K.y,N,L-1,false,f,1);
t.bars.push(K);z&&K.attr({path:B});K.w=N;K.x=o+N;k.push(M=this.rect(o+z*e,K.y-K.h/2,K.value*e,L).attr(this.g.shim));
M.bar=K;z+=K.value}b+=L}b+=l}G.toFront();b=m+l;if(!u.stacked){for(var I=0;I<J;I++){for(var H=0;
H<E;H++){var M=this.rect(o,b,D,L).attr(this.g.shim);k.push(M);M.bar=C[H][I];b+=L}b+=l
}}w.label=function(U,S){U=U||[];this.labels=p.set();for(var Q=0;Q<J;Q++){for(var P=0;
P<E;P++){var y=p.g.labelise(E?U[P]&&U[P][Q]:U[Q],E?c[P][Q]:c[Q],O);var T=S?C[Q*(E||1)+P].x-L/2+3:o+5,x=S?"end":"start",s;
this.labels.push(s=p.g.text(T,C[Q*(E||1)+P].y,y).attr({"text-anchor":x}).insertBefore(k[0]));
if(s.getBBox().x<o+5){s.attr({x:o+5,"text-anchor":"start"})}else{C[Q*(E||1)+P].label=s
}}}return this};w.hover=function(j,i){G.hide();k.show();i=i||function(){};k.mouseover(j).mouseout(i);
return this};w.hoverColumn=function(j,i){k.hide();G.show();i=i||function(){};G.mouseover(j).mouseout(i);
return this};w.each=function(s){if(!Raphael.is(s,"function")){return this}for(var j=k.length;
j--;){s.call(k[j])}return this};w.eachColumn=function(s){if(!Raphael.is(s,"function")){return this
}for(var j=G.length;j--;){s.call(G[j])}return this};w.click=function(i){G.hide();
k.show();k.click(i);return this};w.clickColumn=function(i){k.hide();G.show();G.click(i);
return this};w.push(C,k,G);w.bars=C;w.covers=k;return w};sc_require("graphing/graphael");
Raphael.fn.g.dotchart=function(M,L,a,h,A,z,t,H){function T(b){+b[0]&&(b[0]=c.g.axis(M+s,L+s,a-2*s,D,o,H.axisxstep||Math.floor((a-2*s)/20),2,H.axisxlabels||null,H.axisxtype||"t"));
+b[1]&&(b[1]=c.g.axis(M+a-s,L+h-s,h-2*s,C,n,H.axisystep||Math.floor((h-2*s)/20),3,H.axisylabels||null,H.axisytype||"t"));
+b[2]&&(b[2]=c.g.axis(M+s,L+h-s+G,a-2*s,D,o,H.axisxstep||Math.floor((a-2*s)/20),0,H.axisxlabels||null,H.axisxtype||"t"));
+b[3]&&(b[3]=c.g.axis(M+s-G,L+h-s,h-2*s,C,n,H.axisystep||Math.floor((h-2*s)/20),1,H.axisylabels||null,H.axisytype||"t"))
}H=H||{};var w=this.g.snapEnds(Math.min.apply(Math,A),Math.max.apply(Math,A),A.length-1),D=w.from,o=w.to,s=H.gutter||10,K=this.g.snapEnds(Math.min.apply(Math,z),Math.max.apply(Math,z),z.length-1),C=K.from,n=K.to,B=Math.max(A.length,z.length,t.length),v=this.g.markers[H.symbol]||"disc",I=this.set(),u=this.set(),F=H.max||100,q=Math.max.apply(Math,t),p=[],c=this,P=Math.sqrt(q/Math.PI)*2/F;
for(var Q=0;Q<B;Q++){p[Q]=Math.min(Math.sqrt(t[Q]/Math.PI)*2/P,F)}s=Math.max.apply(Math,p.concat(s));
var E=this.set(),G=Math.max.apply(Math,p);if(H.axis){var m=(H.axis+"").split(/[,\s]+/);
T(m);var S=[],U=[];for(var Q=0,J=m.length;Q<J;Q++){var V=m[Q].all?m[Q].all.getBBox()[["height","width"][Q%2]]:0;
S[Q]=V+s;U[Q]=V}s=Math.max.apply(Math,S.concat(s));for(var Q=0,J=m.length;Q<J;Q++){if(m[Q].all){m[Q].remove();
m[Q]=1}}T(m);for(var Q=0,J=m.length;Q<J;Q++){if(m[Q].all){E.push(m[Q].all)}}I.axis=E
}var O=(a-s*2)/((o-D)||1),N=(h-s*2)/((n-C)||1);for(var Q=0,J=z.length;Q<J;Q++){var f=this.raphael.is(v,"array")?v[Q]:v,l=M+s+(A[Q]-D)*O,j=L+h-s-(z[Q]-C)*N;
f&&p[Q]&&u.push(this.g[f](l,j,p[Q]).attr({fill:H.heat?this.g.colorValue(p[Q],G):Raphael.fn.g.colors[0],"fill-opacity":H.opacity?p[Q]/F:1,stroke:"none"}))
}var e=this.set();for(var Q=0,J=z.length;Q<J;Q++){var l=M+s+(A[Q]-D)*O,j=L+h-s-(z[Q]-C)*N;
e.push(this.circle(l,j,G).attr(this.g.shim));H.href&&H.href[Q]&&e[Q].attr({href:H.href[Q]});
e[Q].r=+p[Q].toFixed(3);e[Q].x=+l.toFixed(3);e[Q].y=+j.toFixed(3);e[Q].X=A[Q];e[Q].Y=z[Q];
e[Q].value=t[Q]||0;e[Q].dot=u[Q]}I.covers=e;I.series=u;I.push(u,E,e);I.hover=function(g,b){e.mouseover(g).mouseout(b);
return this};I.click=function(b){e.click(b);return this};I.each=function(g){if(!Raphael.is(g,"function")){return this
}for(var b=e.length;b--;){g.call(e[b])}return this};I.href=function(k){var g;for(var b=e.length;
b--;){g=e[b];if(g.X==k.x&&g.Y==k.y&&g.value==k.value){g.attr({href:k.href})}}};return I
};sc_require("graphing/graphael");Raphael.fn.g.linechart=function(L,K,a,c,u,t,E){function D(y,ab){var x=y.length/ab,X=0,i=x,aa=0,Y=[];
while(X<y.length){i--;if(i<0){aa+=y[X]*(1+i);Y.push(aa/x);aa=y[X++]*-i;i+=x}else{aa+=y[X++]
}}return Y}E=E||{};if(!this.raphael.is(u[0],"array")){u=[u]}if(!this.raphael.is(t[0],"array")){t=[t]
}var Q=Array.prototype.concat.apply([],u),O=Array.prototype.concat.apply([],t),p=this.g.snapEnds(Math.min.apply(Math,Q),Math.max.apply(Math,Q),u[0].length-1),z=p.from,k=p.to,m=E.gutter||10,S=(a-m*2)/(k-z),I=this.g.snapEnds(Math.min.apply(Math,O),Math.max.apply(Math,O),t[0].length-1),w=I.from,h=I.to,P=(c-m*2)/(h-w),v=Math.max(u[0].length,t[0].length),o=E.symbol||"",M=E.colors||Raphael.fn.g.colors,J=this,q=null,l=null,W=this.set(),N=[];
for(var V=0,G=t.length;V<G;V++){v=Math.max(v,t[V].length)}var Z=this.set();for(var V=0,G=t.length;
V<G;V++){if(E.shade){Z.push(this.path().attr({stroke:"none",fill:M[V],opacity:E.nostroke?1:0.3}))
}if(t[V].length>a-2*m){t[V]=D(t[V],a-2*m);v=a-2*m}if(u[V]&&u[V].length>a-2*m){u[V]=D(u[V],a-2*m)
}}var A=this.set();if(E.axis){var g=(E.axis+"").split(/[,\s]+/);+g[0]&&A.push(this.g.axis(L+m,K+m,a-2*m,z,k,E.axisxstep||Math.floor((a-2*m)/20),2));
+g[1]&&A.push(this.g.axis(L+a-m,K+c-m,c-2*m,w,h,E.axisystep||Math.floor((c-2*m)/20),3));
+g[2]&&A.push(this.g.axis(L+m,K+c-m,a-2*m,z,k,E.axisxstep||Math.floor((a-2*m)/20),0));
+g[3]&&A.push(this.g.axis(L+m,K+c-m,c-2*m,w,h,E.axisystep||Math.floor((c-2*m)/20),1))
}var H=this.set(),T=this.set(),n;for(var V=0,G=t.length;V<G;V++){if(!E.nostroke){H.push(n=this.path().attr({stroke:M[V],"stroke-width":E.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":E.dash||""}))
}var b=this.raphael.is(o,"array")?o[V]:o,B=this.set();N=[];for(var U=0,s=t[V].length;
U<s;U++){var f=L+m+((u[V]||u[0])[U]-z)*S;var e=K+c-m-(t[V][U]-w)*P;(Raphael.is(b,"array")?b[U]:b)&&B.push(this.g[Raphael.fn.g.markers[this.raphael.is(b,"array")?b[U]:b]](f,e,(E.width||2)*3).attr({fill:M[V],stroke:"none"}));
N=N.concat([U?"L":"M",f,e])}T.push(B);if(E.shade){Z[V].attr({path:N.concat(["L",f,K+c-m,"L",L+m+((u[V]||u[0])[0]-z)*S,K+c-m,"z"]).join(",")})
}!E.nostroke&&n.attr({path:N.join(",")})}function F(ah){var ae=[];for(var af=0,aj=u.length;
af<aj;af++){ae=ae.concat(u[af])}ae.sort();var ak=[],ab=[];for(var af=0,aj=ae.length;
af<aj;af++){ae[af]!=ae[af-1]&&ak.push(ae[af])&&ab.push(L+m+(ae[af]-z)*S)}ae=ak;aj=ae.length;
var aa=ah||J.set();for(var af=0;af<aj;af++){var Y=ab[af]-(ab[af]-(ab[af-1]||L))/2,ai=((ab[af+1]||L+a)-ab[af])/2+(ab[af]-(ab[af-1]||L))/2,x;
ah?(x={}):aa.push(x=J.rect(Y-1,K,Math.max(ai+1,1),c).attr({stroke:"none",fill:"#000",opacity:0}));
x.values=[];x.symbols=J.set();x.y=[];x.x=ab[af];x.axis=ae[af];for(var ad=0,ag=t.length;
ad<ag;ad++){ak=u[ad]||u[0];for(var ac=0,y=ak.length;ac<y;ac++){if(ak[ac]==ae[af]){x.values.push(t[ad][ac]);
x.y.push(K+c-m-(t[ad][ac]-w)*P);x.symbols.push(W.symbols[ad][ac])}}}ah&&ah.call(x)
}!ah&&(q=aa)}function C(af){var ab=af||J.set(),x;for(var ad=0,ah=t.length;ad<ah;ad++){for(var ac=0,ae=t[ad].length;
ac<ae;ac++){var aa=L+m+((u[ad]||u[0])[ac]-z)*S,ag=L+m+((u[ad]||u[0])[ac?ac-1:1]-z)*S,y=K+c-m-(t[ad][ac]-w)*P;
af?(x={}):ab.push(x=J.circle(aa,y,Math.abs(ag-aa)/2).attr({stroke:"none",fill:"#000",opacity:0}));
x.x=aa;x.y=y;x.value=t[ad][ac];x.line=W.lines[ad];x.shade=W.shades[ad];x.symbol=W.symbols[ad][ac];
x.symbols=W.symbols[ad];x.axis=(u[ad]||u[0])[ac];af&&af.call(x)}}!af&&(l=ab)}W.push(H,Z,T,A,q,l);
W.lines=H;W.shades=Z;W.symbols=T;W.axis=A;W.hoverColumn=function(j,i){!q&&F();q.mouseover(j).mouseout(i);
return this};W.clickColumn=function(i){!q&&F();q.click(i);return this};W.hrefColumn=function(Y){var aa=J.raphael.is(arguments[0],"array")?arguments[0]:arguments;
if(!(arguments.length-1)&&typeof Y=="object"){for(var j in Y){for(var y=0,X=q.length;
y<X;y++){if(q[y].axis==j){q[y].attr("href",Y[j])}}}}!q&&F();for(var y=0,X=aa.length;
y<X;y++){q[y]&&q[y].attr("href",aa[y])}return this};W.hover=function(j,i){!l&&C();
l.mouseover(j).mouseout(i);return this};W.click=function(i){!l&&C();l.click(i);return this
};W.each=function(i){C(i);return this};W.eachColumn=function(i){F(i);return this};
return W};sc_require("graphing/graphael");Raphael.fn.g.piechart=function(f,e,q,b,m){m=m||{};
var l=this,n=[],h=this.set(),o=this.set(),k=this.set(),v=[],x=b.length,y=0,B=0,A=0,c=9,z=true;
o.covers=h;if(x==1){k.push(this.circle(f,e,q).attr({fill:this.g.colors[0],stroke:opt.stroke||"#fff","stroke-width":m.strokewidth==null?1:m.strokewidth}));
h.push(this.circle(f,e,q).attr(this.g.shim));B=b[0];b[0]={value:b[0],order:0,valueOf:function(){return this.value
}};k[0].middle={x:f,y:e};k[0].mangle=180}else{function u(G,F,i,I,E,N){var K=Math.PI/180,C=G+i*Math.cos(-I*K),p=G+i*Math.cos(-E*K),H=G+i/2*Math.cos(-(I+(E-I)/2)*K),M=F+i*Math.sin(-I*K),L=F+i*Math.sin(-E*K),D=F+i/2*Math.sin(-(I+(E-I)/2)*K),J=["M",G,F,"L",C,M,"A",i,i,0,+(Math.abs(E-I)>180),1,p,L,"z"];
J.middle={x:H,y:D};return J}for(var w=0;w<x;w++){B+=b[w];b[w]={value:b[w],order:w,valueOf:function(){return this.value
}}}b.sort(function(p,i){return i.value-p.value});for(var w=0;w<x;w++){if(z&&b[w]*360/B<=1.5){c=w;
z=false}if(w>c){z=false;b[c].value+=b[w];b[c].others=true;A=b[c].value}}x=Math.min(c+1,b.length);
A&&b.splice(x)&&(b[c].others=true);for(var w=0;w<x;w++){var g=y-360*b[w]/B/2;if(!w){y=90-g;
g=y-360*b[w]/B/2}if(m.init){var j=u(f,e,1,y,y-360*b[w]/B).join(",")}var t=u(f,e,q,y,y-=360*b[w]/B);
var s=this.path(m.init?j:t).attr({fill:m.colors&&m.colors[w]||this.g.colors[w]||"#666",stroke:m.stroke||"#fff","stroke-width":(m.strokewidth==null?1:m.strokewidth),"stroke-linejoin":"round"});
s.value=b[w];s.middle=t.middle;s.mangle=g;n.push(s);k.push(s);m.init&&s.animate({path:t.join(",")},(+m.init-1)||1000,">")
}for(var w=0;w<x;w++){var s=l.path(n[w].attr("path")).attr(this.g.shim);m.href&&m.href[w]&&s.attr({href:m.href[w]});
s.attr=function(){};h.push(s);k.push(s)}}o.hover=function(E,C){C=C||function(){};
var D=this;for(var p=0;p<x;p++){(function(F,G,i){var H={sector:F,cover:G,cx:f,cy:e,mx:F.middle.x,my:F.middle.y,mangle:F.mangle,r:q,value:b[i],total:B,label:D.labels&&D.labels[i]};
G.mouseover(function(){E.call(H)}).mouseout(function(){C.call(H)})})(k[p],h[p],p)
}return this};o.each=function(D){var C=this;for(var p=0;p<x;p++){(function(E,F,i){var G={sector:E,cover:F,cx:f,cy:e,x:E.middle.x,y:E.middle.y,mangle:E.mangle,r:q,value:b[i],total:B,label:C.labels&&C.labels[i]};
D.call(G)})(k[p],h[p],p)}return this};o.click=function(D){var C=this;for(var p=0;
p<x;p++){(function(E,F,i){var G={sector:E,cover:F,cx:f,cy:e,mx:E.middle.x,my:E.middle.y,mangle:E.mangle,r:q,value:b[i],total:B,label:C.labels&&C.labels[i]};
F.click(function(){D.call(G)})})(k[p],h[p],p)}return this};o.inject=function(i){i.insertBefore(h[0])
};var a=function(I,D,C,p){var M=f+q+q/5,L=e,H=L+10;I=I||[];p=(p&&p.toLowerCase&&p.toLowerCase())||"east";
C=l.g.markers[C&&C.toLowerCase()]||"disc";o.labels=l.set();for(var G=0;G<x;G++){var N=k[G].attr("fill"),E=b[G].order,F;
b[G].others&&(I[E]=D||"Others");I[E]=l.g.labelise(I[E],b[G],B);o.labels.push(l.set());
o.labels[G].push(l.g[C](M+5,H,5).attr({fill:N,stroke:"none"}));o.labels[G].push(F=l.text(M+20,H,I[E]||b[E]).attr(l.g.txtattr).attr({fill:m.legendcolor||"#000","text-anchor":"start"}));
h[G].label=o.labels[G];H+=F.getBBox().height*1.2}var J=o.labels.getBBox(),K={east:[0,-J.height/2],west:[-J.width-2*q-20,-J.height/2],north:[-q-J.width/2,-q-J.height-10],south:[-q-J.width/2,q+10]}[p];
o.labels.translate.apply(o.labels,K);o.push(o.labels)};if(m.legend){a(m.legend,m.legendothers,m.legendmark,m.legendpos)
}o.push(k,h);o.series=k;o.covers=h;return o};require("graphing/graphael");require("graphing/gbar");
SCUI.BarGraph=SC.View.extend({content:null,color:"red",_content_changed:function(){if(this.get("content")&&this.get("isVisible")){console.log(this.get("content"));
if(this._raphael){this._raphael.remove()}this._render_view()}},didAppendToDocument:function(){var a=this;
this.invokeLater(function(){a._render_view()})},willDestroyLayer:function(){if(this._raphael){this._raphael.remove()
}},_render_view:function(){if(!this._raphael&&this.$().get(0)){var c=this.$().get(0);
var f=Raphael(c),g=function(){this.flag=f.g.popup(this.bar.x,this.bar.y,this.bar.value||"0").insertBefore(this)
},e=function(){this.flag.animate({opacity:0},200,function(){this.remove()})},b=function(){var k=[],j=[];
for(var h=this.bars.length;h--;){k.push(this.bars[h].y);j.push(this.bars[h].value||"0")
}this.flag=f.g.popup(this.bars[0].x,Math.min.apply(Math,k),j.join(", ")).insertBefore(this)
},a=function(){this.flag.animate({opacity:0},300,function(){this.remove()})};f.g.hbarchart(0,0,300,220,this.get("content"),{stacked:true}).hover(g,e);
this._raphael=f}}});require("color_picker/colorpicker");require("color_picker/colorwheel");
SCUI.ColorPicker=SC.View.extend({value:"#eee",size:160,displayProperties:"value".w(),render:function(a,c){var b=this.get("value");
if(this._cp){if(this._cp.color()!==b){this._cp.color(b)}}},didAppendToDocument:function(){var c=this.get("parentView"),f=this.get("frame");
var g=c?c.convertFrameToView(f,null):f;if(!this._cp||SC.browser.msie){if(this._cp&&SC.browser.msie){this._cp.remove()
}var a=this.$().get(0),b=this,e;this._cp=e=Raphael.colorpicker(g.x,g.y,this.get("size"),this.get("value"),a);
this._cp.onchange=function(h){b.setIfChanged("value",h)}}else{this._cp.x=g.x;this._cp.y=g.y
}},willDestroyLayer:function(){if(this._cp){this._cp.remove()}}});SCUI.ColorWell=SC.View.extend({classNames:["color-well"],backgroundColor:"#656565",value:"",activeClass:"active",displayProperties:"value".w(),render:function(a,b){a.begin("div").addStyle({width:"100%",height:"100%"}).addStyle({backgroundColor:this.get("value")}).setClass(this.get("activeClass"),this._isMouseDown).end()
},mouseDown:function(a){if(!this.get("isEnabledInPane")){return NO}this.set("isActive",YES);
this.displayDidChange();return YES},mouseUp:function(a){if(!this.get("isEnabledInPane")){return NO
}this._isMouseDown=false;this.displayDidChange();this._popupColorPicker();return YES
},_popupColorPicker:function(){var a=this;if(!this._pickerPane){this._pickerPane=SC.PickerPane.create({layout:{width:180,height:240},classNames:["color-picker","picker"],contentView:SC.View.design({childViews:"picker textBox".w(),picker:SCUI.ColorPicker.design({layout:{centerX:0,top:10,width:160,height:185},valueBinding:SC.binding("value",a)}),textBox:SC.TextFieldView.design({layout:{width:160,height:24,bottom:10,left:10},valueBinding:SC.binding("value",a)})})})
}this._pickerPane.popup(this,SC.PICKER_POINTER)}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui/sai");
/* @license
==========================================================================
SCUI -- Sproutcore UI Framework
Copyright: ©2009 Eloqua Inc All rights reserved.
          Portions ©2009 Evin Grano

Permission is hereby granted, free of charge, to any person obtaining a 
copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation 
the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the 
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
DEALINGS IN THE SOFTWARE.

For more information about SCUI, visit http://www.itsgotwhatplanscrave.com

==========================================================================
@license */
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("scui")
}SC.stringsFor("en_us",{"_Loading...":"Loading...","_This content could not be loaded.":"This content could not be loaded."});
SC.platform.touch=NO;var isIE11=!!navigator.userAgent.match(/Trident\/7\./);if(isIE11){SC.browser.mozilla=0;
SC.browser.msie="11.0"}if(SC.browser.msie&&SC.browser.version>=9){SC.Event.special.mousewheel={setup:function(){SC.Event.add(this,"wheel",SC.Event.special.mousewheel.handler);
return YES},teardown:function(){SC.Event.remove(this,"wheel",SC.Event.special.mousewheel.handler);
return YES},handler:function(a){a.wheelDeltaY=a.originalEvent.deltaY;a.wheelDeltaX=a.originalEvent.deltaX;
a.type="mousewheel";return SC.Event.handle.apply(this,arguments)}}}else{if(SC.browser.isSafari){SC.Event.create=function(a){var c=1;
var g=new SC.Event(a);if(SC.browser.safari&&!SC.browser.chrome&&a.wheelDelta!==undefined){c=0.4;
var e=0-(a.wheelDeltaY||a.wheelDeltaX);var f=0-(a.wheelDeltaY||0);var h=0-(a.wheelDeltaX||0);
var b=parseFloat(SC.browser.version);if(b>533.17&&b<534){c=0.004}else{if(b<533){c=40
}}g.wheelDelta=e*c;g.wheelDeltaX=h*c;g.wheelDeltaY=f*c}return g}}}Ip=SC.Object.create({NAMESPACE:"Ip",VERSION:"0.1.0",localizations:{},getLocalizationHash:function(a){return this.localizations[a]||{}
},inDemoMode:function(){return Ip.getQueryStringParameter("demo")?YES:NO}});SC.mixin(SC.Store.prototype,{isQueryFound:function(c){var a=this._scst_recordArraysByQuery,b=SC.guidFor(c);
return a?!SC.none(a[b]):false}});SC.ExceptionHandler.handleException=function(a){var b=["Internal Inconsistency","Nested Store Conflict"];
b.forEach(function(c){if(this.isShowingErrorDialog){return}if(a&&a.message){if(a.message.toLowerCase().indexOf(c.toLowerCase())!==-1){this._displayErrorDialog(a)
}}},this)};SC.RecordAttribute.registerTransform(Boolean,{to:function(a){if(a===0){return false
}else{return SC.none(a)?null:!!a}},from:function(a){return a?1:0}});Ip.EditingRegistryController=SC.ObjectController.extend({isCurrentlyEditing:[],isManuallyEditing:[],recordsInTransit:[],targetFnPkg:null,errorInSaving:NO,inflightUpdateRequestExists:NO,inflightUpdateRequestExistsDidChange:function(){var b=SC.Request.manager.get("inflight")||[];
var a=false;b.forEach(function(c){if(c.get("type")=="POST"||c.get("type")=="PUT"||c.get("type")=="DELETE"){a=true
}});this.set("inflightUpdateRequestExists",a)}.observes("SC.Request.manager*inflight.[]"),init:function(){arguments.callee.base.apply(this,arguments);
var a=this;window.onbeforeunload=function(h){var h=h||window.event;var c=a.get("isCurrentlyEditing");
var b=a.get("isManuallyEditing");var g=a.get("inflightUpdateRequestExists");if(g||c.length>0){a.tryToPerform();
var f;if(SC.browser.isSafari&&!SC.browser.chrome&&(SC.browser.compareVersion(533)>=0)){f="_The comment(s) you were editing will not be saved. Are you sure you want to leave?".loc()
}else{f="_We're trying to save the comment(s) you were editing, but they may not yet be saved. Are you sure you want to leave?".loc()
}if(h){h.returnValue=f}return f}else{if(b.length>0){var f=b[0].get("interceptorPageUnloadMessage");
if(h){h.returnValue=f}return f}}}},register:function(b){if(!this.isRegistered(b)){var a=b.get("isAutoSaveable")?this.get("isCurrentlyEditing"):this.get("isManuallyEditing");
a.pushObject(b)}},unregister:function(b){if(this.isRegistered(b)){var a=b.get("isAutoSaveable")?this.get("isCurrentlyEditing"):this.get("isManuallyEditing");
a.removeObject(b)}},isRegistered:function(c){var a=c.get("isAutoSaveable")?this.get("isCurrentlyEditing"):this.get("isManuallyEditing");
var b=(a.indexOf(c)!==-1);return b},tryToPerform:function(j){this.set("targetFnPkg",j);
var h=true;var b=this.get("isManuallyEditing");if(b.length>0&&!j.allowOtherSaves){var f={editingRegistry:this,alertPaneDidDismiss:function(m,e){switch(e){case SC.BUTTON1_STATUS:this.editingRegistry.continueClicked(YES);
break;case SC.BUTTON2_STATUS:this.editingRegistry.cancelClicked();break;default:break
}}};var c=b[0].get("interceptorExitContextMessage");SC.AlertPane.plain(c.message,c.description,null,c.continueButtonText,c.cancelButtonText,null,f);
return h}var i=this.get("isCurrentlyEditing");if(i.length>0){try{var a=this.saveItemsInEditingRegistry();
if(!a){this.callTargetFn();this.set("targetFnPkg",null)}}catch(g){var f={editingRegistry:this,alertPaneDidDismiss:function(m,e){switch(e){case SC.BUTTON1_STATUS:this.editingRegistry.continueClicked();
break;case SC.BUTTON2_STATUS:this.editingRegistry.cancelClicked();break;default:break
}}};this.get("savingCommentsModal").fadeOut();var l="_Unsaved Comments".loc();var k="_There was a problem saving one or more of your open comments upon leaving this paper. This could be a temporary problem with your connection to our servers.".loc();
SC.AlertPane.plain(l,k,null,"_Leave Paper".loc(),"_Stay on Paper".loc(),null,f);h=false
}}else{this.callTargetFn();this.set("targetFnPkg",null)}return h},saveItemsInEditingRegistry:function(){var c=this.get("isCurrentlyEditing");
var f=c.slice(0);var e=f.length;var a=false;for(var b=0;b<e;b++){f[b].getRecord().addObserver("status",this,this.recordStatusDidChange);
f[b].closeEditViewWithSave();if(f[b].getRecord().get("status")&SC.Record.BUSY){a=true
}}return a},recordStatusDidChange:function(a){var b=a.get("status");var c=this.get("recordsInTransit");
if(b&SC.Record.DIRTY){}else{if(b&SC.Record.BUSY){if(c.indexOf(a)==-1){c.pushObject(a)
}}else{if(b&SC.Record.ERROR){this.set("errorInSaving",YES);c.removeObject(a);a.removeObserver("status",this,this.recordStatusDidChange)
}else{c.removeObject(a);a.removeObserver("status",this,this.recordStatusDidChange)
}}}},recordsInTransitLengthDidChange:function(){var c=this.get("recordsInTransit");
if(c.length===0){this.get("savingCommentsModal").fadeOut();if(this.get("errorInSaving")){var e={editingRegistry:this,alertPaneDidDismiss:function(g,f){switch(f){case SC.BUTTON1_STATUS:this.editingRegistry.continueClicked();
break;case SC.BUTTON2_STATUS:this.editingRegistry.cancelClicked();break;default:break
}}};var b="_Unsaved Comments".loc();var a="_There was a problem saving one or more of your open comments upon leaving this paper. This could be a temporary problem with your connection to our servers.".loc();
SC.AlertPane.plain(b,a,null,"_Leave Paper".loc(),"_Stay on Paper".loc(),null,e);this.set("errorInSaving",NO)
}else{this.callTargetFn();this.set("targetFnPkg",null)}}else{this.get("savingCommentsModal").append()
}}.observes(".recordsInTransit.length"),continueClicked:function(a){var e=a?this.get("isManuallyEditing"):this.get("isCurrentlyEditing");
var c=e.length;for(var b=0;b<c;b++){e[0].closeEditViewWithoutSave()}this.callTargetFn();
this.set("targetFnPkg",null)},cancelClicked:function(){this.set("targetFnPkg",null)
},callTargetFn:function(){var b=this.get("targetFnPkg");if(!b){return}var e=b.fn;
var c=b.target;var a=b.args;e.call(c,a)},savingCommentsModal:function(){return SC.PanelPane.create(SC.Animatable,{layout:{centerY:0,centerX:0,width:275,height:65},transitions:{opacity:{duration:0.5,timing:SC.Animatable.TRANSITION_EASE_IN_AND_OUT},display:0.75},classNames:["saving-comments"],modalPane:SC.ModalPane.extend(SC.Animatable,{classNames:"for-sc-panel",transitions:{opacity:{duration:0.5,timing:SC.Animatable.TRANSITION_EASE_IN_AND_OUT},display:0.75}}),contentView:SC.View.design({childViews:"spinnerView messageView".w(),spinnerView:SC.View.design({layout:{centerY:0,left:35,height:16,width:16},render:function(c,g){var f=this.get("frame");
var e=f.width;var a=f.height;var b="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/ip/en_us/A/resources/loading-spinner.gif";
c.push('<img src="%@" width="%@" height="%@">'.fmt(b,e,a))}}),messageView:SC.LabelView.design({layout:{centerY:0,left:60,width:200,height:36},value:"_Saving your open comments...".loc()})}),fadeOut:function(){this.adjust("opacity",0);
this.modalPane.adjust("opacity",0);this.adjust("display","none");this.modalPane.adjust("display","none");
this.invokeLater(function(){this.disableAnimation();this.adjust("opacity",1).updateStyle();
this.adjust("display","block").updateStyle();this.modalPane.adjust("opacity",0.3).updateStyle();
this.modalPane.adjust("display","block").updateStyle();this.enableAnimation();this.remove()
},1000)}})}.property().cacheable()});Ip.AnchorTagActions={didCreateLayer:function(){this._ata_addClickListener()
},didUpdateLayer:function(){this._ata_addClickListener()},willDestroyLayer:function(){this._ata_removeClickListener()
},_ata_addClickListener:function(){var a=this.get("layer");SC.Event.add(a,"click",this,this._ata_AnchorClickHandler)
},_ata_removeClickListener:function(){var a=this.get("layer");SC.Event.remove(a,"click",this,this._ata_AnchorClickHandler)
},_ata_AnchorClickHandler:function(g){var b=$(g.target);if(b.prop("tagName")==="A"){g.stop();
if(window.parent){var c=b.data("parentData");var a=b.data("parentDomain");if(c&&a){window.parent.postMessage(c,a)
}}var e=b.attr("href")||"";var h=(e&&e!=="#"&&!e.match(/^javascript/));if(h){var f=b.data("windowOpenOptions")||"";
window.open(e,"_blank",f)}}}};Ip.Animatable={transitions:{opacity:{duration:0.5,timing:SC.Animatable.TRANSITION_CSS_EASE_IN_OUT}},fadeOut:function(){this.adjust("opacity",0)
},show:function(){this.adjust("opacity",1)},hide:function(){this.set("opacity",0)
}};Ip.Animatable=(function(e,c){var b={};for(var a in e){b[a]=e[a]}for(var a in c){b[a]=c[a]
}return b})(SC.Animatable,Ip.Animatable);SC.AutoResize={shouldAutoResize:YES,shouldMeasureSize:YES,shouldCacheSizes:NO,shouldResizeWidth:YES,shouldResizeHeight:NO,measuredSize:{width:0,height:0},maxWidth:null,maxHeight:null,shouldAutoFitText:NO,autoFitDiscreteFontSizes:NO,minFontSize:12,maxFontSize:20,calculatedFontSize:20,fontPropertyDidChange:function(){if(this.get("shouldAutoFitText")){this.invokeLast(this.fitTextToFrame)
}}.observes("shouldAutoFitText","minFontSize","maxFontSize","measuredSize"),measuredSizeDidChange:function(){var c=this.get("measuredSize"),b=c.width,i=c.height,h,a,e=this.get("autoResizePadding")||0,g=this.get("maxWidth"),f=this.get("maxHeight");
if(SC.typeOf(e)===SC.T_NUMBER){h=a=e}else{h=e.height;a=e.width}i+=h;b+=a;if(this.get("shouldAutoResize")){if(this.get("shouldResizeWidth")){if(g&&b>g){b=g
}this.set("calculatedWidth",b);this.adjust("width",b)}if(this.get("shouldResizeHeight")){if(f&&i>f){i=f
}this.set("calculatedHeight",i);this.adjust("height",i)}}}.observes("shouldAutoResize","measuredSize","autoResizePadding","maxWidth","minWidth","shouldResizeWidth","shouldResizeHeight"),initMixin:function(){if(!this.get("supportsAutoResize")){throw"View `%@` does not support automatic resize. See documentation for SC.AutoResize".fmt(this)
}},batchResizeId:null,scheduleMeasurement:function(){var a=this.get("batchResizeId");
if(!this.get("shouldMeasureSize")||!this.get("isVisibleInWindow")||(this.get("autoResizeText")===this._lastMeasuredText&&a===this._lastMeasuredId)){return
}SC.AutoResizeManager.scheduleMeasurementForView(this,a)}.observes("isVisibleInWindow","shouldMeasureSize","autoResizeText","batchResizeId"),_lastMeasuredText:null,_cachedMetrics:function(c,e){if(!this.get("shouldCacheSizes")){return
}var b=SC.cacheSlotFor(this.get("batchResizeId")||this),a=this.get("autoResizeText");
if(e){b[a]=e}else{e=b[a]}return e}.property("shouldCacheSizes","autoResizeText","batchResizeId").cacheable(),measureSize:function(e){var i,f=this.get("autoResizeLayer"),c=this.get("autoResizeText"),b=!this.get("escapeHTML"),h=this.get("batchResizeId"),a=this.get("_cachedMetrics"),g=this.get("maxFontSize");
if(!f){return}if(a){i=a}else{if(SC.none(c)||c===""){i={width:0,height:0}}else{if(e){i=SC.measureString(c,b)
}else{this.prepareLayerForStringMeasurement(f);i=SC.metricsForString(c,f,this.get("classNames"),b)
}}}this.set("measuredSize",i);if(this.get("shouldCacheSizes")){this.setIfChanged("_cachedMetrics",i)
}this._lastMeasuredText=c;this._lastMeasuredId=h;return i},prepareLayerForStringMeasurement:function(a){var b=this.get("maxFontSize");
if(this.get("shouldAutoFitText")&&this.get("calculatedFontSize")!==b){a.style.fontSize=b+"px"
}},viewDidResize:function(a){arguments.callee.base.apply(this,arguments);this.fontPropertyDidChange()
},fitTextToFrame:function(){var s=this.get("autoResizeLayer");if(!s){return}var c=this.get("maxFontSize"),e=this.get("minFontSize");
this.prepareLayerForStringMeasurement(s);var i;var f=this.get("frame"),g=this.get("autoResizePadding")||0,k=f.width-1,h=f.height-1,q=this.get("measuredSize"),a=q.width,t=q.height;
if(SC.typeOf(g)===SC.T_NUMBER){k-=g;h-=g}else{k-=g.width;h-=g.height}if(a<=k&&t<=h){if(SC.browser.isIE&&parseInt(SC.browser.version,10)<=8){$(s).val($(s).val())
}return}if(this.get("autoFitDiscreteFontSizes")){i=e}else{var b=k/a,j=h/t,m=Math.floor(c*Math.min(b,j)),p=this.get("classNames"),o=!this.get("escapeHTML"),l=this.get("autoResizeText"),n;
m=i=Math.min(c,Math.max(e,m));s.style.fontSize=m+"px";n=SC.metricsForString(l,s,p,o);
if(n.width>k||n.height>h){for(m=m-1;m>=e;m--){s.style.fontSize=m+"px";n=SC.metricsForString(l,s,p,o);
i=m;if(n.width<=k&&n.height<=h){break}}}else{if(n.width<k||n.height<h){for(m=m+1;
m<=c;m++){s.style.fontSize=m+"px";n=SC.metricsForString(l,s,p,o);if(n.width<=k&&n.height<=h){i=m
}if(n.width>=k||n.height>=h){break}}}}}s.style.fontSize=i+"px";this.set("calculatedFontSize",i);
if(SC.browser.isIE&&parseInt(SC.browser.version,10)<=8){$(s).val($(s).val())}},applyAttributesToContext:function(b,a){arguments.callee.base.apply(this,arguments);
if(this.get("shouldAutoFitText")){a.css("font-size",this.get("calculatedFontSize")+"px")
}},didCreateLayer:function(a){arguments.callee.base.apply(this,arguments);this.scheduleMeasurement()
}};SC.AutoResizeManager={measurementQueue:SC.CoreSet.create(),scheduleMeasurementForView:function(a){this.measurementQueue.add(a);
SC.RunLoop.currentRunLoop.invokeLast(this.doBatchResize)},cancelMeasurementForView:function(a,b){this.measurementQueue.remove(a)
},doBatchResize:function(){if(this!==SC.AutoResizeManager){return SC.AutoResizeManager.doBatchResize()
}var b,e,g,h=this.measurementQueue,j,c,f,a;while((a=h.get("length"))>0){j=NO;b=h[a-1].get("batchResizeId");
for(f=a-1;f>=0;--f){e=h[f];if(e.get("batchResizeId")!==b){continue}if(e.get("isVisibleInWindow")&&e.get("shouldMeasureSize")&&(g=e.get("autoResizeLayer"))){c=e.get("autoResizeText");
if(!SC.none(c)&&c!==""&&!e.get("_cachedMetrics")&&!j){e.prepareLayerForStringMeasurement(g);
SC.prepareStringMeasurement(g,e.get("classNames"));j=YES}e.measureSize(YES)}h.remove(e);
if(!b){break}}if(j){SC.teardownStringMeasurement()}}}};Ip.LabelViewAutoResizeSupport={supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")
}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")
}.property("value").cacheable(),autoResizePadding:10,didCreateLayer:function(a){this.scheduleMeasurement()
},fitTextToFrame:function(){var a=this.$().css("line-height");this.$().css({"line-height":"inherit"});
arguments.callee.base.apply(this,arguments);this.$().css({"line-height":a})}};Ip.TextFieldViewAutoResizeSupport={supportsAutoResize:YES,autoResizeLayer:function(){return this.$input()[0]
}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")
}.property("value").cacheable(),autoResizePadding:{height:0,width:6}};Ip.DataSourceExceptionHandling={LOGGED_OUT_ERROR_MSG:"_We couldn't carry out that action because you have been logged out. Please log in again from the %@ home page.",_appIsUnloading:NO,initMixin:function(){SC.Event.add(window,"beforeunload",this,function(a){this._appIsUnloading=YES
})},notifyOfFailure:function(a,e){if(this._appIsUnloading){return}if(this._errorPane){this._errorPane.dismiss();
this._errorPane=null}if(e.get("isCancelled")){this._errorPane=SC.AlertPane.warn(a,"_The request was cancelled.".loc(),null,"_OK".loc())
}else{if(e.get("timedOut")){this._errorPane=SC.AlertPane.warn(a,"_The request timed out.".loc(),null,"_OK".loc())
}else{switch(e.get("status")){case 400:var c=e.get("encodedBody");this._errorPane=SC.AlertPane.warn(a,"_The request failed because the request was invalid or incomplete.".loc(),this.get("preProductionMode")?c:null,"_OK".loc());
break;case 401:this._errorPane=SC.AlertPane.warn(a,this.LOGGED_OUT_ERROR_MSG.loc(Cv.config.get("APP_NAME")),null,"_OK".loc(),{alertPaneDidDismiss:function(g,f){if(f===SC.BUTTON1_STATUS){if(window.opener){window.opener.location="/";
window.close()}else{window.location="/"}}}});break;case 404:var b=this.showReturnedErrorMessage(a,e);
break;case 500:this._errorPane=SC.AlertPane.warn(a,"_The request failed because of a server error.".loc(),e.getPath("request.address")+": "+e.get("status"),"_OK".loc());
break;case 503:if(this.respondsTo("_handle503Response")){this._handle503Response(a,e);
break}default:this._errorPane=SC.AlertPane.warn(a,"_The request was cancelled.".loc(),e.getPath("request.address")+": "+e.get("status"),"_OK".loc());
break}}}},showReturnedErrorMessage:function(f,b){try{var a=b.get("body")["error"];
var l=a.lc_message.loc();var i=a.code;var m=a.id;if(!a||!l){throw"No error details found!"
}var h=f;var j=l;var k="%@: %@".fmt(i,m);if(this.respondsTo("_custom404Response")){var c=this._custom404Response(f,l,i,m);
if(c){h=c[0]||"";j=c[1]||"";k=c[2]||""}}this._errorPane=SC.AlertPane.warn(h,j,k,"_OK".loc())
}catch(g){this._errorPane=SC.AlertPane.warn(f,"_The request failed because this item does not exist or is not available to you.".loc(),null,"_OK".loc())
}}};Ip.DetailedRecordStatus={isSaving:function(){var a=this.get("status");return(a===SC.Record.BUSY_COMMITTING||a===SC.Record.BUSY_CREATING||a===SC.Record.BUSY_DESTROYING)
}.property("status").cacheable()};Ip.EditingInterceptor={isEditingInterceptor:YES,editingRegistryController:null,_ei_isEditingDidChange:function(){var a=this.get("editingRegistryController");
if(!a){console.error("editingRegistryController not specified")}var b=this.get("isEditing");
b?a.register(this):a.unregister(this)}.observes("isEditing"),_ei_isDestroyedDidChange:function(){if(this.get("isDestroyed")){Cv.editingRegistryController.unregister(this)
}}.observes("isDestroyed"),closeEditViewWithSave:function(){console.log("Not implemented!!")
},closeEditViewWithoutSave:function(){console.log("Not implemented!!")},getRecord:function(){console.log("Not implemented! Basically need a handle to the content.")
},isAutoSaveable:YES,interceptorExitContextMessage:null,_discard:function(){console.log("discarding");
return NO}};Ip.HoverHelp={helpText:null,disableHelpText:YES,isHovering:NO,displayDelay:1000,helpTextWidth:function(){var a=this.get("helpText");
var b=Ip.metricsForString(a,"font-size: 12px; padding: 0 5px 0 5px; max-width: 400px; min-height: 16px;");
return b.width}.property("helpText").cacheable(),mouseEntered:function(){if(!this.get("disableHelpText")){this.set("isHovering",YES)
}},mouseExited:function(){this.set("isHovering",NO)},createHoverPane:function(){return SC.PickerPane.create(SC.Border,{layout:{width:this.get("helpTextWidth")+26,height:20},classNames:["inline-help-pane"],acceptsKeyPane:NO,acceptsFirstResponder:NO,contentView:SC.LabelView.extend({layout:{left:0,right:0,top:0,bottom:0},textAlign:SC.ALIGN_LEFT,icon:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/ip/en_us/A/resources/images/help-text-star.png",value:this.get("helpText")}),nextResponder:this})
},isHoveringDidChange:function(){if(this.get("isHovering")){this._helpPaneTimer=this.invokeLater(this.popupHoverPane,this.get("displayDelay"))
}else{if(this._helpPaneTimer){this._helpPaneTimer.invalidate();this._helpPaneTimer=null
}this._helpPaneTimer=this.invokeLater(this.hideHoverPane,this.get("displayDelay")/2)
}}.observes("isHovering"),popupHoverPane:function(){if(!this.get("isHovering")){return
}if(!this._helpPane){this._helpPane=this.createHoverPane()}this._helpPane.popup(this)
},hideHoverPane:function(){if(this.get("isHovering")){return}if(this._helpPane){this._helpPane.remove()
}}};Ip.Hoverable={isHovering:NO,mouseEntered:function(){this.set("isHovering",YES)
},mouseExited:function(){this.set("isHovering",NO)}};Ip.LocalizedUrl={prepareUrl:function(c,b){var a=[];
b=b===undefined?{}:b;if((c.indexOf("http")===0)||(c[0]&&c[0].indexOf("http")===0)){c=(typeof(c)=="object")?c.toString():c;
var f=new RegExp("^(http|https)://([a-zA-Z0-9-.:]+)[/]?(.+)?");var g=f.exec(c);if(g[1]&&g[2]){var e=g[1]+"://"+g[2];
a.push(e)}if(g[3]!="undefined"){c="/"+g[3]}}if(Ip.inDemoMode()&&((c.indexOf("/")===0)||(c[0].indexOf("/")===0))){a.push("/demo")
}else{if(!!Ip.getQueryStringParameter("account")&&!e){if(c.indexOf("/account/")===-1){a.push("/account/");
a.push(Ip.getQueryStringParameter("account"));a.push("/dv")}}}a.push(c);if(c.indexOf("?")===-1){a.push("?")
}if(b.lang!==false){if((c.indexOf("?lang=")===-1)&&(c.indexOf("&lang=")===-1)){a.push("&lang=");
a.push(Ip.currentLanguage())}}if(b.output!==false){if((c.indexOf("?output=")===-1)&&(c.indexOf("&output=")===-1)){a.push("&output=json")
}}if(!!Ip.getQueryStringParameter("session-id")){if((c.indexOf("?session-id=")===-1)&&(c.indexOf("&session-id=")===-1)){a.push("&session-id=");
a.push(Ip.getQueryStringParameter("session-id"))}}return a.join("")}};Ip.Poller={DEFAULT_ERROR_MESSAGE:"_Unknown error.".loc(),doesPoll:NO,doesPoll:function(a,b){if(SC.isArray(a)||parseInt(a)!=NaN){this.set("pollInterval",a)
}this._callbackParams=b;return this.set("doesPoll",YES)},pollInterval:20000,pollTries:0,pollDidChange:function(){if(this.get("doesPoll")){this.notify(202,this,"handleContinuePolling",this._callbackParams);
this.notify(400,this,"handleErrorPolling",this._callbackParams);this.notify(500,this,"handleErrorPolling",this._callbackParams)
}}.observes("doesPoll"),handleContinuePolling:function(c){var b=c.get("originalRequest"),a=b.getPath("pollInterval"),e=b.get("pollTries"),f=SC.isArray(a)?a[e]:a;
if(f){b.set("pollTries",e+1);this.invokeLater(function(){c.setPath("reqduest.count",(c.getPath("request.count")||0)+1);
c.get("request").resend()},f);return YES}return NO},handleErrorPolling:function(b,g){var a=g.store,e=g.query;
var f=b.get("body");var c=SC.$error(f.error||Ip.Poller.DEFAULT_ERROR_MESSAGE,"Request",b.get("status"));
a.dataSourceDidErrorQuery(e,c);return YES}};Ip.RecoverableRecord={exitErrorState:function(){if(this.get("status")&SC.Record.ERROR){var b=this.get("store");
var a=this.get("id")?SC.Record.READY_DIRTY:SC.Record.READY_NEW;b.writeStatus(this.get("storeKey"),a);
this.propertyDidChange("status")}}};Ip.TagFilteredDisplay={initMixin:function(){if(this.get("escapeHTML")){console.warn("TagFilteredDisplay requires escapeHTML to be NO in order to support display of whitelisted tags ( br, a, b, i, u).")
}},escapeHTML:NO,allowStylingTags:NO,formatter:function(c,b){var a,e=!!!b.get("allowStylingTags");
if(c){a=Ip.scrubHTML(c,e);a=Ip.newLinesToBreakTags(a)}return a}};Ip.TinCan={_parent:{},_children:{},id:"",spawnChildWindow:function(f,a,b,c){if(this._children[f]){throw"Ip.TinCan.spawnChildWindow: child id "+f+" already defined"
}a+="&iptcid="+f;var e=window.open(a,f,b);if(!e){return false}this._children[f]={window_object:e,ready:false};
if(c){this.setChildReadyListener(f,c)}return true},childStatus:function(a){return this._children[a]&&this._children[a].ready
},registerChild:function(a){this._children[a].ready=true;if(this._children[a].readyListener){this._tell(window,this._children[a].readyListener)
}},registerWithParent:function(b){this._parent=window.opener;this.id=b;var a={target:"Ip.TinCan",func:"registerChild",args:[b]};
this.tellParent(a)},registerChildClose:function(a){if(this._children[a].closeListener){this._tell(window,this._children[a].closeListener)
}this._children[a]=undefined},_getMessageTarget:function(b,f){var a=f.indexOf(".");
if(a==-1){return b[f]}var e=f.substr(0,a);var c=f.substr(a+1);return this._getMessageTarget(b[e],c)
},_tell:function(e,f){if(!f||!f.target||!f.func){throw"message not in expected format: need target and func members"
}var a=f.args?f.args:[];if(SC.browser.isIE){var c=e.Array();for(var b=0;b<a.length;
b++){c[b]=a[b]}a=c}var j=f.target;if(j.indexOf("document")==0||j.indexOf("window")==0||j.indexOf("frames")==0){if(a.length>8){throw ("Ip.TinCan error - call to "+j+"."+f.func+" blocked - too many args for host object method")
}}var h=this._getMessageTarget(e,j);if(h[f.func].apply){h[f.func].apply(h,a)}else{var g=[null,null,null,null,null,null,null,null];
for(var b=0;b<a.length;b++){g[b]=a[b]}h[f.func](g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7])
}},tellParent:function(a){if(!this._parent){throw"parent reference not defined; are you sure you're calling from the child?"
}this._tell(this._parent,a)},tellChild:function(c,a){if(!this._children[c]){throw"no such child "+c
}var b=this._children[c];if(!b.ready){throw"child "+c+" not ready"}this._tell(b.window_object,a)
},closeChild:function(b){var a={target:"window",func:"close"};this.tellChild(b,a)
},focusChild:function(b){var a={target:"window",func:"focus"};this.tellChild(b,a)
},setChildCloseListener:function(b,a){if(!this._children[b]){throw"no such child "+b
}this._children[b].closeListener=a},setChildReadyListener:function(b,a){if(!this._children[b]){throw"no such child "+b
}this._children[b].readyListener=a}};window[window.addEventListener?"addEventListener":"attachEvent"]((window.attachEvent?"on":"")+"load",function(){try{if(window.opener&&window.opener.Ip&&window.opener.Ip.TinCan){var a=document.location.href.match(/iptcid=([^?&]+)/);
if(!a){return}Ip.TinCan.registerWithParent(a[1]);window[window.addEventListener?"addEventListener":"attachEvent"]((window.attachEvent?"on":"")+"unload",function(){var c={target:"Ip.TinCan",func:"registerChildClose",args:[Ip.TinCan.id]};
Ip.TinCan.tellParent(c)},false)}}catch(b){console.log("caught: "+b)}},false);Ip.TransientRequest={executeTransientGet:function(a,b){this._executeTransientRequest("GET",a,null,b)
},executeTransientPost:function(a,b,c){this._executeTransientRequest("POST",a,b,c)
},executeTransientPut:function(a,b,c){this._executeTransientRequest("PUT",a,b,c)},executeTransientDelete:function(a,b,c){this._executeTransientRequest("DELETE",a,null,c)
},_executeTransientRequest:function(f,a,b,e){if(!a||SC.typeOf(a)!==SC.T_STRING||a.trim()===""){console.log("Error issuing request: url is invalid.");
if(e&&e.failureCallback){e.failureCallback(e)}return}var c;switch(f){case"GET":c=SC.Request.getUrl(a);
break;case"POST":c=SC.Request.postUrl(a);break;case"PUT":c=SC.Request.putUrl(a);break;
case"DELETE":c=SC.Request.deleteUrl(a);break;default:throw"No method defined!"}if(e.usePalladiumHeader){c=c.header("X-Palladium",1)
}c.set("isJSON",YES).notify(this,this._transientRequestCompleted,e).send(b)},_transientRequestCompleted:function(a,c){var b=a.get("body");
if(SC.ok(a)){if(c.successCallback){c.successCallback(b,a.status)}}else{if(c.failureCallback){c.failureCallback(b,a.status,a.get("errorObject"))
}}return true}};Ip.XHRResponse={finishRequest:function(c){var f=this.get("rawRequest"),a=f.readyState,e,b,g;
if(a===4){this.receive(function(h){if(!h){return}b=-1;try{b=f.status||0;b=b===1223?204:b
}catch(j){}if((b<200)||(b>=300)){try{g=f.statusText||""}catch(i){g=""}e=SC.$error(g||"HTTP Request failed","Request",b);
e.set("errorValue",this);this.set("isError",YES);this.set("errorObject",e)}this.set("status",b)
},this);f.onreadystatechange=function(){};return YES}return NO}};Ip.Configuration=SC.Object.extend({serverOverrideUrl:null,serverOverridableConfigKeys:{},queryStringParamOverrides:{},overridenConfigs:{},init:function(){for(var b in this.queryStringParamOverrides){b=b.toUpperCase();
var c=Ip.getQueryStringParameter(b.toLowerCase())||Ip.getQueryStringParameter(b.toUpperCase());
if(c){var f=this.queryStringParamOverrides[b];if(typeof f==="function"){f=f.apply(this,[c])
}this.set(b,f);this.overridenConfigs[b]=f}}var a=this.get("serverOverrideUrl");if(a){var e=this;
Ip.TransientRequest.executeTransientGet(a,{successCallback:function(i){if(i.config===undefined){return
}for(var g in i.config){var h=g.toUpperCase();if(typeof e.serverOverridableConfigKeys[h]=="undefined"||!e.serverOverridableConfigKeys[h]||typeof e.overridenConfigs[h]!="undefined"){continue
}e.set(h,i.config[g])}},failureCallback:function(){}})}},overridenQueryParamString:function(){var b="";
for(var a in Cv.config.overridenConfigs){var c=Cv.config.overridenConfigs[a];a=decodeURIComponent(a);
c=Ip.getQueryStringParameter(a.toLowerCase())||Ip.getQueryStringParameter(a.toUpperCase());
b+="%@=%@&".fmt(a.toLowerCase(),c)}return b}});Ip.ContinuousNetworkTester=SC.Object.extend({interval:1000,callback:null,callbackScope:null,imageUrl:null,isPaused:YES,_timer:null,_networkTester:null,init:function(){throw"Ip.ContinuousNetworkTester's required closure lib is currently commented out due to https://jira.iparadigms.com/browse/TII-6211";
arguments.callee.base.apply(this,arguments);var b=this.get("imageUrl");this._networkTester=new goog.net.NetworkTester(this._callback,this,b);
if(!b){b=this._networkTester.getUri().toString();this.set("imageUrl",b)}var a=this.get("interval");
this._timer=SC.Timer.schedule({target:this,action:"_startNetworkTester",interval:a,repeats:YES,continuousNetworkTester:this,isPaused:YES})
},start:function(){this.set("isPaused",NO)},stop:function(){this.set("isPaused",YES)
},isPausedDidChange:function(){var a=this.get("isPaused");var b=this._timer.get("isPaused");
if(a!==b){this._timer.set("isPaused",a)}}.observes("isPaused"),_startNetworkTester:function(){if(!this.get("isPaused")){if(!this._networkTester.isRunning()){this._networkTester.start()
}}},_callback:function(c){if(!this.get("isPaused")){var f=this.get("callback");if(f&&SC.typeOf(f)===SC.T_FUNCTION){var a=this.get("callbackScope");
try{f.call(a,c)}catch(b){console.error(b)}}}},imageUrlDidChange:function(){var a=this.get("imageUrl");
var c=this._networkTester.getUri().toString();if(a!==c){var b=goog.Uri.parse(a);b.makeUnique();
this._networkTester.setUri(b)}}.observes("imageUrl")});Ip.LazyTreeItem=SC.Object.extend(SC.TreeItemContent,{treeItemChildren:[],treeItemChildrenContentSet:NO,treeItemChildrenBindingPath:null,treeItemIsExpanded:NO,treeItemChildrenRecordStatus:null,loadingIcon:"loading-spinner",nonLoadingIcon:null,init:function(){arguments.callee.base.apply(this,arguments);
if(this.get("treeItemIsExpanded")){this.treeItemIsExpandedDidChange()}},treeItemIsExpandedDidChange:function(){if(this.get("treeItemIsExpanded")&&!this.get("treeItemChildrenContentSet")){this.treeItemChildrenBinding=this.bind("treeItemChildren",this.get("treeItemChildrenBindingPath"));
this.set("treeItemChildrenContentSet",YES)}}.observes("treeItemIsExpanded"),treeItemChildrenDidChange:function(){var a=this.get("treeItemChildren");
if(a&&SC.kindOf(a,SC.RecordArray)){this.treeItemChildrenRecordStatusBinding=this.bind("treeItemChildrenRecordStatus",".treeItemChildren.status")
}}.observes("treeItemChildren"),treeItemChildrenAreLoading:function(){var a=this.get("treeItemChildren");
if(a&&SC.kindOf(a,SC.RecordArray)){return(a.get("status")&SC.Record.BUSY)!==0}}.property("treeItemChildrenRecordStatus").cacheable(),icon:function(){if(this.get("treeItemChildrenAreLoading")){return this.get("loadingIcon")
}else{return this.get("nonLoadingIcon")}}.property("treeItemChildrenAreLoading","loadingIcon","nonLoadingIcon").cacheable()});
var LoadingTimer={returnResults:function(a){var e=Ip.getQueryStringParameter("session-id");
var c=document.createElement("IMG");var b="/grademark3/load_time.asp?dl="+a.pageLoadDuration+"&as="+a.appLoadDuration+"&user_type="+a.userType+"&read_id="+a.readId+"&ver=4.0&pkg=1";
if(e){b=b+"&session-id="+e}c.src=b}};Ip.PalladiumJSONRequest=SC.Request.extend(Ip.Poller,{init:function(){arguments.callee.base.apply(this,arguments);
this.header("X-Palladium",1);this.set("isJSON",YES)}});Ip.mixin({currentLanguage:function(){return Ip.getQueryStringParameter("lang")||"en_us"
},metricsForString:function(c,g,h){var f=0;if(SC.typeOf(g)==SC.T_STRING){var b;b=document.createElement("div");
b.setAttribute("style","position: absolute;"+g);b.style.cssText="position: absolute;"+g;
g=document.body.appendChild(b);f=1}SC.prepareStringMeasurement(g,h);var e=SC._metricsCalculationElement;
if((SC.browser.msie)&&(SC.browser.msie<8)){c=c+"&nbsp;"}e.innerHTML=c;var a={width:e.clientWidth,height:e.clientHeight};
e=null;SC.teardownStringMeasurement();if(f){document.body.removeChild(g)}return a
},truncateWithEllipsis:function(b,a){if(!b){return null}if(b.length>a){b=b.substring(0,(a-3))+"..."
}return b},scrubHTML:function(c,b){c=new String(c);c=c.replace(/\son\w+\s*=\s*(["|']).*?\1/img,"");
if(SC.browser.isIE){var a=(c.indexOf("\r\n")>-1);var f=(a?(/\r\n/g):(/\n/g));var e=(a?"\r\n":"\n");
c=c.replace(/<br(\s)*(\/)?>/gi,"&lt;br$1/&gt;");c=c.replace(f,"<br />");c=Ip.escapeHTML(c);
c=c.replace(/&lt;br \/&gt;/gi,e);c=c.replace(/&amp;lt;br(\s)*\/&amp;gt;/gi,"&lt;br$1/&gt;")
}else{c=Ip.escapeHTML(c)}if(!b){c=c.replace(/&lt;a(\s[^&]*href=([^&]|&amp;)+)&gt;(([^&]|&amp;)*)&lt;\/a&gt;/img,"<a$1>$3</a>");
c=c.replace(/&lt;b&gt;/gi,"<b>");c=c.replace(/&lt;\/b&gt;/gi,"</b>");c=c.replace(/&lt;i&gt;/gi,"<i>");
c=c.replace(/&lt;\/i&gt;/gi,"</i>");c=c.replace(/&lt;u&gt;/gi,"<u>");c=c.replace(/&lt;\/u&gt;/gi,"</u>")
}return c},scrubHTMLWithExceptions:function(j,b){j=new String(j);j=j.replace(/\son\w+\s*=\s*(["|']).*?\1/img,"");
if(SC.browser.isIE){var k=(j.indexOf("\r\n")>-1);var g=(k?(/\r\n/g):(/\n/g));var e=(k?"\r\n":"\n");
j=j.replace(/<br(\s)*(\/)?>/gi,"&lt;br$1/&gt;");j=j.replace(g,"<br />");j=Ip.escapeHTML(j);
j=j.replace(/&lt;br \/&gt;/gi,e);j=j.replace(/&amp;lt;br(\s)*\/&amp;gt;/gi,"&lt;br$1/&gt;")
}else{j=Ip.escapeHTML(j)}if(b instanceof Array){for(var c=0;c<b.length;c++){if(b[c]=="a"){j=j.replace(/&lt;a(\s[^&]*href=([^&]|&amp;)+)&gt;(([^&]|&amp;)*)&lt;\/a&gt;/img,"<a$1>$3</a>")
}else{var f=new RegExp("&lt;"+b[c]+"[\\s]*&gt;","gi");var a=new RegExp("&lt;/"+b[c]+"[\\s]*&gt;","gi");
var h=new RegExp("&lt;"+b[c]+"[\\s]*/&gt;","gi");j=j.replace(f,"<"+b[c]+">");j=j.replace(a,"</"+b[c]+">");
j=j.replace(h,"<"+b[c]+" />")}}}return j},unscrubHTML:function(c,b){c=new String(c);
if(!b){c=c.replace(/<a(\s[^<]*href=[^<]+)>([^<]*)<\/a>/img,"&lt;a$1&gt;$2&lt;/a&gt;");
c=c.replace(/<b>/gi,"&lt;b&gt;");c=c.replace(/<\/b>/gi,"&lt;/b&gt;");c=c.replace(/<i>/gi,"&lt;i&gt;");
c=c.replace(/<\/i>/gi,"&lt;/i&gt;");c=c.replace(/<u>/gi,"&lt;u&gt;");c=c.replace(/<\/u>/gi,"&lt;/u&gt;")
}if(SC.browser.isIE){var a=(c.indexOf("\r\n")>-1);var f=(a?(/\r\n/g):(/\n/g));var e=(a?"\r\n":"\n");
c=c.replace(/&lt;br(\s)*\/&gt;/gi,"&amp;lt;br$1/&amp;gt;");c=c.replace(f,"&lt;br /&gt;");
c=Ip.unescapeHTML(c);c=c.replace(/<br \/>/gi,e);c=c.replace(/&lt;br(\s)*\/&gt;/gi,"<br$1/>")
}else{c=Ip.unescapeHTML(c)}return c},spacesToNonbreakingSpaces:function(a){a=new String(a);
if(a){a=a.replace(/(\r)? (?!(\/)?(>|&gt;))/g,"&nbsp;");a=a.replace(/(\r)?((&nbsp;)+)&nbsp;(?!(\/)?(>|&gt;))/g," $2")
}return a},newLinesToBreakTags:function(a){if(!a){return a}a=new String(a);if(a){a=a.replace(/(\r)?\n/g,"<br />");
a=a.replace(/\u2028/g,"<br />");a=a.replace(/\u2029/g,"<br />")}return a},breakTagsToNewLines:function(c,a){if(!c){return c
}c=new String(c);if(c){var b=(c.indexOf("\r\n")>-1);if(!SC.browser.isIE||!b||a){c=c.replace(/<br(\s)*(\/)?>/gi,"\n")
}else{c=c.replace(/<br(\s)*(\/)?>/gi,"\r\n")}}return c},stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")
},stripTagsWithException:function(a,b){var c=new RegExp("<(?![br|b|i|u]s*/?)[^>]+>","gi");
return a.replace(c,"")},escapeHTML:function(a){if(!a){return a}var c=document.createElement("div");
var b=document.createTextNode(a);c.appendChild(b);return c.innerHTML},unescapeHTML:function(b){if(!b){return b
}var c=document.createElement("div");var a=Ip.stripTags(b);c.innerHTML=a;return c.childNodes[0]?c.childNodes[0].nodeValue:a
},urlsToAnchorTags:function(c){if(!c){return c}c=" "+c;var b=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?([A-Za-z]+\w*)(\.[A-Za-z]+\w*)*(:[0-9]+)?(\/[\w#!:.?+=&%@!\-\/]*)*)(?![\w#!:.?+=&%@!\-\/'"])/gi;
c=c.replace(b,'<a href="$1" target="_blank">$1</a>');var a=/([^'"\w])((?:ftp|http|https):\/\/(?:\w+:{0,1}\w*@)?(?:[A-Za-z]+\w*)(?:\.[A-Za-z]+\w*)*(?::[0-9]+)?(?:\/[\w#!:.?+=&%@!\-\/]*)*)(['"])/gi;
c=c.replace(a,'$1<a href="$2" target="_blank">$2</a>$3');c=c.substring(1);return c
},anchorTagsToUrls:function(a){if(!a){return a}var b=/<a href="([^>]+)" target="_blank">[^>]+<\/a>/gi;
a=a.replace(b,"$1");return a},syncArrays:function(b,c){var a=[];c.forEach(function(e){if(b.indexOf(e)===-1){a.push(e)
}});a.forEach(function(e){c.removeObject(e)});b.forEach(function(h,f){var e=c.indexOf(h);
if(f!==e){if(e!==-1){c.removeAt(e)}var g=c.get("length");if(f>=g){c.pushObject(h)
}else{c.insertAt(f,h)}}})},getQueryStringParameter:function(a){return this.findParameterInQueryString(a,window.location.search.substring(1))
},isAbsoluteUrl:function(a){return(a.indexOf("http://")===0||a.indexOf("https://")===0||a.indexOf("ftp://")===0)
},findParameterInUrl:function(a,b){var c=null;var f=b.split("?");if(f.length>1){var e=f[1];
c=this.findParameterInQueryString(a,e)}return c},findParameterInQueryString:function(a,j){var c="&";
if(j.indexOf("&amp;")>-1){c="&amp;"}var f=j.split(c);var b=f.length;var g=[];for(var e=0;
e<b;e++){var h=f[e].split("=");if(h[0]==a){g.push(h[1])}}if(g.length>1){return g}else{if(g.length===1){return g[0]
}else{return null}}},targetIsInElement:function(a,b,c){b=" "+b+" ";return this._targetIsInElement(a,b,c)
},_targetIsInElement:function(b,a,g){var c=NO;var e=b.target;while(e&&(e!==g)&&(e!==document.body)){var f=" "+e.className+" ";
if(f.indexOf(a)!==-1){c=YES;break}e=e.parentNode}return c},manageParentSession:function(){setInterval(function(){try{if(window.opener&&window.opener.stopTimer){window.opener.application_open=true;
window.opener.stopTimer()}}catch(a){}},600000)},downloadFromUrl:function(a,b){b=b||"_There was a problem with your download. Please try again.".loc();
$.fileDownload(a,{successCallback:function(c){},failCallback:function(e,c){SC.AlertPane.error("_Error".loc(),b,null,"_OK".loc())
}})},stripTrailingWhitespace:function(a){if(!a){return a}return a.replace(/\s+$/,"")
},openAndFocusWindow:function(a,c,f,e){var b=window.open(a,c,f);setTimeout(function(){var g=YES;
if(!b||typeof b=="undefined"){g=NO}else{if(b.closed||typeof b.closed=="undefined"){g=NO
}else{if(!SC.browser.isIE&&(!b.document||(!b.outerHeight&&!b.outerWidth))){g=NO}}}if(g){b.focus()
}else{e()}},500)},clone:function(c){if(c===null||typeof(c)!="object"){return c}var a=c.constructor();
for(var b in c){a[b]=Ip.clone(c[b])}return a},stringToDateObjectYMD:function(a){return Ip._stringToDateObject(a,true)
},stringToDateObjectMDY:function(a){return Ip._stringToDateObject(a,false)},_stringToDateObject:function(g,e){var h,a,c,b;
if(!g){return}if(g.indexOf("/")>0){b="/"}else{if(g.indexOf("-")>0){b="-"}else{return
}}var f=g.split(b);if(e){c=f[0];h=f[1];a=f[2]}else{h=f[0];a=f[1];c=f[2]}if(isNaN(h)||isNaN(a)||isNaN(c)){return
}c=parseInt(c,10);h=parseInt(h,10);a=parseInt(a,10);if(c<1990){c=c<90?2000+c:1900+c
}return SC.DateTime.create({year:c,month:h,day:a})},escapeRegexSpecialCharacters:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")
}});Ip.AnchorTagView=SC.View.extend({title:null,href:null,toolTip:null,displayProperties:["href","toolTip","title"],render:function(c){var a=this.get("href"),b=this.get("toolTip"),e=this.get("title");
c.push("<a");if(a){c.push(' href="%@"'.fmt(a))}if(b){c.push(' title="%@"'.fmt(b))
}c.push(">");if(e){c.push(e)}c.push("</a>")}});Ip.DynamicTextFieldView=SC.TextFieldView.extend({dynamicHeight:function(){var a=this.get("frame");
return a.height}.property("layout").cacheable(),dynamicStyles:"",minHeight:30,maxHeight:200,padding:5,classNames:["dynamic-text-field-view"],displayProperties:["classNames"],_timeout:null,computeHeight:function(){this._computeHeight()
},_escapeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
},_computeHeight:function(){var a=0;var h=this.get("value");if(h){if(this.get("isTextArea")){var g=h;
h=Ip.newLinesToBreakTags(this._escapeHTML(h));if(g.charAt(g.length-1)==="\n"){h=h+"&nbsp;"
}}var e=0||this.get("padding");var b=this.get("layer");var c=0;if(b){c=b.offsetWidth
}c=c||this.get("frame").width;var f="word-wrap: break-word; overflow: hidden; max-width: %@px; padding: %@px; %@".fmt(c-(e*2),e,this.get("dynamicStyles"));
a=SC.heightForString(h,c,f,null,true)}if(a>this.get("maxHeight")){this.addClassName("overflowing")
}else{this.removeClassName("overflowing")}a=Math.max(a,this.get("minHeight"));a=Math.min(a,this.get("maxHeight"));
this.adjust("height",a)},valueDidChange:function(){this.computeHeight()}.observes("value"),frameDidChange:function(){var a=this.get("frame");
if(!a){a={width:0,height:0}}if(!this._prevFrame){this.computeHeight()}else{if(a&&(a.width!==this._prevFrame.width)||(a.height!==this._prevFrame.height)){this.computeHeight()
}}this._prevFrame=a}.observes("frame"),parentFrameDidChange:function(){var a=this.get("layout");
if((!a.width&&(a.width!==0))&&((a.left>=0)&&(a.right>=0))){var b=this.getPath("parentView.frame");
if(!this._prevParentFrame){this.computeHeight()}else{if((b.width!==this._prevParentFrame.width)||(b.height!==this._prevParentFrame.height)){this.computeHeight()
}}this._prevParentFrame=b}}.observes(".parentView.frame"),keyDown:function(){var a=arguments.callee.base.apply(this,arguments);
this.computeHeight();return a},init:function(){arguments.callee.base.apply(this,arguments);
this.computeHeight()},addClassName:function(a){if(!this.hasClassName(a)){var b=this.get("classNames").concat(a);
this.set("classNames",b)}},removeClassName:function(a){if(this.hasClassName(a)){var b=this.get("classNames").concat()||[];
b.removeObject(a);this.set("classNames",b)}},hasClassName:function(b){var c=this.get("classNames");
var a=(c&&(c.indexOf(b)!==-1));return a}});Ip.ImageView=SC.ImageView.extend({imageDidLoad:function(a,b){arguments.callee.base.apply(this,arguments);
this.updateLayerIfNeeded()},isDoneLoading:function(){return this.get("status")!==SC.IMAGE_STATE_LOADING
}.property("status").cacheable()});Ip.LoadingView=SC.View.extend({layout:{top:0,bottom:0,left:0,right:0},classNames:["loading-view"],isVisible:YES,showError:NO,childViews:"loadingImageView labelView".w(),showText:YES,loadingText:"_Loading...".loc(),errorText:"_This content could not be loaded.".loc(),loadingImageView:Ip.ImageView.design({layout:{centerX:0,width:32,centerY:0,height:32},classNames:"loading-image"}),labelView:SC.LabelView.design({layout:{centerX:5,width:200,centerY:35,height:32},classNames:["loading-text"],isVisibleBinding:".parentView.showText",showErrorBinding:".parentView.showError",loadingTextBinding:".parentView.loadingText",errorTextBinding:".parentView.errorText",value:function(){return this.get("showError")?this.get("errorText"):this.get("loadingText")
}.property("showError","loadingText","errorText").cacheable(),textAlign:SC.ALIGN_CENTER})});
Ip.RadioView=SC.RadioView.extend({itemClassNameKey:null,render:function(b,i){var s,k,p,t,q,f,a,e,o,h,m,g,c,l=this.get("_displayItems"),n=this.get("value"),j=SC.isArray(n);
b.addClass(this.get("layoutDirection"));if(j&&n.length<=0){n=n[0];j=NO}if(this._renderAsFirstTime){i=YES;
this._renderAsFirstTime=NO}if(i){b.attr("role","radiogroup");t=SC.guidFor(this);q=l.length;
for(k=0;k<q;k++){s=l[k];p=s[3];if(p){f=(p.indexOf("/")>=0)?p:SC.BLANK_IMAGE_URL;a=(f===p)?"":p;
p='<img src="'+f+'" class="icon '+a+'" alt="" />'}else{p=""}if(s){o=(j)?(n.indexOf(s[1])>=0):(n===s[1])
}else{o=NO}g=this._getSelectionStateClassNames(s,o,n,j,false);c=s[4];h=this.escapeHTML?SC.RenderContext.escapeHTML(s[0]):s[0];
b.push('<div class="sc-radio-button ',g," ",c,'" ','aria-checked="',o?"true":"false",'" ','role="radio"',' index="',k,'">','<span class="button"></span>','<span class="sc-button-label">',p,h,"</span></div>")
}}else{this.$(".sc-radio-button").forEach(function(u){u=this.$(u);k=parseInt(u.attr("index"),0);
s=(k>=0)?l[k]:null;if(s){o=(j)?(n.indexOf(s[1])>=0):(n===s[1])}else{o=NO}m=this._getSelectionStateClassNames(s,o,n,j,true);
u.attr("aria-checked",o?"true":"false");u.setClass(m);k=m=null},this)}},_displayItems:function(){var h=this.get("items"),e=this.get("localize"),s=this.get("itemTitleKey"),q=this.get("itemValueKey"),f=this.get("itemIsEnabledKey"),o=this.get("itemIconKey"),a=this.get("itemClassNameKey"),g=[],j=(h)?h.get("length"):0,p,k,n,m,c,l,i,b;
for(m=0;m<j;m++){p=h.objectAt(m);if(SC.typeOf(p)===SC.T_ARRAY){k=p[0];n=p[1]}else{if(p){if(s){k=p.get?p.get(s):p[s]
}else{k=(p.toString)?p.toString():null}if(q){n=p.get?p.get(q):p[q]}else{n=p}if(f){l=p.get?p.get(f):p[f]
}else{l=YES}if(o){i=p.get?p.get(o):p[o]}else{i=null}if(a){b=p.get?p.get(a):p[a]}else{i=null
}}else{k=n=i=null;l=NO}}if(e){k=k.loc()}g.push([k,n,l,i,b])}return g}.property("items","itemTitleKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemClassNameKey").cacheable()});
Ip.SaveMaskView=SC.View.extend(Ip.Animatable,{displayProperties:["classNames"],isVisible:YES,showError:NO,childViews:"labelView manualRetryView".w(),showText:YES,loadingText:"_Loading...".loc(),errorText:"_This content could not be loaded.".loc(),labelView:SC.LabelView.design({layout:{},classNames:["save-mask-text"],useStaticLayout:YES,isVisibleBinding:".parentView.showText",showErrorBinding:".parentView.showError",loadingTextBinding:".parentView.loadingText",errorTextBinding:".parentView.errorText",value:function(){return this.get("showError")?this.get("errorText"):this.get("loadingText")
}.property("showError","loadingText","errorText").cacheable(),textAlign:SC.ALIGN_CENTER}),manualRetryView:SC.LabelView.design({layout:{},classNames:["save-mask-retry-link"],useStaticLayout:YES,isVisible:NO,value:"_Click to retry".loc(),textAlign:SC.ALIGN_CENTER,click:function(){var b=this.getPath("parentView.parentView");
var a=this.getPath("parentView");a.doSave(b,0)}})});Ip.SceneView=SC.SceneView.extend({nowShowingDidChange:function(){if(this.get("contentView")){this.setPath("contentView.isFrozen",YES)
}var a=this.get("nowShowing");if(a===SC.CONTENT_SET_DIRECTLY){return}if(SC.typeOf(a)===SC.T_STRING&&a.length>0){if(a.indexOf(".")>0){a=SC.objectForPropertyPath(a)
}else{a=SC.objectForPropertyPath(a,this)}}if(SC.typeOf(a)===SC.T_CLASS){if(a.kindOf(SC.View)){a=a.create()
}else{a=null}}if(a&&!(a instanceof SC.View)){a=null}this.set("contentView",a);if(a){a.set("isFrozen",NO)
}}.observes("nowShowing")});Ip.SegmentedView=SC.SegmentedView.extend({itemClassNameKey:null,itemKeys:"itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey itemClassNameKey".w(),displayItems:function(){var g=this.get("items"),c=this.get("localize"),l=null,e,j,f=[],h=g.get("length"),i,k,b=SC._segmented_fetchKeys,a=SC._segmented_fetchItem;
for(i=0;i<h;i++){k=g.objectAt(i);if(SC.none(k)){continue}e=SC.typeOf(k);if(e===SC.T_STRING){j=[k.humanize().titleize(),k,YES,null,null,null,null,i]
}else{if(e!==SC.T_ARRAY){if(l===null){l=this.itemKeys.map(b,this)}j=l.map(a,k);j[j.length]=i;
if(!l[0]&&k.toString){j[0]=k.toString()}if(!l[1]){j[1]=k}if(!l[2]){j[2]=YES}}}if(c&&j[0]){j[0]=j[0].loc()
}if(c&&j[5]&&SC.typeOf(j[5])===SC.T_STRING){j[5]=j[5].loc()}f[f.length]=j}return f
}.property("items","itemTitleKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemWidthKey","itemToolTipKey","itemClassNameKey").cacheable(),renderDisplayItems:function(e,m){var p=this.get("value"),j=SC.isArray(p),t=this.get("activeIndex"),k=m.length,o,n,b,l,g,s,a,c,h,f,q;
for(h=0;h<k;h++){g=e.begin("a").attr("role","button");s=m[h];o=s[0];n=s[3];a=s[5];
itemClassName=s[6];f={};q=[];if(this.get("layoutDirection")==SC.LAYOUT_HORIZONTAL){f.display="inline-block"
}q.push("sc-segment");if(!s[2]){q.push("disabled")}if(h===0){q.push("sc-first-segment")
}if(h===(k-1)){q.push("sc-last-segment")}if(h!==0&&h!==(k-1)){q.push("sc-middle-segment")
}if(j?(p.indexOf(s[1])>=0):(s[1]===p)){q.push("sel")}if(t===h){q.push("active")}if(itemClassName){q.push(itemClassName)
}if(s[4]){c=s[4];f.width=c+"px"}g.addClass(q);g.addStyle(f);if(a){g.attr("title",a)
}if(n){b=(n.indexOf("/")>=0)?n:SC.BLANK_IMAGE_URL;l=(b===n)?"":n;n='<img src="'+b+'" alt="" class="icon '+l+'" />'
}else{n=""}g.push('<span class="sc-button-inner"><label class="sc-button-label">',n+o,"</label></span>");
g.end()}}});SC._TAB_ITEM_KEYS="itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey itemActionKey itemTargetKey itemClassNameKey".w();
Ip.SimpleEditableTextFieldView=SC.View.extend({classNames:["simple-editable-text"],childViews:["readView","editView"],isEditing:NO,isTextArea:NO,maxLength:5096,hint:null,value:"this is really something",allowStylingTags:NO,applyImmediately:YES,init:function(){arguments.callee.base.apply(this,arguments);
this.childPropertiesDidChange()},childPropertiesDidChange:function(){var e=this.get("isEditing"),c=this.get("allowStylingTags"),f=this.get("isTextArea"),g=this.get("hint"),a=this.get("maxLength"),b=this.get("applyImmediately");
this.setPath("readView.isVisible",!e);this.setPath("readView.allowStylingTags",c);
this.setPath("editView.isVisible",e);this.setPath("editView.isTextArea",f);this.setPath("editView.hint",g);
this.setPath("editView.maxLength",a);this.setPath("editView.applyImmediately",b)}.observes("isEditing"),readView:SC.LabelView.extend(Ip.TagFilteredDisplay,Ip.AnchorTagActions,{classNames:["read-view"],valueBinding:".parentView.value"}),editView:SC.TextFieldView.extend({classNames:["edit-view"],valueBinding:".parentView.value"})});
Ip.SplitView=SC.SplitView.extend({doubleClickInThumbView:function(b,e){var a=this._topLeftView,c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);
if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)
}else{this._updateBottomRightThickness(this.bottomRightThickness())}if(!a.get("isCollapsed")){this._uncollapsedThickness=null
}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)
}else{this._updateBottomRightThickness(-1*this._uncollapsedThickness)}a._uncollapsedThickness=null
}this._setCursorStyle();return true}});Ip.StandardScrollingMenuPane=SC.MenuPane.extend({maxHeight:5000,adjust:function(){if(arguments[0]==="height"&&arguments[1]>this.get("maxHeight")){arguments[1]=this.get("maxHeight")
}return arguments.callee.base.apply(this,arguments)},createChildViews:function(){var b,a,c;
b=this.createChildView(SC.ScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});
a=this._menuView=SC.View.create();c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});
a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this}});
Ip.SwitchView=SC.View.extend(SC.Control,{classNames:["switch-view"],childViews:"sliderView".w(),value:NO,isEnabled:YES,sliderView:SC.View.design(SC.Animatable,{layout:{top:0,left:0},classNames:["slider-view"],render:function(a){a.push('<div class="slider">');
a.push('<div class="left"><span>%@</span></div>'.fmt("ON".loc()));a.push('<img src="%@" />'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/ip/en_us/A/resources/images/switch.png"));
a.push('<div class="right"><span>%@</span></div>'.fmt("OFF".loc()));a.push("</div>")
},isOnBinding:".parentView.value",transition:function(){if(this.get("isOn")){this.adjust("left",0,{duration:0.3,timing:SC.Animatable.TRANSITION_EASE_IN_OUT})
}else{this.adjust("left",-37,{duration:0.3,timing:SC.Animatable.TRANSITION_EASE_IN_OUT})
}}.observes("isOn")}),click:function(a){var b=this.get("isEnabled");if(b){this.set("value",!this.get("value"))
}return YES}});Ip.TextLinkView=SC.LabelView.extend({tagName:"a",url:null,click:function(){var a=this.get("url");
if(!a){throw"No url defined!"}else{Ip.openAndFocusWindow(a,"_blank","scrollbars=1,resizable=1")
}}});Ip.UploadView=SC.View.extend({classNames:"upload-view",value:null,uploadTarget:null,status:"",inputName:"Filedata",displayProperties:"uploadTarget".w(),render:function(c,i){var e=this.get("layerId")+"Frame";
var h=this.get("uploadTarget");var b=this.get("label");var a=this.get("inputName");
if(i){this._firstTime=YES;c.push('<form method="post" enctype="multipart/form-data" target="'+e+'" action="'+h+'">');
c.push('<input type="file" name="'+a+'" />');c.push("</form>");c.push('<iframe frameborder="0" id="'+e+'" name="'+e+'" style="width:0; height:0;"></iframe>')
}else{var g=this._getForm();if(g){g.action=h}}arguments.callee.base.apply(this,arguments)
},didCreateLayer:function(){var b=this.$("iframe");var a=this.$("input");SC.Event.add(b,"load",this,this._uploadDone);
SC.Event.add(a,"change",this,this._checkInputValue);this.set("status",SCUI.READY)
},willDestroyLayer:function(){var b=this.$("iframe");var a=this.$("input");SC.Event.remove(b,"load",this,this._uploadDone);
SC.Event.remove(a,"change",this,this._checkInputValue);arguments.callee.base.apply(this,arguments)
},startUpload:function(){var a=this._getForm();if(a){a.submit();this.set("status",SCUI.BUSY)
}},clearFileUpload:function(){var b=this._getForm();if(b){var a=this.$("input");SC.Event.remove(a,"change",this,this._checkInputValue);
b.innerHTML=b.innerHTML;this.set("status",SCUI.READY);this.set("value",null);a=this.$("input");
SC.Event.add(a,"change",this,this._checkInputValue)}},validateFileSelection:function(){var a=this.get("value");
if(a){return YES}return NO},_uploadDone:function(){if(this.get("status")!==SCUI.BUSY){return
}SC.RunLoop.begin();this.set("status",SCUI.DONE);var a=this.get("delegate")?this.get("delegate"):this;
this.invokeDelegateMethod(a,"uploadViewDidComplete",this.get("response"));SC.RunLoop.end()
},response:function(){if(this.get("status")!==SCUI.DONE){return null}var a=null;try{if(this.$("iframe")[0].contentWindow){a=this.$("iframe")[0].contentWindow.document.body.innerHTML
}else{if(this.$("iframe")[0].contentDocument){a=this.$("iframe")[0].contentDocument.body.innerHTML
}else{throw"Unable to retrieve file upload return value. Unknown iframe DOM structure."
}}try{a=JSON.parse(a)}catch(b){throw ("Unable to parse file upload return value.\n\n"+b)
}}catch(c){return{error:c}}return a}.property("status").cacheable(),_checkInputValue:function(){SC.RunLoop.begin();
var a=this._getInput();this.set("value",a.value);SC.RunLoop.end()},_getForm:function(){var a=this.$("form");
if(a&&a.length>0){return a.get(0)}return null},_getInput:function(){var a=this.$("input");
if(a&&a.length>0){return a.get(0)}return null}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("ip")
}SC.stringsFor("en_us",{"_One or more of your scale option columns do not have point values.":"One or more of your scale option columns do not have point values.","_Rubrics and Forms":"Rubrics and Forms","_Are you sure you want to do this?":"Are you sure you want to do this?","_Navigate to text-only Similarity Report":"Navigate to text-only Similarity Report","_crawled on %@":"crawled on %@","_Page: %@1 of %@2":"Page: %@1 of %@2","_%@ words &bull; %@ matches &bull; %@ sources":"%@ words &bull; %@ matches &bull; %@ sources","_DOCUMENT ID":"DOCUMENT ID","_PROCESSED ON":"PROCESSED ON","_Quotes Excluded":"Quotes Excluded","_Quotes Included":"Quotes Included","_Bibliography Excluded":"Bibliography Excluded","_Bibliography Included":"Bibliography Included","_Please return here if you ever need to generate a new class access code.":"Please return here if you ever need to generate a new class access code.","_Generate code":"Generate code","_Get class access code for iPad app":"Get class access code for iPad app","_Turnitin for iPad&reg; Class Access Code":"Turnitin for iPad&reg; Class Access Code","_Document Info":"Document Info",_Sets:"Sets","_You will need this code to access your class through the Turnitin iPad app.":"You will need this code to access your class through the Turnitin iPad app.","_%@ - %@ sources":"%@ - %@ sources","_[_1] [_2]":"[_1] [_2]","_Could not load Document Viewer":"Could not load Document Viewer","_View source in web page":"View source in web page","_Percent of document text that matches to selected content repositories":"Percent of document text that matches to selected content repositories","_We couldn't carry out that action because you have been logged out.":"We couldn't carry out that action because you have been logged out.","_%@ word":"%@ word","_%@ source":"%@ source","_%@ sources":"%@ sources","_There was a problem processing this paper in the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.":"There was a problem processing this paper in the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.","_There was an error generating the class access code.":"There was an error generating the class access code.","_We have detected that you are using Internet Explorer 7 (IE7) as your browser. We will be ending support for IE7 on March 15, 2013. This means we will no longer test new features in IE7 and will no longer fix issues that are browser related for IE7 as of March 15, 2013.":"We have detected that you are using Internet Explorer 7 (IE7) as your browser. We will be ending support for IE7 on March 15, 2013. This means we will no longer test new features in IE7 and will no longer fix issues that are browser related for IE7 as of March 15, 2013.","_We couldn't carry out that action because you have been logged out. Please log in again from the %@ home page.":"We couldn't carry out that action because you have been logged out. Please log in again from the %@ home page.","_We couldn't carry out that action because you have been logged out.":"We couldn't carry out that action because you have been logged out.","_Exclude sources that are less than:":"Exclude sources that are less than:","_Don't exclude":"Don't exclude","_Download PDF of current report view":"Download PDF of current report view","_Exclude Sections:":"Exclude Sections:",_Abstract:"Abstract","_Methods and Materials":"Methods and Materials","_Includes variations: Methods, Method, Materials, Materials and Methods":"Includes variations: Methods, Method, Materials, Materials and Methods","_Create new marking form":"Create new marking form","_Duplicate this %@":"Duplicate this %@","_Marking forms cannot contain scales.":"Marking forms cannot contain scales.","_Enter feedback":"Enter feedback","_Apply score to grade":"Apply score to grade","_Rename this %@":"Rename this %@","_create a new marking form":"create a new marking form","_Unsupported scoring method.":"Unsupported scoring method.","_Total Score":"Total Score","_Delete this %@":"Delete this %@",_modify:"modify","_marking form":"marking form","_The scale name can be no longer than %@ characters.":"The scale name can be no longer than %@ characters.","_If you leave now, your unsaved changes will be lost.":"If you leave now, your unsaved changes will be lost.","_Enable scoring":"Enable scoring","_Are you sure you want to leave without saving your changes?":"Are you sure you want to leave without saving your changes?","_Loading Rubric/Form Manager...":"Loading Rubric/Form Manager...","_Loading QuickMark Manager...":"Loading QuickMark Manager...","_Your grading form is expanded in another window.":"Your grading form is expanded in another window.","_Create new grading form":"Create new grading form","_Grading Form":"Grading Form","_The attached grading form is locked by the master class instructor.":"The attached grading form is locked by the master class instructor.","_Attach this grading form to this assignment":"Attach this grading form to this assignment","_Duplicate this grading form":"Duplicate this grading form","_Enter grading form name here":"Enter grading form name here","_To access your grading form in the sidebar, close the other window containing your expanded grading form.":"To access your grading form in the sidebar, close the other window containing your expanded grading form.","_TOTAL SCORE":"TOTAL SCORE","_TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.":"TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.","_Allows each criterion to contain a score. Numbers will be automatically summed up.":"Allows each criterion to contain a score. Numbers will be automatically summed up.","_Detach this grading form from this assignment":"Detach this grading form from this assignment","_Delete this grading form":"Delete this grading form","_Apply total score to grade":"Apply total score to grade","_Please note: Grading forms are not yet available on the iPad app.":"Please note: Grading forms are not yet available on the iPad app.","_The criterion name can be no longer than 30 characters.":"The criterion name can be no longer than 30 characters.","_You are not the owner of this grading form.":"You are not the owner of this grading form.","_This grading form has already been used to score papers.":"This grading form has already been used to score papers.","_Expanded grading form is unavailable because no grading form has been attached to this assignment.":"Expanded grading form is unavailable because no grading form has been attached to this assignment.","_This form cannot be edited":"This form cannot be edited","_Bring the grading form to the top.":"Bring the grading form to the top.","_No rubric or grading form is attached to this assignment.":"No rubric or grading form is attached to this assignment.","_Rename this grading form":"Rename this grading form","_create a new grading form":"create a new grading form","_TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.":"TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.","_Use full size grading form in a new window":"Use full size grading form in a new window","_e-rater&reg; is not available for this paper because the %@ document processing system could not process the needed information from the document.":"e-rate&reg; is not available for this paper because the %@ document processing system could not process the needed information from the document.","_REPOSITORIES SEARCHED":"REPOSITORIES SEARCHED",_help:"help","_Failed to save grading form feedback.":"Failed to save grading form feedback.",_saving:"saving",_saved:"saved","_Click to retry":"Click to retry",_loading:"loading",_refreshing:"refreshing",_error:"error","_retrying %@ more time(s)":"retrying %@ more time(s)","_Are you sure you want to share this grading form with the account?":"Are you sure you want to share this grading form with the account?","_Are you sure you want to share this grading form with all sections?":"Are you sure you want to share this grading form with all sections?","_You are about to delete a QuickMark set. Are you sure?":"You are about to delete a QuickMark set. Are you sure?","_PAGE COUNT":"PAGE COUNT","_The Originality Report is not done generating for this submission.":"The Originality Report is not done generating for this submission.",_Multiple:"Multiple","_Are you sure you want to delete this grading form?":"Are you sure you want to delete this grading form?","_Are you sure you want to stop sharing this grading form with the account?":"Are you sure you want to stop sharing this grading form with the account?","_Associate a criterion":"Associate a criterion","_Click to view the %@1 mark associated with %@2":"Click to view the %@1 mark associated with %@2","_SUBMISSION DATE":"SUBMISSION DATE","_Click to view the %@1 marks associated with %@2":"Click to view the %@1 marks associated with %@2","_Submission Info":"Submission Info",_Show:"Show","_The Originality Report is not available for this submission.":"The Originality Report is not available for this submission.","_Multiple criteria":"Multiple criteria","_FILE NAME":"FILE NAME","_Download submitted file":"Download submitted file","_Are you sure you want to stop sharing this grading form with all sections?":"Are you sure you want to stop sharing this grading form with all sections?","_OriginalityCheck is not available because no file was submitted.":"OriginalityCheck is not available because no file was submitted.","_FILE SIZE":"FILE SIZE","_CHARACTER COUNT":"CHARACTER COUNT","_The rubric name must be less than 30 characters long.":"The rubric name must be less than 30 characters long.","_SUBMISSION COUNT":"SUBMISSION COUNT","_No marks are associated with %@":"No marks are associated with %@","_SUBMISSION ID":"SUBMISSION ID","_OriginalityCheck isn't available for this submission because %@ could not extract enough text to generate an Originality Report.":"OriginalityCheck isn't available for this submission because %@ could not extract enough text to generate an Originality Report.","_Couldn't access voice file.":"Couldn't access voice file.","_N/A":"N/A","_Download submitted file:":"Download submitted file:","_Loading e-rater&reg; feedback...":"Loading e-rater&reg; feedback...",_Score:"Score","_The rubric in the spreadsheet must have the scales of the rubric as its first row":"The rubric in the spreadsheet must have the scales of the rubric as its first row","_The rubric in the spreadsheet must have the criteria of the rubric as the first column":"The rubric in the spreadsheet must have the criteria of the rubric as the first column","_If included, criteria descriptions should be in the same cells as the criteria titles":"If included, criteria descriptions should be in the same cells as the criteria titles","_Descriptors for the body of the rubric can be included":"Descriptors for the body of the rubric can be included","_Criteria titles must be 13 characters or less":"Criteria titles must be 13 characters or less","_Turnitin rubric files must be in .rbc file format and must have been exported from Turnitin originally":"Turnitin rubric files must be in .rbc file format and must have been exported from Turnitin originally","_Grading Forms can also be imported that have been originally exported from Turnitin.":"Grading Forms can also be imported that have been originally exported from Turnitin.","_Back to Rubric/Form Manager":"Back to Rubric/Form Manager","_The rubric in the spreadsheet can have no more than 50 criteria rows":"The rubric in the spreadsheet can have no more than 50 criteria rows",_View:"View","_Importing from Excel files:":"Importing from Excel files:","_Click to toggle accessibility mode":"Click to toggle accessibility mode","_If you would like to use scoring for your rubric, please add it using the Rubric/Form Manager after you import":"If you would like to use scoring for your rubric, please add it using the Rubric/Form Manager after you import","_Import failed":"Import failed","_Grading Forms that have been exported from Turnitin can also be imported":"Grading Forms that have been exported from Turnitin can also be imported","_Select or drag files here to import...":"Select or drag files here to import...","_Importing from Turnitin rubric files:":"Importing from Turnitin rubric files:","_The rubric in the spreadsheet can have no more than 20 scale value columns":"The rubric in the spreadsheet can have no more than 20 scale value columns",_Roadmap:"Roadmap","_Select files":"Select files","_Import Rubrics":"Import Rubrics","_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to instructor %@1 in class %@2 on %@3.":"The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to instructor %@1 in class %@2 on %@3.","_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to your class %@1 in the %@2 assignment on %@3.":"The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to your class %@1 in the %@2 assignment on %@3.","_The original copy of this paper was submitted to your class %@1 in the %@2 assignment on %@3.":"The original copy of this paper was submitted to your class %@1 in the %@2 assignment on %@3.","_The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to class %@1 on %@2.":"The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to class %@1 on %@2.","_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to class %@1 on %@2.":"The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to class %@1 on %@2.","_English only":"",_Clear:"Clear","_An example file is available here.":"An example file is available here.","_Download Example Template":"Download Example Template","_Are you sure you want to cancel this import?":"Are you sure you want to cancel this import?","_Pending...":"Pending...",_Rubrics:"Rubrics",_Criteria:"Criteria","_Scale Values":"Scale Values","_Criterion Scales":"Criterion Scales",_Upload:"Upload",_Warning:"Warning",_Course:"Course","_Stop sharing QuickMark set?":"Stop sharing QuickMark set?","_There was a problem with your download. Please try again.":"There was a problem with your download. Please try again.","_This %@ has unsaved changes. Please save or cancel the changes before attaching to the assignment.":"This %@ has unsaved changes. Please save or cancel the changes before attaching to the assignment.","_Unsaved Changes":"Unsaved Changes","_The original copy of this paper cannot be viewed because it was submitted to a class that has been deleted.":"The original copy of this paper cannot be viewed because it was submitted to a class that has been deleted.","_% Similar":"% Similar","_%@ - DUE %@":"%@ - DUE %@","_%@ match":"%@ match","_%@ matches":"%@ matches","_%@ selected":"%@ selected","_<strong>WARNING:</strong> Any edits that are made to this QuickMark are applied to every instance where this mark appears in your students' papers.":"<strong>WARNING:</strong> Any edits that are made to this QuickMark are applied to every instance where this mark appears in your students' papers.","_A problem occurred when processing the application URL.":"A problem occurred when processing the application URL.","_A problem prevented the rubric from being saved. Please try again.":"A problem prevented the rubric from being saved. Please try again.","_ATTACHED TO %@":"ATTACHED TO %@",_Actions:"Actions","_Add QuickMarks or comments to this paper":"Add QuickMarks or comments to this paper","_Add to set":"Add to set","_Additional Comments":"Additional Comments","_All Sources":"All Sources","_Any edits that are made to this QuickMark are applied to every instance where this mark appears in your students' papers.":"Any edits that are made to this QuickMark are applied to every instance where this mark appears in your students' papers.","_Apply Changes":"Apply Changes","_Apply rubric percentage to grade":"Apply rubric percentage to grade",_Archive:"Archive","_Are you sure you want to %@? Your changes will be lost.":"Are you sure you want to %@? Your changes will be lost.","_Are you sure you want to cancel your changes? Your changes will be lost.":"Are you sure you want to cancel your changes? Your changes will be lost.","_Are you sure you want to delete this criterion?":"Are you sure you want to delete this criterion?","_Are you sure you want to delete this rubric?":"Are you sure you want to delete this rubric?","_Are you sure you want to delete this scale?":"Are you sure you want to delete this scale?","_Are you sure you want to share this rubric with all sections?":"Are you sure you want to share this rubric with all sections?","_Are you sure you want to share this rubric with the account?":"Are you sure you want to share this rubric with the account?","_Are you sure you want to stop sharing this rubric with all sections?":"Are you sure you want to stop sharing this rubric with all sections?","_Are you sure you want to stop sharing this rubric with the account?":"Are you sure you want to stop sharing this rubric with the account?","_Are you sure?":"Are you sure?","_Attach a different rubric?":"Attach a different rubric?","_CHAR COUNT":"CHAR COUNT",_COMMENTS:"COMMENTS",_Cancel:"Cancel","_Cannot Save Comment":"Cannot Save Comment","_Cannot Save General Comments":"Cannot Save General Comments","_Cannot Save QuickMark":"Cannot Save QuickMark","_Change QuickMark set":"Change QuickMark set","_Change zoom level":"Change zoom level","_Click OK to download a printable version of this document.":"Click OK to download a printable version of this document.","_Click anywhere in the paper to leave a comment":"Click anywhere in the paper to leave a comment",_Close:"Close","_Collapse All":"Collapse All",_Comment:"Comment",_Comments:"Comments","_Comments List":"Comments List",_Comparisons:"Comparisons",_Confirm:"Confirm","_Continue Without Saving":"Continue Without Saving","_Could not save rubric":"Could not save rubric","_Create new rubric":"Create new rubric","_Criterion %@":"Criterion %@","_Custom rubric: enter any value directly into each rubric cell.":"Custom rubric: enter any value directly into each rubric cell.",_DESCRIPTION:"DESCRIPTION",_Delete:"Delete","_Delete Error":"Delete Error","_Delete set":"Delete set","_Delete this highlight?":"Delete this highlight?","_Delete this rubric":"Delete this rubric","_Detach this rubric?":"Detach this rubric?","_Do not add to set":"Do not add to set","_Do you wish to continue anyway?":"Do you wish to continue anyway?","_Do you wish to continue?":"Do you wish to continue?","_Document Viewer is loading...":"Document Viewer is loading...","_Don't exclude by size":"Don't exclude by size","_Don't show this message again.":"Don't show this message again.",_Download:"Download","_Duplicate this rubric":"Duplicate this rubric",_Edit:"Edit","_Edit grade for this paper":"Edit grade for this paper","_Enter QuickMark title here":"Enter QuickMark title here","_Enter comment here":"Enter comment here","_Enter description here (optional)":"Enter description here (optional)","_Enter rubric name here":"Enter rubric name here","_Enter value here":"Enter value here","_Exclude Bibliography":"Exclude Bibliography","_Exclude Quotes":"Exclude Quotes","_Exclude Sources":"Exclude Sources","_Exclude matches that are less than:":"Exclude matches that are less than:",_Filters:"Filters","_Filters & Settings":"Filters & Settings","_General Comments":"General Comments","_Getting Started":"Getting Started","_Go Back":"Go Back",_Grade:"Grade",_GradeMark:"GradeMark","_GradeMark download is not yet available in the Document Viewer.":"GradeMark download is not yet available in the Document Viewer.",_Help:"Help",_INTERNET:"INTERNET","_If you would like this comment to become a reusable QuickMark comment, enter a title for the QuickMark and select which set you would like to add the mark to. Click Save to turn the comment into a QuickMark.":"If you would like this comment to become a reusable QuickMark comment, enter a title for the QuickMark and select which set you would like to add the mark to. Click Save to turn the comment into a QuickMark.","_Images of this paper are being generated.":"Images of this paper are being generated.",_Instructor:"Instructor","_Instructors that this set was shared with will no longer be able to use the QuickMark comments within this set.":"Instructors that this set was shared with will no longer be able to use the QuickMark comments within this set.","_Internet source":"Internet source","_Internet source - %@ urls":"Internet source - %@ urls","_Invalid service specified.":"Invalid service specified.","_LAST GRADED":"LAST GRADED","_Loading Error":"Loading Error","_Loading Library...":"Loading Library...","_Loading Page":"Loading Page","_Loading QuickMarks...":"Loading QuickMarks...","_Loading Rubric...":"Loading Rubric...","_Loading...":"Loading...",_MARKS:"MARKS","_Make this the active set":"Make this the active set","_Match %@ of %@":"Match %@ of %@","_Match Overview":"Match Overview","_Multi-color Highlighting":"Multi-color Highlighting",_NO:"NO","_NOT ATTACHED TO THIS ASSIGNMENT":"NOT ATTACHED TO THIS ASSIGNMENT","_Navigate to other submissions for this assignment":"Navigate to other submissions for this assignment","_Navigate to other submissions for this student":"Navigate to other submissions for this student","_Navigate to previous version of GradeMark for this paper":"Navigate to previous version of GradeMark for this paper","_Navigate to text-only Originality Report":"Navigate to text-only Originality Report","_New Report":"New Report","_New set":"New set",_No:"No","_No Service Currently Active":"No Service Currently Active","_No rubric is attached to this assignment.":"No rubric is attached to this assignment.","_No rubric is selected. Please select one from the drop-down above.":"No rubric is selected. Please select one from the drop-down above.","_No rubric selected":"No rubric selected","_No sources selected":"No sources selected",_OK:"OK",_Ok:"Ok","_One or more of your criteria rows don't have labels.":"One or more of your criteria rows don't have labels.","_One or more of your criteria rows don't have values.":"One or more of your criteria rows don't have values.","_Open QuickMark Manager":"Open QuickMark Manager","_Optional Settings":"Optional Settings","_Originality Report":"Originality Report",_Other:"Other","_PAGE %@":"PAGE %@","_PAPER ID":"PAPER ID",_PUBLICATIONS:"PUBLICATIONS","_Page:":"Page:","_Paper %@ of %@":"Paper %@ of %@","_Paper Info":"Paper Info",_PeerMark:"PeerMark","_PeerMark Unavailable":"PeerMark Unavailable","_Percent of submission that matches selected Turnitin sources":"Percent of submission that matches selected Turnitin sources",'_Pressing "Continue" will dismiss all unsaved changes.':'Pressing "Continue" will dismiss all unsaved changes.',"_Previous Version":"Previous Version",_Print:"Print",_Publication:"Publication","_Publication - %@ publications":"Publication - %@ publications","_Qualitative rubric: a rubric that provides standard feedback but has no numeric scoring.":"Qualitative rubric: a rubric that provides standard feedback but has no numeric scoring.","_QuickMark Manager":"QuickMark Manager","_RUBRIC PERCENTAGE":"RUBRIC PERCENTAGE","_Recalculate originality score":"Recalculate originality score","_Remove from this set":"Remove from this set",_Rename:"Rename","_Rename this rubric":"Rename this rubric","_Restore All (%@)":"Restore All (%@)","_Restore Selected (%@)":"Restore Selected (%@)","_Return to Match Overview":"Return to Match Overview","_Rubric/Form Manager":"Rubric/Form Manager","_Rubric score":"Rubric score",_SETS:"SETS","_STUDENT PAPERS":"STUDENT PAPERS",_SUBMISSIONS:"SUBMISSIONS","_SUBMITTED ON":"SUBMITTED ON",_Save:"Save","_Save Anyway":"Save Anyway","_Save Error":"Save Error","_Save as QuickMark":"Save as QuickMark","_Saving...":"Saving...","_Scale %@":"Scale %@","_Search QuickMark templates":"Search QuickMark templates","_Search all QuickMarks":"Search all QuickMarks","_Search results...":"Search results...","_See how much of the paper's text matches other sources":"See how much of the paper's text matches other sources","_See where text in the paper matches other sources":"See where text in the paper matches other sources","_Select text and click the Comment button to highlight text associated with a comment.":"Select text and click the Comment button to highlight text associated with a comment.",_Set:"Set","_Share this set to account":"Share this set to account","_Share this set to sections":"Share this set to sections","_Share to account":"Share to account","_Share to sections":"Share to sections",_Sources:"Sources","_Standard rubric: enter scale values for each column and weight your criteria rows using percentages.":"Standard rubric: enter scale values for each column and weight your criteria rows using percentages.","_Student paper":"Student paper","_Student papers - %@ papers":"Student papers - %@ papers","_TIME SPENT":"TIME SPENT",_TITLE:"TITLE",_TOTAL:"TOTAL","_Text-Only Report":"Text-Only Report","_Text-only Originality Report and Old GradeMark can be found at the bottom right":"Text-only Originality Report and Old GradeMark can be found at the bottom right","_The %@ service is not available for this assignment.":"The %@ service is not available for this assignment.","_The %@ service is not available for this paper.":"The %@ service is not available for this paper.","_The General Comments text must contain %@ characters or less.":"The General Comments text must contain %@ characters or less.","_The Originality Report is not available for this paper.":"The Originality Report is not available for this paper.","_The QuickMark template description must contain %@ characters or less.":"The QuickMark template description must contain %@ characters or less.","_The QuickMark template name is empty.":"The QuickMark template name is empty.","_The QuickMark template name must contain %@ characters or less.":"The QuickMark template name must contain %@ characters or less.","_The QuickMark text must contain %@ characters or less.":"The QuickMark text must contain %@ characters or less.","_The assignment you've selected is Anonymous Marking only. Go to this assignment using the assignment inbox.":"The assignment you've selected is Anonymous Marking only. Go to this assignment using the assignment inbox.","_The cell description can be no longer than 1000 characters.":"The cell description can be no longer than 1000 characters.","_The comment text must contain %@ characters or less.":"The comment text must contain %@ characters or less.","_The criterion description can be no longer than 1000 characters.":"The criterion description can be no longer than 1000 characters.","_The criterion name can be no longer than 13 characters.":"The criterion name can be no longer than 13 characters.","_The request failed because of a server error.":"The request failed because of a server error.","_The request failed because this item does not exist or is not available to you.":"The request failed because this item does not exist or is not available to you.","_The request timed out.":"The request timed out.","_The request was cancelled.":"The request was cancelled.","_The rubric name must be between 1-30 characters long.":"The rubric name must be between 1-30 characters long.","_The scale name can be no longer than 15 characters.":"The scale name can be no longer than 15 characters.","_The submission could not be processed.":"The submission could not be processed.","_There are no matching sources for this report.":"There are no matching sources for this report.","_There is already a rubric attached to this assignment. Attaching another will delete any existing rubric scoring for this assignment":"There is already a rubric attached to this assignment. Attaching another will delete any existing rubric scoring for this assignment","_There is no %@ available for this paper. Your institution's subscription might not include this service.":"There is no %@ available for this paper. Your institution's subscription might not include this service.","_There is no %@ available for this paper. Your subscription might not include this service. For more information, email moreinfo@turnitin.com.":"There is no %@ available for this paper. Your subscription might not include this service. For more information, email moreinfo@turnitin.com.","_There was an error loading the text.":"There was an error loading the text.","_This comment will not be converted to a QuickMark.":"This comment will not be converted to a QuickMark.","_This content could not be loaded.":"This content could not be loaded.","_This paper does not have any comments or QuickMarks.":"This paper does not have any comments or QuickMarks.","_This paper is not available.":"This paper is not available.","_This qualitative rubric will not result in a score. However, it is a valuable feedback mechanism for students and writers.":"This qualitative rubric will not result in a score. However, it is a valuable feedback mechanism for students and writers.","_This rubric cannot be edited":"This rubric cannot be edited","_This rubric has already been used to score papers.":"This rubric has already been used to score papers.","_This set is active":"This set is active","_This student has not submitted a paper to the assignment.":"This student has not submitted a paper to the assignment.",_Title:"Title",_Undo:"Undo","_Unsaved changes on the page":"Unsaved changes on the page",_Update:"Update","_Update Error":"Update Error","_Use PeerMark":"Use PeerMark","_View additional sources":"View additional sources","_View all QuickMarks and comments for this paper":"View all QuickMarks and comments for this paper","_View all the sources that match a section of text":"View all the sources that match a section of text","_View information about this paper":"View information about this paper","_View sources":"View sources","_View/edit a general comment for this entire paper":"View/edit a general comment for this entire paper","_View/edit excluded sources":"View/edit excluded sources","_View/edit filters and settings":"View/edit filters and settings","_View/edit rubric scorecard for this paper":"View/edit rubric scorecard for this paper","_WARNING:":"WARNING:","_WORD COUNT":"WORD COUNT","_We've found the following problems with your rubric:":"We've found the following problems with your rubric:",_YES:"YES",_Yes:"Yes","_You are not the owner of this rubric.":"You are not the owner of this rubric.","_You do not currently have any QuickMark sets.":"You do not currently have any QuickMark sets.","_You have no rubrics. Create one by clicking above.":"You have no rubrics. Create one by clicking above.","_Your changes will not be saved.":"Your changes will not be saved.","_Your grade has been saved within GradeMark. However, an error prevented saving the grade within your integration's gradebook":"Your grade has been saved within GradeMark. However, an error prevented saving the grade within your integration's gradebook","_Your rubric can have no more than %@ criteria rows.":"Your rubric can have no more than %@ criteria rows.","_Your rubric can have no more than %@ scale option columns.":"Your rubric can have no more than %@ scale option columns.","_Your rubric must have at least one criterion row.":"Your rubric must have at least one criterion row.","_Your rubric must have at least one scale option column.":"Your rubric must have at least one scale option column.","_by %@":"by %@",_cancel:"cancel",_close:"close",_comment:"comment",_comments:"comments","_create a new rubric":"create a new rubric",_criteria:"criteria",_criterion:"criterion",_delete:"delete","_delete set":"delete set",_detach:"detach",_empty:"empty",_item:"item","_of %@":"of %@",_options:"options","_out of %@":"out of %@","_rubric scoring":"rubric scoring","_rubric scoring method is required.":"rubric scoring method is required.",_save:"save",_scales:"scales","_shared by you":"shared by you","_shared with you":"shared with you",_sharing:"sharing","_show on paper":"show on paper","_switch to this rubric":"switch to this rubric","_the %@ Document Viewer":"the %@ Document Viewer","_unarchive template(s)":"unarchive template(s)","_view source &raquo;":"view source &raquo;",_words:"words","_Please provide a reason to reveal the author's identity":"Please provide a reason to reveal the author's identity","_Reason...":"Reason...","_Reveal Author Identity":"Reveal Author Identity",_Submit:"Submit",_Uploading:"Uploading",_or:"or",_Done:"Done","_Import complete":"Import complete",_Import:"Import","_Import...":"Import...","_Export...":"Export...","_Import Set...":"Import Set...","_Export Set...":"Export Set...","_Uploading...":"Uploading...","_Text Comment":"Text Comment","_No general comment has been entered for this paper.":"No general comment has been entered for this paper.","_Primary Source View":"Primary Source View",_Reviews:"Reviews","_Hide sidebar":"Hide sidebar","_The new window was blocked. please disable popup blockers and try again.":"The new window was blocked. please disable popup blockers and try again.","_No reviews have been submitted for this paper.":"No reviews have been submitted for this paper.","_PeerMark %@ : %@":"PeerMark %@ : %@",_Exit:"Exit","_submitted on":"submitted on",_Overview:"Overview",_type:"type","_Distributed Review":"Distributed Review","_Reviewer-Selected Review":"Reviewer-Selected Review","_Self-Review":"Self-Review","_R%@":"R%@","_Mark List":"Mark List","_All Reviews":"All Reviews","_Reviewer %@":"Reviewer %@","_Instructor Review":"Instructor Review","_Questions & Answers":"Questions & Answers","_Watch a 4-minute walkthrough":"Watch a 4-minute walkthrough","_Expand to Full Text":"Expand to Full Text","_read less":"read less","_read more":"read more","_Full Source Text":"Full Source Text","_Select a file to import...":"Select a file to import...","_No reviews are available for this paper.":"No reviews are available for this paper.","_Select all":"Select all","_Deselect all":"Deselect all","_Hold down Ctrl/Command or Shift to select multiple":"Hold down Ctrl/Command or Shift to select multiple","_Show sidebar":"Show sidebar","_Loading Document Viewer...":"Loading Document Viewer...","_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thurs Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec","_Just a note: Any rubrics created or edited here cannot be accessed within the previous version of GradeMark":"Just a note: Any rubrics created or edited here cannot be accessed within the previous version of GradeMark","_The request failed because the request was invalid or incomplete.":"The request failed because the request was invalid or incomplete.",__qmm_en_global_set_prefix:"","_Excluded Sources":"Excluded Sources","_Match Breakdown":"Match Breakdown","_Bubble Comment":"Bubble Comment","_Reviewer comment":"Reviewer comment","_Review overview":"Review overview","_Hover over the comment icon to view the comment.":"Hover over the comment icon to view the comment.","_Continue Editing":"Continue Editing","_Originality Report Unavailable":"Originality Report Unavailable",__ipDefaultFullDateFormat:"%d-%b-%Y",__ipDefaultFullDateTimeFormat:"%d-%b-%Y %I:%M%p","_View Match Breakdown":"View Match Breakdown","_Exclude (%@)":"Exclude (%@)",__ipDefaultFullDateTime24HrFormat:"%d-%b-%Y %H:%M",_Feedback:"Feedback","_e-rater%@ by ETS%@":"e-rater%@ by ETS%@","_View handbook":"View handbook",_Dismiss:"Dismiss","_Add comment":"Add comment",_Grammar:"Grammar",_Usage:"Usage",_Mechanics:"Mechanics",_Style:"Style",_Spelling:"Spelling","_Read only":"Read only",_Continue:"Continue","_Reveal All":"Reveal All","_Previous GradeMark Version":"Previous GradeMark Version","_This paper cannot be viewed in the %@ Document Viewer":"This paper cannot be viewed in the %@ Document Viewer","_Processing paper now.  Please wait...":"Processing paper now.  Please wait...",_Reviewer:"Reviewer","_The print request failed to formulate the request":"The print request failed to formulate the request","_The print request failed because of a server error.":"The print request failed because of a server error.","_Close Glimpse":"Close Glimpse","_Submitted %@":"Submitted %@",_FAQ:"FAQ","_Your grade has been saved within GradeMark. However, an error prevented saving the grade within your integration's gradebook":"Your grade has been saved within GradeMark. However, an error prevented saving the grade within your integration's gradebook","_Easily compare the paper and source texts":"Easily compare the paper and source texts","_Organization & Development":"Organization & Development","_(No Comment)":"(No Comment)","_Please try again.":"Please try again.","_% Index":"% Index","_This paper is currently being processed by the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer.":"This paper is currently being processed by the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer.",_Bubble:"Bubble","_Don't exclude by size":"Don't exclude by size","_There is no %@ available for this paper. Your institution's subscription might not include this service.":"There is no %@ available for this paper. Your institution's subscription might not include this service.",_More:"More",_Resubmit:"Resubmit","_Click below to use the current version of PeerMark for this paper assignment. We expect PeerMark to be available in the Document Viewer soon.":"Click below to use the current version of PeerMark for this paper assignment. We expect PeerMark to be available in the Document Viewer soon.","_This paper was submitted to a class that is expired, and is currently in read-only mode.":"This paper was submitted to a class that is expired, and is currently in read-only mode.","_%@ individual marks dismissed":"%@ individual marks dismissed","_This paper was submitted to a previous version of our %@ document processing system, so only the previous versions of %@ services can be used.":"This paper was submitted to a previous version of our %@ document processing system, so only the previous versions of %@ services can be used.",_Filter:"Filter",_Marks:"Marks","_There was a problem processing this paper in the new %@ document processing system, so only the previous versions of %@ services can be used.":"There was a problem processing this paper in the new %@ document processing system, so only the previous versions of %@ services can be used.",_Retry:"Retry","_%@ words":"%@ words","_Close and return to %@":"Close and return to %@",_Info:"Info","_Questions and Answers":"Questions and Answers","_Previous PeerMark Version":"Previous PeerMark Version",_QUICKMARKS:"QUICKMARKS","_Neither One":"Neither One","_Edit comment":"Edit comment","_The print window was blocked. please disable popup blockers and try again.":"The print window was blocked. please disable popup blockers and try again.",_Tips:"Tips","_Your criteria rows do not total 100%.":"Your criteria rows do not total 100%.","_An error occurred: The file is in an invalid format.":"An error occurred: The file is in an invalid format.","_This paper is in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).":"This paper is in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).","_An error occurred: %@":"An error occurred: %@","_A new originality report will be produced":"A new originality report will be produced","_This paper was submitted to a previous version of our %@ document processing system. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.":"This paper was submitted to a previous version of our %@ document processing system. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.","_Unknown error.":"Unknown error.","_Wrong Article":"Wrong Article","_Article Error":"Article Error",_Confused:"Confused","_Faulty Comparison":"Faulty Comparison","_Prep. ":"Prep. ",_Negation:"Negation","_Sp.":"Sp.","_Proper Noun":"Proper Noun","_Sentence Cap.":"Sentence Cap.",'_Missing "?"':'Missing "?"',"_Missing Punct.":"Missing Punct.","_Missing Apos.":"Missing Apos.",'_Missing ","':'Missing ","',"_Hyph. ":"Hyph. ",_Fused:"Fused",_Compound:"Compound","_Dup.":"Dup.",_Repetition:"Repetition",_Tone:"Tone","_Coord. Conjunction":"Coord. Conjunction",_Short:"Short","_P/V":"P/V","_e-rater&reg; made more than 50 marks on one or more pages of this paper, but a maximum of 50 e-rater&reg; marks is shown on each page.":"e-rater&reg; made more than 50 marks on one or more pages of this paper, but a maximum of 50 e-rater&reg; marks is shown on each page.","_Frag.":"Frag.","_Run-on":"Run-on",_Garbled:"Garbled","_S/V":"S/V",_Verb:"Verb",_Pronoun:"Pronoun",_Possessive:"Possessive","_Word Error ":"Word Error ","_duplicate this rubric":"duplicate this rubric","_Save time by dragging and dropping your favorite comments on the paper":"Save time by dragging and dropping your favorite comments on the paper",_QuickMark:"QuickMark","_e-rater&reg; cannot process this paper.":"e-rater&reg; cannot process this paper.","_Welcome to the new <h2>Rubric Manager</h2>":"Welcome to the new <h2>Rubric Manager</h2>","_ETSÃÂ®":"ETS&reg;","_No sources have been excluded for this report.":"No sources have been excluded for this report.","_Submitted to %@":"Submitted to %@","_Submitted to %@ on %@":"Submitted to %@ on %@","_Restore All":"Restore All","_Restore (%@)":"Restore (%@)","_Expand All":"Expand All","_Saving your open comments...":"Saving your open comments...","_Unsaved Comments":"Unsaved Comments","_There was a problem saving one or more of your open comments upon leaving this paper. This could be a temporary problem with your connection to our servers.":"There was a problem saving one or more of your open comments upon leaving this paper. This could be a temporary problem with your connection to our servers.","_Leave Paper":"Leave Paper","_Stay on Paper":"Stay on Paper","_ETS&reg; Data Loading...":"ETS&reg; Data Loading...","_ETS&reg; data successfully loaded.":"ETS&reg; data successfully loaded.","_e-rater<sup>&reg;</sup> Results %@":"e-rater<sup>&reg;</sup> Results %@","_e-rater&reg; is not turned on for this assignment. Please edit the assignment settings to turn on e-rater&reg; for the assignment.":"e-rater&reg; is not turned on for this assignment. Please edit the assignment settings to turn on e-rater&reg; for the assignment.","_ETS<sup>&reg;</sup>":"ETS<sup>&reg;</sup>","_e-rater&reg; processing is currently unavailable.  Please try again later.":"e-rater&reg; processing is currently unavailable.  Please try again later.","__[Untitled]":"[Untitled]","_Read Only":"Read Only",'_If you leave this rubric without clicking "Save", your changes to this rubric will be lost.':'If you leave this rubric without clicking "Save", your changes to this rubric will be lost.',"_Full Source View":"Full Source View","_Wrong Form":"Wrong Form","_We're trying to save the comment(s) you were editing, but they may not yet be saved. Are you sure you want to leave?":"We're trying to save the comment(s) you were editing, but they may not yet be saved. Are you sure you want to leave?","_To access your rubric in the sidebar, close the other window containing your expanded rubric.":"To access your rubric in the sidebar, close the other window containing your expanded rubric.",_Similar:"Similar",_OVERALL:"OVERALL","_View English Sources (Beta)":"View English Sources (Beta)","_Currently viewing English sources":"Currently viewing English sources","_TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.":"TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.","_Translated Matching Report Unavailable":"Translated Matching Report Unavailable","_View Standard Sources":"View Standard Sources",_Matches:"Matches","_Switch to the Originality Report with sources for the English translation of the paper":"Switch to the Originality Report with sources for the English translation of the paper","_A Translated Matching report could not be generated for this paper because the translation service was unresponsive. To try again, please choose to refresh the report from the filters and settings panel.":"A Translated Matching report could not be generated for this paper because the translation service was unresponsive. To try again, please choose to refresh the report from the filters and settings panel.","_Switch to the Originality Report with sources in the same language as the paper":"Switch to the Originality Report with sources in the same language as the paper","_Your rubric is expanded in another window.":"Your rubric is expanded in another window.","_This is the percentage of the English translation of this paper that was found to match English language sources in the Turnitin databases.":"This is the percentage of the English translation of this paper that was found to match English language sources in the Turnitin databases.","_[Untitled]":"[Untitled]","_Currently viewing standard sources":"Currently viewing standard sources","_View all services and paper layers in a single place. Check the top left.":"View all services and paper layers in a single place. Check the top left.","_Turnitin Document Viewer":"Turnitin Document Viewer","_The comment(s) you were editing will not be saved. Are you sure you want to leave?":"The comment(s) you were editing will not be saved. Are you sure you want to leave?",_Saved:"Saved","_View full size rubric in a new window":"View full size rubric in a new window","_You have moved to a previous version of GradeMark. Your expanded rubric is no longer available. Please close this window.":"You have moved to a previous version of GradeMark. Your expanded rubric is no longer available. Please close this window.","_This student paper cannot be viewed because it belongs to a deleted assignment.":"This student paper cannot be viewed because it belongs to a deleted assignment.","_Your expanded rubric is no longer available. Please close this window.":"Your expanded rubric is no longer available. Please close this window.","_This student paper cannot be viewed because it belongs to a deleted class.":"This student paper cannot be viewed because it belongs to a deleted class.","_There was an error with the feedback provided by e-rater&reg;.":"There was an error with the feedback provided by e-rater&reg;.","_By ":"By ","_You have moved to another assignment. Your expanded rubric is no longer available. Please close this window.":"You have moved to another assignment. Your expanded rubric is no longer available. Please close this window.","_Use full size rubric in a new window":"Use full size rubric in a new window","_Your expanded view is reloading. Please do not close this page.":"Your expanded view is reloading. Please do not close this page.","_You have logged out. Your expanded rubric is no longer available. Please close this window.":"You have logged out. Your expanded rubric is no longer available. Please close this window.","_You have moved away from GradeMark. Your expanded rubric is no longer available. Please close this window.":"You have moved away from GradeMark. Your expanded rubric is no longer available. Please close this window.",_Saving:"Saving","_try now":"try now","_Close Window":"Close Window","_Bring the rubric to the top.":"Bring the rubric to the top.","_The attached rubric is locked by the master class instructor.":"The attached rubric is locked by the master class instructor.",_Strikethrough:"Strikethrough","_By %@":"By %@","_Last paper edited":"Last paper edited",_Assignment:"Assignment","_RUBRIC SCORE":"RUBRIC SCORE",_Author:"Author","_Expanded rubric is unavailable because no rubric has been attached to this assignment.":"Expanded rubric is unavailable because no rubric has been attached to this assignment.","_Comment has been deleted":"Comment has been deleted","_Strikethrough has been deleted":"Strikethrough has been deleted",_Rubric:"Rubric","_TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.":"TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.","_1 individual mark dismissed":"1 individual mark dismissed","_Save as new QuickMark":"Save as new QuickMark","_Print or download this paper.":"Print or download this paper.",'_You have not entered a name for your rubric. If you continue, your rubric will be named "Untitled".':'You have not entered a name for your rubric. If you continue, your rubric will be named "Untitled".',_Untitled:"Untitled","_Changing or detaching a rubric will remove all existing rubric scoring from papers in this assignment, including scorecards which have previously been marked. Overall grades for previously graded papers will remain.":"Changing or detaching a rubric will remove all existing rubric scoring from papers in this assignment, including scorecards which have previously been marked. Overall grades for previously graded papers will remain.","_A Translated Matching report could not be generated for this paper because the language of the text could either not be detected or is not supported. The following languages are supported for translated matching:\n\nCzech, Danish, Dutch, Finnish, French, German, Greek, Hungarian, Italian, Polish, Portuguese, Romanian, Spanish, Swedish and Turkish":"A Translated Matching report could not be generated for this paper because the language of the text could either not be detected or is not supported. The following languages are supported for translated matching:\n\nCzech, Danish, Dutch, Finnish, French, German, Greek, Hungarian, Italian, Polish, Portuguese, Romanian, Spanish, Swedish and Turkish","_e-raterÂ® cannot process this paper.":"e-rater® cannot process this paper.","_%@%":"%@%","_Tutorial Mode":"Tutorial Mode","_Student submissions in your assignment will be listed here":"Student submissions in your assignment will be listed here","_Assignments will be listed here":"Assignments will be listed here",_ORIGINALITY:"ORIGINALITY","_Refreshing report":"Refreshing report","_Refreshing this report will create a completely new report based on our most recent database content. We only recommend refreshing your report if you believe there is very recent internet or database content that was not searched when this report was first generated. This report will be unavailable while it is being refreshed.\n\nDo you want to continue?":"Refreshing this report will create a completely new report based on our most recent database content. We only recommend refreshing your report if you believe there is very recent internet or database content that was not searched when this report was first generated. This report will be unavailable while it is being refreshed.\n\nDo you want to continue?",_Originality:"Originality","_The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to instructor %@ in class %@ on %@.":"The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to instructor %@ in class %@ on %@.","_Source Release":"Source Release","_Exclude Quoted Material is on and the paper has more than %@% of its text in quotes.":"Exclude Quoted Material is on and the paper has more than %@% of its text in quotes.","_Download original":"Download original","_Exclude Bibliography is on and the paper has more than %@% of its text in the bibliography.":"Exclude Bibliography is on and the paper has more than %@% of its text in the bibliography.","_This feature is not covered in this tutorial. Please view the GradeMark chapter of the Turnitin instructor manual for more information.":"This feature is not covered in this tutorial. Please view the GradeMark chapter of the Turnitin instructor manual for more information.","_What's New":"What's New","_Preparing to save...":"Preparing to save...","_Recording stopped":"Recording stopped",_Pause:"Pause","_We can't hear you...":"We can't hear you...","_Stop recording":"Stop recording",_Truncating:"Truncating","_Voice Comment":"Voice Comment",_Stay:"Stay","_Voice input level":"Voice input level","_Recording paused":"Recording paused","_This action cannot be undone":"This action cannot be undone","_Pause recording":"Pause recording","_Leave and Discard Comment":"Leave and Discard Comment","_Are you sure you want to delete this comment?":"Are you sure you want to delete this comment?",_Error:"Error",_Recording:"Recording","_Saved!":"Saved!","_It is not possible to listen to voice comments at this time. We apologize for the inconvenience.":"It is not possible to listen to voice comments at this time. We apologize for the inconvenience.","_Play the recording":"Play the recording","_It is not possible to record voice comments at this time. We apologize for the inconvenience.":"It is not possible to record voice comments at this time. We apologize for the inconvenience.","_Please check your microphone. The audio level bar will be moving when sound is detected. Click the record button when you are ready to restart your recording.":"Please check your microphone. The audio level bar will be moving when sound is detected. Click the record button when you are ready to restart your recording.","_Slide to listen from a specific point in the voice comment":"Slide to listen from a specific point in the voice comment","_Listen to this voice comment":"Listen to this voice comment","_Pause this voice comment":"Pause this voice comment","_There is a voice comment on this paper that has not yet been saved.":"There is a voice comment on this paper that has not yet been saved.","_In order to add a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/":"In order to add a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/","_This set cannot be modified because it has been shared with you.":"This set cannot be modified because it has been shared with you.","_Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, your instructor may be able to request permission to view the paper from the instructor to whom the paper was originally submitted.":"Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, your instructor may be able to request permission to view the paper from the instructor to whom the paper was originally submitted.","_Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, please use the link above to submit a permission request to the author's instructor.":"Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, please click on the institution name above to submit a permission request to the author's instructor.","_Type a comment up to 5000 characters long":"Type a comment up to 5000 characters long","_No text comment was left for this paper.":"No text comment was left for this paper.","_Unsaved Voice Comment":"Unsaved Voice Comment","_Cancel save and return to the unsaved recording":"Cancel save and return to the unsaved recording","_You've reached the 3:00 limit and your recording has been stopped.":"You've reached the 3:00 limit and your recording has been stopped.",_Discard:"Discard","_There is no text comment for this paper. You can leave a text comment by clicking the pencil icon above or by clicking in this text field.":"There is no text comment for this paper. You can leave a text comment by clicking the pencil icon above or by clicking in this text field.","_Save recording":"Save recording","_Play recording":"Play recording","_Resume recording":"Resume recording","_The voice comment you were recording will not be saved. Are you sure you want to leave?":"The voice comment you were recording will not be saved. Are you sure you want to leave?","_Edit Text":"Edit Text","_We ran into a problem!":"We ran into a problem!","_There was an error connecting to the server. Please check your internet connection and try again.":"There was an error connecting to the server. Please check your internet connection and try again.","_Saving of voice comments is currently unavailable. Please try again later.":"Saving of voice comments is currently unavailable. Please try again later.","_There was an error trying to save your recording. Please try again by clicking the save button.":"There was an error trying to save your recording. Please try again by clicking the save button.","_Deleting of voice comments is currently unavailable. Please try again later.":"Deleting of voice comments is currently unavailable. Please try again later.","_There was an error trying to delete your recording. Please try again by clicking the delete button.":"There was an error trying to delete your recording. Please try again by clicking the delete button.","_Record a voice comment up to 3 minutes long":"Record a voice comment up to 3 minutes long","_In order to play a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/":"In order to play a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/","_No microphone detected":"No microphone detected","_Please check to ensure that your microphone is enabled and try again to record.":"Please check to ensure that your microphone is enabled and try again to record.",_Leave:"Leave","_Your voice comment has not finished uploading. If you leave GradeMark or the paper now, your voice comment may not finish saving. Are you sure you would like to leave?":"Your voice comment has not finished uploading. If you leave GradeMark or the paper now, your voice comment may not finish saving. Are you sure you would like to leave?","_This paper was submitted to an assignment that was created in your LMS, and is currently in read-only mode.%@1This paper can only be edited or graded from within the corresponding %@2 assignment in your LMS.":"This paper was submitted to an assignment that was created in your LMS, and is currently in read-only mode.%@1This paper can only be edited or graded from within the corresponding %@2 assignment in your LMS.","_Could not process your request":"Could not process your request","_The Common Core Standards Society approves this rubric":"The Common Core Standards Society approves this rubric","_The Originality Report is not available for this version of the application.":"The Originality Report is not available for this version of the application.","_PeerMark is not available for this paper.":"PeerMark is not available for this paper.","_Text-only version":"Text-only version","_Use Common Core State Standards?":"Use Common Core State Standards?","_Turnitin now offers six rubrics aligned with Common Core State Standards. Click on the Rubric/Form Manager icon above to get started using them on this assignment!":"Turnitin now offers six rubrics aligned with Common Core State Standards. Click on the Rubric/Form Manager icon above to get started using them on this assignment!","_Download PDF of current view for printing":"Download PDF of current view for printing","_Download PDF of digital receipt for printing":"Download PDF of digital receipt for printing","_View available rubrics and rubric options":"View available rubrics and rubric options","_Attach this rubric to this assignment":"Attach this rubric to this assignment","_Detach this rubric from this assignment":"Detach this rubric from this assignment","_View import/export options":"View import/export options","_Print / Download":"Print / Download","_Open page in new window":"Open page in new window","_This paper was submitted to a previous version of GradeMark, and is currently in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).":"This paper was submitted to a previous version of GradeMark, and is currently in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).","_The English Professional Learning Council developed this rubric.":"The English Professional Learning Council developed this rubric.","_1 Page":"1 Page","_%@ Pages":"%@ Pages","_A Translated Matching report could not be generated for this paper.":"A Translated Matching report could not be generated for this paper.","_Print & Download":"Print & Download","_Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, please click on the institution name above to submit a permission request to the author's instructor.":"Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, please click on the institution name above to submit a permission request to the author's instructor."});
Translations=SC.Object.create({NAMESPACE:"Translations",VERSION:"0.1.0"});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("translations");
/* jQuery v1.7.1 jquery.com | jquery.org/license */
}(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1
}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");
d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);
if(!cm||!cl.createElement){cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close()
}d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)
}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a
});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")
}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));
var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])
}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];
if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);
break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))
}}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;
for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))
}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]
}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);
return d[j]}}function ca(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)
})}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){ca(a+"["+e+"]",b[e],c,d)
}}else{d(a,b)}}}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])
}e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;
var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)))
}(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");
if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;
e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)
}}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;
if(d>0){if(c!=="border"){for(;g<h;g++){c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0
}}return d+"px"}d=bz(a,b,b);if(d<0||d==null){d=a.style[b]||0}d=parseFloat(d)||0;if(c){for(;
g<h;g++){d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0)
}}return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)
}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;
return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)
}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked
}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]
}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();
if(c==="object"){b.outerHTML=a.outerHTML}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected
}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)
}}b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;
if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)
}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a
}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())
}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);
return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1
});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c
})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0
}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);
h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())
},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue
}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();
d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d
}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);
for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")
}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)
},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()
},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};
e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this
}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;
return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];
if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);
return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)
}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)
}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);
return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length
},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]
},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");
return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);
return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))
},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)
}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;
typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);
for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue
}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)
}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);
return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)
},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)
}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")
}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)
}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)
}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);
var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"
},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a
},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"
},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1
}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1
}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1
}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null
}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()
}e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))
}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);
return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)
})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()
},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break
}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break
}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)
}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];
if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)
}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;
for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;
if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]
}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;
f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));
if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)
}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];
c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))
};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;
if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d)}return a}if(d!==b){f=!h&&f&&e.isFunction(d);
for(var k=0;k<i;k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h)}return a}return i?g(a[0],c):b
},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();
var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}
},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));
return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()
}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()
}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())
});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;
for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)
}},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;
l++){if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))
},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))
}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;
f<c.length;f++){if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique){break
}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0
}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this
},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this
},locked:function(){return !d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));
return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return !!e
}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e
},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);
return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);
return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;
f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])
}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]
}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith
}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);
return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)
}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)
}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();
if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g
}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;
q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];
if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;
try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1
}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);
if(q.attachEvent){for(o in {submit:1,change:1,focusin:1}){n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p
}}k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];
!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))
});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];
return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";
if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));
if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)
}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events
}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;
if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));
for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;
if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)
}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];
if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;
if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;
for(var i=0,j=e.length;i<j;i++){g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]))
}f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object"){return this.each(function(){f.data(this,a)
})}d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));
return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];
b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)
})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))
},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;
e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;
if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));
return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};
d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)
},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");
if(c===b){return f.queue(this[0],a)}return this.each(function(){var b=f.queue(this,a,c);
a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)
})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);
c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])
},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";
var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)
}}m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;
f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)
})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;
return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;
if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))
})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];
if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";
for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)
}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))
})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;
d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");
for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""
}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)
})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);
while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""
}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0
}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);
return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""
})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h
}}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d
}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;
return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";
if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();
if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h
},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0
}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;
if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)
}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));
if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g
}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g
}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;
if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++){e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))
}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")
}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;
a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)
}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)
}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;
if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);
return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]
}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b
}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);
return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b
},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));
return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);
return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);
e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");
return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)
}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);
return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b
},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;
b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value
}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0
}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);
b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));
return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))
},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")
};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b
},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];
if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)
}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0
}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;
if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];
if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;
for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))
}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])
}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))
}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;
if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());
if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";
if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)
}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};
if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;
for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])
}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()
}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));
return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;
g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;
for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++){r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r)
}q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});
for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;
for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];
if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace)){c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))
}}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);
return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;
a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);
return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;
a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);
return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)
},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});
d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()
}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)
}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)
}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0
},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;
!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;
var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)
},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()
},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;
if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b
}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1
}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;
d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)
}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form")){return !1
}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)
}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))
})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;
z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)
}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)
}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)
}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)
};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)
}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);
for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));
if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)
},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)
})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;
f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);
return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this
}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)
})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)
},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);
return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)
},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)
}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;
f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1
};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)
}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);
return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)
}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];
if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);
if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;
break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];
if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);
if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;
[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;
if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;
do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);
if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);
while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);
if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;
while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)
}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)
}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])
}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)
}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);
if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)
},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;
if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);
if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);
if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);
return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);
while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);
if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);
if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))
}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)
}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)
};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string"){return a.textContent
}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;
a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;
c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")
},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;
d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b
}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;
if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;
a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)
}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)
},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)
}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);
return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);
for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c
}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])
}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a
}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))
}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()
},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");
var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);
a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");
!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");
return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)
}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0
}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"
},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0
},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0
},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild
},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)
},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)
},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type
},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type
},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type
},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();
return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)
},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0
},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0
},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0
},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];
if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0
}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0
}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1
}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1
}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;
if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)
}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b
},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b
},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1
},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];
return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1
},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)
};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))
}var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b
}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType
}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)
}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;
a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;
return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1
}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0
}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;
if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode
}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;
k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c
}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;
a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);
return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]
}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");
return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");
a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);
if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d
}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)
}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";
b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;
if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)
}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)
}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);
if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)
}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);
l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)
}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]
}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;
if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")
}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");
if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);
if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0
}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";
if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])
}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)
}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)
}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;
return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;
while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;
for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains
}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};
f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;
c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;
for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;
h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);
return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0
}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)
},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)
},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;
d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++
}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;
d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);
break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;
return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1
}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)
},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);
return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)
}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null
},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)
},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")
},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")
},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)
},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)
},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)
}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());
return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");
return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];
while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]
}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break
}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)
}return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);
bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c.text(a.call(this,b,c.text()))})}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))
}return f.text(this)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))
})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;
while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)
}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))
})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)
})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)
})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)
}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)
})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)
})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)
})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)
}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)
})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));
return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)
}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));
while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;
return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null
}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");
try{for(var c=0,d=this.length;c<d;c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)
}}catch(e){this.empty().append(a)}}else{f.isFunction(a)?this.each(function(b){var c=f(this);
c.html(a.call(this,b,c.html()))}):this.empty().append(a)}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();
c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;
f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this
},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];
if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)
})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)
})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;
if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)
}}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];
b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);
return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;
if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this
}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)
}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);
if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);
for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;
d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);
var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k){continue
}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k)}else{k=k.replace(Y,"<$1></$2>");
var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");
b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--){o=o.lastChild
}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];
for(i=q.length-1;i>=0;--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])
}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes
}}var r;if(!f.support.appendChecked){if(k[0]&&typeof(r=k.length)=="number"){for(i=0;
i<r;i++){bn(k[i])}}else{bn(k)}}k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return !a.type||be.test(a.type)
};for(j=0;h[j];j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j])
}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))
}d.appendChild(h[j])}}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;
for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue
}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)
}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]
}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;
f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)
})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");
return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];
c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]
}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");
if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");
if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;
c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e
}if(bz){return bz(a,c)}},swap:function(a,b,c){var d={};for(var e in b){d[e]=a.style[e],a.style[e]=b[e]
}c.call(a);for(e in b){a.style[e]=d[e]}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;
if(c){if(a.offsetWidth!==0){return bC(a,b,d)}f.swap(a,bw,function(){e=bC(a,b,d)});
return e}},set:function(a,b){if(!bt.test(b)){return b}b=parseFloat(b);if(b>=0){return b+"px"
}}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""
},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";
c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return
}}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;
f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight
});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;
b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));
return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;
f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));
return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;
return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"
},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];
try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS){return bS.apply(this,arguments)
}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);
a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));
var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a
}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});
return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this
}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))
}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}
}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)
}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);
return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")
},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);
return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;
var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y
}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cc(d,x),w="success",o=!0
}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))
}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();
a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null
},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n)){o[c[1].toLowerCase()]=c[2]
}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);
return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;
if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this
},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);
if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");
if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;
if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")
}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);
for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();
return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=b$(bU,d,c,v);if(!p){w(-1,"No Transport")
}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")
},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v
},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)
};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)
})}else{for(var g in a){ca(g,a[g],c,e)}}return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});
var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++
}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";
if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";
b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]
},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");
return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);
return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)
}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;
return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")
}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch){ch[a](0,1)
}}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ci()||cj()
}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;
return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);
if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");
try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;
try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);
if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;
try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)
}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)
},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;
f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(cu("show",3),a,b,c)
}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)))
}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""
}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(cu("hide",3),a,b,c)
}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))
}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";
f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");
f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)
},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;
b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";
if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))
}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""))
}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])
}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);
return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)
}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)
}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))
}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)
}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};
d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;
if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)
};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c
}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}
}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)
},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]
}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a
},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)
},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);
this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()
},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)
},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;
for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]
}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)
}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();
return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)
}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)
},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now
}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)
}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem
}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;
if(a){return this.each(function(b){f.offset.setOffset(this,a,b)})}if(!b||!b.ownerDocument){return null
}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)}try{c=b.getBoundingClientRect()
}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0}
}var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;
return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a){return this.each(function(b){f.offset.setOffset(this,a,b)
})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)
}var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;
while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed"){break
}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c
}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft
}f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));
return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;
f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);
return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");
var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;
j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)
}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();
c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;
return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;
while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a
})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;
if(c===b){e=this[0];if(!e){return null}g=cy(e);return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]
}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c
})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];
return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];
return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];
if(!e){return a==null?null:this}if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c[d](a.call(this,b,c[d]()))})}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;
return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c])
}if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")
}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f
})})(window);if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("third_party/jquery")
}(function(a){a.fn.tipTip=function(c){var h={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};
var f=a.extend(h,c);if(a("#tiptip_holder").length<=0){var b=a('<div id="tiptip_holder" style="max-width:'+f.maxWidth+';"></div>');
var e=a('<div id="tiptip_content"></div>');var g=a('<div id="tiptip_arrow"></div>');
a("body").append(b.html(e).prepend(g.html('<div id="tiptip_arrow_inner"></div>')))
}else{var b=a("#tiptip_holder");var e=a("#tiptip_content");var g=a("#tiptip_arrow")
}return this.each(function(){var j=a(this);if(f.content){var m=f.content}else{var m=j.attr(f.attribute)
}if(m!=""){if(!f.content){j.removeAttr(f.attribute)}var i=false;if(f.activation=="hover"){j.hover(function(){l()
},function(){if(!f.keepAlive){k()}});if(f.keepAlive){b.hover(function(){},function(){k()
})}}else{if(f.activation=="focus"){j.focus(function(){l()}).blur(function(){k()})
}else{if(f.activation=="click"){j.click(function(){l();return false}).hover(function(){},function(){if(!f.keepAlive){k()
}});if(f.keepAlive){b.hover(function(){},function(){k()})}}}}function l(){f.enter.call(this);
e.html(m);b.hide().removeAttr("class").css("margin","0");g.removeAttr("style");var A=parseInt(j.offset()["top"]);
var q=parseInt(j.offset()["left"]);var x=parseInt(j.outerWidth());var C=parseInt(j.outerHeight());
var z=b.outerWidth();var u=b.outerHeight();var y=Math.round((x-z)/2);var p=Math.round((C-u)/2);
var o=Math.round(q+y);var n=Math.round(A+C+f.edgeOffset);var v="";var E="";var w=Math.round(z-12)/2;
if(f.defaultPosition=="bottom"){v="_bottom"}else{if(f.defaultPosition=="top"){v="_top"
}else{if(f.defaultPosition=="left"){v="_left"}else{if(f.defaultPosition=="right"){v="_right"
}}}}var t=(y+q)<parseInt(a(window).scrollLeft());var s=(z+q)>parseInt(a(window).width());
if((t&&y<0)||(v=="_right"&&!s)||(v=="_left"&&q<(z+f.edgeOffset+5))){v="_right";E=Math.round(u-13)/2;
w=-12;o=Math.round(q+x+f.edgeOffset);n=Math.round(A+p)}else{if((s&&y<0)||(v=="_left"&&!t)){v="_left";
E=Math.round(u-13)/2;w=Math.round(z);o=Math.round(q-(z+f.edgeOffset+5));n=Math.round(A+p)
}}var B=(A+C+f.edgeOffset+u+8)>parseInt(a(window).height()+a(window).scrollTop());
var D=((A+C)-(f.edgeOffset+u+8))<0;if(B||(v=="_bottom"&&B)||(v=="_top"&&!D)){if(v=="_top"||v=="_bottom"){v="_top"
}else{v=v+"_top"}E=u;n=Math.round(A-(u+5+f.edgeOffset))}else{if(D|(v=="_top"&&D)||(v=="_bottom"&&!B)){if(v=="_top"||v=="_bottom"){v="_bottom"
}else{v=v+"_bottom"}E=-12;n=Math.round(A+C+f.edgeOffset)}}if(v=="_right_top"||v=="_left_top"){n=n+5
}else{if(v=="_right_bottom"||v=="_left_bottom"){n=n-5}}if(v=="_left_top"||v=="_left_bottom"){o=o+5
}g.css({"margin-left":w+"px","margin-top":E+"px"});b.css({"margin-left":o+"px","margin-top":n+"px"}).attr("class","tip"+v);
if(i){clearTimeout(i)}i=setTimeout(function(){b.stop(true,true).fadeIn(f.fadeIn)},f.delay)
}function k(){f.exit.call(this);if(i){clearTimeout(i)}b.fadeOut(f.fadeOut)}}})}})(jQuery);
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("third_party/tiptip")
}(function(c,a){var e=/[<>&\r\n"']/gm;var b={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};
c.extend({fileDownload:function(o,h){var v=c.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:true},prepareCallback:function(B){},successCallback:function(B){},failCallback:function(B,C){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:true},h);
var A=new c.Deferred();var y=(navigator.userAgent||navigator.vendor||a.opera).toLowerCase();
var s;var x;var g;if(/ip(ad|hone|od)/.test(y)){s=true}else{if(y.indexOf("android")!==-1){x=true
}else{g=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(y.substr(0,4))
}}var u=v.httpMethod.toUpperCase();if(x&&u!=="GET"){if(c().dialog){c("<div>").html(v.androidPostUnsupportedMessageHtml).dialog(v.dialogOptions)
}else{alert(v.androidPostUnsupportedMessageHtml)}return A.reject()}var z=null;var m={onPrepare:function(B){if(v.preparingMessageHtml){z=c("<div>").html(v.preparingMessageHtml).dialog(v.dialogOptions)
}else{if(v.prepareCallback){v.prepareCallback(B)}}},onSuccess:function(B){if(z){z.dialog("close")
}v.successCallback(B);A.resolve(B)},onFail:function(B,C){if(z){z.dialog("close")}if(v.failMessageHtml){c("<div>").html(v.failMessageHtml).dialog(v.dialogOptions)
}v.failCallback(B,C);A.reject(B,C)}};m.onPrepare(o);if(v.data!==null&&typeof v.data!=="string"){v.data=c.param(v.data)
}var q,i,w,j;if(u==="GET"){if(v.data!==null){var t=o.indexOf("?");if(t!==-1){if(o.substring(o.length-1)!=="&"){o=o+"&"
}}else{o=o+"?"}o=o+v.data}if(s||x){i=a.open(o);i.document.title=v.popupWindowTitle;
a.focus()}else{if(g){a.location(o)}else{q=c("<iframe>").hide().prop("src",o).appendTo("body")
}}}else{var l="";if(v.data!==null){c.each(v.data.replace(/\+/g," ").split("&"),function(){var B=this.split("=");
var C=v.encodeHTMLEntities?k(decodeURIComponent(B[0])):decodeURIComponent(B[0]);if(C){var D=v.encodeHTMLEntities?k(decodeURIComponent(B[1])):decodeURIComponent(B[1]);
l+='<input type="hidden" name="'+C+'" value="'+D+'" />'}})}if(g){j=c("<form>").appendTo("body");
j.hide().prop("method",v.httpMethod).prop("action",o).html(l)}else{if(s){i=a.open("about:blank");
i.document.title=v.popupWindowTitle;w=i.document;a.focus()}else{q=c("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");
w=f(q)}w.write("<html><head></head><body><form method='"+v.httpMethod+"' action='"+o+"'>"+l+"</form>"+v.popupWindowTitle+"</body></html>");
j=c(w).find("form")}j.submit()}setTimeout(n,v.checkInterval);function n(){if(document.cookie.indexOf(v.cookieName+"="+v.cookieValue)!=-1){m.onSuccess(o);
document.cookie=v.cookieName+"=; expires="+new Date(1000).toUTCString()+"; path="+v.cookiePath;
p(false);return}if(i||q){try{var B=i?i.document:f(q);if(B&&B.body!=null&&B.body.innerHTML.length){var E=true;
if(j&&j.length){var C=c(B.body).contents().first();if(C.length&&C[0]===j[0]){E=false
}}if(E){m.onFail(B.body.innerHTML,o);p(true);return}}}catch(D){m.onFail("",o);p(true);
return}}setTimeout(n,v.checkInterval)}function f(B){var C=B[0].contentWindow||B[0].contentDocument;
if(C.document){C=C.document}return C}function p(B){setTimeout(function(){if(i){if(x){i.close()
}if(s){if(i.focus){i.focus();if(B){i.close()}}}}},0)}function k(B){return B.replace(e,function(C){return"&"+b[C]
})}return A.promise()}})})(jQuery,this);if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("third_party/filedownload");
/*
 * Sai 0.1 - Sproutcore oriented - Low level JavaScript Vector Library based off of Raphael JS
 *
 * Copyright (c) 2010 Evin Grano
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
}SC.BUNDLE_INFO={};
Sai=SC.Object.create({version:"0.1.0",vectorType:"UNK",svgns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",evnts:"http://www.w3.org/2001/xml-events",init:function(){arguments.callee.base.apply(this,arguments);
var a=(window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");
if(a==="VML"){this._vml=YES;var b=document.createElement("div");b.innerHTML="<!--[if vml]><br><br><![endif]-->";
if(b.childNodes.length!==2){a=null}else{b=null}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)")
}else{this._svg=YES;this.svgns="http://www.w3.org/2000/svg";this.xlink="http://www.w3.org/1999/xlink"
}this.vectorType=a},canvas_create:function(f){var e,b=[],a=arguments.length,c=Sai.vectorType,g;
for(e=1;a>1&&e<a;e++){b.push(arguments[e])}g="%@_%@_create".fmt(c.toLowerCase(),f);
return Sai[g].apply(Sai,b)},canvas_clear:function(a){var b=Sai.vectorType,c;c="%@_clear".fmt(b.toLowerCase());
return Sai[c].call(Sai,a)},colors:function(){var b=[];var c=[0.6,0.2,0.05,0.1333,0.75,0];
for(var a=0;a<10;a++){if(a<c.length){b.push("hsb("+c[a]+", .75, .75)")}else{b.push("hsb("+c[a-c.length]+", 1, .5)")
}}return b}.property().cacheable()});Sai.mixin({toHex:function(f){var c,j,b,a,h,g;
if(Sai._vml){b=this._getBody();a=/^\s+|\s+$/g;f=(f+"").replace(a,"");c=b.createTextRange();
try{b.style.color=f;j=c.queryCommandValue("ForeColor");j=((j&255)<<16)|(j&65280)|((j&16711680)>>>16);
g="#"+("000000"+j.toString(16)).slice(-6)}catch(i){g="none"}}else{h=this._hiddenColorPicker||document.createElement("i");
if(SC.none(this._hiddenColorPicker)){h.title="Sai Color Picker";h.style.display="none";
document.body.appendChild(h);this._hiddenColorPicker=h}h.style.color=f;g=document.defaultView.getComputedStyle(h,"").getPropertyValue("color")
}return g},_getBody:function(){var b,a;try{b=new window.ActiveXObject("htmlfile");
b.write("<body>");b.close();a=b.body}catch(c){a=window.createPopup().document.body
}return a},hsb2rgb:function(n,l,v){if(SC.none(n)){n={}}var w=!SC.none(n.h)&&!SC.none(n.s)&&!SC.none(n.b),h,x,j,a,m,u,s;
if(SC.typeOf(n)===SC.T_HASH&&w){v=n.b*1;l=n.s*1;n=n.h*1}if(n!==0&&n<=1){n*=360}if(l>1){l/=100
}if(v>1){v/=100}var k,o,e,c,y;if(l===0){a=v;m=v;u=v}else{if(n===360){n=359.99}if(n!==0){n/=60
}k=Math.floor(n);o=n-k;e=v*(1-l);c=v*(1-l*o);y=v*(1-l*(1-o));switch(k){case 0:a=v;
m=y;u=e;break;case 1:a=c;m=v;u=e;break;case 2:a=e;m=v;u=y;break;case 3:a=e;m=c;u=v;
break;case 4:a=y;m=e;u=v;break;case 5:a=v;m=e;u=c;break;default:a=0;m=0;u=0;break
}}h=Math.round(a*255);j=Math.round(m*255);x=Math.round(u*255);s={r:h,g:j,b:x,toString:function(){return this.hex
}};a=Sai.toTwoCharHex(h);m=Sai.toTwoCharHex(j);u=Sai.toTwoCharHex(x);s.hex="#"+a+m+u;
return s},rgb2hsb:function(a,f,m){a=SC.none(a)?{}:a;var l=!SC.none(a.r)&&!SC.none(a.g)&&!SC.none(a.b),e,n,j,b,h,g,k,c,i;
if(SC.typeOf(a)===SC.T_HASH&&l){f=a.g*1;m=a.b*1;a=a.r*1}else{if(SC.typeOf(a)===SC.T_STRING){return Sai.toRGB(a)
}}if(a>1){a/=255}if(f>1){f/=255}if(m>1){m/=255}e=Math.max(a,f,m);n=Math.min(a,f,m);
j=e+n;b=e-n;k=j/2;i=function(){var o=0;if(a===e){o=(f-m)/j}if(f===e){o=2+(m-a)/j}if(m===e){o=4+(a-f)/j
}return o};if(e===n){g=h=0}else{if(k<0.5){g=b/j;h=i()}else{if(k>=0.5){g=b/(2-j);h=i()
}}}h=Math.round(h*60);if(h<0){h+=360}g=Math.round(g*100);k=Math.round(k*100);c={h:h,s:g,b:k,toString:function(){return"hsb("+[this.h,this.s,this.b]+")"
}};return c},toTwoCharHex:function(a){var b=a.toString(16);b=b.replace(/^(?=[\da-f]$)/,"0");
return b.toUpperCase()},toRGB:function(h){var k,q,s={rb:1,hs:1},c,p,a,i,m,e,f,n,l,o=/^(?=[\da-f]$)/,j=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgb\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|rgb\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i;
if(SC.none(h)||(h*1<0)){return{r:-1,g:-1,b:-1,hex:"none",error:1}}if(h==="none"){return{r:-1,g:-1,b:-1,hex:"none"}
}c=h.substring(0,2);p=s.hasOwnProperty(c)||h.charAt()==="#";if(!p){h=Sai.toHex(h)
}l=h.match(j);if(l){if(l[2]){n=parseInt(l[2].substring(5),16);f=parseInt(l[2].substring(3,5),16);
e=parseInt(l[2].substring(1,3),16)}if(l[3]){n=parseInt((q=l[3].charAt(3))+q,16);f=parseInt((q=l[3].charAt(2))+q,16);
e=parseInt((q=l[3].charAt(1))+q,16)}if(l[4]){l=l[4].split(/\s*,\s*/);e=parseFloat(l[0]);
f=parseFloat(l[1]);n=parseFloat(l[2])}if(l[5]){l=l[5].split(/\s*,\s*/);e=parseFloat(l[0])*2.55;
f=parseFloat(l[1])*2.55;n=parseFloat(l[2])*2.55}if(l[6]){l=l[6].split(/\s*,\s*/);
e=parseFloat(l[0]);f=parseFloat(l[1]);n=parseFloat(l[2]);return Sai.hsb2rgb(e,f,n)
}if(l[7]){l=l[7].split(/\s*,\s*/);e=parseFloat(l[0])*2.55;f=parseFloat(l[1])*2.55;
n=parseFloat(l[2])*2.55;return Sai.hsb2rgb(e,f,n)}l={r:e,g:f,b:n,toString:function(){return this.hex
}};a=Sai.toTwoCharHex(e);i=Sai.toTwoCharHex(f);m=Sai.toTwoCharHex(n);l.hex="#"+a+i+m;
return l}return{r:-1,g:-1,b:-1,hex:"none",error:1}},convertAllToRGB:function(a){a=a||{};
for(var b in a){a[b]=Sai.toRGB(a[b])}return a},getColor:function(b){this.reset=this._reset||function(){delete this.start
};this._reset=this.reset;this.getColor.start=this.getColor.start||{h:0,s:1,b:b||0.75};
var c=this.getColor.start,a=this.hsb2rgb(c.h,c.s,c.b);c.h+=0.075;if(c.h>1){c.h=0;
c.s-=0.2;if(c.s<=0){this.getColor.start={h:0,s:1,b:c.b}}}return a.hex},resetColor:function(){var a=this.getColor;
delete a.start},_rotate:function(b,f,a){var e=b*Math.cos(a)-f*Math.sin(a),c=b*Math.sin(a)+f*Math.cos(a);
return{x:e,y:c}},a2c:function(v,ad,G,E,w,o,j,u,ac,z){var e=Math.PI,D=e*120/180,a=e/180*(+w||0),J=[],H,V,K,ab=Math.cos,f=Math.sin;
if(!z){H=this._rotate(v,ad,-a);v=H.x;ad=H.y;H=this._rotate(u,ac,-a);u=H.x;ac=H.y;
var b=ab(e/180*w),q=f(e/180*w),M=(v-u)/2,L=(ad-ac)/2;var X=(M*M)/(G*G)+(L*L)/(E*E);
if(X>1){X=Math.sqrt(X);G=X*G;E=X*E}var c=G*G,P=E*E,S=(o===j?-1:1)*Math.sqrt(Math.abs((c*P-c*L*L-P*M*M)/(c*L*L+P*M*M))),B=S*G*L/E+(v+u)/2,A=S*-E*M/G+(ad+ac)/2,n=Math.asin(((ad-A)/E).toFixed(7)),m=Math.asin(((ac-A)/E).toFixed(7));
n=v<B?e-n:n;m=u<B?e-m:m;if(n<0){n=e*2+n}if(m<0){m=e*2+m}if(j&&n>m){n=n-e*2}if(!j&&m>n){m=m-e*2
}}else{n=z[0];m=z[1];B=z[2];A=z[3]}var s=m-n;if(Math.abs(s)>D){var C=m,F=u,p=ac;m=n+D*(j&&m>n?1:-1);
u=B+G*ab(m);ac=A+E*f(m);J=this.a2c(u,ac,G,E,w,0,j,F,p,[m,C,B,A])}s=m-n;var l=ab(n),aa=f(n),g=ab(m),Z=f(m),N=Math.tan(s/4),Q=4/3*G*N,O=4/3*E*N,Y=[v,ad],W=[v+Q*aa,ad-O*l],U=[u+Q*Z,ac-O*g],T=[u,ac];
W[0]=2*Y[0]-W[0];W[1]=2*Y[1]-W[1];if(z){return[W,U,T].concat(J)}else{J=[W,U,T].concat(J).join().split(",");
var I=[];for(V=0,K=J.length;V<K;V++){I[V]=V%2?this._rotate(J[V-1],J[V],a).y:this._rotate(J[V],J[V+1],a).x
}return I}},q2c:function(b,e,h,f,a,c){var g=1/3,i=2/3;return[g*b+i*h,g*e+i*f,g*a+i*h,g*c+i*f,a,c]
},l2c:function(b,e,a,c){return[b,e,a,c,a,c]},parseDots:function(m){var l=[],a,k,f,n,e,g,h,b,c;
for(f=0,n=m[length];f<n;f++){a={};k=m[f].match(/^([^:]*):?([\d\.]*)/);a.color=Sai.getRGB(k[1]);
if(a.color.error){return null}a.color=a.color.hex;if(k[2]){a.offset=k[2]+"%"}l.push(a)
}for(f=1,n=l.length-1;f<n;f++){if(!l[f].offset){b=parseFloat(l[f-1].offset||0);c=0;
for(e=f+1;e<n;e++){if(l[e].offset){c=l[e].offset;break}}if(!c){c=100;e=n}c=parseFloat(c);
h=(c-b)/(e-f+1);for(;f<e;f++){b+=h;l[f].offset=b+"%"}}}return l},findDotAtSegment:function(b,a,e,c,m,l,k,j,o){var f=1-o,h,n,i,g=Math.pow;
n=g(f,3)*b+g(f,2)*3*o*e+f*3*o*o*m+g(o,3)*k;i=g(f,3)*a+g(f,2)*3*o*c+f*3*o*o*l+g(o,3)*j;
return{x:n,y:i}},findDotsAtSegment:function(b,a,z,v,h,f,j,i,p){var n=1-p,m=Math.pow(n,3)*b+Math.pow(n,2)*3*p*z+n*3*p*p*h+Math.pow(p,3)*j,k=Math.pow(n,3)*a+Math.pow(n,2)*3*p*v+n*3*p*p*f+Math.pow(p,3)*i,s=b+2*p*(z-b)+p*p*(h-2*z+b),q=a+2*p*(v-a)+p*p*(f-2*v+a),w=z+2*p*(h-z)+p*p*(j-2*h+z),u=v+2*p*(f-v)+p*p*(i-2*f+v),o=(1-p)*b+p*z,l=(1-p)*a+p*v,e=(1-p)*h+p*j,c=(1-p)*f+p*i,g=(90-Math.atan((s-w)/(q-u))*180/Math.PI);
if(s>w||q<u){g+=180}return{x:m,y:k,m:{x:s,y:q},n:{x:w,y:u},start:{x:o,y:l},end:{x:e,y:c},alpha:g}
},isZeroOrValue:function(b,a){if(SC.none(b)){return a}else{return(b===0||b==="0")?0:b
}}});sc_require("core_helpers");Sai.mixin({round:function(a){return +a+(~~a===a)*0.5
},roundPath:function(g){var c,e,b,f,a=Sai.round;for(c=0,e=g.length;c<e;c++){if(g[c][0].toLowerCase()!=="a"){for(b=1,f=g[c][length];
b<f;b++){g[c][b]=a(g[c][b])}}else{g[c][6]=a(g[c][6]);g[c][7]=a(g[c][7])}}return g
},_path2string:function(){var a=/,?([achlmqrstvxz]),?/gi;return this.join(",").replace(a,"$1")
},parsePathString:function(c){var h=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,b=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,a,e,g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},f=[];
if(!c){return null}if(SC.typeOf(c)===SC.T_ARRAY&&SC.typeOf(c[0])===SC.T_ARRAY){f=Sai.pathClone(c)
}a=function(j,i,m){var l=[],k=i?i.toLowerCase():"";m.replace(b,function(o,n){if(n){l.push(+n)
}});if(k==="m"&&l[length]>2){f.push([i].concat(l.splice(0,2)));k="l";i=i==="m"?"l":"L"
}while(l.length>=g[k]){f.push([i].concat(l.splice(0,g[k])));if(!g[k]){break}}};if(!f.length){e=c+"";
e.replace(h,a)}f.toString=Sai._path2string;return f},pathClone:function(f){var e=[],c,a,b,g;
if(!SC.typeOf(f)===SC.T_ARRAY||!(f&&SC.typeOf(f[0])===SC.T_ARRAY)){f=Sai.parsePathString(f)
}for(c=0,a=f.length;c<a;c++){e[c]=[];for(b=0,g=f[c].length;b<g;b++){e[c][b]=f[c][b]
}}e.toString=Sai._path2string;return e},pathToAbsolute:function(e){if(SC.typeOf(e)===SC.T_ARRAY&&SC.typeOf(e[0])===SC.T_ARRAY){e=Sai.parsePathString(e)
}var h,f,g,q,a,o,b,k=[],c=0,m=0,l=0,p=0,n=0;if(e[0][0]==="M"){m=+e[0][1];l=+e[0][2];
p=m;n=l;c++;k[0]=["M",m,l]}for(h=c,f=e.length;h<f;h++){a=k[h]=[];o=e[h];b=o[0].toUpperCase();
if(o[0]!==b){a[0]=b;switch(b){case"A":a[1]=o[1];a[2]=o[2];a[3]=o[3];a[4]=o[4];a[5]=o[5];
a[6]=+(o[6]+m);a[7]=+(o[7]+l);break;case"V":a[1]=+o[1]+l;break;case"H":a[1]=+o[1]+m;
break;case"M":p=+o[1]+m;n=+o[2]+l;break;default:for(g=1,q=o.length;g<q;g++){a[g]=+o[g]+((g%2)?m:l)
}break}}else{for(g=0,q=o.length;g<q;g++){k[h][g]=o[g]}}if(a[0]==="Z"){m=p;l=n}else{if(a[0]==="H"){m=a[1]
}else{if(a[0]==="V"){l=a[1]}else{m=k[h][k[h].length-2];l=k[h][k[h].length-1]}}}}k.toString=Sai._path2string;
return k},pathToRelative:function(e){if(SC.typeOf(e)===SC.T_ARRAY&&SC.typeOf(e[0])===SC.T_ARRAY){e=Sai.parsePathString(e)
}var n=[],h,v,a,t,g,l,f,c,m,q=0,p=0,u=0,s=0,o,b=0;if(e[0][0]==="M"){q=e[0][1];p=e[0][2];
u=q;s=p;b++;n.push(["M",q,p])}for(h=b,v=e.length;h<v;h++){a=n[h]=[];t=e[h];o=t[0].toLowerCase();
if(t[0]!==o){a[0]=o;switch(a[0]){case"a":a[1]=t[1];a[2]=t[2];a[3]=t[3];a[4]=t[4];
a[5]=t[5];a[6]=+(t[6]-q).toFixed(3);a[7]=+(t[7]-p).toFixed(3);break;case"v":a[1]=+(t[1]-p).toFixed(3);
break;case"m":u=t[1];s=t[2];break;default:for(g=1,l=t.length;g<l;g++){a[g]=+(t[g]-((g%2)?q:p)).toFixed(3)
}}}else{a=n[h]=[];if(t[0]==="m"){u=t[1]+q;s=t[2]+p}for(f=0,c=t.length;f<c;f++){n[h][f]=t[f]
}}m=n[h].length;switch(n[h][0]){case"z":q=u;p=s;break;case"h":q+=+n[h][m-1];break;
case"v":p+=+n[h][m-1];break;default:q+=+n[h][m-2];p+=+n[h][m-1]}}n.toString=this._path2string;
return n},curveDim:function(f,e,u,s,h,g,k,j){var A,w,t,o,m,l=[e,j],n=[f,k],p,q,i,v=Math.round,z=Math.min,B=Math.max;
A=(h-2*u+f)-(k-2*h+u);w=2*(u-f)-2*(h-u);t=f-u;o=(-w+Math.sqrt(w*w-4*A*t))/2/A;m=(-w-Math.sqrt(w*w-4*A*t))/2/A;
if(Math.abs(o)>1000000000000){o=0.5}if(Math.abs(m)>1000000000000){m=0.5}if(o>0&&o<1){p=Sai.findDotAtSegment(f,e,u,s,h,g,k,j,o);
n.push(p.x);l.push(p.y)}if(m>0&&m<1){p=Sai.findDotAtSegment(f,e,u,s,h,g,k,j,m);n.push(p.x);
l.push(p.y)}A=(g-2*s+e)-(j-2*g+s);w=2*(s-e)-2*(g-s);t=e-s;o=(-w+Math.sqrt(w*w-4*A*t))/2/A;
m=(-w-Math.sqrt(w*w-4*A*t))/2/A;if(Math.abs(o)>1000000000000){o=0.5}if(Math.abs(m)>1000000000000){m=0.5
}if(o>0&&o<1){p=Sai.findDotAtSegment(f,e,u,s,h,g,k,j,o);n.push(p.x);l.push(p.y)}if(m>0&&m<1){p=Sai.findDotAtSegment(f,e,u,s,h,g,k,j,m);
n.push(p.x);l.push(p.y)}q={x:v(z.apply(0,n)),y:v(z.apply(0,l))};i={x:v(B.apply(0,n)),y:v(B.apply(0,l))};
return{min:q,max:i}},pathDimensions:function(q){var f=Math.max,o=Math.min;if(!q){return{x:0,y:0,width:0,height:0}
}q=Sai.path2curve(q);var m=0,l=0,e=[],b=[],c,h,a,n,g,j,k={};for(g=0,j=q.length;g<j;
g++){c=q[g];if(c[0]==="M"){m=c[1];l=c[2];e.push(m);b.push(l)}else{h=Sai.curveDim(m,l,c[1],c[2],c[3],c[4],c[5],c[6]);
e=e.concat(h.min.x,h.max.x);b=b.concat(h.min.y,h.max.y);m=c[5];l=c[6]}}a=o.apply(0,e);
n=o.apply(0,b);k={x:a,y:n,width:f.apply(0,e)-a,height:f.apply(0,b)-n};return k},_processPath:function(c,e){var a,f,b;
if(!c){return["C",e.x,e.y,e.x,e.y,e.x,e.y]}if(!(c[0] in {T:1,Q:1})){e.qx=e.qy=null
}switch(c[0]){case"M":e.X=c[1];e.Y=c[2];break;case"A":b=[e.x,e.y].concat(c.slice(1));
b=Sai.a2c.apply(0,b);c=["C"].concat(b);break;case"S":a=e.x+(e.x-(e.bx||e.x));f=e.y+(e.y-(e.by||e.y));
break;case"T":e.qx=e.x+(e.x-(e.qx||e.x));e.qy=e.y+(e.y-(e.qy||e.y));b=Sai.q2c(e.x,e.y,e.qx,e.qy,c[1],c[2]);
c=["C"].concat(b);break;case"Q":e.qx=c[1];e.qy=c[2];b=Sai.q2c(e.x,e.y,c[1],c[2],c[3],c[4]);
c=["C"].concat(b);break;case"L":b=Sai.l2c(e.x,e.y,c[1],c[2]);c=["C"].concat(b);break;
case"H":b=Sai.l2c(e.x,e.y,c[1],e.y);c=["C"].concat(b);break;case"V":b=Sai.l2c(e.x,e.y,e.x,c[1]);
c=["C"].concat(b);break;case"Z":b=Sai.l2c(e.x,e.y,e.X,e.Y);c=["C"].concat(b);break
}return c},path2curve:function(q,j){var h,n,g,o,f,k,e=Sai.pathToAbsolute(q),m=j&&Sai.pathToAbsolute(j),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(p,s){var t;
if(p[s].length>7){p[s].shift();t=p[s];while(t.length){p.splice(s++,0,["C"].concat(t.splice(0,6)))
}p.splice(s,1);n=Math.max(e.length,m&&m.length||0)}},c=function(v,u,s,p,t){if(v&&u&&v[t][0]==="M"&&u[t][0]!=="M"){u.splice(t,0,["M",p.x,p.y]);
s.bx=0;s.by=0;s.x=v[t][1];s.y=v[t][2];n=Math.max(e.length,m&&m.length||0)}};for(h=0,n=Math.max(e.length,m&&m.length||0);
h<n;h++){e[h]=this._processPath(e[h],l);a(e,h);if(m){m[h]=this._processPath(m[h],b);
a(m,h)}c(e,m,l,b,h);c(m,e,b,l,h);g=e[h];o=m&&m[h];f=g.length;k=m&&o.length;l.x=g[f-2];
l.y=g[f-1];l.bx=parseFloat(g[f-4])||l.x;l.by=parseFloat(g[f-3])||l.y;b.bx=m&&(parseFloat(o[k-4])||b.x);
b.by=m&&(parseFloat(o[k-3])||b.y);b.x=m&&o[k-2];b.y=m&&o[k-1]}return m?[e,m]:e},coordsize:1000+" "+1000,vmlZoom:1,vmlMapping:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},_cmdReplace:function(i,c,f){var e,g=[],b=/-?[^,s-]+/g,a=Sai.vmlMapping,j=Math.round,h=c.toLowerCase()==="m";
e=a[c];f.replace(b,function(k){if(h&&g.length===2){e+=g+a[c==="m"?"l":"L"];g=[]}g.push(j(k*Sai.vmlZoom))
});return"%@ %@ ".fmt(e,g)},path2vml:function(l){var f=/[ahqstv]/ig,e=/[clmz]/g,u={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},c=/([clmz]),?([^clmz]*)/gi,w=/-?[^,s-]+/g,b=Sai.pathToAbsolute,h,n,v,a,m,k,t=Math.round,q,g,o,s;
if((l+"").match(f)){b=Sai.path2curve}if(b===Sai.pathToAbsolute&&!(l+"").match(e)){v=(l+"").replace(c,Sai._cmdReplace);
return v+"e"}a=b(l);v=[];for(q=0,g=a.length;q<g;q++){m=a[q];k=a[q][0].toLowerCase();
if(k==="z"){k="x"}for(o=1,s=m.length;o<s;o++){k+=t(m[o]*Sai.vmlZoom)+(o!==s-1?",":"")
}v.push(k)}v.push("e");return v.join(" ")}});sc_require("core_helpers");sc_require("core_paths");
Sai.mixin({svg_clear:function(a){var b=a?a.firstChild:0;while(b){a.removeChild(b);
b=a.firstChild||0}return a},svg_canvas_create:function(e,c,a){var b;b=document.createElementNS(this.svgns,"svg");
b.setAttributeNS(null,"id",e);b.setAttributeNS(null,"version","1.1");b.setAttributeNS(null,"baseProfile","full");
b.setAttributeNS(null,"width","%@px".fmt(c));b.setAttributeNS(null,"height","%@px".fmt(a));
return b},svg_attr_set:function(c,f,b,g){var e,a;g=g||null;if(SC.typeOf(b)===SC.T_STRING){a=this.svg_format_attr(f,b,g)
}else{if(SC.typeOf(b)===SC.T_HASH){b.stroke=b.stroke||"none";b.fill=b.fill||"none";
for(e in b){a=this.svg_format_attr(f,e,b[e])}}}return f},svg_format_attr:function(c,a,g){var b=g,f=a,e;
a=a?a.toLowerCase():null;if(a==="stroke-width"){b="%@px".fmt(g)}else{if(a==="fill"){b=Sai.toRGB(g).hex
}else{if(a==="stroke"){b=Sai.toRGB(g).hex}else{if(a==="rotate"){f="transform";b="rotate(%@ %@ %@)".fmt(g.rotation,g.x,g.y)
}else{if(a==="text-anchor"){e={left:"start",center:"middle",right:"end"};b=e[g]||"start"
}}}}}c.setAttributeNS(null,f,b);return b},radial_gradient:/^r(?:(([^,]+?)s*,s*([^)]+?)))?/,_gradientFill:function(f,g){var c="linear",b,e=0.5,a=0.5;
b=function(j,h,m){var i,l,k=Math.pow;c="radial";if(h&&m){e=parseFloat(h);a=parseFloat(m);
i=((a>0.5)*2-1);l=k(e-0.5,2)+k(a-0.5,2);if(l>0.25){a=Math.sqrt(0.25-k(e-0.5,2))*i+0.5;
if(a!==0.5){a=a.toFixed(5)-0.00001*i}}}return""};g=(g+"").replace(Sai.radial_gradient,b)
},svg_circle_create:function(e,b,g,a,c){var f;b=Sai.round(b);g=Sai.round(g);f=document.createElementNS(this.svgns,"circle");
f.setAttributeNS(null,"cx",b);f.setAttributeNS(null,"cy",g);f.setAttributeNS(null,"r",a);
f=Sai.svg_attr_set(e,f,c);return f},svg_ellipse_create:function(e,a,i,h,g,c){var f,b=Math.round;
a=b(a);i=b(i);h=b(h);g=b(g);f=document.createElementNS(this.svgns,"ellipse");f.setAttributeNS(null,"cx",a);
f.setAttributeNS(null,"cy",i);f.setAttributeNS(null,"rx",h);f.setAttributeNS(null,"ry",g);
f=Sai.svg_attr_set(e,f,c);return f},svg_rect_create:function(a,g,e,b,i,c,j){var f,k=Math.round;
g=k(g);e=k(e);b=k(b);i=k(i);c=k(c);f=document.createElementNS(this.svgns,"rect");
f.setAttributeNS(null,"x",g);f.setAttributeNS(null,"y",e);f.setAttributeNS(null,"height",b);
f.setAttributeNS(null,"width",i);f=Sai.svg_attr_set(a,f,j);return f},svg_text_create:function(a,g,f,e,i,l,k){var b,c,j,m=Math.round;
k=k||{};g=m(g)||0;f=m(f)||0;e=m(e)||0;i=m(i)||0;b=this._anchor_helper(g,f,e,i,k["text-anchor"]);
c=document.createElementNS(this.svgns,"text");j=document.createTextNode(l);c.setAttributeNS(null,"x",b[0]);
c.setAttributeNS(null,"y",b[1]);c=Sai.svg_attr_set(a,c,k);c.appendChild(j);return c
},_anchor_helper:function(a,f,e,b,c){if(c==="center"){return[a+(b/2),f+e]}else{if(c==="right"){return[a+b,f+e]
}else{return[a,f+e]}}},svg_polygon_create:function(e,f,c){var g,b="",a=true;f=f||[];
if(SC.typeOf(f)===SC.T_STRING){b=f}else{if(SC.typeOf(f)===SC.T_ARRAY){f.forEach(function(h){if(a){b="%@,%@".fmt(h.x,h.y);
a=false}else{b+=" %@,%@".fmt(h.x,h.y)}})}}g=document.createElementNS(this.svgns,"polygon");
g.setAttributeNS(null,"points",b);g=Sai.svg_attr_set(e,g,c);return g},svg_path_create:function(b,g,a){var f,e="",c;
g=g||[];c=SC.typeOf(g);if(c===SC.T_STRING){e=Sai.parsePathString(g)}else{if(c===SC.T_ARRAY){e=Sai.parsePathString(g.join(" "))
}}f=document.createElementNS(this.svgns,"path");e=Sai.roundPath(Sai.pathToAbsolute(e));
f.setAttributeNS(null,"d",e);f=Sai.svg_attr_set(b,f,a);return f},svg_image_create:function(b,g,f,e,i,a,j){var c,k=Math.round;
g=k(g);f=k(f);e=k(e);i=k(i);c=document.createElementNS(this.svgns,"image");c.setAttributeNS(null,"x",g);
c.setAttributeNS(null,"y",f);c.setAttributeNS(null,"height",e);c.setAttributeNS(null,"width",i);
c.setAttributeNS(this.xlink,"href",a);c=Sai.svg_attr_set(b,c,j);return c}});sc_require("core_helpers");
sc_require("core_paths");Sai.mixin({vml_clear:function(b){var e=b.id(),a=b.width,c=b.height;
return this.vml_canvas_create(e,a,c)},vml_begin_node:null,vml_end_node:function(a){return a.end()
},vml_canvas_create:function(i,c,a){var b,h="%@px",g=document;b=SC.RenderContext("div").id(i).styles({position:"absolute",top:"0px",left:"0px",width:h.fmt(c),height:h.fmt(a)});
b.isRenderable=YES;b.width=c;b.height=a;b.abWidth=c;b.abHeight=a;try{if(!g.namespaces.rvml){g.namespaces.add("rvml","urn:schemas-microsoft-com:vml")
}Sai.vml_begin_node=function(j,e){j=j.begin("rvml:%@".fmt(e)).addClass("rvml");return j
}}catch(f){Sai.vml_begin_node=function(j,e){j=j.begin(e).attr({xmls:"urn:schemas-microsoft.com:vml"}).addClass("rvml");
return j}}return b},vml_attr_set:function(c,f,b,g){var e,a;g=g||null;if(SC.typeOf(b)===SC.T_STRING){f=this.vml_format_attr(f,b,g)
}else{if(SC.typeOf(b)===SC.T_HASH){b.stroke=b.stroke||"none";b.fill=b.fill||"none";
for(e in b){f=this.vml_format_attr(f,e,b[e])}}}return f},vml_format_attr:function(c,a,e){var b=e;
a=a?a.toLowerCase():null;if(a==="stroke-width"){c=c.attr("strokeweight","%@".fmt(e))
}else{if(a==="fill"){b=Sai.toRGB(e).hex;c=Sai.vml_begin_node(c,"fill").attr({on:"True",color:b}).end()
}else{if(a==="stroke"){b=Sai.toRGB(e).hex;c=Sai.vml_begin_node(c,"stroke").attr({on:"True",color:b}).end()
}else{c=c.attr(a,e)}}}return c},vml_circle_create:function(a,j,i,f,l){var m=Math.round,e,g,k=0,h=a._canvas,b="%@px";
if(l){k=(l["stroke-width"]||0)/2}j=m(j-f-k);i=m(i-f-k);g=2*m(f);e=Sai.vml_begin_node(h,"oval");
e=e.styles({position:"absolute",top:b.fmt(i),left:b.fmt(j),width:b.fmt(g),height:b.fmt(g)});
e=Sai.vml_attr_set(h,e,l);e=Sai.vml_end_node(e);return e},vml_ellipse_create:function(e,j,i,b,a,k){var g,n,m,l=Math.round,h=e._canvas,f="%@px";
j=l(j-b);i=l(i-a);n=2*l(b);m=2*l(a);g=Sai.vml_begin_node(h,"oval");g=g.styles({position:"absolute",top:f.fmt(i),left:f.fmt(j),width:f.fmt(n),height:f.fmt(m)});
g=Sai.vml_attr_set(h,g,k);g=Sai.vml_end_node(g);return g},vml_rect_create:function(a,k,j,f,l,g,m){var e,n=Math.round,b="%@px",i=a._canvas;
k=n(k);j=n(j);f=n(f);l=n(l);g=n(g)||0;e=Sai.vml_begin_node(i,"roundrect");m.arcsize=(+g||0)/Math.min(l,f);
e=e.styles({position:"absolute",top:b.fmt(j),left:b.fmt(k),width:b.fmt(l),height:b.fmt(f)});
e=Sai.vml_attr_set(i,e,m);e=Sai.vml_end_node(e);return e},vml_text_create:function(g,l,k,q,m,n,p){var s,e,u=Math.round,t=g._canvas,i="%@px",a=Sai.vmlZoom,j,o,b={left:"left",middle:"center",right:"right"},v=t.abWidth,f=t.abHeight;
l=u(l);k=u(k);q=u(q);m=u(m);s=Sai.vml_begin_node(t,"shape");p.coordorigin="0 0";p.coordsize="%@ %@".fmt(a*v,a*f);
s=s.styles({position:"absolute",top:i.fmt(k),left:i.fmt(l),width:i.fmt(m),height:i.fmt(q)});
s=Sai.vml_begin_node(s,"path").attr({textpathok:"True",v:"m%@1,%@2 l%@3,%@2".fmt(a*l,a*k,a*l+1)}).end();
s=Sai.vml_begin_node(s,"textpath");o="%@px %@".fmt(p["font-size"],p.font);j=b[p["text-anchor"]||"left"];
s=s.styles({font:o}).attr({string:n,on:"True"}).end();p=this._clearAttrs(p);p.stroke=p.stroke||p.fill||"black";
s=Sai.vml_attr_set(t,s,p);s=Sai.vml_end_node(s);return s},vml_polygon_create:function(e,f,b){var g,a="",i=e._canvas;
f=f||[];if(SC.typeOf(f)===SC.T_STRING){a=f}else{if(SC.typeOf(f)===SC.T_ARRAY){f.forEach(function(c){a+="%@px,%@px".fmt(c.x,c.y)
})}}var h=a.match(/^(\d+px,\d+px)|(\d+,\d+\s+)/i)||[];if(h[0]){a+=" "+h[0]}g=Sai.vml_begin_node(i,"polyline");
b.points=a;g=Sai.vml_attr_set(i,g,b);g=Sai.vml_end_node(g);return g},vml_path_create:function(a,o,l){var e,m,i,g,h,b="%@px",k=a._canvas,n=Sai.vmlZoom,f=k.abWidth,j=k.abHeight;
o=o||[];h=SC.typeOf(o);if(h===SC.T_STRING){i=Sai.parsePathString(o)}else{if(h===SC.T_ARRAY){i=Sai.parsePathString(o.join(" "))
}}m=Sai.path2vml(i);e=Sai.vml_begin_node(k,"shape");l.path=m;l.coordorigin="0 0";
l.coordsize="%@ %@".fmt(n*f,n*j);e=e.styles({position:"absolute",top:"0px",left:"0px",width:"%@px".fmt(f),height:"%@px".fmt(j)});
e=Sai.vml_attr_set(k,e,l);e=Sai.vml_end_node(e);return e},vml_image_create:function(b,k,j,g,l,a,m){var f,n=Sai.round,e="%@px",i=b._canvas;
k=n(k);j=n(j);g=n(g);l=n(l);f=Sai.vml_begin_node(i,"image");m.src=a;f=f.styles({position:"absolute",top:e.fmt(j),left:e.fmt(k),width:e.fmt(l),height:e.fmt(g)});
f=Sai.vml_attr_set(i,f,m);f=Sai.vml_end_node(f);return f},_clearAttrs:function(a){delete a.font;
delete a["font-size"];delete a["text-anchor"];return a}});Sai.Set=SC.Object.extend({items:[],length:0,type:"set",init:function(){var b=this.get("items"),a=b.length;
this.set("length",a)},push:function(){var e,a;for(var b=0,c=arguments.length;b<c;
b++){e=arguments[b];if(e){a=this.items.length;this[a]=this.items[a]=e;this.length++
}}return this},pop:function(){delete this[this.length--];return this.items.pop()},attr:function(b,g){if(b&&R.is(b,array)&&R.is(b[0],"object")){for(var a=0,f=b.length;
a<f;a++){this.items[a].attr(b[a])}}else{for(var c=0,e=this.items.length;c<e;c++){this.items[c].attr(b,g)
}}return this},animate:function(f,b,j,h){(SC.isKind(j,SC.T_FUNCTION)||!j)&&(h=j||null);
var a=this.items.length,c=a,g=this,e;h&&(e=function(){!--a&&h.call(g)});this.items[--c].animate(f,b,j||e,e);
while(c--){this.items[c].animateWith(this.items[a-1],f,b,j||e,e)}return this},insertAfter:function(b){var a=this.items.length;
while(a--){this.items[a].insertAfter(b)}return this},getBBox:function(){var a=[],g=[],b=[],e=[];
for(var c=this.items.length;c--;){var f=this.items[c].getBBox();a.push(f.x);g.push(f.y);
b.push(f.x+f.width);e.push(f.y+f.height)}a=mmin.apply(0,a);g=mmin.apply(0,g);return{x:a,y:g,width:mmax.apply(0,b)-a,height:mmax.apply(0,e)-g}
},clone:function(c){c=new Set;for(var a=0,b=this.items.length;a<b;a++){c.push(this.items[a].clone())
}return c}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sai/foundation")
}Sai.Canvas=SC.Object.extend({_elements:null,_orderedElements:null,render:function(c,j){var e=null,g=c.get("frame"),b="%@-vg".fmt(c.get("layerId")),h=this._orderedElements,a=h?h.length:0;
if(j){e=Sai.canvas_create("canvas",b,g.width,g.height);this._canvas=e}else{Sai.canvas_clear(this._canvas||{})
}for(var f=0;f<a;f++){h[f].render(this,j)}this.renderToView(c)},getElementByTarget:function(a){},clear:function(){var b=this._orderedElements||[],a=b?b.length:0;
this._canvas=Sai.canvas_clear(this._canvas||{});b.forEach(function(c){this.removeElement(c,b)
},this);this._orderedElements=null;this._elements=null},renderToView:function(a){var b,f=this._canvas,e=a.get("layer");
if(SC.none(f.isRenderable)){b=this._orderedElements||[];b.forEach(function(c){f.appendChild(c._element)
});e.appendChild(f)}else{console.log("Render HTML:\n\n%@".fmt(f.strings));b=f.join(" ");
e.innerHTML=b}},element:function(a,b){b=b||this._generateId();if(a.isClass){a=a.create({id:b})
}this._addCanvasElement(a,b);return a},circle:function(b,g,a,c,f){var e;b=b||{};c=c||{};
f=f||this._generateId();e=b.isCircle?b:Sai.Circle.create({id:f,x:b,y:g,radius:a,stroke:c.stroke||"black",strokeWidth:Sai.isZeroOrValue(c.strokeWidth,0),fill:c.fill||"none"});
if(b.isCircle&&!f){f=g}this._addCanvasElement(e,f);return e},path:function(c,a,e){var b;
a=a||{};c=c||{};e=e||this._generateId();b=c.isPath?c:Sai.Path.create({id:e,stroke:a.stroke,strokeWidth:a.strokeWidth,path:c});
this._addCanvasElement(b,e);return b},rectangle:function(c,i,f,b,a,e,h){var g;c=c||{};
e=e||{};h=h||this._generateId();g=c.isRectangle?c:Sai.Rectangle.create({id:h,x:c,y:i,width:f,height:b,radius:a,stroke:e.stroke||"black",strokeWidth:Sai.isZeroOrValue(e.strokeWidth,0),fill:e.fill||"none"});
this._addCanvasElement(g,h);return g},text:function(b,i,e,a,g,c,h){var f;b=b||{};
c=c||{};h=h||this._generateId();f=b.isText?b:Sai.Text.create({id:h,x:b,y:i,width:e,height:a,text:g,fill:c.fill||"black",stroke:c.stroke||"none",attrs:c});
this._addCanvasElement(f,h);return f},removeElement:function(a,b){if(!a){return}var c=b||this._orderedElements;
if(c){c.removeObject(a)}delete this._elements[a.get("id")];a.destroy()},getElementById:function(a){return this._elements[a]
},getElementByIndex:function(a){},_addCanvasElement:function(a,b){b=b||SC.guidFor(a);
this._elements=this._elements||{};this._orderedElements=this._orderedElements||[];
a.set("id",b);this._elements[b]=a;this._orderedElements.pushObject(a)},_startId:1,_generateId:function(){var a="sai%@".fmt(this._startId);
this._startId+=1;return a}});Sai.Element=SC.Object.extend({isVisible:YES,_element:null,id:null,render:function(a,b){},basicAttrs:function(a){a=a||{};
a.id=this.id;return a},getBBox:function(){var a=this.get("frame");return{x:a.x+(this.bbx||0),y:a.y,width:a.width,height:a.height}
}});sc_require("system/element");Sai.Shape=Sai.Element.extend({fill:null,stroke:null,strokeWidth:null,basicAttrs:function(a){a=arguments.callee.base.apply(this,arguments);
a.fill=this.get("fill")||"none";a.stroke=this.get("stroke")||"none";a["stroke-width"]=Sai.isZeroOrValue(this.get("strokeWidth"),0);
return a}});sc_require("system/shape");Sai.Circle=Sai.Shape.extend({isCircle:YES,x:0,y:0,radius:0,render:function(c,h){var f=null,a=this.get("x"),g=this.get("y"),e=this.get("radius"),b=this.basicAttrs();
f=Sai.canvas_create("circle",c,a,g,e,b);this._element=f}});sc_require("system/shape");
Sai.Ellipse=Sai.Shape.extend({x:0,y:0,radiusX:0,radiusY:0,render:function(c,i){var e=null,a=this.get("x"),h=this.get("y"),g=this.get("radiusX"),f=this.get("radiusY"),b=this.basicAttrs();
e=Sai.canvas_create("ellipse",c,a,h,g,f,b);this._element=e}});sc_require("system/element");
Sai.Image=Sai.Element.extend({x:0,y:0,height:0,width:0,image:null,basicAttrs:function(a){a=a||{};
a["stroke-width"]=Sai.isZeroOrValue(this.get("strokeWidth"),0);return a},render:function(c,b){var e,l=this.get("text"),i=this.get("x"),g=this.get("y"),f=this.get("height"),j=this.get("width"),a=this.get("image"),k=this.basicAttrs();
e=Sai.canvas_create("image",c,i,g,f,j,a,k);this._element=e}});sc_require("system/shape");
Sai.Path=Sai.Shape.extend({isPath:YES,path:null,render:function(b,f){var c=null,e=this.get("path"),a=this.basicAttrs();
c=Sai.canvas_create("path",b,e,a);this._element=c}});sc_require("system/shape");Sai.Polygon=Sai.Shape.extend({points:null,render:function(b,f){var c=null,e=this.get("points"),a=this.basicAttrs();
c=Sai.canvas_create("polygon",b,e,a);this._element=c}});sc_require("system/shape");
Sai.Rectangle=Sai.Shape.extend({isRectangle:YES,x:0,y:0,width:0,height:0,radius:null,render:function(b,a){var g=null,i=this.get("x"),f=this.get("y"),c=this.get("height"),j=this.get("width"),e=this.get("radius")||0,k=this.basicAttrs();
g=Sai.canvas_create("rect",b,i,f,c,j,e,k);this._element=g}});sc_require("system/element");
Sai.Text=Sai.Shape.extend({x:0,y:0,height:0,width:0,text:"Sai.Text",attrs:null,basicAttrs:function(a){var b=this.get("attrs")||{};
a=a||{};a=arguments.callee.base.apply(this,arguments);a["text-anchor"]=b.textAnchor||"left";
a["font-size"]=b.fontSize||"12";a["stroke-width"]=Sai.isZeroOrValue(this.get("strokeWidth"),0);
a.font=b.font||"Helvetica, Arial";return a},render:function(b,a){var c,k=this.get("text"),g=this.get("x"),f=this.get("y"),e=this.get("height"),i=this.get("width"),j=this.basicAttrs();
c=Sai.canvas_create("text",b,g,f,e,i,k,j);this._element=c}});Sai.CanvasView=SC.View.extend({canvas:null,childElements:null,_events:["mouseDown","mouseUp"],init:function(){arguments.callee.base.apply(this,arguments);
this._events.forEach(function(a){this[a]=function(b){var f,h=this.canvas,g=b.target.id;
f=h.getElementById(g);if(f&&f[a]){return f[a](b)}return NO}},this)},didCreateLayer:function(){if(this.willCreateCanvas){this.willCreateCanvas()
}this.canvas=Sai.Canvas.create();this.renderCanvas(this.canvas,YES);this.renderChildElements(this.canvas,YES);
this.canvas.render(this,YES);if(this.didCreateCanvas){this.didCreateCanvas()}},didUpdateLayer:function(){if(this.willUpdateCanvas){this.willUpdateCanvas()
}this.renderCanvas(this.canvas,NO);this.renderChildElements(this.canvas,NO);this.canvas.render(this,NO);
if(this.didUpdateCanvas){this.didUpdateCanvas()}},willDestroyLayer:function(){this.willDestroyCanvas(this.canvas);
this.canvas.destroy()},willDestroyCanvas:function(a){},getCanvasElementById:function(a){},getCanvasElementbyTarget:function(a){},renderCanvas:function(a,b){},renderChildElements:function(b,h){var f=this.get("childElements")||[],g,e,c,a;
if(h){for(c=0,a=f.length;c<a;c++){if(e=(g=f[c])){if(typeof e===SC.T_STRING){g=this[e]
}else{e=null}if(!g){console.error("No element with name "+e+" has been found in "+this.toString());
continue}if(g.isClass){g=g.create();if(e){this[e]=g}}}f[c]=g;b.element(g)}}}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sai/canvas");
/* @license
==========================================================================
Sai -- JavaScript Application Framework
copyright 2010, Evin Grano and contributors.

Permission is hereby granted, free of charge, to any person obtaining a 
copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation 
the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the 
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
DEALINGS IN THE SOFTWARE.

For more information about Sai, visit:
  http://www.itsgotwhatplantscrave.com/projects
  
==========================================================================
@license */
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sai")
}Qm=SC.Object.create({NAMESPACE:"Qm",VERSION:"0.1.0"});Qm.QuickMarkTemplateStub=SC.Record.extend({primaryKey:"id",name:SC.Record.attr(String,{key:"symbol"}),description:SC.Record.attr(String)});
Qm.QuickMarkTemplateStub.mixin({responseKey:"QuickMarkTemplateStub"});sc_require("models/quick_mark_template_stub");
Qm.QuickMarkTemplate=Qm.QuickMarkTemplateStub.extend({owner:SC.Record.toOne("Cv.User"),ownerId:SC.Record.attr(Number,{key:"owner"}),isArchived:SC.Record.attr(Boolean,{key:"hidden"}),sets:function(){return this.get("lockedSets").toArray().pushObjects(this.get("removableSets").toArray())
}.property("lockedSets","removableSets").cacheable(),lockedSets:SC.Record.toMany("Qm.QuickMarkTemplateSet",{key:"locked_sets"}),removableSets:SC.Record.toMany("Qm.QuickMarkTemplateSet",{key:"removable_sets"}),isAccessedViaIntegrations:SC.Record.attr(Boolean,{key:"accessed_via_integration",defaultValue:NO}),isOwnedViaIntegrations:SC.Record.attr(Boolean,{key:"owned_via_integration",defaultValue:NO}),templateIsSelected:NO,commitWhenReady:function(){var b;
var a=this.get("removableSets");a.forEach(function(c){if(!c.get("id")){b=c}});if(b){b.addObserver("id",this,this.commitWhenReady)
}else{this.commitRecord()}},commitRecord:function(){arguments.callee.base.apply(this,arguments);
this.get("removableSets").forEach(function(a){if(a.hasObserverFor("id")){a.removeObserver("id",this,this.commitWhenReady)
}})},lockedIconUrl:""});Qm.QuickMarkTemplate.NAME_MAX_LENGTH=40;Qm.QuickMarkTemplate.DESCRIPTION_MAX_LENGTH=2500;
Qm.QuickMarkTemplate.mixin({resourceName:"gm3/qmtemplate",responseKey:"QuickMarkTemplate"});
Qm.QuickMarkTemplateSet=SC.Record.extend({primaryKey:"id",name:SC.Record.attr(String),displayName:function(){var a=this.get("name");
if(this.get("isGlobal")){a=this.get("englishGlobalSetPrefix")+a}return a}.property("name").cacheable(),englishGlobalSetPrefix:function(){var b="__qmm_en_global_set_prefix";
var a=b.loc();return(b!=a)?a:""}.property().cacheable(),owner:SC.Record.toOne("Qmm.User"),ownerId:SC.Record.attr(Number,{key:"owner"}),isSharedByUser:function(){return(this.getPath("sharedToAccountIds.length")>0&&this.getPath("sharedToMasterClassIds.length")>0)
}.property("sharedToAccountIds","sharedToMasterClassIds").cacheable(),sharedToAccountIds:SC.Record.attr(Array,{key:"account"}),isSharedToAnyAccount:function(){return this.getPath("sharedToAccountIds.length")>0
}.property("sharedToAccountIds").cacheable(),isSharedToAccount:function(c){c=parseInt(c);
var a=this.get("sharedToAccountIds")||[];var b=(a.indexOf(c)!==-1);return b},sharedToMasterClassIds:SC.Record.attr(Array,{key:"master_class"}),isSharedToAnySections:function(){return this.getPath("sharedToMasterClassIds.length")>0
}.property("sharedToMasterClassIds").cacheable(),isSharedToSections:function(b){b=parseInt(b);
var a=this.get("sharedToMasterClassIds")||[];var c=(a.indexOf(b)!==-1);return c},isActiveSet:SC.Record.attr(Boolean,{key:"active"}),isAccessedViaIntegrations:SC.Record.attr(Boolean,{key:"accessed_via_integration",defaultValue:NO}),isOwnedViaIntegrations:SC.Record.attr(Boolean,{key:"owned_via_integration",defaultValue:NO}),count:SC.Record.attr(Number),sortName:function(){switch(this.get("id")){case -1:return"0";
case -2:return"zzzzz";case -3:return"zzzzzz";case -4:return"zzzzzzz";default:var a=this.get("name").toLowerCase().replace(/[^A-Za-z0-9\s]/g,"");
return a?a:"z"}}.property("name").cacheable(),isAllPseudoSet:function(){return this.get("id")===-1
}.property("id","name").cacheable(),isArchivePseudoSet:function(){return this.get("id")===-2
}.property("id","name").cacheable(),isSearchPseudoSet:function(){return this.get("id")===-3
}.property("id","name").cacheable(),isNullPseudoSet:function(){return this.get("id")===-4
}.property("id","name").cacheable(),isPseudoSet:function(){return parseInt(this.get("id"))<0
}.property("id").cacheable(),isOwnedByUser:function(c){var b=(this.get("ownerId")==c);
var a=this.get("isAccessedViaIntegrations");var e=this.get("isOwnedViaIntegrations");
return(a?e:b)},isSharedToUser:function(a){return !this.isOwnedByUser(a)},isGlobal:function(){return this.get("ownerId")==-1
}.property("ownerId").cacheable()});Qm.QuickMarkTemplateSet.mixin({resourceName:"gm3/qmset",responseKey:"QuickMarkTemplateSet"});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("qm")}Rb=SC.Object.create({NAMESPACE:"Rb",VERSION:"0.1.0",TYPICAL_RUBRIC:2,CUSTOM_RUBRIC:4,NON_SCORING_RUBRIC:0,NON_SCORING_GRADING_FORM:5,SCORING_GRADING_FORM:6,CRITERIA_POINTS_VS_SCALE_PERCENT:1,CRITERIA_PERCENT_VS_SCALE_PERCENT:3,MAX_CRITERIA:50,MAX_SCALES:20});
Rb.Rubric=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),name:SC.Record.attr(String),owner:SC.Record.attr(Number),rubricGroup:SC.Record.toOne("Rb.RubricGroup",{key:"rubric_group"}),assignments:SC.Record.attr(Array,{defaultValue:[]}),papersScored:SC.Record.attr(Number,{key:"papers_scored"}),_totalPoints:SC.Record.attr(Number,{key:"total_points"}),scoringMethod:SC.Record.attr(Number,{key:"scoring_method"}),distributeCriterionPercentage:SC.Record.attr(Boolean,{key:"distribute_criterion_percentage"}),relatedRecordsLoaded:SC.Record.attr(Boolean,{key:"cv_loaded"}),isAccessedViaIntegrations:SC.Record.attr(Boolean,{key:"accessed_via_integration",defaultValue:NO}),isOwnedViaIntegrations:SC.Record.attr(Boolean,{key:"owned_via_integration",defaultValue:NO}),isGradingForm:function(){var a=this.get("scoringMethod");
return(a===Rb.NON_SCORING_GRADING_FORM||a==Rb.SCORING_GRADING_FORM)}.property("scoringMethod").cacheable(),isScoringRubric:function(){var a=this.get("scoringMethod");
return a!==Rb.NON_SCORING_RUBRIC&&a!==Rb.NON_SCORING_GRADING_FORM}.property("scoringMethod").cacheable(),isSharedByUser:function(){return(this.getPath("sharedToAccountIds.length")>0||this.getPath("sharedToMasterClassIds.length")>0)
}.property("sharedToAccountIds","sharedToMasterClassIds").cacheable(),sharedToAccountIds:SC.Record.attr(Array,{key:"account"}),isSharedToAnyAccount:function(){return this.getPath("sharedToAccountIds.length")>0
}.property("sharedToAccountIds").cacheable(),isSharedToAccount:function(c){c=parseInt(c);
var a=this.get("sharedToAccountIds")||[];var b=(a.indexOf(c)!==-1);return b},sharedToMasterClassIds:SC.Record.attr(Array,{key:"master_class"}),isSharedToAnySections:function(){return this.getPath("sharedToMasterClassIds.length")>0
}.property("sharedToMasterClassIds").cacheable(),isSharedToSections:function(b){b=parseInt(b);
var a=this.get("sharedToMasterClassIds")||[];var c=(a.indexOf(b)!==-1);return c},isOwnedByUser:function(c){c=parseInt(c);
var b=(this.get("owner")===c);var a=this.get("isAccessedViaIntegrations");var e=this.get("isOwnedViaIntegrations");
return(a?e:b)},criteria:SC.Record.toMany("Rb.RubricCriterion",{isMaster:YES,inverse:"rubric",key:"criterion",orderBy:"position"}),scales:SC.Record.toMany("Rb.RubricScale",{isMaster:YES,inverse:"rubric",key:"scale_values",orderBy:"position"}),criterionScales:SC.Record.toMany("Rb.RubricCriterionScale",{isMaster:YES,key:"criterion_scales_all"}),totalPoints:null,_computeTotalPoints:function(){var c;
var b=this.get("scoringMethod");var e;var a;if((b===Rb.TYPICAL_RUBRIC)){c=this.get("maxScaleValue")
}else{if(b===Rb.CUSTOM_RUBRIC||(b===Rb.CRITERIA_POINTS_VS_SCALE_PERCENT)){e=this.get("criteria");
a=e.getEach("maxPoints");c=a.get("@sum")}else{c=this.get("_totalPoints")}}this.setIfChanged("totalPoints",c)
},computeTotalPoints:function(){var a=this.get("isLoaded");if(a){this.invokeOnce(this._computeTotalPoints)
}}.observes("isLoaded","scoringMethod","distributeCriterionPercentage","maxScaleValue","_totalPoints"),_criteriaDidChange:function(){this.computeTotalPoints()
}.observes("*criteria.[]"),totalPercent:null,computeTotalPercent:function(){var a=0;
var b=this.get("criteria");if(b){b.forEach(function(c){a=a+c.get("value")||0})}this.setIfChanged("totalPercent",a)
}.observes("*criteria.[]"),maxScaleValue:null,_computeMaxScaleValue:function(){var c=null;
var b=this.get("scales");var a=b.getEach("value");c=a.get("@max");this.setIfChanged("maxScaleValue",c)
},computeMaxScaleValue:function(){var a=this.get("isLoaded");if(a){this.invokeOnce(this._computeMaxScaleValue)
}}.observes("isLoaded"),_scalesDidChange:function(){this.computeMaxScaleValue()}.observes("*scales.[]"),isNew:function(){return this.get("id")<0
}.property("id").cacheable(),hasLocalIds:function(){if(this.get("isNew")){return YES
}var b=this.get("criteria").getEach("id").get("@min");if(b&&b<0){return YES}var a=this.get("scales").getEach("id").get("@min");
if(a&&a<0){return YES}var c=this.get("criterionScales").getEach("id").get("@min");
if(c&&c<0){return YES}return NO}});Rb.Rubric.mixin({resourceName:"gm3/rubric",responseKey:"Rubric"});
Rb.RubricCriterion=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),num:SC.Record.attr(Number),name:SC.Record.attr(String),description:SC.Record.attr(String),rubric:SC.Record.toOne("Rb.Rubric",{isMaster:NO,inverse:"criteria"}),scoringMethod:null,scoringMethodBinding:".rubric.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),rubricMaxScaleValue:null,rubricMaxScaleValueBinding:".rubric.maxScaleValue",rubricMaxScaleValueBindingDefault:SC.Binding.oneWay(),rubricTotalPoints:null,rubricTotalPointsBinding:".rubric.totalPoints",rubricTotalPointsBindingDefault:SC.Binding.oneWay(),position:SC.Record.attr(Number),value:SC.Record.attr(Number),criterionScales:SC.Record.toMany("Rb.RubricCriterionScale",{isMaster:YES,inverse:"criterion",key:"criterion_scales",orderBy:"sortKey"}),maxPoints:null,_computeMaxPoints:function(){var b=0;
var e=this.get("scoringMethod");var f=this.get("value");if(e===Rb.CRITERIA_POINTS_VS_SCALE_PERCENT){b=f
}else{if(e===Rb.TYPICAL_RUBRIC){var h=this.get("rubricMaxScaleValue");b=h*(f/100)
}else{if(e===Rb.CRITERIA_PERCENT_VS_SCALE_PERCENT){var g=this.get("rubricTotalPoints");
b=g*(f/100)}else{if(e===Rb.CUSTOM_RUBRIC){var a=this.get("criterionScales");var c=a.getEach("value");
b=c.get("@max")}}}}this.setIfChanged("maxPoints",b)},computeMaxPoints:function(){var a=this.get("isLoaded");
if(a){this.invokeOnce(this._computeMaxPoints)}}.observes("isLoaded","value","scoringMethod","rubricTotalPoints","rubricMaxScaleValue"),maxPointsDidChange:function(){var a=this.get("rubric");
if(a){a.computeTotalPoints()}}.observes("maxPoints"),valueDidChange:function(){var a=this.get("rubric");
if(a){a.computeTotalPercent()}}.observes("value"),getCriterionScaleValue:function(c){var i=null;
var a=this.get("scoringMethod");var h=c.get("value");var j=this.get("value");if((a===Rb.TYPICAL_RUBRIC)||(a===Rb.CRITERIA_POINTS_VS_SCALE_PERCENT)){i=(h*j)/100
}else{if(a===Rb.CRITERIA_PERCENT_VS_SCALE_PERCENT){var e=h/100;var k=j/100;var g=this.get("rubricTotalPoints");
i=e*k*g}else{if(a===Rb.CUSTOM_RUBRIC){var b=this.get("criterionScales");var f=b.find(function(l){return(l.get("scale")===c)
});i=f.get("value")}}}return i},getCriterionScale:function(c){var a=this.get("criterionScales");
var b=a.find(function(e){return(e.get("scale")===c)});return b}});Rb.RubricCriterion.mixin({responseKey:"RubricCriterion"});
Rb.RubricCriterionScale=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),description:SC.Record.attr(String),criterion:SC.Record.toOne("Rb.RubricCriterion",{isMaster:NO,inverse:"criterionScales"}),scale:SC.Record.toOne("Rb.RubricScale",{key:"scale_value"}),rubric:function(){return this.getPath("criterion.rubric")
}.property("criterion").cacheable(),sortKey:function(){return parseInt(this.getPath("scale.position"))
}.property("scale","critertion").cacheable(),value:SC.Record.attr(Number,{defaultValue:0})});
Rb.RubricCriterionScale.mixin({responseKey:"RubricCriterionScale"});Rb.RubricGroup=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),name:SC.Record.attr(String),description:SC.Record.attr(String)});
Rb.RubricGroup.mixin({resourceName:"rubric_group",responseKey:"RubricGroup"});Rb.RubricScale=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),num:SC.Record.attr(Number),name:SC.Record.attr(String),rubric:SC.Record.toOne("Rb.Rubric",{isMaster:NO,inverse:"scales"}),position:SC.Record.attr(Number),value:SC.Record.attr(Number),valueDidChange:function(){var a=this.get("rubric");
if(a){a.computeMaxScaleValue()}}.observes("value")});Rb.RubricScale.mixin({responseKey:"RubricScale"});
Rb.RubricScoring=SC.Record.extend({primaryKey:"id",rubric:SC.Record.toOne("Rb.Rubric"),read:SC.Record.toOne("Cv.Read"),scores:SC.Record.attr(Object,{key:"score_lookup"}),scoringFeedbackObjects:function(){if(!this.get("id")){return
}var a=SC.Query.local(Rb.RubricScoringFeedback,{conditions:"rubric_scoring = %@".fmt(this.get("id")),orderBy:"critrerion.position"});
return this.get("store").find(a)}.property("id").cacheable(),rubricIsLoaded:NO,rubricIsLoadedBinding:".rubric.isLoaded",rubricIsLoadedBindingDefault:SC.Binding.oneWay(),rubricTotalPoints:null,rubricTotalPointsBinding:".rubric.totalPoints",rubricTotalPointsBindingDefault:SC.Binding.oneWay(),gradingFormTotalScoreDidChange:function(){if(this.getPath("rubric.scoringMethod")!==Rb.SCORING_GRADING_FORM){this.set("gradingFormTotalScore",null);
return}var a=this.get("rubricIsLoaded");if(a){this.invokeOnce(this._computeGradingFormTotalScore)
}}.observes("*scoringFeedbackObjects.[]","rubricIsLoaded"),_computeGradingFormTotalScore:function(){var b=null;
var a=this.get("scoringFeedbackObjects")||[];if(a){a.forEach(function(c){var e=c.get("score");
if(!isNaN(parseFloat(e))&&isFinite(e)){value=parseFloat(e);b+=value}})}this.set("gradingFormTotalScore",b)
},gradingFormTotalScore:null,gradingFormTotalScoreDisplay:function(){var a=this.get("gradingFormTotalScore");
if(a===null){return"--"}return a}.property("gradingFormTotalScore").cacheable(),idDidChange:function(){var a=this.get("read");
var b=this.get("id");if(b&&a&&a.readAttribute("rubric_scoring")!==b){a.writeAttribute("rubric_scoring",b)
}}.observes("id"),totalScore:function(){var b=null;var e=this.get("rubricIsLoaded");
if(e){var h=this.getPath("rubric.criteria");var g=this.getPath("rubric.scales");var f=this.get("scores");
var c=NO;var a=h.map(function(l){var m=0;var i=l.get("num");var j=f[i];if(j){var k=g.find(function(n){return(n.get("num")===j)
});if(k){m=l.getCriterionScaleValue(k);c=YES}}return m});if(c){b=a.get("@sum")}}return b
}.property("scores","rubricIsLoaded").cacheable(),totalScoreDisplay:function(){var a=this.get("totalScore");
if(a===null){a="--"}else{a=Math.round(a*100)/100}return a}.property("totalScore").cacheable(),percent:function(){var b=null;
var c=this.get("rubricIsLoaded");if(c){var a=this.get("totalScore");var e=this.get("rubricTotalPoints");
if(a!==null&&(e>0)){b=(a/e)*100}}return b}.property("totalScore","rubricIsLoaded","rubricTotalPoints").cacheable(),percentDisplay:function(){var a=this.get("percent");
if(a===null){a="--"}else{a=Math.round(a)}return a}.property("percent").cacheable(),updateValueAndSave:function(e,g){var b=this.get("isLoaded");
if(b){var a=e.get("num");var f=this.get("scores");if(g){var c=g.get("num");f[a]=c
}else{delete f[a]}this.recordDidChange("scores");this.commitRecord()}},getAppliedGrade:function(){if(this.getPath("rubric.isGradingForm")){return Math.round(this.get("gradingFormTotalScore"))
}var c=null;var a=this.get("totalScore");if(a!==null){var b=this.getPath("rubric.totalPoints");
var f=this.getPath("read.paper.assignment");var e=this.getPath("read.paper.assignment.maxPoints");
c=a*e/b;c=Math.round(c)}return c},applyToGradeAndSave:function(){var a=this.getAppliedGrade();
if(a!==null){var b=this.getPath("read.paper");b.set("grade",a);_gaq.push(["_trackEvent",Cv.GA.CATEGORY_RUBRIC,Cv.GA.ACTION_SCORED,Cv.GA.getSessionUUID(),0]);
Cv.paperController.saveGrade()}}});Rb.RubricScoring.mixin({resourceName:"gm3/rubricscoring",responseKey:"RubricScoring"});
Rb.RubricScoringFeedback=SC.Record.extend(Ip.RecoverableRecord,{primaryKey:"id",id:SC.Record.attr(Number),rubricScoring:SC.Record.toOne("Rb.RubricScoring",{key:"rubric_scoring",isMaster:YES}),criterion:SC.Record.toOne("Rb.RubricCriterion",{isMaster:YES}),comment:SC.Record.attr(String,{key:"text"}),score:SC.Record.attr(String),created:SC.DateTime,modified:SC.DateTime});
Rb.RubricScoringFeedback.mixin({resourceName:"gm3/rubricscoringfeedback",responseKey:"RubricScoringFeedback"});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("rb")}SC.stringsFor("English",{});
AudioTools=SC.Object.create({NAMESPACE:"AudioTools",VERSION:"0.1.0",AUDIO_FILETYPE_MP3:1,AUDIO_FILETYPE_M4A:2});
(function(a,e){a.fn.jPlayer=function(b){var h=typeof b==="string",g=Array.prototype.slice.call(arguments,1),f=this,b=!h&&g.length?a.extend.apply(null,[!0,b].concat(g)):b;
if(h&&b.charAt(0)==="_"){return f}h?this.each(function(){var j=a.data(this,"jPlayer"),i=j&&a.isFunction(j[b])?j[b].apply(j,g):j;
if(i!==j&&i!==e){return f=i,!1}}):this.each(function(){var i=a.data(this,"jPlayer");
i?i.option(b||{}):a.data(this,"jPlayer",new a.jPlayer(b,this))});return f};a.jPlayer=function(b,g){if(arguments.length){this.element=a(g);
this.options=a.extend(!0,{},this.options,b);var f=this;this.element.bind("remove.jPlayer",function(){f.destroy()
});this._init()}};a.jPlayer.emulateMethods="load play pause";a.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";
a.jPlayer.emulateOptions="muted volume";a.jPlayer.reservedEvent="ready flashreset resize repeat error warning";
a.jPlayer.event={ready:"jPlayer_ready",flashreset:"jPlayer_flashreset",resize:"jPlayer_resize",repeat:"jPlayer_repeat",click:"jPlayer_click",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};
a.jPlayer.htmlEvent="loadstart,abort,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,ratechange".split(",");
a.jPlayer.pause=function(){a.each(a.jPlayer.prototype.instances,function(g,f){f.data("jPlayer").status.srcSet&&f.jPlayer("pause")
})};a.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};
a.jPlayer.convertTime=function(b){var g=new Date(b*1000),f=g.getUTCHours(),b=g.getUTCMinutes(),g=g.getUTCSeconds(),f=a.jPlayer.timeFormat.padHour&&f<10?"0"+f:f,b=a.jPlayer.timeFormat.padMin&&b<10?"0"+b:b,g=a.jPlayer.timeFormat.padSec&&g<10?"0"+g:g;
return(a.jPlayer.timeFormat.showHour?f+a.jPlayer.timeFormat.sepHour:"")+(a.jPlayer.timeFormat.showMin?b+a.jPlayer.timeFormat.sepMin:"")+(a.jPlayer.timeFormat.showSec?g+a.jPlayer.timeFormat.sepSec:"")
};a.jPlayer.uaBrowser=function(g){var g=g.toLowerCase(),f=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,h=/(mozilla)(?:.*? rv:([\w.]+))?/,g=/(webkit)[ \/]([\w.]+)/.exec(g)||f.exec(g)||i.exec(g)||g.indexOf("compatible")<0&&h.exec(g)||[];
return{browser:g[1]||"",version:g[2]||"0"}};a.jPlayer.uaPlatform=function(g){var f=g.toLowerCase(),i=/(android)/,h=/(mobile)/,g=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(f)||[],f=/(ipad|playbook)/.exec(f)||!h.exec(f)&&i.exec(f)||[];
g[1]&&(g[1]=g[1].replace(/\s/g,"_"));return{platform:g[1]||"",tablet:f[1]||""}};a.jPlayer.browser={};
a.jPlayer.platform={};var c=a.jPlayer.uaBrowser(navigator.userAgent);if(c.browser){a.jPlayer.browser[c.browser]=!0,a.jPlayer.browser.version=c.version
}c=a.jPlayer.uaPlatform(navigator.userAgent);if(c.platform){a.jPlayer.platform[c.platform]=!0,a.jPlayer.platform.mobile=!c.tablet,a.jPlayer.platform.tablet=!!c.tablet
}a.jPlayer.prototype={count:0,version:{script:"2.1.0",needFlash:"2.1.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:!1,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},fullScreen:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1000},loop:!1,repeat:function(b){b.jPlayer.options.loop?a(this).unbind(".jPlayerRepeat").bind(a.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){a(this).jPlayer("play")
}):a(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullScreen:{msie:/msie [0-6]/,ipad:/ipad.*?os [0-4]/,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3](?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/,playbook:/playbook/},verticalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"}},_init:function(){var b=this;
this.element.empty();this.status=a.extend({},this.status);this.internal=a.extend({},this.internal);
this.internal.domNode=this.element.get(0);this.formats=[];this.solutions=[];this.require={};
this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};
this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);
a.each(this.options.supplied.toLowerCase().split(","),function(l,k){var j=k.replace(/^\s+|\s+$/g,"");
if(b.format[j]){var i=!1;a.each(b.formats,function(n,m){if(j===m){return i=!0,!1}});
i||b.formats.push(j)}});a.each(this.options.solution.toLowerCase().split(","),function(l,k){var j=k.replace(/^\s+|\s+$/g,"");
if(b.solution[j]){var i=!1;a.each(b.solutions,function(n,m){if(j===m){return i=!0,!1
}});i||b.solutions.push(j)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;
this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);
this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e});
this.internal.video=a.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e});
this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(this.options.swfPath.toLowerCase().slice(-4)!==".swf"?(this.options.swfPath&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf":"")});
this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e});
a.each(a.jPlayer.event,function(i,j){b.options[i]!==e&&(b.element.bind(j+".jPlayer",b.options[i]),b.options[i]=e)
});this.require.audio=!1;this.require.video=!1;a.each(this.formats,function(i,j){b.require[b.format[j].media]=!0
});this.options=this.require.video?a.extend(!0,{},this.optionsVideo,this.options):a.extend(!0,{},this.optionsAudio,this.options);
this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);
this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");
this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){(!b.status.video||b.status.waitForPlay)&&b.internal.poster.jq.show()
};this.element.append(this.htmlElement.poster);this.internal.poster.jq=a("#"+this.internal.poster.id);
this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){b._trigger(a.jPlayer.event.click)
});this.html.audio.available=!1;if(this.require.audio){this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)
}this.html.video.available=!1;if(this.require.video){this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)
}this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};
a.each(this.formats,function(i,j){b.html.canPlay[j]=b.html[b.format[j].media].available&&""!==b.htmlElement[b.format[j].media].canPlayType(b.format[j].codec);
b.flash.canPlay[j]=b.format[j].flashCanPlay&&b.flash.available});this.html.desired=!1;
this.flash.desired=!1;a.each(this.solutions,function(l,k){if(l===0){b[k].desired=!0
}else{var j=!1,i=!1;a.each(b.formats,function(m,n){b[b.solutions[0]].canPlay[n]&&(b.format[n].media==="video"?i=!0:j=!0)
});b[k].desired=b.require.audio&&!j||b.require.video&&!i}});this.html.support={};
this.flash.support={};a.each(this.formats,function(i,j){b.html.support[j]=b.html.canPlay[j]&&b.html.desired;
b.flash.support[j]=b.flash.canPlay[j]&&b.flash.desired});this.html.used=!1;this.flash.used=!1;
a.each(this.solutions,function(j,i){a.each(b.formats,function(k,l){if(b[i].support[l]){return b[i].used=!0,!1
}})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);
!this.html.used&&!this.flash.used?(this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()):this.css.jq.noSolution.length&&this.css.jq.noSolution.hide();
if(this.flash.used){var h,g="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;
if(a.browser.msie&&Number(a.browser.version)<=8){g=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+g+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];
h=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>');
for(var f=0;f<g.length;f++){h.appendChild(document.createElement(g[f]))}}else{f=function(j,i,l){var k=document.createElement("param");
k.setAttribute("name",i);k.setAttribute("value",l);j.appendChild(k)},h=document.createElement("object"),h.setAttribute("id",this.internal.flash.id),h.setAttribute("data",this.internal.flash.swf),h.setAttribute("type","application/x-shockwave-flash"),h.setAttribute("width","1"),h.setAttribute("height","1"),f(h,"flashvars",g),f(h,"allowscriptaccess","always"),f(h,"bgcolor",this.options.backgroundColor),f(h,"wmode",this.options.wmode)
}this.element.append(h);this.internal.flash.jq=a(h)}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=a("#"+this.internal.audio.id)
}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=a("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){b._trigger(a.jPlayer.event.click)
})}}this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){b.internal.ready=!0;
b.version.flash="n/a";b._trigger(a.jPlayer.event.repeat);b._trigger(a.jPlayer.event.ready)
},100);this._updateNativeVideoControls();this._updateInterface();this._updateButtons(!1);
this._updateAutohide();this._updateVolume(this.options.volume);this._updateMute(this.options.muted);
this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();a.jPlayer.prototype.count++
},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");
this.css.jq.duration.length&&this.css.jq.duration.text("");a.each(this.css.jq,function(g,f){f.length&&f.unbind(".jPlayer")
});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");
this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");
this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]
},enable:function(){},disable:function(){},_testCanPlayType:function(g){try{return g.canPlayType(this.format.mp3.codec),!0
}catch(f){return !1}},_uaBlocklist:function(b){var g=navigator.userAgent.toLowerCase(),f=!1;
a.each(b,function(i,h){if(h&&h.test(g)){return f=!0,!1}});return f},_restrictNativeVideoControls:function(){if(this.require.audio&&this.status.nativeVideoControls){this.status.nativeVideoControls=!1,this.status.noFullScreen=!0
}},_updateNativeVideoControls:function(){if(this.html.video.available&&this.html.used){this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"}))
}},_addHtmlEventListeners:function(b,g){var f=this;b.preload=this.options.preload;
b.muted=this.options.muted;b.volume=this.options.volume;b.addEventListener("progress",function(){g.gate&&(f._getHtmlStatus(b),f._updateInterface(),f._trigger(a.jPlayer.event.progress))
},!1);b.addEventListener("timeupdate",function(){g.gate&&(f._getHtmlStatus(b),f._updateInterface(),f._trigger(a.jPlayer.event.timeupdate))
},!1);b.addEventListener("durationchange",function(){if(g.gate){f.status.duration=this.duration,f._getHtmlStatus(b),f._updateInterface(),f._trigger(a.jPlayer.event.durationchange)
}},!1);b.addEventListener("play",function(){g.gate&&(f._updateButtons(!0),f._html_checkWaitForPlay(),f._trigger(a.jPlayer.event.play))
},!1);b.addEventListener("playing",function(){g.gate&&(f._updateButtons(!0),f._seeked(),f._trigger(a.jPlayer.event.playing))
},!1);b.addEventListener("pause",function(){g.gate&&(f._updateButtons(!1),f._trigger(a.jPlayer.event.pause))
},!1);b.addEventListener("waiting",function(){g.gate&&(f._seeking(),f._trigger(a.jPlayer.event.waiting))
},!1);b.addEventListener("seeking",function(){g.gate&&(f._seeking(),f._trigger(a.jPlayer.event.seeking))
},!1);b.addEventListener("seeked",function(){g.gate&&(f._seeked(),f._trigger(a.jPlayer.event.seeked))
},!1);b.addEventListener("volumechange",function(){if(g.gate){f.options.volume=b.volume,f.options.muted=b.muted,f._updateMute(),f._updateVolume(),f._trigger(a.jPlayer.event.volumechange)
}},!1);b.addEventListener("suspend",function(){g.gate&&(f._seeked(),f._trigger(a.jPlayer.event.suspend))
},!1);b.addEventListener("ended",function(){if(g.gate){if(!a.jPlayer.browser.webkit){f.htmlElement.media.currentTime=0
}f.htmlElement.media.pause();f._updateButtons(!1);f._getHtmlStatus(b,!0);f._updateInterface();
f._trigger(a.jPlayer.event.ended)}},!1);b.addEventListener("error",function(){if(g.gate&&(f._updateButtons(!1),f._seeked(),f.status.srcSet)){clearTimeout(f.internal.htmlDlyCmdId),f.status.waitForLoad=!0,f.status.waitForPlay=!0,f.status.video&&!f.status.nativeVideoControls&&f.internal.video.jq.css({width:"0px",height:"0px"}),f._validString(f.status.media.poster)&&!f.status.nativeVideoControls&&f.internal.poster.jq.show(),f.css.jq.videoPlay.length&&f.css.jq.videoPlay.show(),f._error({type:a.jPlayer.error.URL,context:f.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})
}},!1);a.each(a.jPlayer.htmlEvent,function(i,h){b.addEventListener(this,function(){g.gate&&f._trigger(a.jPlayer.event[h])
},!1)})},_getHtmlStatus:function(i,h){var m=0,l=0,j=0,k=0;if(i.duration){this.status.duration=i.duration
}m=i.currentTime;l=this.status.duration>0?100*m/this.status.duration:0;typeof i.seekable==="object"&&i.seekable.length>0?(j=this.status.duration>0?100*i.seekable.end(i.seekable.length-1)/this.status.duration:100,k=100*i.currentTime/i.seekable.end(i.seekable.length-1)):(j=100,k=l);
h&&(l=k=m=0);this.status.seekPercent=j;this.status.currentPercentRelative=k;this.status.currentPercentAbsolute=l;
this.status.currentTime=m;this.status.readyState=i.readyState;this.status.networkState=i.networkState;
this.status.playbackRate=i.playbackRate;this.status.ended=i.ended},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)
},_trigger:function(b,g,f){b=a.Event(b);b.jPlayer={};b.jPlayer.version=a.extend({},this.version);
b.jPlayer.options=a.extend(!0,{},this.options);b.jPlayer.status=a.extend(!0,{},this.status);
b.jPlayer.html=a.extend(!0,{},this.html);b.jPlayer.flash=a.extend(!0,{},this.flash);
if(g){b.jPlayer.error=a.extend({},g)}if(f){b.jPlayer.warning=a.extend({},f)}this.element.trigger(b)
},jPlayerFlashEvent:function(b,h){if(b===a.jPlayer.event.ready){if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var g=this.status.currentTime,f=this.status.paused;
this.setMedia(this.status.media);g>0&&(f?this.pause(g):this.play(g))}this._trigger(a.jPlayer.event.flashreset)
}}else{this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=h.version,this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION}),this._trigger(a.jPlayer.event.repeat),this._trigger(b)
}}if(this.flash.gate){switch(b){case a.jPlayer.event.progress:this._getFlashStatus(h);
this._updateInterface();this._trigger(b);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(h);
this._updateInterface();this._trigger(b);break;case a.jPlayer.event.play:this._seeked();
this._updateButtons(!0);this._trigger(b);break;case a.jPlayer.event.pause:this._updateButtons(!1);
this._trigger(b);break;case a.jPlayer.event.ended:this._updateButtons(!1);this._trigger(b);
break;case a.jPlayer.event.click:this._trigger(b);break;case a.jPlayer.event.error:this.status.waitForLoad=!0;
this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});
this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();
this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);
this._updateButtons(!1);this._error({type:a.jPlayer.error.URL,context:h.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});
break;case a.jPlayer.event.seeking:this._seeking();this._trigger(b);break;case a.jPlayer.event.seeked:this._seeked();
this._trigger(b);break;case a.jPlayer.event.ready:break;default:this._trigger(b)}}return !1
},_getFlashStatus:function(b){this.status.seekPercent=b.seekPercent;this.status.currentPercentRelative=b.currentPercentRelative;
this.status.currentPercentAbsolute=b.currentPercentAbsolute;this.status.currentTime=b.currentTime;
this.status.duration=b.duration;this.status.readyState=4;this.status.networkState=0;
this.status.playbackRate=1;this.status.ended=!1},_updateButtons:function(b){if(b!==e){this.status.paused=!b,this.css.jq.play.length&&this.css.jq.pause.length&&(b?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()))
}this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullScreen?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullScreen?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));
this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))
},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");
this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%");
this.css.jq.currentTime.length&&this.css.jq.currentTime.text(a.jPlayer.convertTime(this.status.currentTime));
this.css.jq.duration.length&&this.css.jq.duration.text(a.jPlayer.convertTime(this.status.duration))
},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")
},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")
},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.flash.gate=!1
},_resetActive:function(){this.html.active=!1;this.flash.active=!1},setMedia:function(b){var h=this,g=!1,f=this.status.media.poster!==b.poster;
this._resetMedia();this._resetGate();this._resetActive();a.each(this.formats,function(l,k){var j=h.format[k].media==="video";
a.each(h.solutions,function(i,n){if(h[n].support[k]&&h._validString(b[k])){var m=n==="html";
j?(m?(h.html.video.gate=!0,h._html_setVideo(b),h.html.active=!0):(h.flash.gate=!0,h._flash_setVideo(b),h.flash.active=!0),h.css.jq.videoPlay.length&&h.css.jq.videoPlay.show(),h.status.video=!0):(m?(h.html.audio.gate=!0,h._html_setAudio(b),h.html.active=!0):(h.flash.gate=!0,h._flash_setAudio(b),h.flash.active=!0),h.css.jq.videoPlay.length&&h.css.jq.videoPlay.hide(),h.status.video=!1);
g=!0;return !1}});if(g){return !1}});if(g){if((!this.status.nativeVideoControls||!this.html.video.gate)&&this._validString(b.poster)){f?this.htmlElement.poster.src=b.poster:this.internal.poster.jq.show()
}this.status.srcSet=!0;this.status.media=a.extend({},b);this._updateButtons(!1);this._updateInterface()
}else{this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,hint:a.jPlayer.errorHint.NO_SUPPORT})
}},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();
this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);
this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()
},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();
this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")
},play:function(b){b=typeof b==="number"?b:NaN;this.status.srcSet?this.html.active?this._html_play(b):this.flash.active&&this._flash_play(b):this._urlNotSetError("play")
},videoPlay:function(){this.play()},pause:function(b){b=typeof b==="number"?b:NaN;
this.status.srcSet?this.html.active?this._html_pause(b):this.flash.active&&this._flash_pause(b):this._urlNotSetError("pause")
},pauseOthers:function(){var b=this;a.each(this.instances,function(f,g){b.element!==g&&g.data("jPlayer").status.srcSet&&g.jPlayer("pause")
})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")
},playHead:function(b){b=this._limitValue(b,0,100);this.status.srcSet?this.html.active?this._html_playHead(b):this.flash.active&&this._flash_playHead(b):this._urlNotSetError("playHead")
},_muted:function(b){this.options.muted=b;this.html.used&&this._html_mute(b);this.flash.used&&this._flash_mute(b);
!this.html.video.gate&&!this.html.audio.gate&&(this._updateMute(b),this._updateVolume(this.options.volume),this._trigger(a.jPlayer.event.volumechange))
},mute:function(b){b=b===e?!0:!!b;this._muted(b)},unmute:function(b){b=b===e?!0:!!b;
this._muted(!b)},_updateMute:function(b){if(b===e){b=this.options.muted}this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):b?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))
},volume:function(b){b=this._limitValue(b,0,1);this.options.volume=b;this.html.used&&this._html_volume(b);
this.flash.used&&this._flash_volume(b);!this.html.video.gate&&!this.html.audio.gate&&(this._updateVolume(b),this._trigger(a.jPlayer.event.volumechange))
},volumeBar:function(g){if(this.css.jq.volumeBar.length){var f=this.css.jq.volumeBar.offset(),i=g.pageX-f.left,h=this.css.jq.volumeBar.width(),g=this.css.jq.volumeBar.height()-g.pageY+f.top,f=this.css.jq.volumeBar.height();
this.options.verticalVolume?this.volume(g/f):this.volume(i/h)}this.options.muted&&this._muted(!1)
},volumeBarValue:function(b){this.volumeBar(b)},_updateVolume:function(b){if(b===e){b=this.options.volume
}b=this.options.muted?0:b;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](b*100+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())
},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(b){var f=this;
this.options.cssSelectorAncestor=b;this._removeUiClass();this.ancestorJq=b?a(b):[];
b&&this.ancestorJq.length!==1&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT});
this._addUiClass();a.each(this.options.cssSelector,function(h,g){f._cssSelector(h,g)
})},_cssSelector:function(b,g){var f=this;typeof g==="string"?a.jPlayer.prototype.options.cssSelector[b]?(this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer"),this.options.cssSelector[b]=g,this.css.cs[b]=this.options.cssSelectorAncestor+" "+g,this.css.jq[b]=g?a(this.css.cs[b]):[],this.css.jq[b].length&&this.css.jq[b].bind("click.jPlayer",function(h){f[b](h);
a(this).blur();return !1}),g&&this.css.jq[b].length!==1&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:g,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})
},seekBar:function(g){if(this.css.jq.seekBar){var f=this.css.jq.seekBar.offset(),g=g.pageX-f.left,f=this.css.jq.seekBar.width();
this.playHead(100*g/f)}},playBar:function(b){this.seekBar(b)},repeat:function(){this._loop(!0)
},repeatOff:function(){this._loop(!1)},_loop:function(b){if(this.options.loop!==b){this.options.loop=b,this._updateButtons(),this._trigger(a.jPlayer.event.repeat)
}},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(b,l){var k=b;
if(arguments.length===0){return a.extend(!0,{},this.options)}if(typeof b==="string"){var j=b.split(".");
if(l===e){for(var k=a.extend(!0,{},this.options),i=0;i<j.length;i++){if(k[j[i]]!==e){k=k[j[i]]
}else{return this._warning({type:a.jPlayer.warning.OPTION_KEY,context:b,message:a.jPlayer.warningMsg.OPTION_KEY,hint:a.jPlayer.warningHint.OPTION_KEY}),e
}}return k}for(var i=k={},f=0;f<j.length;f++){f<j.length-1?(i[j[f]]={},i=i[j[f]]):i[j[f]]=l
}}this._setOptions(k);return this},_setOptions:function(b){var f=this;a.each(b,function(h,g){f._setOption(h,g)
});return this},_setOption:function(b,g){var f=this;switch(b){case"volume":this.volume(g);
break;case"muted":this._muted(g);break;case"cssSelectorAncestor":this._cssSelectorAncestor(g);
break;case"cssSelector":a.each(g,function(i,h){f._cssSelector(i,h)});break;case"fullScreen":this.options[b]!==g&&(this._removeUiClass(),this.options[b]=g,this._refreshSize());
break;case"size":!this.options.fullScreen&&this.options[b].cssClass!==g.cssClass&&this._removeUiClass();
this.options[b]=a.extend({},this.options[b],g);this._refreshSize();break;case"sizeFull":this.options.fullScreen&&this.options[b].cssClass!==g.cssClass&&this._removeUiClass();
this.options[b]=a.extend({},this.options[b],g);this._refreshSize();break;case"autohide":this.options[b]=a.extend({},this.options[b],g);
this._updateAutohide();break;case"loop":this._loop(g);break;case"nativeVideoControls":this.options[b]=a.extend({},this.options[b],g);
this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);
this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case"noFullScreen":this.options[b]=a.extend({},this.options[b],g);
this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);
this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this._restrictNativeVideoControls();
this._updateButtons();break;case"noVolume":this.options[b]=a.extend({},this.options[b],g);
this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();
this._updateMute();break;case"emulateHtml":this.options[b]!==g&&((this.options[b]=g)?this._emulateHtmlBridge():this._destroyHtmlBridge())
}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();
this._updateButtons();this._updateAutohide();this._trigger(a.jPlayer.event.resize)
},_setSize:function(){this.options.fullScreen?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);
this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)
},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)
},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})
},_updateAutohide:function(){var g=this,f=function(){g.css.jq.gui.fadeIn(g.options.autohide.fadeIn,function(){clearTimeout(g.internal.autohideId);
g.internal.autohideId=setTimeout(function(){g.css.jq.gui.fadeOut(g.options.autohide.fadeOut)
},g.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullScreen&&this.options.autohide.full||!this.options.fullScreen&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",f),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",f),this.css.jq.gui.hide()):this.css.jq.gui.show())
},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)
},_html_initMedia:function(){this.htmlElement.media.src=this.status.src;this.options.preload!=="none"&&this._html_load();
this._trigger(a.jPlayer.event.timeupdate)},_html_setAudio:function(b){var f=this;
a.each(this.formats,function(g,h){if(f.html.support[h]&&b[h]){return f.status.src=b[h],f.status.format[h]=!0,f.status.formatType=h,!1
}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(b){var f=this;
a.each(this.formats,function(g,h){if(f.html.support[h]&&b[h]){return f.status.src=b[h],f.status.format[h]=!0,f.status.formatType=h,!1
}});if(this.status.nativeVideoControls){this.htmlElement.video.poster=this._validString(b.poster)?b.poster:""
}this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())
},_html_clearMedia:function(){if(this.htmlElement.media){this.htmlElement.media.src="",this.htmlElement.media.load()
}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=!1,this.htmlElement.media.load()
}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(g){var f=this;this._html_load();
this.htmlElement.media.play();if(!isNaN(g)){try{this.htmlElement.media.currentTime=g
}catch(h){this.internal.htmlDlyCmdId=setTimeout(function(){f.play(g)},100);return
}}this._html_checkWaitForPlay()},_html_pause:function(g){var f=this;g>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);
this.htmlElement.media.pause();if(!isNaN(g)){try{this.htmlElement.media.currentTime=g
}catch(h){this.internal.htmlDlyCmdId=setTimeout(function(){f.pause(g)},100);return
}}g>0&&this._html_checkWaitForPlay()},_html_playHead:function(g){var f=this;this._html_load();
try{if(typeof this.htmlElement.media.seekable==="object"&&this.htmlElement.media.seekable.length>0){this.htmlElement.media.currentTime=g*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100
}else{if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration)){this.htmlElement.media.currentTime=g*this.htmlElement.media.duration/100
}else{throw"e"}}}catch(h){this.internal.htmlDlyCmdId=setTimeout(function(){f.playHead(g)
},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height}))
}},_html_volume:function(b){if(this.html.audio.available){this.htmlElement.audio.volume=b
}if(this.html.video.available){this.htmlElement.video.volume=b}},_html_mute:function(b){if(this.html.audio.available){this.htmlElement.audio.muted=b
}if(this.html.video.available){this.htmlElement.video.muted=b}},_flash_setAudio:function(b){var g=this;
try{if(a.each(this.formats,function(h,i){if(g.flash.support[i]&&b[i]){switch(i){case"m4a":case"fla":g._getMovie().fl_setAudio_m4a(b[i]);
break;case"mp3":g._getMovie().fl_setAudio_mp3(b[i])}g.status.src=b[i];g.status.format[i]=!0;
g.status.formatType=i;return !1}}),this.options.preload==="auto"){this._flash_load(),this.status.waitForLoad=!1
}}catch(f){this._flashError(f)}},_flash_setVideo:function(b){var g=this;try{if(a.each(this.formats,function(h,i){if(g.flash.support[i]&&b[i]){switch(i){case"m4v":case"flv":g._getMovie().fl_setVideo_m4v(b[i])
}g.status.src=b[i];g.status.format[i]=!0;g.status.formatType=i;return !1}}),this.options.preload==="auto"){this._flash_load(),this.status.waitForLoad=!1
}}catch(f){this._flashError(f)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});
this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()
}catch(b){this._flashError(b)}},_flash_load:function(){try{this._getMovie().fl_load()
}catch(b){this._flashError(b)}this.status.waitForLoad=!1},_flash_play:function(g){try{this._getMovie().fl_play(g)
}catch(f){this._flashError(f)}this.status.waitForLoad=!1;this._flash_checkWaitForPlay()
},_flash_pause:function(g){try{this._getMovie().fl_pause(g)}catch(f){this._flashError(f)
}if(g>0){this.status.waitForLoad=!1,this._flash_checkWaitForPlay()}},_flash_playHead:function(g){try{this._getMovie().fl_play_head(g)
}catch(f){this._flashError(f)}this.status.waitForLoad||this._flash_checkWaitForPlay()
},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height}))
}},_flash_volume:function(g){try{this._getMovie().fl_volume(g)}catch(f){this._flashError(f)
}},_flash_mute:function(g){try{this._getMovie().fl_mute(g)}catch(f){this._flashError(f)
}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(g){var f=!1,i;
if(window.ActiveXObject){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+g),f=!0
}catch(h){}}else{navigator.plugins&&navigator.mimeTypes.length>0&&(i=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=g&&(f=!0)
}return f},_validString:function(b){return b&&typeof b==="string"},_limitValue:function(g,f,h){return g<f?f:g>h?h:g
},_urlNotSetError:function(b){this._error({type:a.jPlayer.error.URL_NOT_SET,context:b,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})
},_flashError:function(b){var f;f=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:a.jPlayer.error[f],context:this.internal.flash.swf,message:a.jPlayer.errorMsg[f]+b.message,hint:a.jPlayer.errorHint[f]});
this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(b){this._trigger(a.jPlayer.event.error,b);
this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n\n"+b.message:"")+(b.hint?"\n\n"+b.hint:"")+"\n\nContext: "+b.context)
},_warning:function(b){this._trigger(a.jPlayer.event.warning,e,b);this.options.warningAlerts&&this._alert("Warning!"+(b.message?"\n\n"+b.message:"")+(b.hint?"\n\n"+b.hint:"")+"\n\nContext: "+b.context)
},_alert:function(b){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+b)
},_emulateHtmlBridge:function(){var b=this;a.each(a.jPlayer.emulateMethods.split(/\s+/g),function(f,g){b.internal.domNode[g]=function(h){b[g](h)
}});a.each(a.jPlayer.event,function(h,g){var f=!0;a.each(a.jPlayer.reservedEvent.split(/\s+/g),function(j,i){if(i===h){return f=!1
}});f&&b.element.bind(g+".jPlayer.jPlayerHtml",function(){b._emulateHtmlUpdate();
var i=document.createEvent("Event");i.initEvent(h,!1,!0);b.internal.domNode.dispatchEvent(i)
})})},_emulateHtmlUpdate:function(){var b=this;a.each(a.jPlayer.emulateStatus.split(/\s+/g),function(f,g){b.internal.domNode[g]=b.status[g]
});a.each(a.jPlayer.emulateOptions.split(/\s+/g),function(f,g){b.internal.domNode[g]=b.options[g]
})},_destroyHtmlBridge:function(){var b=this;this.element.unbind(".jPlayerHtml");
a.each((a.jPlayer.emulateMethods+" "+a.jPlayer.emulateStatus+" "+a.jPlayer.emulateOptions).split(/\s+/g),function(f,g){delete b.internal.domNode[g]
})}};a.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};
a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "};
a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};
a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}
})(jQuery);sc_require("resources/jplayer");AudioTools.PlayerController=SC.ObjectController.extend({playerElement:null,isPlaying:NO,isEnabled:null,playingIsGloballyDisabled:NO,currentPercent:null,currentTime:null,duration:null,audioFileURL:null,audioFiletype:null,flashIsAvailable:YES,initializePlayer:function(c){this.set("playerElement",c);
$.jPlayer.timeFormat.padMin=false;var b="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/audio_tools/en_us/A/resources/flash/Jplayer.swf";
b=b.substr(0,b.lastIndexOf("/"));var a=this;$(this.get("playerElement")).jPlayer({ready:function(e){if(SC.browser.isSafari){a._audioFileDidChange()
}},error:function(e){if(e.jPlayer.error.type===$.jPlayer.error.URL){SC.AlertPane.warn("_Couldn't access voice file.".loc(),null,null,"_OK".loc());
SC.run(function(){a.stop()})}},swfPath:b,supplied:"mp3,m4a",wmode:"window",timeupdate:function(e){SC.run(function(){a.set("currentPercent",e.jPlayer.status.currentPercentAbsolute);
a.set("currentTime",$.jPlayer.convertTime(e.jPlayer.status.currentTime))},a)},ended:function(e){SC.run(function(){a.stop()
},a)},solution:(SC.browser.isSafari||SC.browser.isIE)?"flash, html":"html, flash",muted:false,preload:"metadata",errorAlerts:false});
$(this.get("playerElement")).bind($.jPlayer.event.progress,function(){a.set("duration",$.jPlayer.convertTime(parseInt($(this).data("jPlayer").status.duration)));
SC.run(function(){})});$(this.get("playerElement")).bind($.jPlayer.event.error,function(e){if(e.jPlayer.error.type==$.jPlayer.error.NO_SUPPORT){a.set("isEnabled",NO);
a.set("flashIsAvailable",NO)}})},play:function(){$(this.get("playerElement")).jPlayer("play");
this.set("isPlaying",YES)},pause:function(){$(this.get("playerElement")).jPlayer("pause");
this.set("isPlaying",NO)},stop:function(){$(this.get("playerElement")).jPlayer("stop");
this.set("isPlaying",NO)},trash:function(){$(this.get("playerElement")).jPlayer("stop");
this.set("isPlaying",NO)},_audioFileDidChange:function(){this.stop();$(this.get("playerElement")).jPlayer("clearMedia");
SC.run(function(){this.set("currentPercent",null);this.set("currentTime",null);this.set("duration",null)
},this);if(this.get("audioFileURL")){var a={};if(this.get("audioFiletype")==AudioTools.AUDIO_FILETYPE_MP3){a.mp3=this.get("audioFileURL")
}else{if(this.get("audioFiletype")==AudioTools.AUDIO_FILETYPE_M4A){a.m4a=this.get("audioFileURL")
}}$(this.get("playerElement")).jPlayer("setMedia",a).jPlayer("load");this.set("isEnabled",YES)
}}.observes("audioFileURL"),setCurrentPercentage:function(a){$(this.get("playerElement")).jPlayer("playHead",a)
}});AudioTools.recorderInternalStates={SWF_NOT_EMBEDDED:-1,MIC_NOT_INITIALIZED:0,MIC_NOT_AVAILABLE:20,INITIALIZED_READY:1,READY:5,ACCESS_AWAITING_INPUT:18,ACCESS_USER_DENIED:19,RECORDING:2,RECORDING_PAUSED:16,RECORDING_STOPPED:3,RECORDING_TRUNCATING:9,PLAYBACK_PAUSED:17,PLAYBACK_STOPPED:4,PLAYBACK_PLAYING:6,SAVE_START:7,SAVE_ERROR:8,ENCODING:10,ENCODING_PROGRESS:11,ENCODING_ERROR:12,ENCODING_COMPLETE:13,UPLOADING:14,UPLOADING_COMPLETE:15};
AudioTools.RecorderController=SC.ObjectController.extend({DEBUG:NO,loggingEnabled:NO,flashMinVersion:"10.3",swfObject:null,voiceCommentSwfId:"recorder",voiceCommentSwfName:"recorder",requiredConfigKeys:"timeLimitConfig permissionsElementIdConfig controllerPath".w(),timeLimitConfig:null,controllerPath:null,permissionsElementIdConfig:null,activityCheckDuration:15,activityCheckMinimumLevel:5,statusValue:AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,time:null,activityLevel:0,progressPercent:0,recorderLog:null,recordingLength:0,playbackPosition:0,highestActivityLevel:0,isEnabled:YES,recordingIsGloballyDisabled:NO,inSavingMode:NO,warningWindow:10,hasBeenInitialized:NO,hasBeenDeInitialized:NO,initialize:function(){if(!this.get("swfPermissionsPane")){this._createSWFPermissionsPane()
}else{this._initializeSwf()}},deinitialize:function(){this.set("swfPermissionsPane",null);
this.set("__isInitialized",NO);this.set("hasBeenDeInitialized",YES);swfobject.removeSWF(this.get("voiceCommentSwfId"));
this.set("statusValue",AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED)},logStatusValue:function(){if(this.get("DEBUG")){console.log("status",this.get("statusValue"))
}}.observes("statusValue"),reset:function(){this.get("swfObject").checkMic();this.set("time",null);
this.set("activityLevel",0);this.set("progressPercent",0);this.set("recordingLength",0);
this.set("playbackPosition",0);this.set("highestActivityLevel",0);this.set("inSavingMode",NO)
},inRecordingMode:function(){if(SC.none(this.get("statusValue"))){return YES}return this.__isInState([AudioTools.recorderInternalStates.RECORDING,AudioTools.recorderInternalStates.RECORDING_PAUSED,AudioTools.recorderInternalStates.INITIALIZED_READY])||this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,AudioTools.recorderInternalStates.READY,AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE,AudioTools.recorderInternalStates.ACCESS_AWAITING_INPUT,AudioTools.recorderInternalStates.ACCESS_USER_DENIED])&&!this.get("recordingExists")
}.property("statusValue","recordingExists").cacheable(),isRecording:function(){return this.__isInState([AudioTools.recorderInternalStates.RECORDING])
}.property("statusValue").cacheable(),inPlaybackMode:function(){return this.__isInState([AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.PLAYBACK_PLAYING,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.UPLOADING_COMPLETE])||(this.__isInState([AudioTools.recorderInternalStates.READY])&&this.get("recordingExists"))
}.property("statusValue","recordingExists").cacheable(),playBackDidComplete:function(){if(this.get("inPlaybackMode")&&this.get("statusValue")===AudioTools.recorderInternalStates.READY){this.set("playbackPosition",0)
}}.observes("inPlaybackMode","statusValue"),updateInSavingMode:function(){if(this.__isInState([AudioTools.recorderInternalStates.SAVE_START])){this.set("inSavingMode",YES)
}else{if(this.__isInState([AudioTools.recorderInternalStates.INITIALIZED_READY,AudioTools.recorderInternalStates.SAVE_ERROR,AudioTools.recorderInternalStates.ENCODING_ERROR])){this.set("inSavingMode",NO)
}}}.observes("statusValue"),isActivityLevelOk:function(){if(this.get("recordingLength")>=this.get("activityCheckDuration")&&this.get("highestActivityLevel")<this.get("activityCheckMinimumLevel")){return NO
}return YES}.property("recordingLength","highestActivityLevel").cacheable(),isNearingMaximumRecording:function(){if(!this.get("isRecording")){return NO
}if(this.get("timeLimitConfig")-this.get("recordingLength")<=this.get("warningWindow")){return YES
}return NO}.property("recordingLength","isRecording").cacheable(),alertMaximumRecording:function(){if(!this.get("isRecording")){return
}if(this.get("recordingLength")==this.get("timeLimitConfig")){SC.AlertPane.plain("_You've reached the 3:00 limit and your recording has been stopped.".loc(),null,null,"_OK".loc())
}}.observes("recordingLength","isRecording"),recordingExists:function(){return(this.get("recordingLength")>0)
}.property("recordingLength").cacheable(),elapsedTime:function(){return(this.get("inRecordingMode"))?this.formatSecondToMinSeconds(this.get("recordingLength")):this.formatSecondToMinSeconds(this.get("playbackPosition"))
}.property("recordingLength","inRecordingMode","playbackPosition").cacheable(),totalTime:function(){return(this.get("inRecordingMode"))?this.formatSecondToMinSeconds(this.get("timeLimitConfig")):this.formatSecondToMinSeconds(this.get("recordingLength"))
}.property("recordingLength","inRecordingMode").cacheable(),formatSecondToMinSeconds:function(b){b=parseInt(b);
if(isNaN(b)){return"0:00"}var a=Math.floor(b/60);b=b%60;if(b<10){b="0"+b}return"%@:%@".fmt(a,b)
},startRecording:function(){if(this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED])){this.initialize();
return}if(this.get("recordingExists")&&!this.__isInState([AudioTools.recorderInternalStates.INITIALIZED_READY])){this.get("swfObject").sendPause();
return}if(this.__isInState([AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.ACCESS_USER_DENIED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE])){this.get("swfObject").checkMic()
}this.get("swfObject").sendRecord()},stopRecording:function(){this.get("swfObject").sendStop();
this.set("playbackPosition",0)},pauseRecording:function(){this.get("swfObject").sendPause()
},startPlayback:function(a){a=parseInt(a);a=isNaN(a)?this.get("playbackPosition"):a;
this.get("swfObject").sendPlay(a)},stopPlayback:function(){this.get("swfObject").sendStop();
this.set("playbackPosition",0)},pausePlayback:function(){this.get("swfObject").sendPause()
},saveFile:function(){var a=this.get("uploadUrl");if(Cv.demoNotice()){return NO}if(a){if(this.get("DEBUG")){console.log("saving to",a)
}if(this.get("inPlaybackMode")){this.stopPlayback()}this.get("swfObject").sendSave(a)
}else{console.error("No upload location")}},cancel:function(){this.get("swfObject").sendCancel();
if(this.get("inSavingMode")){this.set("inSavingMode",NO)}else{this.invokeLater("reset",750)
}},canStartRecording:function(){return this.get("flashIsAvailable")&&this.get("isEnabled")&&!this.get("recordingIsGloballyDisabled")&&this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,AudioTools.recorderInternalStates.INITIALIZED_READY,AudioTools.recorderInternalStates.READY,AudioTools.recorderInternalStates.RECORDING_PAUSED,AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE,AudioTools.recorderInternalStates.ACCESS_USER_DENIED])
}.property("statusValue","isEnabled","flashIsAvailable").cacheable(),canStopRecording:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.RECORDING,AudioTools.recorderInternalStates.RECORDING_PAUSED])
}.property("statusValue","isEnabled").cacheable(),canPauseRecording:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.RECORDING])
}.property("statusValue","isEnabled").cacheable(),canStartPlayback:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.RECORDING_STOPPED,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.READY])
}.property("statusValue","time","isEnabled").cacheable(),canPausePlayback:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.PLAYBACK_PLAYING])
}.property("statusValue","isEnabled").cacheable(),canStopPlayback:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.PLAYBACK_PLAYING,AudioTools.recorderInternalStates.PLAYBACK_PAUSED])
}.property("statusValue","isEnabled").cacheable(),canSaveFile:function(){return this.get("isEnabled")&&this.__isInState([AudioTools.recorderInternalStates.READY,AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.PLAYBACK_PLAYING])
}.property("statusValue","isEnabled").cacheable(),canCancel:function(){return this.get("isEnabled")&&!this.get("inSavingMode")&&!this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE,AudioTools.recorderInternalStates.INITIALIZED_READY,AudioTools.recorderInternalStates.UPLOADING_COMPLETE,AudioTools.recorderInternalStates.RECORDING,AudioTools.recorderInternalStates.ACCESS_AWAITING_INPUT,AudioTools.recorderInternalStates.ACCESS_USER_DENIED])
}.property("statusValue","time","isEnabled","inSavingMode").cacheable(),canViewStartRecording:function(){return((this.__isInState([AudioTools.recorderInternalStates.READY])&&!this.get("recordingExists"))||this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,AudioTools.recorderInternalStates.INITIALIZED_READY,AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE,AudioTools.recorderInternalStates.ACCESS_USER_DENIED,AudioTools.recorderInternalStates.ACCESS_AWAITING_INPUT,AudioTools.recorderInternalStates.RECORDING_PAUSED]))
}.property("statusValue","recordingExists").cacheable(),canViewPauseRecording:function(){return this.__isInState([AudioTools.recorderInternalStates.RECORDING])
}.property("statusValue").cacheable(),canViewStartPlayback:function(){return((this.__isInState([AudioTools.recorderInternalStates.READY])&&this.get("recordingExists"))||this.__isInState([AudioTools.recorderInternalStates.RECORDING_STOPPED,AudioTools.recorderInternalStates.RECORDING_TRUNCATING,AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.SAVE_START,AudioTools.recorderInternalStates.SAVE_ERROR,AudioTools.recorderInternalStates.ENCODING,AudioTools.recorderInternalStates.ENCODING_PROGRESS,AudioTools.recorderInternalStates.ENCODING_ERROR,AudioTools.recorderInternalStates.ENCODING_COMPLETE,AudioTools.recorderInternalStates.UPLOADING,AudioTools.recorderInternalStates.UPLOADING_COMPLETE]))
}.property("statusValue","recordingExists").cacheable(),canViewPausePlayback:function(){return this.__isInState([AudioTools.recorderInternalStates.PLAYBACK_PLAYING])
}.property("statusValue").cacheable(),canViewStopRecording:function(){return((this.__isInState([AudioTools.recorderInternalStates.READY])&&!this.get("recordingExists"))||this.__isInState([AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED,AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED,AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE,AudioTools.recorderInternalStates.ACCESS_USER_DENIED,AudioTools.recorderInternalStates.ACCESS_AWAITING_INPUT,AudioTools.recorderInternalStates.INITIALIZED_READY,AudioTools.recorderInternalStates.RECORDING,AudioTools.recorderInternalStates.RECORDING_PAUSED]))
}.property("statusValue","recordingExists").cacheable(),canViewSaveFile:function(){return((this.__isInState([AudioTools.recorderInternalStates.READY])&&this.get("recordingExists"))||this.__isInState([AudioTools.recorderInternalStates.RECORDING_STOPPED,AudioTools.recorderInternalStates.RECORDING_TRUNCATING,AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.PLAYBACK_PLAYING,AudioTools.recorderInternalStates.SAVE_START,AudioTools.recorderInternalStates.SAVE_ERROR,AudioTools.recorderInternalStates.ENCODING,AudioTools.recorderInternalStates.ENCODING_PROGRESS,AudioTools.recorderInternalStates.ENCODING_ERROR,AudioTools.recorderInternalStates.ENCODING_COMPLETE,AudioTools.recorderInternalStates.UPLOADING,AudioTools.recorderInternalStates.UPLOAD_COMPLETE])||this.get("inSavingMode"))
}.property("statusValue","recordingExists","inSavingMode").cacheable(),uploadDidComplete:function(c,a,b){},swfPermissionsPane:null,__isInState:function(a){return !SC.none(this.get("statusValue"))&&a.indexOf(this.get("statusValue"))!==-1
},_createSWFPermissionsPane:function(){if(this.get("swfPermissionsPane")){return}var a=SC.Pane.create({inForeground:NO,layout:function(){if(this.get("inForeground")){return{right:140,top:135,height:138,width:215}
}else{return{right:-200,top:135,height:138,width:215}}}.property("inForeground").cacheable(),render:function(b,c){b.addStyle("zIndex","9999");
if(c){b.push('<div id="swf_recorder"></div>')}},recordingController:this,didAppendToDocument:function(){this.get("recordingController").set("swfPermissionsPane",this)
}}).append()},changePermissionsPaneVisibility:function(){var a=this.get("swfPermissionsPane");
if(!a){return}if(this.__isInState([AudioTools.recorderInternalStates.ACCESS_AWAITING_INPUT,AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED])){a.set("inForeground",YES)
}else{a.set("inForeground",NO)}}.observes("statusValue","swfPermissionsPane"),didEnterMicNotInitialized:function(){if(this.__isInState([AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED])){this.get("swfObject").checkMic()
}}.observes("statusValue"),didEnterMicNotAvailable:function(){if(this.__isInState([AudioTools.recorderInternalStates.MIC_NOT_AVAILABLE])){SC.AlertPane.plain("_No microphone detected".loc(),"_Please check to ensure that your microphone is enabled and try again to record.".loc(),null,"_OK".loc());
this.deinitialize()}}.observes("statusValue"),didEnterInitializedReady:function(){if(!this.get("hasBeenInitialized")&&this.__isInState([AudioTools.recorderInternalStates.INITIALIZED_READY])){this.set("hasBeenInitialized",YES);
this.startRecording()}}.observes("statusValue"),_initializeSwf:function(){if(!this._swfObjectLibraryIsOk()||!this._configIsOk()){return
}if(!this.get("flashIsAvailable")){return}if(!this.get("flashIsMinVersion")){this.setPath("swfPermissionsPane.inForeground",YES);
var i=this;swfobject.showExpressInstall({data:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/audio_tools/en_us/A/resources/flash/expressinstall.swf",width:"215",height:"138"},{},this.get("permissionsElementIdConfig"),function(j){i.setPath("swfPermissionsPane.inForeground",NO)
});return}if(this.__isInitialized){if(this.get("DEBUG")){console.log("already initialized aborting")
}return}if(this.get("hasBeenDeInitialized")){if(this.get("DEBUG")){console.log("deinitialized")
}this.set("hasBeenDeInitialized",NO);return}if(this.get("DEBUG")){console.info("initalizing swf object")
}if(!document.getElementById(this.get("permissionsElementIdConfig"))){console.error(this.get("permissionsElementIdConfig"),"element can't be found");
return}var c=this.get("controllerPath");var b={timeLimit:this.get("timeLimitConfig"),showLink:"N",hideFlash:"true",recorderMessageBinding:c+".__receiveStatus",recorderTimerBinding:c+".__receiveTime",recorderMeterBinding:c+".__receiveActivityLevel",recorderEncodingProgressBinding:c+".__receiveEncodingProgress",recorderUploadBinding:c+".__receiveUploadStatus",recorderLogBinding:c+".__receiveLog"};
var h={wmode:"transparent",allowscriptaccess:"always"};var f={id:this.get("voiceCommentSwfId"),name:this.get("voiceCommentSwfName")};
var e=this;var g="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/audio_tools/en_us/A/resources/flash/iPAudioTool_32.swf";
var a=document.location.protocol+"//"+document.location.host+"/pd/";g=g.replace(Cv.config.get("RESOURCE_URL_PREFIX"),a);
swfobject.embedSWF(g+"?ID="+Math.random()*100,this.get("permissionsElementIdConfig"),"215","138",this.get("flashMinVersion"),"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/audio_tools/en_us/A/resources/flash/expressinstall.swf",b,h,f,function(j){e.set("swfObject",j.ref)
});this.__isInitialized=YES}.observes("swfPermissionsPane"),_swfObjectLibraryIsOk:function(){if(!swfobject){console.error("swfobject not available!!!");
return NO}return YES},flashIsAvailable:function(){return swfobject.getFlashPlayerVersion().major>0
}.property().cacheable(),flashIsMinVersion:function(){return swfobject.hasFlashPlayerVersion(this.get("flashMinVersion"))
}.property().cacheable(),_configIsOk:function(){var a=YES;var b=this.get("requiredConfigKeys");
b.forEach(function(c){if(SC.none(this.get(c))){a=NO;console.error("required key not set: ",c)
}},this);if(!a){console.error("all configs not set");return NO}else{if(this.get("DEBUG")){console.log("CONFIG:");
b.forEach(function(c){console.info(c+": "+this.get(c))},this)}}return YES},_updateRecordingLength:function(){var a=parseFloat(this.get("time"));
if(!a){return}if(this.get("inRecordingMode")){this.set("recordingLength",a)}else{if(this.get("inPlaybackMode")){this.set("playbackPosition",a)
}}}.observes("time"),_updateHightestActivityLevel:function(){if(this.get("activityLevel")>this.get("highestActivityLevel")){this.set("highestActivityLevel",this.get("activityLevel"))
}}.observes("activityLevel"),__receiveStatus:function(a){SC.run(function(){this.set("statusValue",a)
},this)},__lastTime:0,__receiveTime:function(a){if(this.get("DEBUG")){console.log(a,Math.floor(a))
}a=Math.floor(a);if(a!==this.__lastTime){SC.run(function(){this.set("time",a)},this);
this.__lastTime=a}},__lastLevel:0,__receiveActivityLevel:function(a){if(this.__lastLevel!==a){SC.run(function(){this.set("activityLevel",a)
},this);this.__lastLevel=a}},__receiveEncodingProgress:function(a){SC.run(function(){this.set("progressPercent",Math.floor(a))
},this)},__receiveLog:function(a){if(this.get("loggingController")&&this.get("loggingEnabled")){SC.run(function(){var b={id:this.getPath("loggingController.arrangedObjects").length(),title:a};
this.get("loggingController").addObject(b)},this)}},__receiveUploadStatus:function(c,a,b){a=parseInt(a);
if(this.get("DEBUG")){console.log("__receiveUploadStatus: ",c,a,b)}this.uploadDidComplete(c,a,b)
},loggingController:null});AudioTools.LoggingController=SC.ArrayController.create({orderBy:"DESC id",content:[]});
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),i=c?/win/.test(c):/win/.test(f),k=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,e=!+"\v1",g=[0,0,0],l=null;
if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){l=aB.plugins[ab].description;
if(l&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;
e=false;l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10);
g[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0
}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);if(j){l=j.GetVariable("$version");
if(l){e=true;l=l.split(" ")[1].split(",");g=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]
}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:e,win:i,mac:k}}(),aK=function(){if(!ah.w3){return
}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()
}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)
}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);
aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")
}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return
}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return
}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));
b.parentNode.removeChild(b)}catch(a){return}ak=true;var e=Z.length;for(var c=0;c<e;
c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)
}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)
}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()
}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var e=aL.getElementsByTagName("body")[0];
var b=ar(aD);b.setAttribute("type",aE);var a=e.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");
if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]
}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}e.removeChild(b);a=null;
am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var i=0;i<h;i++){var c=aG[i].id;
var m=aG[i].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var j=aS(c);if(j){if(ao(aG[i].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);
if(m){a.success=true;a.ref=av(c);m(a)}}else{if(aG[i].expressInstall&&au()){var f={};
f.data=aG[i].expressInstall;f.width=j.getAttribute("width")||"0";f.height=j.getAttribute("height")||"0";
if(j.getAttribute("class")){f.styleclass=j.getAttribute("class")}if(j.getAttribute("align")){f.align=j.getAttribute("align")
}var g={};var e=j.getElementsByTagName("param");var l=e.length;for(var k=0;k<l;k++){if(e[k].getAttribute("name").toLowerCase()!="movie"){g[e[k].getAttribute("name")]=e[k].getAttribute("value")
}}ae(f,g,c,m)}else{aF(j);if(m){m(a)}}}}}else{ay(c,true);if(m){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;
a.ref=b}m(a)}}}}}function av(b){var e=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){e=c
}else{var a=c.getElementsByTagName(aD)[0];if(a){e=a}}}return e}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)
}function ae(g,e,i,f){aU=true;ap=f||null;at={success:false,id:i};var a=aS(i);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);
ad=null}else{aJ=a;ad=i}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"
}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"
}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;
if(typeof e.flashvars!=aq){e.flashvars+="&"+c}else{e.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");
i+="SWFObjectNew";h.setAttribute("id",i);a.parentNode.insertBefore(h,a);a.style.display="none";
(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)
}})()}aA(g,e,i)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");
a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";
(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)
}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var e=ar("div");if(ah.win&&ah.ie){e.innerHTML=b.innerHTML
}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;
for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){e.appendChild(a[c].cloneNode(true))
}}}}}return e}function aA(f,h,c){var e,a=aS(c);if(ah.wk&&ah.wk<312){return e}if(a){if(typeof f.id==aq){f.id=c
}if(ah.ie&&ah.win){var g="";for(var j in f){if(f[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){h.movie=f[j]
}else{if(j.toLowerCase()=="styleclass"){g+=' class="'+f[j]+'"'}else{if(j.toLowerCase()!="classid"){g+=" "+j+'="'+f[j]+'"'
}}}}}var i="";for(var k in h){if(h[k]!=Object.prototype[k]){i+='<param name="'+k+'" value="'+h[k]+'" />'
}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+i+"</object>";
ag[ag.length]=f.id;e=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var l in f){if(f[l]!=Object.prototype[l]){if(l.toLowerCase()=="styleclass"){b.setAttribute("class",f[l])
}else{if(l.toLowerCase()!="classid"){b.setAttribute(l,f[l])}}}}for(var m in h){if(h[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"){aQ(b,m,h[m])
}}a.parentNode.replaceChild(b,a);e=b}}return e}function aQ(b,e,c){var a=ar("param");
a.setAttribute("name",e);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);
if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)
}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);
if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)
}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)
}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");
c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false
}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];
if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var e=ar("style");
e.setAttribute("type","text/css");e.setAttribute("media",h);aH=f.appendChild(e);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]
}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))
}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b
}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;
return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;
for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var e=ag.length;for(var c=0;
c<e;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null
}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var e={};
e.id=a;e.swfVersion=f;e.expressInstall=c;e.callbackFn=b;aG[aG.length]=e;ay(a,false)
}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)
}},embedSWF:function(l,f,i,g,c,a,b,j,h,k){var e={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&l&&f&&i&&g&&c){ay(f,false);
aj(function(){i+="";g+="";var s={};if(h&&typeof h===aD){for(var p in h){s[p]=h[p]
}}s.data=l;s.width=i;s.height=g;var o={};if(j&&typeof j===aD){for(var q in j){o[q]=j[q]
}}if(b&&typeof b===aD){for(var m in b){if(typeof o.flashvars!=aq){o.flashvars+="&"+m+"="+b[m]
}else{o.flashvars=m+"="+b[m]}}}if(ao(c)){var n=aA(s,o,f);if(s.id==f){ay(f,true)}e.success=true;
e.ref=n}else{if(a&&au()){s.data=a;ae(s,o,f,k);return}else{ay(f,true)}}if(k){k(e)}})
}else{if(k){k(e)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}
},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined
}},showExpressInstall:function(b,a,e,c){if(ah.w3&&au()){ae(b,a,e,c)}},removeSWF:function(a){if(ah.w3){aw(a)
}},createCSS:function(b,a,c,e){if(ah.w3){az(b,a,c,e)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;
if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");
for(var e=0;e<c.length;e++){if(c[e].substring(0,c[e].indexOf("="))==b){return ai(c[e].substring((c[e].indexOf("=")+1)))
}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);
if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false
}}}}();AudioTools.PlayerView=SC.View.extend({isPlaying:null,currentPercent:null,currentTime:null,duration:null,playerController:null,hasAudioFile:null,isEnabled:null,playingIsGloballyDisabled:null,deleteIsEnabled:null,flashIsAvailable:null,canDelete:null,classNames:["audio-controls","player-controls","sidebar-box"],childViews:"headerView playButtonView pauseButtonView scrubberView cancelButtonView".w(),headerView:SC.View.design({layout:{top:0,right:0,height:30,left:0},classNames:"sidebar-box-header",childViews:"labelView timeView".w(),labelView:SC.LabelView.design({layout:{top:5,left:10},value:"_Voice Comment".loc()}),timeView:SC.View.design({layout:{top:6,right:8,width:60},textAlign:SC.ALIGN_RIGHT,classNames:"time",currentTimeBinding:".parentView.parentView.currentTime",durationBinding:".parentView.parentView.duration",isVisibleBinding:SC.Binding.bool(".duration"),displayProperties:"currentTime duration".w(),render:function(a,b){a.push('<span class="numerator">');
a.push(this.get("currentTime"));a.push("</span> / ");a.push(this.get("duration"))
}})}),playButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"start-playback-button",action:"play",target:"parentView.playerController",titleMinWidth:0,parentIsEnabledBinding:".parentView.isEnabled",playingIsGloballyDisabledBinding:".parentView.playingIsGloballyDisabled",flashIsAvailableBinding:".parentView.flashIsAvailable",isVisibleBinding:SC.Binding.bool(".parentView.isPlaying").not(),isEnabled:function(){return this.get("parentIsEnabled")&&this.get("flashIsAvailable")&&!this.get("playingIsGloballyDisabled")
}.property("parentIsEnabled","flashIsAvailable","playingIsGloballyDisabled"),toolTip:function(){if(!this.get("flashIsAvailable")){return"_In order to play a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/".loc()
}if(this.get("playingIsGloballyDisabled")){return"_It is not possible to listen to voice comments at this time. We apologize for the inconvenience.".loc()
}return"_Listen to this voice comment".loc()}.property("playingIsGloballyDisabled","flashIsAvailable").cacheable()}),pauseButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"pause-playback-button",action:"pause",target:"parentView.playerController",titleMinWidth:0,parentIsEnabledBinding:".parentView.isEnabled",hasAudioFileBinding:".parentView.hasAudioFile",isPlayingBinding:".parentView.isPlaying",isVisibleBinding:".parentView.isPlaying",isEnabled:function(){return this.get("parentIsEnabled")&&this.get("hasAudioFile")
}.property("parentIsEnabled","hasAudioFile"),toolTip:"_Pause this voice comment".loc()}),scrubberView:SC.SliderView.design(SCUI.ToolTip,{layout:{left:60,right:60,top:47,height:20},displayProperties:["value"],valueBinding:".parentView.currentPercent",isPlayingBinding:SC.Binding.from(".parentView.isPlaying"),controllerBinding:".parentView.playerController",hasAudioFileBinding:".parentView.hasAudioFile",isEnabledBinding:".parentView.isEnabled",minimum:0,maximum:100,step:0,toolTip:"_Slide to listen from a specific point in the voice comment".loc(),mouseDown:function(){if(this.get("isPlaying")){this.get("controller").pause()
}arguments.callee.base.apply(this,arguments)},mouseUp:function(){this.get("controller").setCurrentPercentage(this.get("value"));
arguments.callee.base.apply(this,arguments)}}),cancelButtonView:SC.ButtonView.design({layout:{top:32,width:48,bottom:1,right:1},classNames:"cancel-button",action:"trash",target:"parentView.playerController",titleMinWidth:0,isVisibleBinding:".parentView.canDelete",parentIsEnabledBinding:".parentView.isEnabled",hasAudioFileBinding:".parentView.hasAudioFile",deleteIsEnabledBinding:".parentView.deleteIsEnabled",isEnabled:function(){return this.get("parentIsEnabled")&&this.get("hasAudioFile")&&this.get("deleteIsEnabled")
}.property("parentIsEnabled","hasAudioFile","deleteIsEnabled").cacheable(),toolTip:"_Discard".loc()})});
AudioTools.RecordingControlsView=SC.View.extend({classNames:["audio-controls","recording-controls","sidebar-box"],layout:{width:275,height:77},recordingController:null,recordingExistsBinding:"*recordingController.recordingExists",recorderStatusBinding:"*recordingController.statusValue",recorderInSavingModeBinding:"*recordingController.inSavingMode",recorderInPlaybackModeBinding:"*recordingController.inPlaybackMode",recordingIsGloballyDisabledBinding:"*recordingController.recordingIsGloballyDisabled",flashIsAvailableBinding:"*recordingController.flashIsAvailable",isNearingMaximumRecordingBinding:SC.Binding.oneWay("*recordingController.isNearingMaximumRecording"),isEnabled:null,displayProperties:["classNames"],updateClassNames:function(){var b=this.get("classNames").concat()||[],c=this.get("recorderStatus"),a=this.get("recordingExists");
if([AudioTools.recorderInternalStates.RECORDING].indexOf(c)!=-1){b.pushObject("recording")
}else{b.removeObject("recording")}if([AudioTools.recorderInternalStates.RECORDING_PAUSED].indexOf(c)!=-1){b.pushObject("recording-paused")
}else{b.removeObject("recording-paused")}if(a&&[AudioTools.recorderInternalStates.PLAYBACK_PAUSED,AudioTools.recorderInternalStates.PLAYBACK_PLAYING,AudioTools.recorderInternalStates.PLAYBACK_STOPPED,AudioTools.recorderInternalStates.READY].indexOf(c)!=-1){b.pushObject("playing")
}else{b.removeObject("playing")}if(this.get("isNearingMaximumRecording")){b.pushObject("nearing-maxlength")
}else{b.removeObject("nearing-maxlength")}this.set("classNames",b.uniq())}.observes("recorderStatus","recordingExists","isNearingMaximumRecording"),visibilityDidChange:function(){if(!this.get("isVisible")){return
}var a=this.get("recordingController");if(a&&a.get("hasBeenInitialized")){a.reset()
}}.observes("isVisible"),recordingControllerDidChange:function(){if(!this.get("recordingController")){return
}this.get("recordingController").initialize()},childViews:"savingHeaderView headerView pauseRecordingButtonView startPlaybackButtonView pausePlaybackButtonView saveFileButtonView playbackScrubberView audioInputLevelView startRecordingButtonView stopRecordingButtonView cancelButtonView".w(),savingHeaderView:SC.View.design({layout:{top:0,right:0,height:30,left:0},classNames:["sidebar-box-header saving-progress"],childViews:"savingProgressView savingMessageView".w(),isVisibleBinding:".parentView.recorderInSavingMode",savingProgressView:SC.ProgressView.design({layout:{top:5,left:7,right:7,bottom:5},minimum:0,maximum:100,recorderStatusBinding:".parentView.parentView.recordingController.statusValue",value:function(){var a=this.get("recorderStatus");
if(a==AudioTools.recorderInternalStates.SAVE_START||a==AudioTools.recorderInternalStates.ENCODING||a==AudioTools.recorderInternalStates.ENCODING_PROGRESS){return 33
}else{if(a==AudioTools.recorderInternalStates.ENCODING_COMPLETE||a==AudioTools.recorderInternalStates.UPLOADING){return 66
}else{if(a==AudioTools.recorderInternalStates.UPLOADING_COMPLETE){return 100}}}}.property("recorderStatus").cacheable()}),savingMessageView:SC.LabelView.design({layout:{top:5,left:7,right:7,bottom:5},textAlign:SC.ALIGN_CENTER,recorderStatusBinding:".parentView.parentView.recordingController.statusValue",value:function(){var a=new Array();
a[7]="_Preparing to save...".loc();a[10]="_Preparing to save...".loc();a[11]="_Preparing to save...".loc();
a[13]="_Saving...".loc();a[14]="_Saving...".loc();a[15]="_Saved!".loc();var b=this.get("recorderStatus");
return a[parseInt(b)]}.property("recorderStatus").cacheable()})}),headerView:SC.View.design({layout:{top:0,right:0,height:30,left:0},childViews:"labelView timeView".w(),classNames:["sidebar-box-header"],isVisibleBinding:SC.Binding.not(".parentView.recorderInSavingMode"),labelView:SC.LabelView.design({layout:{top:5,left:9},classNames:["heading"],recorderStatusBinding:".parentView.parentView*recordingController.statusValue",recorderInPlaybackModeBinding:".parentView.parentView.recorderInPlaybackMode",value:function(){var a=new Array();
a[-1]="_Voice Comment".loc();a[0]="_Voice Comment".loc();a[1]="_Voice Comment".loc();
a[2]="_Recording".loc();a[3]="_Recording stopped".loc();a[4]="_Recording stopped".loc();
a[5]="_Voice Comment".loc();a[6]="_Recording stopped".loc();a[7]="_Preparing to save...".loc();
a[8]="_Voice Comment".loc();a[9]="_Truncating".loc();a[10]="_Preparing to save...".loc();
a[11]="_Preparing to save...".loc();a[12]="_Error".loc();a[13]="_Saving...".loc();
a[14]="_Saving...".loc();a[15]="_Saved!".loc();a[16]="_Recording paused".loc();a[17]="_Recording stopped".loc();
a[18]="_Voice Comment".loc();a[19]="_Voice Comment".loc();a[20]="_Voice Comment".loc();
var c=this.get("recorderStatus");var b=a[parseInt(c)];if(c===5&&this.get("recorderInPlaybackMode")){b="_Recording stopped".loc()
}return b}.property("recorderStatus","recorderInPlaybackMode").cacheable()}),timeView:SC.View.design({layout:{top:6,right:8,width:60},textAlign:SC.ALIGN_RIGHT,classNames:"time",elapsedTimeBinding:".parentView.parentView*recordingController.elapsedTime",totalTimeBinding:".parentView.parentView*recordingController.totalTime",displayProperties:"elapsedTime totalTime".w(),render:function(a,b){a.push('<span class="numerator">');
a.push(this.get("elapsedTime"));a.push("</span> / ");a.push(this.get("totalTime"))
}})}),startRecordingButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"start-recording-button",isVisibleBinding:".parentView.recordingController.canViewStartRecording",canStartRecordingBinding:".parentView*recordingController.canStartRecording",parentIsEnabledBinding:".parentView.isEnabled",recordingExistsBinding:".parentView.recordingExists",flashIsAvailableBinding:".parentView.flashIsAvailable",recordingIsGloballyDisabledBinding:".parentView.recordingIsGloballyDisabled",isEnabled:function(){return this.get("canStartRecording")&&this.get("parentIsEnabled")
}.property("canStartRecording","parentIsEnabled").cacheable(),target:"parentView.recordingController",action:"startRecording",toolTip:function(){if(this.get("recordingIsGloballyDisabled")){return"_It is not possible to record voice comments at this time. We apologize for the inconvenience.".loc()
}if(!this.get("flashIsAvailable")){return"_In order to add a voice comment you must have Flash 10.3 or higher installed. You can download the latest version of Flash from Adobe at http://get.adobe.com/flashplayer/".loc()
}return(this.get("recordingExists"))?"_Resume recording".loc():"_Record a voice comment up to 3 minutes long".loc()
}.property("recordingExists","flashIsAvailable","recordingIsGloballyDisabled").cacheable(),titleMinWidth:0}),stopRecordingButtonView:SC.ButtonView.design({layout:{top:32,left:178,bottom:1,width:48},classNames:"stop-recording-button",isVisibleBinding:".parentView.recordingController.canViewStopRecording",canStopRecordingBinding:".parentView.recordingController.canStopRecording",parentIsEnabledBinding:".parentView.isEnabled",isEnabled:function(){return this.get("canStopRecording")&&this.get("parentIsEnabled")
}.property("canStopRecording","parentIsEnabled").cacheable(),target:"parentView.recordingController",action:"stopRecording",toolTip:"_Stop recording".loc(),titleMinWidth:0}),pauseRecordingButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"pause-recording-button",isVisibleBinding:".parentView.recordingController.canViewPauseRecording",isEnabledBinding:".parentView.recordingController.canPauseRecording",target:"parentView.recordingController",action:"pauseRecording",toolTip:"_Pause recording".loc(),titleMinWidth:0}),startPlaybackButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"start-playback-button",isVisibleBinding:".parentView.recordingController.canViewStartPlayback",canStartPlaybackBinding:".parentView.recordingController.canStartPlayback",parentIsEnabledBinding:".parentView.isEnabled",isEnabled:function(){return this.get("canStartPlayback")&&this.get("parentIsEnabled")
}.property("canStartPlayback","parentIsEnabled").cacheable(),target:"parentView.recordingController",action:"startPlayback",toolTip:"_Play recording".loc(),titleMinWidth:0}),pausePlaybackButtonView:SC.ButtonView.design({layout:{top:32,left:1,bottom:1,width:48},classNames:"pause-playback-button",isVisibleBinding:".parentView.recordingController.canViewPausePlayback",isEnabledBinding:".parentView.recordingController.canPausePlayback",target:"parentView.recordingController",action:"pausePlayback",toolTip:"_Pause".loc(),titleMinWidth:0}),cancelButtonView:SC.ButtonView.design({layout:{top:32,right:1,bottom:1,width:48},classNames:"cancel-button",isVisible:YES,canCancelBinding:".parentView.recordingController.canCancel",parentIsEnabledBinding:".parentView.isEnabled",recorderStatusBinding:".parentView.recorderStatus",isEnabled:function(){return this.get("canCancel")&&this.get("parentIsEnabled")
}.property("canCancel","parentIsEnabled").cacheable(),target:"parentView.recordingController",action:"cancel",toolTip:function(){var a=this.getPath("parentView.recorderInSavingMode");
return(a)?"_Cancel save and return to the unsaved recording".loc():"_Discard".loc()
}.property(".parentView.recorderInSavingMode").cacheable(),titleMinWidth:0}),saveFileButtonView:SC.ButtonView.design({layout:{top:32,left:178,bottom:1,width:48},classNames:"save-file-button",isVisibleBinding:".parentView.recordingController.canViewSaveFile",canSaveFileBinding:".parentView.recordingController.canSaveFile",parentIsEnabledBinding:".parentView.isEnabled",isEnabled:function(){return this.get("canSaveFile")&&this.get("parentIsEnabled")
}.property("canSaveFile","parentIsEnabled").cacheable(),target:"parentView.recordingController",action:"saveFile",toolTip:"_Save recording".loc(),titleMinWidth:0}),audioInputLevelView:SC.ProgressView.design(SCUI.ToolTip,{layout:{left:58,top:50,width:110,height:10},classNames:"audio-input-level",minimum:0,maximum:25,valueBinding:".parentView.recordingController.activityLevel",isVisibleBinding:".parentView.recordingController.inRecordingMode",toolTip:"_Voice input level".loc()}),playbackScrubberView:SC.SliderView.design(SCUI.ToolTip,{layout:{left:52,top:47,width:121,height:20},classNames:"playback-scrubber",minimum:1,maximumBinding:".parentView.recordingController.recordingLength",valueBinding:SC.Binding.oneWay(".parentView.recordingController.playbackPosition"),recorderInPlaybackModeBinding:".parentView.recorderInPlaybackMode",recorderInSavingModeBinding:".parentView.recorderInSavingMode",isVisible:function(){return this.get("recorderInPlaybackMode")||this.get("recorderInSavingMode")
}.property("recorderInPlaybackMode","recorderInSavingMode").cacheable(),toolTip:"_Slide to listen from a specific point in the voice comment".loc(),mouseDown:function(){this.getPath("parentView.recordingController").pauseRecording();
arguments.callee.base.apply(this,arguments)},mouseUp:function(){this.setPath("parentView.recordingController.playbackPosition",this.get("value"));
arguments.callee.base.apply(this,arguments)}})});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("audio_tools")
}Cv=SC.Object.create({NAMESPACE:"Cv",VERSION:"0.1.0",config:Ip.Configuration.create(Ip.LocalizedUrl,{PAPER_ZOOM_DEFAULT:-1,DEFAULT_ACTIVE_SERVICE:null,DEFAULT_VISIBLE_SERVICES:[],PAPER_BOTTOM_BUFFER:25,SHOW_MATCH_GROUP_PERCENT_IN_LABEL:NO,ALLOW_OR_OPTIONS_IN_ALL_MODES:NO,ALLOW_TEXT_SELECTION:YES,QUICKMARK_SUPPORT:YES,CAN_USE_GRADING_FORMS:NO,CAN_USE_MARK_CRITERIA_ASSOCIATION:NO,MARK_POSITIONS_EDITABLE:YES,ERATER_SUPPORTS_ADDITIONAL_COMMENTS:YES,HIGHLIGHT_COLORS:[{title:"D",value:0,hex:"#0090FF",icon:"sc-radio-color-default"},{value:3,hex:"#0000FF",icon:"sc-radio-color-blue"},{value:2,hex:"#56DA27",icon:"sc-radio-color-green"},{value:1,hex:"#FFF000",icon:"sc-radio-color-yellow"},{value:5,hex:"#FD71B5",icon:"sc-radio-color-red"},{value:4,hex:"#AB42DC",icon:"sc-radio-color-purple"}],HIGHLIGHT_COLORS_DEFAULT:1,HIGHLIGHT_COLORS_ACTIVE:0,CAN_GET_VOICE_COMMENTS:NO,CAN_POST_VOICE_COMMENTS:NO,CAN_USE_R2L:NO,RESOURCE_URL_PREFIX:"",CAN_DOWNLOAD_DIGITAL_RECEIPT:NO,CAN_GENERATE_IPAD_CLASS_ACCESS_CODE:NO,SHOW_IPAD_CLASS_ACCESS_CODE_LINK:NO,HIDE_PAPER_NAVIGATION:NO,HIDE_ASSIGNMENT_NAVIGATION:NO,HIDE_SERVICE_SELECTOR:NO,HIDE_BRANDING:NO,HIDE_WHATS_NEW_LINK:NO,HIDE_GRADE_BOX:NO,HIDE_FIRST_TIME_USER_MESSAGE:YES,DISABLE_ASSIGNMENT_NAVIGATION:NO,HIDE_GRADEMARK:NO,SHOW_CUSTOM_HELP_LINK:NO,CUSTOM_HELP_LINK_INSTRUCTOR:NO,CUSTOM_HELP_LINK_STUDENT:NO,HIDE_STUDENT_EMAIL:NO,serverOverridableConfigKeys:{CAN_GET_VOICE_COMMENTS:1,CAN_POST_VOICE_COMMENTS:1,CAN_USE_R2L:1,RESOURCE_URL_PREFIX:1,CAN_DOWNLOAD_DIGITAL_RECEIPT:1,CAN_GENERATE_IPAD_CLASS_ACCESS_CODE:1,SHOW_IPAD_CLASS_ACCESS_CODE_LINK:1,HIDE_PAPER_NAVIGATION:1,HIDE_ASSIGNMENT_NAVIGATION:1,HIDE_SERVICE_SELECTOR:1,HIDE_BRANDING:1,HIDE_WHATS_NEW_LINK:1,HIDE_GRADE_BOX:1,HIDE_FIRST_TIME_USER_MESSAGE:0,DISABLE_ASSIGNMENT_NAVIGATION:1,HIDE_GRADEMARK:1,SHOW_CUSTOM_HELP_LINK:1,CUSTOM_HELP_LINK_INSTRUCTOR:1,CUSTOM_HELP_LINK_STUDENT:1,HIDE_STUDENT_EMAIL:1,CAN_USE_GRADING_FORMS:1,CAN_USE_MARK_CRITERIA_ASSOCIATION:1,APP_NAME:"Turnitin"},queryStringParamOverrides:{CAN_GET_VOICE_COMMENTS:YES,CAN_POST_VOICE_COMMENTS:YES,CAN_USE_R2L:YES,RESOURCE_URL_PREFIX:YES,CAN_DOWNLOAD_DIGITAL_RECEIPT:YES,CAN_USE_MARK_CRITERIA_ASSOCIATION:function(a){return parseInt(a,10)?YES:NO
},CAN_GENERATE_IPAD_CLASS_ACCESS_CODE:YES,SHOW_IPAD_CLASS_ACCESS_CODE_LINK:YES,HIDE_FIRST_TIME_USER_MESSAGE:YES},serverOverrideUrl:Ip.LocalizedUrl.prepareUrl(["/application/config"])}),READONLY_STATUS_CONSTANTS:{READONLY_IS_READABLE:0,READONLY_CLASS_EXPIRED:1,READONLY_NATIVE_LOCKED:2,READONLY_DPR_PRE_WITH_IMAGE_DIMENSIONS:3},defaultHighlightColorIndex:function(){var a=this.getPath("config.HIGHLIGHT_COLORS");
var c;for(var b=0;b<a.length;b++){if(a[b].value===this.getPath("config.HIGHLIGHT_COLORS_DEFAULT")){c=b
}}return c}.property().cacheable(),getHighlightColorObjectForValue:function(c){if(typeof c=="undefined"){return null
}var e=null;var a=this.getPath("config.HIGHLIGHT_COLORS");for(var b=0;b<a.length;
b++){if(a[b].value===c){e=a[b]}}return e},lang:function(){return Ip.currentLanguage()
}.property().cacheable(),userIsStudentBinding:SC.Binding.oneWay("Cv.userController.isStudent").bool(),inStudentMode:function(){return(Ip.getQueryStringParameter("student_user")==1)||this.get("userIsStudent")
}.property("userIsStudent").cacheable(),userIsPseudoUserBinding:SC.Binding.oneWay("Cv.userController.isPseudoUser").bool(),showRoadmap:function(){return !this.get("inStudentMode")&&!this.get("userIsPseudoUser")
}.property("userIsStudent","userIsPseudoUser").cacheable(),inDemoMode:function(){return Ip.inDemoMode()?YES:NO
}.property("inDemoMode").cacheable(),helpSiteUrl:function(){return this.get("inDemoMode")?"http://turnitin.com":""
}.property("inDemoMode").cacheable(),hostUrlForStaticSite:function(){var b=document.location.href?document.location.href:"";
var c=/submit\.ac\.uk/;var a=/jisc/;return(b.match(c)||b.match(a))?"http://submit.ac.uk":"http://www.turnitin.com"
}.property().cacheable(),demoNotice:function(){if(this.get("inDemoMode")){SC.AlertPane.info("_Tutorial Mode".loc(),"_This feature is not covered in this tutorial. Please view the GradeMark chapter of the Turnitin instructor manual for more information.".loc(),null,"_OK".loc());
return YES}return NO},getMarksRecordArray:function(c,a){if(!Cv.store){return}var f=this._getCachedRecordArray(c,a);
if(!f&&a){var e;if(c==="Cv.Mark"){e=SC.Query.local(c,{conditions:"read ANY {reads} AND isExcluded = NO AND isHidden = NO",reads:a.toArray()});
f=Cv.store.find(e)}else{var b=this.getMarksRecordArray("Cv.Mark",a);e=SC.Query.local(c);
f=b.find(e)}this._setCachedRecordArray(c,a,f)}return f},getPageMarks:function(b,a){var e;
var g=this.getMarksRecordArray("Cv.Mark",b);if(g){var c=a+1;var f=SC.Query.local("Cv.Mark","pageNumber = {pageNumber}",{pageNumber:c});
e=g.find(f)}else{e=[]}return e},getHighlightsRecordArray:function(a){if(!Cv.store){return
}var b="Cv.Highlight";var e=this._getCachedRecordArray(b,a);if(!e&&a){var c=SC.Query.local(b,{conditions:"readId ANY {readIds} AND isHidden = NO",readIds:a.getEach("id")});
e=Cv.store.find(c);this._setCachedRecordArray(b,a,e)}return e},getPageHighlights:function(b,a){var f=this.getHighlightsRecordArray(b);
var e;if(f){var c=SC.Query.local("Cv.Highlight","startPageIndex <= {pageIndex} AND endPageIndex >= {pageIndex}",{pageIndex:a});
e=f.find(c)}else{e=[]}return e},getGm3HighlightsRecordArray:function(a){var b="Cv.Gm3Highlight";
var e=this._getCachedRecordArray(b,a);if(!e&&a){var c=SC.Query.local(b,{conditions:"readId ANY {readIds}",readIds:a.getEach("id")});
e=Cv.store.find(c);this._setCachedRecordArray(b,a,e)}return e},getPageGm3Highlights:function(b,a){var f=this.getGm3HighlightsRecordArray(b);
var e;if(f){var c=a+1;var g=SC.Query.local("Cv.Gm3Highlight","pageNumber = {pageNumber}",{pageNumber:c});
e=f.find(g)}else{e=[]}return e},_getCachedRecordArray:function(c,a){var f=null;var e=this.readsIdString(a);
if(e){var b="%@_%@".fmt(e,c);if(!this._recordArrayCache){this._recordArrayCache={}
}f=this._recordArrayCache[b]}return f},_setCachedRecordArray:function(c,a,f){var e=this.readsIdString(a);
if(e){var b="%@_%@".fmt(e,c);this._recordArrayCache[b]=f}},readsIdString:function(b){var c=null;
if(b&&b.get("length")>0){var a=b.getEach("id");c=a.sort().join("-")}return c},userDefaults:SC.UserDefaults.create({appDomain:"Cv"}),Logger:SC.mixin(SC.Logger,{postBack:function(m){var k=[];
var l=-1;try{l=Cv.userController.get("id")}catch(j){k.push("user_id")}var c=-1;try{c=Cv.paperController.get("id")
}catch(j){k.push("paper_id")}var i=-1;try{i=Cv.assignmentController.get("id")}catch(j){k.push("assignment_id")
}var b=document.location.href?document.location.href:"undefined";var a=window.navigator.userAgent;
var g="n/a";try{g=Ip.stackTrace();g.shift();if(g.length==1&&g[0].indexOf("uncaughtExceptionvalue")===0){g="uncaught exception handled in index.rhtml"
}else{if(Array.map!==undefined){g=g.map(function(e){return e.replace(/\s+/g," ")})
}g=g.join("\n\n")}}catch(j){k.push("stack_trace")}var f={errors:k,url:b,ua:a,user_id:l,is_student:Cv.get("inStudentMode"),paper_id:c,assignment_id:i,stack_trace:g,msg:m};
var h=Ip.LocalizedUrl.prepareUrl(["/error/log"]);Ip.TransientRequest.executeTransientPut(h,f,{successCallback:function(){},failureCallback:function(){}})
}})});sc_require("core");Cv.mixin({excludeERaterMark:function(b){b.set("isExcluded",YES);
b.commitRecord();var a=b.getPath("read.readMarksInfo");a.didExcludeMark(b)},restoreAllERaterMarks:function(a){if(!a||!a.get("isERaterRead")){return
}var c=SC.Query.local(Cv.ERaterMark,{conditions:"read = {read} AND isExcluded = YES",read:a});
var e=Cv.store.find(c);e.setEach("isExcluded",NO);var b=a.get("readMarksInfo");b.didRestoreAllMarks();
this._sendRestoreAllERaterMarksRequest(a)},_sendRestoreAllERaterMarksRequest:function(c){var b=c.getPath("paper.id");
var e="paper/%@/restore_all_erater_marks".fmt(b);e=Ip.LocalizedUrl.prepareUrl(e);
var a=this;Ip.TransientRequest.executeTransientGet(e,{usePalladiumHeader:1})},_sendGetERaterReadMarksInfoRequest:function(b){var f=b.get("paper");
var a="/paper/%@/erater_marks_info".fmt(f.get("id"));var c=SC.Query.local(Cv.ERaterReadMarksInfo,{conditions:"paper = {_paper}",_paper:f,url:a});
var e=Cv.store.find(c)},setERaterReadFilters:function(o,n){if(!o){return}var l=o.get("filters");
var i=l.get("sections").toArray();var m=i.filter(function(q){var p=(n.indexOf(q)!==-1);
return !p});var h=n.filter(function(q){var p=(i.indexOf(q)!==-1);return !p});if(m.get("length")>0){var j=SC.Query.local(Cv.ERaterMark,{conditions:"read = {read} AND isHidden = YES AND section ANY {sections}",read:o,sections:m});
var a=Cv.store.find(j);a.setEach("isHidden",NO);a.destroy()}if(h.get("length")>0){var g=SC.Query.local(Cv.ERaterMark,{conditions:"read = {read} AND isHidden = NO AND section ANY {sections}",read:o,sections:h});
var f=Cv.store.find(g);f.setEach("isHidden",YES);f.destroy()}var e=NO;if(n.get("length")!==i.get("length")){e=YES
}else{var c=n.getEach("id").sort();var k=i.getEach("id").sort();e=!!c.find(function(s,q){var p=k[q];
return(s!==p)})}if(e){l.set("sections",n);l.commitRecord();var b=o.get("readMarksInfo");
b.didChangeFilters()}}});sc_require("core");Cv.mixin({createMarkCriterionRecordArray:function(b,c){var e=SC.Query.local("Cv.MarkCriterion",{conditions:"read ANY {reads} AND criterion = {criterion}",reads:b.toArray(),criterion:c});
var a=Cv.store.find(e);return a},createReadsMarkCriterionRecordArray:function(b,c){var e=SC.Query.local("Cv.MarkCriterion",{conditions:"read ANY {reads} AND criterion ANY {criteria}",reads:b.toArray(),criteria:c.get("criteria").toArray()});
var a=Cv.store.find(e);return a},getOrCreateMarkCriterion:function(f,c){var e;var b=f.get("markCriteria");
e=this.findMarkCriterionFromMarkCriteriaArray(b,f,c);if(e){return e}var a={mark:f.get("id"),read:f.getPath("read.id"),criterion:c.get("id")};
e=Cv.store.createRecord(Cv.MarkCriterion,a);if(typeof f.get("id")==="undefined"){e.set("mark",f)
}e.commitRecordWhenReady();return e},removeMarkCriterion:function(e,b){var c;var a=e.get("markCriteria");
c=this.findMarkCriterionFromMarkCriteriaArray(a,e,b);if(c){c.destroy();c.commitRecordWhenReady();
return YES}else{return NO}},findMarkCriterionFromMarkCriteriaArray:function(a,c,b){if(!a||a.get("length")===0){return
}return a.find(function(g){var e=g.getPath("criterion.id")===b.get("id");var f=g.getPath("mark.id")===c.get("id");
return e&&f})}});Cv.CriterionReadMarksDelegate={isCriterionReadMarksDelegate:YES,criterion:null,read:null,markCriteria:null,marks:null,markCriteriaLength:0,_markCriteriaRead:null,_markCriteriaCriterion:null,initMixin:function(){this._updateMarkCriteriaIfNeeded()
},destroyMixin:function(){this._destroyMarkCriteria()},_destroyMarkCriteria:function(){var a=this.get("markCriteria");
a.destroy();this.set("markCriteria",null)},_updateMarkCriteria:function(){var c=this.get("read");
var b=this.get("criterion");var a=this.get("markCriteria");if(a){if(c!=this._markCriteriaRead||b!=this._markCriteriaCriterion){a.destroy();
a=null}else{return}}if(!c||!b){this.set("markCriteria",null);this._markCriteriaRead=null;
this._markCriteriaCriterion=null;return}a=Cv.createMarkCriterionRecordArray([c],b);
this._markCriteriaRead=c;this._markCriteriaCriterion=b;this.set("markCriteria",a)
},_updateMarkCriteriaIfNeeded:function(){this.invokeOnce(this._updateMarkCriteria)
}.observes("criterion","read"),_prevMarkCriteria:null,_markCriteriaDidChange:function(){var a=this.get("markCriteria");
if(this._prevMarkCriteria==a){return}if(this._prevMarkCriteria){this._prevMarkCriteria.removeObserver("[]",this,this._markCriteriaLengthDidChange);
this._prevMarkCriteria=null}if(a){a.addObserver("[]",this,this._markCriteriaLengthDidChange);
this._prevMarkCriteria=a;this.invokeOnce(this._markCriteriaLengthDidChange)}}.observes("markCriteria"),_markCriteriaLengthDidChange:function(){this.invokeOnce(this._updateMarks);
this.invokeOnce(this._updateMarkCriteriaLength)},_updateMarks:function(){var a=this.get("markCriteria");
if(!a){this.set("marks",null);return}var b=a.getEach("mark").uniq();b=b.sortProperty("y","x","id");
this.set("marks",b)},_updateMarkCriteriaLength:function(){var a=this.get("markCriteria")||[];
this.set("markCriteriaLength",a.get("length"))}};Cv.GA={CATEGORY_PAPER_NAV:"dv paper navigation",CATEGORY_ASSIGNMENT_NAV:"dv assignment navigation",CATEGORY_OR_GLIMPSE:"or glimpse",CATEGORY_QM:"quickmark",CATEGORY_RUBRIC:"rubric",CATEGORY_OR:"originality",CATEGORY_GM:"grademark",CATEGORY_PM:"peermark",ACTION_PREVIOUS:"prev",ACTION_NEXT:"next",ACTION_OPENED:"opened",ACTION_MOVED:"moved",ACTION_EXPANDED:"expanded",ACTION_COLLAPSED:"collapsed",ACTION_SCORED:"scored",ACTION_SHOWN:"shown",ACTION_HIDDEN:"hidden",ACTION_ACTIVATED:"activated",ACTION_DEACTIVATED:"deactivated",ACTION_MENU_SELECTED:"selected from menu",session_uuid:false,session_start_ts:false,setSessionUUID:function(a){this.session_uuid=a
},getSessionUUID:function(){if(!this.session_uuid){var a=Ip.getQueryStringParameter("u")||3817992;
this.session_uuid=a+"."+this.session_start_ts}return this.session_uuid}};Cv.Highlightable={isHighlightable:YES,glyphAddress1:null,glyphAddress2:null,color:"",label:"",paper:null,startPage:function(){var c=null;
var a=this.get("startGlyphAddress");var e=this.get("paper");if(a&&e){var b=a.page;
c=e.get("pages").objectAt(b)}return c}.property("paper","startGlyphAddress").cacheable(),endPage:function(){var c=null;
var a=this.get("endGlyphAddress");var e=this.get("paper");if(a&&e){var b=a.page;c=e.get("pages").objectAt(b)
}return c}.property("paper","endGlyphAddress").cacheable(),startGlyphPage:function(){var a=this.getPath("startPage.glyphPage");
return a}.property("startPage").cacheable(),endGlyphPage:function(){var a=this.getPath("endPage.glyphPage");
return a}.property("endPage").cacheable(),startGlyphAddress:function(){var a=null;
var c=this.get("glyphAddress1");var b=this.get("glyphAddress2");if(c&&b){if(Cv.Glyph.compareAddress(c,b)<=0){a=c
}else{a=b}}return a}.property("glyphAddress1","glyphAddress2").cacheable(),endGlyphAddress:function(){var a=null;
var b=this.get("startGlyphAddress");if(b){var e=this.get("glyphAddress1");var c=this.get("glyphAddress2");
if(b===e){a=c}else{a=e}}return a}.property("startGlyphAddress").cacheable(),startGlyph:function(){var e=this.get("startGlyphAddress");
var f=this.get("startGlyphPage");if(!e||!f){return null}var a=e.page;var g=e.line;
var c=e.glyph;var b=f.getGlyph(g,c);return b}.property("startGlyphAddress","startGlyphPage").cacheable(),endGlyph:function(){var b=this.get("endGlyphAddress");
var e=this.get("endGlyphPage");if(!b||!e){return null}var a=b.page;var f=b.line;var c=b.glyph;
var g=e.getGlyph(f,c);return g}.property("endGlyphAddress","endGlyphPage").cacheable(),startGlyphLine:function(){var c=this.get("startGlyphAddress");
var e=this.get("startGlyphPage");if(!c||!e){return null}var b=c.page;var f=c.line;
var a=e.getLine(f);return a}.property("startGlyphAddress","startGlyphPage").cacheable(),endGlyphLine:function(){var b=this.get("endGlyphAddress");
var e=this.get("endGlyphPage");if(!b||!e){return null}var a=b.page;var f=b.line;var c=e.getLine(f);
return c}.property("endGlyphAddress","endGlyphPage").cacheable(),isOnPage:function(a){var b=NO;
var c=this.get("startGlyphAddress").page;var e=this.get("endGlyphAddress").page;if((c<=a)&&(a<=e)){b=YES
}return b},startsOnPage:function(a){var b=NO;var c=this.get("startGlyphAddress").page;
if(c===a){b=YES}return b},endsOnPage:function(b){var a=NO;var c=this.get("endGlyphAddress").page;
if(c===b){a=YES}return a}};Cv.Mark=SC.Record.extend(Ip.RecoverableRecord,{isExpanded:NO,isEditing:null,viewClass:null,markListViewClass:null,editText:null,quickMarkTemplateName:null,quickMarkTemplateSet:null,cantUndo:NO,isEditable:function(){var a=arguments.callee.base.apply(this,arguments);
return a&&!Cv.get("inStudentMode")}.property().cacheable(),primaryKey:"id",read:SC.Record.toOne("Cv.Read"),pageNumber:SC.Record.attr(Number,{key:"page"}),pageIndex:function(b,c){var a=this.get("pageNumber");
if(c!==undefined){a=c+1;this.set("pageNumber",a)}c=(a-1);return c}.property("pageNumber").cacheable(),x:SC.Record.attr(Number,{key:"position_x"}),y:SC.Record.attr(Number,{key:"position_y"}),isEmphasized:NO,text:SC.Record.attr(String,{key:"comment"}),markCriteria:SC.Record.toMany("Cv.MarkCriterion",{key:"mark_criteria"}),width:250,guid:function(){var a=SC.guidFor(this);
return a}.property().cacheable(),highlight:SC.Record.toOne("Cv.GlyphHighlight",{key:"highlight"}),gm3Highlights:SC.Record.toMany("Cv.Gm3Highlight",{inverse:"mark",key:"gm3_highlights"}),isExcluded:SC.Record.attr(Boolean,{defaultValue:NO,key:"excluded"}),isHidden:SC.Record.attr(Boolean,{defaultValue:NO,key:"hidden"}),deleteMarkAndSubObjects:function(){var b=this.get("highlight"),a=this.get("markCriteria");
var e=this.get("gm3Highlights")||[];e.forEach(function(h){h.set("associatedMarkDestroyed",YES)
});var c=NO;if(b){c=YES;var g=b.undoPackage();this.set("highlightUndo",g);b.addObserver("status",this,this._tryToDeleteRecord);
b.destroy();b.commitRecordWhenReady()}if(a.get("length")>0){c=YES;var f=[];a.forEach(function(h){f.push(h.undoPackage())
});this.set("markCriteriaUndos",f);a.forEach(function(h){h.addObserver("status",this,this._tryToDeleteRecord)
},this);a.forEach(function(h){h.destroy();h.commitRecordWhenReady()})}this._tryToDeleteRecord()
},_isReadyToDeleteRecord:function(){var b=this.get("highlight"),a=this.get("markCriteria");
if(b){if(b.get("status")!==SC.Record.DESTROYED_CLEAN){return NO}else{b.removeObserver("status",this,this._tryToDeleteRecord);
this.set("highlight",null)}}if(a.get("length")>0){var c=a.every(function(e){return(e.get("status")===SC.Record.DESTROYED_CLEAN)
});if(!c){return NO}else{a.forEach(function(e){e.removeObserver("status",this,this._tryToDeleteRecord)
},this);a.removeObjects(a.toArray())}}return YES},_tryToDeleteRecord:function(){if(this._isReadyToDeleteRecord()){this.destroy();
this.commitRecord()}},markCriteriaBusy:function(){return[]}.property().cacheable(),markCriteriaBusyResolveObserver:function(){var a=this.get("markCriteriaBusy");
if(a.get("length")>0){var b=a.some(function(c){return c.get("status")>=SC.Record.BUSY
});if(b){this.addObserver("markCriteriaBusy.length",this,this._clearDeadMarkCriteria)
}}}.observes("*markCriteriaBusy.[]"),_clearDeadMarkCriteria:function(){if((this.get("status")>=SC.Record.DESTROYED)&&(this.get("status")<SC.Record.BUSY)){this.removeObserver("markCriteriaBusy.length",this,this.clearDeadMarkCriteria);
return}else{if(this.get("status")>=SC.Record.BUSY){return}}var a=this.get("markCriteriaBusy");
if(a.get("length")===0){var c=a.every(function(e){return[SC.Record.READY_CLEAN,SC.Record.DESTROYED_CLEAN].indexOf(e.get("status"))>-1
});if(c){var b=this.getPath("markCriteria").filter(function(e){return !e.get("isDestroyed")
});this.set("markCriteria",b);this.removeObserver("markCriteriaBusy.length",this,this._clearDeadMarkCriteria);
this.set("markCriteriaBusy",[])}}},undoPackage:function(){var c=this.get("attributes"),b=this.get("highlightUndo"),a=this.get("markCriteriaUndos");
if(b){c.highlight=b}if(a){c.markCriteria=a}delete c.id;return c},initials:function(){return this.getPath("read.initials")
}.property("read").cacheable(),_isExcludedDidChange:function(){var b=this.get("highlight");
if(b){var a=this.get("isExcluded");var c=this.get("isHidden");var e=(a||c);var f=b.get("isHidden");
if(e!==f){b.set("isHidden",e)}}}.observes("isExcluded","isHidden")});sc_require("models/mark");
Cv.Comment=Cv.Mark.extend({isMoreOptionsViewsVisible:null,viewClass:"Cv.CommentView",markListViewClass:"Cv.MarkListCommentView"});
Cv.Comment.TEXT_MAX_LENGTH=2500;Cv.Comment.MARK_NAME="Comment";Cv.Comment.mixin({resourceName:"comment",responseKey:"Comment"});
sc_require("models/mark");Cv.QuickMark=Cv.Mark.extend({quickMarkTemplateName:null,quickMarkTemplateSet:null,width:SC.Record.attr(Number,{key:"width"}),height:SC.Record.attr(Number,{key:"height"}),template:SC.Record.toOne(function(){return(this.readAttribute("use_template")===YES)?"Qm.QuickMarkTemplate":"Qm.QuickMarkTemplateStub"
},{key:"qm_template"}),viewClass:function(){if(this.get("width")||this.get("height")){return"Cv.ResizableQuickMarkView"
}else{return"Cv.QuickMarkView"}}.property().cacheable(),markListViewClass:"Cv.MarkListQuickMarkView",commitRecordWhenReady:function(){var a=this.get("template");
if(a&&!a.get("id")){a.addObserver("id",this,this._commitRecord)}else{this._commitRecord()
}},_commitRecord:function(){var a=this.get("template");if(a.get("id")){this.writeAttribute("qm_template",a.get("id"));
this.commitRecord();a.removeObserver("id",this,this.commitRecord)}}});Cv.QuickMark.TEXT_MAX_LENGTH=2500;
Cv.QuickMark.MARK_NAME="Comment";Cv.QuickMark.mixin({resourceName:"quickmark",responseKey:"Quickmark"});
sc_require("models/mark");Cv.InlineComment=Cv.Mark.extend({viewClass:"Cv.InlineCommentView",markListViewClass:"Cv.MarkListInlineCommentView"});
Cv.InlineComment.MARK_NAME="Comment";Cv.InlineComment.mixin({resourceName:"inlinecomment",responseKey:"InlineComment"});
sc_require("models/mark");Cv.Strikethrough=Cv.Mark.extend({viewClass:"Cv.StrikethroughView",markListViewClass:"Cv.MarkListStrikethroughView",isHoveringHighlight:NO});
Cv.Strikethrough.MARK_NAME="Strikethrough";Cv.Strikethrough.mixin({resourceName:"strikethrough",responseKey:"Strikethrough"});
sc_require("models/mark");sc_require("models/comment");sc_require("models/quick_mark");
sc_require("models/inline_comment");sc_require("models/strikethrough");Cv.MarkSet={reads:null,_readsLength:-1,_pageMarkSetsCache:null,_recordArrayCache:null,loadedPageCount:0,_pageIsLoadedArray:null,lazyLoadedReads:function(){var b=[];
var a=this.get("reads");if(a){b=a.filterProperty("isLazyLoadingMarks",YES)}return b
}.property("reads","_readsLength").cacheable(),areAllReadsLoaded:function(){var b=NO;
var a=this.get("reads");if(a){var c=a.filter(function(f){var e=f.get("isLoaded");
return !e});b=!(c.get("length"))}return b},isPageLoaded:function(a){var e=NO;var c=this.getPath("reads.length");
if(c===0){e=YES}else{var b=this._getPageIsLoadedArray();e=!!b[a]}return e},loadPageMarks:function(a){var b=this.isPageLoaded(a);
if(!b){var c=this.get("lazyLoadedReads");c.forEach(function(e){var f=e.get("readMarksLazyLoader");
f.loadPageMarks(a)})}},_resetPageIsLoadedArray:function(){this._pageIsLoadedArray=[];
this.set("loadedPageCount",0)},_getPageIsLoadedArray:function(){this._pageIsLoadedArray=this._pageIsLoadedArray||[];
return this._pageIsLoadedArray},_updatePageIsLoadedArray:function(){if(this.areAllReadsLoaded()){var g=this.get("lazyLoadedReads");
var b=0;var c=this._getPageIsLoadedArray();var e=this.getPath("reads.firstObject.paper.pageCount");
for(var a=0;a<e;a++){var f=!!g.find(function(i){var h=i.get("readMarksLazyLoader");
return !h.isPageLoaded(a)});if(!f){c[a]=YES;b++}else{c[a]=NO}}this.set("loadedPageCount",b)
}else{this._resetPageIsLoadedArray()}},_updatePageIsLoadedArrayLast:function(){this.invokeLast(this._updatePageIsLoadedArray)
},marks:function(){var a=this.get("reads");var b=Cv.getMarksRecordArray("Cv.Mark",a)||[];
return b}.property("reads","_readsLength").cacheable(),comments:function(){var a=this.get("reads");
var b=Cv.getMarksRecordArray("Cv.Comment",a)||[];return b}.property("reads","_readsLength").cacheable(),quickMarks:function(){var a=this.get("reads");
var b=Cv.getMarksRecordArray("Cv.QuickMark",a)||[];return b}.property("reads","_readsLength").cacheable(),inlineComments:function(){var a=this.get("reads");
var b=Cv.getMarksRecordArray("Cv.InlineComment",a);return b}.property("reads","_readsLength").cacheable(),strikethroughs:function(){var b=this.get("reads");
var a=Cv.getMarksRecordArray("Cv.Strikethrough",b);return a}.property("reads","_readsLength").cacheable(),pageMarkSet:function(a){var b=this._pageMarkSets();
var c=b[a];if(!c){c=Cv.PageMarkSet.create({reads:this.get("reads").toArray(),pageIndex:a});
b[a]=c}return c},_pageMarkSets:function(){var b=null;var a=this.get("reads");var c=Cv.readsIdString(a)||"empty";
if(!this._pageMarkSetsCache){this._pageMarkSetsCache={}}b=this._pageMarkSetsCache[c];
if(!b){b=[];this._pageMarkSetsCache[c]=b}return b},pageVisibleMarkCount:function(b){var a=this.get("marks").filterProperty("pageIndex",b);
var c=a.get("length");if(!this.isPageLoaded(b)){var e=this.get("lazyLoadedReads");
e.forEach(function(h){var f=h.get("readMarksLazyLoader");if(!f.isPageLoaded(b)){var g=h.get("readMarksInfo");
c+=g.getPageVisibleMarkCount(b)}})}return c},_readsDidChange:function(){var a=this.get("reads");
if(this._readsLengthBinding){this._readsLengthBinding.disconnect();this._readsLengthBinding=null;
this._readsLength=-1}if(this.get("reads")){this._readsLengthBinding=this.bind("_readsLength",SC.Binding.oneWay(".reads.length"))
}}.observes("reads"),_readsLengthDidChange:function(){var a=this.get("reads")||[];
var b=this._prevReads||[];b.forEach(function(c){if(a.indexOf(c)===-1){c.removeObserver("isLoaded",this,"_readIsLoadedDidChange");
if(c.get("isLazyLoadingMarks")){var e=c.get("readMarksLazyLoader");e.removeObserver("loadedPageCount",this,"_readMarkLoaderloadedPageCountDidChange")
}}},this);if(a){a.forEach(function(c){if(b.indexOf(c)===-1){c.addObserver("isLoaded",this,"_readIsLoadedDidChange");
if(c.get("isLazyLoadingMarks")){var e=c.get("readMarksLazyLoader");e.addObserver("loadedPageCount",this,"_readMarkLoaderloadedPageCountDidChange")
}}},this);this._prevReads=a.toArray()}else{this._prevReads=null}this._resetPageIsLoadedArray();
this.invokeOnce(this._updatePageIsLoadedArrayLast)}.observes("_readsLength"),_readIsLoadedDidChange:function(){this.invokeOnce(this._updatePageIsLoadedArrayLast)
},_readMarkLoaderloadedPageCountDidChange:function(){this.invokeOnce(this._updatePageIsLoadedArrayLast)
}};Cv.MatchGroup={isLoaded:NO,paper:null,id:-1,paperReviewed:-1,translateLanguage:-1,primarySourceGroupDocId:-1,primarySourceGroupNodeId:-1,matchSegments:null,groupNode:null,sourceTreeNode:null,source:null,percent:null,sourceIsLoaded:NO,sourceIsLoadedBinding:".source.isLoaded",sourceIsLoadedBindingDefault:SC.Binding.oneWay(),instanceMode:NO,hasGlimpses:YES,_getGlimpses:function(){var h=null;
if(this.get("isLoaded")){h=this.get("_glimpses");if(!h){var g=this.get("instanceMode");
var c;if(g){c=this.getPath("source.glimpses")}else{var f=this.get("source");var e=f.get("id");
var i=f.get("node");var b=this.get("sourceTreeNode");c=b.getSourceGlimpses(e,i)}if(c){c.addObserver("status",this,"sourceGlimpsesStatusDidChange");
var a=SC.Query.local(Cv.OriginalityGlimpse,{conditions:"id = '%@'".fmt(this.get("id"))});
h=c.find(a);h.addObserver("status",this,"glimpsesStatusDidChange");this.set("_glimpses",h)
}}}return h},sourceGlimpsesStatusDidChange:function(e,b){var a=e.get(b);if(a&SC.Record.ERROR){this.set("glimpseHasLoadingError",YES)
}else{var c=this.getPath("_glimpses.length");if(c===0){this.set("glimpseHasLoadingError",YES)
}}},glimpsesStatusDidChange:function(c,b){var a=c.get(b);if(a&SC.Record.ERROR){this.set("glimpseHasLoadingError",YES)
}},_glimpses:null,glimpse:function(a,b){if(b===undefined){var c=this._getGlimpses();
if(c){b=c.firstObject()}}return b}.property("_glimpses").cacheable(),glimpseHasLoadingError:NO,_computeGlimpse:function(){var a=null;
var b=this.getPath("_glimpses.length");if(b>0){a=this.getPath("_glimpses.firstObject")
}this.set("glimpse",a)}.observes("*_glimpses.length"),_convertMatchSegments:function(){var b=this.get("matchSegments")||[];
var a=b.length;var c=b.map(function(e,g){var h=(g===0);var i=(g===(a-1));var f=Cv.OriginalityMatch.create({paper:this.get("paper"),isFirstMatchSegment:h,isLastMatchSegment:i,groupNode:this.get("groupNode"),sourceTreeNode:this.get("sourceTreeNode"),source:this.get("source"),matchGroup:this,glyphAddress1:e.startGlyph,glyphAddress2:e.endGlyph});
return f},this);this.set("matchSegments",c)},setContext:function(f,b,a,e){this.set("paper",f);
this.set("groupNode",b);this.set("sourceTreeNode",a);this.set("source",e);var c=this.get("matchSegments");
c.forEach(function(g){g.set("paper",f);g.set("groupNode",b);g.set("sourceTreeNode",a);
g.set("source",e)},this)},_sourceIsLoaded:function(){var a=this.get("sourceIsLoaded");
this.set("isLoaded",a)}.observes("sourceIsLoaded")};Cv.PaperImageLoader={pageImageLoadingPaper:null,currentPaper:null,previousPaper:null,nextPaper:null,computePageImageLoadingPaper:function(){var a;
if(this.get("currentPaper")&&!this.getPath("currentPaper.pageImagesIsLoaded")){a=this.get("currentPaper")
}else{if(this.get("nextPaper")&&!this.getPath("nextPaper.pageImagesIsLoaded")){a=this.get("nextPaper")
}else{if(this.get("previousPaper")&&!this.getPath("previousPaper.pageImagesIsLoaded")){a=this.get("previousPaper")
}}}var b=this.get("pageImageLoadingPaper");if(b&&(b!==a)){b.stopLoadingPageImages()
}this.set("pageImageLoadingPaper",a)}.observes(".currentPaper","*pageImageLoadingPaper.pageImagesIsLoaded"),loadPageImagesInBackground:function(){var b=this.get("pageImageLoadingPaper");
if(b){var a=(b===this.get("currentPaper"));b.startLoadingPageImagesIfNeeded(a)}}.observes("pageImageLoadingPaper")};
Cv.ReadMarkCriteriaDelegate={isReadMarkCriteriaDelegate:YES,read:null,rubric:null,markCriteria:null,_markCriteriaRead:null,_markCriteriaRubric:null,initMixin:function(){this._updateMarkCriteriaIfNeeded()
},destroyMixin:function(){this._destroyMarkCriteria()},_destroyMarkCriteria:function(){var a=this.get("markCriteria");
a.destroy();this.set("markCriteria",null)},_observingRead:null,_readDidChange:function(){var a=this.get("read");
if(this._observingRead){if(a!==this._observingRead){this._observingRead.removeObserver("status",this,this._readStatusDidChange);
this._observingRead=null}else{return}}if(a){if(a.get("status")&SC.Record.READY){this.invokeOnce(this._updateMarkCriteria)
}else{this._observingRead=a;this._observingRead.addObserver("status",this,this._readStatusDidChange)
}}}.observes("read"),_readStatusDidChange:function(){var a=this.getPath("read.status");
if(a&SC.Record.READY){this._observingRead.removeObserver("status",this,this._readStatusDidChange);
this._observingRead=null;this.invokeOnce(this._updateMarkCriteria)}},_observingRubric:null,_rubricDidChange:function(){var a=this.get("rubric");
if(this._observingRubric){if(a!==this._observingRubric){this._observingRubric.removeObserver("status",this,this._rubricStatusDidChange);
this._observingRubric=null}else{return}}if(a){if(a.get("status")&SC.Record.READY){this.invokeOnce(this._updateMarkCriteria)
}else{this._observingRubric=a;this._observingRubric.addObserver("status",this,this._rubricStatusDidChange)
}}}.observes("rubric"),_rubricStatusDidChange:function(){var a=this.getPath("rubric.status");
if(a&SC.Record.READY){this._observingRubric.removeObserver("status",this,this._rubricStatusDidChange);
this._observingRubric=null;this.invokeOnce(this._updateMarkCriteria)}},_updateMarkCriteria:function(){var c=this.get("read");
var b=this.get("rubric");if(!c||!(c.get("status")&SC.Record.READY)||!b||!(b.get("status")&SC.Record.READY)){return
}var a=this.get("markCriteria");if(a){if(c!=this._markCriteriaRead||b!=this._markCriteriaRubric){a.destroy();
a=null}else{return}}if(!c||!b){this.set("markCriteria",null);this._markCriteriaRead=null;
this._markCriteriaRubric=null;return}a=Cv.createReadsMarkCriterionRecordArray([c],b);
this._markCriteriaRead=c;this._markCriteriaRubric=b;this.set("markCriteria",a)},_updateMarkCriteriaIfNeeded:function(){this.invokeOnce(this._updateMarkCriteria)
}.observes("read","rubric")};Cv.Assignment=SC.Record.extend({primaryKey:"id",assignmentType:SC.Record.attr(Number,{key:"assignment_type"}),assignmentNumber:SC.Record.attr(Number,{key:"assignment_number"}),firstPeerMarkId:SC.Record.attr(String,{key:"first_pm"}),title:SC.Record.attr(String,{key:"title"}),maxPoints:SC.Record.attr(Number,{key:"max_points"}),startDate:SC.Record.attr(SC.DateTime,{key:"date_start_local"}),dueDate:SC.Record.attr(SC.DateTime,{key:"date_due_local",defaultValue:new SC.DateTime}),postDate:SC.Record.attr(SC.DateTime,{key:"date_post_local"}),"class":SC.Record.toOne("Cv.Class",{inverse:"assignments",key:"class"}),papers:SC.Record.toMany("Cv.Paper",{inverse:"assignment",key:"papers"}),studentsCanViewReports:SC.Record.attr(Boolean,{key:"s_view_reports",isReadOnly:YES}),anonymousMarkingIsActive:SC.Record.attr(Boolean,{key:"anonymous_marking_active"}),paperStubs:function(){if(!this._paperStubsQuery){var a=Cv.paperController.get("id");
this._paperStubsQuery=SC.Query.local(Cv.PaperStub,{conditions:"assignment = {assignment}",assignment:this,url:"/assignment/%@/papers?o=%@".fmt(this.get("id"),a)})
}return Cv.store.find(this._paperStubsQuery)}.property().cacheable(),nonEnrolledStudentPapers:SC.Record.toMany("Cv.Paper",{inverse:"assignment",key:"non_enrolled_student_papers_"}),applicableServices:SC.Record.attr(Object,{key:"applicable_services"}),rubric:SC.Record.toOne("Rb.Rubric",{key:"rubric"}),students:function(){var b=this.getPath("class.activeStudents")||[];
var a=this.get("nonEnrolledStudentPapers").getEach("author");var c=[];b.forEach(function(e){c.push(e)
});return c}.property(".class.activeStudents.[]","nonEnrolledStudentPapers").cacheable(),listingDisplay:function(){var a="__ipDefaultFullDateFormat".loc();
return"_%@ - DUE %@".loc(this.get("title"),this.get("dueDate").toFormattedString(a))
}.property("title","dueDate").cacheable(),paperCount:SC.Record.attr(Number,{key:"paper_count"}),overPaperSizeLimit:SC.Record.attr(Boolean,{key:"over_limit"}),eRaterHandbookId:SC.Record.attr(String,{key:"erater_handbook"}),eRaterHandbook:null,eRaterHandbookIsLoading:NO,isAssignmentInfoLocked:SC.Record.attr(Boolean,{key:"info_locked_from_master_class",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}},defaultValue:NO})});Cv.Assignment.mixin({resourceName:"assignment",responseKey:"Assignment"});
Cv.Class=SC.Record.extend({primaryKey:"id",title:SC.Record.attr(String,{key:"title"}),assignments:function(){var a=null;
var b=SC.Query.local(Cv.Assignment,{conditions:"class = {classObj}",classObj:this});
a=Cv.store.find(b);return a}.property().cacheable(),paperSubmissionAssignments:function(){return this.get("assignments").find(SC.Query.local(Cv.Assignment,{conditions:"assignmentType = 1 OR assignmentType = 4 OR assignmentType = 3"}))
}.property("assignments").cacheable(),activeStudents:SC.Record.toMany("Cv.Student",{inverse:"class",key:"students"}),isMasterClass:SC.Record.attr(Boolean,{key:"is_master_class",defaultValue:NO}),productStatus:SC.Record.attr(Object,{key:"product_status"}),gradebookProductIsActive:function(){if(this.get("product_status")){return this.get("product_status")[4]===0
}}.property("product_status").cacheable(),peerMarkProductIsActive:function(){if(this.get("product_status")){return this.get("product_status")[2]===0
}}.property("product_status").cacheable(),isOverAssignmentLimit:SC.Record.attr(Boolean,{key:"over_assignment_limit",defaultValue:YES}),hidePaperNavigation:SC.Record.attr(Boolean,{key:"hide_gm_nav",defaultValue:NO}),canGenerateIPadAccessCode:SC.Record.attr(Boolean,{key:"can_generate_ipad_access_code",defaultValue:NO}),accountTimeFormat:SC.Record.attr(Number,{key:"account_time_format",defaultValue:1}),displayTimeIn24Hr:function(){return(this.get("accountTimeFormat")==2)?YES:NO
}.property().cacheable(),isInsite:SC.Record.attr(Boolean,{key:"is_insite",defaultValue:NO}),isReadonly:SC.Record.attr(Boolean,{key:"is_readonly"}),readonlyStatus:SC.Record.attr(Number,{key:"readonly_status",defaultValue:0}),isExpired:function(){var a=this.get("readonlyStatus");
var b=(a===Cv.READONLY_STATUS_CONSTANTS.READONLY_CLASS_EXPIRED);return b}.property("readonlyStatus").cacheable(),isNativeLocked:function(){var a=this.get("readonlyStatus");
var b=(a===Cv.READONLY_STATUS_CONSTANTS.READONLY_NATIVE_LOCKED);return b}.property("readonlyStatus").cacheable()});
Cv.Class.mixin({resourceName:"class",responseKey:"Class"});Cv.ERaterHandbook=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),name:SC.Record.attr(String),sections:SC.Record.toMany("Cv.ERaterSection"),sectionNames:function(){var b=this.get("sections");
var a=b.getEach("name");return a}.property("sections").cacheable(),traits:SC.Record.toMany("Cv.ERaterTrait")});
sc_require("mixins/highlightable");Cv.Highlight=SC.Record.extend(Cv.Highlightable,{primaryKey:"id",startLineIndex:SC.Record.attr(Number,{key:"start_line"}),startGlyphIndex:SC.Record.attr(Number,{key:"start_glyph"}),startPageIndex:SC.Record.attr(Number,{key:"start_page_index"}),readId:SC.Record.attr(Number,{key:"read"}),isEmphasized:NO,isHidden:SC.Record.attr(Boolean,{defaultValue:NO,key:"hidden",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}}}),glyphAddress1:function(){return{glyph:this.get("startGlyphIndex"),line:this.get("startLineIndex"),page:this.get("startPageIndex")}
}.property("startLineIndex startGlyphIndex startPageIndex".w()).cacheable(),glyphAddress2:function(){return{glyph:this.get("endGlyphIndex"),line:this.get("endLineIndex"),page:this.get("endPageIndex")}
}.property("endLineIndex endGlyphIndex endPageIndex".w()).cacheable(),endLineIndex:SC.Record.attr(Number,{key:"end_line"}),endGlyphIndex:SC.Record.attr(Number,{key:"end_glyph"}),endPageIndex:SC.Record.attr(Number,{key:"end_page_index"}),color:SC.Record.attr(Number,{key:"color",defaultValue:1}),label:"",paper:function(){return this.getPath("mark.read.paper")
}.property("mark").cacheable(),mark:function(b,c){if(!c&&this.readAttribute("mark")){c=Cv.store.find(SC.Query.local(Cv.Mark,{conditions:"id = {id}",id:this.readAttribute("mark")})).firstObject()
}if(c){c.set("highlight",this);c.writeAttribute("highlight",this.get("id"));var a=c.getPath("read.id");
this.set("readId",a)}return c}.property().cacheable(),startPage:function(){var b=null;
var c=this.get("paper");var a=this.get("startPageIndex");if(c&&(a||(a===0))){b=c.get("pages").objectAt(a)
}return b}.property("paper","startPageIndex").cacheable(),endPage:function(){var b=null;
var c=this.get("paper");var a=this.get("endPageIndex");if(c&&(a||(a===0))){b=c.get("pages").objectAt(a)
}return b}.property("paper","endPageIndex").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.markDidChange()},markIsExpanded:NO,markIsExpandedBindingDefault:SC.Binding.oneWay(),markIsEmphasized:NO,markIsEmphasizedBindingDefault:SC.Binding.oneWay(),markDidChange:function(){if(this.get("mark")&&!this.markIsExpandedBinding){this.markIsExpandedBinding=this.bind("markIsExpanded",".mark.isExpanded");
this.markIsEmphasizedBinding=this.bind("markIsEmphasized",".mark.isEmphasized")}}.observes("mark"),markIsEmphasizedDidChange:function(){var a=this.get("isEmphasized");
var b=this.get("markIsEmphasized");if(a!=b){this.set("isEmphasized",b)}}.observes("markIsEmphasized"),commitRecordWhenReady:function(){var a=this.get("mark");
if(a&&!a.get("id")){a.addObserver("id",this,this.commitRecord)}else{this.commitRecord()
}},commitRecord:function(){var a=this.get("mark");if(this.get("isDestroyed")){arguments.callee.base.apply(this,arguments)
}else{if(a.get("id")){this.writeAttribute("mark",a.get("id"));arguments.callee.base.apply(this,arguments);
a.removeObserver("id",this,this.commitRecord)}}},undoPackage:function(){var a=this.get("attributes");
delete a.id;return a},highlightLinkLineAttachmentPoint:Cv.HIGHLIGHT_ATTACHEMNT_BOTTOM,highlightLinkLineColor:null,highlightOverrideDefaultColor:function(){return SC.kindOf(this.get("mark"),Cv.Strikethrough)
}.property("mark").cacheable()});Cv.GlyphHighlight=Cv.Highlight.extend();Cv.Highlight.mixin({resourceName:"markup/glyphhighlight",responseKey:"GlyphHighlight"});
Cv.GlyphHighlight.mixin({resourceName:"markup/glyphhighlight",responseKey:"GlyphHighlight"});
Cv.Read=SC.Record.extend(Ip.RecoverableRecord,{primaryKey:"id",reader:SC.Record.toOne("Cv.User",{key:"reader"}),paper:SC.Record.toOne("Cv.Paper",{key:"source"}),generalComments:SC.Record.attr(String,{key:"summary"}),duration:SC.Record.attr(String,{key:"duration"}),lastSaved:SC.Record.attr(SC.DateTime,{key:"last_saved_local"}),rubricScoring:SC.Record.toOne("Cv.RubricScoring",{key:"rubric_scoring"}),readType:SC.Record.attr(Number,{key:"read_type"}),reviewerNameInitials:SC.Record.attr(String,{key:"initials"}),readerNumber:SC.Record.attr(Number,{key:"reader_num"}),voiceCommentFiletype:SC.Record.attr(Number,{key:"voice_comment_filetype",defaultValue:AudioTools.AUDIO_FILETYPE_MP3}),voiceCommentGetUrl:SC.Record.attr(String,{key:"voice_comment_get_url",transform:{to:function(a){return a?Ip.LocalizedUrl.prepareUrl(a.replace("dev4:3335","localhost:4020")+"&output=json"):null
}}}),voiceCommentDeleteUrl:SC.Record.attr(String,{key:"voice_comment_delete_url",transform:{to:function(a){return a?Ip.LocalizedUrl.prepareUrl(a.replace("dev4:3335","localhost:4020")+"&output=json"):null
}}}),voiceCommentPostUrl:SC.Record.attr(String,{key:"voice_comment_post_url",transform:{to:function(a){return a?Ip.LocalizedUrl.prepareUrl(a.replace("dev4:3335","localhost:4020")+"&output=json"):null
}}}),isHidden:SC.Record.attr(Boolean,{key:"hidden",defaultValue:function(a){if(a.get("isERaterRead")){value=YES
}else{value=NO}return value}}),isGradeMarkRead:function(){var a=this.get("readType");
var b=(a===Cv.Read.GRADEMARK_INSTRUCTOR_READ_TYPE);return b}.property("readType").cacheable(),isPeerMarkRead:function(){var a=this.get("readType");
var b=(a===Cv.Read.PEERMARK_READ_TYPE);return b}.property("readType").cacheable(),isERaterRead:function(){var b=this.get("readType");
var a=(b===Cv.Read.E_RATER_READ_TYPE);return a}.property("readType").cacheable(),initials:function(){if(this.get("readType")!==6){return null
}return SC.none(this.get("reviewerNameInitials"))?"_R%@".loc(this.get("readerNumber")):this.get("reviewerNameInitials")
}.property("reviewerNameInitials","readerNumber","readType").cacheable(),score:SC.Record.attr(Number,{key:"score"}),isLazyLoadingMarks:function(){var a=this.get("readMarksLazyLoader");
return !!a}.property("readMarksLazyLoader").cacheable(),readMarksLazyLoader:null,readMarksInfo:null});
Cv.Read.GENERAL_COMMENTS_MAX_LENGTH=5000;Cv.Read.GRADEMARK_INSTRUCTOR_READ_TYPE=1;
Cv.Read.PEERMARK_READ_TYPE=6;Cv.Read.E_RATER_READ_TYPE=7;if((typeof SC!=="undefined")&&SC&&SC.scriptDidLoad){SC.scriptDidLoad("cv")
}Cv.Read.mixin({resourceName:"read",responseKey:"Read"});Cv.RubricScoring=Rb.RubricScoring;
sc_require("models/read");Cv.ERaterRead=Cv.Read.extend({filters:SC.Record.toOne("Cv.ERaterReadFilters",{key:"id"}),readMarksLazyLoader:function(){var b=this.getPath("paper.id");
var e=0;var a=Cv.ERaterRead.MARK_LOADING_CHUNK_PAGE_COUNT;var c=Cv.ReadMarksLazyLoader.create({read:this,baseUrl:"/paper/%@/erater_marks".fmt(b),preloadedPageIndexes:SC.IndexSet.create(e,a),chunkPageCount:Cv.ERaterRead.MARK_LOADING_CHUNK_PAGE_COUNT});
return c}.property("paper").cacheable(),readMarksInfo:SC.Record.toOne("Cv.ERaterReadMarksInfo",{key:"id"}),isCorrupted:NO,highlightViewRenderDidFail:function(){this.set("isCorrupted",YES)
},isCorruptedDidChange:function(){var e=this.get("isCorrupted");var b=this.get("isHidden");
if(e&&!b){this.set("isHidden",YES);var a=this.getPath("paper.id");var c=Ip.PalladiumJSONRequest.getUrl("/paper/%@/erater_read_error?cv=1&lang=en_us&output=json".fmt(a));
c.send()}}.observes("isCorrupted")});Cv.ERaterRead.MARK_LOADING_CHUNK_PAGE_COUNT=3;
sc_require("models/mark");sc_require("models/e_rater_read");Cv.ERaterMark=Cv.Mark.extend({viewClass:"Cv.ERaterMarkView",markListViewClass:"Cv.MarkListERaterMarkView",read:SC.Record.toOne("Cv.ERaterRead"),feedback:SC.Record.attr(String),handbookPage:SC.Record.attr(String,{key:"html_page"}),name:SC.Record.attr(String),section:SC.Record.toOne("Cv.ERaterSection"),trait:SC.Record.toOne("Cv.ERaterTrait"),handbookUrl:function(){var c=null;
var f=this.getPath("section.urlDirectory");var b=this.get("handbookPage");if(f&&b){var a="%@/%@".fmt(f,b);
a=encodeURIComponent(a);var e=this.getPath("read.paper.assignment.eRaterHandbook.name");
c="/pd/static/build/handbook_viewer/viewer.html?hb=%@&c=%@".fmt(e,a)}return c}.property("handbookPage","section").cacheable()});
Cv.ERaterMark.TEXT_MAX_LENGTH=2500;Cv.ERaterMark.MARK_NAME="Comment";Cv.ERaterMark.mixin({resourceName:"eratermark",responseKey:"ERaterMark"});
sc_require("models/highlight");sc_require("models/e_rater_mark");Cv.ERaterHighlight=Cv.Highlight.extend({init:function(){arguments.callee.base.apply(this,arguments);
this.markDidChange()},mark:SC.Record.toOne(Cv.ERaterMark,{key:"mark",inverse:"highlight"}),markIsExcluded:NO,markIsExcludedBindingDefault:SC.Binding.oneWay(),markIsHidden:NO,markIsHiddenBindingDefault:SC.Binding.oneWay(),markDidChange:function(){arguments.callee.base.apply(this,arguments);
if(this.get("mark")&&!this.markIsExcludedBinding){this.markIsExcludedBinding=this.bind("markIsExcluded",".mark.isExcluded");
this.markIsHiddenBinding=this.bind("markIsHidden",".mark.isHidden")}}.observes("mark"),markVisibilityDidChange:function(){var b=this.get("markIsExcluded");
var c=this.get("markIsHidden");var a=(b||c);this.setIfChanged("isHidden",a)}.observes("markIsExcluded","markIsHidden"),highlightLinkLineAttachmentPoint:Cv.HIGHLIGHT_ATTACHEMNT_BOTTOM,highlightLinkLineColor:"#6C00CB",highlightOverrideDefaultColor:YES});
Cv.ERaterReadFilters=SC.Record.extend({primaryKey:"id",read:SC.Record.toOne("Cv.ERaterRead",{key:"id"}),sections:SC.Record.toMany("Cv.ERaterSection")});
Cv.ERaterReadFilters.mixin({resourceName:function(e){var b=e.id;var a=Cv.store.storeKeyFor(Cv.ERaterRead,b);
var c=Cv.store.readDataHash(a).source;var f="/paper/%@/erater_read_filters/%@".fmt(c,b);
return f},responseKey:"ERaterReadFilters"});Cv.ReadMarksInfo=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),read:SC.Record.toOne("Cv.Read",{key:"id"}),totalMarkCount:SC.Record.attr(Number,{key:"total"}),visibleMarkCount:SC.Record.attr(Number,{key:"visible"}),lastUpdatedTimestamp:SC.Record.attr(Number,{key:"time"}),_pages:SC.Record.attr(Object,{key:"pages"}),_getPageInfo:function(a){var b=this.get("_pages");
pageInfo=b[a+1];if(!pageInfo){pageInfo={};b[a+1]=pageInfo}return pageInfo},getPageTotalMarkCount:function(a){var c=this._getPageInfo(a);
var b=c.total||0;return b},_setPageTotalMarkCount:function(a,b){var c=this._getPageInfo(a);
c.total=b},getPageVisibleMarkCount:function(a){var b=this._getPageInfo(a);var c=b.visible||0;
return c},_setPageVisibleMarkCount:function(a,c){var b=this._getPageInfo(a);b.visible=c
},_updateTimestamp:function(){var a=Math.round(new Date().getTime()/1000);this.set("lastUpdatedTimestamp",a)
},_setStatusAsReadyClean:function(){var a=this.get("storeKey");Cv.store.writeStatus(a,SC.Record.READY_CLEAN);
Cv.store.dataHashDidChange(a,null,YES)}});sc_require("models/read_marks_info");Cv.ERaterReadMarksInfo=Cv.ReadMarksInfo.extend({read:SC.Record.toOne("Cv.ERaterRead",{key:"id"}),excludedMarkCount:SC.Record.attr(Number,{key:"excluded"}),_sections:SC.Record.attr(Object,{key:"sections"}),_traits:SC.Record.attr(Object,{key:"traits"}),_getSectionInfo:function(b){var a=this.get("_sections");
var c=a[b];if(!c){c={};a[b]=c}return c},_getSectionIds:function(){var a=[];var b=this.get("_sections");
for(var c in b){a.push(c)}return a},getSectionTotalMarkCount:function(a){var c=this._getSectionInfo(a);
var b=c.total||0;return b},_setSectionTotalMarkCount:function(a,c){var b=this._getSectionInfo(a);
b.total=c},getSectionExcludedMarkCount:function(a){var c=this._getSectionInfo(a);
var b=c.excluded||0;return b},_setSectionExcludedMarkCount:function(a,c){var b=this._getSectionInfo(a);
b.excluded=c},_zeroAllSectionExcludedMarkCount:function(){var a=this._getSectionIds();
a.forEach(function(f){var g=this._getSectionInfo(f);g.excluded=0;var e=g.pages;if(e){for(var b in e){var c=e[b];
if(c){c.excluded=0}}}},this)},getSectionNonexcludedMarkCount:function(b){var a=this.getSectionTotalMarkCount(b);
var e=this.getSectionExcludedMarkCount(b);var c=a-e;return c},_getSectionPageInfo:function(e,a){var f=this._getSectionInfo(e);
var c=f.pages;if(!c){c={};f.pages=c}var b=c[a+1];if(!b){b={};c[a+1]=b}return b},getSectionPageTotalMarkCount:function(e,a){var c=this._getSectionPageInfo(e,a);
var b=c.total||0;return b},getSectionPageExcludedMarkCount:function(c,a){var b=this._getSectionPageInfo(c,a);
var e=b.excluded||0;return e},getSectionPageNonexcludedMarkCount:function(c,a){var b=this.getSectionPageTotalMarkCount(c,a);
var f=this.getSectionPageExcludedMarkCount(c,a);var e=b-f;return e},_getTraitInfo:function(c){var b=this.get("_traits");
var a=b[c];if(!a){a={};b[c]=a}return a},_getTraitIds:function(){var b=[];var a=this.get("_traits");
for(var c in a){b.push(c)}return b},getTraitTotalMarkCount:function(c){var a=this._getTraitInfo(c);
var b=a.total||0;return b},_setTraitTotalMarkCount:function(c,b){var a=this._getTraitInfo(c);
a.total=b},getTraitExcludedMarkCount:function(c){var a=this._getTraitInfo(c);var b=a.excluded||0;
return b},_setTraitExcludedMarkCount:function(c,b){var a=this._getTraitInfo(c);a.excluded=b
},_zeroAllTraitExcludedMarkCount:function(){var a=this._getTraitIds();a.forEach(function(c){var b=this._getTraitInfo(c);
b.excluded=0},this)},getTraitNonexcludedMarkCount:function(e){var a=this.getTraitTotalMarkCount(e);
var c=this.getTraitExcludedMarkCount(e);var b=a-c;return b},didExcludeMark:function(f){if(!f||(f.get("read")!==this.get("read"))){return
}var a=f.getPath("section.id");var e=this.getSectionExcludedMarkCount(a)+1;this._setSectionExcludedMarkCount(a,e);
var c=f.getPath("trait.id");var b=this.getTraitExcludedMarkCount(c)+1;this._setTraitExcludedMarkCount(c,b);
this.incrementProperty("excludedMarkCount");this._setStatusAsReadyClean()},didRestoreAllMarks:function(){this.set("excludedMarkCount",0);
this._zeroAllSectionExcludedMarkCount();this._zeroAllTraitExcludedMarkCount();this._updatePageVisibleMarkCount();
this._setStatusAsReadyClean()},didChangeFilters:function(){this._updatePageVisibleMarkCount()
},_updatePageVisibleMarkCount:function(){var g=this.getPath("read.filters.sections").getEach("id");
var e=0;var f=this.getPath("read.paper.pageCount");for(var c=0;c<f;c++){var b=0;var a=this._getSectionIds();
a.forEach(function(j){j=parseInt(j);var i=(g.indexOf(j)!==-1);if(!i){var h=this.getSectionPageNonexcludedMarkCount(j,c);
e+=h;b+=h}},this);this._setPageVisibleMarkCount(c,b)}this.set("visibleMarkCount",e)
}});Cv.ERaterSection=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),etsName:SC.Record.attr(String,{key:"name"}),name:function(){var b=this.get("etsName");
var a=Cv.ERaterSection.SECTION_NAME[b];return a}.property("etsName").cacheable(),urlDirectory:function(){var b=this.get("etsName");
var a=Cv.ERaterSection.SECTION_DIRECTORY[b];return a}.property("etsName").cacheable()});
Cv.ERaterSection.mixin({SECTION_NAME:{Grammar:"_Grammar".loc(),Mechanics:"_Mechanics".loc(),OrgDev:"_Organization & Development".loc(),Style:"_Style".loc(),Usage:"_Usage".loc(),Spelling:"_Spelling".loc()},SECTION_DIRECTORY:{Grammar:"grammar",Mechanics:"mechanics",OrgDev:"Organization & Development",Style:"style",Usage:"usage",Spelling:"mechanics"}});
Cv.ERaterTrait=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),name:SC.Record.attr(String),handbook:SC.Record.toOne("Cv.ERaterHandbook"),section:SC.Record.toOne("Cv.ERaterSection")});
Cv.DPR_CONSTANTS={DPR_PRE:0,DPR_IN_PROCESS:1,DPR_SUCCESS:2,DPR_FAILED_A:3,DPR_FAILED_B:4,DPR_UNSUPPORTED_LANGUAGE:5,DPR_PRE_WITH_IMAGE_DIMENSIONS:6,DPR_IMAGE_FILE_SUBMISSION:7,DPR_ANY_SUBMISSION:8,DPR_NOTHING_SUBMISSION:9};
Cv.REPORT_LANGUAGE_CONSTANTS={NATIVE:0,ENGLISH:12};Cv.REPORT_TRANSLATION_ERROR_CODE={NONE:-1,UNACCEPTABLE_LANGUAGE:0,TRANSLATION_ERROR_UNRESPONSIVE:1};
Cv.SIMILARITY_SCORE_STATUS={REPORT_PENDING:-1,REPORT_NOT_GENERATING:-2};Cv.Paper=SC.Record.extend({nowShowingPage:null,childRecordNamespace:Cv,primaryKey:"id",availableServices:SC.Record.attr(Object,{key:"available_services"}),title:SC.Record.attr(String,{key:"title"}),author:SC.Record.toOne("Cv.Student",{key:"author"}),authorName:SC.Record.attr(String,{key:"author_full"}),textReportURL:SC.Record.attr(String,{key:"text_report"}),owner:SC.Record.attr(Number,{key:"owner"}),uploadedDate:SC.Record.attr(SC.DateTime,{key:"date_uploaded_local"}),processedTime:SC.Record.attr(SC.DateTime,{key:"processed_time_local"}),language:SC.Record.attr(String,{key:"language",defaultValue:"English"}),wordCount:SC.Record.attr(Number,{key:"word_count"}),pageCount:SC.Record.attr(Number,{key:"page_count"}),characterCount:SC.Record.attr(Number,{key:"char_count"}),submissions:SC.Record.attr(Number,{key:"version"}),overlap:SC.Record.attr(Number,{key:"overlap",transform:{to:function(a){return parseInt(a)
}},defaultValue:-1}),internetOverlap:SC.Record.attr(String,{key:"overlap_internet"}),similarityScore:SC.Record.attr(Number,{key:"similarity_score"}),publicationsOverlap:SC.Record.attr(String,{key:"overlap_publications"}),submittedWorksOverlap:SC.Record.attr(String,{key:"overlap_submitted_works"}),translateLanguage:SC.Record.attr(Number,{key:"translate_language",transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),translationErrorCode:SC.Record.attr(Number,{key:"translation_error_code",transform:{to:function(a){if(a!==undefined&&a!==null){a=parseInt(a)
}return a}}}),translateOverlap:SC.Record.attr(String,{key:"translated_overlap",transform:{to:function(a){return parseInt(a)
}}}),translateInternetOverlap:SC.Record.attr(String,{key:"translated_overlap_internet"}),translatePublicationsOverlap:SC.Record.attr(String,{key:"translated_overlap_publications"}),translateSubmittedWorksOverlap:SC.Record.attr(String,{key:"translated_overlap_submitted_works"}),defaultReportLanguage:function(){var f=Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE;
var g=this.get("availableServices");var a=Cv.translatedMatchingController.get("id");
if(g&&(g.indexOf(a)!==-1)){var e=this.get("hasTranslationError");if(!e){var b=this.get("overlap");
var c=this.get("translateOverlap");if(c>b){f=this.get("translateLanguage")}}}return f
}.property("availableServices","overlap","translateOverlap","hasTranslationError").cacheable(),hasTranslationError:function(){var a=YES;
var b=this.get("translationErrorCode");if(b===Cv.REPORT_TRANSLATION_ERROR_CODE.NONE){a=NO
}return a}.property("translationErrorCode").cacheable(),fileName:SC.Record.attr(String,{key:"filename"}),fileSize:SC.Record.attr(String,{key:"original_file_size_formatted"}),extension:SC.Record.attr(String,{key:"extension"}),assignment:SC.Record.toOne("Cv.Assignment",{inverse:"papers",key:"assignment"}),pages:SC.Record.toMany("Cv.Page",{inverse:"paper",key:"pages"}),grade:SC.Record.attr(Number,{key:"grade",isEditable:!Cv.get("inStudentMode")}),baseImageUrl:SC.Record.attr(String,{key:"image_url"}),baseGlyphUrl:SC.Record.attr(String,{key:"glyph_url"}),glyphMap:function(){var b=null;
var a=this.get("isLoaded");if(a){b=Cv.GlyphMap.create({paper:this})}return b}.property("isLoaded").cacheable(),dprStatusCode:SC.Record.attr(Number,{key:"processed_by_dpr"}),isReadonly:SC.Record.attr(Boolean,{key:"is_readonly"}),readonlyStatus:SC.Record.attr(Number,{key:"readonly_status",defaultValue:0}),canEdit:SC.Record.attr(Boolean,{key:"can_edit"}),isAnonymous:SC.Record.attr(Boolean,{key:"is_anonymous"}),isAnonymousExempt:function(){return !this.get("isAnonymous")
}.property("isAnonymous").cacheable(),hasPageImages:SC.Record.attr(Boolean,{key:"has_page_images"}),hasGlyphs:SC.Record.attr(Boolean,{key:"has_glyphs"}),submissionUrl:SC.Record.attr(String,{key:"submission_url"}),isInAccountNode:SC.Record.attr(Boolean,{key:"in_account_node",defaultValue:false}),imagesAvailable:function(){var a=this.get("dprStatusCode");
var b=((a===Cv.DPR_CONSTANTS.DPR_SUCCESS)||(a===Cv.DPR_CONSTANTS.DPR_PRE_WITH_IMAGE_DIMENSIONS)||(a===Cv.DPR_CONSTANTS.DPR_ANY_SUBMISSION)||(a===Cv.DPR_CONSTANTS.DPR_NOTHING_SUBMISSION)||(a===Cv.DPR_CONSTANTS.DPR_IMAGE_FILE_SUBMISSION));
return(b&&this.get("hasPageImages"))}.property("dprStatusCode","hasPageImages","hasMarkingTemplate").cacheable(),hasMarkingTemplate:function(){var a=this.get("dprStatusCode");
return((a===Cv.DPR_CONSTANTS.DPR_ANY_SUBMISSION)||(a===Cv.DPR_CONSTANTS.DPR_NOTHING_SUBMISSION))
}.property("dprStatusCode").cacheable(),isAnythingSubmission:function(){var a=this.get("dprStatusCode");
return(a===Cv.DPR_CONSTANTS.DPR_ANY_SUBMISSION)}.property("dprStatusCode").cacheable(),isImageFileSubmission:function(){var a=this.get("dprStatusCode");
return(a===Cv.DPR_CONSTANTS.DPR_IMAGE_FILE_SUBMISSION)}.property("dprStatusCode").cacheable(),isNothingSubmission:function(){var a=this.get("dprStatusCode");
return(a===Cv.DPR_CONSTANTS.DPR_NOTHING_SUBMISSION)}.property("dprStatusCode").cacheable(),mayDownloadOriginalSubmission:function(){if(this.get("isAnonymous")&&!this.get("isAnythingSubmission")){return NO
}else{return YES}}.property("isAnonymous","isAnythingSubmission").cacheable(),reportIsPending:function(){return(this.get("similarityScore")===Cv.SIMILARITY_SCORE_STATUS.REPORT_PENDING)
}.property("similarityScore").cacheable(),reportNotGenerating:function(){return(this.get("similarityScore")===Cv.SIMILARITY_SCORE_STATUS.REPORT_NOT_GENERATING)
}.property("similarityScore").cacheable(),dprImagingInProcess:function(){return this.get("dprStatusCode")===Cv.DPR_CONSTANTS.DPR_IN_PROCESS
}.property("dprStatusCode").cacheable(),imagedPreDpr:function(){return this.get("dprStatusCode")===Cv.DPR_CONSTANTS.DPR_PRE
}.property("dprStatusCode").cacheable(),dprImagingFailed:function(){return(this.get("dprStatusCode")===Cv.DPR_CONSTANTS.DPR_FAILED_A||this.get("dprStatusCode")===Cv.DPR_CONSTANTS.DPR_FAILED_B)
}.property("dprStatusCode").cacheable(),dprPreWithImageDimensions:function(){return this.get("dprStatusCode")===Cv.DPR_CONSTANTS.DPR_PRE_WITH_IMAGE_DIMENSIONS
}.property("dprStatusCode").cacheable(),authorFullNameBinding:"*author.fullName",verticalScrollOffset:0,horizontalScrollOffset:0,isLoadingPageImages:NO,_isLoadingPageImagesFast:NO,_lastLoadedPageImageIndex:-1,_currentLoadingPageImageIndex:-1,pagesIsLoaded:function(){var c=NO;
var a=this.get("isLoaded");if(a){var b=this.getPath("pages.length");if(b>0){c=YES
}}return c}.property(".isLoaded",".pages.length").cacheable(),pageImagesIsLoaded:function(){var b=NO;
var c=this.get("pagesIsLoaded");if(c){var a=this.getPath("pages.length");b=((a-1)===this.get("_lastLoadedPageImageIndex"))
}return b}.property("pagesIsLoaded","_lastLoadedPageImageIndex").cacheable(),_pagesIsLoadedDidChange:function(){var b=this.get("pagesIsLoaded");
var a=this.get("isLoadingPageImages");if(b&&a){this.startLoadingPageImagesIfNeeded()
}}.observes("pagesIsLoaded"),startLoadingPageImagesIfNeeded:function(a){if(a!==undefined){this.set("_isLoadingPageImagesFast",!!a)
}var b;if(this.get("pageImagesIsLoaded")){b=NO}else{b=YES;this.set("isLoadingPageImages",YES);
if(this.get("_currentLoadingPageImageIndex")===-1){if(this.get("pagesIsLoaded")){this.loadNextPageImage()
}}}return b},stopLoadingPageImages:function(){this.set("isLoadingPageImages",NO)},loadNextPageImage:function(){var a;
if(this.get("_isLoadingPageImagesFast")){a=Cv.Paper.PAGE_IMAGE_LOADING_INTERVAL_FAST
}else{a=Cv.Paper.PAGE_IMAGE_LOADING_INTERVAL_SLOW}this.invokeLater(this._loadNextPageImage,a)
},_loadNextPageImage:function(){var c=this.get("_lastLoadedPageImageIndex")+1;this.set("_currentLoadingPageImageIndex",c);
var a=this.get("pages");var b=a.objectAt(c).get("imageUrl")},pageImageDidLoad:function(a,b){this.set("_currentLoadingPageImageIndex",-1);
this.incrementProperty("_lastLoadedPageImageIndex");if(!this.get("isLoadingPageImages")){return
}else{if(this.get("pageImagesIsLoaded")){this.stopLoadingPageImages()}else{this.loadNextPageImage()
}}},gradeMarkLastSaved:SC.Record.attr(SC.DateTime,{key:"read_last_saved"}),gradeMarkCommentCount:SC.Record.attr(Number,{key:"read_comment_count"}),gradeMarkQuickMarkCount:SC.Record.attr(Number,{key:"read_qm_count"}),gradeMarkDuration:SC.Record.attr(String,{key:"read_duration"}),biblioPercent:SC.Record.attr(Number,{key:"biblio_pct"}),quotePercent:SC.Record.attr(Number,{key:"quote_pct"})});
Cv.Paper.mixin({resourceName:"paper",responseKey:"Paper",PAGE_IMAGE_LOADING_INTERVAL_FAST:1000,PAGE_IMAGE_LOADING_INTERVAL_SLOW:5000});
sc_require("models/paper");Cv.ExcludeList=SC.Record.extend({primaryKey:"id",paper:SC.Record.toOne("Cv.Paper",{key:"objectid"}),sourcesData:SC.Record.attr(Array,{key:"sources"}),sources:null,translateLanguage:SC.Record.attr(Number,{key:"translate_language",transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),init:function(){arguments.callee.base.apply(this,arguments);
this._updateSources()},_updateSources:function(){var b=this.get("sourcesData")||[];
var a=b.map(function(c){if(c.percent){delete c.percent}var e=SC.Object.create(c,{displayLinkText:function(){var k=this.get("linkText");
var j=/^Submitted to (.+) on (.+)$/.exec(k);if(j){var g=j[1];var l=j[2];var h=l?Ip.stringToDateObjectYMD(l):null;
var f="__ipDefaultFullDateFormat".loc();var i=h.toFormattedString(f);k="_Submitted to %@ on %@".loc(g,i)
}return k}.property("linkText").cacheable()});return e});this.set("sources",a)}.observes("*sourcesData.[]")});
Cv.ExcludeList.mixin({resourceName:function(c){var a=c.objectid;var b=c.translate_language;
var e="/paper/%@/exclude_list?tl=%@".fmt(a,b);return e},responseKey:"ExcludeList"});
Cv.Glyph=SC.Object.extend({glyphLine:null,glyphIndex:-1,glyphData:null,glyphPage:function(){var a=this.getPath("glyphLine.glyphPage");
return a}.property("glyphLine").cacheable(),pageIndex:function(){var a=this.getPath("glyphLine.pageIndex");
return a}.property("glyphLine").cacheable(),lineIndex:function(){var a=this.getPath("glyphLine.lineIndex");
return a}.property("glyphLine").cacheable(),address:function(){var a={page:this.get("pageIndex"),line:this.get("lineIndex"),glyph:this.get("glyphIndex")};
return a}.property("pageIndex","lineIndex","glyphIndex").cacheable(),top:function(){var a=this.getPath("glyphLine.top");
return a}.property("glyphLine").cacheable(),bottom:function(){var a=this.getPath("glyphLine.bottom");
return a}.property("glyphLine").cacheable(),left:function(){var a=this.get("glyphData");
var b=a[0];return b}.property("glyphData").cacheable(),right:function(){var a=this.get("glyphData");
var e=a[0];var c=a[1];var b=e+c;return b}.property("glyphData").cacheable(),width:function(){return this.get("right")-this.get("left")
}.property("left","right").cacheable(),height:function(){return this.get("bottom")-this.get("top")
}.property("bottom","top").cacheable(),containsX:function(a){var b=NO;if((this.get("left")<=a)&&(this.get("right")>=a)){b=YES
}return b},containsY:function(b){var a=NO;if((this.get("top")<=b)&&(this.get("bottom")>=b)){a=YES
}return a},contains:function(a,c){var b=this.containsX(a)&&this.containsY(c);return b
},equals:function(c){var e={page:this.get("pageIndex"),line:this.get("lineIndex"),glyph:this.get("glyphIndex")};
var b={page:c.get("pageIndex"),line:c.get("lineIndex"),glyph:c.get("glyphIndex")};
var a=(Cv.Glyph.compareAddress(e,b)===0);return a}});Cv.Glyph.compareAddress=function(e,c){var a=function(g,f){if(g<f){return -1
}else{if(g>f){return 1}else{return 0}}};var b=a(e.page,c.page);if(b===0){b=a(e.line,c.line)
}if(b===0){b=a(e.glyph,c.glyph)}return b};Cv.GlyphLine=SC.Object.extend({glyphPage:null,lineIndex:-1,glyphLineData:null,glyphsData:null,pageIndex:function(){var a=this.getPath("glyphPage.pageIndex");
return a}.property("glyphPage").cacheable(),isRightToLeft:function(){var b=this.getPath("glyphLineData");
var a=Cv.config.get("CAN_USE_R2L")?b[3]:0;return a}.property("glyphLineData").cacheable(),top:function(){var e=this.get("glyphLineData");
var a=e[0];var c=e[1];var b=a-c;return b}.property("glyphLineData").cacheable(),bottom:function(){var e=this.get("glyphLineData");
var c=e[0];var a=e[2];var b=c+a;return b}.property("glyphLineData").cacheable(),left:function(){var a=this.getGlyph(0);
var b=a.get("left");return b}.property("pageIndex","lineIndex").cacheable(),right:function(){var c=this.getPath("glyphsData.length");
var e=c-1;var a=this.getGlyph(e);var b=a.get("right");return b}.property("pageIndex","lineIndex").cacheable(),bounds:function(){var f=this.get("left");
var b=this.get("right");var e=this.get("top");var a=this.get("bottom");var c={x:f,y:e,width:b-f,height:a-e};
return c}.property("left","top","width","height").cacheable(),glyphCount:function(){var a=this.getPath("glyphsData.length");
return a}.property("glyphsData").cacheable(),firstGlyph:function(){var a=0;var b=this.getGlyph(a);
return b}.property("glyphsData").cacheable(),lastGlyph:function(){var a=this.get("glyphCount")-1;
var b=this.getGlyph(a);return b}.property("glyphsData").cacheable(),_glyphCache:null,init:function(){arguments.callee.base.apply(this,arguments);
this._glyphCache=[]},getGlyph:function(b){var c=this._glyphCache[b];if(c===undefined){var a=this.get("glyphsData").objectAt(b);
if(a){c=Cv.Glyph.create({glyphLine:this,glyphIndex:b,glyphData:a})}else{c=null}this._glyphCache[b]=c
}return c},containsX:function(a){var b=NO;if((this.get("left")<=a)&&(this.get("right")>=a)){b=YES
}return b},containsY:function(b){var a=NO;if((this.get("top")<=b)&&(this.get("bottom")>=b)){a=YES
}return a},contains:function(a,c){var b=!!this.getGlyphAt(a,c);return b},getGlyphAt:function(a,g){var c=null;
if((this.get("top")<=g)&&(this.get("bottom")>=g)){var e=this.get("glyphCount");for(var b=0;
b<e;b++){var f=this.getGlyph(b);if(f.containsX(a)){c=f;break}}}return c}});Cv.GlyphMap=SC.Object.extend({paper:null,_glyphPageChunkRecordArrays:null,_glyphPageRecordArrays:null,CHUNK_PAGE_COUNT:10,init:function(){arguments.callee.base.apply(this,arguments);
this._glyphPageChunkRecordArrays=[];this._glyphPageRecordArrays=[]},_pageChunkIndex:function(a){var b=Math.floor(a/this.CHUNK_PAGE_COUNT);
return b},_chunkStartPageIndex:function(b){var a=b*this.CHUNK_PAGE_COUNT;return a
},_chunkEndPageIndex:function(b){var a=this._chunkStartPageIndex(b+1)-1;return a},getGlyphPageChunkRecordArray:function(e){var a=this._glyphPageChunkRecordArrays[e];
if(!a){var c=this._chunkStartPageIndex(e);var h=this._chunkEndPageIndex(e);var g=this.getPath("paper.baseGlyphUrl");
var b;if(g.indexOf("?")===-1){b="%@?page=%@&count=%@".fmt(g,c+1,this.CHUNK_PAGE_COUNT)
}else{b="%@&page=%@&count=%@".fmt(g,c+1,this.CHUNK_PAGE_COUNT)}var f=SC.Query.local(Cv.GlyphPage,{conditions:"paper = {paper} AND pageIndex >= %@ AND pageIndex <= %@".fmt(c,h),paper:this.get("paper"),url:b});
a=Cv.store.find(f);this._glyphPageChunkRecordArrays[e]=a}return a},getGlyphPageRecordArray:function(a){var f=this._glyphPageRecordArrays[a];
if(!f){var c=this._pageChunkIndex(a);var b=this.getGlyphPageChunkRecordArray(c);var e=SC.Query.local(Cv.GlyphPage,{conditions:"pageIndex = %@".fmt(a)});
f=b.find(e);this._glyphPageRecordArrays[a]=f}return f}});Cv.GlyphPage=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(String),paper:SC.Record.toOne("Cv.Paper"),pageIndex:SC.Record.attr(Number,{key:"page_index"}),glyphData:SC.Record.attr(Array,{key:"glyph_data"}),isRightToLeft:function(){var a=this.get("firstLine");
var b=a.get("isRightToLeft")?1:0;return b}.property("glyphData").cacheable(),top:function(){var a=this.get("firstLine");
var b=a.get("top");return b}.property("glyphData").cacheable(),bottom:function(){var a=this.get("lastLine");
var b=a.get("bottom");return b}.property("glyphData").cacheable(),lineCount:function(){var a=this.getPath("glyphData.length");
return a}.property("glyphData").cacheable(),firstLine:function(){var b=0;var a=this.getLine(b);
return a}.property("isLoaded").cacheable(),lastLine:function(){var b=this.get("lineCount")-1;
var a=this.getLine(b);return a}.property("isLoaded").cacheable(),firstGlyph:function(){var a=this.getPath("firstLine.firstGlyph");
return a}.property("isLoaded").cacheable(),lastGlyph:function(){var a=this.getPath("lastLine.lastGlyph");
return a}.property("isLoaded").cacheable(),_lineCache:null,init:function(){arguments.callee.base.apply(this,arguments);
this._lineCache=[]},getLine:function(c){var b=this._lineCache[c];if(b===undefined){var e=this.get("glyphData")[c];
if(e){var a=this.get("pageIndex");b=Cv.GlyphLine.create({glyphPage:this,lineIndex:c,glyphLineData:e[0],glyphsData:e[1]})
}else{b=null}this._lineCache[c]=b}return b},contains:function(a,c){var b=!!this.getGlyphAt(a,c);
return b},getGlyph:function(e,b){var c=null;var a=this.getLine(e);if(a){c=a.getGlyph(b)
}return c},getGlyphAt:function(a,h){var e=null;var c=this.get("lineCount");for(var g=0;
g<c;g++){var b=this.getLine(g);var f=b.getGlyphAt(a,h);if(f){e=f;break}}return e},getGlyphNear:function(a,f,e,c){var b=null;
if(e===Cv.GlyphPage.DIRECTION_DOWN_END){b=this._findFirstGlyphBelow(a,f,c)}else{if(e===Cv.GlyphPage.DIRECTION_UP_START){b=this._findFirstGlyphAbove(a,f,c)
}}return b},_findFirstGlyphAbove:function(j,i,k){var f=null;var g=(k?k.get("lineIndex"):0);
var m=this.get("lineCount");for(var l=m-1;l>=g;l--){var n=this.getLine(l);var a=0;
if(k&&(l===g)){a=k.get("glyphIndex")}var c=n.get("glyphCount");for(var b=c-1;b>=a;
b--){var h=n.getGlyph(b);var e=(h.getPath("glyphLine.isRightToLeft")?(h.get("left")>=j):(h.get("right")<=j));
if((h.get("bottom")<=i)||((h.get("top")<=i)&&e)){f=h;break}}if(f){break}}return f
},_findFirstGlyphBelow:function(h,g,i){var e=null;var b=(i?i.get("lineIndex"):(this.get("lineCount")-1));
for(var j=0;j<=b;j++){var l=this.getLine(j);var c;if(i&&(j===b)){c=i.get("glyphIndex")
}else{c=l.get("glyphCount")-1}for(var a=0;a<=c;a++){var f=l.getGlyph(a);var k=(f.getPath("glyphLine.isRightToLeft")?(f.get("right")<=h):(f.get("left")>=h));
if((f.get("top")>=g)||((f.get("bottom")>=g)&&k)){e=f;break}}if(e){break}}return e
}});Cv.GlyphPage.mixin({resourceName:"glyph_page",responseKey:"GlyphPage",DIRECTION_DOWN_END:1,DIRECTION_UP_START:2});
Cv.Gm3Highlight=SC.Record.extend({primaryKey:"id",associatedMarkDestroyed:SC.Record.attr(Boolean,{key:"_associated_mark_destroyed",defaultValue:NO}),pageNumber:SC.Record.attr(Number,{key:"page"}),pageIndex:function(){return this.get("pageNumber")-1
}.property("pageNumber").cacheable(),x:SC.Record.attr(Number,{key:"position_x"}),y:SC.Record.attr(Number,{key:"position_y"}),width:SC.Record.attr(Number,{key:"width"}),height:SC.Record.attr(Number,{key:"height"}),color:SC.Record.attr(String,{key:"color",transform:{to:function(a){return["#",a].join("")
},from:function(a){return a.indexOf("#")===0?a.substring(1,a.length):a}}}),isUnderlined:SC.Record.attr(Boolean,{key:"underlined"}),isStriked:SC.Record.attr(Boolean,{key:"striked"}),mark:SC.Record.toOne("Cv.Comment",{key:"mark",inverse:"gm3Highlights"}),readId:SC.Record.attr(Number,{key:"read"}),init:function(){arguments.callee.base.apply(this,arguments);
this.markDidChage()},markIsExpanded:NO,markIsExpandedBindingDefault:SC.Binding.oneWay(),markDidChage:function(){if(this.get("mark")&&!this.markIsExpandedBinding){this.markIsExpandedBinding=this.bind("markIsExpanded",".mark.isExpanded")
}}.observes("mark")});Cv.Gm3Highlight.mixin({resourceName:"gm3/highlight",responseKey:"Gm3Highlight"});
Cv.MarkCriterion=SC.Record.extend({primaryKey:"id",read:SC.Record.toOne("Cv.Read"),criterion:SC.Record.toOne("Rb.RubricCriterion"),created:SC.Record.attr(SC.DateTime),init:function(){arguments.callee.base.apply(this,arguments);
this.invokeOnce(this.idDidChange)},mark:function(a,b){if((b===undefined)&&this.readAttribute("mark")){b=Cv.store.find(SC.Query.local(Cv.Mark,{conditions:"id = {id}",id:this.readAttribute("mark")})).firstObject()
}return b}.property("id").cacheable(),idDidChange:function(){var b=this.get("isDestroyed");
if(b){return}var a=this.get("mark");if(a&&a.get("status")&&this.get("id")){if(a.get("status")>=SC.Record.BUSY){a.addObserver("status",this,this._pushNewRecordToMarkModel)
}else{this._pushNewRecordToMarkModel()}}}.observes("id"),_pushNewRecordToMarkModel:function(){var a=this.get("mark");
if(a.get("status")>=SC.Record.BUSY){return}if(a.getPath("markCriteria").indexOf(this)===-1){a.getPath("markCriteria").pushObject(this);
a.removeObserver("status",this,this._pushNewRecordToMarkModel)}},commitRecordWhenReady:function(a){var b=this.get("mark");
if(a){b.addObserver("status",this,this.deferCommitUntilMarkSaves)}else{if(!b.get("id")){b.addObserver("id",this,this.commitRecord)
}else{this.commitRecord()}}},commitRecord:function(){var a=this.get("mark");if(this.get("isDestroyed")){arguments.callee.base.apply(this,arguments)
}else{if(a.get("id")){this.writeAttribute("mark",a.get("id"));arguments.callee.base.apply(this,arguments);
a.removeObserver("id",this,this.commitRecord)}}},deferCommitUntilMarkSaves:function(){var a=this.get("mark");
if([SC.Record.READY_CLEAN,SC.Record.DESTROYED_CLEAN].indexOf(this.getPath("mark.status"))>-1&&this.get("markIsCommitting")){this.commitRecordWhenReady();
a.removeObserver("status",this,this.deferCommitUntilMarkSaves)}},busyStatusObserver:function(){var a=this.get("mark");
if(!a){return}if(a.get("status")>=SC.Record.BUSY){a.addObserver("status",this,this.busyStatusObserver);
return}else{a.removeObserver("status",this,this.busyStatusObserver)}if(this.get("status")>=SC.Record.BUSY&&a){a.get("markCriteriaBusy").pushObject(this)
}else{a.get("markCriteriaBusy").removeObject(this)}}.observes("status"),undoPackage:function(){var a=this.get("attributes");
delete a.id;return a}});Cv.MarkCriterion.mixin({resourceName:"mark_criterion",responseKey:"MarkCriterion"});
Cv.OriginalityGlimpse=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(String),paperReviewed:SC.Record.attr(Number),sourceDocId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),sourceNodeId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),primarySourceGroupDocId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),primarySourceGroupNodeId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),instanceMode:SC.Record.attr(Boolean),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),text:SC.Record.attr(String),notAvailable:SC.Record.attr(Boolean,{defaultValue:NO}),sharedAvailable:SC.Record.attr(Boolean,{defaultValue:NO}),sharingInfo:SC.Record.attr(Object,{defaultValue:null}),nodeContextWords:SC.Record.attr(Number,{defaultValue:null}),displayText:function(){var a=this.get("notAvailable");
var b=this.get("text");if(a){if(Cv.get("inStudentMode")){b="_Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, your instructor may be able to request permission to view the paper from the instructor to whom the paper was originally submitted.".loc()
}else{b="_Because submitted papers remain the intellectual property of their authors, instructors, and respective institutions, we are unable to show you the content of this paper at this time. If you would still like to view this paper, please click on the institution name above to submit a permission request to the author's instructor.".loc()
}}return b}.property("text","notAvailable","sharedAvailable").cacheable()});Cv.OriginalityMatch=SC.Object.extend(Cv.Highlightable,{isLoaded:NO,paper:null,isFirstMatchSegment:NO,isLastMatchSegment:NO,groupNode:null,sourceTreeNode:null,source:null,matchGroup:null,color:function(){var a=this.getPath("matchGroup.color");
return a}.property("matchGroup").cacheable(),_matchGroupIsLoaded:function(){var a=this.getPath("matchGroup.isLoaded");
this.set("isLoaded",a)}.observes(".matchGroup.isLoaded")});sc_require("mixins/match_group");
Cv.OriginalityMatchGroup=SC.Object.extend(Cv.MatchGroup,{init:function(){arguments.callee.base.apply(this,arguments);
SC.Observers.suspendPropertyObserving();this._convertMatchSegments();SC.Observers.resumePropertyObserving()
}});Cv.OriginalitySource=SC.Object.extend({isLoaded:NO,paper:null,id:-1,node:-1,linkText:null,linkUrl:null,percent:-1,groupNode:null,sourceTreeNode:null,preloadedMatchGroupsData:null,lazyLoadedMatchGroupsData:null,sharedAvailable:null,matchSegments:function(){var b=[];
var a=this.get("matchGroups");a.forEach(function(c){var e=c.get("matchSegments");
b=b.concat(e)});return b}.property("matchGroups").cacheable(),glimpses:function(){var a=this.get("queryConditionsString");
var b=SC.Query.local(Cv.OriginalityGlimpse,{conditions:a,url:this.getFetchUrl(YES),body:this.getFetchData(YES),usePOST:YES});
return Cv.store.find(b)}.property().cacheable(),displayLinkText:function(){var g=this.get("linkText");
var f=/^Submitted to (.+) on (.+)$/.exec(g);if(f){var b=f[1];var h=f[2];var c=h?Ip.stringToDateObjectYMD(h):null;
var a="__ipDefaultFullDateFormat".loc();var e=c?c.toFormattedString(a):null;g="_Submitted to %@ on %@".loc(b,e)
}return g}.property("linkText").cacheable(),guid:function(){var b=this.get("id");
var c=this.get("node");var a="%@:%@".fmt(b,c);return a}.property().cacheable(),queryConditionsString:function(){var c=this.getPath("paper.id");
var f=this.get("id");var i=this.get("node");var b;var g;var h=this.getPath("sourceTreeNode.isPrimarySource");
if(h){b=0;g=0}else{b=this.getPath("sourceTreeNode.primarySourceGroupNodeId");g=this.getPath("sourceTreeNode.primarySourceGroupDocId")
}var e=this.getPath("sourceTreeNode.translateLanguage");var a="paperReviewed = %@ AND translateLanguage = %@ AND ( primarySourceGroupNodeId = %@ AND primarySourceGroupDocId = %@ ) AND ( sourceDocId = %@ AND sourceNodeId = %@ ) AND ( instanceMode = 1 OR instanceMode = YES )".fmt(c,e,b,g,f,i);
return a}.property().cacheable(),matchGroups:function(){var c=null;var i=this.get("preloadedMatchGroupsData");
if(i){SC.Observers.suspendPropertyObserving();c=this._convertMatchGroups();SC.Observers.resumePropertyObserving()
}else{var g=this.get("lazyLoadedMatchGroupsData");if(g){if(g.get("status")&SC.Record.READY){var h=this.get("paper");
var f=this.get("groupNode");var e=this.get("sourceTreeNode");g.forEach(function(j){if((this.get("id")!==j.get("sourceDocId"))||(this.get("node")!==j.get("sourceNodeId"))){console.error("Match group does not belong to source")
}j.setContext(h,f,e,this);j.set("isLoaded",YES)},this);g.set("isLoaded",YES);c=g}}else{var b=this.get("queryConditionsString");
var a=SC.Query.local(Cv.OriginalityMatchGroupRecord,{conditions:b,orderBy:"sortIndex",url:this.getFetchUrl(NO),body:this.getFetchData(NO),usePOST:YES});
g=Cv.store.find(a);g.set("isLoaded",NO);this.set("lazyLoadedMatchGroupsData",g);this.bind("lazyLoadedMatchGroupsDataStatus",SC.Binding.oneWay(".lazyLoadedMatchGroupsData.status"))
}}return c}.property("preloadedMatchGroupsData","lazyLoadedMatchGroupsDataStatus").cacheable(),_convertMatchGroups:function(){var b=this.get("preloadedMatchGroupsData")||[];
var a=b.map(function(e){var c=Cv.OriginalityMatchGroup.create(e,{paper:this.get("paper"),translateLanguage:this.getPath("sourceTreeNode.translateLanguage"),groupNode:this.get("groupNode"),sourceTreeNode:this.get("sourceTreeNode"),source:this});
return c},this);return a},_sourceTreeNodeIsLoaded:function(){var a=this.getPath("sourceTreeNode.isLoaded");
this.set("isLoaded",a)}.observes(".sourceTreeNode.isLoaded"),getFetchUrl:function(a){var c=this.getPath("paper.id");
var h=!!this.get("groupNode");var g=(h?"similarity":"content");var f=(a?"g=1":"g=0");
var e=this.getPath("sourceTreeNode.translateLanguage");var b="/paper/%@/report/%@?%@&tl=%@".fmt(c,g,f,e);
return b},getFetchData:function(){var f=!!this.get("groupNode");var a={};a.im=1;var b="%@:%@".fmt(this.get("id"),this.get("node"));
a.s=b;a.c=[b];if(f){var e=this.getPath("groupNode.primarySourceTreeNode.sourceGuids");
var c=this.getPath("sourceTreeNode.isPrimarySource");a.p=[];e.forEach(function(g){a.p.push(g)
});a.r=1}return a}});Cv.OriginalitySourceGroupNode=SC.Object.extend({isLoaded:NO,paper:null,translateLanguage:null,primarySourceTreeNode:null,index:-1,NUM_COLORS:12,matchGroups:function(){var a=this.getPath("primarySourceTreeNode.matchGroups");
return a}.property("sourceTreeNodes").cacheable(),matchSegments:function(){var a=[];
var b=this.get("sourceTreeNodes");b.forEach(function(c){var e=c.get("matchSegments");
a=a.concat(e)});return a}.property("sourceTreeNodes").cacheable(),displayLinkText:function(){var a=this.getPath("primarySourceTreeNode.displayLinkText");
return a}.property("primarySourceTreeNode").cacheable(),collectionDisplayText:function(){var a=this.getPath("primarySourceTreeNode.simpleCollectionDisplayText");
return a}.property("primarySourceTreeNode").cacheable(),percent:function(){var a=this.getPath("primarySourceTreeNode.percent");
return a}.property("primarySourceTreeNode").cacheable(),primarySourceGroupDocId:function(){var c=-1;
var a=this.get("isLoaded");if(a){var b=this.getPath("primarySourceTreeNode.sources");
c=b[0].get("id")}return c}.property("sourceTreeNodes","isLoaded").cacheable(),primarySourceGroupNodeId:function(){var c=-1;
var a=this.get("isLoaded");if(a){var b=this.getPath("primarySourceTreeNode.sources");
c=b[0].get("node")}return c}.property("sourceTreeNodes","isLoaded").cacheable(),colorIndex:function(){var c=-1;
var b=this.get("NUM_COLORS");var a=this.get("index");if(a!==-1){c=a%b}return c}.property("index").cacheable(),sourceTreeNodeCount:function(){var b=-1;
var a=this.get("isLoaded");if(a){b=this.getPath("primarySourceTreeNode.sourceTreeNodeCount")
}return b}.property("primarySourceTreeNode","isLoaded").cacheable(),sourceTreeNodes:function(){var c=this.get("primarySourceTreeNode");
var e=[c];var b=this.getPath("secondaryData.sourceTreeNodes")||[];var a=e.concat(b);
return a}.property("isLoaded","secondaryDataIsLoaded").cacheable(),_secondaryDataRecordArray:null,_secondaryDataRecordArrayLength:-1,secondaryData:function(){var b=null;
var h=this.get("sourceTreeNodeCount");if(h>1){var a=this.get("_secondaryDataRecordArray");
if(!a){var c=this.getPath("paper.id");var f=this.get("index");var e=this.get("translateLanguage");
var g=SC.Query.local(Cv.OriginalitySourceGroupNodeSecondaryData,{conditions:"paper = {paper} AND groupIndex = {groupIndex} AND translateLanguage = {translateLanguage}",paper:this.get("paper"),groupIndex:f,translateLanguage:e,groupNode:this,url:"/paper/%@/secondary/%@?tl=%@".fmt(c,f,e)});
a=Cv.store.find(g);this.set("_secondaryDataRecordArray",a)}else{if(a.get("length")>0){b=a.firstObject()
}}}if(!b){this.set("_secondaryDataRecordArrayLength",-1)}return b}.property("_secondaryDataRecordArrayLength").cacheable(),_secondaryDataRecordArrayDidChange:function(){if(this._secondaryDataRecordArrayLengthBinding){this._secondaryDataRecordArrayLengthBinding.disconnect();
this._secondaryDataRecordArrayLengthBinding=null;this._secondaryDataRecordArrayLength=-1
}if(this.get("_secondaryDataRecordArray")){this._secondaryDataRecordArrayLengthBinding=this.bind("_secondaryDataRecordArrayLength",SC.Binding.oneWay("._secondaryDataRecordArray.length"))
}}.observes("_secondaryDataRecordArray"),_secondaryDataRecordArrayLengthDidChange:function(){var a=this.get("_secondaryDataRecordArrayLength");
if((a>0)&&!this.secondaryDataIsLoadedBinding){this.secondaryDataIsLoadedBinding=this.bind("secondaryDataIsLoaded",SC.Binding.oneWay(".secondaryData.isLoaded"))
}}.observes("_secondaryDataRecordArrayLength"),secondaryDataIsLoaded:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._convertPrimarySourceTreeNode();this.set("isLoaded",YES)},_convertPrimarySourceTreeNode:function(){var c=this.get("primarySourceTreeNode");
c.preloadedMatchGroupsData=c.matchGroups;delete c.matchGroups;var e=this.get("paper");
var a=this.get("translateLanguage");var b=Cv.OriginalitySourceTreeNode.create(c,{groupNode:this,paper:e,translateLanguage:a,isPrimarySource:YES});
this.set("primarySourceTreeNode",b)}});Cv.OriginalitySourceGroupNodeSecondaryData=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(String),groupIndex:SC.Record.attr(Number),paper:SC.Record.toOne("Cv.Paper",{key:"paperReviewed"}),sourceTreeNodes:SC.Record.attr(Array),groupNode:SC.Record.attr(Object),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),isLoaded:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._convertSourceTreeNodes();this.set("isLoaded",YES)},_convertSourceTreeNodes:function(){var e=this.get("sourceTreeNodes")||[];
var a=this.get("groupNode");var c=this.get("paper");var b=this.get("translateLanguage");
var f=e.map(function(i,h){i.preloadedMatchGroupsData=i.matchGroups;delete i.matchGroups;
var g=Cv.OriginalitySourceTreeNode.create(i,{groupNode:a,paper:c,translateLanguage:b});
return g},this);this.set("sourceTreeNodes",f)}});Cv.OriginalitySourceTreeNode=SC.Object.extend({isLoaded:NO,groupNode:null,paper:null,translateLanguage:null,linkText:null,collection:null,percent:-1,wordCount:-1,isPrimarySource:NO,sources:null,preloadedMatchGroupsData:null,lazyLoadedMatchGroupsData:null,matchGroups:function(){var f=null;
var h=this.get("preloadedMatchGroupsData");if(h){SC.Observers.suspendPropertyObserving();
f=this._convertMatchGroups();SC.Observers.resumePropertyObserving()}else{var e=this.get("lazyLoadedMatchGroupsData");
if(e){if(e.get("status")&SC.Record.READY){var c=this.get("paper");var b=this.get("groupNode");
var i=this;var a=this.get("sources");e.forEach(function(m){var k=m.get("sourceDocId");
var l=m.get("sourceNodeId");var n=a.find(function(p){var o=NO;if((p.get("id")===k)&&(p.get("node")===l)){o=YES
}return o});m.setContext(c,b,i,n);m.set("isLoaded",YES)});e.set("isLoaded",YES);f=e
}}else{var j=this.getQueryConditions();var g=SC.Query.local(Cv.OriginalityMatchGroupRecord,{conditions:j,orderBy:"sortIndex",url:this.getMatchGroupQueryUrl(),body:this.getMatchGroupQueryData(),usePOST:YES});
e=Cv.store.find(g);e.set("isLoaded",NO);this.set("lazyLoadedMatchGroupsData",e);this.bind("lazyLoadedMatchGroupsDataStatus",SC.Binding.oneWay(".lazyLoadedMatchGroupsData.status"))
}}return f}.property("preloadedMatchGroupsData","lazyLoadedMatchGroupsDataStatus").cacheable(),matchSegments:function(){var b=[];
var a=this.get("sources");a.forEach(function(e){var c=e.get("matchSegments");b=b.concat(c)
});return b}.property("sources").cacheable(),simpleCollectionDisplayText:function(){var a=null;
var b=this.get("collection");if(Cv.config.get("COLLECTION_NAMES_LOCALIZED")){return b
}if(b==="internet"){a="_Internet source".loc()}else{if(b==="submitted_work"){a="_Student paper".loc()
}else{if(b==="publication"){a="_Publication".loc()}}}return a}.property("collection").cacheable(),collectionDisplayText:function(){var b=null;
var c=this.get("collection");var a=this.getPath("sources.length");if(Cv.config.get("COLLECTION_NAMES_LOCALIZED")){if(a===1){b=c
}else{b="_%@ - %@ sources".loc(c,a)}return b}if(c==="internet"){if(a===1){b="_Internet source".loc()
}else{b="_Internet source - %@ urls".loc(a)}}else{if(c==="submitted_work"){if(a===1){b="_Student paper".loc()
}else{b="_Student papers - %@ papers".loc(a)}}else{if(c==="publication"){if(a===1){b="_Publication".loc()
}else{b="_Publication - %@ publications".loc(a)}}}}return b}.property("collection").cacheable(),displayLinkText:function(){var c=this.get("linkText");
var b=/^Submitted to (.+)$/.exec(c);if(b){var a=b[1];c="_Submitted to %@".loc(a)}return c
}.property("linkText").cacheable(),sourceGuids:function(){var a=this.get("sources");
var b=a.map(function(e){var c=e.get("guid");return c});return b}.property("sources").cacheable(),primarySourceGroupDocId:function(){var a=-1;
if(this.get("isLoaded")){if(this.get("groupNode")){a=this.getPath("groupNode.primarySourceGroupDocId")
}else{a=0}}return a}.property("groupNode","isLoaded").cacheable(),primarySourceGroupNodeId:function(){var a=-1;
if(this.get("isLoaded")){if(this.get("groupNode")){a=this.getPath("groupNode.primarySourceGroupNodeId")
}else{a=0}}return a}.property("groupNode","isLoaded").cacheable(),glimpseSources:function(){var a=this.get("sources");
var b={};a.forEach(function(e){var f=SC.Object.create({sourceTreeNode:this,source:e,glimpses:function(){var j=this.get("sourceTreeNode");
var l=this.getPath("source.id");var m=this.getPath("source.node");var k=j.getGlimpseQueryUrl();
var h=j.getGlimpseQueryData(l,m);var g=j.getQueryConditions();var i=SC.Query.local(Cv.OriginalityGlimpse,{conditions:g,url:k,body:h,usePOST:YES});
return Cv.store.find(i)}.property().cacheable()});var c=e.get("guid");b[c]=f},this);
return b}.property("sources").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
SC.Observers.suspendPropertyObserving();if(this.get("groupNode")){this.bind("groupNodeIsLoaded",SC.Binding.oneWay(".groupNode.isLoaded"))
}this._convertSources();if(!this.get("groupNode")){this.set("isLoaded",YES)}SC.Observers.resumePropertyObserving()
},_convertSources:function(){var b=this.get("sources")||[];var a=b.map(function(c){c.preloadedMatchGroupsData=c.matchGroups;
delete c.matchGroups;var e=Cv.OriginalitySource.create(c,{paper:this.get("paper"),groupNode:this.get("groupNode"),sourceTreeNode:this});
return e},this);this.set("sources",a)},_convertMatchGroups:function(){var e=this.get("preloadedMatchGroupsData")||[];
var f=this.get("paper");var b=this.get("groupNode");var c=this.get("sources");var a=e.map(function(k){var g=k.sourceDocId;
var i=k.sourceNodeId;var j=c.find(function(m){var l=NO;if((m.get("id")===g)&&(m.get("node")===i)){l=YES
}return l});var h=Cv.OriginalityMatchGroup.create(k,{paper:this.get("paper"),translateLanguage:this.get("translateLanguage"),groupNode:this.get("groupNode"),sourceTreeNode:this,source:j});
return h},this);return a},_groupNodeIsLoaded:function(){var a=this.getPath("groupNode.isLoaded");
this.set("isLoaded",a)}.observes("groupNodeIsLoaded"),getSourceGlimpses:function(c,g){var b=this.get("glimpseSources");
var a="%@:%@".fmt(c,g);var f=b[a];var e=f.get("glimpses");return e},getQueryConditions:function(){var e=this.get("sources");
var c=e.map(function(l){var j=l.get("id");var k=l.get("node");var m="(sourceDocId = %@ AND sourceNodeId = %@)".fmt(j,k);
return m});var h=c.join(" OR ");var b;var g;var i=this.get("isPrimarySource");if(i){b=0;
g=0}else{b=this.get("primarySourceGroupNodeId");g=this.get("primarySourceGroupDocId")
}var f=this.get("translateLanguage");var a="paperReviewed = %@ AND translateLanguage = %@ AND ( primarySourceGroupNodeId = %@ AND primarySourceGroupDocId = %@ ) AND ( %@ ) AND ( instanceMode = 0 OR instanceMode = NO )".fmt(this.getPath("paper.id"),f,b,g,h);
return a},getMatchGroupQueryUrl:function(){var b=this.getPath("paper.id");var f=!!this.get("groupNode");
var e=(f?"similarity":"content");var c=this.get("translateLanguage");var a="/paper/%@/report/%@?g=0&tl=%@".fmt(b,e,c);
return a},getMatchGroupQueryData:function(){var a={};var f=!!this.get("groupNode");
a.im=0;a.c=[];var b=this.get("sourceGuids");b.forEach(function(g){a.c.push(g)});var e=this.get("isPrimarySource");
if(f&&!e){a.p=[];var c=this.getPath("groupNode.primarySourceTreeNode.sourceGuids");
c.forEach(function(g){a.p.push(g)});a.r=1}return a},getGlimpseQueryUrl:function(){var b=this.getPath("paper.id");
var f=!!this.get("groupNode");var e=(f?"similarity":"content");var c=this.get("translateLanguage");
var a="/paper/%@/report/%@?g=1&tl=%@".fmt(b,e,c);return a},getGlimpseQueryData:function(e,h){var i=!!this.get("groupNode");
var a={};a.im=0;var b="%@:%@".fmt(e,h);a.s=b;a.c=[];var c=this.get("sourceGuids");
c.forEach(function(j){a.c.push(j)});var g=this.get("isPrimarySource");if(i&&!g){a.p=[];
var f=this.getPath("groupNode.primarySourceTreeNode.sourceGuids");f.forEach(function(j){a.p.push(j)
});a.r=1}return a}});Cv.OriginalityFullSourceData=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(String),paperReviewed:SC.Record.attr(Number),sourceId:SC.Record.attr(Number),nodeId:SC.Record.attr(Number),sourceData:SC.Record.attr(Object,{key:"source"}),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),source:function(){var c=null;
var b=this.get("sourceData");var a=this.get("matchGroups");if(b&&a){c=Cv.OriginalityFullSourceModeSource.create(b,{matchGroups:a,isLoaded:YES})
}return c}.property("sourceData","matchGroups").cacheable(),glimpses:SC.Record.attr(Array),matchGroups:SC.Record.toMany("Cv.OriginalityFullSourceMatchGroup",{key:"matchGroupIds"}),displayText:SC.Record.attr(String),getGlimpseTextElementId:function(b,e){var c=this.get("paperReviewed");
var f=this.get("sourceId");var g=this.get("nodeId");var a="fsv-%@-%@-%@-%@-%@".fmt(c,f,g,b,e);
return a}});sc_require("mixins/match_group");Cv.OriginalityMatchGroupRecord=SC.Record.extend(Cv.MatchGroup,{primaryKey:"id",id:SC.Record.attr(String),sourceDocId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),sourceNodeId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),matchSegments:SC.Record.attr(Array),paperReviewed:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),primarySourceGroupDocId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),primarySourceGroupNodeId:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}}}),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a,10)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),instanceMode:SC.Record.attr(Boolean),paper:null,groupNode:null,source:null,isLoaded:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._convertMatchSegments()}});sc_require("models/originality_match_group_record");
Cv.OriginalityFullSourceMatchGroup=Cv.OriginalityMatchGroupRecord.extend({paper:SC.Record.toOne("Cv.Paper",{key:"paperReviewed"}),primarySourceGroupDocId:null,primarySourceGroupNodeId:null,hasGlimpses:NO});
sc_require("models/originality/originality_source");Cv.OriginalityFullSourceModeSource=Cv.OriginalitySource.extend({simpleCollectionDisplayText:function(){var a=null;
var b=this.get("collection");if(Cv.config.get("COLLECTION_NAMES_LOCALIZED")){return b
}if(b==="internet"){a="_Internet source".loc()}else{if(b==="submitted_work"){a="_Student paper".loc()
}else{if(b==="publication"){a="_Publication".loc()}}}return a}.property("collection").cacheable()});
Cv.OriginalityOptions=SC.Record.extend({primaryKey:"id",paper:SC.Record.toOne("Cv.Paper"),translateLanguage:SC.Record.attr(Number,{key:"translate_language",transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),excludeQuotes:SC.Record.attr(Boolean,{key:"exclude_quotes"}),excludeAbstracts:SC.Record.attr(Boolean,{key:"exclude_abstracts"}),excludeMethods:SC.Record.attr(Boolean,{key:"exclude_methods"}),excludeBibliography:SC.Record.attr(Boolean,{key:"exclude_biblio",defaultValue:YES}),smallMatchesExclusion:SC.Record.attr(Number,{key:"exclude_small_matches",defaultValue:0}),limitType:function(a,c){var e;
var b;if(c!==undefined){b=this.get("smallMatchesExclusion");if(c===Cv.OriginalityOptions.UNLIMITED){this.set("smallMatchesExclusion",0)
}else{if(c===Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT){b=Math.abs(b)||1;this.set("smallMatchesExclusion",b)
}else{if(c===Cv.OriginalityOptions.LIMIT_BY_PERCENT){b=-1*(Math.abs(b)||1);this.set("smallMatchesExclusion",b)
}}}}b=this.get("smallMatchesExclusion");if(b===0){e=Cv.OriginalityOptions.UNLIMITED
}else{if(b>0){e=Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT}else{if(b<0){e=Cv.OriginalityOptions.LIMIT_BY_PERCENT
}}}return e}.property("smallMatchesExclusion").cacheable(),smallMatchPercent:function(a,c){if(c!==undefined){if((c>0)&&(c<=100)){c=-1*c;
this.set("smallMatchesExclusion",c)}}var b=this.get("smallMatchesExclusion");if(b<0){c=Math.abs(b)
}return c}.property("smallMatchesExclusion").cacheable(),smallMatchWordCount:function(a,c){if(c!==undefined){if(c>0){this.set("smallMatchesExclusion",c)
}}var b=this.get("smallMatchesExclusion");if(b>0){c=b}return c}.property("smallMatchesExclusion").cacheable(),limitMatchSizeExclusion:SC.Record.attr(Number,{key:"limit_match_size",defaultValue:0}),limitMatchSizeType:function(a,c){var e;
var b;if(c!==undefined){b=this.get("limitMatchSizeExclusion");if(c===Cv.OriginalityOptions.UNLIMITED){this.set("limitMatchSizeExclusion",0)
}else{if(c===Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT){b=Math.abs(b)||1;this.set("limitMatchSizeExclusion",b)
}}}b=this.get("limitMatchSizeExclusion");if(b===0){e=Cv.OriginalityOptions.UNLIMITED
}else{if(b>0){e=Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT}}return e}.property("limitMatchSizeExclusion").cacheable(),limitMatchSizeWordCount:function(a,c){if(c!==undefined){if(c>0){this.set("limitMatchSizeExclusion",c)
}}var b=this.get("limitMatchSizeExclusion");if(b>0){c=b}return c}.property("limitMatchSizeExclusion").cacheable(),supportsExcludeQuotes:1,supportsExcludeBibliography:function(){var a=NO;
var b=this.get("translateLanguage");if(b===Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE){a=YES
}return a}.property("translateLanguage").cacheable(),supportsSmallMatchesExclusion:function(){var b=NO;
var a=this.get("translateLanguage");if(a===Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE){b=YES
}return b}.property("translateLanguage").cacheable(),supportsLimitMatchSizeExclusion:function(){var b=NO;
var a=this.get("translateLanguage");if(a===Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE){b=YES
}return b}.property("translateLanguage").cacheable()});Cv.OriginalityOptions.mixin({UNLIMITED:1,LIMIT_BY_WORD_COUNT:2,LIMIT_BY_PERCENT:3});
Cv.OriginalityOptions.mixin({resourceName:function(c){var a=c.paper;var b=c.translate_language;
var e="/paper/%@/options?tl=%@".fmt(a,b);return e},responseKey:"OriginalityOptions"});
Cv.Page=SC.Record.extend({childRecordNamespace:Cv,primaryKey:"id",number:SC.Record.attr(Number,{key:"page"}),height:SC.Record.attr(Number,{key:"height"}),width:SC.Record.attr(Number,{key:"width"}),paper:SC.Record.toOne("Cv.Paper",{inverse:"pages",key:"paper"}),imageUrl:function(){var a="";
var c=this.getPath("paper.baseImageUrl");if(c){var b=this.get("number");if(c.indexOf("?")==-1){a="%@?page=%@".fmt(c,b)
}else{a="%@&page=%@".fmt(c,b)}}return a}.property("paper").cacheable(),numberString:function(){var a=this.get("number");
return new String(a)}.property("number").cacheable(),index:function(){var a=this.get("number");
return a-1}.property("number").cacheable(),_lazyLoadGlyphPage:YES,_glyphPageRecordArray:null,_glyphPageRecordArrayLength:-1,glyphPageIsLoaded:NO,glyphPageIsLoading:NO,glyphPage:function(){var b=null;
if(!this.getPath("paper.hasGlyphs")){this.set("glyphPageIsLoading",NO);return null
}var e=this.get("_glyphPageRecordArray");if(!e){var c=this.getPath("paper.glyphMap");
var a=this.get("index");e=c.getGlyphPageRecordArray(a);this.set("_glyphPageRecordArray",e)
}if(e.get("length")>0){b=e.firstObject()}if(!b){this.set("_glyphPageRecordArrayLength",-1);
this.set("glyphPageIsLoading",YES)}return b}.property("_glyphPageRecordArrayLength").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
if(!this._lazyLoadGlyphPage){if(this.get("isLoaded")){this._loadGlyphPage()}}},_isLoadedDidChange:function(){if(!this._lazyLoadGlyphPage){if(this.get("isLoaded")){this._loadGlyphPage()
}}}.observes("isLoaded"),_loadGlyphPage:function(){this.get("glyphPage")},_glyphPageRecordArrayDidChange:function(){if(this._glyphPageRecordArrayLengthBinding){this._glyphPageRecordArrayLengthBinding.disconnect();
this._glyphPageRecordArrayLengthBinding=null;this._glyphPageRecordArrayLength=-1}if(this.get("_glyphPageRecordArray")){this._glyphPageRecordArrayLengthBinding=this.bind("_glyphPageRecordArrayLength",SC.Binding.oneWay("._glyphPageRecordArray.length"))
}}.observes("_glyphPageRecordArray"),_glyphPageRecordArrayLengthDidChange:function(){var a=this.get("_glyphPageRecordArrayLength");
if((a>0)&&!this.glyphPageIsLoadedBinding){this.set("glyphPageIsLoaded",YES);this.set("glyphPageIsLoading",NO)
}}.observes("_glyphPageRecordArrayLength")});sc_require("models/highlight");sc_require("models/gm3_highlight");
Cv.PageMarkSet=SC.Object.extend({reads:null,pageIndex:null,marks:function(){var b=this.get("reads");
var a=this.get("pageIndex");var c=Cv.getPageMarks(b,a);return c}.property("reads").cacheable(),highlights:function(){var b=this.get("reads");
var a=this.get("pageIndex");var c=Cv.getPageHighlights(b,a);return c}.property("reads").cacheable(),gm3Highlights:function(){var b=this.get("reads");
var a=this.get("pageIndex");var c=Cv.getPageGm3Highlights(b,a);return c}.property("reads").cacheable()});
Cv.PaperOriginalityCumulativeData=SC.Record.extend({primaryKey:"id",paper:SC.Record.toOne("Cv.Paper",{key:"paperReviewed"}),primarySourceTreeNodesData:SC.Record.attr(Array,{key:"groupNodes"}),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),cumulativeGroupNodes:function(){var c=this.get("primarySourceTreeNodesData")||[];
var e=this.get("paper");var a=this.get("translateLanguage");var b=c.map(function(h,g){var f=Cv.OriginalitySourceGroupNode.create({index:g,paper:e,translateLanguage:a,primarySourceTreeNode:h});
return f},this);return b}.property("primarySourceTreeNodesData").cacheable(),primarySourceTreeNodes:function(){var a=this.get("cumulativeGroupNodes");
var b=a.getEach("primarySourceTreeNode");return b}.property("cumulativeGroupNodes").cacheable()});
Cv.PaperOriginalityFullSourceData=SC.Object.extend({paper:null,translateLanguage:null,_sourceDataRecordArrays:null,init:function(){arguments.callee.base.apply(this,arguments);
this._sourceDataRecordArrays={}},getSourceDataRecordArray:function(j,b){var h="%@:%@".fmt(j,b);
var e=this._sourceDataRecordArrays[h];if(!e){var f=this.getPath("paper.id");var c=this.get("translateLanguage");
var i="paperReviewed = %@ AND translateLanguage = %@ AND sourceId = %@ AND nodeId = %@".fmt(f,c,j,b);
var a="/paper/%@/report/content?g=1&c=%@&s=%@&im=1&fs=1&tl=%@".fmt(f,h,h,c);var g=SC.Query.local(Cv.OriginalityFullSourceData,{conditions:i,url:a});
e=Cv.store.find(g);this._sourceDataRecordArrays[h]=e}return e},unloadData:function(){var a=this.getPath("paper.id");
var b=this.get("translateLanguage");var e=SC.Query.local(Cv.OriginalityFullSourceData,{conditions:"paperReviewed = %@ AND translateLanguage = %@".fmt(a,b)});
var c=Cv.store.find(e).getEach("id");if(c.length>0){Cv.store.unloadRecords(Cv.OriginalityFullSourceData,c)
}this._sourceDataRecordArrays={}}});Cv.PaperOriginalitySingleSourceData=SC.Record.extend({primaryKey:"id",paper:SC.Record.toOne("Cv.Paper",{key:"paperReviewed"}),sourceTreeNodes:SC.Record.attr(Array),translateLanguage:SC.Record.attr(Number,{transform:{to:function(a){return parseInt(a)
}},defaultValue:Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH}),init:function(){arguments.callee.base.apply(this,arguments);
this._convertSourceTreeNodes()},_convertSourceTreeNodes:function(){var c=this.get("sourceTreeNodes")||[];
var b=this.get("paper");var a=this.get("translateLanguage");var e=c.map(function(g){g.preloadedMatchGroupsData=g.matchGroups;
delete g.matchGroups;var f=Cv.OriginalitySourceTreeNode.create(g,{paper:b,translateLanguage:a});
return f},this);this.set("sourceTreeNodes",e)}});Cv.PaperStub=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),title:SC.Record.attr(String,{key:"title"}),authorId:SC.Record.attr(Number,{key:"author"}),assignment:SC.Record.toOne("Cv.Assignment",{inverse:"papers",key:"assignment"}),pageCount:SC.Record.attr(Number,{key:"page_count"}),authorFirstName:SC.Record.attr(String,{key:"author_first_name"}),authorLastName:SC.Record.attr(String,{key:"author_last_name"}),authorFullName:SC.Record.attr(String,{key:"author_full_name"}),similarityScore:SC.Record.attr(Number,{key:"similarity_score"}),overlap:SC.Record.attr(Number,{key:"overlap"}),dateUploaded:SC.Record.attr(SC.DateTime,{key:"date_uploaded_local"}),grade:SC.Record.attr(Number,{key:"grade"}),overlapInternet:SC.Record.attr(Number,{key:"overlap_internet"}),overlapSubmittedWorks:SC.Record.attr(Number,{key:"overlap_submitted_works"}),overlapPublications:SC.Record.attr(Number,{key:"overlap_publications"}),translateOverlapInternet:SC.Record.attr(Number,{key:"translated_overlap_internet"}),translateOverlapSubmittedWorks:SC.Record.attr(Number,{key:"translated_overlap_submitted_works"}),translateOverlapPublications:SC.Record.attr(Number,{key:"translated_overlap_publications"}),filetype:SC.Record.attr(Number,{key:"filetype"}),listingDisplay:function(){return"%@ - %@".fmt(this.get("authorFullName"),this.get("title"))
}.property("authorFirstName","authorLastName","title").cacheable()});Cv.PmAnswer=SC.Record.extend({primaryKey:"id",review:SC.Record.toOne("Cv.Review",{key:"review"}),question:SC.Record.toOne("Cv.PmQuestion",{key:"question"}),value:SC.Record.attr(String,{key:"value"})});
Cv.PmAssignment=Cv.Assignment.extend({baseAssignment:SC.Record.attr(Cv.Assignment,{key:"base_assignment"}),latePaperDueDate:SC.Record.attr(SC.DateTime,{key:"late_paper_due_date"}),showNames:SC.Record.attr(Boolean,{key:"show_names"}),allowNonSubmitterReviews:SC.Record.attr(Boolean,{key:"allow_non_submitter_reviews"}),distributedReviews:SC.Record.attr(Number,{key:"distributed_reviews"}),reviewerSelectedReviews:SC.Record.attr(Number,{key:"reviewer_selected_reviews"}),requireSelfReviews:SC.Record.attr(Boolean,{key:"require_self_review"}),allowReviewsAcrossSections:SC.Record.attr(Boolean,{key:"allow_reviews_across_sections"}),submitterCanReadAllPapers:SC.Record.attr(Boolean,{key:"submitters_can_read_all_papers"}),studentsCanReadAllPapersAndReviews:SC.Record.attr(Boolean,{key:"students_can_read_all_papers_and_reviews"}),surveyInstructions:SC.Record.attr(String,{key:"survey_instructions"}),title:SC.Record.attr(String,{key:"title"}),maxPoints:SC.Record.attr(Number,{key:"max_points"}),displayTitle:function(){if(!this.get("baseAssignment")){return null
}var a="__ipDefaultFullDateFormat".loc();return(SC.empty(this.get("title"))||this.get("title")===" ")?"_PeerMark %@ : %@".loc(this.get("startDate").toFormattedString(a),this.get("dueDate").toFormattedString(a)):this.get("title")
}.property("baseAssignment").cacheable(),questions:function(){var e=this.get("id");
var b=[];if(e){var c=SC.Query.local(Cv.PmQuestion,{conditions:"assignment = {assignment}",assignment:this,orderBy:"sortOrder",url:"/assignment/peermark/%@/questions".fmt(e)});
var a=this.get("store");b=a.find(c)}return b}.property("id").cacheable()});Cv.PmAssignment.mixin({resourceName:"peermark",responseKey:"PmAssignment"});
Cv.PmQuestion=SC.Record.extend({primaryKey:"id",assignment:SC.Record.toOne("Cv.PmAssignment",{key:"pm_assignment"}),active:SC.Record.attr(Boolean,{key:"active"}),type:SC.Record.attr(Number,{key:"type"}),text:SC.Record.attr(String,{key:"text"}),minimumAnswerLength:SC.Record.attr(Number,{key:"minimum_answer_length"}),options:SC.Record.attr(Array,{key:"options"}),sortOrder:SC.Record.attr(Number,{key:"sort_order"})});
Cv.PmQuestion.mixin({resourceName:"question",responseKey:"PmQuestion"});Cv.Review=SC.Record.extend({primaryKey:"id",read:SC.Record.attr(Cv.Read,{key:"id"}),type:SC.Record.attr(Number,{key:"type"}),typeString:function(){return Cv.Review.TYPES[this.get("type")]
}.property("type").cacheable(),reviewerFirstName:SC.Record.attr(String,{key:"reviewer_first_name"}),reviewerLastName:SC.Record.attr(String,{key:"reviewer_last_name"}),reviewerFullName:SC.Record.attr(String,{key:"reviewer_full_name"}),reviewSet:SC.Record.attr(Number,{key:"review_set"}),percentComplete:SC.Record.attr(Number,{key:"percent_complete"}),rating:SC.Record.attr(Number,{key:"rating"}),forceAssociation:SC.Record.attr(Number,{key:"force_association"}),pmAssignment:SC.Record.attr(Cv.PmAssignment,{key:"pm_assignment"}),paperReviewed:function(){return this.getPath("read.paper")
}.property("read").cacheable(),reviewerNameInitials:SC.Record.attr(String,{key:"initials"}),readerNumber:SC.Record.attr(Number,{key:"reader_num"}),reviewerInitials:function(){return SC.none(this.get("reviewerNameInitials"))?"_R%@".loc(this.get("readerNumber")):this.get("initials")
}.property("reviewerNameInitials","readerNumber").cacheable(),submittedOnDate:SC.Record.attr(SC.DateTime,{key:"date_submitted_local"}),read:SC.Record.attr("Cv.Read",{key:"id"}),scoreBinding:".read.score",title:function(){return"%@".fmt(this.get("reviewerFullName"))
}.property("reviewerFullName").cacheable(),});Cv.Review.TYPES={"1":"_Distributed Review".loc(),"3":"_Self-Review".loc(),"2":"_Reviewer-Selected Review".loc(),"4":"_Instructor Review".loc()};
Cv.Review.MAX_SCORE=10;Cv.Review.mixin({resourceName:"review",responseKey:"Review"});
Cv.ReadMarksLazyLoader=SC.Object.extend({read:null,baseUrl:"",preloadedPageIndexes:null,loadedPageCount:0,_pageIsLoadedArray:null,_markChunkRecordArrays:null,chunkPageCount:3,init:function(){arguments.callee.base.apply(this,arguments);
var a=this.getPath("read.paper.pageCount");this._pageIsLoadedArray=new Array(a);var b=this.get("preloadedPageIndexes");
if(b){b.forEach(function(c){this._pageIsLoadedArray[c]=YES},this);this.set("loadedPageCount",b.get("length"))
}this._markChunkRecordArrays=[]},_pageChunkIndex:function(a){var b=this.getPath("read.paper.pageCount");
if(a<0){a=1}else{if(a>=b){a=b-1}}var c=Math.floor(a/this.get("chunkPageCount"));return c
},_chunkStartPageIndex:function(b){var a=b*this.get("chunkPageCount");return a},_chunkEndPageIndex:function(b){var a=this._chunkStartPageIndex(b+1)-1;
return a},_chunkRecordArrayStatusChanged:function(j,k,h,g){var c=j.get("status");
if(c&SC.Record.READY){var e=this._chunkStartPageIndex(g);var a=this._chunkEndPageIndex(g);
for(var f=e;f<=a;f++){this._pageIsLoadedArray[f]=YES}var l=this._pageIsLoadedArray.filter(function(i){return i
});var b=l.length;this.set("loadedPageCount",b);j.removeObserver("status",this,"_chunkRecordArrayStatusChanged")
}},isPageLoaded:function(a){var b=!!this._pageIsLoadedArray[a];return b},loadMarkChunk:function(f){var b=this._markChunkRecordArrays[f];
if(!b){var e=this._chunkStartPageIndex(f);var h=this._chunkEndPageIndex(f);var i=this.get("read");
var g=this.get("baseUrl");var c;if(g.indexOf("?")===-1){c="%@?page=%@&count=%@".fmt(g,e+1,this.get("chunkPageCount"))
}else{c="%@&page=%@&count=%@".fmt(g,e+1,this.get("chunkPageCount"))}var a=SC.Query.local(Cv.Mark,{conditions:"read = {read} AND pageIndex >= %@ AND pageIndex <= %@".fmt(e,h),read:i,url:c});
b=Cv.store.find(a);b.addObserver("status",this,"_chunkRecordArrayStatusChanged",f);
this._markChunkRecordArrays[f]=b}},loadPageMarks:function(a){if(this.isPageLoaded(a)){return
}var b=this._pageChunkIndex(a);this.loadMarkChunk(b)}});Cv.User=SC.Record.extend({primaryKey:"id",id:SC.Record.attr(Number),firstName:SC.Record.attr(String,{key:"first_name"}),lastName:SC.Record.attr(String,{key:"last_name"}),fullName:SC.Record.attr(String,{key:"full_name"}),email:SC.Record.attr(String,{key:"email"}),isNonEnrolledStudent:SC.Record.attr(Boolean,{key:"is_non_enrolled_student"}),userType:SC.Record.attr(String,{key:"user_type"}),pseudoUser:function(){var a=this.get("email"),c=new Array("tiimoodle.com","tiibb.com","example.com");
if(a){var b=a.replace(/.*@/,"");if(c.indexOf(b)===-1){return false}}return true}.property("email").cacheable(),useMultiColorHighlighting:SC.Record.attr(Boolean,{key:"use_colors",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}}}),bypassFirstTimeMessage:SC.Record.attr(Boolean,{key:"bypass_tii2gm_intercept_message",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}},defaultValue:YES}),bypassRubricManagerFirstTimeMessage:SC.Record.attr(Boolean,{key:"bypass_tii2rbm_intercept_message",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}},defaultValue:YES}),isUSSecondaryInstructor:SC.Record.attr(Boolean,{key:"is_US_SE_or_two_year_college_instructor",transform:{to:function(a){return !!parseInt(a)
},from:function(a){return a?1:0}},defaultValue:NO})});Cv.User.mixin({resourceName:"user",responseKey:"User"});
sc_require("models/user");Cv.Student=Cv.User.extend({"class":SC.Record.toOne(Cv.Class,{key:"class"})});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("cv_model")}Qmlib=SC.Object.create({NAMESPACE:"Qmlib",VERSION:"0.1.0",store:null,APP:null,incrementSetCount:function(a){if(SC.isArray(a)){a.forEach(function(b){b.set("count",b.get("count")+1)
})}else{a.set("count",a.get("count")+1)}},decrementSetCount:function(a){if(SC.isArray(a)){a.forEach(function(b){b.set("count",b.get("count")-1)
})}else{a.set("count",a.get("count")-1)}},createTemplateNoSet:function(a){var b=Qmlib.store.createRecord(Qm.QuickMarkTemplate,{symbol:a.symbol,description:a.description,locked_sets:[],removable_sets:[],owner:Qmlib.userController.get("id")});
b.commitWhenReady();return b},createTemplateInSet:function(a,c){var b=Qmlib.store.createRecord(Qm.QuickMarkTemplate,{symbol:a.symbol,description:a.description,locked_sets:[],owner:Qmlib.userController.get("id")});
b.get("removableSets").pushObject(c);b.commitWhenReady();Qmlib.incrementSetCount([c]);
return b},modifyTemplate:function(a,b){b.set("symbol",a.symbol);b.set("description",a.description);
b.commitWhenReady();return b},archiveTemplate:function(b){b.set("isArchived",YES);
b.commitWhenReady();var a=b.get("sets").compact();Qmlib.decrementSetCount(a)},addTemplateToSets:function(c,b){var f=c.get("removableSets");
var e=[];b.forEach(function(g){if(f.indexOf(g)<0){e.push(g)}},this);if(e.length>0){f.pushObjects(e);
var a=f.uniq();c.set("removableSets",a);Qmlib.incrementSetCount(b);c.commitWhenReady()
}return c},removeTemplateFromSets:function(b,a){b.get("removableSets").removeObjects(a);
Qmlib.decrementSetCount(a);b.commitWhenReady()},createSet:function(a){var b=Qmlib.store.createRecord(Qm.QuickMarkTemplateSet,{name:a.name||"Untitled",owner:Qmlib.userController.get("id"),count:0});
b.commitRecord();return b},createSetWithTemplates:function(a,c){var b=this.createSet(a);
var e=function(){if(!this.get("id")){return}c.forEach(function(f){Qmlib.addTemplateToSets(f,[this])
},this);this.removeObserver("status",this,e)};b.addObserver("status",b,e);return b
},deleteSet:function(a){if(a.get("isActiveSet")){this.invokeLast(this.autoSelectActiveSet)
}a.destroy();a.commitRecord()},modifySet:function(b,a){b.set("name",a.name);b.commitRecord();
return b},shareSetToAccount:function(e,c){var b=e.get("sharedToAccountIds")||[];b.pushObject(parseInt(c));
var a=b.uniq();e.set("sharedToAccountIds",a);e.commitRecord();return e},unShareSetToAccount:function(e,c){var b=e.get("sharedToAccountIds")||[];
b.removeObject(c);var a=b.uniq();e.set("sharedToAccountIds",a);e.commitRecord();return e
},shareSetToSections:function(e,b){var c=e.get("sharedToMasterClassIds")||[];c.pushObject(b);
var a=c.uniq();e.set("sharedToMasterClassIds",a);e.commitRecord();return e},unShareSetToSections:function(e,b){var c=e.get("sharedToMasterClassIds")||[];
c.removeObject(b);var a=c.uniq();e.set("sharedToMasterClassIds",a);e.commitRecord();
return e},setActiveSet:function(a){if(!a){return}var b=Qmlib.store.find(SC.Query.local(Qm.QuickMarkTemplateSet,"isActiveSet = YES"));
if(b){b.forEach(function(c){if((c.get("status")&SC.Record.BUSY)===0){c.set("isActiveSet",NO)
}})}a.set("isActiveSet",YES);a.commitRecord()},autoSelectActiveSet:function(){var a=Qmlib.store.find(SC.Query.local(Qm.QuickMarkTemplateSet,{conditions:"isPseudoSet = NO",orderBy:"sortName"}));
if(a.length()){this.setActiveSet(a.firstObject())}}});Qmlib.allTemplatesController=SC.ArrayController.create({contentBinding:SC.Binding.oneWay("Qmlib.templateSetController.templates")});
Qmlib.classController=SC.ObjectController.create({content:null});Qmlib.importController=SC.ObjectController.create({uploadTarget:function(){return"/gm3/qmset?output=json&cid=%@&aid=%@".fmt(Qmlib.classController.get("id")||"",Ip.getQueryStringParameter("aid")||"")
}.property(),importInProgress:NO,uploadRequested:NO,filePath:null,message:null,fileIsSelected:function(){return this.get("filePath")!==null
}.property("filePath").cacheable(),cancelImport:function(){this.set("message",null);
this.reset();this.set("importInProgress",NO)},reset:function(){this.set("filePath",null);
this.set("uploadRequested",NO)},beginImport:function(){this.set("importInProgress",YES)
},startUpload:function(){this.set("message",null);if(this.get("fileIsSelected")&&this.get("importInProgress")){this.set("uploadRequested",YES)
}},uploadViewDidComplete:function(b){var a=SC.isArray(b.QuickMarkTemplateSet)?b.QuickMarkTemplateSet[0]:null;
if(SC.none(a)){this.showErrors(b)}else{try{var f=Qmlib.store.loadRecord(Qm.QuickMarkTemplateSet,a);
var c=Qmlib.store.materializeRecord(f);this.set("message","_Import complete".loc());
this.invokeLast(function(){Qmlib.templateSetsController.selectSet(c)})}catch(g){this.set("message","_The import could not be completed.".loc())
}}this.reset()},showErrors:function(a){if(a.input_errors){if(!SC.none(a.input_errors.upload)){this.set("message","_An error occurred: %@".loc(a.input_errors.upload))
}else{this.set("message","_An error occurred: The file is in an invalid format.".loc())
}}else{this.set("message","_An error occurred.".loc())}}});Qmlib.searchController=SC.ObjectController.create({searchString:"",isSearching:function(){return(this.get("searchString")==="")?false:true
}.property("searchString").cacheable(),isSearchingDidChange:function(){var a=this.get("isSearching");
if(a&&Qmlib.templateSetsController.getPath("selection.firstObject")!==this.get("searchQuickMarkTemplateSet")){Qmlib.templateSetsController.set("LAST_SELECTED_SET",Qmlib.templateSetsController.getPath("selection.firstObject"));
Qmlib.templateSetsController.selectObject(this.get("searchQuickMarkTemplateSet"));
if(!this._selectionObserver){this.invokeLast(function(){this._selectionObserver=Qmlib.templateSetsController.addObserver("selection",this,this.searchSetSelectionDidChange)
})}}else{if(!a){Qmlib.templateSetsController.selectSet(Qmlib.templateSetsController.get("LAST_SELECTED_SET"));
Qmlib.templateSetsController.set("LAST_SELECTED_SET",null)}}}.observes("isSearching"),searchQuickMarkTemplateSet:function(){return Qmlib.store.createRecord(Qm.QuickMarkTemplateSet,{name:"Search",owner:Qmlib.userController.get("id"),id:-3})
}.property().cacheable(),filteredTemplates:[],_computeFilteredTemplates:function(){var a=Ip.escapeRegexSpecialCharacters(this.get("searchString").toLowerCase());
a=Ip.escapeHTML(a);if(this._timer&&this._timer.get("isScheduled")){this._timer.invalidate()
}this._timer=this.invokeLater(function(){var b=Qmlib.store.find(ALL_TEMPLATES_QUERY);
this.set("filteredTemplates",b.find(SC.Query.local(Qm.QuickMarkTemplate,"(name MATCHES({regex1})) OR (description MATCHES({regex2}))",{regex1:RegExp(a,"i"),regex2:RegExp(a,"i")})));
Qmlib.templatesController.updateContent()},1000)}.observes("searchString"),searchSetSelectionDidChange:function(){if(!Qmlib.templateSetsController.getPath("selection.firstObject.isSearchPseudoSet")){this.set("searchString","");
Qmlib.templateSetsController.removeObserver("selection",this,this.searchSetSelectionDidChange);
this._selectionObserver=null}}});Qmlib.selectionController=SC.ObjectController.create({EMPTY_STATE:-1,SET_STATE:0,SINGLE_ITEM_STATE:1,MULTIPLE_ITEM_STATE:2,PSEUDO_SET_STATE:3,setSelectionBinding:SC.Binding.oneWay("Qmlib.templateSetController.content"),templateSelectionBinding:SC.Binding.oneWay("Qmlib.templatesController.selection"),selectionState:function(){var a=Qmlib.templatesController.getPath("selection.length");
var b=Qmlib.templateSetController.get("content");if(!a&&!b){return this.EMPTY_STATE
}else{if(a>0){return(a===1)?this.SINGLE_ITEM_STATE:this.MULTIPLE_ITEM_STATE}else{if(b){if(b.get("isPseudoSet")){return this.PSEUDO_SET_STATE
}else{return this.SET_STATE}}}}}.property("setSelection","templateSelection").cacheable()});
Qmlib.templateController=SC.ObjectController.create({contentBinding:SC.Binding.oneWay("Qmlib.templatesController.selection"),titleForMultipleSelection:function(){var a=this.getPath("content.length");
if(a>1){return"_%@ selected".loc(a)}else{return""}}.property("content").cacheable(),selectionCount:function(){return this.getPath("content.length")
}.property("content").cacheable(),isEditable:function(){if(!this.get("content")){return NO
}return this.getPath("content.length")===1?(this.getPath("content.firstObject.isEditable")):NO
}.property("content").cacheable()});Qmlib.templateSetController=SC.ObjectController.create({temporaryName:null,contentBinding:SC.Binding.oneWay("Qmlib.templateSetsController.selection").single(),makeActive:function(){var a=this.get("content");
Qmlib.setActiveSet(a);if(this.didChangeActiveSet){this.didChangeActiveSet(a)}},userId:null,userIdBinding:"Qmlib.userController.id",isEditable:function(){var b=this.get("content"),a=this.get("userId");
return b&&a?b.isOwnedByUser(a):NO}.property("contentBinding","userId","owner").cacheable(),isSharedToUser:function(){var b=this.get("content"),a=this.get("userId");
return b&&a?!b.isOwnedByUser(a):YES}.property("userId").cacheable(),canAddToSet:function(){if(!this.get("content")){return NO
}return this.get("isPseudoSet")?this.get("isAllPseudoSet"):YES}.property("contentBinding").cacheable(),didChangeActiveSet:null,exportSet:function(){var a=Ip.LocalizedUrl.prepareUrl("/gm3/qmset/%@/templates?download=1&%@".fmt(this.get("id"),Qm.QuickMarkTemplate.queryString()));
Ip.downloadFromUrl(a)},isSharedToCurrentAccount:function(){var a=NO;var c=this.get("content");
if(c){var b=Ip.getQueryStringParameter("aid");a=c.isSharedToAccount(b)}return a}.property("content").cacheable(),isSharedToCurrentSections:function(){var c=NO;
var b=this.get("content");if(b){var a=Ip.getQueryStringParameter("cid");c=b.isSharedToSections(a)
}return c}.property("content").cacheable()});Qmlib.templateSetsController=SC.ArrayController.create({allowsMultipleSelection:NO,allowsEmptySelection:NO,content:null,orderBy:["sortName"],LAST_SELECTED_SET:null,deleteSelectedTemplateSet:function(){var b=this.get("selection").firstObject();
var a=this.get("content").objectAt(0);this.selectObject(a);SC.AlertPane.warn("_Confirm".loc(),"_You are about to delete a QuickMark set. Are you sure?".loc(),null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){Qmlib.deleteSet(b);
return YES}}})},selectSet:function(a){this.selectObject(a);return YES},isEditable:function(){if(!this.get("content")){return NO
}return !this.get("isLoading")}.property("isLoading").cacheable(),initialSelection:function(){if(Qmlib.userController&&(this.get("status")&SC.Record.READY)!==0){this.selectObject(this.get("content").findProperty("isActiveSet",YES))
}}.observes("status"),isLoading:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable(),realSets:function(){if(!this.get("content")){return[]
}return this.get("content").find(SC.Query.local(Qm.QuickMarkTemplateSet,{conditions:"isPseudoSet = NO",orderBy:"sortName"}))
}.property("*content.[]").cacheable()});Qmlib.templatesController=SC.ArrayController.create({content:null,allowsMultipleSelection:YES,selectionBindingDefault:SC.Binding.single(),orderBy:["name"],JUST_CREATED_TEMPLATE:null,searchString:null,searchStringBinding:"Qmlib.searchController.searchString",allTemplates:null,allTemplatesBinding:"Qmlib.allTemplatesController.content",allTemplatesStatus:null,allTemplatesStatusBinding:"Qmlib.allTemplatesController.status",allTemplatesLength:null,allTemplatesLengthBinding:"Qmlib.allTemplatesController.length",isSearching:null,isSearchingBinding:"Qmlib.searchController.isSearching",clearSelectionSet:function(){var a=this.get("selection");
if(a.length()>0){this.set("selection",SC.SelectionSet.EMPTY)}}.observes("Qmlib.templateSetController.content"),allTemplatesSelected:function(){var a=this.getPath("selection.length");
var b=this.getPath("content.length");return(b!=0&&b<=a)?YES:NO}.property("selection").cacheable(),updateContent:function(){var a;
var b=Qmlib.searchController.get("isSearching");if(!b){a=Qmlib.templateSetController.get("templates")
}else{a=Qmlib.searchController.get("filteredTemplates")}this.set("content",a)}.observes("Qmlib.templateSetController*templates.[]"),searchStringDidChange:function(){this.updateContent()
}.observes("Qmlib.searchController.searchString"),contentDidChange:function(){if(this.get("JUST_CREATED_TEMPLATE")){this.selectObject(this.get("JUST_CREATED_TEMPLATE"));
this.set("JUST_CREATED_SELECTED",null)}else{this.clearSelectionSet()}this.invokeOnce("arrayContentDidChange")
}.observes("content","length"),unarchiveSelectedTemplates:function(){this.get("selection").forEach(function(a){a.set("isArchived",NO);
a.commitRecord()})},isLoading:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});Qmlib.userController=SC.ObjectController.create({isMasterClass:NO,isMasterClassBinding:SC.Binding.oneWay("Qmlib.classController.isMasterClass"),canShareToSections:function(){return this.get("isMasterClass")
}.property("isMasterClass").cacheable(),canShareToAccounts:function(){return !SC.none(this.get("shareToAccount"))
}.property("shareToAccount").cacheable(),shareToAccount:function(){return Ip.getQueryStringParameter("aid")
}.property().cacheable()});Qmlib.EscapeValue={isTextArea:NO,convertUrls:YES,value:null,unescapedValue:function(a,c){var b=this.get("isTextArea");
var e=this.get("convertUrls");if(c!==undefined){c=c||"";if(b){c=Ip.breakTagsToNewLines(c)
}c=Ip.unscrubHTML(c);if(e){c=Ip.anchorTagsToUrls(c)}this.set("value",c)}else{c=this.get("value")
}if(c){if(e){c=Ip.urlsToAnchorTags(c)}c=Ip.scrubHTML(c);if(b){c=Ip.newLinesToBreakTags(c)
}}return c}.property("value").cacheable()};Qmlib.Hoverable={isHovering:NO,mouseEntered:function(){this.set("isHovering",YES)
},mouseExited:function(){this.set("isHovering",NO)}};Qm.QuickMarkTemplate.prototype.mixin({isEditable:function(){var b=(this.get("ownerId")==Qmlib.userController.get("id"));
var a=this.get("isAccessedViaIntegrations");var c=this.get("isOwnedViaIntegrations");
return(a?c:b)}.property("ownerId","isAccessedViaIntegrations","isOwnedViaIntegrations").cacheable()});
Qm.QuickMarkTemplate.mixin({queryString:function(){return"cid=%@".fmt(Qmlib.classController.get("id"))
}});sc_require("models/quick_mark_template");Qmlib.SetOwner={quickMarkTemplateSets:function(){return this.getQuickMarkTemplateSets(true)
}.property().cacheable(),getQuickMarkTemplateSets:function(e){var a=this.get("store");
var c=Qmlib.classController.get("id")||"";if(!this._quickMarkTemplateSetsQuery){var b=Ip.LocalizedUrl.prepareUrl("/gm3/qmset?cid="+c);
if(e){b+="&include_set_counts=1"}this._quickMarkTemplateSetsQuery=SC.Query.local(Qm.QuickMarkTemplateSet,{url:b,includeSetCounts:e,refreshToIncludeCountsIfNeeded:function(f){if(this.get("includeSetCounts")){return
}this.set("includeSetCounts",YES);var g=this.get("url");if(g.indexOf("include_set_counts=")===-1){g+="&include_set_counts=1";
this.set("url",g)}var h=f.find(this);h.refresh()}})}return a.find(this._quickMarkTemplateSetsQuery)
}};sc_require("mixins/hoverable");Qmlib.TemplateSetView=SC.View.extend(SC.Control,Qmlib.Hoverable,{content:null,classNames:["template-set-view"],displayProperties:["classNames"],isEditingNameBinding:".nameView.isEditing",isHovering:NO,isSearchingBinding:"Qmlib.searchController.isSearching",isSearchPseudoSetBinding:".content.isSearchPseudoSet",isVisible:function(){return this.get("isSearchPseudoSet")?this.get("isSearching"):YES
}.property("isSearchPseudoSet","isSearching").cacheable(),layout:{top:0,left:0,bottom:0,right:0},childViews:"iconView nameView lockView countView renameButtonView saveButtonView".w(),iconView:Ip.ImageView.design({layout:{left:5,top:5,width:9,height:10},classNames:["set-status-icon"],activeImageUrl:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/qmm-dot-active.png",inactiveImageUrl:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/qmm-dot.png",isPseudoSetBinding:".parentView.content.isPseudoSet",isActiveSetBinding:".parentView.content.isActiveSet",setIdBinding:".parentView.content.id",value:function(){return this.get("isActiveSet")?this.get("activeImageUrl"):this.get("inactiveImageUrl")
}.property("isActiveSet").cacheable(),isVisible:function(){return(!this.get("isPseudoSet"))
}.property("isPseudoSet").cacheable()}),nameView:SC.LabelView.design({classNames:"ellipsis".w(),layout:function(){if(this.get("isPseudoSet")){return{left:4,right:50}
}else{return{left:19,right:50}}}.property("isPseudoSet").cacheable(),isPseudoSetBinding:".parentView.content.isPseudoSet",contentBinding:".parentView.content",contentValueKey:"displayName",isEditableBinding:".parentView.content.isEditable",exampleInlineTextFieldView:Qmlib.SetNameTextFieldView,isEditingChanged:function(){if(this.get("isEditing")){Qmlib.templateSetsController.selectSet(this.get("content"))
}}.observes(".isEditing"),nameDidChange:function(){this.get("content").commitRecord()
}.observes(".content.name"),saveName:function(){var a=Qmlib.templateSetController.get("temporaryName");
if(a){this.setPath("content.name",a);Qmlib.templateSetController.set("temporaryName",null)
}},doubleClick:function(){},beginEditing:function(){if(this.get("isEditing")){return YES
}if(!this.get("isEditable")){return NO}var b=this.$();var e=this.get("value")||"";
var c=SC.viewportOffset(b[0]);var a=this.convertFrameFromView(this.get("frame"),null);
c.width=a.width;c.height=a.height;Qmlib.SetNameTextFieldView.beginEditing({frame:c,delegate:this,exampleElement:b,value:e,multiline:this.get("isInlineEditorMultiline"),isCollection:NO,validator:this.get("validator"),exampleInlineTextFieldView:this.get("exampleInlineTextFieldView"),commitOnBlur:NO})
}}),userIdBinding:"Qmlib.userController.id",contentIsEditable:function(){var b=this.get("content"),a=this.get("userId");
return b&&a?b.isOwnedByUser(a):NO}.property("content","userId").cacheable(),contentIsSharedToUser:function(){var b=this.get("content"),a=this.get("userId");
return b&&a?b.isSharedToUser(a):NO}.property("content","userId").cacheable(),lockView:Ip.ImageView.design({classNames:["lock"],layout:{top:5,right:30,width:9,height:10},value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/qmm-lock.png",isSharedToUserBinding:".parentView.contentIsSharedToUser",isPseudoSetBinding:".parentView.content.isPseudoSet",isEditableBinding:".parentView.contentIsEditable",isVisible:function(){return((!this.get("isPseudoSet")&&this.get("isSharedToUser"))||!this.get("isEditable"))
}.property("isPseudoSet","isSharedToUser","isEditable").cacheable()}),countView:SC.LabelView.design({classNames:["count-label"],layout:{right:5,width:25},valueBinding:".parentView.content.count",textAlign:SC.ALIGN_RIGHT}),renameButtonView:SC.LabelView.design({classNames:["rename-button","clickable"],textAlign:SC.ALIGN_RIGHT,layout:{right:5,width:81},value:"_Rename".loc(),isVisible:NO,mouseDown:function(a){this.getPath("parentView.nameView").beginEditing()
}}),saveButtonView:SC.LabelView.design({classNames:["save-button","clickable"],textAlign:SC.ALIGN_CENTER,layout:{right:0,width:45},value:"_Save".loc(),isVisibleBinding:".parentView.isEditingName",mouseDown:function(a){this.getPath("parentView.nameView").saveName();
return true}}),updateViewMode:function(){var b=this.get("isEditingName");var c=this.get("isHovering");
var a=this.get("contentIsEditable");var e=this.get("classNames").concat()||[];if(b){if(e.indexOf("rename")==-1){e.pushObject("rename")
}this.setPath("renameButtonView.isVisible",NO);this.setPath("countView.isVisible",NO)
}else{if(c&&a){e.removeObject("rename");this.setPath("renameButtonView.isVisible",YES);
this.setPath("countView.isVisible",NO)}else{e.removeObject("rename");this.setPath("renameButtonView.isVisible",NO);
this.setPath("countView.isVisible",YES)}}this.set("classNames",e)}.observes(".isEditingName",".isHovering")});
sc_require("views/template_set");ALL_TEMPLATES_QUERY=SC.Query.local(Qm.QuickMarkTemplate,{conditions:"isArchived != YES",url:"/gm3/qmset/-1/templates",hasAppendedClassId:NO,classIdBinding:"Qmlib.classController.id",classIdDidChange:function(){var a=this.get("hasAppendedClassId");
if(a){return}var b=this.get("classId");if(b){this.set("hasAppendedClassId",YES);this.url=this.url+"?cid=%@".fmt(b)
}}.observes("classId")});Qm.QuickMarkTemplateSet.prototype.mixin({templatesQueryObject:function(){var b=this.get("store");
var a=this.get("id");var c=Qmlib.classController.get("id")||"";if(this.get("isAllPseudoSet")){return ALL_TEMPLATES_QUERY
}else{if(this.get("isArchivePseudoSet")){return SC.Query.local(Qm.QuickMarkTemplate,{conditions:"isArchived = YES",url:"/gm3/qmset/%@/templates?cid=%@".fmt(a,c)})
}else{if(this.get("isSearchPseudoSet")||this.get("isNullPseudoSet")){return null}else{return SC.Query.local(Qm.QuickMarkTemplate,{conditions:"((%@ ANY locked_sets) OR (%@ ANY removable_sets)) AND (isArchived != YES)".fmt(a,a),url:b.isQueryFound(ALL_TEMPLATES_QUERY)?null:"/gm3/qmset/%@/templates?cid=%@".fmt(a,c)})
}}}}.property().cacheable(),templates:function(){var a=this.get("store");var b=this.get("templatesQueryObject");
if(b&&this.get("id")){return a.find(b)}}.property("id").cacheable(),templateSetViewClass:Qmlib.TemplateSetView});
Qm.QuickMarkTemplateSet.mixin({queryString:function(){return"cid=%@".fmt(Qmlib.classController.get("id"))
}});Qmlib.AggregateSetView=SC.View.extend(SC.Control,{content:null,classNames:"aggregate-set-view",layout:{top:0,left:0,bottom:0,right:0},childViews:"nameView countView".w(),nameView:SC.LabelView.design({layout:{left:5,width:170},contentBinding:".parentView.content",contentValueKey:"name",isEditable:NO}),countView:SC.LabelView.design({layout:{right:5,width:25},contentBinding:".parentView.content",contentValueKey:"count",textAlign:SC.ALIGN_RIGHT,isEditable:NO})});
Qmlib.LibraryView=SC.View.extend(SC.Border,{layout:{top:0,left:0,bottom:0,right:0},childViews:"headerView toolbarView managerView setListLoadingView importView".w(),classNames:"qmm",setListLoadingView:Ip.LoadingView.design({layout:{top:0,right:0,bottom:0,left:0},isVisibleBinding:SC.Binding.oneWay("Qmlib.templateSetsController.isLoading").bool(),loadingText:"_Loading Library...".loc()}),headerView:SC.View.design({layout:{top:0,right:0,height:40,left:0},classNames:["header-view"],childViews:"labelView searchFieldView importExportButtonView".w(),labelView:SC.LabelView.extend({layout:{centerY:0,left:5,width:350,height:24},textAlign:SC.ALIGN_LEFT,controlSize:SC.LARGE_CONTROL_SIZE,value:"_QuickMark Manager".loc()}),searchFieldView:SC.TextFieldView.extend({layout:{centerY:0,width:300,right:60,height:20},hint:"_Search all QuickMarks".loc(),spellCheckEnabled:NO,valueBinding:"Qmlib.searchController.searchString",rightAccessoryView:Ip.ImageView.design({layout:{right:3,width:15,top:3,height:15},isVisibleBinding:".layoutView.value",isVisibleBindingDefault:SC.Binding.oneWay().bool(),value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/Button_Clear_Search_15x15.gif",mouseDown:function(){var a=this.get("layoutView");
a.set("value","");return YES}})}),importExportButtonView:SC.PopupButtonView.design({layout:{centerY:0,height:30,right:10,width:30},classNames:["header-button","button-share"],title:"_I/E".loc(),menu:SC.MenuPane.create({itemDisableMenuFlashKey:"shouldPerformActionImmediately",items:function(){return[{name:"_Import Set...".loc(),isEnabled:YES,action:"beginImport",target:"Qmlib.importController"},{name:"_Export Set...".loc(),isEnabledBinding:SC.Binding.oneWay("Qmlib.templateSetController.isPseudoSet").not(),action:"exportSet",target:"Qmlib.templateSetController",shouldPerformActionImmediately:(SC.browser.isIE&&(SC.browser.compareVersion(8)===0))}]
}.property().cacheable(),isEnabled:YES,itemTitleKey:"name",itemSeparatorKey:"separator",itemCheckboxKey:"isChecked",preferType:SC.PICKER_MENU,layout:{width:150},itemHeightKey:"height"})})}),toolbarView:SC.ToolbarView.design({layout:{top:40,height:30,right:0,left:0},classNames:["toolbar-view"],childViews:"setHeaderView itemHeaderView detailHeaderView".w(),setHeaderView:SC.View.design({layout:{centerY:0,bottom:0,left:0,width:0.3},childViews:"labelView buttonView".w(),labelView:SC.LabelView.design({layout:{centerY:0,right:30,height:20,left:5},value:"_SETS".loc()}),buttonView:SC.ButtonView.extend({layout:{centerY:0,right:5,height:24,width:23},titleMinWidth:null,layerId:"qmm_add_set",classNames:"manager-add",target:this,action:function(){var a=this.get("pane");
a.popup(this,SC.PICKER_POINTER,[3,0,1,2,3]);a.getPath("contentView.fieldView").becomeFirstResponder()
},isEnabledBinding:"Qmlib.templateSetsController.isEditable",pane:function(){var a=SC.PickerPane.create({layout:{height:30,width:250},layerId:"qmm_add_set_popup",contentView:SC.View.extend({layout:{top:0,right:0,height:30,left:0},childViews:"fieldView buttonView".w(),fieldView:SC.TextFieldView.design({layout:{centerY:0,height:24,width:164,left:2},isPassword:NO,isTextArea:NO,keyDown:function(c){var b=c.which;
if(b===13&&!c.isIMEInput){this.getPath("parentView.buttonView").triggerAction();return true
}arguments.callee.base.apply(this,arguments)}}),buttonView:SC.ButtonView.design({layout:{centerY:0,height:24,width:80,right:2},title:"_Save".loc(),setListBinding:"Qmlib.templateSetsController",isEnabledBinding:SC.Binding.oneWay(".parentView.fieldView.value").bool(),action:function(){var e=this.getPath("parentView.fieldView.value");
var c=Qmlib.createSet({name:e});var b=this.get("setList");b.selectObject(c);this.getPath("parentView.fieldView").setFieldValue("");
this.get("pane").remove();return YES}})})});return a}.property().cacheable()})}),itemHeaderView:SC.View.design({layout:{centerY:0,bottom:0,left:0.3,width:0.3},classNames:"header-quickmarks",childViews:"markLabelView checkAllView addQMButtonView".w(),markLabelView:SC.LabelView.design({layout:{centerY:0,height:20,left:5,width:200},value:"_MARKS".loc()}),checkAllView:SC.LabelView.design({layout:{centerY:0,height:20,left:60,width:120},classNames:["select-all"],allSelectedBinding:SC.Binding.oneWay("Qmlib.templatesController.allTemplatesSelected"),isEnabledBinding:SC.Binding.bool("Qmlib.templatesController.isLoading").not(),value:function(){var a=!this.get("allSelected")?"_Select all".loc():"_Deselect all".loc();
return'<span>(<a href="#">%@</a>)</span>'.fmt(a)}.property("allSelected").cacheable(),escapeHTML:NO,click:function(a){arguments.callee.base.apply(this,arguments);
this.checkBoxClicked(!this.get("allSelected"))},checkBoxClicked:function(b,e){var c=this.getPath("parentView.parentView.parentView.managerView.templatesView.contentView");
if(b){c.selectAll()}else{if(Qmlib.templatesController.get("allTemplatesSelected")||e){var a=c.get("selection");
if(a.length()>0){c.set("selection",SC.SelectionSet.EMPTY)}}}},setSelectionDidChange:function(){this.set("allSelected",NO)
}.observes("Qmlib.templateSetsController.selection")}).loc(Ip.getLocalizationHash("Qmlib.selectAllTextView")),addQMButtonView:SC.ButtonView.design({layout:{centerY:0,right:5,height:24,width:23},titleMinWidth:null,layerId:"qmm_add_qm",classNames:"manager-add",action:"createNewQM",targetBinding:".parentView.parentView.parentView.managerView.detailView",isEnabledBinding:"Qmlib.templateSetController.canAddToSet"})}),detailHeaderView:SC.ContainerView.design({layout:{centerY:0,right:0,bottom:0,width:0.4},detailViewBinding:".parentView.parentView.managerView.detailView",init:function(){arguments.callee.base.apply(this,arguments);
this.updateContentView()},updateContentView:function(){var b=Qmlib.templatesController.get("hasSelection");
var c=Qmlib.templateSetController.getPath("content");var a=this.getPath("detailView.isEditing");
if(a){this.set("contentView",this.get("editingButtonSetView"))}else{if(b&&Qmlib.templateSetController.get("isArchivePseudoSet")){this.set("contentView",SC.View.create({layout:{top:0,right:5,left:0,bottom:0},childViews:"unarchiveButtonView".w(),unarchiveButtonView:SC.ButtonView.design({layout:{centerY:0,right:0,height:24,width:160},title:"_unarchive template(s)".loc(),action:"unarchiveSelectedTemplates",target:"Qmlib.templatesController"})}))
}else{if(!b&&Qmlib.templateSetController.get("hasContent")&&Qmlib.templateSetController.get("isEditable")){this.set("contentView",SC.View.create({layout:{top:0,right:0,left:0,bottom:0},childViews:"deleteButtonView".w(),deleteButtonView:SC.ButtonView.design({layout:{top:0,right:0,height:30,width:80},classNames:"qmm-actionbutton",title:"_Delete set".loc(),action:"deleteSelectedTemplateSet",target:"Qmlib.templateSetsController"}).loc(Ip.getLocalizationHash("Qmlib.setDeleteButton"))}))
}else{if(!b){this.set("contentView",SC.View.create({}))}else{this.set("contentView",this.get("readOnlyButtonSetView"))
}}}}}.observes("Qmlib.templatesController.selection",".detailView.isEditing","Qmlib.templateSetsController.selection","Qmlib.templateSetController.isEditable"),readOnlyButtonSetView:function(){var a=SC.View.create({layout:{top:0,bottom:0,left:0,right:0},childViews:"actionsButtonView editButtonView".w(),actionsButtonView:SC.ButtonView.design({layout:{top:0,width:80,height:30,left:1},classNames:"qmm-actionbutton",title:"_Actions".loc(),action:function(){this.get("pane").popup(this,SC.PICKER_POINTER,[3,0,1,2,3])
},pane:function(){var b=SC.PickerPane.create({layout:{height:210,width:250},classNames:"qmm-action-popover",contentView:SC.ListView.design({layout:{top:0,right:0,height:210,left:0},content:[1],rowHeight:210,exampleView:SC.TabView.design({layout:{top:15,right:2,height:200,left:2},createChildViews:function(){var c=arguments.callee.base.apply(this,arguments);
this.get("segmentedView").set("layout",{top:5,left:0,right:0,height:25});this.get("containerView").set("layout",{top:35,left:5,right:5,bottom:5});
return c},segmentedView:SC.SegmentedView.design({classNames:"qm-template-actions-segmented-view"}).loc(Ip.getLocalizationHash("Qmlib.qmTemplateActionsView")),items:function(){return[{title:"_Add to set".loc(),value:this.get("setListView")},{title:"_New set".loc(),value:this.get("fieldButtonView")},{title:"_Other".loc(),value:this.get("otherActionsView")}]
}.property().cacheable(),itemTitleKey:"title",itemValueKey:"value",setListView:function(){var c=SC.ScrollView.create({layout:{top:0,right:0,bottom:0,left:0},contentView:SC.ListView.design({layout:{top:0,right:0,bottom:0,left:0},contentBinding:"Qmlib.templateSetsController.realSets",selectedItemsBinding:"Qmlib.templateController.content",actOnSelect:YES,action:function(){var e=this.getPath("selection.firstObject");
var f=this.get("selectedItems").forEach(function(g){Qmlib.addTemplateToSets(g,[e])
});Qmlib.templatesController.deselectObjects(f);this.set("selection",null);this.get("pane").remove();
return YES},contentValueKey:"name"})});return c}.property().cacheable(),fieldButtonView:SC.View.create({layout:{top:0,right:0,bottom:0,left:0},childViews:"fieldView buttonView".w(),fieldView:SC.TextFieldView.design({layout:{height:20,width:156},isPassword:NO,isTextArea:NO}),buttonView:SC.ButtonView.design({layout:{height:24,right:0,top:0,width:71},classNames:"qmm-actionbutton qmm-save",title:"_Save".loc(),selectedItemsBinding:"Qmlib.templateController.content",action:function(){var c=this.get("selectedItems");
var f=this.getPath("parentView.fieldView.value");var e=Qmlib.createSetWithTemplates({name:f},c);
this.getPath("parentView.fieldView").set("value",null);this.get("pane").remove();
return YES}})}),otherActionsView:SC.View.create({layout:{top:0,right:0,bottom:0,left:0},selectedItemsBinding:"Qmlib.templateController.content",selectedSetBinding:"Qmlib.templateSetsController.selection",backgroundColor:"#FFF",childViews:function(){var c=Qmlib.templateController.get("content");
var g=[];if(c.length()){var f=c.find(function(h){return h.get("ownerId")!=Qmlib.userController.get("id")
});if(!f){g.push("archiveButtonView")}var e=c.find(function(h){return h.get("removableSets").indexOf(Qmlib.templateSetController.get("content"))===-1
});if(!e){g.push("removeButtonView")}}return g}.property(".selectedItems.[]").cacheable(),archiveButtonView:SC.LabelView.design({layout:{top:0,right:0,height:15,left:5},value:"_Archive".loc(),layerId:"qm_archive_button",click:function(){var e=this.getPath("parentView.selectedItems");
var c=e.toArray();c.forEach(function(f){f.set("templateIsSelected",NO);Qmlib.archiveTemplate(f)
});Qmlib.templatesController.deselectObjects(e);this.set("selection",null);this.get("pane").remove();
return YES}}),removeButtonView:SC.LabelView.design({layout:{top:20,right:0,height:15,left:5},value:"_Remove from this set".loc(),layerId:"qm_remove_button",click:function(){var e=this.getPath("parentView.selectedItems");
var c=Qmlib.templateSetController.get("content");e.forEach(function(f){f.set("templateIsSelected",NO);
Qmlib.removeTemplateFromSets(f,[c])});Qmlib.templatesController.deselectObjects(e);
this.set("selection",null);this.get("pane").remove();return YES}})})})}).loc(Ip.getLocalizationHash("Qmlib.actionsPickerPane"))});
return b}.property().cacheable()}),editButtonView:SC.ButtonView.design({layout:{top:0,right:0,height:24,width:80},classNames:"qmm-actionbutton",title:"_Edit".loc(),isEnabledBinding:"Qmlib.templateController.isEditable",action:"beginEditing",targetBinding:".parentView.parentView.detailView"})});
return a}.property().cacheable(),editingButtonSetView:function(){var a=SC.View.create({layout:{top:0,bottom:0,left:0,right:0},childViews:"saveButtonView cancelButtonView".w(),saveButtonView:SC.ButtonView.design({layout:{top:0,right:81,height:30,width:80},classNames:"qmm-actionbutton",title:"_Save".loc(),action:"saveChanges",targetBinding:".parentView.parentView.detailView",isEnabledBinding:SC.Binding.oneWay(".parentView.parentView.detailView.contentView.titleFieldView.unescapedValue").bool()}),cancelButtonView:SC.ButtonView.design({layout:{top:0,right:0,height:30,width:80},classNames:"qmm-actionbutton",title:"_Cancel".loc(),action:"clearChanges",targetBinding:".parentView.parentView.detailView"})});
return a}.property().cacheable()})}),managerView:SC.View.design({layout:{top:70,left:0,right:0,bottom:0},classNames:"qmm-pane",childViews:"setListView templatesView selectionHelpView templatesListLoadingView detailView".w(),setListView:SC.ScrollView.design({layout:{top:0,bottom:0,left:0,width:0.3},classNames:"qmm-pane",contentView:SC.ListView.design({contentBinding:"Qmlib.templateSetsController.arrangedObjects",_refreshSetsQueryIfNeeded:function(){var b=this.get("isVisibleInWindow");
var c=Qmlib.templateSetsController.get("content");if(b&&c){var a=c.get("query");a.refreshToIncludeCountsIfNeeded(c.get("store"))
}}.observes("isVisibleInWindow"),selectionBinding:"Qmlib.templateSetsController.selection",canEditContent:YES,contentExampleViewKey:"templateSetViewClass",rowHeight:20})}),templatesListLoadingView:Ip.LoadingView.design({layout:{top:0,bottom:0,left:0.3,width:0.3},isVisibleBinding:SC.Binding.oneWay("Qmlib.templatesController.isLoading").bool(),loadingText:"_Loading QuickMarks...".loc()}),selectionHelpView:SC.LabelView.design({layout:{height:40,right:0,bottom:0,left:0.3,width:0.3,zIndex:1},value:"_Hold down Ctrl/Command or Shift to select multiple".loc(),classNames:["qmm-pane","selection-help","sc-gray-border"]}),templatesView:SC.ScrollView.design({layout:{top:0,bottom:40,left:0.3,width:0.3,zIndex:1},classNames:"qmm-pane",setSelectionDidChange:function(){this.set("verticalScrollOffset",0)
}.observes("Qmlib.templateSetsController.selection"),contentView:SC.ListView.design({classNames:["template-list-view"],layout:{top:0,right:0,bottom:0,left:5},contentBinding:"Qmlib.templatesController.arrangedObjects",selectionBinding:"Qmlib.templatesController.selection",canEditContent:NO,contentValueKey:"name",exampleView:SC.ListItemView.design(Ip.AnchorTagActions,SC.StaticLayout,{layout:{height:20,left:0,right:0},classNames:["template-view"],templateIsSelectedBinding:".content.templateIsSelected",escapeHTML:NO,contentRightIconKey:"lockedIconUrl",templateSetBinding:"Qmlib.templateSetController.content",hasContentRightIcon:function(){return(this.getPath("content.ownerId")!=Qmlib.userController.get("id"))&&this.getPath("content.removableSets").indexOf(this.get("templateSet"))===-1
}.property("templateSet").cacheable()}),setSelectionDidChange:function(){var a=this.get("selection");
if(a.length()>0){this.set("selection",SC.SelectionSet.EMPTY)}return YES}.observes("Qmlib.templateSetsController.selection")})}),detailView:SC.ScrollView.design(SC.Border,{layout:{top:0,left:0.6,bottom:0,width:0.4,zIndex:0},classNames:"qmm-pane",selectionStateBinding:SC.Binding.oneWay("Qmlib.selectionController.selectionState"),templateBinding:"Qmlib.templateController.content",selectedTemplateBinding:"Qmlib.templatesController.selection",isEditing:NO,isCreating:NO,alertPane:null,editingTemplate:null,beginEditing:function(){this.set("isEditing",YES);
this.set("editingTemplate",this.get("template"));this.setPath("contentView.editTitleText",Qmlib.templateController.get("name"));
this.setPath("contentView.editDescriptionText",Qmlib.templateController.get("description"))
},createNewQM:function(){this.set("isCreating",YES);this.set("isEditing",YES);Qmlib.templatesController.clearSelectionSet();
this.setPath("contentView.editTitleText","");this.setPath("contentView.editDescriptionText","")
},saveChanges:function(){var e=this.getPath("contentView.titleFieldView");e.fieldDidBlur();
var a=this.getPath("contentView.descriptionFieldView");a.fieldDidBlur();var b=e.get("unescapedValue");
var c=a.get("unescapedValue");if(this.get("isCreating")){var f=Qmlib.templateSetController.get("content");
var g;if(f.get("id")==-1){g=Qmlib.createTemplateNoSet({symbol:b,description:c})}else{g=Qmlib.createTemplateInSet({symbol:b,description:c},f)
}Qmlib.templatesController.set("JUST_CREATED_TEMPLATE",g)}else{Qmlib.modifyTemplate({symbol:b,description:c},Qmlib.templateController.get("content").firstObject())
}this.clearChanges()},clearChanges:function(){this.set("isEditing",NO);this.set("isCreating",NO);
this.setPath("contentView.editTitleText",null);this.setPath("contentView.editDescriptionText",null)
},_templateDidChange:function(){this.invokeLast(function(){var a=this.getPath("selectedTemplate.firstObject.id");
var b=this.getPath("editingTemplate.firstObject.id");if(this.get("selectionState")!==0&&this.get("isEditing")&&!this.get("isCreating")&&!this.get("alertPane")&&(a!=b)){this.alertPane=SC.AlertPane.warn("_Your changes will not be saved.".loc(),"_Are you sure you want to do this?".loc(),null,"_OK".loc(),"_Cancel".loc(),this)
}})}.observes("selectionState","selectedTemplate"),alertPaneDidDismiss:function(b,a){switch(a){case SC.BUTTON1_STATUS:this.clearChanges();
break;default:this.set("selectedTemplate",this.get("editingTemplate"));break}this.set("alertPane",null)
},updateContentView:function(){var b=this.get("selectionState");var a=this.get("isEditing");
if(a){this.set("contentView",this.get("singleItemEditView"))}else{if(b==Qmlib.selectionController.SET_STATE){this.set("contentView",this.get("setView"))
}else{if(b==Qmlib.selectionController.SINGLE_ITEM_STATE){this.set("contentView",this.get("singleItemDisplayView"))
}else{if(b==Qmlib.selectionController.MULTIPLE_ITEM_STATE){this.set("contentView",this.get("multipleItemView"))
}else{this.set("contentView",SC.LabelView.create({layout:{centerX:0,centerY:0,width:200,height:30},value:"",textAlign:SC.ALIGN_CENTER}))
}}}}}.observes("selectionState","isEditing","template"),setView:function(){var a=SC.View.create({layout:{top:0,bottom:0,left:0,right:0},childViews:"titleView settingsView".w(),titleView:SC.LabelView.design({layout:{top:5,left:10,height:25,right:10},controlSize:SC.LARGE_CONTROL_SIZE,isEditable:NO,isInlineEditorMultiline:NO,valueBinding:"Qmlib.templateSetController.name"}),settingsView:SC.View.design(SC.Control,{layout:{top:40,right:10,bottom:10,left:10},childViews:"activeSetSettingView sharedSetSettingView".w(),activeSetSettingView:SC.LabelView.design(SC.Control,{layout:{top:0,left:0,right:0},escapeHTML:NO,isEditable:NO,isActiveSetBinding:"Qmlib.templateSetController.isActiveSet",isVisibleBinding:SC.Binding.bool("Qmlib.templateSetController.isPseudoSet").not(),value:function(){return this.get("isActiveSet")?"_This set is active".loc():'<span class="action-link">'+"_Make this the active set".loc()+"</span>"
}.property("isActiveSet").cacheable(),iconBinding:SC.Binding.transform(function(b,c){if(b){return"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/qmm-dot-active.png"
}else{return"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/qmlib/en_us/A/resources/qmm-dot.png"
}}).from(".isActiveSet"),mouseDown:function(b){},mouseUp:function(b){Qmlib.templateSetController.makeActive()
}}),sharedSetSettingView:SC.View.design({layout:{top:25,left:0,right:0},childViews:"accountSharedCheckboxView sectionSharedCheckboxView sharedInfoView".w(),accountSharedCheckboxView:SC.CheckboxView.design({layout:{top:0,left:0,height:30},canShareToAccountsBinding:"Qmlib.userController.canShareToAccounts",isSharedToUserBinding:"Qmlib.templateSetController.isSharedToUser",isVisible:function(){return(this.get("canShareToAccounts")&&!this.get("isSharedToUser"))
}.property("canShareToAccounts","isSharedToUser").cacheable(),valueBinding:SC.Binding.bool("Qmlib.templateSetController.isSharedToCurrentAccount"),title:"_Share this set to account".loc(),valueDidChange:function(){if(this.get("value")==Qmlib.templateSetController.get("isSharedToCurrentAccount")){return
}if(this.get("value")){Qmlib.shareSetToAccount(Qmlib.templateSetController.get("content"),Qmlib.userController.get("shareToAccount"))
}else{SC.AlertPane.warn("_Stop sharing QuickMark set?".loc(),"_Instructors that this set was shared with will no longer be able to use the QuickMark comments within this set.".loc(),"_Do you wish to continue?".loc(),"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(c,b){if(b===SC.BUTTON1_STATUS){Qmlib.unShareSetToAccount(Qmlib.templateSetController.get("content"),Qmlib.userController.get("shareToAccount"))
}}})}}.observes("value")}),sectionSharedCheckboxView:SC.CheckboxView.design({layout:{top:25,left:0,height:30},canShareToSectionsBinding:"Qmlib.userController.canShareToSections",isSharedToUserBinding:"Qmlib.templateSetController.isSharedToUser",isVisible:function(){return(this.get("canShareToSections")&&!this.get("isSharedToUser"))
}.property("canShareToSections","isSharedToUser").cacheable(),valueBinding:SC.Binding.bool("Qmlib.templateSetController.isSharedToCurrentSections"),title:"_Share this set to sections".loc(),valueDidChange:function(){if(this.get("value")==Qmlib.templateSetController.get("isSharedToCurrentSections")){return
}if(this.get("value")){Qmlib.shareSetToSections(Qmlib.templateSetController.get("content"),Number(Qmlib.classController.get("id")))
}else{Qmlib.unShareSetToSections(Qmlib.templateSetController.get("content"),Qmlib.classController.get("id"))
}}.observes("value")}),sharedInfoView:SC.LabelView.design({layout:{bottom:0,left:0,height:60},isVisibleBinding:"Qmlib.templateSetController.isSharedToUser",value:"_This set cannot be modified because it has been shared with you.".loc()})})})});
return a}.property().cacheable(),singleItemDisplayView:function(){var b=this.getPath("template.firstObject");
var a=SC.View.create(Ip.AnchorTagActions,{layout:{top:0,bottom:0,left:0,right:0},classNames:["qmlib-detail"],render:function(e,h){var c="",g="",f=[];
if(b){c=b.get("name");g=b.get("description");f=b.get("sets")}e.push('<div class="sc-label-view sc-large-size">').push(c).push("</div>");
e.push('<div class="sc-label-view sc-static-layout sc-regular-size qmm-description">').push(g).push("</div>");
e.push('<div class="set-list-label sc-label-view sc-regular-size">').push("_Sets".loc()).push("</div>");
e.push('<div class="set-list">').push("<ul>");f.forEach(function(i){e.push("<li>").push(i.get("displayName")).push("</li>")
});e.push("</ul>").push("</div>")}});return a}.property("template").cacheable(),singleItemEditView:function(){var a=SC.View.create({layout:{top:0,bottom:0,left:0,right:10},childViews:"titleLabelView titleFieldView descriptionLabelView descriptionFieldView editWarningView".w(),editNameText:null,editDescriptionText:null,titleLabelView:SC.LabelView.design({layout:{top:5,left:10,height:15,right:10},classNames:"qmm-label",value:"_TITLE".loc(),controlSize:SC.SMALL_CONTROL_SIZE}),titleFieldView:SC.TextFieldView.design(Qmlib.EscapeValue,{layout:{top:20,left:10,height:25,right:10},controlSize:SC.LARGE_CONTROL_SIZE,unescapedValueBinding:SC.Binding.oneWay(".parentView.editTitleText"),unescapedValueDidChange:function(){var c=this.get("isVisible");
if(c){var b=this.get("unescapedValue");this.setPath("parentView.editTitleText",b)
}}.observes("unescapedValue")}),descriptionLabelView:SC.LabelView.design({layout:{top:50,left:10,height:15,right:10},classNames:"qmm-label",value:"_DESCRIPTION".loc(),controlSize:SC.SMALL_CONTROL_SIZE}),descriptionFieldView:SC.TextFieldView.design(Qmlib.EscapeValue,{layout:function(){return{top:65,right:10,left:10,height:(this.getPath("parentView.parentView.parentView.isCreating"))?220:185}
}.property("isVisible").cacheable(),isVisibleBinding:".parentView.parentView.parentView.isEditing",isTextArea:YES,unescapedValueBinding:SC.Binding.oneWay(".parentView.editDescriptionText"),unescapedValueDidChange:function(){var c=this.get("isVisible");
if(c){var b=this.get("unescapedValue");this.setPath("parentView.editDescriptionText",b)
}}.observes("unescapedValue")}),editWarningView:SC.LabelView.design({layout:{bottom:5,left:10,right:10,height:45},value:"<strong>"+"_WARNING:".loc()+"</strong> "+"_Any edits that are made to this QuickMark are applied to every instance where this mark appears in your students' papers.".loc(),controlSize:SC.SMALL_CONTROL_SIZE,escapeHTML:NO,isVisibleBinding:SC.Binding.not(".parentView.parentView.parentView.isCreating")})});
return a}.property().cacheable(),multipleItemView:function(){var a=SC.View.create({layout:{top:0,bottom:0,left:0,right:0},childViews:"titleView listTitleView selectedListView".w(),titleView:SC.LabelView.design({layout:{top:5,left:10,height:25,right:10},controlSize:SC.LARGE_CONTROL_SIZE,isEditable:NO,valueBinding:"Qmlib.templateController.titleForMultipleSelection"}),listTitleView:SC.LabelView.design({layout:{top:40,left:10,right:10,height:16},isEditable:NO,value:"_MARKS".loc()}),selectedListView:SC.ScrollView.design({layout:{top:56,right:10,bottom:10,left:10},contentView:SC.ListView.design({isEditable:NO,isSelectable:NO,selectedTemplatesBinding:"Qmlib.templatesController.selection",content:function(){var c=[];
var b=this.get("selectedTemplates");if(b){c=b.sortProperty("name")}return c}.property("selectedTemplates").cacheable(),contentValueKey:"name"})})});
return a}.property().cacheable()})}),importView:SC.View.design({layout:{top:41,right:0,left:0,bottom:0,zIndex:2},classNames:"importpane",childViews:"headerView readyView busyView".w(),isVisibleBinding:"Qmlib.importController.importInProgress",headerView:SC.LabelView.design({controlSize:SC.LARGE_CONTROL_SIZE,layout:{top:15,right:0,height:30,left:10},value:"_Import".loc()}),uploadStatusBinding:".readyView.fileSelectView.status",uploadStatusDidChange:function(){var a=this.get("uploadStatus");
this.setPath("busyView.isVisible",a==="BUSY")}.observes("uploadStatus"),readyView:SC.View.design({layout:{top:50,right:0,bottom:0,left:0},childViews:"instructionsView fileSelectView ImportButtonView cancelView statusView".w(),instructionsView:SC.LabelView.design({layout:{top:0,right:0,height:20,left:10},value:"_Select a file to import...".loc()}),fileSelectView:Ip.UploadView.design({layout:{top:25,right:0,height:25,left:10},uploadTargetBinding:SC.Binding.oneWay("Qmlib.importController.uploadTarget"),valueBinding:"Qmlib.importController.filePath",uploadRequestedBinding:"Qmlib.importController.uploadRequested",delegateBinding:"Qmlib.importController",inputName:"upload",valueChanged:function(){if(this.get("value")===null){this.clearFileUpload()
}}.observes("value"),beginUpload:function(){if(this.get("uploadRequested")){this.startUpload()
}}.observes("uploadRequested")}),ImportButtonView:SC.ButtonView.design({layout:{top:60,width:100,height:24,left:10},title:"_Import".loc(),classNames:["panel-button","primary"],isEnabledBinding:"Qmlib.importController.fileIsSelected",action:"startUpload",target:"Qmlib.importController"}),cancelView:SC.ButtonView.design({layout:{top:60,width:100,height:24,left:120},uploadRequestedBinding:"Qmlib.importController.uploadRequested",title:function(){var a=this.get("uploadRequested");
if(a){return"_Cancel".loc()}else{return"_Close".loc()}}.property("uploadRequested").cacheable(),classNames:"panel-button",action:"cancelImport",target:"Qmlib.importController"}),statusView:SC.LabelView.design({layout:{height:30,right:0,bottom:0,left:0},textAlign:SC.ALIGN_CENTER,classNames:"status-line",valueBinding:SC.Binding.oneWay("Qmlib.importController.message")})}),busyView:Ip.LoadingView.design({layout:{top:0,right:0,bottom:0,left:0},loadingText:"_Uploading...".loc()})})});
Qmlib.SetNameTextFieldView=SC.InlineTextFieldView.extend({fieldDidBlur:function(){this.blurEditor()
},discardEditing:function(){if(SC.$ok(this.validateSubmit())){Qmlib.templateSetController.set("temporaryName",this.get("value"))
}return arguments.callee.base.apply(this,arguments)}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("qmlib");
/*
* Clamp.js 0.4
*
* Copyright 2011, Joseph Schmitt http://reusablebits.com, http://josephschmitt.me
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
}(function(){function a(h,i){i=i||{};
var s=this,k=window,f={clamp:i.clamp||2,useNativeClamp:typeof(i.useNativeClamp)!="undefined"?i.useNativeClamp:true,splitOnChars:i.splitOnChars||[".","-","–","—"," "],animate:i.animate||false},p=h.style,v=h.innerHTML,u=typeof(h.style.webkitLineClamp)!="undefined",e=f.clamp,m=e.indexOf&&(e.indexOf("px")>-1||e.indexOf("em")>-1);
function t(z,A){if(!k.getComputedStyle){k.getComputedStyle=function(B,C){this.el=B;
this.getPropertyValue=function(E){var D=/(\-([a-z]){1})/g;if(E=="float"){E="styleFloat"
}if(D.test(E)){E=E.replace(D,function(){return arguments[2].toUpperCase()})}return B.currentStyle&&B.currentStyle[E]?B.currentStyle[E]:null
};return this}}return k.getComputedStyle(z,null).getPropertyValue(A)}function j(z){var A=z||h.clientHeight,B=n(h);
return Math.max(Math.floor(A/B),0)}function x(z){var A=n(h);return A*z}function n(A){var z=t(A,"line-height");
if(z=="normal"){z=parseInt(t(A,"font-size"))*1.2}return parseInt(z)}var c=f.splitOnChars.slice(0),w=c[0],o,y;
function b(z){if(z.lastChild.children&&z.lastChild.children.length>0){return b(Array.prototype.slice.call(z.children).pop())
}else{if(!z.lastChild||!z.lastChild.nodeValue||z.lastChild.nodeValue==""||z.lastChild.nodeValue=="…"){z.lastChild.parentNode.removeChild(z.lastChild);
return b(h)}else{return z.lastChild}}}function g(C,B){if(!B){return}function A(){c=f.splitOnChars.slice(0);
w=c[0];o=null;y=null}var z=C.nodeValue.replace(/…/,"");if(!o){if(c.length>0){w=c.shift()
}else{w=""}o=z.split(w)}if(o.length>1){y=o.pop();l(C,o.join(w))}else{o=null}if(o){if(h.clientHeight<=B){if(c.length>=0&&w!=""){l(C,o.join(w)+w+y);
o=null}else{return false}}}else{if(w==""){l(C,"");C=b(h);A()}}if(f.animate){setTimeout(function(){g(C,B)
},f.animate===true?10:f.animate)}else{g(C,B)}}function l(z,A){z.nodeValue=A+"…"}if(e=="auto"){e=j()
}else{if(m){e=j(parseInt(e))}}if(u&&f.useNativeClamp){p.overflow="hidden";p.textOverflow="ellipsis";
p.webkitBoxOrient="vertical";p.display="-webkit-box";p.webkitLineClamp=e;if(m){p.height=f.clamp+"px"
}}else{var q=x(e);if(q<=h.clientHeight){g(b(h),q)}}}window.$clamp=a})();if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("third_party/clamp.js")
}SC.stringsFor("English",{});!function(){function b(a,n,m){var l=b.resolve(a);if(null==l){m=m||a,n=n||"root";
var k=new Error('Failed to require "'+m+'" from "'+n+'"');throw k.path=m,k.parent=n,k.require=!0,k
}var j=b.modules[l];if(!j._resolving&&!j.exports){var i={};i.exports={},i.client=i.component=!0,j._resolving=!0,j.call(this,i.exports,b.relative(l),i),delete j._resolving,j.exports=i.exports
}return j.exports}b.modules={},b.aliases={},b.resolve=function(a){"/"===a.charAt(0)&&(a=a.slice(1));
for(var f=[a,a+".js",a+".json",a+"/index.js",a+"/index.json"],e=0;e<f.length;e++){var a=f[e];
if(b.modules.hasOwnProperty(a)){return a}if(b.aliases.hasOwnProperty(a)){return b.aliases[a]
}}},b.normalize=function(f,e){var h=[];if("."!=e.charAt(0)){return e}f=f.split("/"),e=e.split("/");
for(var g=0;g<e.length;++g){".."==e[g]?f.pop():"."!=e[g]&&""!=e[g]&&h.push(e[g])}return f.concat(h).join("/")
},b.register=function(a,e){b.modules[a]=e},b.alias=function(a,e){if(!b.modules.hasOwnProperty(a)){throw new Error('Failed to alias "'+a+'", it does not exist')
}b.aliases[e]=a},b.relative=function(a){function h(i,e){for(var j=i.length;j--;){if(i[j]===e){return j
}}return -1}function g(j){var i=g.resolve(j);return b(i,a,j)}var f=b.normalize(a,"..");
return g.resolve=function(j){var i=j.charAt(0);if("/"==i){return j.slice(1)}if("."==i){return b.normalize(f,j)
}var e=a.split("/"),c=h(e,"deps")+1;return c||(c=0),j=e.slice(0,c+1).join("/")+"/deps/"+j
},g.exists=function(c){return b.modules.hasOwnProperty(g.resolve(c))},g},b.register("component-emitter/index.js",function(g,f,j){function i(c){return c?h(c):void 0
}function h(e){for(var c in i.prototype){e[c]=i.prototype[c]}return e}j.exports=i,i.prototype.on=function(e,c){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(c),this
},i.prototype.once=function(k,e){function m(){l.off(k,m),e.apply(this,arguments)}var l=this;
return this._callbacks=this._callbacks||{},e._off=m,this.on(k,m),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(k,e){this._callbacks=this._callbacks||{};
var m=this._callbacks[k];if(!m){return this}if(1==arguments.length){return delete this._callbacks[k],this
}var l=m.indexOf(e._off||e);return ~l&&m.splice(l,1),this},i.prototype.emit=function(l){this._callbacks=this._callbacks||{};
var k=[].slice.call(arguments,1),o=this._callbacks[l];if(o){o=o.slice(0);for(var n=0,m=o.length;
m>n;++n){o[n].apply(this,k)}}return this},i.prototype.listeners=function(c){return this._callbacks=this._callbacks||{},this._callbacks[c]||[]
},i.prototype.hasListeners=function(c){return !!this.listeners(c).length}}),b.register("dropzone/index.js",function(f,e,g){g.exports=e("./lib/dropzone.js")
}),b.register("dropzone/lib/dropzone.js",function(f,e,g){(function(){var x,w,v,u,t,s,q,p,o={}.hasOwnProperty,n=function(i,h){function k(){this.constructor=i
}for(var j in h){o.call(h,j)&&(i[j]=h[j])}return k.prototype=h.prototype,i.prototype=new k,i.__super__=h.prototype,i
},c=[].slice;w="undefined"!=typeof Emitter&&null!==Emitter?Emitter:e("emitter"),q=function(){},x=function(i){function h(k,z){var y,m,l;
if(this.element=k,this.version=h.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType){throw new Error("Invalid dropzone element.")
}if(this.element.dropzone){throw new Error("Dropzone already attached.")}if(h.instances.push(this),this.element.dropzone=this,y=null!=(l=h.optionsForElement(this.element))?l:{},this.options=j({},this.defaultOptions,y,null!=z?z:{}),this.options.forceFallback||!h.isBrowserSupported()){return this.options.fallback.call(this)
}if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url){throw new Error("No URL provided.")
}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")
}this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(m=this.getExistingFallback())&&m.parentNode&&m.parentNode.removeChild(m),this.previewsContainer=this.options.previewsContainer?h.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:h.getElements(this.options.clickable,"clickable")),this.init()
}var j;return n(h,i),h.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],h.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(l,k){return k()
},init:function(){return q},forceFallback:!1,fallback:function(){var k,A,z,y,m,l;
for(this.element.className=""+this.element.className+" dz-browser-not-supported",l=this.element.getElementsByTagName("div"),y=0,m=l.length;
m>y;y++){k=l[y],/(^| )dz-message($| )/.test(k.className)&&(A=k,k.className="dz-message")
}return A||(A=h.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(A)),z=A.getElementsByTagName("span")[0],z&&(z.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())
},resize:function(l){var k,y,m;return k={srcX:0,srcY:0,srcWidth:l.width,srcHeight:l.height},y=l.width/l.height,m=this.options.thumbnailWidth/this.options.thumbnailHeight,l.height<this.options.thumbnailHeight||l.width<this.options.thumbnailWidth?(k.trgHeight=k.srcHeight,k.trgWidth=k.srcWidth):y>m?(k.srcHeight=l.height,k.srcWidth=k.srcHeight*m):(k.srcWidth=l.width,k.srcHeight=k.srcWidth/m),k.srcX=(l.width-k.srcWidth)/2,k.srcY=(l.height-k.srcHeight)/2,k
},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:q,dragend:function(){return this.element.classList.remove("dz-drag-hover")
},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")
},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:q,reset:function(){return this.element.classList.remove("dz-started")
},addedfile:function(M){var L,K,J,I,H,G,F,E,D,C,B,A,z,y=this;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),M.previewElement=h.createElement(this.options.previewTemplate.trim()),M.previewTemplate=M.previewElement,this.previewsContainer.appendChild(M.previewElement),C=M.previewElement.querySelectorAll("[data-dz-name]"),I=0,F=C.length;
F>I;I++){L=C[I],L.textContent=M.name}for(B=M.previewElement.querySelectorAll("[data-dz-size]"),H=0,E=B.length;
E>H;H++){L=B[H],L.innerHTML=this.filesize(M.size)}for(this.options.addRemoveLinks&&(M._removeLink=h.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),M.previewElement.appendChild(M._removeLink)),K=function(a){return a.preventDefault(),a.stopPropagation(),M.status===h.UPLOADING?h.confirm(y.options.dictCancelUploadConfirmation,function(){return y.removeFile(M)
}):y.options.dictRemoveFileConfirmation?h.confirm(y.options.dictRemoveFileConfirmation,function(){return y.removeFile(M)
}):y.removeFile(M)},A=M.previewElement.querySelectorAll("[data-dz-remove]"),z=[],G=0,D=A.length;
D>G;G++){J=A[G],z.push(J.addEventListener("click",K))}return z},removedfile:function(l){var k;
return null!=(k=l.previewElement)&&k.parentNode.removeChild(l.previewElement),this._updateMaxFilesReachedClass()
},thumbnail:function(l,k){var B,A,z,y,m;for(l.previewElement.classList.remove("dz-file-preview"),l.previewElement.classList.add("dz-image-preview"),y=l.previewElement.querySelectorAll("[data-dz-thumbnail]"),m=[],A=0,z=y.length;
z>A;A++){B=y[A],B.alt=l.name,m.push(B.src=k)}return m},error:function(l,k){var B,A,z,y,m;
for(l.previewElement.classList.add("dz-error"),"String"!=typeof k&&k.error&&(k=k.error),y=l.previewElement.querySelectorAll("[data-dz-errormessage]"),m=[],A=0,z=y.length;
z>A;A++){B=y[A],m.push(B.textContent=k)}return m},errormultiple:q,processing:function(k){return k.previewElement.classList.add("dz-processing"),k._removeLink?k._removeLink.textContent=this.options.dictCancelUpload:void 0
},processingmultiple:q,uploadprogress:function(l,k){var B,A,z,y,m;for(y=l.previewElement.querySelectorAll("[data-dz-uploadprogress]"),m=[],A=0,z=y.length;
z>A;A++){B=y[A],m.push(B.style.width=""+k+"%")}return m},totaluploadprogress:q,sending:q,sendingmultiple:q,success:function(k){return k.previewElement.classList.add("dz-success")
},successmultiple:q,canceled:function(k){return this.emit("error",k,"Upload canceled.")
},canceledmultiple:q,complete:function(k){return k._removeLink?k._removeLink.textContent=this.options.dictRemoveFile:void 0
},completemultiple:q,maxfilesexceeded:q,maxfilesreached:q,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},j=function(){var l,k,B,A,z,y,m;
for(A=arguments[0],B=2<=arguments.length?c.call(arguments,1):[],y=0,m=B.length;m>y;
y++){k=B[y];for(l in k){z=k[l],A[l]=z}}return A},h.prototype.getAcceptedFiles=function(){var l,k,z,y,m;
for(y=this.files,m=[],k=0,z=y.length;z>k;k++){l=y[k],l.accepted&&m.push(l)}return m
},h.prototype.getRejectedFiles=function(){var l,k,z,y,m;for(y=this.files,m=[],k=0,z=y.length;
z>k;k++){l=y[k],l.accepted||m.push(l)}return m},h.prototype.getQueuedFiles=function(){var k,z,y,m,l;
for(m=this.files,l=[],z=0,y=m.length;y>z;z++){k=m[z],k.status===h.QUEUED&&l.push(k)
}return l},h.prototype.getUploadingFiles=function(){var k,z,y,m,l;for(m=this.files,l=[],z=0,y=m.length;
y>z;z++){k=m[z],k.status===h.UPLOADING&&l.push(k)}return l},h.prototype.init=function(){var k,C,B,A,z,y,m,l=this;
for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(h.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(B=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),(null==l.options.maxFiles||l.options.maxFiles>1)&&l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedFiles&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedFiles),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",function(){var E,D,G,F;
if(D=l.hiddenFileInput.files,D.length){for(G=0,F=D.length;F>G;G++){E=D[G],l.addFile(E)
}}return B()})},B()),this.URL=null!=(y=window.URL)?y:window.webkitURL,m=this.events,A=0,z=m.length;
z>A;A++){k=m[A],this.on(k,this.options[k])}return this.on("uploadprogress",function(){return l.updateTotalUploadProgress()
}),this.on("removedfile",function(){return l.updateTotalUploadProgress()}),this.on("canceled",function(D){return l.emit("complete",D)
}),this.on("complete",function(){return 0===l.getUploadingFiles().length&&0===l.getQueuedFiles().length?setTimeout(function(){return l.emit("queuecomplete")
},0):void 0}),C=function(D){return D.stopPropagation(),D.preventDefault?D.preventDefault():D.returnValue=!1
},this.listeners=[{element:this.element,events:{dragstart:function(D){return l.emit("dragstart",D)
},dragenter:function(D){return C(D),l.emit("dragenter",D)},dragover:function(E){var D;
try{D=E.dataTransfer.effectAllowed}catch(F){}return E.dataTransfer.dropEffect="move"===D||"linkMove"===D?"move":"copy",C(E),l.emit("dragover",E)
},dragleave:function(D){return l.emit("dragleave",D)},drop:function(D){return C(D),l.drop(D)
},dragend:function(D){return l.emit("dragend",D)}}}],this.clickableElements.forEach(function(D){return l.listeners.push({element:D,events:{click:function(a){return D!==l.element||a.target===l.element||h.elementInside(a.target,l.element.querySelector(".dz-message"))?l.hiddenFileInput.click():void 0
}}})}),this.enable(),this.options.init.call(this)},h.prototype.destroy=function(){var k;
return this.disable(),this.removeAllFiles(!0),(null!=(k=this.hiddenFileInput)?k.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,h.instances.splice(h.instances.indexOf(this),1)
},h.prototype.updateTotalUploadProgress=function(){var l,k,C,B,A,z,y,m;if(B=0,C=0,l=this.getAcceptedFiles(),l.length){for(m=this.getAcceptedFiles(),z=0,y=m.length;
y>z;z++){k=m[z],B+=k.upload.bytesSent,C+=k.upload.total}A=100*B/C}else{A=100}return this.emit("totaluploadprogress",A,C,B)
},h.prototype.getFallbackForm=function(){var k,y,m,l;return(k=this.getExistingFallback())?k:(m='<div class="dz-fallback">',this.options.dictFallbackText&&(m+="<p>"+this.options.dictFallbackText+"</p>"),m+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',y=h.createElement(m),"FORM"!==this.element.tagName?(l=h.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),l.appendChild(y)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=l?l:y)
},h.prototype.getExistingFallback=function(){var l,k,A,z,y,m;for(k=function(C){var B,E,D;
for(E=0,D=C.length;D>E;E++){if(B=C[E],/(^| )fallback($| )/.test(B.className)){return B
}}},m=["div","form"],z=0,y=m.length;y>z;z++){if(A=m[z],l=k(this.element.getElementsByTagName(A))){return l
}}},h.prototype.setupEventListeners=function(){var l,k,B,A,z,y,m;for(y=this.listeners,m=[],A=0,z=y.length;
z>A;A++){l=y[A],m.push(function(){var C,a;C=l.events,a=[];for(k in C){B=C[k],a.push(l.element.addEventListener(k,B,!1))
}return a}())}return m},h.prototype.removeEventListeners=function(){var l,k,B,A,z,y,m;
for(y=this.listeners,m=[],A=0,z=y.length;z>A;A++){l=y[A],m.push(function(){var C,a;
C=l.events,a=[];for(k in C){B=C[k],a.push(l.element.removeEventListener(k,B,!1))}return a
}())}return m},h.prototype.disable=function(){var l,k,z,y,m;for(this.clickableElements.forEach(function(A){return A.classList.remove("dz-clickable")
}),this.removeEventListeners(),y=this.files,m=[],k=0,z=y.length;z>k;k++){l=y[k],m.push(this.cancelUpload(l))
}return m},h.prototype.enable=function(){return this.clickableElements.forEach(function(k){return k.classList.add("dz-clickable")
}),this.setupEventListeners()},h.prototype.filesize=function(l){var k;return l>=109951162777.6?(l/=109951162777.6,k="TiB"):l>=107374182.4?(l/=107374182.4,k="GiB"):l>=104857.6?(l/=104857.6,k="MiB"):l>=102.4?(l/=102.4,k="KiB"):(l=10*l,k="b"),"<strong>"+Math.round(l)/10+"</strong> "+k
},h.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")
},h.prototype.drop=function(l){var k,m;l.dataTransfer&&(this.emit("drop",l),k=l.dataTransfer.files,k.length&&(m=l.dataTransfer.items,m&&m.length&&null!=m[0].webkitGetAsEntry?this._addFilesFromItems(m):this.handleFiles(k)))
},h.prototype.paste=function(l){var k,m;if(null!=(null!=l?null!=(m=l.clipboardData)?m.items:void 0:void 0)){return this.emit("paste",l),k=l.clipboardData.items,k.length?this._addFilesFromItems(k):void 0
}},h.prototype.handleFiles=function(l){var k,z,y,m;for(m=[],z=0,y=l.length;y>z;z++){k=l[z],m.push(this.addFile(k))
}return m},h.prototype._addFilesFromItems=function(l){var k,A,z,y,m;for(m=[],z=0,y=l.length;
y>z;z++){A=l[z],null!=A.webkitGetAsEntry&&(k=A.webkitGetAsEntry())?k.isFile?m.push(this.addFile(A.getAsFile())):k.isDirectory?m.push(this._addFilesFromDirectory(k,k.name)):m.push(void 0):null!=A.getAsFile?null==A.kind||"file"===A.kind?m.push(this.addFile(A.getAsFile())):m.push(void 0):m.push(void 0)
}return m},h.prototype._addFilesFromDirectory=function(l,k){var z,y,m=this;return z=l.createReader(),y=function(A){var D,C,B;
for(C=0,B=A.length;B>C;C++){D=A[C],D.isFile?D.file(function(E){return m.options.ignoreHiddenFiles&&"."===E.name.substring(0,1)?void 0:(E.fullPath=""+k+"/"+E.name,m.addFile(E))
}):D.isDirectory&&m._addFilesFromDirectory(D,""+k+"/"+D.name)}},z.readEntries(y,function(A){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log(A):void 0:void 0
})},h.prototype.accept=function(k,l){return k.size>1024*this.options.maxFilesize*1024?l(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(k.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):h.isValidFile(k,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(l(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",k)):this.options.accept.call(this,k,l):l(this.options.dictInvalidFileType)
},h.prototype.addFile=function(k){var l=this;return k.upload={progress:0,total:k.size,bytesSent:0},this.files.push(k),k.status=h.ADDED,this.emit("addedfile",k),this._enqueueThumbnail(k),this.accept(k,function(a){return a?(k.accepted=!1,l._errorProcessing([k],a)):l.enqueueFile(k),l._updateMaxFilesReachedClass()
})},h.prototype.enqueueFiles=function(l){var k,y,m;for(y=0,m=l.length;m>y;y++){k=l[y],this.enqueueFile(k)
}return null},h.prototype.enqueueFile=function(k){var l=this;if(k.accepted=!0,k.status!==h.ADDED){throw new Error("This file can't be queued because it has already been processed or was rejected.")
}return k.status=h.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return l.processQueue()
},0):void 0},h.prototype._thumbnailQueue=[],h.prototype._processingThumbnail=!1,h.prototype._enqueueThumbnail=function(l){var k=this;
return this.options.createImageThumbnails&&l.type.match(/image.*/)&&l.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(l),setTimeout(function(){return k._processThumbnailQueue()
},0)):void 0},h.prototype._processThumbnailQueue=function(){var k=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return k._processingThumbnail=!1,k._processThumbnailQueue()
})}},h.prototype.removeFile=function(k){return k.status===h.UPLOADING&&this.cancelUpload(k),this.files=p(this.files,k),this.emit("removedfile",k),0===this.files.length?this.emit("reset"):void 0
},h.prototype.removeAllFiles=function(k){var z,y,m,l;for(null==k&&(k=!1),l=this.files.slice(),y=0,m=l.length;
m>y;y++){z=l[y],(z.status!==h.UPLOADING||k)&&this.removeFile(z)}return null},h.prototype.createThumbnail=function(l,k){var y,m=this;
return y=new FileReader,y.onload=function(){var a;return a=document.createElement("img"),a.onload=function(){var G,F,E,D,C,B,A,z;
return l.width=a.width,l.height=a.height,E=m.options.resize.call(m,l),null==E.trgWidth&&(E.trgWidth=m.options.thumbnailWidth),null==E.trgHeight&&(E.trgHeight=m.options.thumbnailHeight),G=document.createElement("canvas"),F=G.getContext("2d"),G.width=E.trgWidth,G.height=E.trgHeight,s(F,a,null!=(C=E.srcX)?C:0,null!=(B=E.srcY)?B:0,E.srcWidth,E.srcHeight,null!=(A=E.trgX)?A:0,null!=(z=E.trgY)?z:0,E.trgWidth,E.trgHeight),D=G.toDataURL("image/png"),m.emit("thumbnail",l,D),null!=k?k():void 0
},a.src=y.result},y.readAsDataURL(l)},h.prototype.processQueue=function(){var l,k,y,m;
if(k=this.options.parallelUploads,y=this.getUploadingFiles().length,l=y,!(y>=k)&&(m=this.getQueuedFiles(),m.length>0)){if(this.options.uploadMultiple){return this.processFiles(m.slice(0,k-y))
}for(;k>l;){if(!m.length){return}this.processFile(m.shift()),l++}}},h.prototype.processFile=function(k){return this.processFiles([k])
},h.prototype.processFiles=function(k){var y,m,l;for(m=0,l=k.length;l>m;m++){y=k[m],y.processing=!0,y.status=h.UPLOADING,this.emit("processing",y)
}return this.options.uploadMultiple&&this.emit("processingmultiple",k),this.uploadFiles(k)
},h.prototype._getFilesWithXhr=function(l){var k,m;return m=function(){var A,z,y,a;
for(y=this.files,a=[],A=0,z=y.length;z>A;A++){k=y[A],k.xhr===l&&a.push(k)}return a
}.call(this)},h.prototype.cancelUpload=function(k){var C,B,A,z,y,m,l;if(k.status===h.UPLOADING){for(B=this._getFilesWithXhr(k.xhr),A=0,y=B.length;
y>A;A++){C=B[A],C.status=h.CANCELED}for(k.xhr.abort(),z=0,m=B.length;m>z;z++){C=B[z],this.emit("canceled",C)
}this.options.uploadMultiple&&this.emit("canceledmultiple",B)}else{((l=k.status)===h.ADDED||l===h.QUEUED)&&(k.status=h.CANCELED,this.emit("canceled",k),this.options.uploadMultiple&&this.emit("canceledmultiple",[k]))
}return this.options.autoProcessQueue?this.processQueue():void 0},h.prototype.uploadFile=function(k){return this.uploadFiles([k])
},h.prototype.uploadFiles=function(aq){var ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ab,Z,X,V,T,Q,O,M,K,J,ac,aa,Y,W,U,S,P,N,L=this;
for(X=new XMLHttpRequest,V=0,M=aq.length;M>V;V++){ap=aq[V],ap.xhr=X}X.open(this.options.method,this.options.url,!0),X.withCredentials=!!this.options.withCredentials,ad=null,an=function(){var a,l,k;
for(k=[],a=0,l=aq.length;l>a;a++){ap=aq[a],k.push(L._errorProcessing(aq,ad||L.options.dictResponseError.replace("{{statusCode}}",X.status),X))
}return k},ab=function(F){var E,D,C,B,A,z,y,m,a;if(null!=F){for(D=100*F.loaded/F.total,C=0,z=aq.length;
z>C;C++){ap=aq[C],ap.upload={progress:D,total:F.total,bytesSent:F.loaded}}}else{for(E=!0,D=100,B=0,y=aq.length;
y>B;B++){ap=aq[B],(100!==ap.upload.progress||ap.upload.bytesSent!==ap.upload.total)&&(E=!1),ap.upload.progress=D,ap.upload.bytesSent=ap.upload.total
}if(E){return}}for(a=[],A=0,m=aq.length;m>A;A++){ap=aq[A],a.push(L.emit("uploadprogress",ap,D,ap.upload.bytesSent))
}return a},X.onload=function(l){var k;if(aq[0].status!==h.CANCELED&&4===X.readyState){if(ad=X.responseText,X.getResponseHeader("content-type")&&~X.getResponseHeader("content-type").indexOf("application/json")){try{ad=JSON.parse(ad)
}catch(a){l=a,ad="Invalid JSON response from server."}}return ab(),200<=(k=X.status)&&300>k?L._finished(aq,ad,l):an()
}},X.onerror=function(){return aq[0].status!==h.CANCELED?an():void 0},ae=null!=(W=X.upload)?W:X,ae.onprogress=ab,ak={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&j(ak,this.options.headers);
for(am in ak){al=ak[am],X.setRequestHeader(am,al)}if(ao=new FormData,this.options.params){U=this.options.params;
for(ag in U){Z=U[ag],ao.append(ag,Z)}}for(T=0,K=aq.length;K>T;T++){ap=aq[T],this.emit("sending",ap,X,ao)
}if(this.options.uploadMultiple&&this.emit("sendingmultiple",aq,X,ao),"FORM"===this.element.tagName){for(S=this.element.querySelectorAll("input, textarea, select, button"),Q=0,J=S.length;
J>Q;Q++){if(aj=S[Q],ai=aj.getAttribute("name"),ah=aj.getAttribute("type"),"SELECT"===aj.tagName&&aj.hasAttribute("multiple")){for(P=aj.options,O=0,ac=P.length;
ac>O;O++){af=P[O],af.selected&&ao.append(ai,af.value)}}else{(!ah||"checkbox"!==(N=ah.toLowerCase())&&"radio"!==N||aj.checked)&&ao.append(ai,aj.value)
}}}for(Y=0,aa=aq.length;aa>Y;Y++){ap=aq[Y],ao.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),ap,ap.name)
}return X.send(ao)},h.prototype._finished=function(k,A,z){var y,m,l;for(m=0,l=k.length;
l>m;m++){y=k[m],y.status=h.SUCCESS,this.emit("success",y,A,z),this.emit("complete",y)
}return this.options.uploadMultiple&&(this.emit("successmultiple",k,A,z),this.emit("completemultiple",k)),this.options.autoProcessQueue?this.processQueue():void 0
},h.prototype._errorProcessing=function(k,A,z){var y,m,l;for(m=0,l=k.length;l>m;m++){y=k[m],y.status=h.ERROR,this.emit("error",y,A,z),this.emit("complete",y)
}return this.options.uploadMultiple&&(this.emit("errormultiple",k,A,z),this.emit("completemultiple",k)),this.options.autoProcessQueue?this.processQueue():void 0
},h}(w),x.version="3.8.4",x.options={},x.optionsForElement=function(a){return a.getAttribute("id")?x.options[v(a.getAttribute("id"))]:void 0
},x.instances=[],x.forElement=function(h){if("string"==typeof h&&(h=document.querySelector(h)),null==(null!=h?h.dropzone:void 0)){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")
}return h.dropzone},x.autoDiscover=!0,x.discover=function(){var a,l,k,j,i,h;for(document.querySelectorAll?k=document.querySelectorAll(".dropzone"):(k=[],a=function(y){var m,B,A,z;
for(z=[],B=0,A=y.length;A>B;B++){m=y[B],/(^| )dropzone($| )/.test(m.className)?z.push(k.push(m)):z.push(void 0)
}return z},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))),h=[],j=0,i=k.length;
i>j;j++){l=k[j],x.optionsForElement(l)!==!1?h.push(new x(l)):h.push(void 0)}return h
},x.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],x.isBrowserSupported=function(){var a,k,j,i,h;
if(a=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if("classList" in document.createElement("a")){for(h=x.blacklistedBrowsers,j=0,i=h.length;
i>j;j++){k=h[j],k.test(navigator.userAgent)&&(a=!1)}}else{a=!1}}else{a=!1}return a
},p=function(i,h){var m,l,k,j;for(j=[],l=0,k=i.length;k>l;l++){m=i[l],m!==h&&j.push(m)
}return j},v=function(h){return h.replace(/[\-_](\w)/g,function(i){return i[1].toUpperCase()
})},x.createElement=function(i){var h;return h=document.createElement("div"),h.innerHTML=i,h.childNodes[0]
},x.elementInside=function(i,h){if(i===h){return !0}for(;i=i.parentNode;){if(i===h){return !0
}}return !1},x.getElement=function(i,h){var j;if("string"==typeof i?j=document.querySelector(i):null!=i.nodeType&&(j=i),null==j){throw new Error("Invalid `"+h+"` option provided. Please provide a CSS selector or a plain HTML element.")
}return j},x.getElements=function(G,F){var E,D,C,B,A,z,y,m;if(G instanceof Array){C=[];
try{for(B=0,z=G.length;z>B;B++){D=G[B],C.push(this.getElement(D,F))}}catch(l){E=l,C=null
}}else{if("string"==typeof G){for(C=[],m=document.querySelectorAll(G),A=0,y=m.length;
y>A;A++){D=m[A],C.push(D)}}else{null!=G.nodeType&&(C=[G])}}if(null==C||!C.length){throw new Error("Invalid `"+F+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")
}return C},x.confirm=function(i,h,j){return window.confirm(i)?h():null!=j?j():void 0
},x.isValidFile=function(i,h){var y,m,l,k,j;if(!h){return !0}for(h=h.split(","),m=i.type,y=m.replace(/\/.*$/,""),k=0,j=h.length;
j>k;k++){if(l=h[k],l=l.trim(),"."===l.charAt(0)){if(-1!==i.name.toLowerCase().indexOf(l.toLowerCase(),i.name.length-l.length)){return !0
}}else{if(/\/\*$/.test(l)){if(y===l.replace(/\/.*$/,"")){return !0}}else{if(m===l){return !0
}}}}return !1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(a){return this.each(function(){return new x(this,a)
})}),"undefined"!=typeof g&&null!==g?g.exports=x:window.Dropzone=x,x.ADDED="added",x.QUEUED="queued",x.ACCEPTED=x.QUEUED,x.UPLOADING="uploading",x.PROCESSING=x.UPLOADING,x.CANCELED="canceled",x.ERROR="error",x.SUCCESS="success",t=function(G){var F,E,D,C,B,A,z,y,m,l;
for(z=G.naturalWidth,A=G.naturalHeight,E=document.createElement("canvas"),E.width=1,E.height=A,D=E.getContext("2d"),D.drawImage(G,0,0),C=D.getImageData(0,0,1,A).data,l=0,B=A,y=A;
y>l;){F=C[4*(y-1)+3],0===F?B=y:l=y,y=B+l>>1}return m=y/A,0===m?1:m},s=function(H,G,F,E,D,C,B,A,z,y){var m;
return m=t(G),H.drawImage(G,F,E,D,C,B,A,z,y/m)},u=function(I,H){var G,F,E,D,C,B,A,z,y;
if(E=!1,y=!0,F=I.document,z=F.documentElement,G=F.addEventListener?"addEventListener":"attachEvent",A=F.addEventListener?"removeEventListener":"detachEvent",B=F.addEventListener?"":"on",D=function(a){return"readystatechange"!==a.type||"complete"===F.readyState?(("load"===a.type?I:F)[A](B+a.type,D,!1),!E&&(E=!0)?H.call(I,a.type||a):void 0):void 0
},C=function(){var i;try{z.doScroll("left")}catch(h){return i=h,setTimeout(C,50),void 0
}return D("poll")},"complete"!==F.readyState){if(F.createEventObject&&z.doScroll){try{y=!I.frameElement
}catch(m){}y&&C()}return F[G](B+"DOMContentLoaded",D,!1),F[G](B+"readystatechange",D,!1),I[G](B+"load",D,!1)
}},x._autoDiscoverFunction=function(){return x.autoDiscover?x.discover():void 0},u(window,x._autoDiscoverFunction)
}).call(this)}),b.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),b.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=b("dropzone"):"function"==typeof define&&define.amd?define(function(){return b("dropzone")
}):this.Dropzone=b("dropzone")}();Dropzone.DropzoneView=SC.View.extend({options:{},_dropElement:null,_dropzone:null,addedfile:function(a){},removedfile:function(a){},selectedfiles:function(a){},thumbnail:function(a,b){},error:function(b,a){},processing:function(a){},uploadprogress:function(a){},sending:function(a,c,b){},success:function(b,a){},complete:function(a){},canceled:function(a){},maxfilesreached:function(a){},maxfilesexceeded:function(a){},fallback:function(){},enable:function(){var a=this._dropzone;
a.enable()},disable:function(){var a=this._dropzone;a.disable()},dropView:null,didAppendToDocument:function(){var c=this.get("options");
var b=this;c.fallback=function(){var f=b;b.fallback()};c.init=function(){var f=b;
this.on("addedfile",function(g){return f.addedfile(g)});this.on("removedfile",function(g){return f.removedfile(g)
});this.on("selectedfiles",function(g){return f.selectedfiles(g)});this.on("thumbnail",function(g,h){return f.thumbnail(g,h)
});this.on("error",function(h,g){return f.error(h,g)});this.on("processing",function(g){return f.processing(g)
});this.on("uploadprogress",function(g){return f.uploadprogress(g)});this.on("sending",function(g,i,h){return f.sending(g,i,h)
});this.on("success",function(h,g){return f.success(h,g)});this.on("complete",function(g){return f.complete(g)
});this.on("canceled",function(g){return f.canceled(g)});this.on("maxfilesreached",function(g){return f.maxfilesreached(g)
});this.on("maxfilesexceeded",function(g){return f.maxfilesexceeded(g)})};if(this._dropzone&&typeof this._dropzone.enable==="function"){this._dropzone.enable()
}else{var e=this;if(this.get("dropView")){e=this.get("dropView")}var a=new Dropzone(e.get("tagName")+"#"+e.get("layerId"),c);
this.set("_dropzone",a)}},willRemoveFromDocument:function(){this._dropzone.disable()
}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("third_party/dropzone")
}RubricManagerCore=SC.Object.create({NAMESPACE:"RubricManagerCore",VERSION:"0.1.0",nestedStore:null,_localId:0,nextId:function(){this._localId=this._localId-1;
return this._localId},discardNestedStoreChanges:function(){if(RubricManagerCore.editingRubricController.get("status")===SC.Record.READY_NEW){var a=RubricManagerCore.store.find(RubricManagerCore.editingRubricController.get("content"));
a.destroy();RubricManagerCore.store.unloadRecords(Rb.Rubric,a.get("id"),a.get("storeKey"),SC.Record.DESTROYED_CLEAN)
}RubricManagerCore.nestedStore.discardChanges()},convertRubric:function(c){var b=c.get("scoringMethod");
var f=[Rb.NON_SCORING_RUBRIC,Rb.TYPICAL_RUBRIC,Rb.CUSTOM_RUBRIC,Rb.NON_SCORING_GRADING_FORM,Rb.SCORING_GRADING_FORM];
if(f.indexOf(b)!==-1){console.log("no processing necessary for type",b);return c}var a=c.get("criterionScales");
a.forEach(function(j){var h=j.get("criterion");var k=j.get("scale");var i=h.getCriterionScaleValue(k);
j.set("value",i)});var e=c.get("scales");e.setEach("value",0);var g=c.get("criteria");
g.setEach("value",0);c.set("scoringMethod",Rb.CUSTOM_RUBRIC);console.log("converted to CUSTOM_RUBRIC");
if(c.get("store")===RubricManagerCore.nestedStore){RubricManagerCore.nestedStore.commitChanges()
}return c},addCriterion:function(e,b){var c=this.get("nestedStore");b.id=RubricManagerCore.nextId();
b.value="0";var a=c.createRecord(Rb.RubricCriterion,b);a.beginPropertyChanges();a.set("position",e.get("criteria").getEach("position").get("@max")+1);
a.set("num",e.get("criteria").getEach("num").get("@max")+1);a.set("name","_Criterion %@".loc(e.get("criteria").length()+1));
e.get("criteria").pushObject(a);var f=e.get("scales");f.forEach(function(g){RubricManagerCore._addCriterionScale(e,a,g)
});a.endPropertyChanges();return a},_addCriterionScale:function(c,e,f){var b=this.get("nestedStore");
var a=b.createRecord(Rb.RubricCriterionScale,{id:RubricManagerCore.nextId(),value:"0",description:""});
a.beginPropertyChanges();e.get("criterionScales").pushObject(a);a.set("scale",f);
a.endPropertyChanges();c.get("criterionScales").pushObject(a)},_deleteCriterionScale:function(a,b){b.getPath("criterion.criterionScales").removeObject(b);
a.get("criterionScales").removeObject(b);b.destroy()},deleteCriterion:function(a,c){var b=c.get("criterionScales").toArray();
b.forEach(function(e){RubricManagerCore._deleteCriterionScale(a,e)});a.get("criteria").removeObject(c);
c.destroy();return YES},addScale:function(b,c){if(b.get("isGradingForm")){return}var a=this.get("nestedStore");
c.id=RubricManagerCore.nextId();var f=a.createRecord(Rb.RubricScale,c);f.beginPropertyChanges();
f.set("position",b.get("scales").getEach("position").get("@max")+1);f.set("num",b.get("scales").getEach("num").get("@max")+1);
f.set("name","_Scale %@".loc(b.get("scales").length()+1));b.get("scales").pushObject(f);
var e=b.get("criteria");e.forEach(function(g){RubricManagerCore._addCriterionScale(b,g,f)
});f.endPropertyChanges();return f},deleteScale:function(b,e){var a=this.get("nestedStore");
var c=a.find(SC.Query.local(Rb.RubricCriterionScale,{conditions:"scale = {scale}",scale:e}));
c.forEach(function(f){RubricManagerCore._deleteCriterionScale(b,f)});b.get("scales").removeObject(e);
e.destroy();return YES},saveRubric:function(i){var f=this.get("nestedStore");var h=this.get("store");
var b=RubricManagerCore._validateRubric();if(!b.errors.get("length")&&(!b.warnings.get("length")||i)){try{var a=RubricManagerCore.editingRubricController.get("content");
if(!a.get("name")){a.set("name","_Untitled".loc())}var c=h.find(a);f.commitChanges();
c.recordDidChange();c.commitRecord({customDataHashFunction:RubricManagerCore.RubricDataStoreSupport.getRubricDataHash,customCallbackFunction:RubricManagerCore.RubricDataStoreSupport.rubricCreationCallback})
}catch(g){console.log(g);return{errors:["_A problem prevented the rubric from being saved. Please try again.".loc()],warnings:[]}
}return{errors:[],warnings:[]}}else{return b}},_validateRubric:function(f){f=f||RubricManagerCore.editingRubricController.get("content");
var i=f.get("criteria");var h=f.get("scales");var a=f.get("criterionScales"),c=f.get("scoringMethod"),e=f.get("isGradingForm");
var b={errors:[],warnings:[]};if(!f.get("name")){b.warnings.push('_You have not entered a name for your rubric. If you continue, your rubric will be named "Untitled".'.loc())
}else{if(f.get("name").length>30){b.errors.push("_The rubric name must be less than 30 characters long.".loc())
}}if(SC.none(c)){b.errors.push("_rubric scoring method is required.".loc())}if(i.get("length")<1){b.errors.push("_Your rubric must have at least one criterion row.".loc())
}else{i.forEach(function(j){if(!j.get("name")){b.errors.push("_One or more of your criteria rows don't have labels.".loc())
}else{if(j.get("name")&&j.get("name").length>13&&!e){b.errors.push("_The criterion name can be no longer than 13 characters.".loc())
}else{if(j.get("name")&&j.get("name").length>30&&e){b.errors.push("_The criterion name can be no longer than 30 characters.".loc())
}}}if(j.get("description")&&j.get("description").length>1000){b.errors.push("_The criterion description can be no longer than 1000 characters.".loc())
}})}if(h.get("length")<1&&!f.isGradingForm()){b.errors.push("_Your rubric must have at least one scale option column.".loc())
}else{h.forEach(function(j){var k=RubricManagerCore.ScaleView.scaleNameMaxLength;
if(j.get("name")&&j.get("name").length>k){b.errors.push("_The scale name can be no longer than %@ characters.".loc(k))
}})}a.forEach(function(j){if(j.get("description")&&j.get("description").length>1000){b.errors.push("_The cell description can be no longer than 1000 characters.".loc())
}});var g;switch(c){case Rb.NON_SCORING_RUBRIC:g=this._validateNonScoringRubric(f);
break;case Rb.TYPICAL_RUBRIC:g=this._validateTypicalRubric(f);break;case Rb.CUSTOM_RUBRIC:g=this._validateCustomRubric(f);
break;case Rb.NON_SCORING_GRADING_FORM:g=this._validateNonScoringGradingForm(f);break;
case Rb.SCORING_GRADING_FORM:g=this._validateScoringGradingForm(f);break;default:b.errors.push("_Unsupported scoring method.".loc());
break}if(g){b.errors.pushObjects(g.errors);b.warnings.pushObjects(g.warnings)}return b
},_validateTypicalRubric:function(b){var e=b.get("criteria");var c=b.get("scales");
var a={errors:[],warnings:[]};if(e.get("length")>=1){e.forEach(function(f){if(SC.none(f.get("value"))){a.errors.push("_One or more of your criteria rows don't have values.".loc())
}})}if(c.get("length")>=1){c.forEach(function(g){var f=g.get("value");if(SC.none(f)){a.errors.push("_One or more of your scale option columns do not have point values.".loc())
}else{if(f>100||f<0){a.errors.push("_One or more of your scale don't have valid point values. Only numbers between 0 and 100, with up to 2 decimal places, are allowed.".loc())
}}})}if(b.get("totalPercent")!==100){a.warnings.push("_Your criteria rows do not total 100%.".loc())
}return a},_validateCustomRubric:function(c){var a=c.get("criterionScales");var b={errors:[],warnings:[]};
a.forEach(function(f){var e=f.get("value");if(SC.empty(e)||e>99||e<0){b.errors.push("_One or more of your cells don't have valid point values. Only numbers between 0 and 99, with up to 2 decimal places, are allowed.".loc())
}});return b},_validateNonScoringRubric:function(){var a={errors:[],warnings:[]};
return a},_validateNonScoringGradingForm:function(b){var c=b.get("scales");var a={errors:[],warnings:[]};
if(c.get("length")>0){a.errors.push("_Marking forms cannot contain scales.".loc())
}return a},_validateScoringGradingForm:function(b){var c=b.get("scales");var a={errors:[],warnings:[]};
if(c.get("length")>0){a.errors.push("_Marking forms cannot contain scales.".loc())
}return a},createGradingForm:function(a){a=SC.merge({criteria:3,scoringMethod:Rb.SCORING_GRADING_FORM},a);
a.scales=0;return this.createRubric(a)},createRubric:function(a){a=SC.merge({criteria:4,scales:3,scoringMethod:Rb.TYPICAL_RUBRIC},a);
if(!a.owner){a.owner=RubricManagerCore.userController.get("id")}var f=this.get("nestedStore");
var e=f.createRecord(Rb.Rubric,{name:a.name,scoring_method:a.scoringMethod,owner:a.owner,id:RubricManagerCore.nextId(),criterion:[],scale_values:[],criterion_scales_all:[],cv_loaded:1});
RubricManagerCore.nestedStore.commitChanges();for(var b=a.criteria-1;b>=0;b--){SC.run(function(){RubricManagerCore.addCriterion(e,{})
})}for(var c=a.scales-1;c>=0;c--){SC.run(function(){RubricManagerCore.addScale(e,{})
})}return e},duplicateRubric:function(c){var i=c.get("store");var e=i.readDataHash(c.get("storeKey"));
var k=SC.clone(e);k.id=RubricManagerCore.nextId();k.name=k.name+"_"+"copy".loc();
k.owner=RubricManagerCore.userController.get("id");k.criterion=[];k.scale_values=[];
k.criterion_scales_all=[];k.papers_scored=0;k.assignments=[];k.master_class=[];k.rubric_group=null;
var m={};var h={};var l=[];c.get("criteria").forEach(function(n){var o=i.readDataHash(n.get("storeKey"));
var p=SC.clone(o);p.id=RubricManagerCore.nextId();l.pushObject(p);m[n.get("id")]=p.id
});var a={};var j=[];c.get("scales").forEach(function(o){var p=i.readDataHash(o.get("storeKey"));
var n=SC.clone(p);n.id=RubricManagerCore.nextId();n.rubric=k.id;j.pushObject(n);k.scale_values.push(n.id);
a[o.get("id")]=n.id});var b=[];c.get("criterionScales").forEach(function(p){var o=i.readDataHash(p.get("storeKey"));
var n=SC.clone(o);n.id=RubricManagerCore.nextId();n.rubric=k.id;n.criterion=m[p.getPath("criterion.id")];
n.scale_value=a[p.getPath("scale.id")];b.pushObject(n);k.criterion_scales_all.push(n.id);
h[p.get("id")]=n.id});l.forEach(function(n){var p=n.criterion_scales;for(var o=0;
o<p.length;o++){p[o]=h[p[o]]}});var g=this.get("nestedStore");SC.Observers.suspendPropertyObserving();
var f=g.createRecord(Rb.Rubric,k);g.commitChanges();g.createRecords(Rb.RubricScale,j);
g.createRecords(Rb.RubricCriterion,l).setEach("rubric",f);g.createRecords(Rb.RubricCriterionScale,b);
SC.Observers.resumePropertyObserving();return f},deleteRubric:function(a){a.destroy();
RubricManagerCore.nestedStore.commitChanges();RubricManagerCore.store.find(a).commitRecord()
},importRubric:function(){alert("not implemented")},exportRubric:function(){alert("not implemented")
},shareRubricToAccount:function(b,e){var c=b.get("sharedToAccountIds")||[];c.pushObject(e);
var a=c.uniq();b.set("sharedToAccountIds",a);b.commitRecord()},unShareRubricToAccount:function(b,e){var c=b.get("sharedToAccountIds")||[];
c.removeObject(e);var a=c.uniq();b.set("sharedToAccountIds",a);b.commitRecord()},shareRubricToSections:function(b,c){var e=b.get("sharedToMasterClassIds")||[];
e.pushObject(c);var a=e.uniq();b.set("sharedToMasterClassIds",a);b.commitRecord()
},unShareRubricToSections:function(b,c){var e=b.get("sharedToMasterClassIds")||[];
e.removeObject(c);var a=e.uniq();b.set("sharedToMasterClassIds",a);b.commitRecord()
},updateRubricAttachmentStatus:function(c,f,a){var e=RubricManagerCore.nestedStore.find(c);
if(a){c.get("assignments").pushObject(f.get("id"));e.get("assignments").pushObject(f.get("id"))
}else{var b=c.get("assignments").removeObject(f.get("id"));c.set("assignments",b);
e.set("assignments",b)}c.propertyDidChange("assignments");e.propertyDidChange("assignments");
RubricManagerCore.nestedStore.reset()}});RubricManagerCore.CRITERION_COLUMN_WIDTH=175;
RubricManagerCore.SCALES_ROW_HEIGHT=75;RubricManagerCore.CRITERION_ROW_HEIGHT=125;
RubricManagerCore.CRITERION_EDITING_ROW_HEIGHT=RubricManagerCore.CRITERION_ROW_HEIGHT*3;
RubricManagerCore.SCALES_COLUMN_WIDTH=200;RubricManagerCore.SCROLL_BUFFER=20;RubricManagerCore.RUBRIC_NAME_HINT="_Enter rubric name here".loc();
RubricManagerCore.GRADING_FORM_NAME_HINT="_Enter grading form name here".loc();RubricManagerCore.messages={sidebarTitle:{rubric:"_Rubric".loc(),gradingForm:"_Grading Form".loc()},cantExpandRubric:{rubric:"_Expanded rubric is unavailable because no rubric has been attached to this assignment.".loc(),gradingForm:"_Expanded grading form is unavailable because no grading form has been attached to this assignment.".loc()},expandRubric:{rubric:"_Use full size rubric in a new window".loc(),gradingForm:"_Use full size grading form in a new window".loc()},applyScoreButton:{rubric:"_Apply rubric percentage to grade".loc(),gradingForm:"_Apply score to grade".loc()},rubricIsExpandedHeader:{rubric:"_Your rubric is expanded in another window.".loc(),gradingForm:"_Your grading form is expanded in another window.".loc()},rubricIsExpandedLink:{rubric:"_Bring the rubric to the top.".loc(),gradingForm:"_Bring the grading form to the top.".loc()},rubricIsExpandedText:{rubric:"_To access your rubric in the sidebar, close the other window containing your expanded rubric.".loc(),gradingForm:"_To access your grading form in the sidebar, close the other window containing your expanded grading form.".loc()},rubricIsExpandedTip:{rubric:"_TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.".loc(),gradingForm:"_TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as QuickMarks and Comments.".loc()},rubricIsExpandedStudentTip:{rubric:"_TIP: When your rubric is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.".loc(),gradingForm:"_TIP: When your grading from is expanded in another window, you can utilize other GradeMark sidebar tools such as the Comment list and General comments.".loc()},attachedRubricLocked:{rubric:"_The attached rubric is locked by the master class instructor.".loc(),gradingForm:"_The attached grading form is locked by the master class instructor.".loc()},attachThisRubric:{rubric:"_Attach this rubric to this assignment".loc(),gradingForm:"_Attach this grading form to this assignment".loc()},detachThisRubric:{rubric:"_Detach this rubric from this assignment".loc(),gradingForm:"_Detach this grading form from this assignment".loc()},notRubricOwner:{rubric:"_You are not the owner of this rubric.".loc(),gradingForm:"_You are not the owner of this grading form.".loc()},rubricUsedToScore:{rubric:"_This rubric has already been used to score papers.".loc(),gradingForm:"_This grading form has already been used to score papers.".loc()},rubricNotEditable:{rubric:"_This rubric cannot be edited".loc(),gradingForm:"_This form cannot be edited".loc()},confirmStopSharingToAccount:{rubric:"_Are you sure you want to stop sharing this rubric with the account?".loc(),gradingForm:"_Are you sure you want to stop sharing this grading form with the account?".loc()},confirmStartSharingToAccount:{rubric:"_Are you sure you want to share this rubric with the account?".loc(),gradingForm:"_Are you sure you want to share this grading form with the account?".loc()},confirmStopSharingToSection:{rubric:"_Are you sure you want to stop sharing this rubric with all sections?".loc(),gradingForm:"_Are you sure you want to stop sharing this grading form with all sections?".loc()},confirmStartSharingToSection:{rubric:"_Are you sure you want to share this rubric with all sections?".loc(),gradingForm:"_Are you sure you want to share this grading form with all sections?".loc()}};
Dropzone.autoDiscover=false;RubricManagerCore.CriteriaController=SC.ArrayController.extend({allowsMultipleSelection:NO,allowsEmptySelection:YES,allowsSelection:YES,contentBinding:"RubricManagerCore.editingRubricController.criteria",rubricStatusBinding:"RubricManagerCore.editingRubricController.status",rubricStatusChange:function(){if(this.get("content")){this.get("content").enumerableContentDidChange()
}}.observes("rubricStatus"),orderBy:"position",viewHeight:function(){var b=this.get("hasSelection");
var a=(this.get("length")*RubricManagerCore.CRITERION_ROW_HEIGHT);a=a+RubricManagerCore.SCROLL_BUFFER;
if(b){a=a+(RubricManagerCore.CRITERION_EDITING_ROW_HEIGHT-RubricManagerCore.CRITERION_ROW_HEIGHT)
}return a}.property("length","hasSelection").cacheable(),deleteCriterion:function(a,b){var c={alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:RubricManagerCore.deleteCriterion(a,b);
break;default:break}}};SC.AlertPane.warn("_Delete".loc(),"_Are you sure you want to delete this criterion?".loc(),null,"_YES".loc(),"_NO".loc(),c)
}});RubricManagerCore.CriterionReadMarkSetsController=SC.Controller.extend({read:null,readBindingDefault:SC.Binding.oneWay(),rubric:null,rubricBindingDefault:SC.Binding.oneWay(),_read:null,_rubric:null,_criterionDelegateMap:function(){return{}
}.property().cacheable(),getCriterionReadMarksDelegate:function(e){var f=this.get("read");
var c=this.get("rubric");if(!f||!c){return}var g=e.get("id");var a=this.get("_criterionDelegateMap");
var b=a[g];if(!b){b=SC.Object.create(Cv.CriterionReadMarksDelegate,{read:f,criterion:e});
a[g]=b}return b},_deleteDelegatesIfNeeded:function(){var f=this.get("read");var e=this.get("rubric");
if(f==this._read&&e==this._rubric){return}this._read=f;this._rubric=e;var a=this.get("_criterionDelegateMap");
for(var b in a){if(!a.hasOwnProperty(b)){continue}var g=b;var c=a[g];if(c){c.destroy()
}delete a[g]}},_contextChanged:function(){this.invokeOnce(this._deleteDelegatesIfNeeded)
}.observes("read","rubric")});RubricManagerCore.CriterionScoring=SC.ArrayController.extend({content:null,criterion:null,scoringController:null,scoresBinding:".scoringController.scores",isSelectableBinding:".scoringController.isEditable",scoresDidChange:function(){var b,e=this.get("scores");
if(e&&this.get("content")){var a=this.getPath("criterion.num");var c=this.get("content").toArray().toArray();
c.forEach(function(f){if(f.getPath("scale.num")===e[a]){b=f}})}this.selectObject(b)
}.observes("scores"),scoreSelectionDidChange:function(){var c=this.getPath("selection.firstObject");
var b=c?c.getPath("scale.num"):null;var e=this.get("scores");var a=this.getPath("criterion.num");
if(e){if(e[a]!=b){e=Ip.clone(e);if(b!==null){e[a]=b}else{delete e[a]}this.set("scores",e)
}}else{console.error("NO SCORES OBJECT!!!")}}.observes("selection")});RubricManagerCore.CurrentRubricController=SC.ObjectController.extend({contentBinding:SC.Binding.single("RubricManagerCore.rubricListController.selection"),sanityCheck:function(){if(this.getPath("content.store")!==RubricManagerCore.store){console.log("currentRubricController content not from main store! "+this.getPath("content.store"))
}}.observes("content"),isAttachedToCurrentAssignment:function(){return(this.get("content")&&(this.get("content")===RubricManagerCore.assignmentController.getPath("rubric")))
}.property("content","assignments").cacheable(),isSharedToCurrentAccount:function(){var b=NO;
var a=this.get("content");if(a){var c=Ip.getQueryStringParameter("aid");b=a.isSharedToAccount(c)
}return b}.property("content").cacheable(),isSharedToCurrentSections:function(){var c=NO;
var a=this.get("content");if(a){var b=Ip.getQueryStringParameter("cid");c=a.isSharedToSections(b)
}return c}.property("content").cacheable(),toggleSharingToAccount:function(){var b=this.get("content");
var a=b.get("isGradingForm")?"gradingForm":"rubric";if(this.get("isSharedToCurrentAccount")){SC.AlertPane.warn("_Confirm".loc(),RubricManagerCore.messages.confirmStopSharingToAccount[a],null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){RubricManagerCore.unShareRubricToAccount(b,Ip.getQueryStringParameter("aid"))
}}})}else{SC.AlertPane.warn("_Confirm".loc(),RubricManagerCore.messages.confirmStartSharingToAccount[a],null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){RubricManagerCore.shareRubricToAccount(b,Ip.getQueryStringParameter("aid"))
}}})}},toggleSharingToSections:function(){var b=this.get("content");var a=b.get("isGradingForm")?"gradingForm":"rubric";
if(this.get("isSharedToCurrentSections")){SC.AlertPane.warn("_Confirm".loc(),RubricManagerCore.messages.confirmStopSharingToSection[a],null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){RubricManagerCore.unShareRubricToSections(b,Ip.getQueryStringParameter("cid"))
}}})}else{SC.AlertPane.warn("_Confirm".loc(),RubricManagerCore.messages.confirmStartSharingToSection[a],null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){RubricManagerCore.shareRubricToSections(b,Ip.getQueryStringParameter("cid"))
}}})}},exportRubric:function(){var a=Ip.LocalizedUrl.prepareUrl("/gm3/rubric/%@?download=1&cv=1&%@".fmt(this.get("id"),Rb.Rubric.queryString()));
Ip.downloadFromUrl(a)},isBusy:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable(),canBeAttached:function(){return this.get("store")!==RubricManagerCore.nestedStore
}.property("store").cacheable()});RubricManagerCore.EditingRubricController=SC.ObjectController.extend({content:null,hasChanges:null,hasChangesBinding:"RubricManagerCore.nestedStore.hasChanges",doPostLoadActivities:function(){if(!RubricManagerCore.currentRubricController.get("relatedRecordsLoaded")){return
}var a=this.get("scoringMethod");var b=[Rb.NON_SCORING_RUBRIC,Rb.TYPICAL_RUBRIC,Rb.CUSTOM_RUBRIC,Rb.SCORING_GRADING_FORM,Rb.NON_SCORING_GRADING_FORM];
if(a&&b.indexOf(a)===-1){this.invokeLater(function(){RubricManagerCore.convertRubric(this.get("content"));
if(this.get("content")){this.get("content").allPropertiesDidChange()}})}else{if(this.get("content")){this.get("content").allPropertiesDidChange()
}}}.observes("RubricManagerCore.currentRubricController.relatedRecordsLoaded"),isEditable:function(){return(!this.get("hasBeenUsedToScore")&&this.get("userIsOwner"))
}.property("hasBeenUsedToScore","userIsOwner").cacheable(),isEditing:NO,contentDidChange:function(){if(this.get("isGradingForm")&&this.get("id")>0&&!this.get("hasChanges")){this.set("isEditing",NO)
}else{if(this.get("isEditable")){this.beginEditing()}else{this.set("isEditing",NO)
}}}.observes("content","hasChanges"),beginEditing:function(){if(this.get("isEditable")){this.set("isEditing",YES)
}return this.get("isEditing")},canCancel:function(){var c=this.get("isEditing"),e=this.get("isGradingForm"),a=this.get("hasChanges"),b;
if(!c){b=NO}else{if(e){b=c}else{b=a===YES}}return b}.property("isEditing","isGradingForm","hasChanges").cacheable(),userIsOwner:function(){var c=NO;
var b=this.get("content");if(b){var a=parseInt(RubricManagerCore.userController.get("id"),10);
c=b.isOwnedByUser(a)}return c}.property("owner","isOwnedViaIntegrations","isAccessedViaIntegrations").cacheable(),hasBeenUsedToScore:function(){return(this.getPath("assignments.length")>0||this.getPath("papersScored")>0)
}.property("assignments","papersScored").cacheable(),title:function(){return this.get("content")?this.get("content.title"):"_No rubric selected".loc()
}.property("content").cacheable(),addCriterion:function(){RubricManagerCore.addCriterion(this.get("content"),{name:"empty criterion"});
if(this.get("isGradingForm")){this.invokeLater(function(){RubricManagerCore.canvasesPage.get("gradingFormCanvas").scrollTo(0,10000)
},500)}else{this.invokeLater(function(){RubricManagerCore.rubricFieldScrollView.scrollToBottom()
},500)}},addCriterionNoScroll:function(){RubricManagerCore.addCriterion(this.get("content"),{name:"empty criterion"})
},addScale:function(){RubricManagerCore.addScale(this.get("content"),{name:"empty scale"});
this.invokeLater(function(){RubricManagerCore.rubricFieldScrollView.scrollToFarRight()
},500)},saveRubric:function(){this.invokeOnce(this._saveRubric)},_saveRubric:function(){var a=RubricManagerCore.saveRubric();
if(a.errors.get("length")){var c=a.errors.uniq();SC.AlertPane.error("_Could not save rubric".loc(),"_We've found the following problems with your rubric:".loc(),c.join("\n"),"_OK".loc())
}else{if(a.warnings.get("length")){var b=a.warnings.uniq();SC.AlertPane.info("_Confirm".loc(),b.join("\n"),"_Do you wish to continue anyway?".loc(),"_Save Anyway".loc(),"_Go Back".loc(),{alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:RubricManagerCore.saveRubric(YES);
break;default:break}}})}}},cancelEditing:function(){this._cancelEditing()},cancelEditingSkipConfirm:function(){this._cancelEditing(YES)
},_cancelEditing:function(b){var a=function(){if(RubricManagerCore.editingRubricController.get("content").status()===SC.Record.READY_NEW){RubricManagerCore.rubricListController.invokeLast(function(){var c=RubricManagerCore.rubricListController.firstSelectableObject();
RubricManagerCore.rubricListController.selectObject(c)})}RubricManagerCore.discardNestedStoreChanges();
RubricManagerCore.editingRubricController.contentDidChange()};if(b){a();return}SC.AlertPane.warn("_Confirm".loc(),"_Are you sure you want to cancel your changes? Your changes will be lost.".loc(),null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){switch(c){case SC.BUTTON1_STATUS:a();
break;default:break}}})},deleteRubric:function(){var c=this.get("content");var b=c.get("isGradingForm");
var a=b?"_Are you sure you want to delete this grading form?".loc():"_Are you sure you want to delete this rubric?".loc();
SC.AlertPane.warn("_Confirm".loc(),a,null,"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(f,e){if(e===SC.BUTTON1_STATUS){RubricManagerCore.deleteRubric(c)
}}})}});RubricManagerCore.FeedbackScoringController=SC.ArrayController.extend({content:null,rubricIsLoaded:null,rubricScoring:null,rubric:null,store:null,createMissingObjects:function(){var a=this.get("rubricScoring"),c=this.get("content"),e=this.get("rubricIsLoaded"),b=this.get("store");
if(a&&a.get("status")===SC.Record.READY_NEW){if(!Cv.get("attachingRubric")){a.commitRecord()
}return}if(a&&e&&a.get("id")){this.getPath("rubric.criteria").forEach(function(h){var g=c.filter(function(i){return i.get("criterion")===h
});if(g.length===0){var f=b.createRecord(Rb.RubricScoringFeedback,{id:RubricManagerCore.nextId(),rubric_scoring:parseInt(a.get("id"),10),criterion:parseInt(h.get("id"),10)});
console.log("created for",RubricManagerCore.nextId(),a.get("id"),h.get("id"))}else{if(g.length>1){g.forEach(function(i){if(i.get("status")===SC.Record.READY_NEW){console.log("destroying",i);
i.destroy()}})}}})}}.observes("content","rubric","rubricIsLoaded"),scoringFeedbackForCriterion:function(b){var a=this.get("content");
if(!a||!b){return}return a.find(function(c){return c.get("criterion")==b})},saveFeedback:function(c){var b=(SC.empty(c.get("comment"))&&SC.empty(c.get("score"))),a=c.get("status");
if(a===SC.Record.READY_NEW&&b){return}c.commitRecord();if(this.respondsTo("feedbackDidSave")){this.feedbackDidSave()
}}});RubricManagerCore.ImportController=SC.ObjectController.extend({uploadTarget:function(){return"/gm3/rubric?output=json&cid=%@&aid=%@&lang=%@".fmt(RubricManagerCore.classController.get("id")||"",Ip.getQueryStringParameter("aid")||"",this.get("lang"))
}.property("lang").cacheable(),lang:null,langBinding:"Cv.lang",importInProgress:NO,uploadRequested:NO,filePath:null,message:null,fileIsSelected:function(){return this.get("filePath")!==null
}.property("filePath").cacheable(),cancelImport:function(){this.set("message",null);
this.reset()},reset:function(){this.set("filePath",null);this.set("uploadRequested",NO)
},beginImport:function(){this.set("importInProgress",YES)},startUpload:function(){this.set("message","_Uploading".loc());
if(this.get("fileIsSelected")&&this.get("importInProgress")){this.set("uploadRequested",YES)
}},uploadViewDidComplete:function(b){var a=SC.isArray(b.Rubric)?b.Rubric[0]:null;
if(SC.none(a)){this.showErrors(b)}else{try{delete a.criterion_scales_all;delete a.criterion;
delete a.scale_values;var c=RubricManagerCore.store.loadRecord(Rb.Rubric,a);this.set("message","_Import complete".loc());
this.invokeLast(function(){var e=RubricManagerCore.store.materializeRecord(c);RubricManagerCore.rubricListController.selectRubric(e)
})}catch(f){this.set("message","_The import could not be completed.".loc())}}this.reset()
},showErrors:function(a){if(a.input_errors){if(!SC.none(a.input_errors.upload)){this.set("message","_An error occurred: %@".loc(a.input_errors.upload))
}else{this.set("message","_An error occurred: The file is in an invalid format.".loc())
}}else{this.set("message","_An error occurred.".loc())}}});RubricManagerCore.ReadMarkCriteriaController=SC.ArrayController.extend(Cv.ReadMarkCriteriaDelegate,{content:function(){return this.get("markCriteria")
}.property("markCriteria").cacheable(),read:null,hasMarkCriteria:function(){var b=this.get("canUseMarkCriteriaAssociation");
var a=this.get("length");return b&&a>0}.property("length","canUseMarkCriteriaAssociation").cacheable(),canUseMarkCriteriaAssociation:NO});
RubricManagerCore.RubricListController=SC.ArrayController.extend({allowsEmptySelection:YES,allowsMultipleSelection:NO,orderBy:"name",content:null,finishedLoading:function(){if(this.get("isBusy")){return
}if(this.get("length")&&!this.get("hasSelection")&&SC.none(RubricManagerCore.editingRubricController.get("content"))){var a=RubricManagerCore.assignmentController.get("rubric")||this.firstSelectableObject();
this.selectObject(a)}}.observes("isBusy"),selectedRubricDidChange:function(){var b=this.getPath("selection.firstObject");
if(b&&b.get("store")!==RubricManagerCore.nestedStore&&!b.get("relatedRecordsLoaded")){b.refresh()
}var a=b?RubricManagerCore.nestedStore.find(b):null;RubricManagerCore.editingRubricController.set("content",a)
}.observes("selection"),deleteCurrentRubric:function(){var c={alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:if(!RubricManagerCore.editingRubricController.get("isNew")){RubricManagerCore.deleteRubric(RubricManagerCore.rubricListController.getPath("selection.firstObject"))
}else{RubricManagerCore.discardNestedStoreChanges()}RubricManagerCore.rubricListController.invokeLast(function(){var g=RubricManagerCore.rubricListController.firstSelectableObject();
RubricManagerCore.rubricListController.selectObject(g)});break;default:break}}};var b=RubricManagerCore.rubricListController.getPath("selection.firstObject.isGradingForm");
var a=b?"_Are you sure you want to delete this grading form?".loc():"_Are you sure you want to delete this rubric?".loc();
SC.AlertPane.warn("_Delete".loc(),a,null,"_YES".loc(),"_NO".loc(),c)},createNewRubric:function(){var a=function(){var b=RubricManagerCore.createRubric();
RubricManagerCore.rubricListController.selectObject(null);RubricManagerCore.editingRubricController.set("content",b);
RubricManagerCore.rubricTitleView.invokeLast(RubricManagerCore.rubricTitleView.beginEditing)
};this.tryToDo("_create a new rubric".loc(),a)},createNewGradingForm:function(){var a=function(){var b=RubricManagerCore.createGradingForm();
RubricManagerCore.rubricListController.selectObject(null);RubricManagerCore.editingRubricController.set("content",b);
RubricManagerCore.rubricTitleView.invokeLast(RubricManagerCore.rubricTitleView.beginEditing)
};this.tryToDo("_create a new grading form".loc(),a)},duplicateRubric:function(){var a=function(){var b=RubricManagerCore.duplicateRubric(RubricManagerCore.currentRubricController.get("content"));
RubricManagerCore.rubricListController.selectObject(null);RubricManagerCore.editingRubricController.set("content",b);
RubricManagerCore.rubricTitleView.invokeLast(RubricManagerCore.rubricTitleView.beginEditing)
};this.tryToDo("_duplicate this rubric".loc(),a)},selectRubric:function(a){var b=function(){RubricManagerCore.rubricListController.selectObject(a)
};this.tryToDo("_switch to this rubric".loc(),b)},tryToDo:function(c,a){var b={alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:RubricManagerCore.discardNestedStoreChanges();
a.call();break;default:break}}};if(RubricManagerCore.nestedStore.get("hasChanges")){SC.AlertPane.warn("_Confirm".loc(),"_Are you sure you want to %@? Your changes will be lost.".loc(c),'_If you leave this rubric without clicking "Save", your changes to this rubric will be lost.'.loc(),"_YES".loc(),"_NO".loc(),b)
}else{a.call()}},isBusy:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});RubricManagerCore.ScalesController=SC.ArrayController.extend({contentBinding:"RubricManagerCore.editingRubricController.scales",rubricStatusBinding:"RubricManagerCore.editingRubricController.status",rubricStatusChange:function(){if(this.get("content")){this.get("content").enumerableContentDidChange()
}}.observes("rubricStatus"),orderBy:"position",viewWidth:function(){return(this.get("length")*RubricManagerCore.SCALES_COLUMN_WIDTH)+RubricManagerCore.SCROLL_BUFFER
}.property("length").cacheable(),isEditing:NO,toggleEditingMode:function(){this.set("isEditing",!this.get("isEditing"))
},deleteScale:function(a,c){var b={alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:RubricManagerCore.deleteScale(a,c);
break;default:break}}};SC.AlertPane.warn("_Delete".loc(),"_Are you sure you want to delete this scale?".loc(),null,"_YES".loc(),"_NO".loc(),b)
}});RubricManagerCore.UserController=SC.ObjectController.extend({canShareToSections:function(){return !!RubricManagerCore.classController.get("isMasterClass")
}.property("RubricManagerCore.classController.isMasterClass").cacheable(),canShareToAccounts:function(){return !SC.none(this.get("shareToAccount"))
}.property("shareToAccount").cacheable(),shareToAccount:function(){return Ip.getQueryStringParameter("aid")
}.property().cacheable(),canShare:function(){return this.get("canShareToAccounts")||this.get("canShareToSections")
}.property("canShareToAccounts","canShareToSections").cacheable()});RubricManagerCore.FieldCellViewSelectionSupport={backgroundColorDidChange:function(){var a=this.get("classNames")||[];
a=a.toArray();if(this.get("isSelected")&&(a.indexOf("selected")===-1)){a.pushObject("selected");
this.set("classNames",a)}else{if(!this.get("isSelected")&&(a.indexOf("selected")!==-1)){a.removeObject("selected");
this.set("classNames",a)}}this.updateLayer()}.observes("isSelected"),isSelected:null};
RubricManagerCore.RubricDataStoreSupport={getRubricDataHash:function(b,e){var c={};
var a=b.materializeRecord(e);c[Rb.Rubric.responseKey]=[];c[Rb.Rubric.responseKey].push(b.readDataHash(e));
c[Rb.RubricScale.responseKey]=[];a.get("scales").forEach(function(g){var f=b.readDataHash(g.get("storeKey"));
if(SC.none(f.value)){f.value="0"}c[Rb.RubricScale.responseKey].push(f)});c[Rb.RubricCriterion.responseKey]=[];
a.get("criteria").forEach(function(g){var f=b.readDataHash(g.get("storeKey"));if(SC.none(f.value)){f.value="0"
}c[Rb.RubricCriterion.responseKey].push(f)});c[Rb.RubricCriterionScale.responseKey]=[];
a.get("criterionScales").forEach(function(g){var f=b.readDataHash(g.get("storeKey"));
if(SC.none(f.value)){f.value="0"}c[Rb.RubricCriterionScale.responseKey].push(f)});
return c},rubricCreationCallback:function(c,b,e){if(SC.ok(c)){if(c.get("body")["Rubric"]){var f=parseInt(c.get("body")["Rubric"][0].id);
b.dataSourceDidComplete(e,null,f);var a=b.materializeRecord(e);RubricManagerCore.RubricDataStoreSupport.propagateRubricIdChange(a,f);
RubricManagerCore.rubricListController.selectObject(a)}else{b.dataSourceDidComplete(e)
}this.invokeLast(function(){RubricManagerCore.nestedStore.reset()})}else{this.notifyOfFailure("_Save Error".loc(),c);
b.dataSourceDidError(e,c)}},propagateRubricIdChange:function(b,a){SC.Observers.suspendPropertyObserving();
b.set("id",a);var c=b.get("scales");var e=b.get("criteria");c.forEach(function(f){f.writeAttribute("rubric",a)
});e.forEach(function(f){f.writeAttribute("rubric",a)});SC.Observers.resumePropertyObserving()
}};RubricManagerCore.RubricOwner={rubrics:function(){var a=this.get("store");var b=RubricManagerCore.classController.get("id")||"";
if(!this._rubricsQuery){this._rubricsQuery=SC.Query.local(Rb.Rubric,{url:"/gm3/rubricstub?cid="+b})
}return a.find(this._rubricsQuery)}.property().cacheable()};RubricManagerCore.scorableCriteria={criterionScoringControllers:function(){var a=this.get("scoringController");
if(!a){throw"RubricManagerCore.scorableCriteria requires that a scoringController be set!"
}if(this.get("content")){var b=[];this.getPath("content").forEach(function(e){var c=RubricManagerCore.CriterionScoring.create({content:e.get("criterionScales"),criterion:e,scoringController:a});
b.push(c)});return b}}.property().cacheable("content"),scoringControllerForCriterion:function(a){var c=this.get("criterionScoringControllers")||[];
var b=c.find(function(e){return e.get("criterion")===a});return b}};Rb.Rubric.mixin({queryString:function(){return"cid=%@&assignment_id=%@".fmt(RubricManagerCore.classController.get("id"),RubricManagerCore.assignmentController.get("id"))
}});RubricManagerCore.MarkListPane=SC.PickerPane.extend({marksDelegate:null,listView:SC.outlet("contentView.contentView"),emphasizedMarkController:NO,classNames:"mark-list-pane",_MAX_NUMER_OF_MARKS_TO_SHOW:6,_HEIGHT_BUFFER:2,contentView:SC.ScrollView.design({contentView:SC.ListView.design({marksDelegate:null,marksDelegateBinding:".parentView.parentView.parentView.marksDelegate",emphasizedMarkController:null,emphasizedMarkControllerBinding:".parentView.parentView.parentView.emphasizedMarkController",_updateContent:function(){var a=this.getPath("marksDelegate.marks")||[];
this.set("content",a)},_updateContentIfNeeded:function(){this.invokeOnce(this._updateContent)
}.observes("*marksDelegate.marks.[]"),isSelectable:NO,rowHeight:50,createItemView:function(c,a,b){b.emphasizedMarkController=this.get("emphasizedMarkController");
c=this.getItemViewClass(b);arguments[0]=c;return arguments.callee.base.apply(this,arguments)
},getItemViewClass:function(a){var b;var c=a.content.constructor;if(c==Cv.Comment){b=RubricManagerCore.MarkListPaneCommentView
}else{if(c==Cv.QuickMark){b=RubricManagerCore.MarkListPaneQuickMarkView}else{throw"Unsupported mark type in marks list pane: %@".fmt(c)
}}return b},_frameDidChange:function(){var a=this.getPath("parentView.parentView.parentView");
if(a){a._updateHeightIfNeeded()}}.observes("frame")})}),popup:function(){var a=this;
SC.run(function(){a._updateHeight()});arguments.callee.base.apply(this,arguments)
},_updateHeightIfNeeded:function(){this.invokeOnce(this._updateHeight)},_updateHeight:function(){var b=this.getPath("marksDelegate.markCriteriaLength")||0;
if(b===0){return}if(b>this._MAX_NUMER_OF_MARKS_TO_SHOW){b=this._MAX_NUMER_OF_MARKS_TO_SHOW
}var a=b*this.getPath("listView.rowHeight");a+=this._HEIGHT_BUFFER;this.adjust("height",a)
}});sc_require("views/mark_list_pane");RubricManagerCore.CriterionMarksPaneButtonView=SC.ButtonView.extend(SCUI.ToolTip,{criterion:null,criterionReadMarkSetsController:null,classNames:["criterion-marks-pane-button"],titleMinWidth:"32",emphasizedMarkController:null,markCount:0,toolTip:function(){var a;
var c=this.get("markCount");var b=this.getPath("criterion.name");if(c>0){if(c===1){a="_Click to view the %@1 mark associated with %@2".loc(c,b)
}else{a="_Click to view the %@1 marks associated with %@2".loc(c,b)}}else{a="_No marks are associated with %@".loc(b)
}return a}.property("markCount","criterion").cacheable(),delegate:function(){var c=this.get("criterion");
var a=this.get("criterionReadMarkSetsController");if(!c||!a){return}var b=a.getCriterionReadMarksDelegate(c);
return b}.property("criterion","criterionReadMarkSetsController"),_markCriterionLengthDidChange:function(){this.invokeOnce(this._updateMarkCount)
}.observes("*delegate.markCriteriaLength"),_updateMarkCount:function(){this.set("markCount",this.getPath("delegate.markCriteriaLength"))
},title:function(){var a=this.get("markCount")||null;return a}.property("markCount").cacheable(),isEnabled:function(){var b=this.get("markCount");
var a=(b>0);return a}.property("markCount").cacheable(),icon:function(){if(this.get("isEnabled")){return"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/mark-bubble-comment.png"
}else{return"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/mark-bubble-comment-white.png"
}}.property("isEnabled").cacheable(),target:this,action:function(){var b=this.get("delegate");
var a=RubricManagerCore.CriterionMarksPaneButtonView.getMarksPane();a.set("marksDelegate",b);
a.set("emphasizedMarkController",this.get("emphasizedMarkController"));a.popup(this,SC.PICKER,[3,0,1,2,3])
},didCreateLayer:function(){this.invokeOnce(this._setupTipTip)},didUpdateLayer:function(){this.invokeOnce(this._setupTipTip)
},_setupTipTip:function(){$(this.get("layer")).tipTip({defaultPosition:"top",delay:0,fadeIn:0})
}});RubricManagerCore.CriterionMarksPaneButtonView.mixin({getMarksPane:function(){return this._page.get("marksPane")
},_page:SC.Page.create({marksPane:RubricManagerCore.MarkListPane.design({layout:{width:400,height:200},marksDelegate:null})})});
RubricManagerCore.ScoringFeedbackItemView=SC.View.extend(Ip.EditingInterceptor,{childViews:"criterionCommentView criterionScoreView saveMaskView".w(),useStaticLayout:YES,classNames:["criterion-feedback-item"],isScoringRubric:null,scoringFeedbackRecord:null,recordComment:null,recordScore:null,saveTarget:null,saveAction:null,layout:{left:10,width:260,minHeight:60,maxHeight:250},scoringCellWidth:null,commentHint:null,editingRegistryControllerBinding:"Cv.editingRegistryController",scoringFeedbackRecordDidChange:function(){this._destroyBindings();
if(this.get("scoringFeedbackRecord")&&!this.get("isDestroyed")){this.recordStatusBinding=this.bind("recordStatus",".scoringFeedbackRecord.status");
if(this.getPath("scoringFeedbackRecord.status")===SC.Record.READY_NEW){this.recordScoreBinding=this.bind("recordScore",".scoringFeedbackRecord.score");
this.recordCommentBinding=this.bind("recordComment",".scoringFeedbackRecord.comment")
}}this.set("isVisible",!SC.none(this.get("scoringFeedbackRecord")))}.observes("scoringFeedbackRecord"),_destroyBindings:function(){if(this.recordStatusBinding){this.recordStatusBinding.disconnect();
this.recordStatusBinding=null}if(this.recordScoreBinding){this.recordScoreBinding.disconnect();
this.recordScoreBinding=null}if(this.recordCommentBinding){this.recordCommentBinding.disconnect();
this.recordCommentBinding=null}},destroy:function(){this._destroyBindings();return arguments.callee.base.apply(this,arguments)
},isEditing:function(){var b=this.get("recordStatus");var a=this.get("scoringFeedbackRecord");
if(b===SC.Record.READY_NEW){return !(SC.empty(a.get("comment"))&&SC.empty(a.get("score")))
}return((b&SC.Record.DIRTY)!==0)}.property("recordStatus","recordComment","recordScore").cacheable(),getRecord:function(){return this.get("scoringFeedbackRecord")
},closeEditViewWithSave:function(){this.executeSave()},init:function(){arguments.callee.base.apply(this,arguments);
this._updateChildLayout();this.scoringFeedbackRecordDidChange()},_updateChildLayout:function(){var e=this.get("criterionCommentView"),g=this.get("criterionScoreView"),a=this.get("isScoringRubric"),f=this.get("scoringCellWidth"),c=this.get("commentHint"),b=this.get("layout");
f=f||b.minHeight;arguments.callee.base.apply(this,arguments);e.adjust({width:a?b.width-f:b.width,minHeight:b.minHeight,maxHeight:b.maxHeight});
e.set("maxHeight",b.maxHeight);e.set("minHeight",b.minHeight);if(!SC.none(c)){e.set("hint",c)
}if(!SC.none(a)){g.adjust({height:b.minHeight,left:a?b.width-f:b.width,top:0,width:f});
g.set("maxFontSize",f*0.58)}}.observes("criterionCommentView","criterionScoreView","isScoringRubric","scoringCellWidth","commentHint","layout"),focusDidChange:function(){if(!this.get("commentIsFocused")||!this.get("scoreIsFocused")){if(this._saveTimer){this._saveTimer.invalidate();
this._saveTimer=null}this._saveTimer=this.invokeLater(function(){if(!this.get("commentIsFocused")&&!this.get("scoreIsFocused")){this.executeSave()
}this._saveTimer=null},500)}}.observes("commentIsFocused","scoreIsFocused"),executeSave:function(){var a=this.get("saveTarget");
var b=this.get("saveAction");if(a&&b){a.tryToPerform(b,this.get("scoringFeedbackRecord"))
}},_saveTimer:null,commentIsFocusedBinding:".criterionCommentView.focused",scoreIsFocusedBinding:".criterionScoreView.focused",criterionCommentView:Ip.DynamicTextFieldView.design({useStaticLayout:YES,classNames:["comment-view"],dynamicStyles:'font: 99% "Lucida Sans", "Lucida Grande", Verdana, Arial, sans-serif;',padding:10,setCommentRoundCorners:function(){if(this.get("frame")&&!this.get("isScoringRubric")){var a=this.getPath("parentView.criterionCommentView").$(".border");
a.css("-webkit-border-radius","5px");a.css("-moz-border-radius","5px");a.css("border-radius","5px");
a=null}return YES}.observes("frame","isScoringRubric"),isScoringRubricBinding:".parentView.isScoringRubric",maxLength:1000,tagName:"div",parentLayoutBinding:".parentView.layout",value:null,scoringFeedbackRecordBinding:".parentView.scoringFeedbackRecord",scoringFeedbackRecordDidChange:function(){this._destroyBindings();
if(this.get("scoringFeedbackRecord")&&!this.get("isDestroyed")){this.valueBinding=this.bind("value",".scoringFeedbackRecord.comment")
}}.observes("scoringFeedbackRecord"),_destroyBindings:function(){if(this.valueBinding){this.valueBinding.disconnect();
this.valueBinding=null}},destroy:function(){this._destroyBindings();return arguments.callee.base.apply(this,arguments)
},maxHeight:500,isTextArea:YES,layoutDidChange:function(){var e=arguments.callee.base.apply(this,arguments);
if(this.get("frame")){var i=this.layout.height;var a=this.get("isVisible")?this.getPath("parentView.criterionScoreView").layout.height:0;
var c=this.$(".border");var h=i-a;var b;var g=5;if(h>g){b=g}else{if(h>0){b=h}else{b=0
}}c.css("-webkit-border-bottom-right-radius",b+"px");c.css("-moz-border-radius-bottomright",b+"px");
c.css("border-bottom-right-radius",b+"px");c=null}var f=this.getPath("parentView.parentView");
if(f){f.notifyPropertyChange("frame")}return e}}),criterionScoreView:SC.TextFieldView.extend(SC.AutoResize,Ip.TextFieldViewAutoResizeSupport,{maxWidth:50,shouldAutoFitText:YES,shouldAutoResize:NO,minFontSize:5,maxFontSize:60,maxLength:5,classNames:["score-view"],isVisibleBinding:".parentView.isScoringRubric",isEditable:YES,value:null,scoringFeedbackRecordBinding:".parentView.scoringFeedbackRecord",scoringFeedbackRecordDidChange:function(){this._destroyBindings();
if(this.get("scoringFeedbackRecord")&&!this.get("isDestroyed")){this.valueBinding=this.bind("value",".scoringFeedbackRecord.score")
}}.observes("scoringFeedbackRecord"),_destroyBindings:function(){if(this.valueBinding){this.valueBinding.disconnect();
this.valueBinding=null}},destroy:function(){this._destroyBindings();return arguments.callee.base.apply(this,arguments)
}}),saveMaskView:Ip.SaveMaskView.extend(Ip.DataSourceExceptionHandling,{layout:{top:0,left:0,right:0,height:14},classNames:["loading-mask"],scoringFeedbackRecordBinding:".parentView.scoringFeedbackRecord",scoringFeedbackRecordDidChange:function(){this._destroyBindings();
if(this.get("scoringFeedbackRecord")&&!this.get("isDestroyed")){this.recordStatusBinding=this.bind("recordStatus",".scoringFeedbackRecord.status")
}}.observes("scoringFeedbackRecord"),_destroyBindings:function(){if(this.recordStatusBinding){this.recordStatusBinding.disconnect();
this.recordStatusBinding=null}},destroy:function(){this._destroyBindings();return arguments.callee.base.apply(this,arguments)
},retrySave:function(){var a=this.get("retryLimit");if(a>0){this.set("retryLimit",a-1);
this.doSave(this,6000)}}.property("scoringFeedbackRecord").cacheable(),doSave:function(a,b){setTimeout(function(){var c=a.get("scoringFeedbackRecord");
c.exitErrorState();c.commitRecord()},b)},loadingText:null,retryLimit:2,prevStatus:null,setMaskColour:function(a){var b=this.get("classNames").concat();
b.removeObjects(["red","orange","green"]);b.pushObject(a);this.set("classNames",b)
},updateSaveMask:function(){var a=this.get("prevStatus");var b=this.get("recordStatus");
var c=null;this.get("manualRetryView").set("isVisible",NO);this.show();if((a===SC.Record.BUSY_CREATING||a===SC.Record.BUSY_COMMITTING)&&b===SC.Record.READY_CLEAN){c="_saved".loc();
this.setMaskColour("green");this.set("retryLimit",2);this.fadeOut()}else{if(b===SC.Record.BUSY_CREATING||b===SC.Record.BUSY_COMMITTING){c="_saving".loc();
this.setMaskColour("orange")}else{if(b===SC.Record.BUSY_LOADING){c="_loading".loc();
this.setMaskColour("orange")}else{if(b&SC.Record.BUSY_REFRESH){c="_refreshing".loc();
this.setMaskColour("orange")}else{if(b&SC.Record.ERROR){c="_error".loc()+(this.get("retryLimit")===0?", ":" "+"_retrying %@ more time(s)".loc(this.get("retryLimit")));
if(this.get("retryLimit")===0){SC.AlertPane.warn("_Save Error".loc(),"_Failed to save grading form feedback.".loc(),null,"_OK".loc());
this.get("manualRetryView").set("isVisible",YES)}this.setMaskColour("red");this.retrySave()
}}}}}if(c!==null){this.set("loadingText",c);this.set("isVisible",YES)}else{this.set("isVisible",NO)
}this.set("prevStatus",b)},updateCriterionFeedbackFields:function(){var a=this.get("recordStatus"),b=this.getPath("parentView.criterionCommentView"),c=this.getPath("parentView.criterionScoreView");
if(!c||!b){return}if(a&SC.Record.BUSY||a&SC.Record.ERROR){b.set("isEditable",NO);
b.set("isEnabled",NO);c.set("isEditable",NO);c.set("isEnabled",NO)}else{b.set("isEditable",YES);
b.set("isEnabled",YES);c.set("isEditable",YES);c.set("isEnabled",YES)}},updateCriterionFeedbackView:function(){this.updateSaveMask();
this.updateCriterionFeedbackFields()}.observes("recordStatus")})});sc_require("views/scoring_feedback_item");
RubricManagerCore.GradingFormCriterionScoringItemView=SC.View.extend({rubric:null,rubricScoring:null,rubricScoringController:null,criterion:null,rubricScoringFeedbackObjectsController:null,classNames:"score-card-criterion-item".w(),widthPadding:10,layout:{minHeight:190,maxHeight:280},childViews:"criterionMarksButtonView titleView scoringFeedbackView".w(),frameDidChange:function(){var i=this.get("frame"),h=this.get("widthPadding"),g=this.get("layout"),f=this.getPath("titleView.layout");
if(i){var a=this.get("criterionMarksButtonView");var e=a.get("isVisible")?a.get("frame").width:0;
var b=i.width-e-(2*h);this.titleView.adjust("width",b);var c=i.width-(2*h);this.scoringFeedbackView.adjust({width:c,left:h,minHeight:g.minHeight-f.height||0,maxHeight:g.maxHeight-f.height||0});
this.parentView.invokeOnce("updateHeight")}}.observes("frame","displayMarkCriteriaAssociations"),displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",criterionMarksButtonView:RubricManagerCore.CriterionMarksPaneButtonView.extend({layout:{top:2,left:6,height:27,width:33},criterionBinding:".parentView.criterion",criterionReadMarkSetsControllerBinding:"Cv.criterionReadMarkSetsController",emphasizedMarkControllerBinding:"Cv.emphasizedMarkController",isVisibleBinding:"Cv.readMarkCriteriaController.hasMarkCriteria"}),titleView:SC.View.design({nonDisplayMarkCriteriaAssociationsLeftOffset:10,displayMarkCriteriaAssociationsLeftOffset:40,layout:function(a,b){if(b===undefined){b={top:5,height:30};
if(this.get("displayMarkCriteriaAssociations")){b.left=this.displayMarkCriteriaAssociationsLeftOffset
}else{b.left=this.nonDisplayMarkCriteriaAssociationsLeftOffset}}return b}.property().cacheable(),displayMarkCriteriaAssociationsDidChange:function(){var a;
if(this.get("displayMarkCriteriaAssociations")){a=this.displayMarkCriteriaAssociationsLeftOffset
}else{a=this.nonDisplayMarkCriteriaAssociationsLeftOffset}this.adjust("left",a)}.observes("displayMarkCriteriaAssociations"),childViews:"tooltip title".w(),useStaticLayout:YES,displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",tooltip:SC.LabelView.design(SCUI.ToolTip,{layout:{top:2,right:0,height:16,width:16},tagName:"div",classNames:["grading-form-description"],escapeHTML:true,descriptionBinding:".parentView.parentView.criterion.description",toolTip:function(){var b=this.get("description");
if(b){var a=Ip.scrubHTML(b);a=Ip.newLinesToBreakTags(a);return a}}.property("description").cacheable(),isVisible:function(){if(this.get("toolTip")){return YES
}return NO}.property("toolTip").cacheable()}),title:SC.LabelView.design({toolTipBinding:".parentView.parentView.criterion.description",layout:function(){var a={top:0,left:0,right:0,height:20};
if(this.get("toolTip")){a.right=20}return a}.property("toolTip").cacheable(),tagName:"span",classNames:["criterion-title"],fontWeight:SC.BOLD_WEIGHT,valueBinding:".parentView.parentView.criterion.name",valueBindingDefault:SC.Binding.oneWay()})}),scoringFeedbackView:RubricManagerCore.ScoringFeedbackItemView.design({scoringFeedbackObjectsControllerBinding:".parentView.rubricScoringFeedbackObjectsController",criterionBinding:".parentView.criterion",criterionBindingDefault:SC.Binding.oneWay(),rubricScoringControllerBinding:".parentView.rubricScoringController",rubricScoringControllerBindingDefault:SC.Binding.oneWay(),rubricScoringBinding:".parentView.rubricScoring",rubricScoringBindingDefault:SC.Binding.oneWay(),isScoringRubricBinding:".parentView.rubric.isScoringRubric",scoringFeedbackRecord:function(){var a=this.get("scoringFeedbackObjectsController");
if(a){return a.scoringFeedbackForCriterion(this.get("criterion"))}}.property("scoringFeedbackObjects","objectsLength").cacheable(),saveTarget:null,saveAction:"saveFeedback",_scoringFeedbackObjectsControllerDidChange:function(){var a=this.get("scoringFeedbackObjectsController");
this._tearDownManualBindings();if(a&&!this.get("isDestroyed")){this.scoringFeedbackObjectsBinding=this.bind("scoringFeedbackObjects",".scoringFeedbackObjectsController.content");
this.objectsLengthBinding=this.bind("objectsLength",".scoringFeedbackObjectsController.length");
this.set("saveTarget",a)}}.observes("scoringFeedbackObjectsController"),_tearDownManualBindings:function(){if(this.scoringFeedbackObjectsBinding){this.scoringFeedbackObjectsBinding.disconnect();
this.scoringFeedbackObjectsBinding=null}if(this.objectsLengthBinding){this.objectsLengthBinding.disconnect();
this.objectsLengthBinding=null}this.set("saveTarget",null)},destroy:function(){this._tearDownManualBindings();
return arguments.callee.base.apply(this,arguments)}})});sc_require("views/grid/rows/grading_form_criterion_scoring_item");
RubricManagerCore.GradingFormCanvasView=SC.ScrollView.extend({itemLayout:null,contentView:SC.StackedView.extend({classNames:["marking-form"],mode:null,didCreateLayer:function(){arguments.callee.base.apply(this,arguments);
$(this.$(".grading-form-description")).tipTip({defaultPosition:"top",delay:0,fadeIn:0})
},isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){this.reload()
}}.observes("isVisibleInWindow"),rubricControllerBinding:".parentView.parentView.rubricController",rubricScoringControllerBinding:".parentView.parentView.rubricScoringController",itemLayoutBinding:".parentView.parentView.itemLayout",isScoringRubricBinding:".parentView.parentView.isScoringRubric",rubricScoringFeedbackObjectsControllerBinding:".parentView.parentView.rubricScoringFeedbackObjectsController",inStudentModeBinding:".parentView.parentView.inStudentMode",contentBinding:".parentView.parentView.criteria",exampleView:function(){var a=this.get("inStudentMode");
if(a){return RubricManagerCore.GradingFormStudentCriterionScoringItemView}else{return RubricManagerCore.GradingFormCriterionScoringItemView
}}.property("inStudentMode").cacheable(),createItemView:function(c,e,a){a.useStaticLayout=YES;
a.rubric=this.getPath("rubricController.content");a.rubricScoring=this.getPath("rubricScoringController.content");
a.rubricScoringController=this.get("rubricScoringController");a.criterion=a.content;
a.layout=this.get("itemLayout");a.rubricScoringFeedbackObjectsController=this.get("rubricScoringFeedbackObjectsController");
var b=arguments.callee.base.apply(this,arguments);delete a.useStaticLayout;delete a.rubric;
delete a.rubricScoring;delete a.rubricScoringController;delete a.criterion;delete a.layout;
delete a.rubricScoringFeedbackObjectsController;return b},frameDidChange:function(){var a=this.get("frame").width;
this.get("childViews").forEach(function(e){var c=e.get("frame");if(c){var b=c.width;
if(a!=b){e.adjust("width",a)}}})}.observes("frame")})});RubricManagerCore.GradingFormCriterion=SC.View.extend(SC.StaticLayout,{layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT},click:function(b){var a=$(b.target);
if(a.prop("tagName")==="A"){return}return this.get("rubricController").beginEditing()
},rubricController:null,criteriaController:null,useStaticLayout:YES,childViews:"nameView descriptionView deleteButtonView".w(),classNames:"criterion-row",nameView:Ip.SimpleEditableTextFieldView.extend({maxLength:30,layout:{top:10,width:300,left:20,height:20},isEditingBinding:".parentView.rubricController.isEditing",classNames:"criterion-title",valueBinding:".parentView.content.name",criterionBinding:".parentView.content"}),descriptionView:Ip.SimpleEditableTextFieldView.extend({padding:10,dynamicStyles:'vertical-align: middle; resize: none; overflow: auto; font: 99% "Lucida Sans","Lucida Grande", Verdana, Arial, sans-serif; letter-spacing: normal; word-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none; overflow: hidden;',minHeight:77,_escapeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
},_computeHeight:function(){this.invokeLast(function(){var e=this.get("value");var b=this.get("layer");
if(!b||!e){return}var f=0||this.get("padding");var a=0;var c=0||b.offsetWidth;if(this.get("isTextArea")){var h=e;
e=Ip.newLinesToBreakTags(this._escapeHTML(e));if(h.charAt(h.length-1)==="\n"){e=e+"&nbsp;"
}}var g="word-wrap: break-word; overflow: hidden; max-width: %@px; padding: %@px; %@".fmt(c-(f*2)-4,f,this.get("dynamicStyles"));
a=SC.heightForString(e,c,g,null,true);a=Math.max(a,this.get("minHeight"));this.adjust("height",a);
this.getPath(".parentView").adjust({height:RubricManagerCore.CRITERION_ROW_HEIGHT+(a-this.minHeight)});
this.getPath("parentView.parentView").updateHeight()})}.observes("value","frame"),layout:{top:35,right:78,bottom:13,left:20},isEditingBinding:".parentView.rubricController.isEditing",classNames:"criterion-desc",maxLength:1000,valueBinding:".parentView.content.description",criterionBinding:".parentView.content",isTextArea:YES,hint:"_Enter description here (optional)".loc(),allowStylingTags:YES}),deleteButtonView:SC.View.extend({classNames:"grading-form-bin-container".w(),layout:{top:7,bottom:7,width:68,right:0},isVisibleBinding:".parentView.rubricController.isEditing",childViews:"binView".w(),binView:SC.View.design({layout:{width:18,height:26,centerX:0,centerY:0},classNames:"grading-form-bin".w(),click:function(){var a=this.getPath("parentView.parentView.criteriaController"),b=this.getPath("parentView.parentView.rubricController.content"),c=this.getPath("parentView.parentView.content");
a.deleteCriterion(b,c);return YES}})})});sc_require("views/grid/criteria/grading_form_criterion");
RubricManagerCore.GradingFormManagerCanvasView=SC.ScrollView.extend({itemLayout:null,contentView:SC.StackedView.extend({classNames:["grading-form"],criteriaControllerBinding:"RubricManagerCore.criteriaController",rubricControllerBinding:"RubricManagerCore.editingRubricController",itemLayoutBinding:".parentView.parentView.itemLayout",contentBinding:"RubricManagerCore.criteriaController.arrangedObjects",addRowView:SC.View.extend(SC.StaticLayout,{layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT},useStaticLayout:YES,childViews:"nameView descriptionView deleteButtonView addMask".w(),classNames:"disabled-criterion-row".w(),isAttachedToCurrentAssignmentBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",assignmentBinding:"RubricManagerCore.assignmentController.content",isEditableBinding:"RubricManagerCore.editingRubricController.isEditable",_visiblityNeedsUpdating:function(){var a=this.get("assignment")?this.get("isAttachedToCurrentAssignment"):NO;
var b=!a&&this.get("isEditable");if(b){this.adjust({height:RubricManagerCore.CRITERION_ROW_HEIGHT,width:null})
}else{this.adjust({height:0,width:0})}if(this.getPath(".parentView")){this.getPath(".parentView").updateHeight()
}}.observes("isAttachedToCurrentAssignment","assignment","isEditable"),nameView:SC.LabelView.extend({layout:{top:11,width:300,left:20,height:18},classNames:"disabled-criterion-title"}),descriptionView:SC.LabelView.extend({layout:{top:35,right:78,bottom:13,left:20},classNames:"disabled-criterion-desc"}),deleteButtonView:SC.View.extend({classNames:"grading-form-bin-container".w(),layout:{top:7,bottom:7,width:68,right:0}}),addMask:SC.View.extend({layout:{top:0,bottom:0,left:0,right:0},classNames:"disabled-criterion-row-add-mask".w(),click:function(){RubricManagerCore.editingRubricController.addCriterionNoScroll();
return YES}})}),didCreateLayer:function(){var a=this.createChildView(this.get("addRowView"));
this.appendChild(a)},exampleView:RubricManagerCore.GradingFormCriterion.design(),createItemView:function(c,e,a){a.useStaticLayout=YES;
a.rubricController=this.getPath("rubricController");a.criteriaController=this.get("criteriaController");
var b=arguments.callee.base.apply(this,arguments);delete a.useStaticLayout;delete a.rubricController;
delete a.criteriaController;return b}})});RubricManagerCore.CanvasLabelView=SC.LabelView.extend(Ip.Hoverable,Ip.AnchorTagActions,{classNames:["rubric-canvas-label"],controlSize:SC.REGULAR_CONTROL_SIZE,isEditableBinding:"RubricManagerCore.editingRubricController.isEditable",click:function(b){var a=$(b.target);
if(a.prop("tagName")==="A"){return}this.invokeLast(this.beginEditing)},displayProperties:["classNames"],updateClassNames:function(){if(!this.get("isEditable")){return
}var a=this.get("classNames").concat();if(this.get("isHovering")&&a.indexOf("hover")===-1){a.pushObject("hover")
}else{a.removeObject("hover")}this.set("classNames",a)}.observes("isHovering"),criterion:null,expandRow:function(){RubricManagerCore.criteriaController.selectObject(this.get("criterion"))
},collapseRow:function(){if(RubricManagerCore.criteriaController.getPath("selection.firstObject")===this.get("criterion")){RubricManagerCore.criteriaController.selectObject(null)
}}});RubricManagerCore.CanvasTextLabelView=RubricManagerCore.CanvasLabelView.extend({maxLength:5096,exampleInlineTextFieldView:SC.InlineTextFieldView.design({hint:null,hintBinding:".delegate.hint",maxLength:null,maxLengthBinding:".delegate.maxLength",keyDown:function(a){var b=(this.getPath("selection.length")>0);
var f=(typeof a.which=="undefined")?a.keyCode:a.which;if(this.value&&this.value.length>=this.get("maxLength")&&!b){if(a.ctrlKey==false&&(typeof a.metaKey=="undefined"||a.metaKey==false)){var e=false;
switch(true){case (f>=48&&f<=57):e=true;break;case ((f>=65&&f<=90)||(f>=97&&f<=122)):e=true;
break;case (f==32):e=true;break;case (f==59||f==61||f==109):e=true;break;case ((f>=186&&f<=192)||(f>=219&&f<=222)):e=true;
break}if(e){a.stopPropagation();a.preventDefault();return}}}if((f===13)&&(this.$input().val()==="")&&this.get("validator").kindOf(SC.Validator.Number)){this.$input().val(0)
}var c=this.interpretKeyEvents(a);return !c?NO:c},keyUp:function(b){var a=this.get("maxLength");
if(b.target.value.length>a){b.target.value=this.value}else{this.value=b.target.value
}this.fieldValueDidChange(true)}})});RubricManagerCore.FieldCellView=SC.View.extend({classNames:["field-cell"],content:null,layout:{top:0,left:0,right:0,bottom:0},rubricScoringMethodBinding:".content.rubric.scoringMethod"});
RubricManagerCore.FloatingPointValidator=SC.Validator.Number.extend({objectForFieldValue:function(c,b,e){var a;
c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null
}else{if(c.match(/\./)){if(c.match(/[^\d\.]/)){c=parseFloat(c)}else{if(a=/^([^\.]*)\.(.+)$/.exec(c)){var g=a[1];
var f=a[2];f=f.replace(/\./g,"");c=g+"."+f}}}else{if(c.length==1&&c.match(/-/)){c=null
}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""
}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c}});sc_require("views/grid/field_cell");
sc_require("views/validators/floating_point_validator");RubricManagerCore.CustomScoringCellView=RubricManagerCore.FieldCellView.extend({classNames:["custom-scoring-cell"],childViews:"readOnlyView".w(),readOnlyView:SC.View.design({layout:{top:0,right:0,bottom:0,left:0},childViews:"valueView descriptionView".w(),isVisible:YES,valueView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:3,left:3,width:RubricManagerCore.SCALES_COLUMN_WIDTH-6,height:20},valueBinding:".parentView.parentView.content.value",criterionBinding:".parentView.parentView.content.criterion",formatter:SC.Validator.Number.extend({places:2}),validator:RubricManagerCore.FloatingPointValidator,hint:"_Enter value here".loc()}),descriptionView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:23,right:3,bottom:3,left:3},isInlineEditorMultiline:YES,maxLength:1000,valueBinding:".parentView.parentView.content.description",criterionBinding:".parentView.parentView.content.criterion",escapeHTML:NO,displayProperties:["value"],render:function(a){if(this.get("value")){a.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"])))
}}})})});sc_require("views/grid/field_cell");RubricManagerCore.NonScoringCellView=RubricManagerCore.FieldCellView.extend({classNames:["non-scoring-cell"],childViews:"descriptionView".w(),descriptionView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:0,right:0,bottom:0,left:0},valueBinding:".parentView.content.description",isInlineEditorMultiline:YES,maxLength:1000,criterionBinding:".parentView.content.criterion",escapeHTML:NO,displayProperties:["value"],render:function(a){if(this.get("value")){a.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"])))
}}})});RubricManagerCore.TypicalScoringCellView=RubricManagerCore.FieldCellView.extend({classNames:["typical-cell"],childViews:"descriptionView".w(),descriptionView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:3,right:3,bottom:3,left:3},valueBinding:".parentView.content.description",criterionBinding:".parentView.content.criterion",isInlineEditorMultiline:YES,maxLength:1000,escapeHTML:NO,displayProperties:["value"],render:function(a){if(this.get("value")){a.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"])))
}}})});RubricManagerCore.CriteriaView=SC.StackedView.extend({criteriaController:null,rubricController:null,contentBinding:".criteriaController.arrangedObjects",isGradingFormBinding:".rubricController.isGradingForm",scoringIsEditable:NO,mouseWheel:function(){return !this.get("isGradingForm")
},exampleView:function(){var a=this.get("isGradingForm");if(a){return this.get("gradingFormExampleView")
}else{return this.get("rubricExampleView")}}.property("isGradingForm").cacheable(),rubricExampleView:function(){return RubricManagerCore.RubricCriterion.extend({rubricController:this.get("rubricController"),criteriaController:this.get("criteriaController"),scoringIsEditableBinding:".parentView.scoringIsEditable"})
}.property().cacheable(),gradingFormExampleView:function(){return RubricManagerCore.GradingFormCriterion.extend({rubricController:this.get("rubricController"),criteriaController:this.get("criteriaController"),scoringIsEditable:this.get("scoringIsEditable")})
}.property().cacheable()});RubricManagerCore.RubricCriterion=SC.View.extend(SC.StaticLayout,{layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT},rubricController:null,criteriaController:null,useStaticLayout:YES,scoringIsEditable:NO,childViews:"viewView".w(),viewView:SC.View.design(Ip.Hoverable,{layout:{top:0,right:0,bottom:0,left:0},createChildViews:function(){var b=[],a="nameView valueView descriptionView deleteButtonView percentView".w();
a.forEach(function(e){var c=this.createChildView(this.get(e).design({rubricController:this.parentView.get("rubricController"),criteriaController:this.parentView.get("criteriaController")}));
b.push(c)},this);this.set("childViews",b)},scoringIsEditable:NO,scoringIsEditableBinding:".parentView.scoringIsEditable",hasMarkCriteria:NO,hasMarkCriteriaBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",_scoringIsEditableDidChange:function(){var e=this.getPath("criterionMarksPaneButtonViewPage.view");
var b=this.get("hasMarkCriteria");var c=this.get("scoringIsEditable");var a=(b&&(c||Cv.get("inStudentMode")));
if(a&&(e.get("parentView")!==this)){this.appendChild(e)}else{if(!a&&(e.get("parentView")==this)){this.removeChild(e)
}}}.observes("scoringIsEditable","hasMarkCriteria"),criterionMarksPaneButtonViewPage:function(){return SC.Page.create({view:RubricManagerCore.CriterionMarksPaneButtonView.extend({layout:{top:11,left:3,height:27,width:33},criterionBinding:".parentView.parentView.content",criterionReadMarkSetsControllerBinding:"Cv.criterionReadMarkSetsController"})})
}.property().cacheable(),classNames:"criterion-header",nameView:RubricManagerCore.CanvasTextLabelView.extend({maxLength:13,layout:function(){var a={top:10,height:20};
if(this.get("displayMarkCriteriaAssociations")){a.left=36;a.width=RubricManagerCore.CRITERION_COLUMN_WIDTH-71
}else{a.left=10;a.width=RubricManagerCore.CRITERION_COLUMN_WIDTH-45}return a}.property("displayMarkCriteriaAssociations").cacheable(),classNames:"criterion-title",fontWeight:SC.BOLD_WEIGHT,valueBinding:".parentView.parentView.content.name",criterionBinding:".parentView.parentView.content",displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria"}),valueView:RubricManagerCore.CanvasLabelView.extend({layout:{top:10,right:20,width:30,height:20},classNames:"criterion-value",textAlign:SC.ALIGN_RIGHT,valueBinding:".parentView.parentView.content.value",criterionBinding:".parentView.parentView.content",validator:SC.Validator.Number.extend({objectForFieldValue:function(b,a,c){b=arguments.callee.base.apply(this,arguments);
return Math.abs(b)}}),hint:"--",isEditable:YES,rubricScoringMethodBinding:".rubricController.scoringMethod",isVisible:function(){return this.get("rubricScoringMethod")===Rb.TYPICAL_RUBRIC
}.property("rubricScoringMethod").cacheable()}).loc(Ip.getLocalizationHash("RubricManagerCore.criteriaValueView")),percentView:SC.LabelView.extend({layout:{top:10,right:5,width:15,height:20},classNames:"criterion-value",value:"%",rubricScoringMethodBinding:".rubricController.scoringMethod",isVisible:function(){return this.get("rubricScoringMethod")===Rb.TYPICAL_RUBRIC
}.property("rubricScoringMethod").cacheable()}).loc(Ip.getLocalizationHash("RubricManagerCore.criteriaPercentView")),descriptionView:RubricManagerCore.CanvasTextLabelView.extend({layout:{top:35,right:10,bottom:3,left:10},classNames:"criterion-desc",maxLength:1000,valueBinding:".parentView.parentView.content.description",criterionBinding:".parentView.parentView.content",isInlineEditorMultiline:YES,escapeHTML:NO,render:function(a){if(this.get("value")){a.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"])))
}}}),deleteButtonView:SC.ButtonView.extend({layout:{left:0,bottom:0,height:15,width:15},classNames:"criterion-delete",titleMinWidth:0,classNames:"delete-button",action:function(){this.get("criteriaController").deleteCriterion(this.get("rubricController").get("content"),this.getPath("parentView.parentView.content"))
},isHoveringBinding:".parentView.isHovering",rubricIsEditableBinding:".rubricController.isEditable",isVisible:function(){return(this.get("isHovering")&&this.get("rubricIsEditable"))
}.property("isHovering","rubricIsEditable").cacheable()})}),enterRowEditing:function(){var a=this.get("criteriaController");
a.selectObject(this.get("content"))},exitRowEditing:function(){var a=this.get("criteriaController");
if(a.getPath("selection.firstObject")===this.get("content")){a.selectObject(null)
}}});sc_require("views/scoring_feedback_item");RubricManagerCore.GradingFormStudentCriterionScoringItemView=SC.View.extend({isScoringRubric:null,criterion:null,classNames:"score-card-student-criterion-item".w(),widthPadding:10,layout:{minHeight:190,maxHeight:280},childViews:"criterionMarksButtonView titleView scoringFeedbackView".w(),frameDidChange:function(){var i=this.get("frame"),h=this.get("widthPadding"),g=this.get("layout"),f=this.getPath("titleView.layout");
if(i){var a=this.get("criterionMarksButtonView");var e=a.get("isVisible")?a.get("frame").width:0;
var b=i.width-e-(2*h);this.titleView.adjust("width",b);var c=i.width-(2*h);this.scoringFeedbackView.adjust({width:c,left:h,minHeight:g.minHeight-f.height||0,maxHeight:g.maxHeight-f.height||0});
this.parentView.invokeOnce("updateHeight")}}.observes("frame"),criterionMarksButtonView:RubricManagerCore.CriterionMarksPaneButtonView.extend({layout:{top:2,left:6,height:27,width:33},criterionBinding:".parentView.criterion",criterionReadMarkSetsControllerBinding:"Cv.criterionReadMarkSetsController",emphasizedMarkControllerBinding:"Cv.emphasizedMarkController",isVisibleBinding:"Cv.readMarkCriteriaController.hasMarkCriteria"}),titleView:SC.View.design({layout:function(a,b){if(b===undefined){b={top:5,left:40,height:30};
if(!this.get("displayMarkCriteriaAssociations")){b.left=10}}return b}.property("displayMarkCriteriaAssociations").cacheable(),childViews:"tooltip title".w(),useStaticLayout:YES,displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",tooltip:SC.LabelView.design(SCUI.ToolTip,{layout:{top:2,right:0,height:16,width:16},tagName:"div",classNames:["grading-form-description"],descriptionBinding:".parentView.parentView.criterion.description",toolTip:function(){var b=this.get("description");
if(b){var a=Ip.scrubHTML(b);a=Ip.newLinesToBreakTags(a);return a}}.property("description").cacheable(),isVisible:function(){if(this.get("toolTip")){return YES
}return NO}.property("toolTip").cacheable()}),title:SC.LabelView.design({layout:function(){var a={top:0,left:0,right:0,height:20};
if(this.get("toolTip")){a.right=20}return a}.property("toolTip").cacheable(),tagName:"span",classNames:["criterion-title"],fontWeight:SC.BOLD_WEIGHT,toolTipBinding:".parentView.parentView.criterion.description",valueBinding:".parentView.parentView.criterion.name",valueBindingDefault:SC.Binding.oneWay()})}),scoringFeedbackView:SC.View.design({childViews:"criterionCommentView criterionScoreView".w(),classNames:["criterion-feedback-item"],useStaticLayout:YES,isScoringRubricBinding:".parentView.parentView.isScoringRubric",criterionBinding:".parentView.criterion",commentLayoutBinding:".criterionCommentView.layout",scoringFeedbackObjectsBinding:".parentView.rubricScoringFeedbackObjectsController.content",scoringFeedbackObjectsBindingDefault:SC.Binding.oneWay(),rubricScoringControllerBinding:".parentView.parentView.rubricScoringController",rubricScoringControllerBindingDefault:SC.Binding.oneWay(),scoringFeedbackObjectsControllerBinding:".parentView.rubricScoringFeedbackObjectsController",scoringFeedbackObjectsControllerBindingDefault:SC.Binding.oneWay(),_scoringFeedbackRecord:function(){var a=this.get("scoringFeedbackObjectsController");
if(a){var b=a.scoringFeedbackForCriterion(this.get("criterion"));var c=b.get("score");
var e=b.get("comment");this.setPath("criterionScoreView.value",c);this.setPath("criterionCommentView.commentTextView.value",e)
}}.observes("scoringFeedbackObjects","scoringFeedbackObjectsController"),commentHeightObserver:function(){var a=this.get("commentLayout");
this.adjust({height:a.height+2})}.observes("commentLayout"),layout:{left:10,right:10,minHeight:60,maxHeight:250},criterionCommentView:SC.View.design({isScoringRubricBinding:".parentView.isScoringRubric",commentLayoutBinding:".commentTextView.layout",classNames:["comment-view"],layout:{minHeight:58,maxHeight:248,left:0,height:58},_adjustWidth:function(){if(this.get("isScoringRubric")){this.adjust("right",60)
}}.observes("isScoringRubric"),_adjustHeight:function(){var a=this.get("commentLayout");
var b=this.getPath("commentTextView.padding")*2;this.adjust({height:a.height+b})}.observes("commentLayout"),childViews:["commentTextView"],commentTextView:SC.LabelView.extend(Ip.AnchorTagActions,{isScoringRubricBinding:".parentView.parentView.isScoringRubric",escapeHTML:NO,padding:5,width:function(){if(this.get("isScoringRubric")){return 214
}else{return 274}}.property("isScoringRubric").cacheable(),_calculateHeight:function(f){var a=0;
if(f){var c=this.get("padding");var b=this.get("width");var e="word-wrap: break-word; overflow: hidden; max-width: %@px; padding: %@px;".fmt(b,c*2);
a=SC.heightForString(f,b,e,null,false)}if(a<48){return 48}else{if(a>238){return 238
}else{return a}}},displayProperties:["value"],render:function(b){if(this.get("value")){var a=Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"]));
this.adjust("height",this._calculateHeight(a));b.push(a)}}})}),criterionScoreView:SC.LabelView.design(SC.AutoResize,Ip.LabelViewAutoResizeSupport,{maxWidth:50,shouldAutoFitText:YES,shouldAutoResize:NO,minFontSize:5,maxFontSize:100,textAlign:SC.ALIGN_CENTER,classNames:["score-view"],layout:{right:0,width:59,height:58},isVisibleBinding:".parentView.isScoringRubric"})})});
RubricManagerCore.RubricFieldCollectionRowView=SC.CollectionView.extend({contentBinding:".parentView.content.criterionScales",contentValueKey:"description",rubricScoringMethodBinding:".parentView.parentView.rubricController.scoringMethod",modeBinding:".parentView.parentView.mode",classNames:["rubric-field-row"],useToggleSelection:YES,selectOnMouseDown:NO,mouseUp:function(a){if(String(a.originalTarget).indexOf("XUL")!==-1){return YES
}return arguments.callee.base.apply(this,arguments)},exampleViewDidChange:function(){this.reload()
}.observes("exampleView"),exampleView:function(){var a=SC.View;switch(this.get("rubricScoringMethod")){case Rb.TYPICAL_RUBRIC:a=RubricManagerCore.TypicalScoringCellView;
break;case Rb.NON_SCORING_RUBRIC:a=RubricManagerCore.NonScoringCellView;break;case Rb.CUSTOM_RUBRIC:a=RubricManagerCore.CustomScoringCellView;
break;default:break}switch(this.get("mode")){case RubricManagerCore.RubricCanvasMode.SCORING_MODE:a=a.extend(RubricManagerCore.FieldCellViewSelectionSupport);
break;default:break}return a}.property("rubricScoringMethod").cacheable(),layoutForContentIndex:function(a){return{top:0,left:RubricManagerCore.SCALES_COLUMN_WIDTH*(a),width:RubricManagerCore.SCALES_COLUMN_WIDTH,bottom:0}
}});RubricManagerCore.ScalesView=SC.CollectionView.extend({scalesController:null,rubricController:null,contentBinding:".scalesController.arrangedObjects",rubricScoringMethodBinding:".rubricController.scoringMethod",mouseWheel:function(){return YES
},exampleViewDidChange:function(){this.reload()}.observes("exampleView"),exampleView:function(){var a=SC.View;
switch(this.get("rubricScoringMethod")){case Rb.TYPICAL_RUBRIC:a=RubricManagerCore.TypicalScoringScaleView.design({rubricController:this.get("rubricController"),scalesController:this.get("scalesController"),layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT}});
break;case Rb.NON_SCORING_RUBRIC:a=RubricManagerCore.NonScoringScaleView.design({rubricController:this.get("rubricController"),scalesController:this.get("scalesController"),layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT}});
break;case Rb.CUSTOM_RUBRIC:a=RubricManagerCore.CustomScoringScaleView.design({rubricController:this.get("rubricController"),scalesController:this.get("scalesController"),layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT}});
break;default:break}return a}.property("rubricScoringMethod").cacheable(),layoutForContentIndex:function(a){return{left:RubricManagerCore.SCALES_COLUMN_WIDTH*a,width:RubricManagerCore.SCALES_COLUMN_WIDTH,height:RubricManagerCore.SCALES_ROW_HEIGHT-20,centerY:0}
}});sc_require("mixins/field_cell_view_selection_support");RubricManagerCore.RubricFieldView=SC.StackedView.extend({mode:null,scalesController:null,criteriaController:null,rubricController:null,contentBinding:".criteriaController.arrangedObjects",exampleView:SC.View.extend(SC.StaticLayout,{useStaticLayout:YES,classNames:["field-row-container"],layout:{height:RubricManagerCore.CRITERION_ROW_HEIGHT},createChildViews:function(){var b=this.get("childViews"),c=this.getPath("parentView.mode"),a;
if(c===RubricManagerCore.RubricCanvasMode.SCORING_MODE){a=this.get("scoringRowView")
}else{a=RubricManagerCore.RubricFieldCollectionRowView}b.push(this.createChildView(a));
this.set("childViews",b)},scoringRowView:function(){return RubricManagerCore.RubricFieldCollectionRowView.extend({init:function(){var b=this.getPath("parentView.content");
var a=this.getPath("parentView.parentView.criteriaController");var c=a.scoringControllerForCriterion(b);
this.set("selectionController",c);return arguments.callee.base.apply(this,arguments)
},isSelectableBinding:".selectionController.isSelectable",selectionController:null,selectionBinding:".selectionController.selection"})
}.property().cacheable()})});sc_require("views/grid/scales");sc_require("views/grid/criteria");
sc_require("views/grid/rubric_field");RubricManagerCore.RubricCanvasMode={VIEWING_MODE:0,SCORING_MODE:1,EDITING_MODE:2};
RubricManagerCore.RubricCanvasView=SC.View.extend({criteriaController:null,scalesController:null,rubricController:null,rubricScoringController:null,scoringIsEditable:null,mode:null,rubricIsEditableBinding:SC.Binding.oneWay(".rubricController.isEditable"),isGradingFormBinding:SC.Binding.oneWay(".rubricController.isGradingForm"),isGradingFormDidChange:function(){var a=this.get("isGradingForm"),b=this.get("classNames").copy();
if(a){b.pushObject("marking-form")}else{b=b.without("marking-form")}this.set("classNames",b.uniq())
}.observes("isGradingForm"),rubricScoringControllerWasSet:function(){if(this.get("rubricScoringController")){this.scoringIsEditableBinding=this.bind("scoringIsEditable",SC.Binding.oneWay(".rubricScoringController.isEditable"))
}}.observes("rubricScoringController"),rubricControllerWasSet:function(){if(this.get("rubricController")){this.rubricIsEditableBinding=this.bind("rubricIsEditable",SC.Binding.oneWay(".rubricController.isEditable"))
}}.observes("rubricController"),displayProperties:["classNames"],updateClassNames:function(){var a=this.get("classNames").concat();
a.removeObjects("editable scorable read-only scoring-mode".w());if(this.get("rubricIsEditable")){a.push("editable")
}else{if(this.get("scoringIsEditable")){a.push("scorable")}else{a.push("read-only")
}}if(this.get("mode")===RubricManagerCore.RubricCanvasMode.SCORING_MODE){a.push("scoring-mode")
}this.set("classNames",a)}.observes("rubricIsEditable","scoringIsEditable","mode"),init:function(){if(this.get("mode")===RubricManagerCore.RubricCanvasMode.SCORING_MODE&&!this.get("rubricScoringController")){throw"RubricCanvasView in SCORING_MODE but no Rubric Scoring Controller was passed!"
}arguments.callee.base.apply(this,arguments);this.rubricScoringControllerWasSet();
this.rubricControllerWasSet()},createChildViews:function(){var b=[],a,c;c=this.createChildView(this.get("rubricFieldScrollView").design({mode:this.get("mode"),criteriaController:this.get("criteriaController"),scalesController:this.get("scalesController"),rubricController:this.get("rubricController")}));
b.push(c);a=this.createChildView(this.get("criteriaScrollView").design({criteriaController:this.get("criteriaController"),scalesController:this.get("scalesController"),rubricController:this.get("rubricController"),rubricFieldScrollView:c}));
b.push(a);a=this.createChildView(this.get("scalesScrollView").design({criteriaController:this.get("criteriaController"),scalesController:this.get("scalesController"),rubricController:this.get("rubricController"),rubricFieldScrollView:c}));
b.push(a);a=this.createChildView(this.get("noRubricsView").design({criteriaController:this.get("criteriaController"),scalesController:this.get("scalesController"),rubricController:this.get("rubricController")}));
b.push(a);this.set("childViews",b)},noRubricsView:SC.LabelView.extend({layout:{centerY:0,centerX:0,width:300,height:200},isVisible:NO}),criteriaScrollView:SC.ScrollView.extend({layout:function(){return this.get("isGradingForm")?{bottom:0,left:0,width:undefined,right:0}:{top:RubricManagerCore.SCALES_ROW_HEIGHT,width:RubricManagerCore.CRITERION_COLUMN_WIDTH,bottom:0,left:0}
}.property("isGradingForm","mode").cacheable(),classNames:["criterion-scroll-view"],borderStyle:SC.BORDER_NONE,hasHorizontalScroller:NO,verticalOverlay:YES,isGradingFormBinding:SC.Binding.oneWay(".rubricController.isGradingForm"),verticalScrollOffsetBinding:SC.Binding.oneWay(".rubricFieldScrollView.verticalScrollOffset"),modeBinding:SC.Binding.oneWay(".parentView.mode"),rubricFieldScrollView:null,scalesController:null,criteriaController:null,rubricController:null,contentView:function(){var a=RubricManagerCore.CriteriaView.design({criteriaController:this.parentView.get("criteriaController"),rubricController:this.parentView.get("rubricController"),scoringIsEditableBinding:".parentView.parentView.parentView.scoringIsEditable",contentHeightBinding:".criteriaController.viewHeight",layout:function(){return{top:0,right:0,height:this.get("contentHeight"),left:0}
}.property("contentHeight").cacheable()});return a}.property().cacheable()}),scalesScrollView:SC.ScrollView.extend({layout:{top:1,left:RubricManagerCore.CRITERION_COLUMN_WIDTH,height:RubricManagerCore.SCALES_ROW_HEIGHT,right:0},classNames:["scales-scroll-view"],borderStyle:SC.BORDER_NONE,hasVerticalScroller:NO,horizontalOverlay:YES,horizontalScrollOffsetBinding:SC.Binding.oneWay(".rubricFieldScrollView.horizontalScrollOffset"),isVisibleBinding:SC.Binding.bool(".rubricController.isGradingForm").oneWay().not(),modeBinding:SC.Binding.oneWay(".parentView.mode"),rubricFieldScrollView:null,scalesController:null,criteriaController:null,rubricController:null,contentView:function(){var a=RubricManagerCore.ScalesView.design({scalesController:this.parentView.get("scalesController"),rubricController:this.parentView.get("rubricController"),contentWidthBinding:".scalesController.viewWidth",layout:function(){return{top:0,width:this.get("contentWidth"),bottom:0,left:10}
}.property("contentWidth").cacheable()});return a}.property().cacheable()}),rubricFieldScrollView:SC.ScrollView.extend({layout:function(){return{top:this.get("isGradingForm")?0:RubricManagerCore.SCALES_ROW_HEIGHT,left:RubricManagerCore.CRITERION_COLUMN_WIDTH,bottom:0,right:0}
}.property("isGradingForm").cacheable(),classNames:"cell-container",borderStyle:SC.BORDER_NONE,init:function(){arguments.callee.base.apply(this,arguments);
RubricManagerCore.rubricFieldScrollView=this},scrollToBottom:function(){this.scrollTo(0,10000)
},scrollToFarRight:function(){this.scrollTo(10000,0)},verticalOverlay:YES,horizontalOverlay:YES,isVisible:function(){var a=this.get("isGradingForm");
return !a}.property("isGradingForm").cacheable(),isGradingFormBinding:SC.Binding.oneWay(".rubricController.isGradingForm").bool(),scalesController:null,criteriaController:null,rubricController:null,mode:null,contentView:function(){var a=RubricManagerCore.RubricFieldView.design({mode:this.getPath("parentView.mode"),scalesController:this.getPath("parentView.scalesController"),criteriaController:this.getPath("parentView.criteriaController"),rubricController:this.getPath("parentView.rubricController"),contentHeightBinding:".criteriaController.viewHeight",contentWidthBinding:".scalesController.viewWidth",layout:function(){return{left:10,width:this.get("contentWidth"),height:this.get("contentHeight")}
}.property("contentWidth","contentHeight").cacheable()});return a}.property().cacheable()})});
RubricManagerCore.ScaleView=SC.View.extend(Ip.Hoverable,{rubricController:null,scalesController:null,childViews:"nameView deleteScaleButton".w(),classNames:["scale-view"],scaleNameMaxLength:25,deleteScaleButton:SC.ButtonView.design({layout:{top:0,centerX:0,height:15,width:15},titleMinWidth:0,classNames:"delete-button",isHoveringBinding:".parentView.isHovering",rubricIsEditableBinding:".parentView.rubricController.isEditable",isVisible:function(){return(this.get("isHovering")&&this.get("rubricIsEditable"))
}.property("isHovering","rubricIsEditable").cacheable(),action:function(){this.parentView.get("scalesController").deleteScale(this.parentView.get("rubricController").get("content"),this.getPath("parentView.content"))
}}),nameView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:10,left:10,right:60,bottom:10},classNames:["name-view"],maxLengthBinding:".parentView.scaleNameMaxLength",valueBinding:".parentView.content.name",controlSize:SC.LARGE_CONTROL_SIZE,textAlign:SC.ALIGN_LEFT,escapeHTML:NO,displayProperties:["value"],render:function(c,a){c.push(Ip.scrubHTML(this.get("value")));
var b=this.get("value");var e=0;if(!SC.none(b)){b=this.get("value").trim();e=b.length
}var m=18;var p=24;var h=128;var g=10;if(e>g){var k='"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif';
var f="font-size: "+m+"px; font-family: "+k+";";var n=Ip.metricsForString(b,f);if(n.width>h){var l=b.split(/ /);
var s="";for(var j=0;j<l.length;j++){var o=l[j];if(o.length>s.length){s=o}}if(l.length>1){p=15;
if(s.length>g){n=Ip.metricsForString(s,f);if(n.width>h){m-=Math.ceil((s.length-g)/1.5)
}}}else{m-=Math.floor((s.length-g)/2.5);f="font-size: "+m+"px; font-family: "+k+";";
n=Ip.metricsForString(b,f);if(n.width>h){p=15}}}}var q={"font-size":m+"px","line-height":p+"px",overflow:"hidden","word-wrap":"break-word"};
c.addStyle(q)}})});RubricManagerCore.CustomScoringScaleView=RubricManagerCore.ScaleView.extend({});
RubricManagerCore.NonScoringScaleView=RubricManagerCore.ScaleView.extend({});sc_require("views/validators/floating_point_validator");
RubricManagerCore.TypicalScoringScaleView=RubricManagerCore.ScaleView.extend({childViews:"nameView valueView deleteScaleButton".w(),valueView:RubricManagerCore.CanvasTextLabelView.design({layout:{top:10,right:5,bottom:10,width:60},classNames:["scale-value"],valueBinding:".parentView.content.value",controlSize:SC.LARGE_CONTROL_SIZE,textAlign:SC.ALIGN_RIGHT,formatter:SC.Validator.Number.extend({places:2}),validator:RubricManagerCore.FloatingPointValidator,hint:"0"})});
RubricManagerCore.canvasesPage=SC.Page.create({gradingFormCanvas:RubricManagerCore.GradingFormManagerCanvasView.design({classNames:"grading-form-canvas"}),rubricCanvas:RubricManagerCore.RubricCanvasView.design({classNames:"rubric-canvas",mode:RubricManagerCore.RubricCanvasMode.EDITING_MODE,init:function(){this.set("rubricController",RubricManagerCore.editingRubricController);
this.set("scalesController",RubricManagerCore.scalesController);this.set("criteriaController",RubricManagerCore.criteriaController);
arguments.callee.base.apply(this,arguments)},noRubricsView:SC.LabelView.design({layout:{centerY:0,centerX:0,width:300,height:200},rubricListBinding:"RubricManagerCore.rubricListController.arrangedObjects",rubricListIsReadyBinding:SC.Binding.bool("RubricManagerCore.rubricListController.isBusy").not(),editingRubricBinding:"RubricManagerCore.editingRubricController.content",textAlign:SC.ALIGN_CENTER,isVisible:function(){return SC.none(this.get("editingRubric"))
}.property("rubricList","editingRubric").cacheable(),classNames:["black-text"],value:function(){if(!this.get("rubricListIsReady")){return
}if(this.getPath("editingRubric.length")===0){return"_You have no rubrics. Create one by clicking above.".loc()
}else{if(!this.get("editingRubric")){return"_No rubric is selected. Please select one from the drop-down above.".loc()
}}}.property("rubricList","editingRubric","rubricListIsReady").cacheable()})}),commonCoreApprovalView:SC.ToolbarView.design({classNames:["subheading"],childViews:"labelView".w(),labelView:SC.LabelView.design({layout:{centerY:0,right:20,height:20,left:10},value:"_The English Professional Learning Council developed this rubric.".loc()})}),gradingFormIpadWarningView:SC.ToolbarView.design({classNames:["subheading","warn"],childViews:"iconView labelView".w(),iconView:SC.ImageView.design({layout:{width:19,height:16,centerY:-1,left:25},value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/warning-icon.png"}),labelView:SC.LabelView.design({layout:{centerY:0,right:20,height:20,left:55},value:"_Please note: Grading forms are not yet available on the iPad app.".loc()})})});
RubricManagerCore.DropzoneView=SC.View.extend({childViews:"dropzoneView".w(),dropzoneView:SC.ScrollView.extend({layout:{top:20,right:20,bottom:20,left:20},classNames:["rubric-dropzone"],canScrollVertical:true,hasHorizontalScroller:false,isVisibleBinding:SC.Binding.transform(function(a,b){return !a
}).from(".parentView.doFallback"),contentView:Dropzone.DropzoneView.extend({errorPropertyTranslationMappings:{rubrics:"_Rubrics".loc(),criteria:"_Criteria".loc(),scale_values:"_Scale Values".loc(),criterion_scales:"_Criterion Scales".loc(),upload:"_Upload".loc()},useStaticLayout:YES,classNames:["my-drop-view","dropzone"],addedfile:function(a){$(a.previewElement).find(".file-status").text("_Pending...".loc());
this.get("_dropzone").options.url=RubricManagerCore.importController.get("uploadTarget");
this.updateLayer()},error:function(b,g,k){console.log(g);try{var g=JSON.parse(g)}catch(h){}var f="";
if(typeof g==="string"){f=g}else{for(var j in g.input_errors){var c=this.get("errorPropertyTranslationMappings")[j]?this.get("errorPropertyTranslationMappings")[j]:j;
var a=g.input_errors[j];f+=(c+": "+a+" ")}}var i=$(b.previewElement).find(".file-status");
i.addClass("error-message");i.text("_Import failed".loc());i.prop("title",f);i.tipTip({defaultPosition:"top",delay:0,fadeIn:0});
$(b.previewElement).find(".dz-remove").text("_Clear".loc())},removedfile:function(a){this.updateLayer()
},processing:function(a){$(a.previewElement).find(".file-status").text("_Uploading...".loc())
},success:function(file,response){$(file.previewElement).find(".dz-status").text("_Processing...".loc());
var object=eval("("+response+")");var createdObject=SC.isArray(object.Rubric)?object.Rubric[0]:null;
if(SC.none(createdObject)){$(file.previewElement).find(".dz-status").text("_Error".loc());
$(file.previewElement).find(".dz-remove").text("_Clear".loc())}else{try{delete createdObject.criterion_scales_all;
delete createdObject.criterion;delete createdObject.scale_values;var storeKey=RubricManagerCore.store.loadRecord(Rb.Rubric,createdObject);
$(file.previewElement).find(".file-status").text("_Import complete".loc());$(file.previewElement).find(".dz-success-mark").css("visibility","visible");
var previewArea=this.get("previewsContainerView").get("layer");$(file.previewElement).find(".dz-remove").remove();
$(file.previewElement).append('<a class="view-rubric">'+"_View".loc()+"</a>");$(file.previewElement).find(".view-rubric").click(function(){var rubricObject=RubricManagerCore.store.materializeRecord(storeKey);
RubricManagerCore.rubricListController.selectRubric(rubricObject);RubricManagerCore.importController.set("importInProgress",NO);
$(previewArea).empty()})}catch(e){var statusEl=$(file.previewElement).find(".file-status");
statusEl.addClass("error-message");statusEl.text("_The import could not be completed.".loc());
statusEl.prop("title","_The import could not be completed.".loc());statusEl.tipTip({defaultPosition:"top",delay:0,fadeIn:0});
$(file.previewElement).find(".dz-error-mark").css("visibility","visible");$(file.previewElement).find(".dz-remove").text("_Clear".loc())
}}},options:{paramName:"upload",url:"undefined/url",parallelUploads:5,addRemoveLinks:true,uploadMultiple:false,maxFilesize:5,dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:"_File too large".loc(),dictRemoveFile:"_Clear".loc(),dictMaxFilesExceeded:null,dictCancelUpload:"_Cancel".loc(),dictCancelUploadConfirmation:"_Are you sure you want to cancel this import?".loc(),previewTemplate:'<div class="dz-preview dz-file-preview"><div class="dz-details"><div class="dz-filename"><span data-dz-name></span></div></div><div class="dz-success-mark"><span>✔</span></div><div class="dz-error-mark"><span>✘</span></div><div class="file-status"></div></div>'},didAppendToDocument:function(){var b=this.get("options"),a=this.get("uploadBtnView").get("layer"),c=this.get("previewsContainerView").get("layer");
b.clickable=a;b.previewsContainer=c;this.set("options",b);this.set("dropView",this.getPath("parentView.parentView"));
return arguments.callee.base.apply(this,arguments)},didFallback:function(a,c){if(this.get("toggledFallback")){return YES
}if(this.get("options")){var b=this.get("options").forceFallback;if(typeof b==="undefined"){b=false
}return !Dropzone.isBrowserSupported()||b}return !Dropzone.isBrowserSupported()}.property("options","toggledFallback"),toggledFallback:false,fallback:function(){var a=this.get("toggleFallbackView");
a.set("isVisible",NO);$(".rubric-dropzone").removeClass("rubric-dropzone")},childViews:["uploadBtnView","toggleFallbackView","defaultDropMessageView","previewsContainerView","fallbackView"],uploadBtnView:SC.ButtonView.design({layout:{height:38,width:250,top:10,centerX:0},classNames:["dropzone-browse-btn","panel-button","primary"],title:"_Select files".loc(),optionsBinding:".parentView.options",textAlign:SC.ALIGN_CENTER,isVisibleBinding:SC.Binding.not(".parentView.didFallback")}),toggleFallbackView:SC.ImageView.extend({classNames:["toggle-fallback-icon"],layout:{width:20,height:20,top:10,right:10,zIndex:500},toggledFallbackBinding:".parentView.toggledFallback",click:function(){this.set("toggledFallback",!this.get("toggledFallback"));
if(this.get("toggledFallback")==true){$(this.getPath(".parentView").get("layer")).find(".dz-message").hide();
var a=this.getPath("parentView.parentView.parentView");$(a.get("layer")).removeClass("rubric-dropzone")
}else{$(this.getPath(".parentView").get("layer")).find(".dz-message").show();var a=this.getPath("parentView.parentView.parentView");
$(a.get("layer")).addClass("rubric-dropzone")}}}),previewsContainerView:SC.View.design({classNames:["drop-previews"],useStaticLayout:YES,isVisibleBinding:SC.Binding.not(".parentView.didFallback")}),defaultDropMessageView:SC.LabelView.design({classNames:["drop-default-message"],layout:{centerY:0,height:20,left:10,right:10},value:"_Select or drag files here to import...".loc(),textAlign:SC.ALIGN_CENTER,isVisibleBinding:SC.Binding.not(".parentView.didFallback")}),fallbackView:SC.View.extend({isVisibleBinding:SC.Binding.bool(".parentView.didFallback"),layout:{top:20,right:20,bottom:20,left:20},childViews:"instructionsView statusView fileSelectView CancelButtonView ImportButtonView".w(),instructionsView:SC.LabelView.design({layout:{top:0,right:0,height:20,left:10},value:"_Select a file to import...".loc()}),statusView:SC.LabelView.design({layout:{top:25,right:0,height:20,left:10},valueBinding:SC.Binding.oneWay("RubricManagerCore.importController.message")}),fileSelectView:Ip.UploadView.design({layout:{top:50,right:0,height:25,left:10},uploadTargetBinding:SC.Binding.oneWay("RubricManagerCore.importController.uploadTarget"),valueBinding:"RubricManagerCore.importController.filePath",uploadRequestedBinding:"RubricManagerCore.importController.uploadRequested",delegateBinding:"RubricManagerCore.importController",inputName:"upload",valueChanged:function(){if(this.get("value")===null){this.clearFileUpload()
}}.observes("value"),beginUpload:function(){if(this.get("uploadRequested")){this.startUpload()
}}.observes("uploadRequested")}),CancelButtonView:SC.ButtonView.design({layout:{top:85,width:100,height:32,left:10},classNames:["panel-button","primary"],title:"_Cancel".loc(),isEnabledBinding:"RubricManagerCore.importController.uploadRequested",action:"cancelImport",target:"RubricManagerCore.importController"}),ImportButtonView:SC.ButtonView.design({layout:{top:85,width:100,height:32,left:120},classNames:["panel-button","primary"],title:"_Import".loc(),isEnabledBinding:"RubricManagerCore.importController.fileIsSelected",action:"startUpload",target:"RubricManagerCore.importController"})})})})});
sc_require("views/grid/rubric_canvas");RubricManagerCore.ManagerView=SC.View.extend(SC.Border,{layout:{top:0,left:0,bottom:0,right:0},childViews:"headerView noticeView toolbarView canvasContainer footer importView loadingView".w(),classNames:["rubric-manager"],displayProperties:["classNames"],rubricTypeDidChange:function(){var b=this.get("isGradingForm"),a=this.get("rubric"),c=this.get("classNames").concat();
c=c.without("showing-rubric");c=c.without("showing-grading-form");if(a){if(b){c.push("showing-grading-form")
}else{c.push("showing-rubric")}}this.set("classNames",c)}.observes("isGradingForm","rubric"),isGradingFormBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isGradingForm"),rubricBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.content"),closeAction:null,bypassFirstTimeMessageBinding:"RubricManagerCore.userController.bypassRubricManagerFirstTimeMessage",userStatusBinding:"RubricManagerCore.userController.status",firstTimeMessageDisplayed:NO,headerView:SC.View.design({layout:{top:0,right:0,height:31,left:0},classNames:"header",childViews:"rubricTitleView importTitleView rubricActionsButtonView rubricImportCloseView attachmentStatusText attachButtonView detachButtonView sharingButtonView".w(),importTitleView:SC.LabelView.design({layout:{centerY:0,height:25,left:50,right:90},classNames:["rubric-title","rubric-canvas-label"],controlSize:SC.LARGE_CONTROL_SIZE,value:"_Import Rubrics".loc(),isVisibleBinding:SC.Binding.oneWay("RubricManagerCore.importController.importInProgress")}),rubricTitleView:RubricManagerCore.CanvasTextLabelView.design({layout:{centerY:0,height:25,left:50,right:90},classNames:["rubric-title"],maxLength:30,valueBinding:"RubricManagerCore.editingRubricController.name",controlSize:SC.LARGE_CONTROL_SIZE,isEditableBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isEditable"),editingContentBinding:"RubricManagerCore.editingRubricController.content",importingBinding:"RubricManagerCore.importController.importInProgress",isVisible:function(){var b=this.get("importing"),a=this.get("editingContent");
if(!b&&a!==null){return YES}return NO}.property("importing","editingContent").cacheable(),isGradingFormBinding:SC.Binding.bool("RubricManagerCore.editingRubricController.isGradingForm"),init:function(){arguments.callee.base.apply(this,arguments);
RubricManagerCore.rubricTitleView=this},hint:function(){return this.get("isGradingForm")?RubricManagerCore.GRADING_FORM_NAME_HINT:RubricManagerCore.RUBRIC_NAME_HINT
}.property("isGradingForm").cacheable()}),rubricImportCloseView:SC.ButtonView.design({layout:{centerY:0,height:30,left:10,width:30},toolTip:"_Back to Rubric/Form Manager".loc(),classNames:["header-button","button-back"],isVisibleBinding:SC.Binding.oneWay("RubricManagerCore.importController.importInProgress"),action:function(){RubricManagerCore.importController.set("importInProgress",NO);
var a=this.getPath("parentView.parentView.importView.dropzoneView.dropzoneView.contentView.previewsContainerView").get("layer");
$(a).empty()}}),rubricActionsButtonView:SC.PopupButtonView.design({layout:{centerY:0,height:30,left:10,width:30},toolTip:"_View available rubrics and rubric options".loc(),classNames:["header-button","button-list"],isVisibleBinding:SC.Binding.not("RubricManagerCore.importController.importInProgress"),action:function(){this.get("instantiatedMenu").updateItemsIfNeeded();
arguments.callee.base.apply(this,arguments)},menu:Ip.StandardScrollingMenuPane.create({maxHeight:500,rubricListLengthBinding:"RubricManagerCore.rubricListController.length",rubricListIsBusyBinding:"RubricManagerCore.rubricListController.isBusy",currentRubricBinding:"RubricManagerCore.currentRubricController.content",currentRubricNameBinding:"RubricManagerCore.currentRubricController.name",currentRubricIsSharedBinding:"RubricManagerCore.currentRubricController.isSharedByUser",menuHeight:300,updateItemsIfNeeded:function(){if(!this._shouldUpdateItems){return
}var c=[{name:"_Create new rubric".loc(),isEnabled:YES,action:"createNewRubric",target:"RubricManagerCore.rubricListController"},{name:"_Create new grading form".loc(),isEnabled:YES,action:"createNewGradingForm",target:"RubricManagerCore.rubricListController"}];
var e=RubricManagerCore.editingRubricController.get("isGradingForm");c.pushObjects([{name:"",isEnabled:YES,icon:null,separator:YES},{name:e?"_Duplicate this grading form".loc():"_Duplicate this rubric".loc(),isEnabled:YES,action:"duplicateRubric",target:"RubricManagerCore.rubricListController"},{name:"",isEnabled:YES,icon:null,separator:YES},{name:e?"_Rename this grading form".loc():"_Rename this rubric".loc(),isEnabledBinding:"RubricManagerCore.editingRubricController.isEditable",action:"beginEditing",target:"RubricManagerCore.rubricTitleView"},{name:e?"_Delete this grading form".loc():"_Delete this rubric".loc(),isEnabledBinding:"RubricManagerCore.editingRubricController.isEditable",action:"deleteCurrentRubric",target:"RubricManagerCore.rubricListController"}]);
if(this.get("rubricListIsBusy")){return c}var b=RubricManagerCore.rubricListController.get("arrangedObjects");
if(b){var a=[],f=this.getPath("currentRubric.id");b.forEach(function(j){var i=j.getPath("rubricGroup.id")||0,g=j.get("id"),h="",k;
k=a[i];if(!k){a[i]={id:i,name:j.getPath("rubricGroup.name")||"_Rubrics and Forms".loc(),menuItems:[]};
k=a[i]}if(!i){if(j.get("isSharedByUser")){h=" [%@]".fmt("_shared by you".loc())}else{if(!j.isOwnedByUser(RubricManagerCore.userController.get("id"))){h=" [%@]".fmt("_shared with you".loc())
}}}k.menuItems.push({id:g,name:j.get("name")+h,isChecked:(g===f),icon:j.get("isGradingForm")?"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/icon-grading-form.png":"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/icon-rubric.png",action:function(l){return function(){RubricManagerCore.rubricListController.selectRubric(l)
}}(j)})});a.push(a.shift());a.forEach(function(g){if(!g){return}var h=[{name:"",isEnabled:YES,icon:null,separator:YES},{name:g.name,isEnabled:NO}];
c.pushObjects(h);if(g.id){g.menuItems.sort(function(j,i){return(j.id-i.id)})}c.pushObjects(g.menuItems)
})}this.set("items",c);this._shouldUpdateItems=false},_shouldUpdateItems:YES,itemsShouldUpdate:function(){this._shouldUpdateItems=true
}.observes("rubricListLength","currentRubric","currentRubricName","currentRubricIsShared","rubricListIsBusy"),isEnabled:YES,itemTitleKey:"name",itemSeparatorKey:"separator",itemCheckboxKey:"isChecked",preferType:SC.PICKER_MENU,layout:{width:300},itemHeightKey:"height",classNames:"rubric-actions-menu"})}),attachmentStatusText:SC.LabelView.design({layout:{centerY:0,height:18,right:90,maxWidth:300},classNames:"text-attachedto",textAlign:SC.ALIGN_RIGHT,isAttachedBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",escapeHTML:NO,value:function(){if(!RubricManagerCore.assignmentController.get("content")){return null
}if(this.get("isAttached")){return"_ATTACHED TO %@".loc('<span class="rubric-attached-assignment">'+RubricManagerCore.assignmentController.get("title")+"</span>")
}else{return"_NOT ATTACHED TO THIS ASSIGNMENT".loc()}}.property("isAttached").cacheable(),isVisibleBinding:SC.Binding.not("RubricManagerCore.importController.importInProgress")}),attachButtonView:SC.ButtonView.design({layout:{centerY:0,height:30,right:50,width:30},classNames:["header-button","button-attach"],isEnabledBinding:"RubricManagerCore.currentRubricController.canBeAttached",canModifyAttachedRubricBinding:SC.Binding.not("RubricManagerCore.assignmentController.isAssignmentInfoLocked"),rubricCanBeAttachedBinding:"RubricManagerCore.currentRubricController.canBeAttached",isEnabled:function(){return(this.get("canModifyAttachedRubric")&&this.get("rubricCanBeAttached"))
}.property("canModifyAttachedRubric","rubricCanBeAttached").cacheable(),isAttachedToCurrentAssignmentBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",assignmentBinding:"RubricManagerCore.assignmentController.content",importingBinding:"RubricManagerCore.importController.importInProgress",isVisible:function(){return this.get("assignment")&&!this.get("isAttachedToCurrentAssignment")&&!this.get("importing")
}.property("isAttachedToCurrentAssignment","assignmentBinding","importing").cacheable(),action:function(){if(RubricManagerCore.nestedStore.get("hasChanges")){var a="_This %@ has unsaved changes. Please save or cancel the changes before attaching to the assignment.".loc(RubricManagerCore.editingRubricController.get("isGradingForm")?"form":"rubric");
SC.AlertPane.show("_Unsaved Changes".loc(),a)}else{RubricManagerCore.assignmentController.attachRubric()
}},messageTypeBinding:SC.Binding.transform(function(a){return a?"gradingForm":"rubric"
}).from("RubricManagerCore.currentRubricController.isGradingForm"),toolTip:function(){var a=this.get("messageType");
if(!this.get("canModifyAttachedRubric")){return RubricManagerCore.messages.attachedRubricLocked[a]
}else{return RubricManagerCore.messages.attachThisRubric[a]}}.property("canModifyAttachedRubric","messageType").cacheable()}),detachButtonView:SC.ButtonView.design({layout:{centerY:0,height:30,right:50,width:30},classNames:["header-button","button-detach"],currentAttachedBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",importingBinding:"RubricManagerCore.importController.importInProgress",isVisible:function(){var a=this.get("currentAttached"),b=this.get("importing");
if(a&&!b){return YES}return NO}.property("currentAttached","importing").cacheable(),action:"detachRubric",target:"RubricManagerCore.assignmentController",canModifyAttachedRubricBinding:SC.Binding.not("RubricManagerCore.assignmentController.isAssignmentInfoLocked"),messageTypeBinding:SC.Binding.transform(function(a){return a?"gradingForm":"rubric"
}).from("RubricManagerCore.currentRubricController.isGradingForm"),isEnabledBinding:".canModifyAttachedRubric",toolTip:function(){var a=this.get("messageType");
if(!this.get("canModifyAttachedRubric")){return RubricManagerCore.messages.attachedRubricLocked[a]
}else{return RubricManagerCore.messages.detachThisRubric[a]}}.property("canModifyAttachedRubric","messageType").cacheable()}),sharingButtonView:SC.PopupButtonView.design({layout:{centerY:0,height:30,right:10,width:30},classNames:["header-button","button-share"],isVisibleBinding:SC.Binding.not("RubricManagerCore.importController.importInProgress"),toolTip:"_View import/export options".loc(),menu:SC.MenuPane.create({currentRubricBinding:"RubricManagerCore.editingRubricController.content",canShareToAccountsBinding:"RubricManagerCore.userController.canShareToAccounts",canShareToSectionsBinding:"RubricManagerCore.classController.isMasterClass",itemDisableMenuFlashKey:"shouldPerformActionImmediately",items:function(){var a=[{name:"_Import...".loc(),isEnabled:YES,action:"beginImport",target:"RubricManagerCore.importController"},{name:"_Export...".loc(),isEnabledBinding:SC.Binding.oneWay("RubricManagerCore.currentRubricController.isNew").not(),action:"exportRubric",target:"RubricManagerCore.currentRubricController",shouldPerformActionImmediately:(SC.browser.isIE&&(SC.browser.compareVersion(8)===0))}];
if(this.get("canShareToAccounts")){a.pushObject({name:"_Share to account".loc(),currentRubricIsNewBinding:"RubricManagerCore.editingRubricController.isNew",currentRubricRubricGroupBinding:"RubricManagerCore.editingRubricController.rubricGroup",isEnabled:function(){return !(this.get("currentRubricIsNew")||this.getPath("currentRubricRubricGroup.id")==1)
}.property("currentRubricIsNew","currentRubricRubricGroup").cacheable(),isCheckedBinding:"RubricManagerCore.currentRubricController.isSharedToCurrentAccount",action:"toggleSharingToAccount",target:"RubricManagerCore.currentRubricController"})
}if(this.get("canShareToSections")){a.pushObject({name:"_Share to sections".loc(),isEnabledBinding:SC.Binding.oneWay("RubricManagerCore.currentRubricController.isNew").not(),isCheckedBinding:"RubricManagerCore.currentRubricController.isSharedToCurrentSections",action:"toggleSharingToSections",target:"RubricManagerCore.currentRubricController"})
}return a}.property("canShareToAccounts","canShareToSections").cacheable(),isEnabled:YES,itemTitleKey:"name",itemSeparatorKey:"separator",itemCheckboxKey:"isChecked",preferType:SC.PICKER_MENU,layout:{width:150},itemHeightKey:"height"})})}),noticeView:SC.ContainerView.design({layout:{top:40,right:0,height:30,left:0},nowShowing:function(){var c=this.get("rubricGroup"),b=this.get("isGradingForm"),a=null;
if(c){a="RubricManagerCore.canvasesPage.commonCoreApprovalView"}else{if(b){a="RubricManagerCore.canvasesPage.gradingFormIpadWarningView"
}}return a}.property("rubricGroup","isGradingForm").cacheable(),rubricGroupBinding:"RubricManagerCore.currentRubricController.rubricGroup",isGradingFormBinding:"RubricManagerCore.editingRubricController.isGradingForm"}),toolbarView:SC.ToolbarView.design({rubricGroupBinding:"RubricManagerCore.currentRubricController.rubricGroup",layout:function(){var a={right:0,height:30,left:0};
a.top=this.get("rubricGroup")||this.get("isGradingForm")?70:40;return a}.property("rubricGroup","isGradingForm").cacheable(),isGradingFormBinding:"RubricManagerCore.editingRubricController.isGradingForm",classNames:["toolbar"],childViews:"criterionHeaderView scalesHeaderView".w(),criterionHeaderView:SC.View.design({layout:{top:0,left:0,bottom:0,width:RubricManagerCore.CRITERION_COLUMN_WIDTH},childViews:"labelView addCriterionButtonView".w(),classNames:"criteria-header",labelView:SC.LabelView.design({layout:{centerY:0,right:20,height:20,left:10},classNames:"manager-header-title",value:"_criteria".loc()}),addCriterionButtonView:SC.ButtonView.design({layout:{centerY:0,right:5,height:24,width:30},titleMinWidth:0,classNames:"manager-add",displayProperties:["isVisible"],isAttachedToCurrentAssignmentBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",assignmentBinding:"RubricManagerCore.assignmentController.content",isEditableBinding:"RubricManagerCore.editingRubricController.isEditable",isVisible:function(){var a=this.get("assignment")?this.get("isAttachedToCurrentAssignment"):NO;
return !a&&this.get("isEditable")}.property("isAttachedToCurrentAssignment","assignment","isEditable").cacheable(),isEnabledBinding:SC.Binding.transform(function(a){return a<Rb.MAX_CRITERIA
}).from("RubricManagerCore.criteriaController.length"),criteriaLengthBinding:"RubricManagerCore.criteriaController.length",toolTip:function(){if(this.get("criteriaLength")>=Rb.MAX_CRITERIA){return"_Your rubric can have no more than %@ criteria rows.".loc(Rb.MAX_CRITERIA)
}}.property("criteriaLength").cacheable(),action:"addCriterion",target:"RubricManagerCore.editingRubricController"})}),scalesHeaderView:SC.View.design({layout:{top:0,left:RubricManagerCore.CRITERION_COLUMN_WIDTH,bottom:0,right:0},childViews:"labelView addScaleButtonView".w(),classNames:"scales-header",isVisibleBinding:SC.Binding.bool("RubricManagerCore.editingRubricController.isGradingForm").not().oneWay(),labelView:SC.LabelView.design({layout:{centerY:0,maxWidth:200,height:20,left:10},classNames:"manager-header-title",value:"_scales".loc()}),addScaleButtonView:SC.ButtonView.design({layout:{centerY:0,right:10,height:24,width:30},titleMinWidth:0,classNames:"manager-add",isAttachedToCurrentAssignmentBinding:"RubricManagerCore.currentRubricController.isAttachedToCurrentAssignment",assignmentBinding:"RubricManagerCore.assignmentController.content",isEditableBinding:"RubricManagerCore.editingRubricController.isEditable",isVisible:function(){var a=this.get("assignment")?this.get("isAttachedToCurrentAssignment"):NO;
return !a&&this.get("isEditable")}.property("isAttachedToCurrentAssignment","assignment","isEditable").cacheable(),isVisibleBinding:"RubricManagerCore.editingRubricController.isEditable",isEnabledBinding:SC.Binding.transform(function(a){return a<Rb.MAX_SCALES
}).from("RubricManagerCore.scalesController.length"),scalesLengthBinding:"RubricManagerCore.scalesController.length",toolTip:function(){if(this.get("scalesLength")>=Rb.MAX_SCALES){return"_Your rubric can have no more than %@ scale option columns.".loc(Rb.MAX_SCALES)
}}.property("scalesLength").cacheable(),action:"addScale",target:"RubricManagerCore.editingRubricController"})})}),canvasContainer:SC.ContainerView.design({layout:function(){var a={right:0,bottom:30,left:0};
a.top=this.get("rubricGroup")||this.get("isGradingForm")?100:70;return a}.property("rubricGroup","isGradingForm").cacheable(),classNames:["canvas"],rubricGroupBinding:"RubricManagerCore.currentRubricController.rubricGroup",isGradingFormBinding:"RubricManagerCore.editingRubricController.isGradingForm",nowShowing:function(){return this.get("isGradingForm")?RubricManagerCore.canvasesPage.get("gradingFormCanvas"):RubricManagerCore.canvasesPage.get("rubricCanvas")
}.property("isGradingForm").cacheable()}),footer:SC.View.design({layout:{height:30,right:0,bottom:0,left:0},classNames:"footer",childViews:"criterionFooterView scoringFooterView gradingFormScoringOptionView saveActionsView".w(),criterionFooterView:SC.View.design({layout:{top:0,left:0,bottom:0,width:RubricManagerCore.CRITERION_COLUMN_WIDTH},childViews:"labelView valueView".w(),classNames:"divide-right",isVisibleBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isGradingForm").not(),labelView:SC.LabelView.design({layout:{centerY:0,right:20,height:20,left:10},value:"_TOTAL".loc(),classNames:"manager-header-title",isVisibleBinding:SC.Binding.transform(function(a){return a===Rb.TYPICAL_RUBRIC
}).from("RubricManagerCore.editingRubricController.scoringMethod")}),valueView:SC.LabelView.design({layout:{centerY:0,right:10,height:20,width:75},isVisibleBinding:SC.Binding.transform(function(a){return a===Rb.TYPICAL_RUBRIC
}).from("RubricManagerCore.editingRubricController.scoringMethod"),textAlign:SC.ALIGN_RIGHT,rubricTotalPercentBinding:"RubricManagerCore.editingRubricController.totalPercent",value:function(){var a=this.get("rubricTotalPercent");
if(a){a=a+"%"}else{a=""}return a}.property("rubricTotalPercent").cacheable()})}),gradingFormScoringOptionView:SC.CheckboxView.design(SCUI.ToolTip,{layout:{centerY:0,left:25,height:18,width:300},isVisible:NO,isVisibleBinding:SC.Binding.bool("RubricManagerCore.editingRubricController.isGradingForm"),title:"_Enable scoring".loc(),valueBinding:"RubricManagerCore.editingRubricController.scoringMethod",toggleOnValue:Rb.SCORING_GRADING_FORM,toggleOffValue:Rb.NON_SCORING_GRADING_FORM,isEnabledBinding:"RubricManagerCore.editingRubricController.isEditable",toolTip:"_Allows each criterion to contain a score. Numbers will be automatically summed up.".loc()}),scoringFooterView:SC.View.design({layout:{top:0,left:RubricManagerCore.CRITERION_COLUMN_WIDTH,bottom:0,width:300},childViews:"labelView scoringTypeSelectionView".w(),classNames:"divide-right scoring-footer",isVisibleBinding:SC.Binding.bool("RubricManagerCore.editingRubricController.isGradingForm").not(),labelView:SC.LabelView.design({layout:{centerY:0,height:20,left:10,width:140},classNames:"manager-header-title",value:"_rubric scoring".loc()}).loc(Ip.getLocalizationHash("RubricManagerCore.scoringFooterLabelView")),scoringTypeSelectionView:Ip.SegmentedView.design({layout:{centerY:0,height:26,right:10,width:135},allowsMultipleSelection:NO,allowsEmptySelection:NO,valueBinding:"RubricManagerCore.editingRubricController.scoringMethod",isEnabledBinding:"RubricManagerCore.editingRubricController.isEditable",items:[{title:" ",toolTip:"_Standard rubric: enter scale values for each column and weight your criteria rows using percentages.".loc(),value:Rb.TYPICAL_RUBRIC,className:"rubric-type type-percent"},{title:" ",toolTip:"_Custom rubric: enter any value directly into each rubric cell.".loc(),value:Rb.CUSTOM_RUBRIC,className:"rubric-type type-custom"},{title:" ",toolTip:"_Qualitative rubric: a rubric that provides standard feedback but has no numeric scoring.".loc(),value:Rb.NON_SCORING_RUBRIC,className:"rubric-type type-noscore"}],itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip",itemClassNameKey:"className"})}),saveActionsView:SC.View.design({layout:{top:0,right:0,bottom:0,left:RubricManagerCore.CRITERION_COLUMN_WIDTH+300},childViews:"saveButtonView cancelButtonView nonEditableMessageView closeButtonView modifyButtonView".w(),saveButtonView:SC.ButtonView.design({layout:function(){var a=this.get("closeButtonVisible")?192:96;
return{top:0,height:30,right:a,width:95}}.property("closeButtonVisible").cacheable(),title:"_save".loc(),classNames:["manager-header-title","manager-footer-button"],isVisibleBinding:"RubricManagerCore.editingRubricController.isEditing",isEnabledBinding:"RubricManagerCore.nestedStore.hasChanges",closeButtonVisibleBinding:".parentView.closeButtonView.isVisible",action:"saveRubric",target:"RubricManagerCore.editingRubricController"}),cancelButtonView:SC.ButtonView.design({layout:function(){var a=this.get("closeButtonVisible")?96:0;
return{top:0,height:30,right:a,width:95}}.property("closeButtonVisible").cacheable(),title:"_cancel".loc(),classNames:["manager-header-title","manager-footer-button"],isVisibleBinding:"RubricManagerCore.editingRubricController.isEditing",isEnabledBinding:"RubricManagerCore.editingRubricController.canCancel",closeButtonVisibleBinding:".parentView.closeButtonView.isVisible",action:"cancelEditing",target:"RubricManagerCore.editingRubricController"}),modifyButtonView:SC.ButtonView.design({layout:function(){var a=this.get("closeButtonVisible")?96:0;
return{top:0,height:30,right:a,width:95}}.property("closeButtonVisible").cacheable(),closeButtonVisibleBinding:".parentView.closeButtonView.isVisible",title:"_modify".loc(),classNames:["manager-header-title","manager-footer-button"],isVisible:function(){var b=this.get("isEditing"),c=this.get("isGradingForm"),a=this.get("isEditable");
return(!b&&c&&a)}.property("isEditing","isGradingForm","isEditable").cacheable(),isEditableBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isEditable"),isEditingBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isEditing"),isGradingFormBinding:SC.Binding.oneWay("RubricManagerCore.editingRubricController.isGradingForm"),isEnabledBinding:"RubricManagerCore.editingRubricController.isEditable",action:"beginEditing",target:"RubricManagerCore.editingRubricController"}),closeButtonView:SC.ButtonView.design({layout:{top:0,height:30,right:0,width:95},title:"_close".loc(),classNames:["manager-header-title","manager-footer-button"],actionBinding:".parentView.parentView.parentView.closeAction",isVisibleBinding:SC.Binding.notNull(".action",NO)}),nonEditableMessageView:SC.LabelView.design(SCUI.ToolTip,{layout:{top:6,left:10,height:30,width:230},classNames:["manager-footer-actions-message"],valueBinding:SC.Binding.transform(function(a){return RubricManagerCore.messages.rubricNotEditable[a]
}).from(".messageType"),icon:"sc-icon-info-16",isVisibleBinding:SC.Binding.bool("RubricManagerCore.editingRubricController.isEditable").not(),hasBeenUsedToScoreBinding:"RubricManagerCore.editingRubricController.hasBeenUsedToScore",isRubricOwnerBinding:"RubricManagerCore.editingRubricController.userIsOwner",displayProperties:["toolTip"],messageTypeBinding:SC.Binding.transform(function(a){return a?"gradingForm":"rubric"
}).from("RubricManagerCore.currentRubricController.isGradingForm"),toolTip:function(){var a=this.get("messageType");
if(!this.get("isRubricOwner")){return RubricManagerCore.messages.notRubricOwner[a]
}else{if(this.get("hasBeenUsedToScore")){return RubricManagerCore.messages.rubricUsedToScore[a]
}}}.property("hasBeenUsedToScore","isRubricOwner","messageType").cacheable()})})}),loadingView:Ip.LoadingView.design({layout:{top:0,right:0,bottom:0,left:0},rubricIsBusyBinding:"RubricManagerCore.currentRubricController.isBusy",rubricListIsBusyBinding:"RubricManagerCore.rubricListController.isBusy",isVisible:function(){return(this.get("rubricIsBusy")||this.get("rubricListIsBusy"))
}.property("rubricIsBusy","rubricListIsBusy").cacheable()}),rubricIsBusyBinding:"RubricManagerCore.currentRubricController.isBusy",importView:SC.View.design({layout:{top:41,right:0,left:0,bottom:0},classNames:"importpane",childViews:"dropzoneView helpView".w(),isVisibleBinding:"RubricManagerCore.importController.importInProgress",dropzoneView:RubricManagerCore.DropzoneView.design({layout:{left:400,right:0,top:0,bottom:0},classNames:"dropzone-wrapper"}),helpView:SC.ScrollView.design({layout:{top:0,bottom:0,left:0,width:398},classNames:"import-help".w(),canScrollVertical:true,hasHorizontalScroller:false,importInProgressBinding:"RubricManagerCore.importController.importInProgress",importObserver:function(){if(this.get("importInProgress")){var a=this;
this.invokeLast(function(){a.scrollTo(0,0)})}}.observes("importInProgress"),contentView:SC.View.design({childViews:"excelHelpView rbcHelpView".w(),useStaticLayout:YES,excelHelpView:SC.View.design({childViews:"excelHelpHeaderView excelListView downloadExampleView".w(),useStaticLayout:YES,classNames:"excel-help".w(),excelHelpHeaderView:SC.LabelView.design({controlSize:SC.LARGE_CONTROL_SIZE,classNames:["help-header"],useStaticLayout:YES,value:"_Importing from Excel files:".loc()}),excelListView:SC.View.design({classNames:["help-content"],useStaticLayout:YES,render:function(a,b){if(b){a.push("<ul>").push("<li>").push("_The rubric in the spreadsheet must have the scales of the rubric as its first row".loc()).push("</li>");
a.push("<li>").push("_The rubric in the spreadsheet must have the criteria of the rubric as the first column".loc()).push("</li>");
a.push("<li>").push("_If included, criteria descriptions should be in the same cells as the criteria titles".loc()).push("</li>");
a.push("<li>").push("_Descriptors for the body of the rubric can be included".loc()).push("</li>");
a.push("<li>").push("_Criteria titles must be 13 characters or less".loc()).push("</li>");
a.push("<li>").push("_The rubric in the spreadsheet can have no more than 20 scale value columns".loc()).push("</li>");
a.push("<li>").push("_The rubric in the spreadsheet can have no more than 50 criteria rows".loc()).push("</li>");
a.push("<li>").push("_If you would like to use scoring for your rubric, please add it using the Rubric/Form Manager after you import".loc()).push("</li>").push("</ul>")
}}}),downloadExampleView:SC.View.design({childViews:["downloadLabelView","downloadButtonView"],useStaticLayout:YES,classNames:"download-example".w(),downloadLabelView:SC.LabelView.design({classNames:["help-content","download-label"],useStaticLayout:YES,value:"_An example file is available here.".loc()}),downloadButtonView:SC.ButtonView.design({layout:{width:200,height:24},useStaticLayout:YES,classNames:["panel-button","primary"],title:"_Download Example Template".loc(),exampleFilePath:function(){var a="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/example_rubric_files/example_rubric_en_us.xls";
var b=a.replace("en_us",Cv.get("lang"));return b}.property("lang").cacheable(),action:function(){var a=this.get("exampleFilePath");
Ip.downloadFromUrl(a)}})})}),rbcHelpView:SC.View.design({childViews:"rbcHelpHeaderView rbcListView".w(),useStaticLayout:YES,classNames:"rbc-help".w(),rbcHelpHeaderView:SC.LabelView.design({controlSize:SC.LARGE_CONTROL_SIZE,classNames:["help-header"],useStaticLayout:YES,value:"_Importing from Turnitin rubric files:".loc()}),rbcListView:SC.View.design({classNames:["help-content"],useStaticLayout:YES,render:function(a,b){if(b){a.push("<ul>").push("<li>").push("_Turnitin rubric files must be in .rbc file format and must have been exported from Turnitin originally".loc()).push("</li>");
a.push("<li>").push("_Grading Forms that have been exported from Turnitin can also be imported".loc()).push("</li>").push("</ul>")
}}})})})})})});RubricManagerCore.MarkListPaneMarkView=SC.ListItemView.extend({content:null,classNames:["mark-list-pane-mark-view"],marksDelegate:null,emphasizedMarkController:null,labelHeading:null,labelBody:null,iconValue:null,controlSize:SC.LARGE_CONTROL_SIZE,render:function(c,h){var g=this.get("content");
if(!g){return}var a=this.get("iconValue");if(a){this.renderIcon(c,a)}var b="";var e=this.get("labelHeading");
if(e){b+="<b>%@</b> ".fmt(e)}var f=this.get("labelBody")||"_(No Comment)".loc();b+=f;
c.push("<span class='mark-label'>"+b+"</span>");this.renderIsHovering(c,h)},didCreateLayer:function(){this.invokeOnce(this._clampDescription)
},didUpdateLayer:function(){this.invokeOnce(this._clampDescription)},_labelBodyDidChange:function(){this.invokeOnce(this._clampDescription)
}.observes("labelBody"),_clampDescription:function(){var a=this.get("layer");if(a){var b=$(a).find("span.mark-label")[0];
$clamp(b,{clamp:2})}},renderIsHovering:function(a,b){if(this.get("emphasizedMarkController")){a.push('<a class="sc-view sc-label-view show-on-paper-link sc-regular-size">%@</a>'.fmt("_Show".loc()))
}},click:function(a){var b=SC.$(a.target);if(b.hasClass("show-on-paper-link")){this.showOnPaper()
}},showOnPaper:function(){var b=this.get("emphasizedMarkController");if(!b){return
}var a=this.get("content");b.set("content",a)}});sc_require("views/mark_list_pane_mark");
RubricManagerCore.MarkListPaneCommentView=RubricManagerCore.MarkListPaneMarkView.extend({classNames:["mark-list-pane-comment-view"],iconValue:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/mark-bubble-comment.png",labelBody:function(){var a=this.getPath("content.text");
return a}.property().cacheable()});sc_require("views/mark_list_pane_mark");RubricManagerCore.MarkListPaneQuickMarkView=RubricManagerCore.MarkListPaneMarkView.extend({classNames:["mark-list-pane-quick-mark-view"],iconValue:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/rubric_manager_core/en_us/A/resources/mark-quick-mark.png",labelHeading:function(){var a=this.getPath("content.template.symbol");
return a}.property().cacheable(),labelBody:function(){return this.getPath("content.template.description")
}.property().cacheable()});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("rubric_manager_core")
}Cv.mixin({attachingRubric:false,_gradingFormRefreshAttachmentObserver:function(c,b,e,a){if(this.get("status")===SC.Record.READY_CLEAN){this.invokeLater(function(){Cv.attachRubricToAssignment(a.assignment,this,a.userConfirmedScoringDelete)
})}},attachRubricToAssignment:function(e,c,b){if(c.hasLocalIds()){c.addObserver("status",c,this._gradingFormRefreshAttachmentObserver,{assignment:e,userConfirmedScoringDelete:b});
c.refresh();return}else{if(c.hasObserverFor("status")){c.removeObserver("status",c,this._gradingFormRefreshAttachmentObserver)
}}this.set("attachingRubric",true);var a=e.get("rubric");e.set("rubric",c);e.commitRecord({customDataHashFunction:function(f,h){var g=f.readDataHash(h);
g.confirmed_scoring_delete=b?"1":"0";return g}});RubricManagerCore.updateRubricAttachmentStatus(c,e,YES);
if(b&&a){a.get("assignments").removeObject(e.get("id"));Cv.removeScoringForRubric(e,a)
}this.set("attachingRubric",false)},detachRubricFromAssignment:function(c,b){var a=c.get("rubric");
c.set("rubric",null);c.commitRecord({customDataHashFunction:function(e,g){var f=e.readDataHash(g);
f.confirmed_scoring_delete=b?"1":"0";return f}});RubricManagerCore.updateRubricAttachmentStatus(a,c,NO);
if(b){Cv.removeScoringForRubric(c,a);Cv.removeMarkCriteriaAssociationsForAssignment()
}},removeMarkCriteriaAssociationsForAssignment:function(){var a=Cv.store.find(SC.Query.local(Cv.MarkCriterion,{conditions:"read = {read}",read:Cv.gradeMarkController.get("read")}));
if(a.get("length")>0){a.forEach(function(b){b.setPath("mark.markCriteria",[])})}Cv.store.unloadRecords(Cv.MarkCriterion,a.getEach("id"),a.getEach("storeKey"),SC.Record.DESTROYED_CLEAN)
},removeScoringForRubric:function(f,c){var e=Cv.store.find(SC.Query.local(Cv.RubricScoring,{conditions:"rubric = {rubric}",rubric:c}));
var a=[],b=[];e.forEach(function(g){if(g.getPath("read.paper.assignment")===f){if(g.getPath("read.rubricScoring")===g){g.setPath("read.rubricScoring",null)
}a.pushObject(g);b.pushObjects(g.get("scoringFeedbackObjects"))}});Cv.store.unloadRecords(Rb.RubricScoringFeedback,b.getEach("id"),b.getEach("storeKey"),SC.Record.DESTROYED_CLEAN);
Cv.store.unloadRecords(Cv.RubricScoring,a.getEach("id"),a.getEach("storeKey"),SC.Record.DESTROYED_CLEAN)
}});Cv.assignmentController=SC.ObjectController.create(Ip.LocalizedUrl,{paperDidChange:function(){if(this.get("content")){return
}this.setIfChanged("content",Cv.paperController.get("assignment"))}.observes("Cv.paperController.assignment"),assignmentDidChange:function(){var a=Cv.assignmentsController.get("selectedAssignment");
if(this.get("content")!=a){this.set("content",a)}if(this.get("content")!=Cv.paperController.get("assignment")){var b=Cv.classController.getPath("selectedStudent");
var e=null;if(b){var c=Cv.assignmentController.get("content");e=this.setPaperForStudent(b)
}}}.observes("Cv.assignmentsController.selectedAssignment"),attachRubric:function(){if(RubricManagerCore.editingRubricController.get("isNew")){return
}var a=RubricManagerCore.currentRubricController.get("content");if(a.get("isNew")||a.store===RubricManagerCore.nestedStore){throw"can't attach unsaved rubric"
}var b=this.get("content");if(!this.get("rubric")){Cv.attachRubricToAssignment(b,a)
}else{SC.AlertPane.warn("_Attach a different rubric?".loc(),"_There is already a rubric attached to this assignment. Attaching another will delete any existing rubric scoring for this assignment".loc(),"_Are you sure?".loc(),"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(e,c){if(c===SC.BUTTON1_STATUS){Cv.attachRubricToAssignment(b,a,YES)
}}})}},detachRubric:function(){if(!this.get("rubric")){console.log("there is no rubric attached to this assignment");
return}var a=this.get("content");SC.AlertPane.warn("_Detach this rubric?".loc(),"_Changing or detaching a rubric will remove all existing rubric scoring from papers in this assignment, including scorecards which have previously been marked. Overall grades for previously graded papers will remain.".loc(),"_Are you sure?".loc(),"_YES".loc(),"_NO".loc(),{alertPaneDidDismiss:function(c,b){if(b===SC.BUTTON1_STATUS){Cv.detachRubricFromAssignment(a,YES)
}}})},setPaperForStudent:function(b){var a=Cv.store.find(SC.Query.local(Cv.Paper,{conditions:"author = {author} AND assignment = {assignment}",author:b,assignment:this.get("content")}));
if(a.getPath("firstObject.id")){this.setPaper(a.getPath("firstObject.id"));return
}else{this.invokeOnce(function(){this.retrieveAndSetPaperId(b)})}},retrieveAndSetPaperId:function(c){var b=[this.get("id"),c.get("id")].join("-");
if(this._searchingFor===b){return}this._searchingFor=b;var a=this.prepareUrl([(Cv.get("inStudentMode")?"/student":"")+"/assignment/%@/user_paper/%@?cv=1".fmt(this.get("id"),c.get("id"))].join(""));
Ip.TransientRequest.executeTransientGet(a,{successCallback:function(f){Cv.assignmentController._searchingFor=null;
var e=f.paper_id;Cv.assignmentController.setPaper(e)},failureCallback:function(e){Cv.assignmentController._searchingFor=null;
Cv.assignmentController.setPaper(null)},usePalladiumHeader:YES})},setPaper:function(a){this.invokeLast(function(){Cv.paperController.set("content",Cv.store.find(Cv.Paper,a))
})}});RubricManagerCore.assignmentController=Cv.assignmentController;Cv.assignmentsController=SC.ArrayController.create({contentBinding:SC.Binding.oneWay("Cv.classController.paperSubmissionAssignments"),allowMultipleSelection:NO,allowEmptySelection:NO,orderBy:["assignmentNumber"],selectedAssignment:function(b,c){if(c!==undefined){this.selectObject(c)
}var a=this.getPath("selection.firstObject");return a}.property("selection").cacheable(),contentDidChange:function(){var a=Cv.assignmentController.get("content");
this.selectObject(a)}.observes("[]","Cv.assignmentController.[]")});Cv.audioPlayerController=AudioTools.PlayerController.create({audioFileURL:null,audioFileURLBinding:SC.Binding.oneWay("Cv.markSetController.voiceCommentGetUrl"),audioFiletype:null,audioFiletypeBinding:SC.Binding.oneWay("Cv.markSetController.voiceCommentFiletype"),read:null,readBinding:SC.Binding.oneWay("Cv.markSetController.content"),isEnabled:NO,playingIsGloballyDisabled:function(){return !Cv.config.get("CAN_GET_VOICE_COMMENTS")
}.property().cacheable(),trash:function(){if(Cv.get("inStudentMode")||Cv.paperController.get("isReadonly")){return
}arguments.callee.base.apply(this,arguments);try{var c=this.get("read");var b=c.get("voiceCommentDeleteUrl");
var a=this;var g={usePalladiumHeader:YES,successCallback:function(){c.set("voiceCommentGetUrl",null);
c.set("voiceCommentDeleteUrl",null);c.commitRecord();a.set("isEnabled",NO)},failureCallback:function(h,e){e=parseInt(e);
switch(e){case (503):SC.AlertPane.error("_We ran into a problem!".loc(),"_Deleting of voice comments is currently unavailable. Please try again later.".loc(),null,"_Close".loc());
break;case (404):SC.AlertPane.error("_We ran into a problem!".loc(),"_There was an error connecting to the server. Please check your internet connection and try again.".loc(),null,"_Close".loc());
break;default:SC.AlertPane.error("_We ran into a problem!".loc(),"_There was an error trying to delete your recording. Please try again by clicking the delete button.".loc(),null,"_Close".loc());
break}this.set("isEnabled",YES)}};Ip.TransientRequest.executeTransientDelete(b,null,g)
}catch(f){console.log("audio file deletion failed: ",f)}},stopEventDidFire:function(){this.stop()
}.observes("Cv.assignmentController.isLoaded","Cv.gradeMarkController.isActive")});
Cv.classController=SC.ObjectController.create({contentBinding:"Cv.assignmentController.class",selectedStudent:null,paperDidChange:function(){var b=Cv.paperController.get("content");
if(b){var a=b.get("author")||this.get("selectedStudent");if(b.get("owner")===-1){a=null
}this.setIfChanged("selectedStudent",a)}}.observes("Cv.paperController.content"),readonlyAlert:function(){if(Cv.get("inStudentMode")){return
}if(this.get("isReadonly")){if(this.get("isExpired")){SC.AlertPane.info("_Read Only".loc(),"_This paper was submitted to a class that is expired, and is currently in read-only mode.".loc(),null,"_OK".loc())
}else{if(this.get("isNativeLocked")){SC.AlertPane.info("_Read Only".loc(),"_This paper was submitted to an assignment that was created in your LMS, and is currently in read-only mode.%@This paper can only be edited or graded from within the corresponding %@ assignment in your LMS.".loc("\n\n\n",Cv.config.get("APP_NAME")),null,"_OK".loc())
}}}}.observes("isReadonly")});Qmlib.classController=Cv.classController;RubricManagerCore.classController=Cv.classController;
Cv.commentController=SC.ObjectController.create({INPUT_MODE_BUBBLE:0,INPUT_MODE_TEXT:1,inputMode:function(a,b){if(b===undefined){b=Cv.userDefaults.get("inputMode")?Cv.userDefaults.get("inputMode"):this.get("INPUT_MODE_BUBBLE")
}return b}.property().cacheable(),anInlineCommentIsBeingEdited:NO});Cv.commentTemplateSetsController=SC.ArrayController.create({allowsMultipleSelection:NO,allowsEmptySelection:YES,templateSetsBinding:"Qmlib.templateSetsController.content",orderBy:["sortName"],nullSet:function(){return Cv.store.createRecord(Qm.QuickMarkTemplateSet,{name:"_Do not add to set".loc(),owner:Qmlib.userController.get("id"),id:-4})
}.property().cacheable(),content:function(){if(!this.get("templateSets")){return[]
}this.get("nullSet");return this.get("templateSets").find(SC.Query.local(Qm.QuickMarkTemplateSet,{conditions:"isPseudoSet = NO OR (isPseudoSet = YES AND isNullPseudoSet = YES)"}))
}.property("templateSets").cacheable(),contentDidChange:function(){if(!this.get("isLoading")){this.selectObject(this.get("content").findProperty("isActiveSet",YES))
}}.observes("isLoading"),isLoadingBinding:"Qmlib.templateSetsController.isLoading"});
Cv.eRaterExcludedMarksController=SC.ArrayController.create({paperBinding:"Cv.paperController.content",isVisibleBinding:SC.Binding.oneWay("Cv.eRaterController.isVisible"),eRaterReadBinding:SC.Binding.oneWay("Cv.eRaterReadController.content"),content:function(){var a=this.get("eRaterRead");
if(a){return Cv.store.find(SC.Query.local(Cv.Mark,{conditions:"read = {read} AND isExcluded = YES",read:a}))
}}.property("eRaterRead").cacheable(),revealAll:function(){var a=this.get("eRaterRead");
if(a){Cv.restoreAllERaterMarks(a)}}});Cv.eRaterHandbookController=SC.ObjectController.create({contentBinding:"Cv.assignmentController.eRaterHandbook"});
Cv.eRaterPreQueueingController=SC.Controller.create({queueingDelay:5000,eRaterIsVisibleBinding:"Cv.eRaterController.isVisible",_queueTimer:null,queueEraterForNextPaper:function(){if(Cv.eRaterReadController.get("content")){if(this._queueTimer){this._queueTimer.invalidate()
}this._queueTimer=SC.Timer.schedule({target:this,action:"_queueNextEraterRead",interval:this.get("queueingDelay")})
}}.observes("Cv.eRaterReadController.content"),_queuedUrls:{},_queueNextEraterRead:function(){this._queueTimer=null;
var b=Cv.paperStubsController.get("nextStub");if(!b||!this.get("eRaterIsVisible")||b.get("dprPreWithImageDimensions")){return
}var a=Ip.LocalizedUrl.prepareUrl("/paper/%@/erater_data".fmt(b.get("id")));if(this._queuedUrls[a]){return
}Ip.TransientRequest.executeTransientGet(a,{usePalladiumHeader:YES});this._queuedUrls[a]=a
}});Cv.eRaterReadController=SC.ObjectController.create({content:null,applyDelayTimer:YES,_previousContent:null,_showContentTimer:null,contentDidChange:function(){this.invokeOnce(this._updateReadIsHidden)
}.observes("content"),_updateReadIsHidden:function(){var a=this.get("content");if(a===this._previousContent){return
}if(this._previousContent){if(this._showContentTimer){this._showContentTimer.invalidate();
this._showContentTimer=null}this._previousContent.set("isHidden",YES);this._previousContent=null
}this._previousContent=a;if(a){if(!this.get("applyDelayTimer")){a.set("isHidden",NO)
}else{if(!this._showContentTimer){this._showContentTimer=this.invokeLater(function(){this._showContentTimer=null;
a.set("isHidden",NO)},3000)}}}}});Cv.eRaterReadFiltersController=SC.ObjectController.create({contentBinding:"Cv.eRaterReadController.filters"});
Cv.eRaterReadMarksInfoController=SC.ObjectController.create({contentBinding:SC.Binding.oneWay("Cv.eRaterReadController.readMarksInfo")});
Cv.eRaterReadQueryController=SC.ArrayController.create({contentBinding:"Cv.eRaterController.read",eRaterReadMarksInfo:null,eRaterReadMarksInfoBinding:"Cv.eRaterReadMarksInfoController.content",isLoading:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable(),doneLoading:function(){if(!this.get("isLoading")&&this.getPath("content.firstObject")){Cv.eRaterReadController.setIfChanged("content",this.getPath("content.firstObject"))
}else{Cv.eRaterReadController.set("content",null)}}.observes("isLoading"),contentDidChange:function(){if(!this.get("content")){Cv.eRaterReadController.set("content",null)
}}.observes("content"),detailedStatusText:function(){var e=this.get("content"),c=e?e.get("errorObject"):null,b=c?c.get("message"):null,a=this.get("status");
if(!e||(a&SC.Record.BUSY)){return"_Loading e-rater&reg; feedback...".loc()}else{if(a&SC.Record.ERROR){if(b&&(b!==Ip.Poller.DEFAULT_ERROR_MESSAGE)){return b
}else{return"_e-rater&reg; cannot process this paper.".loc()}}else{if(a&SC.Record.READY){if(!this.getPath("content.length")){return"_e-rater&reg; processing is currently unavailable.  Please try again later.".loc()
}else{if(this.get("isMarkCountLimited")){return"_e-rater&reg; made more than 50 marks on one or more pages of this paper, but a maximum of 50 e-rater&reg; marks is shown on each page.".loc()
}else{return"_ETS&reg; data successfully loaded.".loc()}}}}}}.property("status","content","isMarkCountLimited").cacheable(),hasSuccessStatus:function(){var e=NO;
var c=this.get("content"),a=this.get("status");if(c&&(a&SC.Record.READY)){var b=this.getPath("content.length");
if(b>0){e=YES}}return e}.property("status","content").cacheable(),isMarkCountLimited:function(){var b=NO;
var e=this.get("eRaterReadMarksInfo");if(e){var c=this.getPath("content.firstObject.paper.pageCount");
for(var a=0;a<c;a++){var f=e.getPageTotalMarkCount(a);if(f===50){b=YES;break}}}return b
}.property("eRaterReadMarksInfo").cacheable()});Cv.editingRegistryController=Ip.EditingRegistryController.create();
Cv.emphasizedMarkController=SC.ObjectController.create({content:null,init:function(){var a=SC.browser.mozilla?"DOMMouseScroll":"mousewheel";
SC.Event.add(document.body,"mousedown",this,this._clearContent);SC.Event.add(document.body,a,this,this._clearContent)
},_clearContent:function(){this.set("content",null);return YES},_prevMark:null,_updateEmphasis:function(){var a=this.get("content");
if(this._prevMark&&(a!==this._prevMark)){this._prevMark.set("isEmphasized",NO)}this._prevMark=a;
if(a){this.setPath("content.isEmphasized",YES);Cv.paperView.pageListView.scrollToPageView(this.getPath("content.pageIndex"))
}},_contentDidChange:function(){this.invokeOnce(this._updateEmphasis)}.observes("content")});
Cv.excludeListController=SC.ObjectController.create({content:null,contentBindingDefault:SC.Binding.oneWay(),originalityIsActive:NO,originalityIsActiveBinding:"Cv.originalityController.isActive",originalityIsActiveBindingDefault:SC.Binding.oneWay(),_updateContent:function(){var a=this.get("originalityIsActive");
if(a){var b=Cv.originalityController.get("excludeList");if(b){this.set("content",b)
}else{if(!this.contentBinding){this.contentBinding=this.bind("content","Cv.originalityController.excludeList")
}}}else{if(this.contentBinding){this.contentBinding.disconnect();this.contentBinding=null
}this.set("content",null)}}.observes("originalityIsActive"),_excludeListDidLoad:function(){if(this.excludeListBinding){this.excludeListBinding.disconnect();
this.excludeListBinding=null}}.observes("content","isLoaded"),_excludeListDidLoadAfterCommitting:function(){var a=this.get("status");
if(this._committingExcludeList&&(a&SC.Record.READY)){this._committingExcludeList=NO;
Cv.originalityController.unloadData();Cv.originalityDataTreeController.set("isExcludingSources",NO);
var b=Cv.originalityController.get("mode");if(b===Cv.originalityController.SINGLE_SOURCE_MODE){this.invokeLast(function(){Cv.originalityDataTreeController.updateContentIfNeeded()
})}else{if(b===Cv.originalityController.RESEARCH_MODE){Cv.originalityController.set("mode",Cv.originalityController.CUMULATIVE_MODE)
}}}}.observes("content","status"),addExcludeSources:function(b){var a=this.get("content");
var c=a.get("sources");c=c.concat(b);a.set("sourcesData",c);this._committingExcludeList=YES;
a.commitRecord()}});sc_require("controllers/exclude_list");Cv.excludeSourcesController=SC.ArrayController.create({content:null,excludeList:null,excludeListBinding:"Cv.excludeListController.content",excludeListBindingDefault:SC.Binding.oneWay(),excludeListSources:null,excludeListSourcesBinding:"Cv.excludeListController.sources",excludeListSourcesBindingDefault:SC.Binding.oneWay(),didRestoreSource:null,_updateContent:function(){var b=null;
var a=this.get("excludeListSources");if(a){b=a.map(function(e){var c=SC.Object.create({data:e,treeItemIsChecked:NO});
return c},this)}this.set("content",b)}.observes("excludeList","excludeListSources")});
Cv.loadingViewController=SC.ObjectController.create({isShowing:null});Cv.MarkCriterionSelectionDelegate=SC.merge(SC.DelegateSupport,SC.CollectionViewDelegate,{isMarkCriterionSelectionCollectionViewDelegate:YES,mark:null,contentBinding:".mark.content",collectionViewShouldDeselectIndexes:function(a,c){var b=this;
a.get("content").forEach(function(e){var f=a.itemViewForContentObject(e);if(c.contains(f.get("contentIndex"))){b.removeCriterion(e);
f.$().removeClass("sel")}});return c},collectionViewShouldSelectIndexes:function(a,c,f){var e=this.get("lastSelectionId"),b=this;
a.get("content").forEach(function(g){var h=a.itemViewForContentObject(g),i=((g.get("id")===e)&&c.contains(h.get("contentIndex")));
if(i){b.set("lastSelectionId",null)}if(c.contains(h.get("contentIndex"))){b.addCriterion(g);
b.set("lastSelectionId",g.get("id"))}else{b.removeCriterion(g);h.$().removeClass("sel")
}});return c},lastSelectionId:null,removeMarkCriteriaAssociations:function(){var a=this.getPath("mark.content.markCriteria"),b=this;
a.forEach(function(e){if(e.get("status")===SC.Record.DESTROYED_CLEAN){return}b.removeCriterion(e.get("criterion"))
});this.userSavedChanges();if(this.getPath("mark.content.markCriteria.length")>0){var c=a.filter(function(e){if([SC.Record.BUSY_DESTROYING,SC.Record.DESTROYED,SC.Record.DESTROYED_DIRTY,SC.Record.DESTROYED_CLEAN].indexOf(e.getPath("status"))>-1){return e
}});c.forEach(function(e){b.getPath("mark.content.markCriteria").removeObject(e)});
this.getPath("mark.content").commitRecord()}},collectionViewClearContentViewSelections:function(a){a.get("content").forEach(function(c){var e=a.itemViewForContentObject(c);
e.set("isSelected",NO);e.$().removeClass("sel")},this);var b=SC.SelectionSet.create();
a.set("selection",b.freeze())},collectionViewSetInitialContentViewSelections:function(b){if(this.getPath("mark.content")){var c=(this.getPath("mark.content.markCriteria.length")>0)?this.getPath("mark.content.markCriteria"):this.getPath("deferredMarkCriteria.objectsToAdd")||[];
var a=this;c.forEach(function(e){if(e.getPath("criterion.id")===undefined){return
}var f=b.get("content").filterProperty("id",e.getPath("criterion.id"));f.forEach(function(h){var g=b.itemViewForContentObject(h);
g.set("isSelected",YES);a.set("lastSelectionId",h.get("id"))})})}},addCriterion:function(e){var g=this.get("content");
var b=g.get("markCriteria");markCriterion=Cv.findMarkCriterionFromMarkCriteriaArray(b,g,e);
if(markCriterion){var c=this.getPath("deferredMarkCriteria.objectsToRemove");if(c.indexOf(markCriterion)!==-1){c.removeObject(markCriterion)
}return markCriterion}var f=this.getPath("deferredMarkCriteria.objectsToAdd");markCriterion=Cv.findMarkCriterionFromMarkCriteriaArray(f,g,e);
if(!markCriterion){var a={mark:g,read:g.getPath("read"),criterion:e};markCriterion=SC.Object.create(a);
f.pushObject(markCriterion)}},removeCriterion:function(i){var c=this.get("content"),g=c.get("markCriteria"),f=NO,e=NO,k=NO,b=NO;
var a=Cv.findMarkCriterionFromMarkCriteriaArray(g,c,i);if(a){f=YES;var h=this.getPath("deferredMarkCriteria.objectsToRemove");
if(h.indexOf(a)===-1){h.pushObject(a);a=Cv.findMarkCriterionFromMarkCriteriaArray(h,c,i);
if(a){e=YES}}}var j=this.getPath("deferredMarkCriteria.objectsToAdd");a=Cv.findMarkCriterionFromMarkCriteriaArray(j,c,i);
if(a){k=YES;j.removeObject(a);a=Cv.findMarkCriterionFromMarkCriteriaArray(j,c,i);
if(!a){b=YES}}if((f===e)&&(k===b)){return YES}else{return NO}},deferredMarkCriteria:function(){return SC.Object.create({objectsToAdd:[],objectsToRemove:[]})
}.property().cacheable(),selectionSet:null,userSavedChanges:function(){var a=this;
if(this.getPath("deferredMarkCriteria.objectsToAdd.length")>0||this.getPath("deferredMarkCriteria.objectsToRemove.length")>0){if(this.getPath("deferredMarkCriteria.objectsToRemove.length")>0){this.getPath("deferredMarkCriteria.objectsToRemove").forEach(function(b){a.destroyMarkCriterion(b.get("mark"),b.get("criterion"))
});this.setPath("deferredMarkCriteria.objectsToRemove",[])}if(this.getPath("deferredMarkCriteria.objectsToAdd.length")>0){this.getPath("deferredMarkCriteria.objectsToAdd").forEach(function(b){a.createMarkCriterion(b.get("mark"),b.get("criterion"))
});this.setPath("deferredMarkCriteria.objectsToAdd",[])}}},userCancelledChanges:function(){this.setPath("deferredMarkCriteria.objectsToRemove",[]);
this.setPath("deferredMarkCriteria.objectsToAdd",[])},createMarkCriterion:function(b,a){Cv.getOrCreateMarkCriterion(b,a)
},destroyMarkCriterion:function(b,a){Cv.removeMarkCriterion(b,a)}});sc_require("mixins/mark_criterion_selection_delegate");
Cv.MarkCriterionSelectionController=SC.Controller.extend({getMarkCriterionSelectionViewDelegate:function(e){if(!e){return
}var c=SC.guidFor(e);var a=this.get("_criterionDelegateMap");var b=a[c];if(!b){b=SC.Object.create(Cv.MarkCriterionSelectionDelegate,{mark:e});
a[c]=b}return b},_criterionDelegateMap:function(){return{}}.property().cacheable()});
Cv.markSetController=SC.ObjectController.create(Cv.MarkSet,{contentBinding:"Cv.gradeMarkController.read",activeComment:null,reconciled:YES,rubric:null,rubricBinding:"Cv.rubricController.content",rubricBindingDefault:SC.Binding.oneWay(),reads:null,readsBinding:"Cv.gradeMarkController.reads",readsBindingDefault:SC.Binding.oneWay(),createComment:function(b){b.read=this.getPath("content.id");
var c;if(b.highlight){var a=b.highlight;a.paper=this.getPath("content.paper.id");
c=Cv.store.createRecord(Cv.GlyphHighlight,a);delete b.highlight}b.position_x=Math.max(Math.ceil(b.x),0);
b.position_y=Math.max(Math.ceil(b.y),0);b.page=b.page;var e=Cv.store.createRecord(Cv.Comment,b);
if(b.isEditing!==undefined){e.set("isEditing",b.isEditing)}if(b.isExpanded!==undefined){e.set("isExpanded",b.isExpanded)
}if(c){c.set("mark",e);c.commitRecordWhenReady()}this.set("activeComment",e);return e
},createStrikethrough:function(j){var i=Cv.paperTextSelectionController.get("textSelectionHighlight");
if(!i){return YES}var m=i.get("startGlyph");var h=i.get("endGlyph");var c=m.get("address");
var g=h.get("address");var f={start_line:c.line,start_glyph:c.glyph,start_page_index:c.page,end_line:g.line,end_glyph:g.glyph,end_page_index:g.page};
var e=Cv.store.createRecord(Cv.GlyphHighlight,f);var l=Math.max(Math.ceil(j.x),0);
var k=Math.max(Math.ceil(j.y),0);var a={position_x:l,position_y:k,page:c.page+1,read:this.getPath("content.id")};
var b=Cv.store.createRecord(Cv.Strikethrough,a);b.set("highlight",e);e.set("mark",b);
e.commitRecordWhenReady();b.commitRecord();Cv.paperTextSelectionController.clearTextSelectionHighlight();
return b},createQuickMark:function(b,f){b.read=this.getPath("content.id");var e;if(b.highlight){var a=b.highlight;
a.paper=this.getPath("content.paper.id");e=Cv.store.createRecord(Cv.GlyphHighlight,a);
delete b.highlight}b.position_x=Math.max(Math.ceil(b.x),0);b.position_y=Math.max(Math.ceil(b.y),0);
b.page=b.page;b.qm_template=b.template;b.comment="";var c=Cv.store.createRecord(Cv.QuickMark,b);
if(b.isEditing!==undefined){c.set("isEditing",b.isEditing)}if(b.isExpanded!==undefined){c.set("isExpanded",b.isExpanded)
}if(f){c.set("template",f)}if(e){e.set("mark",c);e.commitRecordWhenReady()}c.commitRecordWhenReady();
this.set("activeComment",null);return c},createInlineComment:function(a){a.read=this.getPath("content.id");
a.position_x=Math.max(Math.ceil(a.x),0);a.position_y=Math.max(Math.ceil(a.y),0);a.page=a.page;
var b=Cv.store.createRecord(Cv.InlineComment,a);if(a.isEditing!==undefined){b.set("isEditing",a.isEditing)
}this.set("activeComment",null);return b},destroyComment:function(a){this.invokeLast(function(){if(a){a.deleteMarkAndSubObjects()
}})},destroyQuickMark:function(a){this.invokeLast(function(){if(a){a.deleteMarkAndSubObjects()
}})},destroyStrikethrough:function(a){this.invokeLast(function(){if(a){a.deleteMarkAndSubObjects()
}})},destroyGm3Highlight:function(a){this.invokeLast(function(){a.destroy();a.commitRecord()
})},commentCount:function(){var b=null;var a=this.getPath("reads.length");if(a){b=this.getPath("comments.length");
if(Cv.paperController.getPath("content.isEditable")){Cv.paperController.setIfChanged("gradeMarkCommentCount",b)
}}return b}.property().cacheable(),commentCountDidChange:function(){this.setIfChanged("commentCount",this.getPath("comments.length"))
}.observes("*comments.length"),inlineCommentCount:function(){return this.getPath("inlineComments.length")
}.property().cacheable(),commentAndInlineCount:function(){var b=this.get("inlineCommentCount")||0,a=this.get("commentCount")||0;
return b+a}.property("commentCount","inlineCommentCount").cacheable(),inlineCommentCountDidChange:function(){this.setIfChanged("inlineCommentCount",this.getPath("inlineComments.length"))
}.observes("*inlineComments.length"),quickMarkCount:function(){var b=null;var a=this.getPath("reads.length");
if(a){b=this.getPath("quickMarks.length");if(Cv.paperController.getPath("content.isEditable")){Cv.paperController.setIfChanged("gradeMarkQuickMarkCount",b)
}}return b}.property().cacheable(),quickMarkCountDidChange:function(){this.setIfChanged("quickMarkCount",this.getPath("quickMarks.length"))
}.observes("*quickMarks.length"),_updatedDidChange:function(){if(!this.get("reconciled")){this.set("reconciled",YES);
Cv.store.refreshRecord(Cv.Read,this.getPath("paper.id"))}}.observes("reconciled"),_updateRubricScoring:function(){var e=this.get("content");
var c=this.get("rubric");if(!e||!c||!e.get("isLoaded")||!c.get("isLoaded")){return
}if(e.getPath("paper.assignment.rubric")!==c){return}var a=this.get("rubricScoring");
if(!a||(a.get("isLoaded")&&(a.get("rubric")!==c))){var b={rubric:c.get("id"),read:this.get("id"),score_lookup:{}};
a=Cv.store.createRecord(Cv.RubricScoring,b);this.set("rubricScoring",a)}}.observes("content","rubric"),_rubricDidLoad:function(){if(this.getPath("rubric.isLoaded")){this._updateRubricScoring()
}}.observes("Cv.rubricController.isLoaded")});sc_require("controllers/mark_set");
Cv.markListController=SC.TreeController.create({treeItemIsGrouped:YES,content:null,expandedPages:[],loadingPages:[],paper:null,paperBinding:"Cv.paperController.content",_prevPaper:null,paperDidChange:function(){var a=this.get("paper");
if(a!=this._prevPaper){this.set("expandedPages",[]);this.set("loadingPages",{});this._prevPaper=a
}}.observes("paper"),_updateContent:function(){var g=Cv.gradeMarkController.get("isActive");
if(!g||!Cv.gradeMarkController.get("isShowingMarkList")){return}var b=Cv.markSetController.get("content");
if(b){var m=[];var f=Cv.paperController.getPath("pages.length");var k=this.get("expandedPages");
var a=this.get("loadingPages");for(var j=0;j<f;j++){var h=Cv.markSetController.pageMarkSet(j);
var e=h.get("pageIndex");if(Cv.markSetController.isPageLoaded(e)){a[e]=NO}var c=SC.Object.create({marks:h.get("marks"),pageIndex:e,text:function(){return"_PAGE %@".loc(this.get("pageIndex")+1)
}.property("pageIndex").cacheable(),count:Cv.markSetController.pageVisibleMarkCount(h.get("pageIndex"))||"0",isLoading:!!a[e],treeItemIsExpanded:!!k[e],treeItemChildren:function(){return this.get("marks").sortProperty("y","x","id")
}.property("marks").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.checkExpandedLoadingStates()},checkExpandedLoadingStates:function(){var n=this.get("pageIndex");
var p=this.get("treeItemIsExpanded");if(p&&!Cv.markSetController.isPageLoaded(n)){Cv.markSetController.loadPageMarks(n);
this.set("isLoading",YES)}else{this.set("isLoading",NO)}var i=Cv.markListController.get("loadingPages");
i[n]=this.get("isLoading");var o=Cv.markListController.get("expandedPages");o[n]=p
}.observes("treeItemIsExpanded")});m.push(c)}var l=SC.Object.create({treeItemIsExpanded:YES,treeItemChildren:m});
this.set("content",l)}else{this.set("content",null)}},_invokeContentUpdate:function(){this.invokeOnce(this._updateContent)
}.observes("Cv.markSetController*marks.[]","Cv.gradeMarkController.isShowingMarkList","Cv.gradeMarkController.isActive"),updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");
if(!a){var c=this.get("selection");var b=c.get("isFrozen");if(b){c.set("isFrozen",NO)
}c.clear();if(b){c.set("isFrozen",YES)}}else{arguments.callee.base.apply(this,arguments)
}return this}});Cv.originalityActiveMatchGroupsController=SC.ArrayController.create({content:null,matchGroups:null,matchGroupsBinding:"Cv.originalityMatchGroupsController.content",matchGroupsBindingDefault:SC.Binding.oneWay(),selectedNode:null,selectedNodeBinding:"Cv.originalityDataTreeController.selectedNode",selectedNodeBindingDefault:SC.Binding.oneWay(),_matchGroupsDidChange:function(){var c=this.get("selectedNode");
var a=this.get("matchGroups");var b=[];if(c&&a){b=c.getPath("data.matchGroups");if(b&&(!SC.kindOf(b,SC.RecordArray)||(b.get("status")&SC.Record.READY))){b=b.map(function(e){return e
});b.forEach(function(e){if(a.indexOf(e)===-1){a.pushObject(e)}})}}this.set("content",b)
}.observes("matchGroups"),_activeMatchGroupRecordArrayDidChange:function(){var b=this.get("content");
if(SC.kindOf(b,SC.RecordArray)&&(b.get("status")&SC.Record.READY)){b=b.map(function(c){return c
});var a=this.get("matchGroups");b.forEach(function(c){if(a.indexOf(c)===-1){a.pushObject(c)
}});this.set("content",b)}}.observes("status"),_selectedNodeDidChange:function(){var b=Cv.originalityController.get("mode");
if(b===Cv.originalityController.CUMULATIVE_MODE){var a=this.getPath("selectedNode.data.matchGroups.firstObject");
if(a){Cv.originalityMatchGroupController.scrollToPageView(a)}}}.observes("selectedNode")});
Cv.PageServicesView=SC.View.extend({servicesController:null,paperPage:null,zoomController:null,classNames:["page-services-view"],_serviceViews:null,isLoadingData:NO,createChildViews:function(){var a=[];
this.originalityPageView=this.createServiceView(Cv.originalityController);a.push(this.originalityPageView);
this.gradeMarkPageView=this.createServiceView(Cv.gradeMarkController);a.push(this.gradeMarkPageView);
this.peerMarkPageView=this.createServiceView(Cv.peerMarkController);a.push(this.peerMarkPageView);
this.set("childViews",a)},createServiceView:function(a){var b=a.get("servicePageViewClass");
var e=a.get("id");var c=this._serviceViews[e];if(!c){var f=this.get("frame");c=this.createChildView(b.design({layout:function(){var g={top:0,left:0,height:f.height};
if(!SC.browser.isIE||!SC.browser.compareVersion(7)==0){g.width=f.width}return g}(),paperPageBinding:".parentView.paperPage",zoomControllerBinding:".parentView.zoomController",_paperPageDidChange:function(){var h=this.get("paperPage");
var k=this.get("zoomController");if(h){var j=h.get("width");var g=h.get("height");
j=k.getZoomedValue(j);g=k.getZoomedValue(g);var i={height:g};if(!SC.browser.isIE||(SC.browser.isIE&&!SC.browser.compareVersion(7)==0)){i.width=j
}this.adjust(i)}}.observes("paperPage")}));this._serviceViews[e]=c;c.addObserver("isLoadingData",this,"_servicePageViewIsLoadingDataDidChange")
}return c},init:function(){this._serviceViews={};arguments.callee.base.apply(this,arguments)
},activeServiceView:function(){var b=this.getPath("servicesController.activeService.id");
var a=this._serviceViews[b];return a}.property(".servicesController*activeService").cacheable(),mouseDown:function(b){var c=NO;
var a=this.get("activeServiceView");if(a){c=a.tryToPerform("mouseDown",b)}return c
},mouseUp:function(b){var c=NO;var a=this.get("activeServiceView");if(a){c=a.tryToPerform("mouseUp",b)
}return c},mouseDragged:function(b){var c=NO;var a=this.get("activeServiceView");
if(a){c=a.tryToPerform("mouseDragged",b)}return c},_servicePageViewIsLoadingDataDidChange:function(f,c,e){var h=NO;
for(var g in this._serviceViews){var b=this._serviceViews[g];var a=b.get("isLoadingData");
if(a){h=YES;break}}this.set("isLoadingData",h)}});Cv.LineHighlightView=SC.LabelView.extend({startGlyph:null,endGlyph:null,zoomController:null,classNames:["line-highlight"],highlightColor:"red",displayProperties:["classNames","highlightColor"],isBright:YES,isFirstLineHighlight:NO,isLastLineHighlight:NO,backgroundColor:function(){return this.get("highlightColor")
}.property("highlightColor").cacheable(),layout:function(){var f={top:0,left:0};var a=this.get("zoomController");
var k=this.get("startGlyph");var g=this.get("endGlyph");var h=k.get("top")-5;var e=k.get("left")-5;
var b=g.get("bottom")+10;var i=g.get("right")+10;var j=(b-h);var c=(i-e);f={top:h,left:e,height:j,width:c};
f=a.getZoomedLayout(f);return f}.property("startGlyph","endGlyph","zoomController").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this._isBrightDidChange()},_isBrightDidChange:function(){var a=this.get("isBright");
var b=this.get("classNames").concat();b.removeObject("bright-highlight");b.removeObject("dim-highlight");
if(a){b.pushObject("bright-highlight")}else{b.pushObject("dim-highlight")}this.set("classNames",b)
}.observes("isBright"),_isFirstLineHighlightDidChange:function(){var a=this.get("isFirstLineHighlight");
var b=this.get("classNames").concat();if(a){b.pushObject("first-line-highlight")}else{b.removeObject("first-line-highlight")
}this.set("classNames",b)}.observes("isFirstLineHighlight"),_isLastLineHighlightDidChange:function(){var a=this.get("isLastLineHighlight");
var b=this.get("classNames").concat();if(a){b.pushObject("last-line-highlight")}else{b.removeObject("last-line-highlight")
}this.set("classNames",b)}.observes("isLastLineHighlight")});sc_require("views/line_highlight");
Cv.HighlightView=SC.View.extend(SC.ContentDisplay,{content:null,zoomController:null,paperPage:null,colorBinding:".content.color",label:null,layout:{top:0,left:0,height:0,width:0},classNames:["highlight-view"],isBright:YES,displayProperties:["isBright","classNames","color","gradeMarkIsActive"],contentDisplayProperties:["startGlyphAddress","endGlyphAddress","markIsExpanded"],gradeMarkIsActiveBinding:"Cv.gradeMarkController.isActive",gradeMarkIsVisibleBinding:"Cv.gradeMarkController.isVisible",isEmphasizedBinding:".content.isEmphasized",isEmphasizedDidChange:function(){if(this.get("isEmphasized")){this.addClassName("focused")
}else{this.removeClassName("focused")}}.observes("isEmphasized"),addClassName:function(a){if(!this.hasClassName(a)){var b=this.get("classNames").concat(a);
this.set("classNames",b)}},removeClassName:function(a){if(this.hasClassName(a)){var b=this.get("classNames").concat()||[];
b.removeObject(a);this.set("classNames",b)}},hasClassName:function(b){var c=this.get("classNames");
var a=(c&&(c.indexOf(b)!==-1));return a},mouseEntered:function(){arguments.callee.base.apply(this,arguments);
var a=this.getPath("content.mark");if(a){a.set("isHoveringHighlight",YES)}},mouseExited:function(){arguments.callee.base.apply(this,arguments);
var a=this.getPath("content.mark");if(a){a.set("isHoveringHighlight",NO)}},pageIndex:function(){var a=this.getPath("paperPage.index");
if(!a&&(a!==0)){a=-1}return a}.property("paperPage").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("content");if(a){this._notifyPropertyObservers("content")}},isFirstViewForHighlight:function(){var f=NO;
var c=this.get("content");var a=this.get("pageIndex");if(c&&(a!==-1)){var b=this.getPath("content.startGlyphAddress");
var e=b.page;f=(e===a)}return f}.property("content","pageIndex").cacheable(),isLastViewForHighlight:function(){var e=NO;
var c=this.get("content");var b=this.get("pageIndex");if(c&&(b!==-1)){var a=this.getPath("content.endGlyphAddress");
var f=a.page;e=(f===b)}return e}.property("content","pageIndex").cacheable(),_contentDidChange:function(){var b=this.get("classNames").toArray();
if(this._previousMarkClassName){b.removeObject(this._previousMarkClassName)}var e=this.getPath("content.mark");
if(e){var a=e.constructor.resourceName;var c="mark-type-%@".fmt(a);b.pushObject(c);
this._previousMarkClassName=c}this.set("classNames",b)}.observes("content"),scrollToVisible:function(){var o=this.get("parentView");
while(o&&!o.get("isScrollable")){o=o.get("parentView")}if(o){var e=this.get("pageIndex");
var h=this.boundsOnPage(e);var c=this.get("content");if(c.startsOnPage(e)){var l=h.x+Cv.HighlightView.LABEL_OFFSET_X;
var j=h.y+Cv.HighlightView.LABEL_OFFSET_Y;var k=Cv.HighlightView.LABEL_OFFSET_WIDTH;
var f=Cv.HighlightView.LABEL_OFFSET_HEIGHT;var i={x:l,width:k,y:j,height:f};h=SC.unionRects(h,i)
}var a=this.get("zoomController");h=a.getZoomedLayout(h);var p=o.get("contentView");
var b=p.convertFrameFromView(h,this.get("parentView"));var g=p.get("clippingFrame");
var n;var m;if(g.height>=b.height){n=b.x;m=b.y+b.height;if(!SC.pointInRect({x:n,y:m},g)){o.scrollTo(n,m)
}g=SC.cloneRect(g);g.x+=n;g.y+=m}n=b.x;m=b.y;if(!SC.pointInRect({x:n,y:m},g)){o.scrollTo(n,m)
}return YES}else{return NO}},render:function(c,m){if(this.getPath("content.isDestroyed")){return
}try{if(this.get("isBright")){c.addClass("bright-highlight")}else{c.addClass("dim-highlight")
}if(this.getPath("content.markIsExpanded")){c.addClass("mark-expanded")}var u=[];
var j=this.get("content");var q=this.get("pageIndex");if(!j.isOnPage(q)){return}var b=this._getGlyphAddressesForPage();
var t=b.start.lineIndex;var x=b.end.lineIndex;for(var v=t;v<=x;v++){var g=this.getPath("content.startGlyphAddress");
var A=Cv.paperTextSelectionController.getPageViewForGlyphAddress(g);var a=A.getPath("content.glyphPage");
var k=a.getLine(v);var h=a.get("isRightToLeft");var p=k.get("isRightToLeft");var f=this._getGlyphsForLine(b,v);
var o=f.start;var l=f.end;if(o&&l){var w=(v===t);var z=(v===x);this._renderLine(u,o,l,w,z,p,h)
}}if(this.get("isFirstViewForHighlight")){var n=this.getPath("content.label")||this.get("label");
if(this.isLabelValid(n)){var s=j.get("startGlyph");this._renderLabel(u,s)}}var i=u.join("");
c.push(i)}catch(B){var y=this.getPath("content.mark.read");if(y&&y.respondsTo("highlightViewRenderDidFail")){y.highlightViewRenderDidFail(this)
}}},_renderLabel:function(i,m){var g=m.getPath("glyphLine.isRightToLeft");var b=this.get("content");
var k=b.get("label")||this.get("label");var c=this.get("color")||b.get("color");var a=this.get("zoomController");
var j=m.get("top")+Cv.HighlightView.LABEL_OFFSET_Y;var f=(g?m.get("right"):m.get("left"))+Cv.HighlightView.LABEL_OFFSET_X;
j=a.getZoomedValue(j);f=a.getZoomedValue(f);var h=Cv.HighlightView.LABEL_OFFSET_WIDTH;
var l=Cv.HighlightView.LABEL_OFFSET_X;var e=Cv.HighlightView.LABEL_OFFSET_HEIGHT;
i.push('<div class="highlight-label" style="');i.push("top:");i.push(j);i.push("px;");
i.push("height:");i.push(e);i.push("px;");if(g){i.push("left:"+(f-h-l+1))}else{i.push("left:"+f)
}i.push("px;");if(c){i.push("background:");i.push(c);i.push(";")}i.push('">');i.push(k);
i.push("</div>")},markView:null,_renderLine:function(n,h,f,p,s,k,b){var u={top:0,left:0};
var i=this.get("zoomController");if(k){var l=f.get("top");var c=f.get("left");var g=h.get("bottom");
var v=h.get("right");var m=(g-l);var o=(v-c)}else{var l=h.get("top");var c=h.get("left");
var g=f.get("bottom");var v=f.get("right");var m=(g-l);var o=(v-c)}u={top:l,left:c,height:m,width:o};
u=i.getZoomedLayout(u);var q;var w=Cv.config.HIGHLIGHT_COLORS;try{var j=this.getPath("content.color")||this.get("color");
var a=Cv.getHighlightColorObjectForValue(j);if(this.getPath("content.highlightOverrideDefaultColor")){q=null
}else{q=a.hex;if(!this.get("gradeMarkIsActive")&&this.get("gradeMarkIsVisible")&&(!this.get("highlightOverrideDefaultColor"))){q=w[Cv.get("defaultHighlightColorIndex")].hex
}}}catch(t){}n.push('<div class="line-highlight');if(p){n.push(" first-line-highlight")
}if(s){n.push(" last-line-highlight")}n.push('" style="');n.push("top:");n.push(u.top);
n.push("px;");n.push("height:");n.push(u.height);n.push("px;");n.push("left:");n.push(u.left);
n.push("px;");n.push("width:");n.push(u.width);n.push("px;");if(q){n.push("background:"+q+";");
n.push("border: 1px solid "+q+";")}n.push('"><div class="line-highlight-liner">&nbsp;</div></div>')
},getHighlightFirstLine:function(){var m=this.getPath("content.startGlyphAddress");
var g=this.getPath("content.endGlyphAddress");var k=Cv.paperTextSelectionController.getPageViewForGlyphAddress(m);
var f=k.getPath("content.glyphPage");var l=f.getLine(m.line);var i=l.glyphCount();
var j={start:{page:m.page,line:m.line,glyph:m.glyph},end:{page:g.page,line:g.line,glyph:g.glyph}};
if((m.line<g.line)||(m.page!=g.page)){j.end.page=m.page;j.end.line=m.line;j.end.glyph=i-1
}var s=l.getGlyph(j.start.glyph);var n=l.getGlyph(j.end.glyph);var o=s.get("top");
var h=s.get("left");var b=n.get("bottom");var p=n.get("right");var q=(b-o);var e=(p-h);
var c=h+(e/2);var a={top:o,left:h,right:p,height:q,width:e,tdc:c};return a},_getGlyphAddressesForPage:function(){var h=this.get("content");
var c=this.getPath("paperPage.glyphPage");var g=h.get("startGlyphAddress");var a=h.get("endGlyphAddress");
var t=g.page;var m=g.line;var j=g.glyph;var n=c.getLine(m);var b=a.page;var o=a.line;
var l=a.glyph;var q=c.getLine(o);var k=this.get("pageIndex");if(t<k){m=0;j=0}if(b>k){var i=c.get("lastLine");
var f=c.get("lineCount")-1;var s=i.get("glyphCount")-1;var p=c.getLine(f);var s=(p.get("glyphCount")-1);
o=f;l=s}var e={start:{lineIndex:m,glyphIndex:j},end:{lineIndex:o,glyphIndex:l}};return e
},_getGlyphsForLine:function(f,m){var h=f.start.pageIndex;var l=f.start.lineIndex;
var g=f.start.glyphIndex;var c=f.end.pageIndex;var j=f.end.lineIndex;var a=f.end.glyphIndex;
var o=null;var i=null;var b=this.getPath("paperPage.glyphPage");var n=b.getLine(m);
var e=n.get("glyphCount");if(m>l){g=0}if(m<j){if(g<0){g=0}else{if(g>=e){g=e-1}}o=n.getGlyph(g);
i=n.get("lastGlyph")}else{if(g<0){g=0}else{if(g>=e){g=e-1}}if(a<0){a=0}else{if(a>=e){a=e-1
}}o=n.getGlyph(g);i=n.getGlyph(a)}var k={start:o,end:i};return k},boundsOnPage:function(h){var b=null;
var g=this.get("content");if(g.isOnPage(h)){var n;var i;var e=this.getPath("paperPage.glyphPage");
var l=g.startsOnPage(h);if(l){n=g.get("startGlyphAddress").line}else{n=0}var c=g.endsOnPage(h);
if(c){endLineIndex=g.get("endGlyphAddress").line}else{endLineIndex=e.getPath("lastLine.lineIndex")
}for(var o=n;o<=endLineIndex;o++){if((o===n)&&l){startGlyph=g.get("startGlyph")}else{startGlyph=e.getGlyph(o,0)
}if((o==endLineIndex)&&c){endGlyph=g.get("endGlyph")}else{var j=e.getLine(o);endGlyph=j.get("lastGlyph")
}var k=startGlyph.get("top");var a=endGlyph.get("bottom");var f=startGlyph.get("left");
var m=endGlyph.get("right");if(!b){b={top:k,bottom:a,left:f,right:m}}else{b.top=Math.min(b.top,k);
b.bottom=Math.max(b.bottom,a);b.left=Math.min(b.left,f);b.right=Math.max(b.right,m)
}}b={x:b.left,width:b.right-b.left,y:b.top,height:b.bottom-b.top}}return b},isLabelValid:function(a){var b=NO;
if(a||(a===0)){b=YES}return b},getClosestEdgeTo:function(m){var b=this.get("content");
var c=this.get("pageIndex");if(!b.isOnPage(c)){return}var e=this._getGlyphAddressesForPage();
var n=e.start.lineIndex;var j=e.end.lineIndex;var a;for(var o=n;o<=j;o++){var l=this._getGlyphsForLine(e,o);
var p=l.start;var i=l.end;var h=Cv.zoomController.getZoomedLayout({left:p.get("left"),top:p.get("top")});
var g=Cv.zoomController.getZoomedLayout({left:i.get("right"),top:i.get("top")});var f=Cv.zoomController.getZoomedLayout({left:p.get("left"),top:p.get("top")+p.get("height")});
var k=Cv.zoomController.getZoomedLayout({left:i.get("right"),top:i.get("top")+p.get("height")});
[h,g,k,f].forEach(function(t){var s=Math.abs(m.x-t.left);var q=Math.abs(m.y-t.top);
t.distance=Math.sqrt(s*s+q*q);if(!a||t.distance<a.distance){a=t}})}return a}});Cv.HighlightView.mixin({LABEL_OFFSET_X:-2,LABEL_OFFSET_Y:-20,LABEL_OFFSET_WIDTH:15,LABEL_OFFSET_HEIGHT:18});
Cv.StrikeableTextSelection={content:null,isKeyResponder:YES,acceptsFirstResponder:YES,fa:function(){if(this.get("isVisibleInWindow")){this.becomeFirstResponder()
}else{this.resignFirstResponder()}}.observes("isVisibleInWindow"),getCoordinatesForMark:function(){var a=this.getHighlightFirstLine();
return{y:a.top,x:a.tdc}},keyDown:function(a){var f=a.commandCodes()[0];if(f==="delete"||f==="backspace"){try{var b=this.getCoordinatesForMark();
Cv.markSetController.createStrikethrough(b)}catch(c){console.error(c)}return YES}}};
sc_require("views/page_services");sc_require("views/highlight");sc_require("views/page");
sc_require("mixins/strikeable_text_selection");Cv.PageView=SC.View.extend({zoomController:null,classNames:["page-view"],content:null,contentBindingDefault:SC.Binding.oneWay(),paperTextSelectionController:null,servicesController:null,activeServiceBinding:"Cv.servicesController.activeService",servicesViewIsLoadingData:NO,renderLayout:function(a,b){if((SC.browser.msie)&&(SC.browser.msie<8)){a.addStyle("z-index",this.get("zIndex"))
}arguments.callee.base.apply(this,arguments)},zIndex:function(){var a=this.get("activeService");
return(a&&a.get("id")==1)?this.get("pageIndex")+"":(this.getPath("content.paper.pages.length")-this.get("pageIndex"))+""
}.property("activeService").cacheable(),_activeServiceDidChange:function(){if((SC.browser.msie)&&(SC.browser.msie<8)){var a=this.get("layer");
if(a){a.style.zIndex=this.get("zIndex")}}}.observes("activeService"),pageIndex:function(){var a=this.getPath("content.index");
return a}.property("content").cacheable(),childViews:"imageView pageServicesView loadingView ".w(),loadingView:Ip.LoadingView.design({loadingText:"_Loading Page".loc(),classNames:["page-loading-view"],imageLoadingStatusBinding:".parentView.imageView.status",glyphPageIsLoadingBinding:".parentView.content.glyphPageIsLoading",showError:function(){var a=this.get("imageLoadingStatus");
return(a===SC.IMAGE_STATE_FAILED||a===SC.IMAGE_STATE_NONE)}.property("imageLoadingStatus").cacheable(),mainLoadingIsVisibleBinding:"Cv.loadingViewController.isShowing",servicesViewIsLoadingDataBinding:SC.Binding.oneWay(".parentView.servicesViewIsLoadingData"),isVisible:function(){if(this.get("mainLoadingIsVisible")){return NO
}var b=this.get("imageLoadingStatus");var f=(b===SC.IMAGE_STATE_LOADED);var c=this.get("glyphPageIsLoading");
var e=this.get("servicesViewIsLoadingData");var a=!f||c||e;return a}.property("imageLoadingStatus","glyphPageIsLoading","mainLoadingIsVisible","servicesViewIsLoadingData").cacheable()}),imageView:SC.View.design({layout:function(){return{top:0,left:0,height:this.getPath("parentView.frame").height}
}.property().cacheable(),classNames:["sc-image-view"],displayProperties:["value","isVisibleInWindow"],valueBinding:".parentView.content.imageUrl",status:SC.IMAGE_STATE_NONE,paperControllerBinding:"Cv.paperController",isDoneLoading:function(){var a=this.get("status");
var b=(a===SC.IMAGE_STATE_LOADED);return b}.property("status").cacheable(),render:function(a,f){var c=this.get("isVisibleInWindow");
var e=this.get("frame");if(c&&e){var b=this.get("value");a.push("<img");a.push(' height="').push(e.height).push('"');
a.push(' width="').push(e.width).push('"');a.push(' src="').push(b).push('"');a.push(" />");
this.invokeLast(function(){this.set("status",SC.IMAGE_STATE_LOADING)},this)}},didCreateLayer:function(){this._attachImageListeners()
},didUpdateLayer:function(){this._detachImageListeners();this._attachImageListeners()
},willDestroyLayer:function(){var a=this.get("layer");if(a){this._detachImageListeners();
a.innerHTML=""}},_attachImageListeners:function(){var a=this.get("layer");if(a){var b=SC.$(a).find("img");
if(b.length>0){var c=b[0];c.onabort=this._imageDidAbort;c.onerror=this._imageDidError;
c.onload=this._imageDidLoad;c.imageView=this}}},_detachImageListeners:function(){var a=this.get("layer");
if(a){var b=SC.$(a).find("img");if(b.length>0){var c=b[0];c.onabort=null;c.onerror=null;
c.onload=null;c.parentView=null}}},_imageDidAbort:function(){SC.run(function(){this.imageView.set("status",SC.IMAGE_ABORTED_ERROR)
},this)},_imageDidError:function(){SC.run(function(){this.imageView.set("status",SC.IMAGE_STATE_FAILED)
},this)},_imageDidLoad:function(){SC.run(function(){this.imageView.set("status",SC.IMAGE_STATE_LOADED)
},this)}}),imageIsLoadedBinding:SC.Binding.bool(".imageView.isDoneLoading"),_updateTextSelectionHighlight:function(){var f=this.get("textSelectionHighlightView");
var i=NO;var g=this.getPath("paperTextSelectionController.paper");var a=this.getPath("content.paper");
if(g===a){var h=this.getPath("paperTextSelectionController.textSelectionHighlight");
var c=this.get("pageIndex");if(h&&h.isOnPage(c)){i=YES;var e=h.get("glyphAddress1");
var b=h.get("glyphAddress2");if(f){f.set("content",h)}else{var j=Cv.gradeMarkController.get("isActive")?Cv.StrikeableTextSelection:{};
f=this.createChildView(Cv.HighlightView.design(j,{classNames:["text-selection"],color:"#0080FF",content:h,zoomController:this.get("zoomController"),paperPage:this.get("content"),responderContext:Dv.mainPage.mainPane}));
this.insertBefore(f,this.get("pageServicesView"));this.set("textSelectionHighlightView",f)
}}}if(!i&&f){f.removeFromParent();this.set("textSelectionHighlightView",null)}}.observes("*paperTextSelectionController.textSelectionHighlight.glyphAddress2"),pageServicesView:Cv.PageServicesView.design({layout:function(){var e;
var b=this.get("paperPage");var g=this.get("zoomController");var c;var a;if(b&&g){c=b.get("width");
a=b.get("height");c=g.getZoomedValue(c);a=g.getZoomedValue(a)}else{var f=this.getPath("parentView.frame");
c=f.width;a=f.height}e={top:0,left:0,height:a,width:c};return e}.property("paperPage").cacheable(),servicesControllerBinding:".parentView.servicesController",paperPageBinding:".parentView.content",zoomControllerBinding:".parentView.zoomController",isLoadingDataBinding:".parentView.servicesViewIsLoadingData"}),getGlyphAt:function(a){var c=this.getPaperPagePoint(a);
var b=this.getPath("content.glyphPage");if(!b){return}var e=b.getGlyphAt(c.pageX,c.pageY);
return e},getGlyphNear:function(a,h,f){var c=this.getPaperPagePoint(a);var b=this.getPath("content.glyphPage");
var g=(h?Cv.GlyphPage.DIRECTION_UP_START:Cv.GlyphPage.DIRECTION_DOWN_END);var e=b.getGlyphNear(c.pageX,c.pageY,g,f);
return e},getPaperPagePoint:function(b){var a=b.pageX;var i=b.pageY;var g={x:a,y:i,width:0,height:0};
var h=this.convertFrameFromView(g,this.getPath("mainPage.mainPane"));var f=this.get("zoomController");
var e=f.getUnzoomedValue(h.x);var c=f.getUnzoomedValue(h.y);return{pageX:e,pageY:c}
}});Cv.SimpleCollectionView=SC.View.extend({content:null,_scv_itemViews:null,itemViewClass:SC.View,contentItemViewClassKey:null,classNames:"simple-collection-view".w(),_lazyCreateItemViews:NO,_needsUpdateWhenVisibleInWindow:NO,DEBUG:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._scv_itemViews={};this._scv_contentDidChange()},_updateItemViews:function(){SC.Observers.suspendPropertyObserving();
var j=this.get("content")||[];j=j.uniq();var n=(SC.typeOf(j.length)===SC.T_FUNCTION)?j.length():j.length;
if(n!==j.uniq().length){console.error("Simple colletion view: there are duplicated items in the content.")
}var k=this.get("childViews");var g=k.map(function(o){var p=o.get("content");var i=this.guidFor(p);
return i},this);var b=j.map(function(o){var i=this.guidFor(o);return i},this);var f=g.filter(function(o){var i=(b.indexOf(o)===-1);
return i});var c=j.filter(function(o){if(!o){return NO}var i=this.guidFor(o);var p=(g.indexOf(i)===-1);
return p},this);f.forEach(function(i){var o=this._scv_itemViews[i];this.removeChild(o);
o.destroy();delete this._scv_itemViews[i]},this);if(!this._lazyCreateItemViews){c.forEach(function(q){var p={};
var o=this.createItemView(q,p);this.appendChild(o);var i=this.guidFor(q);this._scv_itemViews[i]=o
},this)}if(this.DEBUG){var l=k.map(function(i){return this.guidFor(i.get("content"))
},this);var h=[];for(e in this._scv_itemViews){h.push(e)}if(l.length!==h.length){console.log("GUID arrays do not have the same length",this)
}for(var e=0;e<l.length;e++){var a=l[e];var m=h[e];if(a!==m){console.log("GUID arrays do not have the same content",this)
}}}SC.Observers.resumePropertyObserving()},_scv_contentDidChange:function(){if(this.get("isDestroyed")){return
}else{if(!this.get("isVisibleInWindow")){this._needsUpdateWhenVisibleInWindow=YES;
return}}this.invokeOnce(this._updateItemViews,this)}.observes("*content.[]"),_isVisibleInWindowDidChange:function(){var a=this.get("isVisibleInWindow");
if(a&&this._needsUpdateWhenVisibleInWindow){this._needsUpdateWhenVisibleInWindow=NO;
this.invokeOnce(this._updateItemViews,this)}}.observes("isVisibleInWindow"),guidFor:function(b){var a=SC.guidFor(b);
return a},createItemView:function(itemContent,attrs){var itemViewClass=null;var contentItemViewClassKey=this.get("contentItemViewClassKey");
if(contentItemViewClassKey){itemViewClass=itemContent.get(contentItemViewClassKey)
}if(!itemViewClass){itemViewClass=this.get("itemViewClass")}if(typeof itemViewClass=="string"){try{itemViewClass=eval(itemViewClass)
}catch(e){}}attrs.content=itemContent;var view=this.createChildView(itemViewClass,attrs);
return view},getItemViewFor:function(a){var b=this.guidFor(a);var c=this._scv_itemViews[b];
return c},getItemViewAt:function(b){var a=this.get("content").objectAt(b);var c=this.getItemViewFor(a);
return c}});sc_require("views/simple_collection");Cv.SimpleListView=Cv.SimpleCollectionView.extend({nowShowing:null,itemViewHeight:60,listEndBufferHeight:0,_lazyCreateItemViews:YES,classNames:"simple-list-view".w(),selection:null,_prevSelectedItems:null,_prevShowingItems:null,_prevNowShowingContent:null,init:function(){var a=arguments.callee.base.apply(this,arguments);
this.set("selection",SC.SelectionSet.create());this.set("nowShowing",SC.IndexSet.create());
return a},_resetItemViews:function(){var b=this.get("childViews");var a=b.map(function(e){var f=e.get("content");
var c=this.guidFor(f);return c},this);a.forEach(function(c){var e=this._scv_itemViews[c];
this.removeChild(e);e.destroy();e=null;delete this._scv_itemViews[c]},this);this._scv_itemViews={};
this._prevSelectedItems=null;this._prevShowingItems=null;this.set("nowShowing",null);
this._updateItemViews()},_updateItemViews:function(){arguments.callee.base.apply(this,arguments);
this.updateHeightIfNeeded();this.updateNowShowingIfNeeded()},updateHeightIfNeeded:function(){this.invokeOnce(this._updateHeight)
},_updateHeight:function(){var a=1;var b=this.getPath("content.length");if(b>0){var f=b-1;
var e=this._itemViewTop(f);var c=this._itemViewHeight(f);a=e+c+(this.listEndBufferHeight+0)
}this.adjust("height",a)},updateNowShowingIfNeeded:function(){this.invokeOnce(this._updateNowShowing)
},_updateNowShowing:function(){var c=this.get("nowShowing");var b=this.get("content");
var a=this._computeNowShowing();if(c&&c.isEqual(a)&&(b===this._prevNowShowingContent)){return
}else{this._prevNowShowingContent=b;this.set("nowShowing",a)}},_computeNowShowing:function(){var c=null;
if(this.get("content")){var g=this.get("clippingFrame");var e=SC.minY(g);var a=SC.maxY(g);
var f=this._itemIndexAt(e);var b=this._itemIndexAt(a);c=SC.IndexSet.create(f,(b-f)+1)
}return c},_selectionDidChange:function(){var e=this.get("content")||[];var g;var b=this._prevSelectedItems||[];
var c=this.get("selection")||SC.IndexSet.create();if(c){g=c.toArray()}else{g=[]}SC.Observers.suspendPropertyObserving();
var a=b.filter(function(i){var h=(g.indexOf(i)!==-1);return !h});var f=g.filter(function(h){var i=(b.indexOf(h)!==-1);
return !i});a.forEach(function(i){var h=this.getItemViewFor(i);if(h){h.set("isSelected",NO)
}},this);f.forEach(function(i){var h=this.getItemViewFor(i);if(h){h.set("isSelected",YES)
}},this);this._prevSelectedItems=g;SC.Observers.resumePropertyObserving()}.observes("*selection.[]"),_clippingFrameDidChange:function(){this.updateNowShowingIfNeeded()
}.observes("clippingFrame","selection"),_nowShowingDidChange:function(){var c=this.get("content");
if(!c){this._prevShowingItems=null;return}SC.Observers.suspendPropertyObserving();
var g=this.get("nowShowing");var f=[];if(g){g=g.clone();g.set("source",c);g.forEachObject(function(h){if(h){f.push(h)
}})}var b=this._prevShowingItems;var e=[];var a=[];if(b){b.forEach(function(h){if(f.indexOf(h)===-1){e.push(h)
}})}if(!b){a=f}else{f.forEach(function(h){if(b.indexOf(h)===-1){a.push(h)}},this)
}e.forEach(function(j){var h=this.guidFor(j);var i=this._scv_itemViews[h];if(i){this.removeChild(i);
i.destroy();delete this._scv_itemViews[h]}i=null},this);a.forEach(function(l){var j=this.getItemViewFor(l);
if(!j){var i=c.indexOf(l);var k={layout:this._itemViewLayout(i)};var h=this.guidFor(l);
j=this.createItemView(l,k);this._scv_itemViews[h]=j}this.appendChild(j)},this);if(f){f.forEach(function(l){var k=this.getItemViewFor(l);
if(!k){return}var i=k.get("layout").top;var j=c.indexOf(l);var h=this._itemViewTop(j);
if(i!==h){k.adjust("top",h)}},this)}this._prevShowingItems=null;if(f.length>0){this._prevShowingItems=f
}SC.Observers.resumePropertyObserving()}.observes("nowShowing"),itemIndexAt:function(b){var a=this._itemIndexAt(b);
return a},_itemIndexAt:function(e){var a=this.get("itemViewHeight");var b=(e-(e%a))/a;
var c=this.getPath("content.length");b=Math.min(b,c-1);return b},_itemViewTop:function(c){var b=this.get("itemViewHeight");
var a=c*b;return a},_itemViewHeight:function(b){var a=this.get("itemViewHeight");
return a},_itemViewLayout:function(c){var a=this._itemViewTop(c);var b=this._itemViewHeight(c);
var e={top:a,height:b,left:0,right:0};return e},createItemView:function(g,f){var c=this.get("content").indexOf(g);
var e=this.get("selection");f.isSelected=e.contains(g);var b=this.guidFor(this);var h=this.guidFor(g);
var a="%@-%@".fmt(b,h);f.layerId=a;return arguments.callee.base.apply(this,arguments)
},mouseDown:function(e){var b=this._itemViewForEvent(e);if(b){var c=b.get("content");
var a=SC.SelectionSet.create();a.addObject(c).freeze();this.set("selection",a);return YES
}return NO},_itemViewForEvent:function(c){var b=null;var f=c.target;var a=this.get("layer");
while(f&&a&&(a!==f)){var g=SC.$(f).attr("id");if(g){var e=g.slice(g.lastIndexOf("-")+1);
b=this._scv_itemViews[e];if(b){break}}f=f.parentNode}return b}});sc_require("views/page");
sc_require("views/simple_list");Cv.PageListView=Cv.SimpleListView.extend(SC.ContentDisplay,{TOP_PAGE_MARGIN:10,INTER_PAGE_MARGIN:25,listEndBufferHeight:0,classNames:["page-list-view"],isDropTarget:NO,paperView:null,paperViewBindingDefault:SC.Binding.oneWay(),contentBinding:"Cv.paperController.pages",contentBindingDefault:SC.Binding.oneWay(),servicesController:null,zoomController:null,zoomBinding:SC.Binding.oneWay(".zoomController.zoom"),firstPageHasLoadedBinding:".childViews.firstObject.imageView.isDoneLoading",_itemViewTopCache:null,itemViewClass:function(){return Cv.PageView.design({zoomController:this.get("zoomController"),servicesController:this.get("servicesController"),paperTextSelectionController:this.get("paperTextSelectionController")})
}.property().cacheable(),nowShowingPage:function(){var g=this.get("clippingFrame");
var c=g.y+(0.5*g.height);var f;var e=this.get("nowShowing");if(e){var b=e.get("max");
var a=this.getPath("content.length");if(b<=a){if(this._itemViewTop(b-1)<=c){f=b}else{f=b-1
}}}return f}.property("clippingFrame","nowShowing","content").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this._itemViewTopCache=[]},_resetItemViews:function(){arguments.callee.base.apply(this,arguments);
this._itemViewTopCache.length=0},updateNowShowingIfNeeded:function(){var a=this.get("parentView");
if(a){arguments.callee.base.apply(this,arguments)}},_computeNowShowing:function(){var c=arguments.callee.base.apply(this,arguments);
if(c){var a=c.get("min");if(a>0){a=a-1;c.add(a)}var b=c.get("max");if(b<this.getPath("content.length")){c.add(b)
}}return c},zoomDidChange:function(){this._resetItemViews()}.observes("content","zoom"),_itemIndexAt:function(g){var a=this.get("content");
var f=this.get("zoomController");var e=f.getZoomedValue(this.INTER_PAGE_MARGIN);var b=a.find(function(l,h){var i=this._itemViewHeight(h);
var m=this._itemViewTop(h);var j=m+i+e;if(this.listEndBufferHeight&&h===a.get("length")-1){j+=this.listEndBufferHeight
}var k=((g>=m)&&(g<=j));return k},this);var c=b?b.get("index"):-1;return c},_itemViewTop:function(f){var i=this._itemViewTopCache[f];
if((i===0)||i){return i}var a=this.get("content");var h=this.get("zoomController");
var b=a.slice(0,f);var e=b.getEach("height").get("@sum");var c=this.INTER_PAGE_MARGIN*(f)+this.TOP_PAGE_MARGIN;
var g=e+c;g=h.getZoomedValue(g);this._itemViewTopCache[f]=g;return g},_itemViewHeight:function(b){var e=this.get("zoomController");
var c=this.get("content").objectAt(b);var a=c.get("height")||0;a=e.getZoomedValue(a);
return a},_itemViewLayout:function(a){var c=arguments.callee.base.apply(this,arguments);
var e=this.get("content").objectAt(a);delete c.right;var f=this.get("zoomController");
var b=e.get("width");b=f.getZoomedValue(b);c.width=b;return c},adjustWidth:function(){var a=this.get("content");
if(a){var c=this.get("zoomController");var b=a.getEach("width").get("@max");this.adjust("width",c.getZoomedValue(b))
}}.observes("*content.[]",".zoom"),getClippingFrameMidPoint:function(){var e=this.get("clippingFrame");
var a=SC.midX(e);var c=SC.midY(e);var b={x:a,y:c};return b},convertPointToPageView:function(c){var e;
c.y-=this.INTER_PAGE_MARGIN;var b=this._itemIndexAt(c.y);var h=this.getItemViewAt(b);
e=this.convertFrameToView(c,h);var a=e.x;var i=e.y;if(i<0){i=0}var f=h.get("frame").height;
if(i>f){i=f}var g=this.get("zoomController");a=g.getUnzoomedValue(a);i=g.getUnzoomedValue(i);
e={x:a,y:i,pageIndex:b};return e},scrollToPageView:function(c){var i=NO;var b=this.get("nowShowing");
if(!b.contains(c)){var f=this.getItemViewAt(c);if(!f){var j=this.get("content").objectAt(c);
var l=this._itemViewTop(c);var g=this._itemViewHeight(c);var a=this.get("zoomController");
var h=j.get("width");h=a.getZoomedValue(h);var e={layout:{top:l,height:g,left:0,width:h}};
f=this.createItemView(j,e);var k=this.guidFor(j);this._scv_itemViews[k]=f}if(!f.get("parentView")){this.appendChild(f)
}f.scrollToVisible();i=YES}return i}});sc_require("views/page_list");Cv.paperController=SC.ObjectController.create(Ip.LocalizedUrl,{content:null,nowShowingPage:null,gradeMarkViewForLoad:false,cur_id:null,nav_initial:YES,override_mode:Ip.getQueryStringParameter("nom"),makeGMRecordRequest:function(){var a=Cv.paperController.prepareUrl(["/student/read/"+Cv.gradeMarkController.read.id()+"/record_view"]);
Ip.TransientRequest.executeTransientPut(a,{successCallback:function(){},failureCallback:function(){}},{usePalladiumHeader:true})
},recordGradeMarkView:function(){if(this.get("isReadonly")||this.gradeMarkViewForLoad||!Cv.gradeMarkController.isActive()||!Cv.get("inStudentMode")){return
}this.gradeMarkViewForLoad=true;setTimeout(this.makeGMRecordRequest,30000)}.observes("Cv.servicesController.activeService"),saveGrade:function(){if(Cv.get("inStudentMode")||this.get("isReadonly")){return
}if(isNaN(this.get("grade"))||this.get("grade")<0||this.get("grade")>=32767){this.set("grade",null)
}else{if(this.get("content")){var b=Cv.store.peekStatus(Cv.store.storeKeyFor(Cv.Paper,this.get("id")));
if((b&SC.Record.DIRTY)!==0){var a=this.prepareUrl(["/api_set_grade.asp?paper=",this.get("id"),"&type=paper&grade=",this.get("grade")].join(""));
if(!Cv.get("inDemoMode")){Ip.TransientRequest.executeTransientGet(a,{successCallback:function(){},failureCallback:function(){SC.AlertPane.error("_Save Error".loc(),"_Your grade has been saved within GradeMark. However, an error prevented saving the grade within your integration's gradebook".loc(),null,"_OK".loc())
}})}}this.get("content").commitRecord()}}},notifyUserIfNecessary:function(){if(SC.none(this.get("hasPageImages"))||this.get("imagesAvailable")){return
}if(this.get("dprImagingInProcess")){this.invokeOnce(this.notifyOfDprProcessing);
return}else{if(!this.get("hasPageImages")){this.invokeOnce(this.notifyOfUnavailableImages);
return}}if(Cv.get("inStudentMode")){this.invokeOnce(this.notifyStudentOfNotAvailable);
return}else{this.invokeOnce(this.notifyInstructorOfNotAvailable);return}}.observes("content"),notifyOfDprProcessing:function(){if(!this.get("dprImagingInProcess")){return
}SC.AlertPane.info("_This paper cannot be viewed in the %@ Document Viewer".loc(Cv.config.get("APP_NAME")),"_This paper is currently being processed by the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME")),null,"_OK".loc())
},notifyOfUnavailableImages:function(){if(this.get("hasPageImages")){return}SC.AlertPane.info("_This paper cannot be viewed in the %@ Document Viewer".loc(Cv.config.get("APP_NAME")),"_This paper could not be imaged by the %@ document processing system, so it cannot to be viewed in the %@ Document Viewer.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME")),null,"_OK".loc())
},notifyStudentOfNotAvailable:function(){if(!Cv.get("inStudentMode")||this.get("imagesAvailable")||this.get("dprImagingInProcess")){return
}var b;switch(this.get("dprStatusCode")){case Cv.DPR_CONSTANTS.DPR_PRE:b="_This paper was submitted to a previous version of our %@ document processing system, so only the previous versions of %@ services can be used.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;case Cv.DPR_CONSTANTS.DPR_FAILED_A:b="_There was a problem processing this paper in the new %@ document processing system, so only the previous versions of %@ services can be used.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;case Cv.DPR_CONSTANTS.DPR_FAILED_B:b="_There was a problem processing this paper in the new %@ document processing system, so only the previous versions of %@ services can be used.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;default:break}var a=this.getFallbackServiceInfo();SC.AlertPane.info("_This paper cannot be viewed in the %@ Document Viewer".loc(Cv.config.get("APP_NAME")),b,null,a.name,{alertPaneDidDismiss:function(e,c){switch(c){case SC.BUTTON1_STATUS:window.location=a.url;
break;default:break}}})},notifyInstructorOfNotAvailable:function(){if(Cv.get("inStudentMode")||this.get("imagesAvailable")||this.get("dprImagingInProcess")){return
}var b;switch(this.get("dprStatusCode")){case Cv.DPR_CONSTANTS.DPR_PRE:b="_This paper was submitted to a previous version of our %@ document processing system. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;case Cv.DPR_CONSTANTS.DPR_FAILED_A:b="_There was a problem processing this paper in the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;case Cv.DPR_CONSTANTS.DPR_FAILED_B:b="_There was a problem processing this paper in the %@ document processing system, so it isn't ready to be viewed in the %@ Document Viewer. The previous versions of %@ services should work fine, but if you want to use the %@ Document Viewer you will need to resubmit the paper. If you choose to resubmit, the Originality Report will be regenerated.".loc(Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"),Cv.config.get("APP_NAME"));
break;default:break}var a=this.getFallbackServiceInfo();SC.AlertPane.info("_This paper cannot be viewed in the %@ Document Viewer".loc(Cv.config.get("APP_NAME")),b,null,"_Resubmit".loc(),a.name,"_Neither One".loc(),{alertPaneDidDismiss:function(e,c){switch(c){case SC.BUTTON1_STATUS:Cv.paperController.submitPaperForDprProcessing();
break;case SC.BUTTON2_STATUS:window.location=a.url;break;default:break}}})},getFallbackServiceInfo:function(){var c=Ip.getQueryStringParameter("s")||0;
if(!SC.none(Cv.servicesController.getPath("activeService"))){c=Cv.servicesController.getPath("activeService.id")
}var b,a;switch(parseInt(c)){case 1:b="_Text-Only Report".loc();a=Cv.originalityController.classicServiceUrl();
break;case 3:b="_Previous GradeMark Version".loc();a=Cv.gradeMarkController.classicServiceUrl();
break;case 2:b="_Previous PeerMark Version".loc();a=Cv.peerMarkController.classicServiceUrl();
break;default:b="_Previous Version".loc();a=Cv.servicesController.classicServiceUrl();
break}return{id:c,name:b,url:a}},submitPaperForDprProcessing:function(){if(!this.get("content")||!this.get("imagedPreDpr")){return
}var a=["/reprocess_paper.asp?p=",this.get("id")];Ip.TransientRequest.executeTransientGet(a.join(""),{successCallback:function(){var b=Cv.paperController.get("content");
b.set("dprStatusCode",Cv.DPR_CONSTANTS.DPR_IN_PROCESS)},failureCallback:function(){var b=Cv.paperController.get("content");
b.set("dprStatusCode",Cv.DPR_CONSTANTS.DPR_FAILED_A);SC.AlertPane.error("_Error".loc(),"_The submission could not be processed.".loc(),null,"_OK".loc())
}})},deanonymize:function(){var e=arguments[0];var c=e.get("reason");var b=this.get("id");
var a=this.prepareUrl("/paper/%@/disable_anonymous".fmt(b));SC.Request.postUrl(a,{reason:c}).set("isJSON",YES).notify(this,"processDeanonymization",{pane:e.get("pane")}).send()
},processDeanonymization:function(c,b){var a=c.get("body");this.set("isAnonymous",NO);
Cv.paperStubsController.setPath("selectedStub.authorFirstName",a.author_first_name);
Cv.paperStubsController.setPath("selectedStub.authorLastName",a.author_last_name);
Cv.paperStubsController.setPath("selectedStub.authorFullName",a.author_full_name);
this.setPath("author.firstName",a.author_first_name);this.setPath("author.lastName",a.author_last_name);
this.setPath("author.fullName",a.author_full_name);b.pane.remove()},navOverride:function(){if(!this.get("override_mode")){return
}var e=this.get("content");if(e){var c=e.id();var f=this.get("cur_id");var k=this.get("nav_initial");
if(k){this.set("cur_id",c);this.set("nav_initial",NO)}else{if(f!=c){this.set("cur_id",c);
var j="";var n=Cv.servicesController.visibleServices;if(n){j=n[0].get("id")}var h=c;
var i=Cv.userController.content.get("id");var b=Cv.get("inStudentMode");var g=document.location;
var m=g.protocol+"//"+g.host;var a=Ip.LocalizedUrl.prepareUrl(m+"/dv?o="+h+"&s="+j+"&u="+i+(b?"&student_user=1":"")+"&nom=1");
window.location.assign(a)}}}}.observes("content"),downloadOriginalSubmission:function(){if(Cv.demoNotice()){return
}if(this.get("mayDownloadOriginalSubmission")){var a=this.get("submissionUrl");if(a){Ip.downloadFromUrl(a)
}}},hasDigitalReceipt:function(){return !this.get("isNothingSubmission")}.property("isNothingSubmission").cacheable()});
sc_require("controllers/paper");Cv.servicesController=SC.ArrayController.create(Ip.LocalizedUrl,{allowsMultipleSelection:NO,content:[],activeService:null,visibleServices:[],gradeMarkControllerBinding:"Cv.gradeMarkController",peerMarkControllerBinding:"Cv.peerMarkController",originalityControllerBinding:"Cv.originalityController",paperBinding:"Cv.paperController",assignmentBinding:"Cv.assignmentController",isContentLoaded:NO,setActiveServiceToVisible:function(){var b=this.get("activeService");
if(!b){return}var a=this.get("content")||[];b.setIfChanged("isVisible",YES)}.observes(".activeService"),paperDidChange:function(){this.invokeLast(function(){if(this.get("isContentLoaded")){return
}if(this.getPath("paper.isLoaded")&&this.getPath("assignment.isLoaded")){this.set("isContentLoaded",YES);
var b=[Cv.originalityController,Cv.gradeMarkController,Cv.peerMarkController];this.set("content",b);
var e=Ip.getQueryStringParameter("s")||Cv.config.get("DEFAULT_ACTIVE_SERVICE");if(e){e=parseInt(e);
var a=b.find(function(k){var j=(k.get("id")==e);return j});var c=null;if(a){var g=a.get("name");
if(!a.get("isApplicable")){c="_The %@ service is not available for this assignment.".loc(g)
}else{if(!a.get("isAvailable")){c="_The %@ service is not available for this paper.".loc(g)
}}}else{c="_Invalid service specified.".loc()}if(!c){this.set("activeService",a)}else{if(Cv.paperController.get("imagesAvailable")){var h="_A problem occurred when processing the application URL.".loc();
SC.AlertPane.error(c,h,null,"_Ok".loc(),null,null,null)}}}var i=Ip.getQueryStringParameter("v")?SC.makeArray(Ip.getQueryStringParameter("v")):Cv.config.get("DEFAULT_VISIBLE_SERVICES");
if(e){i.pushObject(e);i=i.uniq()}var f=[];i.forEach(function(j){var k=b.find(function(m){var l=(m.get("id")==j);
return l});f.push(k)});this.set("visibleServices",f)}})}.observes(".paper.isLoaded",".assignment.isLoaded"),_updateServiceControllerVisibilityFlag:function(){var a=this.get("content");
var b=this.get("visibleServices");a.forEach(function(e){var c=(b.indexOf(e)!==-1);
e.setIfChanged("isVisible",c)})}.observes(".visibleServices.[]"),classicServiceUrl:function(){return this.prepareUrl("/paper_frameset.asp?oid=%@&ft=1&bypass_cv=1".fmt(Cv.paperController.get("id")))
},readonlyAlert:function(){var b=this.get("paper");var a=false;if(b&&b.get("isReadonly")){switch(b.get("readonlyStatus")){case Cv.READONLY_STATUS_CONSTANTS.READONLY_DPR_PRE_WITH_IMAGE_DIMENSIONS:SC.AlertPane.info("_Read Only".loc(),"_This paper was submitted to a previous version of GradeMark, and is currently in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).".loc(),null,"_OK".loc());
a=true;break;default:SC.AlertPane.info("_Read Only".loc(),"_This paper is in read-only mode. In read-only mode users can only view comments on the paper and view the other sidebar tabs (i.e. general comments, mark list, and rubric).".loc(),null,"_OK".loc());
a=true;break}}return a}});sc_require("controllers/services");Cv.serviceController=SC.Controller.extend(Ip.LocalizedUrl,{assignmentBinding:"Cv.assignmentController.content",assignmentBindingDefault:SC.Binding.oneWay(),assignmentServicesBinding:"Cv.assignmentController.applicableServices",assignmentServicesBindingDefault:SC.Binding.oneWay(),paperBinding:"Cv.paperController.content",paperBindingDefault:SC.Binding.oneWay(),productStatusBinding:"Cv.classController.productStatus",productStatusBindingDefault:SC.Binding.oneWay(),paperBinding:"Cv.paperController.content",paperBindingDefault:SC.Binding.oneWay(),paperAvailableServicesBinding:"Cv.paperController.availableServices",paperAvailableServicesBindingDefault:SC.Binding.oneWay(),activeServiceBinding:"Cv.servicesController.activeService",activeServiceBindingDefault:SC.Binding.oneWay(),visibleServicesBinding:"Cv.servicesController.visibleServices",visibleServicesBindingDefault:SC.Binding.oneWay(),paperView:function(){return Cv.paperView
}.property().cacheable(),id:null,name:function(){console.log("name has not been implemented");
return"_empty".loc()}.property().cacheable(),isApplicable:function(){var b=NO;var a=this.getPath("assignment.applicableServices");
if(a){b=(a.indexOf(this.get("id"))!==-1)}return b}.property("assignmentServices").cacheable(),isAvailable:function(){var a=NO;
var c=this.get("isApplicable");var b=this.get("paperAvailableServices");if(!this.get("paper")){a=NO
}else{if(c&&b){a=b?(b.indexOf(this.get("id"))!==-1):NO}else{a=c}}return a}.property("isApplicable","paperAvailableServices").cacheable(),canVisibilityBeChanged:function(){return this.get("isAvailable")&&!this.get("isActive")
}.property("isAvailable","isActive").cacheable(),isVisible:function(b,e){var c=Cv.servicesController.get("visibleServices");
var a=(c.indexOf(this)!==-1);if(!this.get("isAvailable")){return NO}if(e!==undefined){if(e){if(!a){c.pushObject(this);
a=YES}}else{if(a){c.removeObject(this);a=NO}}}return a}.property("isAvailable","visibleServices").cacheable(),isActive:function(){var a=Cv.servicesController.get("activeService");
if(a){return a===this}else{return NO}}.property("activeService").cacheable(),isEditable:function(){console.log("isEditable must be implemented");
return NO}.property().cacheable(),sidebarView:function(){return SC.LabelView.create({layout:{centerX:0,centerY:0,width:200,height:30},value:this.get("name")+" Service Active!",textAlign:SC.ALIGN_CENTER})
}.property().cacheable(),servicePageViewClass:function(){return Cv.PageServiceView.extend({serviceController:this})
}.property().cacheable(),serviceAvailabilityMessage:function(){if(!this.get("productAvailableToClass")){if(Cv.get("inStudentMode")){return"_There is no %@ available for this paper. Your subscription might not include this service. For more information, email moreinfo@turnitin.com.".loc(this.get("name"))
}else{return"_There is no %@ available for this paper. Your institution's subscription might not include this service.".loc(this.get("name"))
}}}.property("productAvailableToClass").cacheable(),productAvailableToClass:function(){var a=this.get("productStatus");
if(a){return a[this.get("id")]===0}else{return NO}}.property("productStatus").cacheable(),print:function(){alert("unavailale")
},download:function(){alert("unavailale")}});Cv.PageServiceView=SC.View.extend({isVisibleBinding:".serviceController.isVisible",serviceController:null,serviceIsActiveBinding:".serviceController.isActive",zoomController:null,zoomControllerBindingDefault:SC.Binding.oneWay(),paperPage:null,paperPageBindingDefault:SC.Binding.oneWay(),isLoadingData:NO,classNames:["page-service-view"],displayProperties:["classNames"],pageIndex:function(){var a=this.getPath("paperPage.index");
if(a===undefined){a=-1}return a}.property("paperPage").cacheable(),_setActiveClassName:function(){var a=this.get("serviceIsActive");
var b=this.get("classNames").concat()||[];if(!a){b.removeObject("active")}else{b.pushObject("active")
}this.set("classNames",b)}.observes("serviceIsActive")});sc_require("views/page_service");
Cv.PageOriginalityView=Cv.PageServiceView.extend({classNames:["originality"],originalityDataTreeController:null,selectedNodeBinding:"Cv.originalityDataTreeController.selectedNode",selectedNodeBindingDefault:SC.Binding.oneWay(),createChildViews:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("childViews")||[];this.highlightsView=this.createChildView(Cv.PageOriginalityHighlightsView.design({paperPageBinding:".parentView.paperPage",zoomControllerBinding:".parentView.zoomController"}));
a.push(this.highlightsView);this.glimpseView=this.createChildView(Cv.OriginalityGlimpseView.design({paperPageBinding:".parentView.paperPage",zoomControllerBinding:".parentView.zoomController"}));
a.push(this.glimpseView);this.set("childViews",a)},_selectedNodeDidChange:function(){var b=Cv.originalityController.get("mode");
if(b===Cv.originalityController.CUMULATIVE_MODE){var a=this.get("selectedNode");if(a){this.invokeLast(this._scrollToFirstMatchHighlightView)
}}}.observes("selectedNode"),_scrollToFirstMatchHighlightView:function(){var b=Cv.originalityActiveMatchGroupsController.get("content");
var a=b.getPath("firstObject.matchSegments.firstObject");if(a){var e=this.highlightsView;
var c=e.getItemViewFor(a);if(c){c.scrollToVisible()}}}});sc_require("controllers/service");
sc_require("views/page_originality");Cv.originalityController=Cv.serviceController.create({CUMULATIVE_MODE:1,SINGLE_SOURCE_MODE:2,RESEARCH_MODE:3,FILTER_SETTINGS_MODE:4,EXCLUSION_MODE:5,FULL_SOURCE_MODE:6,id:1,name:"Originality",mode:function(a,b){if(b===undefined){b=this.get("CUMULATIVE_MODE")
}return b}.property().cacheable(),translateLanguage:Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE,servicePageViewClass:function(){return Cv.PageOriginalityView.extend({serviceController:this,originalityDataTreeController:Cv.originalityDataTreeController})
}.property().cacheable(),paperIdBinding:"Cv.paperController.id",paperIdBindingDefault:SC.Binding.oneWay(),paperIsLoadedBinding:"Cv.paperController.isLoaded",paperIsLoadedBindingDefault:SC.Binding.oneWay(),paperDefaultReportLanguageBinding:"Cv.paperController.defaultReportLanguage",paperDefaultReportLanguageBindingDefault:SC.Binding.oneWay(),reportLinkUrlBinding:"Cv.originalityMatchGroupController",_paperDidChange:function(){var a=this.get("paperIsLoaded");
if(a){var b=this.getPath("paper.defaultReportLanguage");this.set("translateLanguage",b);
this._updateCachedArrays()}var c=this.get("mode");if((c===this.RESEARCH_MODE)||(c===this.FULL_SOURCE_MODE)){this.set("mode",this.CUMULATIVE_MODE)
}}.observes("paper","paperIsLoaded","paperDefaultReportLanguage"),translateLanguageDidChange:function(){this._updateCachedArrays()
}.observes("translateLanguage"),_updateCachedArrays:function(){var i=this.get("paperIsLoaded");
if(i){var f=this.getPath("paper.id");var c=this.get("translateLanguage");var b=this._cumulativeDataRecordArrays[f]||{};
var g=b[c]||null;this.set("_cumulativeDataRecordArray",g);var e=this._singleSourceDataRecordArrays[f]||{};
var l=e[c]||null;this.set("_singleSourceDataRecordArray",l);var k=this._excludeListRecordArrays[f]||{};
var a=k[c]||null;this.set("_excludeListRecordArray",a);var j=this._originalityOptionsRecordArrays[f]||{};
var h=j[c]||null;this.set("_originalityOptionsRecordArray",h)}},isVisibleDidChange:function(){var a=this.get("isVisible");
var b=this.get("isActive");if(a&&!b){this.setIfChanged("mode",this.CUMULATIVE_MODE)
}}.observes("isVisible"),_cumulativeDataRecordArrays:{},_cumulativeDataRecordArray:null,_cumulativeDataRecordArrayLength:-1,researchSourceGroupNode:null,cumulativeData:function(){var j=null;
var c=this.getPath("paper.availableServices");var b=(c?(c.indexOf(this.get("id"))!==-1):NO);
var h=this.get("mode");var g=this.get("isVisible");var l=this.get("paperIsLoaded");
var i=this.get("_cumulativeDataRecordArray");var k=this.get("_cumulativeDataRecordArrayLength");
if(b&&g&&l&&(!i||(k>0))&&((h===this.CUMULATIVE_MODE)||(h===this.SINGLE_SOURCE_MODE)||(h===this.RESEARCH_MODE))){var f=this.getPath("paper.id");
if(!i){var e=this.get("translateLanguage");var a=SC.Query.local(Cv.PaperOriginalityCumulativeData,{conditions:"paper = {paper} AND translateLanguage = {translateLanguage}",paper:this.get("paper"),translateLanguage:e,url:"/paper/%@/primary/similarity?tl=%@".fmt(f,e)});
i=Cv.store.find(a);this.set("_cumulativeDataRecordArray",i);var m=this._cumulativeDataRecordArrays[f];
if(!m){m={};this._cumulativeDataRecordArrays[f]=m}m[e]=i}else{if(i.get("length")>0){j=i.firstObject()
}}if(!j){this.set("_cumulativeDataRecordArrayLength",-1)}}return j}.property("mode","translateLanguage","paperAvailableServices","isVisible","paper","paperIsLoaded","_cumulativeDataRecordArrayLength").cacheable(),_cumulativeDataRecordArrayDidChange:function(){if(this._cumulativeDataRecordArrayLengthBinding){this._cumulativeDataRecordArrayLengthBinding.disconnect();
this._cumulativeDataRecordArrayLengthBinding=null;this.set("_cumulativeDataRecordArrayLength",-1)
}var a=this.get("_cumulativeDataRecordArray");if(a){this._cumulativeDataRecordArrayLengthBinding=this.bind("_cumulativeDataRecordArrayLength",a,"length")
}}.observes("_cumulativeDataRecordArray"),_singleSourceDataRecordArrays:{},_singleSourceDataRecordArray:null,_singleSourceDataRecordArrayLength:-1,singleSourceData:function(){var h=null;
var b=this.getPath("paper.availableServices");var a=(b?(b.indexOf(this.get("id"))!==-1):NO);
var g=this.get("mode");var f=this.get("isVisible");var j=this.get("paperIsLoaded");
var m=this.get("_singleSourceDataRecordArray");var i=this.get("_singleSourceDataRecordArrayLength");
if(a&&f&&j&&(!m||(i>0))&&(g===this.SINGLE_SOURCE_MODE)){var e=this.getPath("paper.id");
if(!m){var c=this.get("translateLanguage");var k=SC.Query.local(Cv.PaperOriginalitySingleSourceData,{conditions:"paper = {paper} AND translateLanguage = {translateLanguage}",paper:this.get("paper"),translateLanguage:c,url:"/paper/%@/report/content?tl=%@".fmt(e,c)});
m=Cv.store.find(k);this.set("_singleSourceDataRecordArray",m);var l=this._singleSourceDataRecordArrays[e];
if(!l){l={};this._singleSourceDataRecordArrays[e]=l}l[c]=m}else{if(m.get("length")>0){h=m.firstObject()
}}if(!h){this.set("_singleSourceDataRecordArrayLength",-1)}}return h}.property("mode","translateLanguage","paperAvailableServices","isVisible","paper","paperIsLoaded","_singleSourceDataRecordArrayLength").cacheable(),_singleSourceDataRecordArrayDidChange:function(){if(this._singleSourceDataRecordArrayLengthBinding){this._singleSourceDataRecordArrayLengthBinding.disconnect();
this._singleSourceDataRecordArrayLengthBinding=null;this.set("_singleSourceDataRecordArrayLength",-1)
}var a=this.get("_singleSourceDataRecordArray");if(a){this._singleSourceDataRecordArrayLengthBinding=this.bind("_singleSourceDataRecordArrayLength",a,"length")
}}.observes("_singleSourceDataRecordArray"),_excludeListRecordArrays:{},_excludeListRecordArray:null,_excludeListRecordArrayLength:-1,excludeList:function(){var j=null;
var f=this.getPath("paper.availableServices");var c=(f?(f.indexOf(this.get("id"))!==-1):NO);
var i=this.get("isVisible");var k=this.get("paperIsLoaded");var b=this.get("_excludeListRecordArray");
var a=this.get("_excludeListRecordArrayLength");if(c&&i&&k&&(!b||(a>0))){var h=this.getPath("paper.id");
if(!b){var g=this.get("translateLanguage");var e=SC.Query.local(Cv.ExcludeList,{conditions:"paper = {paper} AND translateLanguage = {translateLanguage}",paper:this.get("paper"),translateLanguage:g,url:"/paper/%@/exclude_list?tl=%@".fmt(h,g)});
b=Cv.store.find(e);this.set("_excludeListRecordArray",b);var l=this._excludeListRecordArrays[h];
if(!l){l={};this._excludeListRecordArrays[h]=l}l[g]=b}else{if(b.get("length")>0){j=b.firstObject()
}}if(!j){this.set("_excludeListRecordArrayLength",-1)}}return j}.property("paperAvailableServices","isVisible","paper","paperIsLoaded","_excludeListRecordArrayLength","translateLanguage").cacheable(),_excludeListRecordArrayDidChange:function(){if(this._excludeListRecordArrayLengthBinding){this._excludeListRecordArrayLengthBinding.disconnect();
this._excludeListRecordArrayLengthBinding=null;this.set("_excludeListRecordArrayLength",-1)
}var a=this.get("_excludeListRecordArray");if(a){this._excludeListRecordArrayLengthBinding=this.bind("_excludeListRecordArrayLength",a,"length")
}}.observes("_excludeListRecordArray"),_originalityOptionsRecordArrays:{},_originalityOptionsRecordArray:null,_originalityOptionsRecordArrayLength:-1,originalityOptions:function(){var a=null;
var c=this.getPath("paper.availableServices");var b=(c?(c.indexOf(this.get("id"))!==-1):NO);
var j=this.get("mode");var h=this.get("isVisible");var m=this.get("paperIsLoaded");
var k=this.get("_originalityOptionsRecordArray");var l=this.get("_originalityOptionsRecordArrayLength");
var f=((j===this.FILTER_SETTINGS_MODE)||Cv.config.get("ALLOW_OR_OPTIONS_IN_ALL_MODES"));
if(b&&h&&m&&(!k||(l>0))&&f){var g=this.getPath("paper.id");if(!k){var e=this.get("translateLanguage");
var i=SC.Query.local(Cv.OriginalityOptions,{conditions:"paper = {paper} AND translateLanguage = {translateLanguage}",paper:this.get("paper"),translateLanguage:e,url:"/paper/%@/options?tl=%@".fmt(g,e)});
k=Cv.store.find(i);this.set("_originalityOptionsRecordArray",k);var n=this._originalityOptionsRecordArrays[g];
if(!n){n={};this._originalityOptionsRecordArrays[g]=n}n[e]=k}else{if(k.get("length")>0){a=k.firstObject()
}}if(!a){this.set("_originalityOptionsRecordArrayLength",-1)}}return a}.property("mode","translateLanguage","paperAvailableServices","isVisible","paper","paperIsLoaded","_originalityOptionsRecordArrayLength").cacheable(),_originalityOptionsRecordArrayDidChange:function(){if(this._originalityOptionsRecordArrayLengthBinding){this._originalityOptionsRecordArrayLengthBinding.disconnect();
this._originalityOptionsRecordArrayLengthBinding=null;this.set("_originalityOptionsRecordArrayLength",-1)
}var a=this.get("_originalityOptionsRecordArray");if(a){this._originalityOptionsRecordArrayLengthBinding=this.bind("_originalityOptionsRecordArrayLength",a,"length")
}}.observes("_originalityOptionsRecordArray"),_fullSourceDatas:{},fullSourceData:function(){var j=null;
var c=this.getPath("paper.availableServices");var b=(c?(c.indexOf(this.get("id"))!==-1):NO);
var g=this.get("isVisible");var h=this.get("paperIsLoaded");if(b&&g&&h){var e=this.get("translateLanguage");
var a=this.get("paper");var f=a.get("id");var i=this._fullSourceDatas[f];if(!i){i={};
this._fullSourceDatas[f]=i}j=i[e];if(!j){j=Cv.PaperOriginalityFullSourceData.create({paper:a,translateLanguage:e});
i[e]=j}}return j}.property("paperAvailableServices","isVisible","paper","paperIsLoaded","translateLanguage").cacheable(),sidebarView:function(){var b=SC.View.design({childViews:"fullSourceView tabView".w(),fullSourceView:Cv.OriginalityFullSourceSidebarView.design({isInFullSourceModeBinding:SC.Binding.oneWay("Cv.originalityFullSourceModeController.isInFullSourceMode"),isVisible:function(){var e=this.get("isInFullSourceMode");
var c=e;return c}.property("isInFullSourceMode").cacheable(),isInFullSourceModeDidChange:function(){var e=this.get("isInFullSourceMode");
var c=this.getPath("parentView.parentView.parentView");if(c){c.set("sidebarIsWider",e)
}}.observes("isInFullSourceMode")}),tabView:Cv.OriginalitySidebarView.design({layout:{top:0,bottom:0,left:0,right:0},originalityController:this,originalityDataTreeController:Cv.originalityDataTreeController,isInFullSourceModeBinding:SC.Binding.oneWay("Cv.originalityFullSourceModeController.isInFullSourceMode"),isVisible:function(){var e=this.get("isInFullSourceMode");
var c=!e;return c}.property("isInFullSourceMode").cacheable()})});var a=b.create({});
return a}.property().cacheable(),unloadData:function(){var l=this.get("paper");var p=l.get("id");
var f=this.get("translateLanguage");var m=this.get("_cumulativeDataRecordArray");
if(m){var q=m.firstObject();if(q){Cv.store.unloadRecord(Cv.PaperOriginalityCumulativeData,q.get("id"))
}var s=this._cumulativeDataRecordArrays[p];if(s){delete s[f]}this.set("_cumulativeDataRecordArray",null);
this.set("researchSourceGroupNode",null)}var j=this.get("_singleSourceDataRecordArray");
if(j){var i=j.firstObject();if(i){Cv.store.unloadRecord(Cv.PaperOriginalitySingleSourceData,i.get("id"))
}var u=this._singleSourceDataRecordArrays[p];if(u){delete u[f]}this.set("_singleSourceDataRecordArray",null);
this.set("singleSourceData",null)}var n=SC.Query.local(Cv.OriginalityMatchGroupRecord,{conditions:"paperReviewed = %@ AND translateLanguage = %@".fmt(p,f)});
var g=Cv.store.find(n).getEach("id");if(g.length>0){Cv.store.unloadRecords(Cv.OriginalityMatchGroupRecord,g)
}var a=SC.Query.local(Cv.OriginalityGlimpse,{conditions:"paperReviewed = %@ AND translateLanguage = %@".fmt(p,f)});
var t=Cv.store.find(a).getEach("id");if(t.length>0){Cv.store.unloadRecords(Cv.OriginalityGlimpse,t)
}var o=SC.Query.local(Cv.OriginalitySourceGroupNodeSecondaryData,{conditions:"paper = {paper} AND translateLanguage = {translateLanguage}",paper:l,translateLanguage:f});
var b=Cv.store.find(o).getEach("id");if(b.length>0){Cv.store.unloadRecords(Cv.OriginalitySourceGroupNodeSecondaryData,b)
}var h=this._fullSourceDatas[p];if(h){var e=h[f];if(e){e.unloadData();delete h[f]
}}var k=SC.Query.local(Cv.OriginalityFullSourceMatchGroup,{conditions:"paperReviewed = %@ AND translateLanguage = %@".fmt(p,f)});
var c=Cv.store.find(k).getEach("id");if(c.length>0){Cv.store.unloadRecords(Cv.OriginalityMatchGroupRecord,c)
}},regenerateData:function(){Cv.servicesController.set("activeService",null);var e=this.get("paperAvailableServices");
e=e.concat();var c=this.get("id");e.removeObject(c);Cv.paperController.set("availableServices",e);
this.unloadData();var b=Cv.paperController.get("id");var a=this.prepareUrl("/newreport.asp?oid=%@&rf=1&bypass_cv=1&lang=%@".fmt(b));
SC.Request.getUrl(a).send()},classicServiceUrl:function(){return this.prepareUrl("/newreport.asp?oid=%@&ft=1&bypass_cv=1".fmt(Cv.paperController.get("id")))
},warnNotAvailable:function(){var b=this.get("isAvailable");var a=this.get("paper");
var j="_The Originality Report is not available for this submission.".loc();if(a.get("dprPreWithImageDimensions")){var c={alertPaneDidDismiss:function(l,k){switch(k){case SC.BUTTON1_STATUS:break;
case SC.BUTTON2_STATUS:window.location=Cv.originalityController.classicServiceUrl();
break;default:break}}};j="_Originality Report Unavailable".loc();var h="_The Originality Report is not available for this version of the application.".loc();
var i=null;var g="_OK".loc();var f="_Text-only version".loc();var e=null;SC.AlertPane.warn(j,h,i,g,f,e,c)
}else{if(!b){if(a.get("isNothingSubmission")){j="_OriginalityCheck is not available because no file was submitted.".loc()
}else{if(this.get("isApplicable")&&(a.get("isAnythingSubmission")||a.get("isImageFileSubmission")||a.get("reportNotGenerating"))){j="_OriginalityCheck isn't available for this submission because %@ could not extract enough text to generate an Originality Report.".loc(Cv.config.get("APP_NAME"))
}}SC.AlertPane.warn("_Originality Report Unavailable".loc(),j,null,"_OK".loc())}}},captureStateArgs:function(){var b={};
var c=this.get("mode");b.or_type=(c===Cv.originalityController.SINGLE_SOURCE_MODE)?"content":"similarity";
if(c===this.SINGLE_SOURCE_MODE||c===this.RESEARCH_MODE){var a=Cv.originalityDataTreeSelectedNodeController.get("content");
if(a){if(a.get("isSource")){b.or_im=1;b.or_selected=a.getPath("data.guid")}else{b.or_im=0;
b.or_selected=a.getPath("data.sourceGuids")}}}if(c===this.RESEARCH_MODE){b.or_group_node=Cv.originalityController.getPath("researchSourceGroupNode.primarySourceTreeNode.sourceGuids")
}if(Cv.originalityController.get("translateLanguage")){b.or_translate_language=12
}return b},paperSharingNotice:function(h){if(h.get("sharedAvailable")){var a,e,c,i,j;
var f=NO;var g;if(h.get("sharingInfo")){a=h.get("sharingInfo").class_title;e=h.get("sharingInfo").assignment_title;
c=h.get("sharingInfo").date_uploaded;i=h.get("sharingInfo").instructor_fname;j=h.get("sharingInfo").instructor_lname;
if(Cv.userController.get("id")===h.get("sharingInfo").instructor_id){f=YES}}if(f){if(h.get("sharedSourceDeleted")){g="_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to your class %@1 in the %@2 assignment on %@3.".loc(a,e,c)
}else{g="_The original copy of this paper was submitted to your class %@1 in the %@2 assignment on %@3.".loc(a,e,c)
}}else{if(h.get("sharedSourceDeleted")){if(i||j){var b=i+" "+j;g="_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to instructor %@1 in class %@2 on %@3.".loc(b,a,c)
}else{if(!h.get("sharingInfo")){g="_The original copy of this paper cannot be viewed because it was submitted to a class that has been deleted.".loc()
}else{g="_The original copy of this paper cannot be viewed because either it or the class or assignment it was submitted to has been deleted. The paper was submitted to class %@1 on %@2.".loc(a,c)
}}}}if(!g){if(i||j){var b=i+" "+j;g="_The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to instructor %@ in class %@ on %@.".loc(b,a,c)
}else{g="_The original copy of this paper cannot be viewed because it was not submitted to your class. The paper was submitted to class %@1 on %@2.".loc(a,c)
}}if(h.get("sharingInfo")&&!h.get("sharedSourceDeleted")){SC.AlertPane.info("_Source Release".loc(),null,g,"_Cancel".loc(),"_Download original".loc(),null,this)
}else{SC.AlertPane.info("_Source Release".loc(),null,g,"_OK".loc(),null,null,this)
}return YES}return NO},alertPaneDidDismiss:function(i,a){var h=this.get("mode");var b="";
var g=Cv.get("lang");var f=/[&?]lang=/;var e=/\?/;switch(h){case this.FULL_SOURCE_MODE:b=Cv.originalityActiveMatchGroupsController.getPath("selectedNode.data.linkUrl");
break;default:b=Cv.originalityMatchGroupController.getPath("content.source.linkUrl");
break}if(!b.match(f)){var c=(b.match(e))?"&lang=":"?lang=";b=b+c+g}switch(a){case SC.BUTTON1_STATUS:break;
case SC.BUTTON2_STATUS:Ip.downloadFromUrl(b);break;case SC.BUTTON3_STATUS:break;default:break
}}});Cv.originalityMatchGroupsController=SC.ArrayController.create({content:null,dataTreeContent:null,dataTreeContentBinding:"Cv.originalityDataTreeController.content",dataTreeContentBindingDefault:SC.Binding.oneWay(),selectedNode:null,selectedNodeBinding:"Cv.originalityDataTreeSelectedNodeController.content",selectedNodeBindingDefault:SC.Binding.oneWay(),selectedNodeMatchGroups:null,selectedNodeMatchGroupsBinding:"Cv.originalityDataTreeSelectedNodeDataController.matchGroups",selectedNodeMatchGroupsBindingDefault:SC.Binding.oneWay(),_paperId:null,_paperIdBinding:"Cv.originalityDataTreeController.contentPaperId",_paperIdBindingDefault:SC.Binding.oneWay(),contentPaperId:null,_computeMatches:function(){var c=this.get("_paperId");
this.set("contentPaperId",c);var g=this.get("dataTreeContent");if(!g){this.set("content",null);
return}var h=Cv.originalityController.get("mode");var a=[];if(h===Cv.originalityController.CUMULATIVE_MODE){var f=g.getEach("data");
f.forEach(function(i){a=a.concat(i.getPath("primarySourceTreeNode.matchGroups"))})
}else{if(h===Cv.originalityController.SINGLE_SOURCE_MODE){var b=this.get("selectedNodeMatchGroups");
if(b){a=b;if(a&&(!SC.kindOf(a,SC.RecordArray)||(a.get("status")&SC.Record.READY))){a=a.map(function(i){return i
})}}}else{if(h===Cv.originalityController.RESEARCH_MODE){var e=Cv.originalityController.get("researchSourceGroupNode");
a=a.concat(e.getPath("primarySourceTreeNode.matchGroups"))}else{if(h===Cv.originalityController.FULL_SOURCE_MODE){var b=this.get("selectedNodeMatchGroups");
if(b){a=b.toArray()}}}}}this.set("content",a)}.observes("dataTreeContent","selectedNode","selectedNodeMatchGroups"),_matchGroupRecordArrayDidChange:function(){var a=this.get("content");
if(SC.kindOf(a,SC.RecordArray)&&(a.get("status")&SC.Record.READY)){var b=this.get("_paperId");
this.set("contentPaperId",b);a=a.map(function(c){return c});this.set("content",a)
}}.observes("status")});sc_require("controllers/services/originality");sc_require("controllers/originality_match_groups");
Cv.originalityAllPageMatchesController=SC.ArrayController.create({content:null,originalityIsVisible:NO,originalityIsVisibleBinding:"Cv.originalityController.isVisible",originalityIsVisibleBindingDefault:SC.Binding.oneWay(),matchGroups:null,matchGroupsBinding:"Cv.originalityMatchGroupsController.content",matchGroupsBindingDefault:SC.Binding.oneWay(),matchGroupsEnumerable:null,matchGroupsEnumerableBinding:"Cv.originalityMatchGroupsController.[]",matchGroupsEnumerableBindingDefault:SC.Binding.oneWay(),_paperId:null,_paperIdBinding:"Cv.originalityMatchGroupsController.contentPaperId",_paperIdBindingDefault:SC.Binding.oneWay(),contentPaperId:null,_updateContent:function(){var f=this.get("_paperId");
this.set("contentPaperId",f);var c=this.get("originalityIsVisible");var b=this.get("matchGroups");
var e=null;if(c&&b){e=[];var j=Cv.originalityController.get("paper");for(var g=0,a=j.getPath("pages.length");
g<a;g++){var h=e[g];h=[];e[g]=h}b.forEach(function(i){var k=i.get("matchSegments");
k.forEach(function(m){for(var n=0,l=j.getPath("pages.length");n<l;n++){if(m.isOnPage(n)){var o=e[n];
o.push(m)}}})})}this.set("content",e)},_updateContentIfNeeded:function(){this.invokeOnce(this._updateContent,this)
}.observes("matchGroups"),_matchGroupsDidChange:function(){this._updateContentIfNeeded()
}.observes("*matchGroups.[]")});Cv.Hoverable={isHovering:NO,mouseEntered:function(){this.set("isHovering",YES)
},mouseExited:function(){this.set("isHovering",NO)}};Cv.OriginalityGroupNodeItemView=SC.View.extend(SC.Control,{content:null,classNames:"originality-list-node originality-list-group-node".w(),render:function(c,a){var e=this.getPath("content.data");
if(!e){return}var o=e.get("colorIndex");c.addClass("group-node-color-"+o);var g=e.get("index")+1;
var n=e.get("displayLinkText")||"";var f=n.replace(/"/g,"&quot;");var l=e.get("collectionDisplayText")||"";
var i=e.primarySourceTreeNode.sources[0].downloadDate?Ip.stringToDateObjectMDY(e.primarySourceTreeNode.sources[0].downloadDate):null;
var h=e.primarySourceTreeNode.wordCount;if(!i){c.addClass("not-showing-download-date")
}else{var b="__ipDefaultFullDateFormat".loc();i=i.toFormattedString(b)}var k=e.get("percent");
if(k||(k===0)){if(k===0){k="_%@%".loc("<1")}else{k="_%@%".loc(k)}}var p;switch(String(g).length){case 2:p="two-digit";
break;case 3:p="three-digit";break;default:break}var m=[];m.push('<div class="number %@">'.fmt(p));
m.push(g);m.push("</div>");m.push('<div class="title ellipsis" title="');m.push(f);
m.push('">');if(Cv.config.get("USE_FULL_TITLE_IN_ORIGINALITY_SIDEBAR_MATCH")){m.push(n)
}else{m.push(n)}m.push("</div>");m.push('<div class="type">');m.push(l);if(Cv.config.get("SHOW_WORD_COUNT_IN_ORIGINALITY_SIDEBAR_MATCH")&&h){m.push('<span class="word-count">');
m.push("_%@ words".loc(h));m.push("</span>")}m.push("</div>");if(Cv.config.get("SHOW_CRAWLED_ON_DATE")&&i){m.push('<div class="crawled-on">');
m.push("_crawled on %@".loc(i));m.push("</div>")}m.push('<div class="percent">');
m.push(k);m.push("</div>");var j=m.join("");c.push(j)}});Cv.OriginalityNonGroupNodeItemView=SC.View.extend(SC.Control,SC.ContentDisplay,{content:null,classNames:"originality-list-node originality-list-non-group-node".w(),contentDisplayProperties:["treeItemIsChecked"],showCheckbox:NO,showCheckboxBindingDefault:SC.Binding.oneWay().bool(),showCheckboxOrBullet:YES,contentTitleKey:null,contentTypeKey:null,contentPercentKey:null,render:function(c,a){if(!this.get("content")){return
}var l=this.getPath("content."+this.get("contentTitleKey"))||"";var n=l.replace(/"/g,"&quot;");
n=Ip.escapeHTML(n);var f=this.get("content").data&&this.get("content").data.sources?Ip.stringToDateObjectMDY(this.get("content").data.sources[0].downloadDate):null;
var g=this.get("content").data?this.get("content").data.wordCount:null;if(!f){c.addClass("not-showing-download-date")
}else{var b="__ipDefaultFullDateFormat".loc();f=f.toFormattedString(b)}var j=this.getPath("content."+this.get("contentTypeKey"))||"";
var i=this.getPath("content."+this.get("contentPercentKey"));if(i||(i===0)){if(i===0){i="_%@%".loc("<1")
}else{i="_%@%".loc(i)}}var k=[];if(this.get("showCheckboxOrBullet")){if(this.get("showCheckbox")){var e=this.getPath("content.treeItemIsChecked");
k.push('<input type="checkbox" class="checkbox"');if(e){k.push(' checked="checked"')
}k.push(" />")}else{k.push('<div class="bullet">&bull;</div>')}}var m=this.getTitleLink();
if(m){k.push('<a class="title ellipsis" title="');k.push(n);k.push('" src="#">');
k.push(l);k.push("</a>")}else{k.push('<div class="title ellipsis" title="');k.push(n);
k.push('">');k.push(l);k.push("</div>")}k.push('<div class="type">');k.push(j);if(Cv.config.get("SHOW_WORD_COUNT_IN_ORIGINALITY_SIDEBAR_MATCH")&&g){k.push('<span class="word-count">');
k.push("_%@ words".loc(g));k.push("</span>")}k.push("</div>");if(Cv.config.get("SHOW_CRAWLED_ON_DATE")&&f){k.push('<div class="crawled-on">');
k.push("_crawled on %@".loc(f));k.push("</div>")}k.push('<div class="percent">');
k.push(i);k.push("</div>");var h=k.join("");c.push(h)},getTitleLink:function(){return null
},mouseDown:function(e){var b=NO;var a=this.getTitleLink();if(a){var c=" "+e.target.className+" ";
if(c.indexOf(" title ")!==-1){b=YES}}return b},mouseUp:function(b){var a=this.getTitleLink();
if(Cv.originalityController.paperSharingNotice(this.get("content"))){return NO}if(a){var c=function(){alert("_The new window was blocked. please disable popup blockers and try again.".loc())
};a=Ip.LocalizedUrl.prepareUrl(a,{output:false,lang:false});Ip.openAndFocusWindow(a,"_or_source",null,c)
}}});sc_require("views/originality_non_group_node_item");Cv.OriginalitySourceTreeNodeItemView=Cv.OriginalityNonGroupNodeItemView.extend({classNames:"originality-list-source-tree-node".w(),contentTitleKey:"data.displayLinkText",contentTypeKey:"data.collectionDisplayText",contentPercentKey:"data.percent",mouseDown:function(f){var b=NO;
if(f.target.type&&(f.target.type.toLowerCase()=="checkbox")){b=YES;var e=f.target.checked;
var h=!e;this.setPath("content.treeItemIsChecked",h);var c=this.getPath("content.treeItemChildren");
if(c){c.forEach(function(i){i.setPath("treeItemIsChecked",h)})}var g=this.getPath("parentView.selectedSources");
if(g){var a=this.getPath("content.data.sources");a.forEach(function(i){if(h){if(g.indexOf(i)===-1){g.pushObject(i)
}}else{if(g.indexOf(i)!==-1){g.removeObject(i)}}});this.displayDidChange()}}return b
},childIsCheckedDidChange:function(c){var b=this.getPath("content.treeItemChildren");
var a=b.everyProperty("treeItemIsChecked");this.setPath("content.treeItemIsChecked",a)
}});Cv.OriginalitySourceItemView=SC.View.extend(SC.Control,{content:null,classNames:"originality-list-node originality-list-source".w(),showCheckbox:NO,showCheckboxBindingDefault:SC.Binding.oneWay().bool(),render:function(c,a){var b=this.getPath("content.data");
if(!b){return}var k=b.get("displayLinkText")||"";var e=k.replace(/"/g,"&quot;");var f=this.getRelativeLinkText(k);
var i=b.get("percent");if(i||(i===0)){if(i===0){i="_%@%".loc("<1")}else{i="_%@%".loc(i)
}}var j=[];if(this.get("showCheckbox")){var g=this.getPath("content.treeItemIsChecked");
j.push('<input type="checkbox" class="checkbox"');if(g){j.push(' checked="checked"')
}j.push(" />")}else{j.push('<div class="bullet">&bull;</div>')}j.push('<div class="title ellipsis" title="');
j.push(e);j.push('">');j.push(f);j.push("</div>");j.push('<div class="percent">');
j.push(i);j.push("</div>");var h=j.join("");c.push(h)},mouseDown:function(e){var b=NO;
if(e.target.type&&(e.target.type.toLowerCase()=="checkbox")){b=YES;var c=e.target.checked;
var h=!c;this.setPath("content.treeItemIsChecked",h);var f=this.getPath("content.sourceTreeNodeItem");
var a=this.get("parentView");var g=a.getItemViewFor(f);g.childIsCheckedDidChange(this.get("content"))
}return b},contentPropertyDidChange:function(e,a){if(a==="treeItemIsChecked"){var c=this.getPath("parentView.selectedSources");
if(c){var f=this.getPath("content.treeItemIsChecked");var b=this.getPath("content.data");
if(f){if(c.indexOf(b)===-1){c.pushObject(b)}}else{if(c.indexOf(b)!==-1){c.removeObject(b)
}}this.displayDidChange()}}},getRelativeLinkText:function(a){var c=this.getPath("content.data");
var f=c.getPath("sourceTreeNode.collection");if(f=="internet"){var e=c.getPath("sourceTreeNode.linkText");
var b=a.indexOf(e)+e.length+1;if(b===a.length){a="[Home Page]".loc()}else{a=a.substring(b)
}}return a}});sc_require("controllers/originality_active_match_groups");Cv.originalityMatchGroupController=SC.ObjectController.create({content:null,activeMatchGroups:null,activeMatchGroupsBinding:"Cv.originalityActiveMatchGroupsController.content",activeMatchGroupsBindingDefault:SC.Binding.oneWay(),activeMatchGroupsStatus:null,activeMatchGroupsStatusBinding:"Cv.originalityActiveMatchGroupsController.status",activeMatchGroupsStatusBindingDefault:SC.Binding.oneWay(),matchGroupIndex:function(e,g){var b=-1;
if(!this._needToLoadActiveMatchGroupRecordArray){var f=this.get("content");var a=this.getPath("activeMatchGroups.length")||0;
if(f&&(a>0)){var c=this.get("activeMatchGroups");b=c.indexOf(f)}}return b}.property("content","activeMatchGroups").cacheable(),_computeSelectedMatchGroup:function(){var c=this.get("activeMatchGroups");
if(!c){return}else{if(SC.kindOf(c,SC.RecordArray)&&!(c.get("status")&SC.Record.READY)){return
}}if(c&&(c.get("length")>0)){var e=c.firstObject();var f=Cv.originalityController.get("mode");
if(f!==Cv.originalityController.CUMULATIVE_MODE){this._settingContent=YES;this.set("content",e);
this._settingContent=NO}else{if(f===Cv.originalityController.CUMULATIVE_MODE){var b=Cv.originalityDataTreeSelectedNodeDataController.get("content");
var a=this.getPath("content.groupNode");if(a&&(a!==b)){this.set("content",null)}}}}else{this.set("content",null)
}},_activeMatchGroupsDidChange:function(){if(!this._settingContent){this.invokeOnce(this._computeSelectedMatchGroup,this)
}}.observes("activeMatchGroups","activeMatchGroupsStatus"),_contentDidChange:function(){var a=this.get("content");
if(a){var b=Cv.originalityController.get("mode");if(b===Cv.originalityController.FULL_SOURCE_MODE){this.invokeOnce(function(){this.scrollToPageView();
this.scrollToHighlightView()})}else{this.invokeOnce(this.scrollToPageView)}}}.observes("content"),scrollToPageView:function(b){b=b||this.get("content");
var e=NO;var a=b.getPath("matchSegments.firstObject.startGlyphAddress").page;var f=Cv.paperView.pageListView;
var c=f.get("nowShowing");if(!c.contains(a)){f.scrollToPageView(a);e=YES}return e
},_scrollToVisibleFailures:0,scrollToHighlightView:function(b){b=b||this.get("content");
var a=b.getPath("matchSegments.firstObject");var c=a.get("startGlyphAddress").page;
var i=Cv.paperView.pageListView;var h=i.getItemViewAt(c);var g=h.getPath("pageServicesView.originalityPageView.highlightsView");
var f=g.getItemViewFor(a);if(!f){if(this._scrollToVisibleFailures<3){this._scrollToVisibleFailures++;
this.invokeLater(function(){this.scrollToHighlightView(b)},100)}else{this._scrollToVisibleFailures=0
}return NO}var e=f.scrollToVisible();return e},selectNextMatchGroup:function(){var f=Cv.originalityDataTreeController.get("selectedNode");
if(f){var e=this.get("content");var c=this.get("activeMatchGroups");var b=c.get("length");
if(b>0){var a;if(!e){a=0}else{a=c.indexOf(e);a=(a+1)%b}if(a!==-1){e=c.objectAt(a);
this._settingContent=YES;this.set("content",e);this._settingContent=NO}}}},selectPrevMatchGroup:function(){var f=Cv.originalityDataTreeController.get("selectedNode");
if(f){var e=this.get("content");var c=this.get("activeMatchGroups");var b=c.get("length");
if(b>0){var a;if(!e){a=b-1}else{a=c.indexOf(e);a=(a-1+b)%b}if(a!==-1){e=c.objectAt(a);
this._settingContent=YES;this.set("content",e);this._settingContent=NO}}}},matchHightViewMouseDown:function(f,a){var c=NO;
if(!Cv.originalityController.get("isActive")){return c}var i=Cv.originalityController.get("mode");
var b=a.get("content");var e=b.get("matchGroup");var g=this.get("content");if((e===g)&&(i!==Cv.originalityController.FULL_SOURCE_MODE)){a.showGlimpseView();
return YES}else{if(this.isMatchActive(b)){this._settingContent=YES;this.set("content",e);
this._settingContent=NO;c=YES}else{var h=this.getNodeOfMatchGroup(e);Cv.originalityDataTreeController.selectObject(h);
this._settingContent=YES;this.set("content",e);this._settingContent=NO;c=YES}}return c
},getNodeOfMatchGroup:function(f){var h=null;var j=Cv.originalityController.get("mode");
if(j===Cv.originalityController.CUMULATIVE_MODE){var b=f.get("groupNode");var g=Cv.originalityDataTreeController.getPath("content");
for(var e=0,a=g.length;e<a;e++){var c=g[e];if(b===c.get("data")){h=c;break}}}return h
},isMatchActive:function(a){var c=NO;var e=a.get("matchGroup");var b=this.get("activeMatchGroups");
if(b){c=(b.indexOf(e)!==-1)}return c},isMatchSelected:function(a){var e=NO;var b=a.get("matchGroup");
var c=this.get("content");e=(c===b);return e},isMatchBright:function(b){var a=NO;
var c=Cv.originalityController.get("mode");if((c==Cv.originalityController.CUMULATIVE_MODE)&&!Cv.originalityDataTreeController.get("selectedGroupNode")){a=YES
}else{if(c===Cv.originalityController.FULL_SOURCE_MODE){a=this.isMatchSelected(b)
}else{a=this.isMatchActive(b)}}return a}});sc_require("controllers/originality_match_group");
Cv.OriginalityMatchGroupSelectorView=SC.View.extend({childViews:"prevMatchButton bodyLabelView nextMatchButton".w(),classNames:"match-group-selector-view",selectedNodeBinding:"Cv.originalityDataTreeController.selectedNode",selectedNodeBindingDefault:SC.Binding.oneWay(),matchGroupBinding:"Cv.originalityMatchGroupController.content",matchGroupBindingDefault:SC.Binding.oneWay(),prevMatchButton:SC.ButtonView.design({layout:{top:1,height:26,left:0,width:30},classNames:"left-match",isEnabledBinding:".parentView.selectedNode",target:Cv.originalityMatchGroupController,action:"selectPrevMatchGroup"}),nextMatchButton:SC.ButtonView.design({layout:{top:1,height:26,right:0,width:30},classNames:"right-match",isEnabledBinding:".parentView.selectedNode",target:Cv.originalityMatchGroupController,action:"selectNextMatchGroup"}),bodyLabelView:SC.LabelView.design({layout:{top:5,bottom:0,left:30,right:30},textAlign:SC.ALIGN_CENTER,classNames:"match-instance-conroller-label",matchGroupIndexBinding:"Cv.originalityMatchGroupController.matchGroupIndex",matchGroupIndexBindingDefault:SC.Binding.oneWay(),activeMatchGroupsBinding:"Cv.originalityActiveMatchGroupsController.content",activeMatchGroupsBindingDefault:SC.Binding.oneWay(),selectedNodeBinding:"Cv.originalityDataTreeController.selectedNode",selectedNodeBindingDefault:SC.Binding.oneWay(),value:function(){var c=null;
var a=this.get("matchGroupIndex");var b=this.getPath("activeMatchGroups.length")||0;
if(a+1>0){c="_Match %@ of %@".loc(a+1,b)}else{if(b===1){c="_%@ match".loc(b)}else{c="_%@ matches".loc(b)
}}return this.get("selectedNode")?c:""}.property("matchGroupIndex","activeMatchGroups","selectedNode").cacheable(),isVisible:function(){var b=this.get("value");
var a=!SC.none(b);return a}.property("value").cacheable()})});sc_require("controllers/services/originality");
sc_require("mixins/hoverable");sc_require("views/originality_group_node_item");sc_require("views/originality_source_tree_node_item");
sc_require("views/originality_source_item");sc_require("views/originality_match_group_selector");
Cv.originalityDataTreeController=SC.ArrayController.create({content:null,arrangedObjects:null,arrangedObjectsLength:null,arrangedObjectsLengthBindingDefault:SC.Binding.oneWay(),selectedNode:null,expandedNode:null,isExcludingSources:NO,BATCH_SYNC_TIMEOUT:50,BATCH_SYNC_RENDER_TIMEOUT:100,BATCH_SYNC_ITEM_COUNT:80,mode:null,modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),originalityIsVisible:null,originalityIsVisibleBinding:"Cv.originalityController.isVisible",originalityIsVisibleBindingDefault:SC.Binding.oneWay(),_paperId:null,_paperIdBinding:"Cv.originalityController.paperId",_paperIdBindingDefault:SC.Binding.oneWay(),contentPaperId:null,translateLanguage:null,translateLanguageBinding:"Cv.originalityController.translateLanguage",translateLanguageBindingDefault:SC.Binding.oneWay(),_cumulativeData:null,_cumulativeDataBindingDefault:SC.Binding.oneWay(),_cumulativeDataIsLoaded:null,_singleSourceData:null,_singleSourceDataBindingDefault:SC.Binding.oneWay(),_singleSourceDataIsLoaded:null,allowsMultipleSelection:NO,_arrangedObjectsDidChange:function(){var a=this.get("arrangedObjects");
if(a&&!this.arrangedObjectsLengthBinding){this.arrangedObjectsLengthBinding=this.bind("arrangedObjectsLength",".arrangedObjects.length")
}else{if(this.arrangedObjectsLengthBinding){this.arrangedObjectsLengthBinding.disconnect();
this.arrangedObjectsLengthBinding=null}}}.observes("arrangedObjects"),selectedGroupNode:function(){var a=null;
if(this.getPath("selectedNode.isGroupNode")){a=this.getPath("selectedNode.data")}else{if(this.getPath("selectedNode.isSourceTreeNode")||this.getPath("selectedNode.isSource")){a=this.getPath("selectedNode.data.groupNode")
}}return a}.property("selectedNode").cacheable(),selectedSourceTreeNode:function(){var a=null;
if(this.getPath("selectedNode.isSourceTreeNode")){a=this.getPath("selectedNode.data")
}else{if(this.getPath("selectedNode.isSource")){a=this.getPath("selectedNode.data.sourceTreeNode")
}}return a}.property("selectedNode").cacheable(),selectedSource:function(){var a=null;
if(this.getPath("selectedNode.isSource")){a=this.getPath("selectedNode.data")}return a
}.property("selectedNode").cacheable(),researchSourceGroupNodeBinding:"Cv.originalityController.researchSourceGroupNode",researchSourceGroupNodeBindingDefault:SC.Binding.oneWay(),cumulativeArrangedObjects:function(){var a=null;
var b=this.get("mode");if(b===Cv.originalityController.CUMULATIVE_MODE){a=this.get("arrangedObjects")
}return a}.property("arrangedObjects").cacheable(),singleSourceArrangedObjects:function(){var a=null;
var b=this.get("mode");if(b===Cv.originalityController.SINGLE_SOURCE_MODE){a=this.get("arrangedObjects")
}return a}.property("arrangedObjects","arrangedObjectsLength").cacheable(),researchModeArrangedObjects:function(){var a=null;
var b=this.get("mode");if(b===Cv.originalityController.RESEARCH_MODE){a=this.get("arrangedObjects")
}return a}.property("arrangedObjects").cacheable(),groupNodeItemViewClass:Cv.OriginalityGroupNodeItemView.extend({mouseDown:function(b){if(Ip.targetIsInElement(b,"research-mode-link",this.get("layer"))){var a=this.getPath("content.data");
Cv.originalityController.set("researchSourceGroupNode",a);Cv.originalityController.set("mode",Cv.originalityController.RESEARCH_MODE);
return YES}return NO},render:function(c,e){arguments.callee.base.apply(this,arguments);
var b=[];b.push('<div class="clickable research-mode-link" title="%@">'.fmt("_View Match Breakdown".loc()));
b.push("</div>");var a=b.join("");c.push(a)}}),sourceTreeNodeItemViewClass:Cv.OriginalitySourceTreeNodeItemView.extend({showCheckboxBinding:"Cv.originalityDataTreeController.isExcludingSources",mouseDown:function(g){var e=NO;
if(Ip.targetIsInElement(g,"source-link",this.get("layer"))){var a=this.getPath("content.data");
var c=a.getPath("sources.firstObject.linkUrl");c=!Ip.isAbsoluteUrl(c)?Ip.LocalizedUrl.prepareUrl(c):c;
window.open(c,"_blank");e=YES}else{e=arguments.callee.base.apply(this,arguments);
if(!e){var i=!!this.getPath("content.treeItemChildren");if(i){var h=this.getPath("content.treeItemIsExpanded");
var f=this.get("content");if(!h){Cv.originalityDataTreeController.expandNode(f)}else{var b=this.get("isSelected");
if(b){Cv.originalityDataTreeController.collapseNode(f)}}}e=NO}}return e},render:function(e,f){arguments.callee.base.apply(this,arguments);
var c=this.getPath("content.data.sources.length");if(c===1){var b=[];b.push('<div class="clickable source-link" title="%@">'.fmt("_View source in web page".loc()));
b.push("&nbsp;");b.push("</div>");var a=b.join("");e.push(a)}},isSelectedDidChange:function(){var a=this.get("isSelected");
var b=this.get("isExpanded");if(!a&&b){this.collapse()}}.observes("isSelected")}),sourceItemViewClass:Cv.OriginalitySourceItemView.extend({showCheckboxBinding:"Cv.originalityDataTreeController.isExcludingSources",mouseDown:function(c){var b=NO;
if(Ip.targetIsInElement(c,"source-link",this.get("layer"))){var e=this.getPath("content.data");
var a=e.get("linkUrl");a=!Ip.isAbsoluteUrl(a)?Ip.LocalizedUrl.prepareUrl(a):a;window.open(a,"_blank");
b=YES}else{b=arguments.callee.base.apply(this,arguments)}return b},render:function(c,e){arguments.callee.base.apply(this,arguments);
var b=[];b.push('<div class="clickable source-link" title="%@">'.fmt("_View source in web page".loc()));
b.push("&nbsp;");b.push("</div>");var a=b.join("");c.push(a)}}),_updateArrangedObjects:function(){if(SC.browser.isIE){this._setNextBatchSync(YES)
}else{var a=this.get("content");this.set("arrangedObjects",a)}}.observes("content"),_setNextBatchSync:function(b){var a=this;
if(this._nextBatchSyncTimeoutId){window.clearTimeout(this._nextBatchSyncTimeoutId);
this._nextBatchSyncTimeoutId=null}this._nextBatchSyncTimeoutId=window.setTimeout(function(){a._nextBatchSyncTimeoutId=null;
a._batchSync(b)},this.BATCH_SYNC_TIMEOUT);window.setTimeout(this._triggerRunLoop,this.BATCH_SYNC_RENDER_TIMEOUT)
},_batchSync:function(k){if(this._nextBatchSyncTimeoutId){window.clearTimeout(this._nextBatchSyncTimeoutId);
this._nextBatchSyncTimeoutId=null}var b=this.getPath("content.length");var m=NO;var a;
if(k){a=[];m=YES}else{a=this.get("arrangedObjects");if(!a){a=[];m=YES}}var l=this.get("content");
var f=a.get("length");if(!b){this.set("arrangedObjects",l)}else{SC.Observers.suspendPropertyObserving();
var o=this._nextBatchSyncIndex||0;var j=Math.min(o+this.BATCH_SYNC_ITEM_COUNT,b)-1;
for(var h=o;h<=j;h++){var e=a[h];var c=l[h];if(!e){var g=l.slice(h,j+1);a.pushObjects(g);
break}else{if(e===c){continue}else{if(l.indexOf(e)!==-1){a.insertAt(h,c)}else{if(a.indexOf(c)!==-1){a.removeObject(c)
}a.replace(h,1,c)}}}}var n=(b>(j+1));if(n){this._setNextBatchSync();this._nextBatchSyncIndex=j+1
}else{a.set("length",b);this._nextBatchSyncIndex=null}if(m){this.set("arrangedObjects",a)
}SC.Observers.resumePropertyObserving()}},_triggerRunLoop:function(){SC.run(function(){})
},_updateContent:function(){var g=this.get("originalityIsVisible");var f=this.get("_paperId");
this.set("contentPaperId",f);if(!g){this.set("content",null);return}var k;var h=this.get("mode");
var j=null;if(h===Cv.originalityController.CUMULATIVE_MODE){k=Cv.originalityController.get("cumulativeData");
if(k){this._destroyCumulativeDataBinding_();var e=k.get("cumulativeGroupNodes");j=e.map(function(o){var p=SC.Object.create({isGroupNode:YES,data:o,itemViewClass:this.get("groupNodeItemViewClass")});
return p},this)}else{this._createCumulativeDataBinding_()}}else{if(h===Cv.originalityController.SINGLE_SOURCE_MODE){var l=Cv.originalityController.get("singleSourceData");
if(l){this._destroySingleSourceDataBinding_();var i=l.get("sourceTreeNodes");j=i.map(function(o){var q=SC.Object.create({isSourceTreeNode:YES,data:o,itemViewClass:this.get("sourceTreeNodeItemViewClass")});
var p=o.get("sources");if(p.get("length")>1){q.treeItemIsExpanded=NO;q.treeItemChildren=p.map(function(t){var s=SC.Object.create({isSource:YES,data:t,sourceTreeNodeItem:q,itemViewClass:this.get("sourceItemViewClass")});
return s},this)}return q},this)}else{this._createSingleSourceDataBinding_()}}else{if(h===Cv.originalityController.RESEARCH_MODE){k=Cv.originalityController.get("cumulativeData");
if(k){this._destroyCumulativeDataBinding_();var c=Cv.originalityController.get("researchSourceGroupNode");
var n=c.get("sourceTreeNodes");j=n.map(function(o){var q=SC.Object.create({isSourceTreeNode:YES,data:o,itemViewClass:this.get("sourceTreeNodeItemViewClass")});
var p=o.get("sources");if(p.get("length")>1){q.treeItemIsExpanded=NO;q.treeItemChildren=p.map(function(t){var s=SC.Object.create({isSource:YES,data:t,sourceTreeNodeItem:q,itemViewClass:this.get("sourceItemViewClass")});
return s},this)}return q},this)}else{this._createCumulativeDataBinding_()}}else{if(h===Cv.originalityController.FULL_SOURCE_MODE){var b=Cv.originalityFullSourceModeController.getPath("sourceData.source");
if(b){var m=SC.Object.create({isSource:YES,data:b});j=[m]}}}}}SC.Observers.suspendPropertyObserving();
this.set("content",j);this.set("selectedNode",null);this.set("expandedNode",null);
if(j){if((h===Cv.originalityController.SINGLE_SOURCE_MODE)||(h===Cv.originalityController.RESEARCH_MODE)){var a=j[0];
if(a&&a.get("treeItemChildren")){this._expandNode(a,j);this.selectObject(a)}}}SC.Observers.resumePropertyObserving()
},updateContentIfNeeded:function(){if(!this._isUpdatingContent){this.invokeOnce(this._updateContentIfNeeded,this)
}}.observes("mode","originalityIsVisible","_paperId","translateLanguage"),_updateContentIfNeeded:function(){this._isUpdatingContent=YES;
this._updateContent();this._isUpdatingContent=NO},_cumulativeDataDidChange:function(){var a=this.get("_cumulativeData");
if(a&&!this._cumulativeDataIsLoadedBinding){this._cumulativeDataIsLoadedBinding=this.bind("_cumulativeDataIsLoaded","._cumulativeData.isLoaded")
}else{if(this._cumulativeDataIsLoadedBinding){this._cumulativeDataIsLoadedBinding.disconnect();
this._cumulativeDataIsLoadedBinding=null}}}.observes("_cumulativeData"),_cumulativeDataDidLoad:function(){var b=this.get("mode");
if(b===Cv.originalityController.CUMULATIVE_MODE){var a=Cv.originalityController.getPath("cumulativeData.cumulativeGroupNodes");
if(a){this.updateContentIfNeeded()}}else{if(b===Cv.originalityController.RESEARCH_MODE){this._updateResearchSourceGroupNode()
}}}.observes("_cumulativeData","_cumulativeDataIsLoaded"),_createCumulativeDataBinding_:function(){if(!this._cumulativeDataBinding){this._cumulativeDataBinding=this.bind("_cumulativeData","Cv.originalityController.cumulativeData")
}},_destroyCumulativeDataBinding_:function(){if(this._cumulativeDataBinding){this._cumulativeDataBinding.disconnect();
this._cumulativeDataBinding=null}},_singleSourceDataDidChange:function(){var a=this.get("_singleSourceData");
if(a&&!this._singleSourceDataIsLoadedBinding){this._singleSourceDataIsLoadedBinding=this.bind("_singleSourceDataIsLoaded","._singleSourceData.isLoaded")
}else{if(this._singleSourceDataIsLoadedBinding){this._singleSourceDataIsLoadedBinding.disconnect();
this._singleSourceDataIsLoadedBinding=null}}}.observes("_singleSourceData"),_singleSourceDataDidLoad:function(){var a=this.get("mode");
if(a===Cv.originalityController.SINGLE_SOURCE_MODE){var b=Cv.originalityController.getPath("singleSourceData.sourceTreeNodes");
if(b){this.updateContentIfNeeded()}}}.observes("_singleSourceData","_singleSourceDataIsLoaded"),_createSingleSourceDataBinding_:function(){if(!this._singleSourceDataBinding){this._singleSourceDataBinding=this.bind("_singleSourceData","Cv.originalityController.singleSourceData")
}},_destroySingleSourceDataBinding_:function(){if(this._singleSourceDataBinding){this._singleSourceDataBinding.disconnect();
this._singleSourceDataBinding=null}},_updateResearchSourceGroupNode:function(){var c=this.get("mode");
if(c===Cv.originalityController.RESEARCH_MODE){var a=Cv.originalityController.get("researchSourceGroupNode");
if(!a){var b=Cv.originalityController.getPath("cumulativeData.cumulativeGroupNodes");
if(b){a=b[0];Cv.originalityController.set("researchSourceGroupNode",a)}}}}.observes("mode"),_researchSourceGroupNodeDidChange:function(){var a=Cv.originalityController.get("researchSourceGroupNode");
var b=this.get("mode");if(b===Cv.originalityController.RESEARCH_MODE){if(a!==this._previousResearchSourceGroupNode){this.updateContentIfNeeded()
}this._updateResearchSourceGroupNodeSecondaryDataIsLoadedBinding_()}this._previousResearchSourceGroupNode=a
}.observes("researchSourceGroupNode"),researchSourceGroupNodeSecondaryDataIsLoaded:NO,_updateResearchSourceGroupNodeSecondaryDataIsLoadedBinding_:function(){if(this.researchSourceGroupNodeSecondaryDataIsLoadedBinding){this.researchSourceGroupNodeSecondaryDataIsLoadedBinding.disconnect();
this.researchSourceGroupNodeSecondaryDataIsLoadedBinding=null}this.set("researchSourceGroupNodeSecondaryDataIsLoaded",this.getPath("researchSourceGroupNode.secondaryDataIsLoaded"));
this.researchSourceGroupNodeSecondaryDataIsLoadedBinding=this.bind("researchSourceGroupNodeSecondaryDataIsLoaded",SC.Binding.oneWay(".researchSourceGroupNode.secondaryDataIsLoaded"))
},_researchSourceGroupNodeSecondaryDataIsLoadedDidChange:function(){var b=this.get("mode");
if(b===Cv.originalityController.RESEARCH_MODE){var a=this.get("researchSourceGroupNodeSecondaryDataIsLoaded");
if(a){this.updateContentIfNeeded()}}}.observes("researchSourceGroupNodeSecondaryDataIsLoaded"),_selectionDidChange:function(){this.invokeOnce(this._updateSelectedNode,this)
}.observes("*selection.[]"),_updateSelectedNode:function(){var a=this.get("selection").firstObject();
this.set("selectedNode",a)},_selectFirstNodeIfNeeded:function(){var a=Cv.originalityController.get("isActive");
if(!a){return}var e=this.get("mode");if((e===Cv.originalityController.SINGLE_SOURCE_MODE)||(e===Cv.originalityController.RESEARCH_MODE)){var c=this.get("selectedNode");
if(!c){if(SC.browser.isIE){var b=this;window.setTimeout(function(){SC.run(b._selectFirstNode,b)
},100)}else{this._selectFirstNode()}}}}.observes("arrangedObjects"),_selectFirstNode:function(){var a=this.getPath("arrangedObjects.firstObject");
if(a){this.selectObject(a)}},expandNode:function(e){var b=e.get("treeItemChildren");
if(b&&!e.get("treeItemIsExpanded")){SC.Observers.suspendPropertyObserving();var a=this.get("expandedNode");
if((a)&&(a!==e)){this.collapseNode(a)}var c=this.get("content");this._expandNode(e,c);
SC.Observers.resumePropertyObserving();this._setNextBatchSync()}},_expandNode:function(e,c){var a=c.indexOf(e)+1;
var b=e.get("treeItemChildren");b.forEach(function(f){c.insertAt(a,f);a++});e.set("treeItemIsExpanded",YES);
this.set("expandedNode",e)},collapseNode:function(e){var b=e.get("treeItemChildren");
if(b&&e.get("treeItemIsExpanded")){SC.Observers.suspendPropertyObserving();var c=this.get("content");
c.removeObjects(b);e.set("treeItemIsExpanded",NO);var a=this.get("expandedNode");
if(a===e){this.set("expandedNode",null)}SC.Observers.resumePropertyObserving();this._setNextBatchSync()
}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");
if(!a){var c=this.get("selection");var b=c.get("isFrozen");if(b){c.set("isFrozen",NO)
}c.clear();if(b){c.set("isFrozen",YES)}}else{arguments.callee.base.apply(this,arguments)
}return this}});Cv.originalityDataTreeSelectedNodeController=SC.ObjectController.create({contentBinding:"Cv.originalityDataTreeController.selectedNode",contentBindingDefault:SC.Binding.oneWay()});
Cv.originalityDataTreeSelectedNodeDataController=SC.ObjectController.create({contentBinding:"Cv.originalityDataTreeSelectedNodeController.data",contentBindingDefault:SC.Binding.oneWay()});
Cv.originalityFullSourceDataController=SC.ObjectController.create({contentBinding:"Cv.originalityFullSourceModeController.sourceData",contentBindingDefault:SC.Binding.oneWay()});
Cv.originalityFullSourceModeController=SC.Controller.create({mode:-1,modeBinding:SC.Binding.oneWay("Cv.originalityController.mode"),originalityIsActive:NO,originalityIsActiveBinding:SC.Binding.oneWay("Cv.originalityController.isActive"),previousMode:-1,previousResearchSourceGroupNode:null,previousVerticalScrollOffset:null,previousHorizontalScrollOffset:null,sourceId:null,nodeId:null,isInFullSourceMode:function(){var b=NO;
var a=this.get("originalityIsActive");if(a){var c=this.get("mode");b=(c===Cv.originalityController.FULL_SOURCE_MODE)
}return b}.property("mode","originalityIsActive").cacheable(),fullSourceData:null,fullSourceDataBinding:SC.Binding.oneWay("Cv.originalityController.fullSourceData"),dataTreeContent:null,dataTreeContentBinding:SC.Binding.oneWay("Cv.originalityDataTreeController.content"),hasValidSourceId:function(){var a=this.get("sourceId");
var b=(a===parseInt(a));return b}.property("sourceId").cacheable(),hasValidNodeId:function(){var b=this.get("nodeId");
var a=(b===parseInt(b));return a}.property("nodeId").cacheable(),sourceDataIsLoading:function(){var b=this.get("_sourceDataRecordArray");
var c=this.get("sourceData");var a=(b&&!c);return a}.property("_sourceDataRecordArray","sourceData").cacheable(),_sourceDataRecordArray:null,_sourceDataRecordArrayLength:-1,sourceData:function(){var f=null;
var c=this.get("isInFullSourceMode");var e=this.get("hasValidSourceId");var b=this.get("hasValidNodeId");
if(c&&e&&b){var g=this.get("sourceId");var h=this.get("nodeId");var a=this.get("fullSourceData").getSourceDataRecordArray(g,h);
if(a.get("length")>0){f=a.firstObject()}else{this.set("_sourceDataRecordArray",a)
}if(!f){this.set("_sourceDataRecordArrayLength",-1)}}return f}.property("isInFullSourceMode","sourceId","nodeId","_sourceDataRecordArrayLength").cacheable(),_sourceDataDidLoad:function(){var a=this.get("sourceData");
var b=this.get("mode");if(a){if(b===Cv.originalityController.FULL_SOURCE_MODE){Cv.originalityDataTreeController.updateContentIfNeeded()
}}}.observes("sourceData"),_dataTreeContentDidChange:function(){this.invokeLast(this._setSelectedNode)
}.observes("dataTreeContent"),_setSelectedNode:function(){var e=this.get("dataTreeContent");
var c=this.get("mode");if(e&&(c===Cv.originalityController.FULL_SOURCE_MODE)){var b=e[0];
var a=SC.SelectionSet.create();a.addObject(b).freeze();Cv.originalityDataTreeController.set("selection",a)
}},_sourceDataRecordArrayDidChange:function(){if(this._sourceDataRecordArrayLengthBinding){this._sourceDataRecordArrayLengthBinding.disconnect();
this._sourceDataRecordArrayLengthBinding=null;this._sourceDataRecordArrayLength=-1
}if(this.get("_sourceDataRecordArray")){this._sourceDataRecordArrayLengthBinding=this.bind("_sourceDataRecordArrayLength",SC.Binding.oneWay("._sourceDataRecordArray.length"))
}}.observes("_sourceDataRecordArray"),modeDidChange:function(){var a=this.get("mode");
if(a!==Cv.originalityController.FULL_SOURCE_MODE){this.set("previousMode",-1);this.set("previousResearchSourceGroupNode",null);
this.set("previousVerticalScrollOffset",null);this.set("previousHorizontalScrollOffset",null);
this.set("sourceId",null);this.set("nodeId",null)}}.observes("mode"),enterFullSourceMode:function(f){var h=this.get("mode");
if(h===Cv.originalityController.FULL_SOURCE_MODE){return}this.set("previousMode",h);
if(h===Cv.originalityController.CUMULATIVE_MODE){var c=Cv.paperView.get("verticalScrollOffset");
var a=Cv.paperView.get("horizontalScrollOffset");this.set("previousVerticalScrollOffset",c);
this.set("previousHorizontalScrollOffset",a)}else{if(h===Cv.originalityController.RESEARCH_MODE){var b=Cv.originalityController.get("researchSourceGroupNode");
this.set("previousResearchSourceGroupNode",b)}}var e=f.get("id");var g=f.get("node");
this.set("sourceId",e);this.set("nodeId",g);Cv.originalityController.set("mode",Cv.originalityController.FULL_SOURCE_MODE)
},exitFullSourceMode:function(){var e=this.get("previousMode");if(e===Cv.originalityController.CUMULATIVE_MODE){var c=this.get("previousVerticalScrollOffset");
if((c===0)||(c>0)){Cv.paperView.set("verticalScrollOffset",c)}var a=this.get("previousHorizontalScrollOffset");
if((a===0)||(a>0)){Cv.paperView.set("horizontalScrollOffset",a)}}else{if(e===Cv.originalityController.RESEARCH_MODE){var b=this.get("previousResearchSourceGroupNode");
Cv.originalityController.set("researchSourceGroupNode",b)}}Cv.originalityController.set("mode",e)
}});Cv.originalityGlimpseController=SC.ObjectController.create({contentBinding:"Cv.originalityMatchGroupController.glimpse",contentBindingDefault:SC.Binding.oneWay(),hasLoadingError:NO,hasLoadingErrorBinding:"Cv.originalityMatchGroupController.glimpseHasLoadingError",hasLoadingErrorBindingDefault:SC.Binding.oneWay()});
Cv.originalityOptionsController=SC.ObjectController.create({content:null,contentBindingDefault:SC.Binding.oneWay(),originalityIsActive:null,originalityIsActiveBinding:"Cv.originalityController.isActive",originalityIsActiveBindingDefault:SC.Binding.oneWay(),originalityIsVisible:null,originalityIsVisibleBinding:"Cv.originalityController.isVisible",originalityIsVisibleBindingDefault:SC.Binding.oneWay(),mode:null,modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),useMultiColorHighlighting:null,redirectAfterExitingBusyState:NO,commitOptionChanges:function(a){this.invokeLast(function(){this._commitOptionChanges(a)
},this)},_commitOptionChanges:function(b){var a;this.set("redirectAfterExitingBusyState",YES);
if(this.isDirty()){Cv.userController.set("useMultiColorHighlighting",this.get("useMultiColorHighlighting"));
a=this.get("content");a.commitRecord();Cv.originalityController.unloadData()}if(!b){this._commitUserControllerChanges()
}},_commitUserControllerChanges:function(){Cv.userController.set("useMultiColorHighlighting",this.get("useMultiColorHighlighting"));
Cv.userController.get("content").commitRecord();this._updateUserControllerValues()
},_updateUserControllerValues:function(){var a=Cv.userController.get("useMultiColorHighlighting");
this.set("useMultiColorHighlighting",a);this.isBusyDidChange()},isBusyDidChange:function(){if(!this.get("isBusy")&&this.get("redirectAfterExitingBusyState")){this.set("redirectAfterExitingBusyState",NO);
Cv.originalityController.set("mode",this.CUMULATIVE_MODE)}}.observes("isBusy"),isDirty:function(){return((this.get("status")&SC.Record.DIRTY)!==0||this.get("useMultiColorHighlighting")!==Cv.userController.get("useMultiColorHighlighting"))
}.property("status","useMultiColorHighlighting").cacheable(),isBusy:function(){return(this.get("status")&SC.Record.BUSY)!==0
}.property("status").cacheable(),_updateContent:function(){var a=this.get("originalityIsActive");
var b=this.get("originalityIsVisible");var f=this.get("mode");var e=((f===Cv.originalityController.FILTER_SETTINGS_MODE)||Cv.config.get("ALLOW_OR_OPTIONS_IN_ALL_MODES"));
if((a||b)&&e){var c=Cv.originalityController.get("originalityOptions");if(c){this.set("content",c)
}else{if(!this.contentBinding){this.contentBinding=this.bind("content","Cv.originalityController.originalityOptions")
}}this._updateUserControllerValues()}else{Cv.originalityOptionsController.refreshIfNeeded();
if(this.contentBinding){this.contentBinding.disconnect();this.contentBinding=null
}this.set("content",null)}}.observes("originalityIsActive","originalityIsVisible","mode"),refreshIfNeeded:function(){if(this.get("status")===SC.Record.READY_DIRTY){this.get("content").refresh()
}},exclusionsWarningCheck:function(){if(!Cv.config.get("HIGH_BIBLIO_QUOTE_WARNING")){return
}var a=this.get("content");if(!a||this.get("status")!==SC.Record.READY_CLEAN||a.get("paper")!==Cv.paperController.get("content")){return
}this.invokeOnce(this.showExlcusionsWarning)}.observes("status","excludeQuotes","excludeBibliography"),showExlcusionsWarning:function(){if(!Cv.config.get("HIGH_BIBLIO_QUOTE_WARNING")){return
}var a=this.get("content"),e=this.get("paper"),c=[],b=Cv.config.get("HIGH_QUOTE_THRESHOLD");
bilioThresholdPercent=Cv.config.get("HIGH_BIBLIO_THRESHOLD");if(a.get("excludeQuotes")&&e.get("quotePercent")>=b){c.push("_Exclude Quoted Material is on and the paper has more than %@% of its text in quotes.".loc(b))
}if(a.get("excludeBibliography")&&e.get("biblioPercent")>=bilioThresholdPercent){c.push("_Exclude Bibliography is on and the paper has more than %@% of its text in the bibliography.".loc(bilioThresholdPercent))
}if(c.length){SC.AlertPane.plain("_Warning".loc(),c.join("\n"),null,"_Continue".loc())
}}});Cv.paperAuthorController=SC.ObjectController.create({contentBinding:"Cv.paperController.author"});
Cv.paperStubController=SC.ObjectController.create({contentBinding:"Cv.paperStubsController.selectedStub"});
Cv.PAPER_ORDERING_METHODS={"1":["similarityScore","overlap","authorLastName","authorFirstName","authorId","title","id"],"101":["DESC similarityScore","DESC overlap","DESC authorLastName","DESC authorFirstName","DESC authorId","DESC title","DESC id"],"2":["title","DESC similarityScore","DESC overlap","authorLastName","authorFirstName","authorId","id"],"102":["DESC title","similarityScore","overlap","DESC authorLastName","DESC authorFirstName","DESC authorId","DESC id"],"3":["DESC dateUploaded","authorLastName","authorFirstName","authorId","id"],"103":["dateUploaded","DESC authorLastName","DESC authorFirstName","DESC authorId","DESC id"],"4":["authorLastName","authorFirstName","title","id"],"104":["DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"5":["DESC overlapInternet","DESC similarityScore","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"105":["overlapInternet","similarityScore","authorLastName","authorFirstName","title","id"],"6":["DESC overlapPublications","DESC similarityScore","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"106":["overlapPublications","similarityScore","authorLastName","authorFirstName","title","id"],"7":["DESC overlapSubmittedWorks","DESC similarityScore","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"107":["overlapSubmittedWorks","similarityScore","authorLastName","authorFirstName","title","id"],"8":["DESC grade","DESC dateUploaded","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"108":["grade","dateUploaded","authorLastName","authorFirstName","title","id"],"9":["DESC dateUploaded","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"109":["dateUploaded","authorLastName","authorFirstName","title","id"],"10":["filetype","DESC dateUploaded","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"110":["DESC filetype","dateUploaded","authorLastName","authorFirstName","title","id"],"11":["id","DESC dateUploaded","DESC authorLastName","DESC authorFirstName","DESC title","DESC id"],"111":["DESC id","dateUploaded","authorLastName","authorFirstName","title","id"]};
Cv.paperStubsController=SC.ArrayController.create(Cv.PaperImageLoader,{assignmentBinding:"Cv.assignmentController.content",contentBinding:"Cv.assignmentController.paperStubs",currentPaperBinding:"Cv.paperController.content",allowMultipleSelection:NO,allowEmptySelection:NO,orderBy:function(){var a;
try{if(window.opener){a=Ip.findParameterInUrl("ro",window.opener.location.toString())
}}catch(b){}return Cv.PAPER_ORDERING_METHODS[a||"1"]}.property().cacheable(),selectedStub:function(a,b){if(b!==undefined){this.selectObject(b)
}return this.getPath("selection.firstObject")}.property("selection").cacheable(),selectedStubDidChange:function(){var a=this.getPath("selectedStub.id");
if(this.getPath("currentPaper.id")!=a){var c=this.get("selectedStub");var b=this.getPaperForStub(c);
this.set("currentPaper",b)}}.observes("selectedStub"),currentPaperDidChange:function(){var a=this.getPath("currentPaper.id");
if(this.getPath("selectedStub.id")!=a){var b=this.findProperty("id",parseInt(a));
if(!b){return}this.set("selectedStub",b)}}.observes("currentPaper"),contentDidChange:function(){if((this.get("status")&SC.Record.READY)!==0){this.currentPaperDidChange()
}}.observes("status"),nextStub:function(){var b=this.get("arrangedObjects");if(!b){return null
}var a=b.indexOf(this.get("selectedStub"));if(a>=0&&a<=b.length()){return b.objectAt(a+1)
}else{return null}}.property("selection","arrangedObjects","assignment").cacheable(),previousStub:function(){var b=this.get("arrangedObjects");
if(!b){return null}var a=b.indexOf(this.get("selectedStub"));if(a>0){return b.objectAt(a-1)
}else{return null}}.property("selection","arrangedObjects").cacheable(),selectNext:function(){this.set("selectedStub",this.get("nextStub"))
},selectPrevious:function(){this.set("selectedStub",this.get("previousStub"))},getPaperForStub:function(b){var c=null;
if(b){var a=b.get("id");c=Cv.store.find(Cv.Paper,a)}return c},previousPaper:function(){var b=this.get("previousStub");
var a=this.getPaperForStub(b);return a}.property("previousStub").cacheable(),nextPaper:function(){var a=this.get("nextStub");
var b=this.getPaperForStub(a);return b}.property("nextStub").cacheable()});Cv.paperTextSelectionController=SC.ObjectController.create({THRESHOLD:20,textSelectionGlyph1:null,textSelectionHighlight:null,paper:null,paperBinding:SC.Binding.oneWay("Cv.paperController.content"),mouseDownPageListViewPoint:null,mouseDownIsOnGlyph:function(){var a=NO;
var b=this.getMouseDownLocation();if(b){a=!!this.getGlyphAt(b)}return a}.property("mouseDownPageListViewPoint").cacheable(),getMouseDownLocation:function(){var b=null;
var a=this.get("mouseDownPageListViewPoint");if(a){b=this.getPoint(a)}return b},pageListView:function(){var a=Cv.paperView.get("pageListView");
return a}.property().cacheable(),isSelectingText:function(){var a=this.get("mouseDownPageListViewPoint");
return !!a}.property("mouseDownPageListViewPoint").cacheable(),paperDidChange:function(){this.clearTextSelectionHighlight()
}.observes("paper"),processPoint1:function(f){var c=NO;var a=this.getPaperPageViewPoint(f);
if(a&&(!this.get("textSelectionHighlight")||!this.isInTextSelectionBounds(f))){this.cancelBuildingTextSelection();
var e=this.getGlyphAt(f)||this.getGlyphNear(f,NO)||this.getGlyphNear(f,YES);if(e){this._setGlyph1(e);
c=YES}var b=this.getPageListViewPoint(f);this.set("mouseDownPageListViewPoint",b)
}return c},processPoint2:function(e){var b=YES;var h=this.getMouseDownLocation();
var g=this.isUpStart(e,h);var i=this.get("mouseDownIsOnGlyph");var c;if(i){c=this.get("textSelectionGlyph1")
}else{c=this._findGlyph1(e,g,h);if(c){this.set("textSelectionGlyph1",c);var f=this.get("textSelectionHighlight");
if(f){f.set("glyphAddress1",c.get("address"))}}}if(c){var a=this._findGlyph2(e,c,g);
if(a){this._setGlyph2(a)}else{this.clearTextSelectionHighlight();b=NO}}else{this.clearTextSelectionHighlight();
b=NO}return b},_findGlyph1:function(a,b,f){var h=this.getGlyphNear(f,b);if(!h){var g=this.getPath("paper.pages");
var c=this.getPageView(a);var j=this.getPageView(f);if(c&&(c!==j)){var e=c.get("pageIndex");
var i=g.objectAt(e).get("glyphPage");if(b){h=i.get("lastGlyph")}else{h=i.get("firstGlyph")
}}}return h},_findGlyph2:function(a,i,b){var g;var k;var h=this.getPath("paper.pages");
var e=this.getPageView(a);if(e){g=this.getGlyphAt(a)||this.getGlyphNear(a,!b,i);if(!g){var c=e.get("pageIndex");
if(c!==i.get("pageIndex")){if(b){var j=c+1;k=h.objectAt(j).get("glyphPage");g=k.get("firstGlyph")
}else{var l=c-1;k=h.objectAt(l).get("glyphPage");g=k.get("lastGlyph")}}}}else{if(this.isAbovePaperView(a)){k=h.firstObject().get("glyphPage");
g=k.get("firstGlyph")}else{if(this.isBelowPaperView(a)){var f=h.get("length")-1;k=h.objectAt(f).get("glyphPage");
g=k.get("lastGlyph")}}}return g},isUpStart:function(a,c){var b=NO;if((a.pageY<c.pageY)||((a.pageY===c.pageY)&&(a.pageX<c.pageX))){b=YES
}return b},_setGlyph1:function(a){this.clearTextSelectionHighlight();this.set("textSelectionGlyph1",a)
},_setGlyph2:function(a){var c=this.get("textSelectionHighlight");if(!c){c=this.createTextSelectionHighlight()
}var b=null;if(a){b=a.get("address")}c.set("glyphAddress2",b)},createTextSelectionHighlight:function(){var a=this.get("textSelectionGlyph1");
var b=SC.Object.create(Cv.Highlightable,{glyphAddress1:a.get("address"),glyphAddress2:a.get("address"),paper:this.get("paper"),color:Cv.config.HIGHLIGHT_COLORS_ACTIVE});
this.set("textSelectionHighlight",b);return b},clearTextSelectionHighlight:function(){var a=this.get("textSelectionHighlight");
if(a){this.set("textSelectionHighlight",null)}},cancelBuildingTextSelection:function(){this.set("textSelectionGlyph1",null);
this.set("mouseDownPageListViewPoint",null)},getPoint:function(c){var b=c.pageX;var h=c.pageY;
var g=this.get("pageListView");var e={x:b,y:h};var f=g.convertFrameToView(e);var a={pageX:f.x,pageY:f.y};
return a},getPageListViewPoint:function(b){var a=b.pageX;var h=b.pageY;var g=this.get("pageListView");
var e={x:a,y:h};var f=g.convertFrameFromView(e);var c={pageX:f.x,pageY:f.y};return c
},getPaperPageViewPoint:function(a){var b=null;var c=this.getPageView(a);if(c){b=c.getPaperPagePoint(a)
}return b},isAbovePaperView:function(b){var e=NO;var a=b.pageX;var h=b.pageY;var g=this.get("pageListView");
var c={x:a,y:h};var f=g.convertFrameFromView(c);if(f.y<0){e=YES}return e},isBelowPaperView:function(b){var e=NO;
var a=b.pageX;var i=b.pageY;var h=this.get("pageListView");var c={x:a,y:i};var g=h.convertFrameFromView(c);
var f=h.get("frame").height;if(g.y>f){e=YES}return e},getPageView:function(c){var b=c.pageX;
var i=c.pageY;var h=this.get("pageListView");var e={x:b,y:i};var g=h.convertFrameFromView(e);
var a=h.itemIndexAt(g.y);var f=h.getItemViewAt(a);return f},getPageViewForGlyphAddress:function(a){var c=this.get("pageListView");
var b=c.getItemViewAt(a.page);return b},getGlyphAt:function(a){var c=this.getPageView(a);
var b=c.getGlyphAt(a);return b},getGlyphNear:function(a,h,e){var g=this.getPageView(a);
if(e){var c=g.get("pageIndex");var f=e.get("pageIndex");if(c!==f){e=null}}var b=g.getGlyphNear(a,h,e);
return b},isAboveThreshold:function(b){var a=NO;var c=this.getMouseDownLocation();
if(c){if((Math.abs(b.pageX-c.pageX)>this.THRESHOLD)||(Math.abs(b.pageY-c.pageY)>this.THRESHOLD)){a=YES
}}return a},isInTextSelectionBounds:function(c){var m=NO;var g=this.get("textSelectionHighlight");
var k=this.getPageView(c);var h=k.get("pageIndex");if(g.isOnPage(h)){var q;var j;
var e=k.getPath("content.glyphPage");var o=g.startsOnPage(h);if(o){q=g.get("startGlyphAddress").line
}else{q=0}var b=g.endsOnPage(h);if(b){endLineIndex=g.get("endGlyphAddress").line}else{endLineIndex=e.getPath("lastLine.lineIndex")
}var i=this.getPaperPageViewPoint(c);for(var s=q;s<=endLineIndex;s++){var l=e.getLine(s);
if((s===q)&&o){startGlyph=g.get("startGlyph")}else{startGlyph=e.getGlyph(s,0)}if((s==endLineIndex)&&b){endGlyph=g.get("endGlyph")
}else{endGlyph=l.get("lastGlyph")}var n=startGlyph.get("top");var a=endGlyph.get("bottom");
var f=l.get("isRightToLeft")?endGlyph.get("right"):startGlyph.get("left");var p=l.get("isRightToLeft")?startGlyph.get("left"):endGlyph.get("right");
m=(n<=i.pageY)&&(a>=i.pageY)&&(f<=i.pageX)&&(p>=i.pageX);if(m){break}}}return m}});
Cv.pmAnswersController=SC.ArrayController.create({reviewBinding:"Cv.pmReviewController.content",paperBinding:"Cv.pmReviewController.paperReviewed",pmAssignmentBinding:"Cv.pmAssignmentController.content",reviewsAssignmentBinding:SC.Binding.oneWay("Cv.pmReviewsController.pmAssignment"),reviewsBinding:SC.Binding.oneWay("Cv.pmReviewsController.content"),_queryCache:{},content:function(){var b=this.get("pmAssignment");
var f=this.get("paper");var a=this.get("review");var g=this.get("reviewsAssignment");
var c=this.get("reviews");if(!b||!f||!a||!c||(c.length===0)||(b!=g)){return[]}var e=this._queryCache["%@_%@".fmt(b.get("id"),f.get("id"))];
if(!e){e=SC.Query.local(Cv.PmAnswer,{conditions:"review ANY {reviews}",reviews:c,url:"/assignment/peermark/%@/answers_for_paper/%@".fmt(b.get("id"),f.get("id"))});
this._queryCache["%@_%@".fmt(b.get("id"),f.get("id"))]=e}return Cv.store.find(e)}.property("review","paper","pmAssignment","reviewsAssignment","reviews").cacheable(),getAnswersForQuestion:function(b){var a=this.get("review");
var c=this.getPath("review.isAllReviews");return this.get("content").filter(function(e){if(!c){return(e.get("question")==b&&e.get("review")===a)
}else{return e.get("question")==b}})},isBusy:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});Cv.pmAssignmentController=SC.ObjectController.create({contentBinding:SC.Binding.oneWay("Cv.pmAssignmentsController.selection").single()});
Cv.pmAssignmentsController=SC.ArrayController.create({allowsMultipleSelection:NO,allowsEmptySelection:NO,orderBy:["dueDate"],pmIsVisibleBinding:"Cv.peerMarkController.isVisible",baseAssignmentBinding:"Cv.assignmentController.content",_queryCache:{},content:function(){var a=this.get("baseAssignment");
if(!a||!this.get("pmIsVisible")){return[]}var b=this._queryCache[this.getPath("baseAssignment.id")];
if(!b){b=SC.Query.local(Cv.PmAssignment,{conditions:"baseAssignment = {baseAssignment}",baseAssignment:a,url:"/assignment/%@/pm_assignments".fmt(a.get("id"))});
this._queryCache[this.getPath("baseAssignment.id")]=b}return Cv.store.find(b)}.property("baseAssignment","pmIsVisible").cacheable(),hasMultiple:function(){return this.getPath("content.length")>1
}.property("length").cacheable(),isBusy:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable(),_selectLastPmAssignmentIfNeeded:function(){if(!this.get("hasSelection")){this.invokeOnce(this._selectLastPmAssignment)
}}.observes("content","[]"),_selectLastPmAssignment:function(){var a=this.get("length");
if(a>0){var b=this.objectAt(a-1);var c=SC.SelectionSet.create();c.addObject(b).freeze();
this.set("selection",c)}}});Cv.pmIndividualReviewsController=SC.ArrayController.create({contentBinding:"Cv.pmReviewsController.reviews",isBusy:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});Cv.pmMarkListController=SC.TreeController.create({treeItemIsGrouped:YES,content:null,_updateContent:function(){var j=Cv.peerMarkController.get("isActive");
if(!j||!Cv.peerMarkController.get("isShowingMarkList")){return}var a=Cv.pmMarkSetController.get("reads");
if(a){var g=[];var b=Cv.paperController.getPath("pages.length");for(var e=0;e<b;e++){var h=Cv.pmMarkSetController.pageMarkSet(e);
var c=SC.Object.create({marks:h.get("marks"),pageIndex:h.get("pageIndex"),text:function(){return"_PAGE %@".loc(this.get("pageIndex")+1)
}.property("pageIndex").cacheable(),count:function(){return this.getPath("marks.length")
}.property("marks").cacheable(),treeItemIsExpanded:YES,treeItemChildren:function(){return this.get("marks").sortProperty("y","x","id")
}.property("marks").cacheable()});g.push(c)}var f=SC.Object.create({treeItemIsExpanded:YES,treeItemChildren:g});
this.set("content",f)}else{this.set("content",null)}},_invokeContentUpdate:function(){this.invokeOnce(this._updateContent)
}.observes("Cv.pmMarkSetController*marks.[]","Cv.paperController.content","Cv.peerMarkController.isShowingMarkList","Cv.peerMarkController.isActive"),updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");
if(!a){var c=this.get("selection");var b=c.get("isFrozen");if(b){c.set("isFrozen",NO)
}c.clear();if(b){c.set("isFrozen",YES)}}else{arguments.callee.base.apply(this,arguments)
}return this}});Cv.pmMarkSetController=SC.ObjectController.create(Cv.MarkSet,{selectedReview:null,selectedReviewBinding:SC.Binding.oneWay("Cv.pmReviewController.content"),isSingleReview:null,isSingleReviewBinding:SC.Binding.oneWay("Cv.pmReviewController.isSingleReview"),reads:function(){var b;
var a=this.get("selectedReview");if(a){var c=this.get("isSingleReview");if(c){b=[a.get("read")]
}else{b=a.get("reviews").getEach("read")}}else{b=[]}return b}.property("selectedReview").cacheable()});
Cv.pmQuestionsController=SC.ArrayController.create({isViewingQuestionsBinding:"Cv.peerMarkController.isViewingQuestions",questionsBinding:"Cv.pmAssignmentController.questions",content:function(){if(!this.get("pmAssignment")||!this.get("isViewingQuestions")){return
}return this.get("questions")}.property("pmAssignment","isViewingQuestions").cacheable(),questionsLength:-1,questionsDidChange:function(){if(this.questionsLengthBinding){this.questionsLengthBinding.disconnect();
this.questionsLengthBinding=null;this.questionsLength=-1}if(this.get("questions")){this.questionsLengthBinding=this.bind("questionsLength",SC.Binding.oneWay(".questions.length"))
}}.observes("questions")});Cv.pmReviewController=SC.ObjectController.create({contentBinding:SC.Binding.oneWay("Cv.pmReviewsController.selection").single(),isSingleReview:function(){var a=this.get("content");
return(SC.kindOf(a,Cv.Review))?YES:NO}.property("content").cacheable(),saveScore:function(){var a=this.get("read");
if(!a){return}a.commitRecord()}});Cv.pmReviewsController=SC.ArrayController.create({allowsMultipleSelection:NO,allowsEmptySelection:YES,pmAssignmentBinding:"Cv.pmAssignmentController.content",paperBinding:"Cv.paperController.content",_queryCache:{},reviews:function(){var a=this.get("pmAssignment");
var c=this.get("paper");if(!a||!c){return[]}var b=this._queryCache["%@_%@".fmt(a.get("id"),c.get("id"))];
if(!b){b=SC.Query.local(Cv.Review,{conditions:"pmAssignment = {pmAssignment} AND paperReviewed = {paperReviewed}",pmAssignment:a,paperReviewed:c,url:"/assignment/peermark/%@/reviews_for_paper/%@".fmt(a.get("id"),c.get("id")),orderBy:"readerNumber"});
this._queryCache["%@_%@".fmt(a.get("id"),c.get("id"))]=b}return Cv.store.find(b)}.property("pmAssignment","paper").cacheable(),reviewsDidChange:function(){var b=this.get("reviews");
var a=b.toArray();if(b.get("length")){a.unshiftObject(this.get("allReviewsObject"))
}this.set("content",a)}.observes("*reviews.[]","pmAssignment","paper").cacheable(),contentDidChange:function(){var e=this.get("content");
var a=this.getPath("selection.firstObject");if(e&&e.indexOf(a)==-1){var b=SC.SelectionSet.create();
if(e&&e.get("length")>0){var c=e.firstObject();b.addObject(c)}b.freeze();this.set("selection",b)
}}.observes("content"),selectedReview:function(a,b){if(b!==undefined){this.selectObject(b)
}return this.getPath("selection.firstObject")}.property("selection").cacheable(),allReviewsObject:function(){return SC.Object.create({title:"_All Reviews".loc(),submittedOnDate:null,reviewerFullName:null,typeString:null,reviewsBinding:"Cv.pmReviewsController.reviews",paperReviewed:this.get("paper"),isAllReviews:YES})
}.property("pmAssignment","paper").cacheable()});Cv.printController=SC.ObjectController.create({paperHasDigitalReceipt:null,paperHasDigitalReceiptBinding:SC.Binding.oneWay("Cv.paperController.hasDigitalReceipt"),printPaper:function(){this.request()
},downloadPaper:function(){this.request()},downloadReceipt:function(){this.request({type:"receipt"})
},delaySecondsSequence:[0,1,1,2,3,5,8,13,21,34,55,89,144,233,377],ATTEMPTS_ALLOWED:15,remainingAttemptsAllowed:null,printDownloadIsLoading:NO,pollingUrl:null,request:function(b){if(this.get("printDownloadIsLoading")){return
}try{if(Cv.demoNotice()){return}var c;if(b&&b.type=="receipt"&&Cv.config.get("CAN_DOWNLOAD_DIGITAL_RECEIPT")){c="%@/paper/%@/queue_receipt_pdf".fmt(Cv.get("inStudentMode")?"/student":"",Cv.paperController.get("id"))
}else{c="%@/paper/%@/queue_pdf".fmt(Cv.get("inStudentMode")?"/student":"",Cv.paperController.get("id"))
}var a=this.captureApplicationStateArgs();if(Cv.config.get("CAN_DOWNLOAD_DIGITAL_RECEIPT")){this.set("printDownloadIsLoading",YES)
}Ip.TransientRequest.executeTransientPost(Ip.LocalizedUrl.prepareUrl(c),a,{usePalladiumHeader:1,successCallback:function(e){if(SC.none(e.url)){Cv.printController.notifyOfError(e.message)
}else{if(Cv.config.get("CAN_DOWNLOAD_DIGITAL_RECEIPT")){Cv.printController.set("remainingAttemptsAllowed",Cv.printController.get("ATTEMPTS_ALLOWED"));
Cv.printController.set("pollingUrl",Ip.LocalizedUrl.prepareUrl(e.url));Cv.printController.scheduleNextPoll()
}else{Ip.downloadFromUrl(e.url)}}},failureCallback:function(e){Cv.printController.notifyOfError()
}})}catch(f){this.notifyOfError("_The print request failed to formulate the request".loc())
}},scheduleNextPoll:function(){var b=this.get("remainingAttemptsAllowed");if(b>0){var a=this.get("delaySecondsSequence")[this.get("ATTEMPTS_ALLOWED")-b];
SC.Timer.schedule({target:"Cv.printController",interval:1000*a,action:"_checkServerForCompletion",repeats:NO});
b--;this.set("remainingAttemptsAllowed",b)}else{this.notifyOfError()}},_checkServerForCompletion:function(){Ip.TransientRequest.executeTransientGet(Cv.printController.get("pollingUrl"),{usePalladiumHeader:1,successCallback:function(a){if(!SC.none(a.error)){Cv.printController.notifyOfError("_"+a.error)
}else{if(!SC.none(a.message)){Cv.printController.notifyOfError("_"+a.message)}else{if(!SC.none(a.ready)&&(a.ready===1)&&!SC.none(a.url)){Cv.printController.set("printDownloadIsLoading",NO);
window.location=a.url}else{Cv.printController.scheduleNextPoll()}}}},failureCallback:function(a){Cv.printController.notifyOfError("_Could not process your request".loc())
}})},captureApplicationStateArgs:function(){var c={};var a=Cv.servicesController.get("activeService");
var b=Cv.servicesController.get("visibleServices");b.forEach(function(e){if(e===a){c.as=e.get("id")
}else{var h=c.s||[];h.push(e.get("id"));c.s=h}if(e.respondsTo("captureStateArgs")){var g=e.captureStateArgs();
for(var f in g){c[f]=g[f]}}});return c},resetState:function(){this.set("printDownloadIsLoading",NO);
this.set("remainingAttemptsAllowed",null);this.set("pollingUrl",null)},receiptDownloadEnabled:function(){var b=this.get("printDownloadIsLoading"),a=this.get("paperHasDigitalReceipt");
return(a&&!b)}.property("printDownloadIsLoading","paperHasDigitalReceipt").cacheable(),notifyOfError:function(a){this.resetState();
SC.AlertPane.warn("_Print & Download".loc(),a,"_Please try again.".loc(),"_OK".loc())
}});sc_require("controllers/editing_registry");Cv.recordingController=AudioTools.RecorderController.create(Ip.EditingInterceptor,{controllerPath:"Cv.recordingController",timeLimitConfig:"180",permissionsElementIdConfig:"swf_recorder",loggingControllerBinding:"AudioTools.LoggingController",editingRegistryControllerBinding:"Cv.editingRegistryController",audioFileURL:null,audioFileURLBinding:SC.Binding.oneWay("Cv.markSetController.voiceCommentGetUrl"),isEditing:function(){var a=this.get("statusValue");
var b;switch(this.get("statusValue")){case AudioTools.recorderInternalStates.MIC_NOT_INITIALIZED:case AudioTools.recorderInternalStates.ACCESS_USER_DENIED:b=NO;
break;case AudioTools.recorderInternalStates.SWF_NOT_EMBEDDED:case AudioTools.recorderInternalStates.INITIALIZED_READY:case AudioTools.recorderInternalStates.READY:b=this.get("recordingExists")&&!this.get("audioFileURL");
break;default:b=YES;break}return b}.property("statusValue","recordingExists","audioFileURL").cacheable(),isAutoSaveable:NO,uploadUrl:null,uploadUrlBinding:SC.Binding.oneWay("Cv.markSetController.voiceCommentPostUrl"),inDemoModeBinding:"Cv.inDemoMode",recordingIsGloballyDisabled:function(){return !Cv.config.get("CAN_POST_VOICE_COMMENTS")
}.property().cacheable(),uploadDidComplete:function(c,a,g){var b;try{b=JSON.parse(g)
}catch(f){console.error("response not parseable",f)}console.log("status",a);if(a<300&&a>=200){this.uploadSuceeded(a,b)
}else{this.uploadFailed(a,b)}},uploadSuceeded:function(a,b){var c=Cv.markSetController.get("content");
this.invokeLater(function(){c.set("voiceCommentGetUrl",b.voice_comment_get_url);c.set("voiceCommentDeleteUrl",b.voice_comment_delete_url);
c.commitRecord();this.reset()},1000)},uploadFailed:function(a,b){switch(a){case 404:SC.AlertPane.error("_We ran into a problem!".loc(),"_There was an error connecting to the server. Please check your internet connection and try again.".loc(),null,"_Close".loc());
break;case 503:SC.AlertPane.error("_We ran into a problem!".loc(),"_Saving of voice comments is currently unavailable. Please try again later.".loc(),null,"_Close".loc());
break;default:SC.AlertPane.error("_We ran into a problem!".loc(),"_There was an error trying to save your recording. Please try again by clicking the save button.".loc(),null,"_Close".loc());
break}},closeEditViewWithoutSave:function(){this.cancel()},interceptorPageUnloadMessage:function(){if(this.get("inSavingMode")){return"_Your voice comment has not finished uploading. If you leave GradeMark or the paper now, your voice comment may not finish saving. Are you sure you would like to leave?".loc()
}else{return"_The voice comment you were recording will not be saved. Are you sure you want to leave?".loc()
}}.property("inSavingMode"),interceptorExitContextMessage:function(){if(this.get("inSavingMode")){return{message:"_Unsaved Voice Comment".loc(),description:"_Your voice comment has not finished uploading. If you leave GradeMark or the paper now, your voice comment may not finish saving. Are you sure you would like to leave?".loc(),continueButtonText:"_Leave".loc(),cancelButtonText:"_Stay".loc()}
}else{return{message:"_Unsaved Voice Comment".loc(),description:"_There is a voice comment on this paper that has not yet been saved.".loc(),continueButtonText:"_Leave and Discard Comment".loc(),cancelButtonText:"_Stay".loc()}
}}.property("inSavingMode")});Cv.rubricController=SC.ObjectController.create({content:null,contentBindingDefault:SC.Binding.oneWay(),gradeMarkIsActive:NO,gradeMarkIsActiveBinding:"Cv.gradeMarkController.isActive",gradeMarkIsActiveBindingDefault:SC.Binding.oneWay(),"class":null,classBinding:"Cv.classController.content",classBindingDefault:SC.Binding.oneWay(),_gradeMarkIsActiveDidChange:function(){this.invokeLater(function(){var b=this.get("gradeMarkIsActive");
var a=this.get("class");if(b&&a){if(!this.contentBinding){this.contentBinding=this.bind("content",SC.Binding.oneWay("Cv.assignmentController.rubric"))
}}else{if(this.contentBinding){this.contentBinding.disconnect();this.contentBinding=null
}}})}.observes("gradeMarkIsActive","class"),isLoading:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});Cv.rubricScorecardController=SC.ObjectController.create({hoverCriterion:null,hoverScale:null,scorecardIsExpanded:NO,expandedRubricDisabled:NO,expandedRubricID:null,currentlyDisplayedReadInExpandedRubric:null,rubricIsAttached:NO,rubricIsAttachedBinding:"Cv.rubricController.hasContent",rubricIsAttachedBindingDefault:SC.Binding.oneWay(),displayScorecardInMainWindow:function(){return(this.get("rubricIsAttached")&&!this.get("scorecardIsExpanded"))
}.property("rubricIsAttached","scorecardIsExpanded").cacheable(),scorecardCanBeExpanded:function(){var b=this.get("scorecardIsExpanded");
var a=this.get("rubricIsAttached");return(!b&&a)}.property("scorecardIsExpanded","rubricIsAttached").cacheable(),openExpandedScoreCard:function(){if(Cv.demoNotice()){return
}var a={target:"Cv.rubricScorecardController",func:"setExpandedScoreCardOpen",args:null};
var b="/expanded_rubric?%@aid=%@&cid=%@&u=%@&lang=%@&%@#paper/%@/read/%@".fmt(Cv.get("inStudentMode")?"student_user=1&":"",Cv.assignmentController.get("id"),Cv.classController.get("id"),Cv.userController.get("id"),Cv.get("lang"),Cv.config.overridenQueryParamString(),Cv.paperController.get("id"),Cv.gradeMarkController.getPath("read.id"));
var e=new Date();var c="expanded_rubric_"+e.valueOf();this.set("expandedRubricID",c);
var f=Ip.TinCan.spawnChildWindow(this.get("expandedRubricID"),b,"toolbar=0,titlebar=0,menubar=0,location=0,status=0,width=800,height=600",a);
Ip.TinCan.setChildCloseListener(this.get("expandedRubricID"),{target:"Cv.rubricScorecardController",func:"expandedRubricDidClose",args:null});
this.set("currentlyDisplayedReadInExpandedRubric",Cv.gradeMarkController.getPath("read.id"));
var g=this;window[window.addEventListener?"addEventListener":"attachEvent"]((window.attachEvent?"on":"")+"unload",function(){if(g.get("scorecardIsExpanded")){g.throwExpandedRubricError(3)
}},false)},focusExpandedRubricWindow:function(){Ip.TinCan.focusChild(this.get("expandedRubricID"))
},setExpandedRubricGASessionId:function(){var a={target:"Cv.GA",func:"setSessionUUID",args:[Cv.GA.getSessionUUID()]};
Ip.TinCan.tellChild(this.get("expandedRubricID"),a)},setExpandedScoreCardOpen:function(){SC.run(function(){this.set("scorecardIsExpanded",YES)
},this);_gaq.push(["_trackEvent",Cv.GA.CATEGORY_RUBRIC,Cv.GA.ACTION_EXPANDED,Cv.GA.getSessionUUID()]);
this.setExpandedRubricGASessionId()},closeExpandedScoreCard:function(){Ip.TinCan.closeChild(this.get("expandedRubricID"));
this.set("scorecardIsExpanded",NO)},expandedRubricDidClose:function(){this.set("scorecardIsExpanded",NO);
this.set("expandedRubricDisabled",NO);this.set("currentlyDisplayedReadInExpandedRubric",null);
if(Cv.rubricScoringController.get("hasContent")&&!Cv.get("inStudentMode")){Cv.rubricScoringController.get("content").refresh()
}_gaq.push(["_trackEvent",Cv.GA.CATEGORY_RUBRIC,Cv.GA.ACTION_COLLAPSED,Cv.GA.getSessionUUID()])
},updateGradeFromScorecard:function(){Cv.paperController.get("content").refresh()
},loadNewRubricScoringObjectForRead:function(a){var e=SC.Query.local(Cv.Read,"id = %@".fmt(a));
var c=Cv.store.find(e);if(c.length()){var b=c.firstObject();b.refresh()}},paperDidChange:function(){if(this.get("expandedRubricDisabled")){return
}if(this.get("scorecardIsExpanded")){var a={target:"ExpandedRubric",func:"updateRead",args:[Cv.gradeMarkController.getPath("read.id"),Cv.paperController.get("id")]};
Ip.TinCan.tellChild(this.get("expandedRubricID"),a);this.set("currentlyDisplayedReadInExpandedRubric",Cv.gradeMarkController.getPath("read.id"))
}}.observes("Cv.gradeMarkController.read"),serviceAndPaperDidChange:function(){if(!this.get("expandedRubricDisabled")){return
}if(this.get("currentlyDisplayedReadInExpandedRubric")===Cv.gradeMarkController.getPath("read.id")&&Cv.servicesController.getPath("activeService.name")==="GradeMark"){var a={target:"ExpandedRubric",func:"removeErrorPane",args:[]};
Ip.TinCan.tellChild(this.get("expandedRubricID"),a);this.set("expandedRubricDisabled",NO)
}}.observes("Cv.gradeMarkController.read","Cv.servicesController.activeService"),assignmentDidChange:function(){if(this.get("expandedRubricDisabled")){return
}this.throwExpandedRubricError(1)}.observes("Cv.assignmentController.content"),serviceDidChange:function(){if(this.get("expandedRubricDisabled")){return
}if(Cv.servicesController.getPath("activeService.name")!="GradeMark"){this.throwExpandedRubricError(3)
}}.observes("Cv.servicesController.activeService"),readMarkCriteriaDidChange:function(){this.invokeOnce(this._notifyExpandedRubricScorecardReloadMarkCriteria)
}.observes("Cv.readMarkCriteriaController.[]"),_notifyExpandedRubricScorecardReloadMarkCriteria:function(){if(this.get("scorecardIsExpanded")){var a={target:"ExpandedRubric",func:"reloadMarkCriteria",args:null};
Ip.TinCan.tellChild(this.get("expandedRubricID"),a)}},dvDidClose:function(){if(this.get("expandedRubricDisabled")){return
}this.throwExpandedRubricError(3)},throwExpandedRubricError:function(a){if(this.get("scorecardIsExpanded")){var b={target:"ExpandedRubric",func:"throwErrorPage",args:[a]};
Ip.TinCan.tellChild(this.get("expandedRubricID"),b);this.set("expandedRubricDisabled",YES)
}}});Cv.rubricScoringController=SC.ObjectController.create({contentBinding:"Cv.markSetController.rubricScoring",contentBindingDefault:SC.Binding.oneWay(),rubric:null,rubricBinding:"Cv.rubricController.content",rubricBindingDefault:SC.Binding.oneWay(),grade:null,gradeBinding:"Cv.paperController.grade",gradeBindingDefault:SC.Binding.oneWay(),updateValueAndSave:function(b,c){var a=this.get("content");
if(a){a.updateValueAndSave(b,c)}},applyToGradeAndSave:function(){$("input textarea").blur();
var a=this.get("content");if(a){a.applyToGradeAndSave()}},canApplyGrade:function(){var b=NO;
var a=this.get("content");var e=this.get("rubricIsLoaded");if(a&&e){var f=a.getAppliedGrade();
if(f!==null){var c=this.getPath("read.paper.grade");if(f!==c){b=YES}}}return b}.property("percent","grade","rubricIsLoaded").cacheable(),getScaleForCriterion:function(g){if(!g){return
}var a=g.get("num");var i=this.get("scores");var b=i[a];var f=null;if(b){var e=this.get("rubric");
var h=e.get("scales");var c=h.find(function(j){return(j.get("num")===b)});f=g.getCriterionScale(c)
}return f},isUpdating:function(){return((this.get("status")&SC.Record.BUSY_REFRESH)!==0)
}.property("status").cacheable()});sc_require("controllers/service");Cv.eRaterController=Cv.serviceController.create({gradeMarkReadBinding:"Cv.gradeMarkController.read",requiresGradeMarkRead:YES,gradeMarkIsVisibleBinding:"Cv.gradeMarkController.isVisible",assignmentBinding:"Cv.assignmentController.content",paperHasGlyphsBinding:"Cv.paperController.hasGlyphs",name:"E-Rater",id:5,CUSTOM_ERATER_PRODUCT_ID:27,isVisible:function(){return this.get("gradeMarkIsVisible")&&this.get("isApplicable")
}.property("gradeMarkIsVisible","isApplicable"),productAvailableToClass:function(){var a=this.get("productStatus");
if(a){return((a[this.get("id")]===0)||(a[this.CUSTOM_ERATER_PRODUCT_ID]===0))}else{return NO
}}.property("productStatus").cacheable(),isApplicable:function(){var b=NO;var a=this.getPath("assignment.applicableServices");
if(a){b=(a.indexOf(this.get("id"))!==-1);b=b||(a.indexOf(this.CUSTOM_ERATER_PRODUCT_ID)!==-1)
}return b}.property("assignmentServices").cacheable(),isAvailable:function(){var a=NO;
var c=this.get("isApplicable");var b=this.get("paperAvailableServices");if(!this.get("paper")){a=NO
}else{if(c&&b){a=b?(b.indexOf(this.get("id"))!==-1):NO;a=a||(b?(b.indexOf(this.CUSTOM_ERATER_PRODUCT_ID)!==-1):NO)
}else{a=c}}return a}.property("isApplicable","paperAvailableServices").cacheable(),_eRaterReadArrays:[],_loadReadTimer:null,_referencePaper:null,_prepareERaterReadIfNeeded:function(){Cv.eRaterReadController.set("isHidden",YES);
this.invokeOnce(this._prepareERaterRead)}.observes("paper","gradeMarkRead","isVisible","assignment","paperHasGlyphs"),_prepareERaterRead:function(){if(!this.get("isVisible")||!this.get("paperHasGlyphs")){this.set("read",null);
return}var a=this.get("gradeMarkRead");var c=this.get("paper");if(this._loadReadTimer&&(this._referencePaper!==c)){this._loadReadTimer.invalidate();
this._loadReadTimer.destroy();this._loadReadTimer=null}this.set("read",null);if((a||!this.get("requiresGradeMarkRead"))&&!this._loadReadTimer&&c){var b=c.get("id");
var e=this._eRaterReadArrays[b];if(e){this.invokeLater(function(){this.set("read",e)
})}else{this._loadReadTimer=this.invokeLater(function(){this._loadReadTimer=null;
this._calculateERaterRead()},3000)}}},read:null,_calculateERaterRead:function(){var k=null;
var e=this.get("paper");var j=this.get("gradeMarkRead");var c=this.get("assignment");
if(e&&c&&(j||!this.get("requiresGradeMarkRead"))&&!e.get("dprPreWithImageDimensions")){var g=e.get("id");
k=this._eRaterReadArrays[g];if(!k){var c=Cv.assignmentController.get("content");var b=(!c.get("eRaterHandbook")&&!c.get("eRaterHandbookIsLoading"));
b=(b?1:0);var h=1;var f=Cv.ERaterRead.MARK_LOADING_CHUNK_PAGE_COUNT;var a="/paper/%@/erater_data?load_handbooks=%@&load_marks=1&marks_start_page=%@&marks_page_count=%@".fmt(g,b,h,f);
var i=SC.Query.local(Cv.Read,{conditions:"paper = {_paper} AND ( readType = {_readType} )",_paper:e,_readType:Cv.Read.E_RATER_READ_TYPE,url:a,poll:YES,pollingInterval:[5000,8000,11000,14000,17000,25000,35000,45000,60000,60000,60000]});
k=Cv.store.find(i);this._eRaterReadArrays[g]=k;if(b){k.addObserver("status",this,"_readArrayStatusDidChange",c);
c.set("eRaterHandbookIsLoading",YES)}}}this.set("read",k)},_readArrayStatusDidChange:function(h,c,f,g){var a=h.get("status");
if((a&SC.Record.READY)!==0){h.removeObserver("status",this,"_readArrayStatusDidChange");
if(h.length()){var b=g.get("eRaterHandbookId");var e=Cv.store.find("Cv.ERaterHandbook",b);
g.set("eRaterHandbook",e);g.set("eRaterHandbookIsLoading",NO)}}},eRaterReadIsCorrupted:null,eRaterReadIsCorruptedBinding:"Cv.eRaterReadController.isCorrupted",queryStatusText:null,queryStatusTextBinding:"Cv.eRaterReadQueryController.detailedStatusText",detailedStatusText:function(){if(!this.get("isApplicable")){return"_e-rater&reg; is not turned on for this assignment. Please edit the assignment settings to turn on e-rater&reg; for the assignment.".loc()
}else{if(!this.get("paperHasGlyphs")){return"_e-rater&reg; is not available for this paper because the %@ document processing system could not process the needed information from the document.".loc(Cv.config.get("APP_NAME"))
}else{if(this.get("eRaterReadIsCorrupted")){return"_There was an error with the feedback provided by e-rater&reg;.".loc()
}else{return this.get("queryStatusText")}}}}.property("queryStatusText","isApplicable","isAvailable","eRaterReadIsCorrupted").cacheable(),openFeedback:function(){window.open("https://spreadsheets.google.com/a/iparadigms.com/spreadsheet/viewform?formkey=dHZlYnladkVaQVB2WUc0MzFqWkJSOFE6MQ")
}});sc_require("controllers/service");Cv.gradeMarkController=Cv.serviceController.create({id:3,name:"GradeMark",paperBinding:"Cv.paperController.content",read:null,isHiddenByConfigBinding:"Cv.config.HIDE_GRADEMARK",readQueryUrl:"/paper/%@/grade_mark",reads:function(){var a=null;
var c=this.get("paper");if(c&&this.get("isVisible")){var b=this._readQuery[c.get("id")];
if(!b){b=SC.Query.local(Cv.Read,{conditions:"paper = {paper} AND isHidden = NO AND ( readType = {instructorReadType} OR readType = {eRaterReadType} )",paper:this.get("paper"),instructorReadType:Cv.Read.GRADEMARK_INSTRUCTOR_READ_TYPE,eRaterReadType:Cv.Read.E_RATER_READ_TYPE,url:this.get("readQueryUrl")?this.get("readQueryUrl").fmt(this.getPath("paper.id")):this.get("readQueryUrl")});
this._readQuery[c.get("id")]=b}a=Cv.store.find(b)}return a}.property("paper","isVisible").cacheable(),_readQuery:[],userQuickMarkTemplateSets:null,userQuickMarkTemplateSetsBinding:"Cv.userQuickMarkTemplateSetsController.content",loadTemplateSets:function(){if(this.get("isActive")&&!Cv.get("inStudentMode")){var a=Cv.userQuickMarkTemplateSetsController.get("content");
if(a){Qmlib.templateSetsController.set("content",a)}}}.observes("isActive","userQuickMarkTemplateSets"),sidebarView:function(){if(!this.get("paperView")){return
}var b=Cv.GradeMarkSidebarView.design({layout:{top:0,bottom:0,left:0,right:0},gradeMarkController:this,quickMarkTemplateSetsController:Qmlib.templateSetsController,quickMarkTemplatesController:Qmlib.templatesController,paperView:this.get("paperView")});
var a=b.create({});return a}.property("paperView").cacheable(),servicePageViewClass:function(){return Cv.PageGradeMarkView.extend({serviceController:this,quickMarkTemplateSetsController:Cv.sidebarTemplateSetsController})
}.property().cacheable(),readsDidChange:function(){var c=this.getPath("reads.length");
if(c>0){var a=this.get("reads");var b=SC.Query.local(Cv.Read,{conditions:"readType = 1"});
var e=a.find(b);this.set("read",e.firstObject())}}.observes("*reads.[]"),nowShowing:null,isShowingMarkList:function(){var a=this.get("sidebarView");
if(!a){return false}return this.get("nowShowing")==a.get("markListView")}.property("nowShowing").cacheable(),classicServiceUrl:function(){return this.prepareUrl("/grademark3/index.asp?oid=%@&bypass_cv=1&from_cv=1".fmt(Cv.paperController.get("id")))
}});sc_require("controllers/service");Cv.peerMarkController=Cv.serviceController.create({id:2,name:"PeerMark",paperBinding:"Cv.paperController.content",isViewingQuestions:NO,isShowingMarkList:NO,sidebarView:function(){if(!this.get("paperView")){return
}var a=Cv.PmSidebarView.create({});return a}.property("paperView").cacheable(),servicePageViewClass:function(){return Cv.PagePeerMarkView.extend({serviceController:this,quickMarkTemplateSetsController:Cv.sidebarTemplateSetsController})
}.property().cacheable(),captureStateArgs:function(){var b={};b.pm_assignment=Cv.pmAssignmentController.get("id");
var a=this.get("isActive");if(a){b.pm_review=Cv.pmReviewController.get("id")}return b
},warnNotAvailable:function(){var b=this.get("isAvailable");var a=this.get("paper");
var j="_PeerMark is not available for this paper.".loc();if(b&&a.get("dprPreWithImageDimensions")){var c={alertPaneDidDismiss:function(l,k){switch(k){case SC.BUTTON1_STATUS:break;
default:break}}};j="_PeerMark Unavailable".loc();var h="_PeerMark is not available for this paper.".loc();
var i=null;var g="_OK".loc();var f=null;var e=null;SC.AlertPane.warn(j,h,i,g,f,e,c)
}}});sc_require("controllers/service");Cv.translatedMatchingController=Cv.serviceController.create({originalityIsVisibleBinding:"Cv.originalityController.isVisible",isVisible:function(){return this.get("originalityIsVisible")&&this.get("isApplicable")&&this.get("useTranslatedReport")
}.property("originalityIsVisible","isApplicable","useTranslatedReport").cacheable(),id:17,name:"Translated Matching",isNative:function(){var b=Cv.originalityController.get("translateLanguage");
var a=(b===Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE);return a},isEnglish:function(){var b=Cv.originalityController.get("translateLanguage");
var a=(b===Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH);return a},toggleTranslateLanguage:function(){var a;
if(this.isNative()){var c=Cv.paperController.get("hasTranslationError");if(c){var f="_Translated Matching Report Unavailable".loc();
var b;var e=Cv.paperController.get("translationErrorCode");if((e===undefined)||(e===null)){b="_A Translated Matching report could not be generated for this paper.".loc()
}else{if(e===Cv.REPORT_TRANSLATION_ERROR_CODE.UNACCEPTABLE_LANGUAGE){b="_A Translated Matching report could not be generated for this paper because the language of the text could either not be detected or is not supported. The following languages are supported for translated matching:\n\nCzech, Danish, Dutch, Finnish, French, German, Greek, Hungarian, Italian, Polish, Portuguese, Romanian, Spanish, Swedish and Turkish".loc()
}else{if(e==Cv.REPORT_TRANSLATION_ERROR_CODE.TRANSLATION_ERROR_UNRESPONSIVE){b="_A Translated Matching report could not be generated for this paper because the translation service was unresponsive. To try again, please choose to refresh the report from the filters and settings panel.".loc()
}}}SC.AlertPane.plain(f,b,null,"_Continue".loc());return}translateLanguage=Cv.REPORT_LANGUAGE_CONSTANTS.ENGLISH
}else{translateLanguage=Cv.REPORT_LANGUAGE_CONSTANTS.NATIVE}Cv.originalityController.set("translateLanguage",translateLanguage)
}});Cv.sidebarActiveSet=SC.ObjectController.create({init:function(){arguments.callee.base.apply(this,arguments);
Qmlib.templateSetController.set("didChangeActiveSet",function(a){Cv.sidebarActiveSet.set("content",a)
})},contentBinding:SC.Binding.oneWay("Cv.sidebarTemplateSetsController.selection").single(),contentDidChange:function(){if(!this.getPath("content.isActiveSet")){Qmlib.setActiveSet(this.get("content"))
}}.observes("content")});Cv.sidebarAllTemplatesController=SC.ArrayController.create({contentBinding:SC.Binding.oneWay("Cv.sidebarActiveSet.templates")});
Cv.sidebarSearchController=SC.ObjectController.create({searchString:"",isSearching:function(){return(this.get("searchString")==="")?false:true
}.property("searchString").cacheable(),filteredTemplates:function(){var a=Ip.escapeRegexSpecialCharacters(this.get("searchString").toLowerCase());
a=Ip.escapeHTML(a);var b=Qmlib.store.find(ALL_TEMPLATES_QUERY);return b.find(SC.Query.local(Qm.QuickMarkTemplate,"(name MATCHES({regex1})) OR (description MATCHES({regex2}))",{regex1:RegExp(a,"i"),regex2:RegExp(a,"i")}))
}.property("searchString").cacheable()});Cv.sidebarTemplateSetsController=SC.ArrayController.create({allowsMultipleSelection:NO,allowsEmptySelection:YES,orderBy:["sortName"],templateSetsBinding:"Qmlib.templateSetsController.content",orderBy:["sortName"],content:function(){if(!this.get("templateSets")){return[]
}return this.get("templateSets").find(SC.Query.local(Qm.QuickMarkTemplateSet,{conditions:"isPseudoSet = NO",orderBy:"sortName"}))
}.property("templateSets").cacheable(),contentDidChange:function(){if(!this.get("isLoading")){this.selectObject(this.get("content").findProperty("isActiveSet",YES))
}}.observes("isLoading"),isLoadingBinding:"Qmlib.templateSetsController.isLoading"});
Cv.sidebarTemplatesController=SC.ArrayController.create({JUST_CREATED:NO,JUST_EDITED:NO,LAST_TEMPLATE_ID:null,content:null,allowsMultipleSelection:YES,selectionBindingDefault:SC.Binding.single(),orderBy:["name"],searchString:null,searchStringBinding:"Cv.sidebarSearchController.searchString",allTemplatesLength:null,allTemplatesLengthBinding:"Cv.sidebarAllTemplatesController.length",isSearching:null,isSearchingBinding:"Cv.sidebarSearchController.isSearching",sidebarActiveSetBinding:"Cv.sidebarActiveSet.content",clearSelectionSet:function(){var a=this.get("selection");
if(a.length()>0){this.set("selection",SC.SelectionSet.EMPTY)}this.LAST_TEMPLATE_ID=null;
this.JUST_EDITED=NO;this.JUST_CREATED=NO}.observes("Cv.sidebarActiveSet.content"),content:function(){var a;
var b=this.get("isSearching");if(!b){a=Cv.sidebarActiveSet.get("templates")}else{a=Cv.sidebarSearchController.get("filteredTemplates")
}return a}.property("searchString","allTemplatesLength","isSearching","sidebarActiveSet").cacheable(),contentDidChange:function(){if(this.JUST_EDITED||this.JUST_CREATED){this.selectLastTemplate()
}else{this.clearSelectionSet()}}.observes("content"),selectLastTemplate:function(){this.selectObject(this.LAST_TEMPLATE_ID)
},unarchiveSelectedTemplates:function(){this.get("selection").forEach(function(a){a.set("isArchived",NO);
a.commitRecord()})},isLoading:function(){return((this.get("status")&SC.Record.BUSY)!==0)
}.property("status").cacheable()});Cv.similarityScoreController=SC.ObjectController.create({overlap:null,overlapBinding:SC.Binding.oneWay("Cv.paperController.overlap"),translateOverlap:null,translateOverlapBinding:SC.Binding.oneWay("Cv.paperController.translateOverlap"),translateLanguage:null,translateLanguageBinding:"Cv.originalityController.translateLanguage",percent:function(){var a;
if(Cv.translatedMatchingController.isNative()){a=this.get("overlap")}else{a=this.get("translateOverlap")
}return a}.property("translateLanguage","overlap","translateOverlap").cacheable(),originalityIsAvailableBinding:SC.Binding.oneWay("Cv.originalityController.isAvailable"),displayPercent:function(){var b=this.get("percent");
var a="--";if(Cv.originalityController.get("isAvailable")){if(b>-1){a=b}}return a
}.property("percent","originalityIsAvailable").cacheable()});Cv.undoController=SC.ObjectController.create({undoLastChange:function(){var g=this.get("content").recordType,e=this.get("content").data,f=Cv.store.createRecord(g,e),b=e.highlight,a=e.markCriteria;
foof=e;if(b){delete e.highlight;var c=Cv.store.createRecord(Cv.Highlight,b);c.set("mark",f);
c.commitRecordWhenReady()}if(a){delete e.markCriteria;a.forEach(function(h){var i=Cv.store.createRecord(Cv.MarkCriterion,h);
i.set("mark",f);i.commitRecordWhenReady()})}f.commitRecord();this.set("content",null)
},deletedMarkType:function(){return(this.get("content"))?((!!this.get("content").recordType.MARK_NAME)?this.get("content").recordType.MARK_NAME:null):null
}.property("content").cacheable()});Cv.userController=SC.ObjectController.create(Qmlib.SetOwner,RubricManagerCore.RubricOwner,{content:null,userDidBecomeActive:function(){if(this.get("id")===null){return
}Cv.userDefaults.set("userDomain",this.get("id"))}.observes("id"),isStudent:function(){return(Ip.getQueryStringParameter("student_user")==1)||this.get("userType")==="student"
}.property("[]").cacheable(),isPseudoUser:function(){return this.get("pseudoUser")===true
}.property("pseudoUser").cacheable(),commitChanges:function(){this.invokeLast(this._commitChanges,this)
},_commitChanges:function(){var a;var b=this.get("status")&SC.Record.DIRTY;if(b){a=this.get("content");
a.commitRecord()}},isMasterClass:NO,isMasterClassBinding:SC.Binding.oneWay("Qmlib.classController.isMasterClass"),canShareToSections:function(){return this.get("isMasterClass")
}.property("isMasterClass").cacheable(),canShareToAccounts:function(){return !SC.none(this.get("shareToAccount"))
}.property("shareToAccount").cacheable(),shareToAccount:function(){return Ip.getQueryStringParameter("aid")
}.property().cacheable(),quickMarkTemplateSets:function(){if(!Cv.config.get("QUICKMARK_SUPPORT")||this.get("userType")=="student"){return
}var a=NO;return Qmlib.SetOwner.getQuickMarkTemplateSets.apply(this,[a])}.property().cacheable()});
Qmlib.userController=Cv.userController;RubricManagerCore.userController=Cv.userController;
Cv.userQuickMarkTemplateSetsController=SC.ArrayController.create({gradeMarkIsActive:NO,gradeMarkIsActiveBinding:"Cv.gradeMarkController.isActive",gradeMarkIsActiveBindingDefault:SC.Binding.oneWay(),content:function(){var a=null;
var b=this.get("gradeMarkIsActive");if(b){a=Cv.userController.get("quickMarkTemplateSets")
}return a}.property("gradeMarkIsActive").cacheable()});Cv.zoomController=SC.ObjectController.create({zoom:1,_keys:"top bottom left right centerX centerY height width minWidth maxWidth minHeight maxHeight x y".w(),getZoomedLayout:function(c){var a={};
var b=this._keys;b.forEach(function(e){var g=c[e];if(g!==undefined){var f=this.getZoomedValue(g);
a[e]=f}},this);return a},getUnzoomedLayout:function(b){var c={};var a=this._keys;
a.forEach(function(e){var g=b[e];if(g!==undefined){var f=this.getUnzoomedValue(g);
c[e]=f}},this);return c},getZoomedValue:function(c){var a=this.get("zoom");var b=c*a;
return parseInt(b)},getUnzoomedValue:function(c){var b=this.get("zoom");var a=c/b;
return parseInt(a)}});Cv.DataSource=SC.DataSource.extend(Ip.LocalizedUrl,Ip.DataSourceExceptionHandling,{preProductionMode:function(){var a=window.location.href;
return(a.indexOf("://staging")!=-1||a.indexOf("://dev")!=-1||a.indexOf("://localhost")!=-1)
}.property().cacheable(),_getFromUri:function(e,b){var a=b.isQuery?this._didGetQuery:this._didRetrieveRecords;
var c=Ip.PalladiumJSONRequest.getUrl(this.prepareUrl(e));if(b.poll){c.doesPoll(b.pollingInterval,b)
}c.notify(this,a,b).send();return YES},_postFromUri:function(e,a,c){var b=c.isQuery?this._didGetQuery:this._didRetrieveRecords;
Ip.PalladiumJSONRequest.postUrl(this.prepareUrl(e)).notify(this,b,c).send(a);return YES
},fetch:function(a,e){var c={store:a,query:e,isQuery:YES,isLocal:YES,poll:e.poll,pollingInterval:e.pollingInterval};
if(e.url){var b=this.prepareUrlForStudent(e.url);if(b.indexOf("?")===-1){b=b+"?cv=1"
}else{b=b+"&cv=1"}if(!e.usePOST){return this._getFromUri(b,c)}else{return this._postFromUri(b,e.body,c)
}}else{a.dataSourceDidFetchQuery(e);return YES}return NO},_didGetQuery:function(k,g){var p=g.store,m=g.query,n=g.type,e=g.deffered;
if(SC.ok(k)){if(m.get("isLocal")){var h=k.get("body");if(h.report){var f=m.get("recordType");
var b=m.get("url");if(b.indexOf("fs=1")!==-1){p.loadRecords(Cv.OriginalityFullSourceMatchGroup,h.report.matchGroups);
p.loadRecords(f,[h.report.fullSourceData])}else{if(b.indexOf("g=1")!==-1){p.loadRecords(f,h.report.glimpses)
}else{if(b.indexOf("g=0")!==-1){p.loadRecords(f,h.report.matchGroups)}else{if(b.indexOf("secondary")!==-1){h.report.groupNode=m.groupNode;
p.loadRecords(f,[h.report])}else{p.loadRecords(f,[h.report])}}}}}else{if(h.ERaterMark){var j=["ERaterMark","GlyphHighlight"];
this.invokeLater(function(){j.forEach(function(q){var s=Cv[q];if(q==="GlyphHighlight"){s=Cv.ERaterHighlight
}if(s){p.loadRecords(s,h[q])}})});for(var o in h){if(o&&(j.indexOf(o)===-1)){var n=Cv[o];
if(h[o]){p.loadRecords(n,h[o])}}}}else{for(var c in h){if(!h.hasOwnProperty(c)){continue
}objectData=h[c];var a=this.getObjectTypeFromObjectTypeString(c);if(a!=n){p.loadRecords(a,objectData.isEnumerable?objectData:[objectData])
}}}}p.dataSourceDidFetchQuery(m)}else{if(e){var i=h.get("body").map(function(q){return Md.Person.storeKeyFor(q)
},this);p.loadQueryResults(m,i)}else{var l=p.loadRecords(n,h.get("body"));p.loadQueryResults(m,i)
}}}else{this.notifyOfFailure("_Loading Error".loc(),k);p.dataSourceDidErrorQuery(m,k.get("errorObject"))
}return YES},retrieveRecord:function(a,b,c){this._getFromUri(this._uriForStoreKey(a,b,"GET"),{storeKey:b,store:a,type:a.recordTypeFor(b)});
return YES},_didRetrieveRecords:function(g,c){var j=c.store,h=c.type,k=c.storeKey,f;
if(SC.ok(g)){var e=g.get("body");f=e[h.responseKey][0];for(var b in e){if(!e.hasOwnProperty(b)){continue
}var a=this.getObjectTypeFromObjectTypeString(b);if(a!=h){var i=e[b];j.loadRecords(a,i)
}}j.dataSourceDidComplete(k,f)}else{this.notifyOfFailure("_Loading Error".loc(),g);
j.dataSourceDidError(k,g.get("body"))}return YES},createRecord:function(a,f,g){Cv.undoController.set("content",null);
var b=a.recordTypeFor(f).resourceName;var e=this._uriForStoreKey(a,f,"POST");var c=g&&g.customDataHashFunction?g.customDataHashFunction(a,f):a.readDataHash(f);
var h=g&&g.customCallbackFunction?g.customCallbackFunction:this.didCreateRecord;Ip.PalladiumJSONRequest.postUrl(this.prepareUrl(e)).notify(this,h,a,f).send(c);
return YES},didCreateRecord:function(b,a,c){if(SC.ok(b)){var f=b.get("body").id;if(f==="_createID_"){f=SC.Store.generateStoreKey();
console.warn("Creating client side id",f)}a.dataSourceDidComplete(c,null,f)}else{var e=(b.get("status")===401);
if(e||(!SC.kindOf(a.materializeRecord(c),Cv.Mark)&&!SC.kindOf(a.materializeRecord(c),Rb.RubricScoringFeedback))){this.notifyOfFailure("_Save Error".loc(),b)
}a.dataSourceDidError(c,b)}return YES},updateRecord:function(a,f,g){Cv.undoController.set("content",null);
var i=a.idFor(f);var b=a.recordTypeFor(f).resourceName;var e=this._uriForStoreKey(a,f);
var c=g&&g.customDataHashFunction?g.customDataHashFunction(a,f):a.readDataHash(f);
var h=g&&g.customCallbackFunction?g.customCallbackFunction:this.didUpdateRecord;if(c.glyph_map){c=SC.copy(c);
delete c.glyph_map}Ip.PalladiumJSONRequest.putUrl(this.prepareUrl(e)).notify(this,h,a,f).send(c);
return YES},didUpdateRecord:function(b,a,c){if(SC.ok(b)){var e=b.get("body");if(e){e=e.content
}a.dataSourceDidComplete(c,e);this._updateReportOverlap(b,a)}else{var f=(b.get("status")===401);
if(f||!SC.kindOf(a.materializeRecord(c),Cv.Mark)){this.notifyOfFailure("_Update Error".loc(),b)
}a.dataSourceDidError(c)}return YES},destroyRecord:function(b,e){var g,f,c,a;f=b.idFor(e);
uri=this._uriForStoreKey(b,e);Ip.PalladiumJSONRequest.deleteUrl(this.prepareUrl(uri)).notify(this,this.didDestroyRecord,b,e).send();
return YES},didDestroyRecord:function(c,b,e){if(SC.ok(c)){var a=b.materializeRecord(e);
var g=b.recordTypeFor(e);if(g.kindOf(Cv.Mark)&&!a.get("cantUndo")){Cv.undoController.set("content",{recordType:g,data:a.undoPackage()})
}b.dataSourceDidDestroy(e);a.set("status",SC.Record.DESTROYED_CLEAN)}else{var f=(c.get("status")===401);
if(f||!SC.kindOf(b.materializeRecord(e),Cv.Mark)){this.notifyOfFailure("_Delete Error".loc(),c)
}b.dataSourceDidError(c)}return YES},_uriForStoreKey:function(j,k,a){var f=j.idFor(k);
f=parseInt(f,10)>0?f:null;var g=j.recordTypeFor(k);var i=g.resourceName;var c=g.queryString?g.queryString():"";
if(!i){throw"No resourceName for storeKey ("+g.toString()+")"}var e;if(a=="GET"){if("paper".w().indexOf(i)!=-1){e="/"+i+"/"+f+"?cv=1"
}else{if("class".w().indexOf(i)!=-1){e="/"+i+"/"+f;if(!Cv.assignmentController.get("overPaperSizeLimit")){e=e+"?cv=1"
}}else{if(i==="gm3/rubric"){e="/"+i+"/"+f+"?cv=1"}}}}if(!e){if(SC.typeOf(i)===SC.T_STRING&&(i.indexOf("user")!==-1)&&(f==config.userId)){if((g.toString()==="Cv.Student")&&!Cv.get("inStudentMode")){e="/user/"+f
}else{e="/user/current?cv=1"}}else{if(SC.typeOf(i)===SC.T_FUNCTION){var h=j.readDataHash(k);
e=i(h)}else{if(i==="gm3/rubric"&&a==="POST"){e="/"+i+"?cv=1"}else{if(f){e="/"+i+"/"+f
}else{e="/"+i}}}}}if(e){var b=this.prepareUrlForStudent(e);if(c){if(b.indexOf("?")===-1){b=b+"?"
}b=b+"&"+c}return b}},getObjectTypeFromObjectTypeString:function(objectTypeString){var objectType;
if(objectTypeString==="Read"){objectType=Cv.Read}else{if(objectTypeString.indexOf("QuickMarkTemplate")===0){objectType=eval("Qm."+objectTypeString)
}else{if((objectTypeString.indexOf("Rubric")===0)&&(objectTypeString!=="RubricScoring")){objectType=eval("Rb."+objectTypeString)
}else{objectType=eval("Cv."+objectTypeString)}}}if(SC.none(objectType)){throw"No objectType for string ("+objectTypeString+")"
}return objectType},_updateReportOverlap:function(c,b){var h=c.get("body");if(h.report){var e=h.report.paperReviewed;
var g=b.find(Cv.Paper,e);if(g&&g.get("isLoaded")){var a=h.report.overlap;var f=parseInt(Ip.findParameterInUrl("tl",c.get("address")))||0;
if(f>0){g.set("translateOverlap",a)}else{g.set("overlap",a)}}}},_handle503Response:function(e,c){var b=c.get("address");
var a;if(b.indexOf("report")!=-1||b.indexOf("exclude_list")!=-1){a=1}else{if(b.indexOf("peermark")!=-1){a=2
}else{if(b.indexOf("grade_mark")!=-1){a=3}else{a=Cv.servicesController.get("activeService")||Ip.getQueryStringParameter("s")
}}}var g;var f;var h;switch(a){case 1:g="_OriginalityCheck".loc();h="_Text-Only Report".loc();
f=Cv.originalityController.classicServiceUrl();break;case 2:g="_PeerMark".loc();h="_Previous PeerMark Version".loc();
f=Cv.peerMarkController.classicServiceUrl();break;case 3:g="_GradeMark".loc();h="_Previous GradeMark Version".loc();
f=Cv.gradeMarkController.classicServiceUrl();break;default:g="_the %@ Document Viewer".loc(Cv.config.get("APP_NAME"));
h="_Previous Version".loc();f=Cv.servicesController.classicServiceUrl();break}SC.AlertPane.info(null,"_Using %@ for this submission would require a very large amount of data to be loaded into the Document Viewer. We're working on updating the Document Viewer to support larger amounts of data. For now, please use the %@ for this submission.".loc(g,h),null,h,"_Cancel".loc(),{alertPaneDidDismiss:function(j,i){if(i===SC.BUTTON1_STATUS){window.location=f
}}})},_custom404Response:function(b,a,f,c){var e;f=parseInt(f);if(f===42){e=[b,"_This student paper cannot be viewed because it belongs to a deleted class.".loc(),null]
}else{if(f===46){e=[b,"_This student paper cannot be viewed because it belongs to a deleted assignment.".loc(),null]
}}return e},prepareUrlForStudent:function(b){if(Cv.get("inStudentMode")){if(b.indexOf("/")===0){b="/student"+b
}else{var a=b.indexOf("/",(b.indexOf("//")+2));b=b.substring(0,a)+"/student"+b.substring(a)
}}return b}});if(Ip.inDemoMode()){Cv.DataSource=Cv.DataSource.extend({globalId:0,createRecord:function(a,b,c){Cv.undoController.set("content",null);
SC.Timer.schedule({target:this,action:function(){this.didCreateRecord({},a,b)},interval:250});
return YES},didCreateRecord:function(b,a,e){var f=this.get("globalId");var c=f+1;
this.set("globalId",c);a.dataSourceDidComplete(e,null,c);return YES},updateRecord:function(a,b,c){Cv.undoController.set("content",null);
SC.Timer.schedule({target:this,action:function(){this.didUpdateRecord({},a,b)},interval:250});
return YES},didUpdateRecord:function(b,a,c){a.dataSourceDidComplete(c,null);return YES
},destroyRecord:function(a,b){Cv.undoController.set("content",null);SC.Timer.schedule({target:this,action:function(){this.didDestroyRecord({},a,b)
},interval:250});return YES},didDestroyRecord:function(c,b,e){var a=b.materializeRecord(e);
var f=b.recordTypeFor(e);if(f.kindOf(Cv.Mark)&&!a.get("cantUndo")){Cv.undoController.set("content",{recordType:f,data:a.undoPackage()})
}b.dataSourceDidDestroy(e);a.set("status",SC.Record.DESTROYED_CLEAN)},prepareUrl:function(c){arguments.callee.base.apply(this,arguments);
var a=[];var b=[];if(c.indexOf("?")===-1){a.push("/demo");a.push(c);a.push("?");b.push("demo=1")
}else{a=c.split("?");if(a[1]){b=a[1].split("&");a[1]=null}a.unshift("/demo");a.push("?");
b.push("demo=1")}b.push("output=json");c=a.join("")+b.join("&");return c}})}Cv.EmptyCollectionView={emptyContentMessage:"_No Content".loc(),nowShowing:function(b,c){if(c===undefined){var a=this.get("hasContent");
if(a){c=this.get("populatedView")}else{c=this.get("emptyCollectionView")}}return c
}.property("hasContent").cacheable(),emptyCollectionView:SC.ContainerView.design({classNames:["sidebar-box"],layout:{left:10,right:10,top:20,height:250},contentView:SC.LabelView.design({layout:{left:10,right:10,top:15,bottom:15},tagName:"div",render:function(a,c){var b=this.getPath("parentView.parentView.emptyContentMessage");
a.push(b)}})})};Cv.EscapeValue={isTextArea:NO,convertUrls:YES,value:null,removeAllTags:NO,sanitizedValue:function(a,c){var b=this.get("isTextArea");
var e=this.get("convertUrls");if(c!==undefined){c=c||"";if(b){c=Ip.breakTagsToNewLines(c)
}c=Ip.unscrubHTML(c,this.get("removeAllTags"));if(!this.get("removeAllTags")&&e){c=Ip.anchorTagsToUrls(c)
}this.set("value",c)}else{c=this.get("value")}if(c){if(!this.get("removeAllTags")&&e){c=Ip.urlsToAnchorTags(c)
}c=Ip.scrubHTML(c,this.get("removeAllTags"));if(b){c=Ip.newLinesToBreakTags(c)}}return c
}.property("value").cacheable()};Cv.MarkIcon={markView:null,markCriteria:null,markCriteriaBinding:".markView.content.markCriteria",commentText:null,commentTextBinding:".markView.content.text",didCreateLayer:function(){this.updateMarkIconClassNames()
},didUpdateLayer:function(){this.updateMarkIconClassNames()},commentTextObserver:function(){this.updateMarkIconClassNames()
}.observes("commentText"),markCriteriaObserver:function(){this.updateMarkIconClassNames()
}.observes("*markCriteria.[]"),updateMarkIconClassNames:function(){var a=(this.getPath("markCriteria.length")>0);
this.toggleIconClass("icon-mark-criteria",a);var b=!SC.empty(this.get("commentText"));
this.toggleIconClass("icon-comment-text",b)},toggleIconClass:function(b,c){var a=this.$(".mark-icon");
if(c&&!a.hasClass(b)){a.addClass(b)}else{if(!c&&a.hasClass(b)){a.removeClass(b)}}}};
Cv.MarkStatusIndicator={spinnerViewLayout:null,statusIconViewLayout:null,initMixin:function(){if(!this["recordStatus"]&&!this["recordStatusBinding"]&&!this.respondsTo("recordStatus")){console.warn("implementing MarkStatusIndicator mixin without providing recordStatus property")
}this._cachedWidth=this.get("layout").width;this._statusIconView=this.createChildView(this.get("statusIconView"));
this.appendChild(this._statusIconView);this._spinnerView=this.createChildView(this.get("spinnerView"));
this.appendChild(this._spinnerView);this.setIconIsVisible()},showingStatus:function(){return !(this.get("recordStatus")&SC.Record.READY)
}.property("recordStatus").cacheable(),statusDidChanged:function(){if(this.get("recordStatus")&SC.Record.ERROR){this._statusIconView.set("isVisible",true);
this._spinnerView.set("isVisible",false)}else{if(this.get("recordStatus")&SC.Record.BUSY){this._statusIconView.set("isVisible",false);
this._spinnerView.set("isVisible",true)}else{this._spinnerView.set("isVisible",false);
this._statusIconView.set("isVisible",false)}}if(this.getPath("spinnerViewLayout")){var a=this.getPath("spinnerViewLayout");
if(this._statusIconView.get("isVisible")){a.set("left",a.get("left")+18)}this._spinnerView.set("layout",a);
this._spinnerView.adjust("left",a.get("left"))}if(this.getPath("statusIconViewLayout")){this._statusIconView.set("layout",this.getPath("statusIconViewLayout"));
this._statusIconView.adjust("left",this.getPath("statusIconViewLayout.left"))}this.setIconIsVisible()
}.observes("recordStatus"),spinnerView:SC.View.design({layout:{top:4,right:4,height:16,width:16},isVisible:NO,render:function(c,g){var f=this.get("frame");
var e=f.width;var a=f.height;var b="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif";
c.push('<img src="%@" width="%@" height="%@">'.fmt(b,e,a))}}),statusIconView:Ip.ImageView.design({layout:{top:4,right:4,height:16,width:16},isVisible:NO,classNames:["sc-icon-alert-16"]}),iconIsVisible:null,setIconIsVisible:function(){var a=(this._statusIconView.get("isVisible")||this._spinnerView.get("isVisible"))?YES:NO;
this.set("iconIsVisible",a)}};Cv.TextSelectable={userCanEdit:YES,_mouseDown:function(b){var a=NO;
if(!this.get("userCanEdit")||!Cv.paperController.get("hasGlyphs")){return a}var c=!!Cv.paperTextSelectionController.get("glyph1");
if(!c){a=Cv.paperTextSelectionController.processPoint1(b)}return a},_mouseDragged:function(b){var a=NO;
if(!this.get("userCanEdit")){return a}if(!Cv.paperTextSelectionController.get("isSelectingText")){if(!Cv.paperTextSelectionController.isAboveThreshold(b)||!Cv.paperTextSelectionController.get("textSelectionGlyph1")){return NO
}}return Cv.paperTextSelectionController.processPoint2(b)},_mouseUp:function(b){var a=NO;
if(!this.get("userCanEdit")){return a}Cv.paperTextSelectionController.cancelBuildingTextSelection();
return YES}};var Ip=Ip||{};Ip.getFunctionInfo=function(e){var a=e.toString().replace(/\s/g," ");
var c;var b=a.match(/^function (\w*)/);if((b===null)||(b[1]===null)||(b[1].length===0)){c="anonymous"
}else{c=b[1]}return c+": "+a};Ip.stackTrace=function(f){var b=new Array();if(f){f=f.caller
}else{f=Ip.stackTrace.caller}var e=0;for(var c=f;c!==null;c=c.caller){b.push(Ip.getFunctionInfo(c));
if(c.caller==c){break}else{if(e>=20){b.push(["...","..."]);break}}e++}return b};Cv.ApplicationSelectorView=SC.View.extend({childViews:"activeServiceSelectorView orVisibleButtonView gmVisibleButtonView pmVisibleButtonView".w(),lastActiveService:"",visibleServices:null,isVisibleBinding:SC.Binding.not("Cv.config.HIDE_SERVICE_SELECTOR"),ensureGaServiceHash:function(c){if(c.visibleServices==null){c.visibleServices={};
var b=[Cv.GA.CATEGORY_GM,Cv.GA.CATEGORY_OR,Cv.GA.CATEGORY_PM];for(var a=0;a<b.length;
a++){c.visibleServices[b[a]]=false}}},isVisibleHandler:function(){return;if(parentView.lastActiveService!=ga_category){parentView.ensureGaServiceHash(parentView);
if(!isVisible&&parentView.visibleServices[ga_category]){parentView.visibleServices[ga_category]=false
}else{if(isVisible&&!parentView.visibleServices[ga_category]){parentView.visibleServices[ga_category]=true
}}}},isActiveService:function(f,c,a){var g=f.get("classNames").concat()||[];var b=Cv.servicesController.getPath("activeService.id")||0;
var e=f.get("parentView");if(!c){g.removeObject("active-service");if(b==0&&e.lastActiveService==a){_gaq.push(["_trackEvent",a,Cv.GA.ACTION_DEACTIVATED,Cv.GA.getSessionUUID()])
}}else{g.pushObject("active-service");_gaq.push(["_trackEvent",a,Cv.GA.ACTION_ACTIVATED,Cv.GA.getSessionUUID()]);
e.lastActiveService=a}f.set("classNames",g)},activeServiceSelectorView:SC.SegmentedView.design({layout:{centerY:0,height:41,left:10,width:300},classNames:["service-controller"],allowsMultipleSelection:NO,allowsEmptySelection:YES,servicesControllerBinding:"Cv.servicesController",itemsBinding:"Cv.servicesController",itemTitleKey:"name",itemIsEnabledKey:"isAvailable",itemToolTipKey:"serviceAvailabilityMessage",valueBinding:"Cv.servicesController.activeService",gmIsAvailableBinding:SC.Binding.oneWay("Cv.gradeMarkController.isAvailable"),orIsAvailableBinding:SC.Binding.oneWay("Cv.originalityController.isAvailable"),pmIsAvailableBinding:SC.Binding.oneWay("Cv.peerMarkController.isAvailable"),gmIsActiveBinding:SC.Binding.oneWay("Cv.gradeMarkController.isActive"),orIsActiveBinding:SC.Binding.oneWay("Cv.originalityController.isActive"),pmIsActiveBinding:SC.Binding.oneWay("Cv.peerMarkController.isActive"),gmAvailabilityMessageBinding:SC.Binding.oneWay("Cv.gradeMarkController.serviceAvailabilityMessage"),orAvailabilityMessageBinding:SC.Binding.oneWay("Cv.originalityController.serviceAvailabilityMessage"),pmAvailabilityMessageBinding:SC.Binding.oneWay("Cv.peerMarkController.serviceAvailabilityMessage"),inDemoModeBinding:"Cv.inDemoMode",_serviceAvailabilityDidChange:function(){if((this.get("gmIsActive")&&!this.get("gmIsAvailable"))||(this.get("orIsActive")&&!this.get("orIsAvailable"))||(this.get("pmIsActive")&&!this.get("pmIsAvailable"))){this.set("value",null)
}}.observes("gmIsAvailable","orIsAvailable","pmIsAvailable"),_serviceAvailabilityMessageDidChange:function(){var a=0;
this.get("items").forEach(function(b){this.itemContentDidChange(b,null,null,a++)},this)
}.observes("gmAvailabilityMessage","orAvailabilityMessage","pmAvailabilityMessage"),triggerItemAtIndex:function(b){var a=this.get("value");
var c={fn:function(f){var e=this.get("items").objectAt(b);if((e===Cv.originalityController)||(e===Cv.peerMarkController)){if(Cv.demoNotice()){return NO
}else{if((e===Cv.originalityController)&&!Cv.originalityController.get("isAvailable")){Cv.originalityController.warnNotAvailable();
return NO}else{if((e===Cv.peerMarkController)&&!Cv.peerMarkController.get("isAvailable")){Cv.peerMarkController.warnNotAvailable();
return NO}}}}f.callee.base.apply(this,f)},target:this,args:arguments};Cv.editingRegistryController.tryToPerform(c);
if(a&&(!this.get("value")||this.get("value")!==a)){a.set("isVisible",NO)}}}),orVisibleButtonView:SC.ButtonView.design({layout:{centerY:0,height:41,left:15,width:20},classNames:["or-visibility-button"],displayProperties:["classNames"],buttonBehavior:SC.TOGGLE_BEHAVIOR,titleMinWidth:20,valueBinding:"Cv.originalityController.isVisible",isEnabledBinding:SC.Binding.oneWay("Cv.originalityController.canVisibilityBeChanged"),isVisibleBinding:SC.Binding.oneWay("Cv.servicesController.isContentLoaded").bool(),parentIsActiveServiceBinding:".parentView.isActiveService",isActiveService:function(){var a=Cv.originalityController.get("isActive");
this.get("parentIsActiveService")(this,a,Cv.GA.CATEGORY_OR)}.observes("Cv.originalityController.isActive")}),gmVisibleButtonView:SC.ButtonView.design({layout:{centerY:0,height:41,left:110,width:20},classNames:["gm-visibility-button"],buttonBehavior:SC.TOGGLE_BEHAVIOR,titleMinWidth:20,valueBinding:"Cv.gradeMarkController.isVisible",isEnabledBinding:SC.Binding.oneWay("Cv.gradeMarkController.canVisibilityBeChanged"),isVisibleBinding:SC.Binding.oneWay("Cv.servicesController.isContentLoaded").bool(),parentIsActiveServiceBinding:".parentView.isActiveService",isActiveService:function(){var a=Cv.gradeMarkController.get("isActive");
this.get("parentIsActiveService")(this,a,Cv.GA.CATEGORY_GM)}.observes("Cv.gradeMarkController.isActive")}),pmVisibleButtonView:SC.ButtonView.design({layout:{centerY:0,height:41,left:212,width:20},classNames:["pm-visibility-button"],buttonBehavior:SC.TOGGLE_BEHAVIOR,titleMinWidth:20,valueBinding:"Cv.peerMarkController.isVisible",isEnabledBinding:SC.Binding.oneWay("Cv.peerMarkController.canVisibilityBeChanged"),isVisibleBinding:SC.Binding.oneWay("Cv.servicesController.isContentLoaded").bool(),parentIsActiveServiceBinding:".parentView.isActiveService",isActiveService:function(){var a=Cv.peerMarkController.get("isActive");
this.get("parentIsActiveService")(this,a,Cv.GA.CATEGORY_PM)}.observes("Cv.peerMarkController.isActive")})});
Cv.ApplicationSplitView=SC.SplitView.extend({autoresizeBehavior:SC.RESIZE_TOP_LEFT,defaultThickness:300,defaultWiderWidth:400,dividerThickness:0,sidebarIsWider:NO,sidebarIsVisible:YES,toggleSidebarVisibility:function(){this.set("sidebarIsVisible",!this.get("sidebarIsVisible"))
},_sidebarVisibilityDidChange:function(){if(this.get("sidebarIsVisible")){var a=(this.get("sidebarIsWider")?this.get("defaultWiderWidth"):this.get("defaultThickness"));
this.get("topLeftView").adjust("right",a);this.get("bottomRightView").adjust("width",a);
this.get("bottomRightView").adjust("right",0)}else{this.get("topLeftView").adjust("right",0);
this.get("bottomRightView").adjust("width",300);this.get("bottomRightView").adjust("right",-300)
}}.observes("sidebarIsVisible","sidebarIsWider")});Cv.HIGHLIGHT_ATTACHEMNT_BOTTOM="bottom";
Cv.HIGHLIGHT_ATTACHEMNT_TOP="top";Cv.MarkView=SC.View.extend({classNames:["mark-view"],displayProperties:["classNames"],paperBinding:"Cv.paperController.content",content:null,recordStatusBinding:".content.status",zoomController:null,concatenatedProperties:["markViewProperties"],serviceIsActive:NO,serviceIsActiveBindingDefault:SC.Binding.oneWay(),markViewProperties:["isExpanded","isEditing","preventCollapse"],isExpanded:NO,isEditing:NO,preventCollapse:NO,markCriteriaSelectionDelegate:null,isDragging:NO,highlightLinkLineAttachmentPoint:Cv.HIGHLIGHT_ATTACHEMNT_TOP,highlightOverrideDefaultColor:NO,isProcessing:function(){return(this.get("recordStatus")&SC.Record.BUSY)
}.property("recordStatus").cacheable(),isReady:function(){return((this.get("recordStatus")&SC.Record.READY)!==0)&&!(this.get("recordStatus")&SC.Record.BUSY)
}.property("recordStatus").cacheable(),isError:function(){return(this.get("recordStatus")&SC.Record.ERROR)!==0
}.property("recordStatus").cacheable(),isNewlyCreated:function(){return(this.get("recordStatus")===SC.Record.READY_NEW)
}.property("recordStatus").cacheable(),defaultLayout:{top:0,left:0,width:0,height:0},layout:function(){var c=this.get("content"),a=this.get("defaultLayout");
if(c){var b=this.get("zoomController");a={top:c.get("y"),left:c.get("x"),width:0,height:0};
a=b.getZoomedLayout(a)}else{console.log("Falling back to default layout:  No mark found.")
}return a}.property("content").cacheable(),currentView:function(){var a=null;var c=this.get("isExpanded");
var b=this.get("isEditing");if(!c){a=this.get("collapsedView")}else{a=this.get("expandedView")
}return a}.property("isExpanded","isEditing","recordStatus").cacheable(),collapsedView:null,expandedView:null,init:function(){arguments.callee.base.apply(this,arguments);
this._readMarkViewProperties();this._displayCurrentView()},_displayCurrentView:function(){if(!this.get("isVisible")){return
}var b=this._previousView;var a=this.get("currentView");if(b!==a){if(b&&b.get("parentView")==this){this.removeChild(b)
}this._previousView=a;this.appendChild(a)}}.observes("isExpanded","isEditing"),showCollapsedView:function(){this.set("isExpanded",NO);
this.set("isEditing",NO)},showExpandedViewAsReadOnly:function(){this.set("isExpanded",YES);
this.set("isEditing",NO)},showExpandedViewAsEditing:function(){if(!Cv.get("inStudentMode")){this.set("isExpanded",YES);
this.set("isEditing",YES)}},updateX:function(){var a=this.getPath("content.x");var c=this.get("zoomController");
var b=c.getZoomedValue(a);this.adjust("left",b)}.observes(".content.x"),updateY:function(){var c=this.getPath("content.y");
var b=this.get("zoomController");var a=b.getZoomedValue(c);this.adjust("top",a)}.observes(".content.y"),addClassName:function(a){if(!this.hasClassName(a)){var b=this.get("classNames").concat(a);
this.set("classNames",b)}},removeClassName:function(a){if(this.hasClassName(a)){var b=this.get("classNames").concat()||[];
b.removeObject(a);this.set("classNames",b)}},hasClassName:function(b){var c=this.get("classNames");
var a=(c&&(c.indexOf(b)!==-1));return a},isEmphasizedBinding:".content.isEmphasized",isEmphasizedDidChange:function(){if(this.get("isEmphasized")){this.addClassName("focused");
this.scrollToVisible()}else{this.removeClassName("focused")}}.observes("isEmphasized"),mouseEntered:function(){if(!this.get("serviceIsActive")){return
}var a=this.get("isExpanded");if(!a){this.showExpandedViewAsReadOnly()}if(this._showCollapsedViewTimer){this._showCollapsedViewTimer.invalidate();
this._showCollapsedViewTimer=null}this.addClassName("hover")},mouseExited:function(){var b=this.get("isExpanded"),a=this.get("isEditing"),c=this.get("preventCollapse");
if(b&&!a&&!c){if(!this._showCollapsedViewTimer){this._showCollapsedViewTimer=SC.Timer.schedule({target:this,action:function(){this._showCollapsedViewTimer=null;
this.showCollapsedView();this.removeClassName("hover")},interval:200})}}},_readMarkViewProperties:function(){var b=this.get("content");
if(b){var a=this.get("markViewProperties");a.forEach(function(e){var c=b.get(e);if(c!==undefined){this.set(e,c);
b.set(e,null)}},this)}},executeMarkCriteriaAssociation:function(){var a=Cv.markCriterionSelectionController.getMarkCriterionSelectionViewDelegate(this);
if(a){a.userSavedChanges()}},resetMarkCriteriaAssociation:function(){var a=Cv.markCriterionSelectionController.getMarkCriterionSelectionViewDelegate(this);
if(a){a.userCancelledChanges()}},_writeMarkViewProperties:function(){var b=this.get("content");
if(b&&b.get("isEditable")){var a=this.get("markViewProperties");a.forEach(function(e){var c=this.get(e);
b.set(e,c)},this)}},willDestroyLayer:function(){this._writeMarkViewProperties()},dragDataTypes:[Cv.Mark],dragDataForType:function(b,a){var c=this.get("content");
return c},mouseDown:function(a){if(!this.get("serviceIsActive")){return NO}if(Cv.servicesController.getPath("activeService.id")==2){return NO
}if(this.get("isReady")){this.drag=null;if(!this.drag){if(this.isDragHandle(a.target,"move")){this.drag=SC.Drag.start({event:a,source:this,dragView:this.get("currentView"),ghost:YES,dragDataSource:this,type:"move"});
this.set("isDragging",YES)}}}return YES},mouseUp:function(a){if(this.drag){this.set("isDragging",NO)
}return YES},dragDidEnd:function(b,c,e){if(b.get("type")==="move"){this.set("isDragging",NO);
var a=0;if(this.getPath("content.highlight")){var a=1}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent",Cv.GA.CATEGORY_QM,Cv.GA.ACTION_MOVED,Cv.GA.getSessionUUID(),a])
}}},isDragHandle:function(b,a){return(b&&b.className)?(b.className.indexOf(a+"-handle")>=0)?YES:(b.parentNode===this.getPath("currentView.layer"))?NO:this.isDragHandle(b.parentNode,a):NO
},collapsedViewLeft:function(){return this.get("layout").left}.property("layout").cacheable(),collapsedViewTop:function(){return this.get("layout").top
}.property("layout").cacheable(),collapsedViewHeight:function(){console.log("collapsedViewHeight must be implemented!!!!")
}.property("layout").cacheable(),collapsedViewWidth:function(){console.log("collapsedViewWidth must be implemented!!!!")
}.property("layout").cacheable(),collapsedViewFrame:function(){var c=this.get("collapsedViewTop"),b=this.get("collapsedViewLeft"),a=this.get("collapsedViewWidth"),e=this.get("collapsedViewHeight");
if(SC.none(c)||SC.none(b)||SC.none(a)||SC.none(e)){return null}return{y:c,x:b,width:a,height:e}
}.property("collapsedViewLeft","collapsedViewWidth","collapsedViewTop","collapsedViewHeight").cacheable(),isPmMark:function(){var a=this.getPath("content.read.isPeerMarkRead");
return a}.property().cacheable(),isExpandedDidChange:function(){var a=this.get("isExpanded");
var b=this.get("content");b.set("isExpanded",a)}.observes("isExpanded")});Cv.MarkView.COLLAPSED_VIEW_PADDING=3;
Cv.MarkCriterionSelectPane=SC.PickerPane.extend({classNames:["criteria-select-popover"],delegate:null,rowHeight:21,visibleObserver:function(){if(!this.get("isPaneAttached")){this.setPath("delegate.mark.preventCollapse",NO);
if(this.getPath("delegate.mark.isExpanded")&&!this.getPath("delegate.mark.isEditing")){this.getPath("delegate").userSavedChanges()
}}}.observes("isPaneAttached"),contentView:SC.ListView.design({layout:{right:0,bottom:0,left:0,minHeight:21},isPaneAttachedBinding:".parentView.isPaneAttached",isPaneAttachedObserver:function(){if(!this.get("isPaneAttached")){this.get("delegate").invokeDelegateMethod(null,"collectionViewClearContentViewSelections",this)
}else{this.get("delegate").invokeDelegateMethod(null,"collectionViewSetInitialContentViewSelections",this)
}}.observes("isPaneAttached"),contentValueKey:"name",contentBinding:"Cv.rubricController.criteria",rowHeightBinding:".parentView.rowHeight",selectionObserver:function(){this.setPath("delegate.selectionSet",this.get("selection"))
}.observes("delegate","*selection.[]"),click:function(a){arguments.callee.base.apply(this,arguments);
this.get("thePane").remove()},thePaneBinding:".parentView",delegateBinding:".parentView.delegate",selectionDelegateBinding:".parentView.delegate",exampleView:SC.ListItemView.design({})})});
sc_require("views/mark_criterion/mark_criterion_select_pane");Cv.markCriterionSelectPage=SC.Page.create({markView:null,content:null,pickerPane:Cv.MarkCriterionSelectPane.design({markViewBinding:".parentView.markView"})});
sc_require("views/mark_criterion/mark_criterion_select_page");Cv.MarkCriterionSelectView=SC.View.extend({classNames:["rubric-criterion-select"],childViews:Cv.get("inStudentMode")?["criteriaLabelStudentView","criteriaSelectStudentView"].join(" ").w():["criteriaLabelInstructorView","criteriaSelectInstructorView","removeAssociationButtonView"].join(" ").w(),currentSelectView:function(){return Cv.get("inStudentMode")?this.criteriaSelectStudentView:this.criteriaSelectInstructorView
}.property().cacheable(),layout:{height:30,top:13,left:14,right:14},markView:null,markCriteriaBinding:".markView.content.markCriteria",markIsExpandedBinding:".markView.isExpanded",markIsEditingBinding:".markView.isEditing",parentIsVisibleBinding:".markView.expandedView.isVisible",rubricBinding:"Cv.assignmentController.rubric",shouldBeVisibleObserver:function(){var a;
if(!Cv.config.get("CAN_USE_MARK_CRITERIA_ASSOCIATION")){a=NO}else{if(Cv.get("inStudentMode")&&(this.getPath("markCriteria.length")===0)){a=NO
}else{if(!this.get("rubric")){a=NO}else{if(this.get("parentIsVisible")&&this.get("rubric")){a=YES
}}}}this.set("isVisible",a);this._adjustParentHeight()}.observes("markCriteria","parentIsVisible","rubric","markIsExpanded"),_adjustParentHeight:function(){this.getPath("markView.expandedView").adjustHeight()
},_adjustWidthObserver:function(){if(this.get("isVisible")){var a=this.getPath("markView.expandedView.frame").width-57||0;
Cv.get("inStudentMode")?this.criteriaSelectStudentView.adjust("width",a):this.criteriaSelectInstructorView.adjust("width",a)
}}.observes("isVisible","markIsExpanded","markIsEditing"),criteriaLabelStudentView:SC.View.extend({layout:{height:22,top:2,left:0,width:26},classNames:["criteria-select-actionlabel"]}),criteriaSelectStudentView:SC.LabelView.design({layout:{height:24,left:29},classNames:["criteria-select-actionbutton"],defaultWidth:120,markCriteriaBinding:".parentView.markView.content.markCriteria",markIsExpandedBinding:".parentView.markIsExpanded",value:function(){var a="";
if(this.getPath("markCriteria.length")===1){a=this.getPath("markCriteria.firstObject.criterion.name")
}else{if(this.getPath("markCriteria.length")>1){a="_Multiple criteria".loc()}}return a
}.property("markIsExpanded").cacheable()}),criteriaLabelInstructorView:SC.ButtonView.extend({layout:{height:22,top:2,left:0,width:26},classNames:["criteria-select-actionlabel"],action:function(){this.getPath("parentView.currentSelectView").action()
}}),criteriaSelectInstructorView:SC.ButtonView.design({layout:{height:23,left:32},defaultWidth:120,classNames:["criteria-select-actionbutton"],displayProperties:["classNames"],markCriterionSelectionControllerBinding:"Cv.markCriterionSelectionController",markIsEditingBinding:".parentView.markIsEditing",markIsExpandedBinding:".parentView.markIsExpanded",contentBinding:".parentView.markView.content",markCriteriaBinding:".parentView.markView.content.markCriteria",markCriteriaLengthBinding:".parentView.markView.content.markCriteria.length",hasSelectionObserver:function(){if(this.get("markCriteriaLength")>0){this.get("classNames").pushObject("mark-criteria-selected")
}else{this.get("classNames").removeObject("mark-criteria-selected")}}.observes("markIsExpanded","markCriteriaLength"),delegate:null,selectionSetBinding:".delegate.selectionSet",title:function(){var b="_Associate a criterion".loc();
var a=(this.getPath("delegate.deferredMarkCriteria.objectsToAdd.length")>0);if(a){b=this.getPath("delegate.deferredMarkCriteria.objectsToAdd.firstObject.criterion.name")
}else{if(this.getPath("markCriteriaLength")===1){b=this.getPath("markCriteria.firstObject.criterion.name")
}else{if(this.getPath("markCriteriaLength")>1){b="_Multiple".loc()}}}return b}.property("markIsExpanded","markIsEditing","delegate","selectionSet","markCriteriaLength").cacheable(),markIsExpandedOrEditingObserver:function(){if(this.get("markIsExpanded")||this.get("markIsEditing")){var a=this.get("markCriterionSelectionController").getMarkCriterionSelectionViewDelegate(this.getPath("parentView.markView"));
this.set("delegate",a)}}.observes("markIsExpanded","markIsEditing"),action:function(){this.getPath("parentView.markView").set("preventCollapse",YES);
var b=Cv.markCriterionSelectPage.get("pickerPane");b.set("delegate",this.get("delegate"));
var a=this.getPath("parentView.currentSelectView.layout").width;b.adjust("height",this.getPath("parentView.rubric.criteria.length")*b.get("rowHeight"));
this.get("markIsEditing")?b.adjust("width",282):b.adjust("width",a||120);b.popup(this,SC.PICKER_MENU)
}}),removeAssociationButtonView:SC.ButtonView.design({layout:{height:20,top:3,right:25,width:20},classNames:["criterion-delete"],markCriterionSelectionControllerBinding:"Cv.markCriterionSelectionController",markViewBinding:".parentView.markView",markCriteriaBinding:".parentView.markView.content.markCriteria",markCriteriaLengthBinding:".parentView.markView.content.markCriteria.length",markIsEditingBinding:".parentView.markIsEditing",markIsExpandedBinding:".parentView.markIsExpanded",isVisible:function(){return((this.get("markCriteriaLength")>0)&&!this.get("markIsEditing"))
}.property("markCriteriaLength","markIsEditing").cacheable(),delegate:null,markIsExpandedObserver:function(){if(this.get("markIsExpanded")){var a=this.get("markCriterionSelectionController").getMarkCriterionSelectionViewDelegate(this.getPath("parentView.markView"));
this.set("delegate",a)}}.observes("markIsExpanded","markIsEditing"),action:function(){var a=this.get("delegate");
if(a){a.removeMarkCriteriaAssociations()}}})});sc_require("views/mark");sc_require("views/mark_criterion/mark_criterion_select");
Cv.CommentView=Cv.MarkView.extend(Ip.EditingInterceptor,{content:null,paperView:null,classNames:["comment-view"],quickMarkTemplateSetsController:null,markViewProperties:["editText","isMoreOptionsViewsVisible","quickMarkTemplateName","quickMarkTemplateSet"],activeCommentBinding:"Cv.markSetController.activeComment",editText:null,isMoreOptionsViewsVisible:NO,quickMarkTemplateName:null,quickMarkTemplateSet:null,collapsedView:function(){var a=this.createChildView(SC.View.design(Cv.MarkStatusIndicator,Cv.MarkIcon,{layout:{top:0,left:0,height:Cv.CommentView.COLLAPSED_VIEW_HEIGHT,width:this.get("collapsedViewWidth")},childViews:"iconView creatorIdView".w(),classNames:["collapsed-view"],creatorId:this.getPath("content.initials"),markView:this,displayProperties:["recordStatus"],iconView:Ip.ImageView.design({layout:{top:0,left:0,height:24,width:Cv.CommentView.COMMENT_ICON_VIEW_WIDTH},tagName:"div",classNames:["mark-icon"]}),creatorIdView:SC.LabelView.design({layout:{centerY:0,left:32,height:19,width:Cv.CommentView.CREATOR_ID_VIEW_WIDTH},commentView:this,isVisibleBinding:".commentView.collapsedView.creatorId",valueBinding:SC.Binding.transform(function(b){return"| "+b
}).from(".commentView.collapsedView.creatorId")}),collapsedViewWidth:function(){return(this.get("creatorId"))?Cv.CommentView.COMMENT_ICON_VIEW_WIDTH+Cv.CommentView.CREATOR_ID_VIEW_WIDTH:Cv.CommentView.COMMENT_ICON_VIEW_WIDTH
}.property().cacheable(),commentView:this,recordStatusBinding:".commentView.recordStatus",showingStatusDidChange:function(){if(this.get("showingStatus")){this.adjust("width",this.get("collapsedViewWidth")+Cv.CommentView.STATUS_ICON_VIEW_WIDTH)
}else{this.adjust("width",this.get("collapsedViewWidth"))}}.observes("showingStatus")}));
return a}.property().cacheable(),expandedView:function(){var b=SC.View.extend({layout:{left:0,top:0,width:this.getPath("content.width"),height:220,minWidth:230,maxWidth:340},childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"colorSelectionView headerView bodyView criteriaView".w():"headerView bodyView criteriaView colorSelectionView moreOptionsView footerView".w(),classNames:["expanded-view"],commentView:this,isEditingBinding:".commentView.isEditing",isEditingObserver:function(){if(this.get("isEditing")){this.$().addClass("editing")
}else{this.$().removeClass("editing")}}.observes("isEditing"),hasHighlight:function(){return !!this.getPath("commentView.content.highlight")
}.property().cacheable(),isExpandedBinding:".parentView.isExpanded",canResizeWidth:YES,init:function(){arguments.callee.base.apply(this,arguments);
this.adjustWidth();this.adjustHeight()},createChildViews:function(){arguments.callee.base.apply(this,arguments);
this._hasCreatedChildViews=true},creatorId:this.getPath("content.initials"),adjustWidth:function(){var f=this.getPath("commentView.content.text");
var e=this.getPath("bodyView.labelView.contentView.layer")||"";var c=this.getPath("commentView.isEditing")?340:SC.metricsForString(f,e,null,YES).width+10;
if(this.get("creatorId")){c=c+Cv.CommentView.CREATOR_ID_VIEW_WIDTH}this.adjust("width",c)
}.observes(".commentView.isEditing"),adjustHeight:function(){if(!this._hasCreatedChildViews){return
}if(this.getPath("commentView.isEditing")){var i=this.bodyView.fieldView;this.bodyView.adjust("height",i.get("frame").height+Cv.CommentView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER)
}else{var c=this.bodyView.labelView,f=c.get("frame").height;this.bodyView.adjust("height",f+Cv.CommentView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER)
}var e=this.headerView.get("frame").height;var l=this.bodyView.get("frame").height;
var h=this.criteriaView.get("isVisible")?this.criteriaView.get("frame").height:0;
var m=this.colorSelectionView.get("isVisible")?this.colorSelectionView.get("frame").height:0;
var g=(this.moreOptionsView.get)?(this.moreOptionsView.get("isVisible")?this.moreOptionsView.get("frame").height:0):0;
var j=(this.footerView.get)?this.footerView.get("frame").height:0;if(h&&Cv.get("inStudentMode")){j=j+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER
}var k=e+l+g+m+j+h+9;if(this.criteriaView.get("isVisible")){this.criteriaView.adjust("top",(e+l+19))
}this.colorSelectionView.adjust("top",(e+h+l+25));this.adjust("height",k)},dragDidEnd:function(c,e,g){if(c.get("type")==="resize"){var f=this.getPath("commentView.content");
f.set("width",this.get("frame").width);this.adjustHeight()}},headerView:SC.View.design({layout:{top:0,height:20,left:0,right:0},paperBinding:"Cv.paperController.content",childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"dataView".w():"dataView deleteButtonView".w(),classNames:"expanded-view-header move-handle".w(),dataView:SC.View.design(Cv.MarkIcon,{layout:{top:0,right:0,bottom:0,left:0},markView:this,creatorIdBinding:".markView.expandedView.creatorId",recordStatusBinding:".markView.recordStatus",displayProperties:["creatorId","recordStatus"],render:function(c,e){c.push('<div class="mark-icon"></div>');
if(this.get("creatorId")){c.push('<div class="template-name">').push("| %@".fmt(this.get("creatorId"))).push("</div>")
}if(this.get("recordStatus")&SC.Record.ERROR){c.push('<div class="sc-icon-alert-16 mark-error"></div>')
}else{if(this.get("recordStatus")&SC.Record.BUSY){c.push('<img style="margin-top: 4px; margin-left: 8px;" src="%@" class="mark-busy">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif"))
}}}}),deleteButtonView:SC.ButtonView.design({layout:{top:0,right:5,width:15},isEnabledBinding:SC.Binding.bool(".commentView.isProcessing").not(),isVisibleBinding:SC.Binding.oneWay(".commentView.isNewlyCreated").not(),classNames:"comment-delete",titleMinWidth:"15px",commentView:this,action:function(){var c=this.get("commentView");
c.deleteComment()}})}),bodyView:SC.View.design({layout:{top:32,height:30,left:15,right:15},childViews:"labelView fieldView".w(),classNames:"comment-readview",labelView:Cv.DynamicLabelView.design({layout:{top:0,left:0,right:0},classNames:this.get("labelViewIsEditable")?"editable".w():"".w(),isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing").not(),isReadonlyBinding:"Cv.paperController.isReadonly",mark:this.get("content"),escapeHTML:NO,valueBinding:".mark.text",maxHeight:270,commentView:this,mouseDown:function(c){if(this.get("labelViewIsEditable")){var e=c.target;
if(!e||(e.tagName.toLowerCase()!=="a")){this.get("commentView").showExpandedViewAsEditing()
}}},labelViewIsEditable:function(){return(!this.get("isProcessing")&&!this.getPath("parentView.parentView.parentView.isPmMark"))?YES:NO
}.property("isProcessing","mark").cacheable(),minHeight:30,dynamicStyles:"line-height: 1.45em",_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight")}),fieldView:Ip.DynamicTextFieldView.design(Cv.EscapeValue,{layout:{top:0,bottom:0,left:0,right:0},isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing"),hint:"_Enter comment here".loc(),isTextArea:YES,maxHeight:350,maxLength:Cv.Comment.TEXT_MAX_LENGTH,nextKeyView:function(){if(this.get("isMoreOptionsViewsVisible")){return this.getPath("commentView.expandedView.moreOptionsView.qmTemplateSetSelectFieldView")
}else{return this.getPath("commentView.expandedView.footerView.saveButtonView")}}.property("isMoreOptionsViewsVisible").cacheable(),previousKeyView:function(){if(this.get("isMoreOptionsViewsVisible")){return this.getPath("commentView.expandedView.footerView.cancelButtonView")
}else{return this.getPath("commentView.expandedView.footerView.moreOptionsButtonView")
}}.property("isMoreOptionsViewsVisible").cacheable(),mark:this.get("content"),commentView:this,isMoreOptionsViewsVisibleBinding:".commentView.isMoreOptionsViewsVisible",activeCommentBinding:"Cv.markSetController.activeComment",activeCommentHasChanged:function(){if(this.get("activeComment")&&SC.empty(this.get("value"))&&typeof this.getPath("mark.comment")=="undefined"&&this.get("activeComment")!==this.get("mark")){this.get("commentView").deleteComment()
}}.observes("activeComment"),didBecomeKeyResponderTo:function(c){this.setIfChanged("activeComment",this.get("mark"))
},sanitizedValueBinding:SC.Binding.oneWay(".parentView.parentView.commentView.editText"),sanitizedValueDidChange:function(){var e=this.get("isVisible");
if(e){var c=this.get("sanitizedValue");this.setPath("parentView.parentView.commentView.editText",c)
}}.observes("sanitizedValue"),minHeight:30,dynamicStyles:'font-family:"Lucida Sans"; font-size:11.8833px; font-weight:400; font-style:normal; line-height: 15px;',_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight")})}),criteriaView:Cv.MarkCriterionSelectView.design({markView:this}),colorSelectionView:SC.RadioView.design({init:function(){arguments.callee.base.apply(this,arguments);
this.highlightWasSet()},layout:{top:3,right:0,height:35,left:40},classNames:["highlight-color-select"],isEditingBinding:".parentView.commentView.isEditing",hasHighlightBinding:".parentView.hasHighlight",isVisible:function(){return this.get("isEditing")&&this.get("hasHighlight")
}.property("isEditing","hasHighlight").cacheable(),layoutDirection:SC.LAYOUT_HORIZONTAL,highlight:this.getPath("content.highlight"),colorStatus:null,highlightWasSet:function(){if(this.get("highlight")&&!this.colorStatusBinding){this.colorStatusBinding=this.bind("colorStatus",SC.Binding.oneWay(".highlight.status"))
}}.observes("highlight"),highlightLastColorSelectionBinding:"Cv.userDefaults.highlightLastColorSelection",displayProperties:["layout"],value:function(e,f){if(f){this.setPath("highlight.color",f);
this.set("highlightLastColorSelection",f)}else{if(this.get("highlightLastColorSelection")){var c=(this.get("highlight")&&(this.getPath("highlight.id")))?this.getPath("highlight.color"):this.get("highlightLastColorSelection");
this.setPath("highlight.color",c);f=c}else{f=(this.get("highlight")&&(this.getPath("highlight.id")))?this.getPath("highlight.color"):Cv.config.HIGHLIGHT_COLORS_DEFAULT
}}return f}.property("highlight","isEditing").cacheable(),items:Cv.config.HIGHLIGHT_COLORS.slice(1,Cv.config.HIGHLIGHT_COLORS.length),itemTitleKey:"title",itemValueKey:"value",itemIconKey:"icon"}),moreOptionsView:SC.View.design({layout:{bottom:38,height:67,left:14,right:14},classNames:["more-options-view"],childViews:"instructionView helpView qmTitleLabelView qmTitleFieldView qmTemplateSetLabelView qmTemplateSetSelectFieldView noTemplateSetsMessageView".w(),instructionView:SC.LabelView.design({classNames:"instruction-view",layout:{top:0,height:20,left:0,right:10},value:"_Save as QuickMark".loc()}),helpView:SC.ButtonView.design({classNames:"help",layout:{top:0,width:14,height:15,right:0},value:"_Help".loc(),toolTip:"_If you would like this comment to become a reusable QuickMark comment, enter a title for the QuickMark and select which set you would like to add the mark to. Click Save to turn the comment into a QuickMark.".loc()}),qmTitleLabelView:SC.LabelView.design({classNames:"field-label",layout:{top:23,height:15,left:0,width:70},value:"_Title".loc()}),qmTitleFieldView:SC.TextFieldView.design({layout:{top:23,height:20,right:0,width:172},hint:"_Enter QuickMark title here".loc(),spellCheckEnabled:NO,valueBinding:SC.Binding.oneWay(".parentView.parentView.commentView.quickMarkTemplateName"),valueDidChange:function(){var e=this.getPath("parentView.isVisible");
if(e){var c=this.get("value");this.setPath("parentView.parentView.commentView.quickMarkTemplateName",c)
}}.observes("value"),maxLength:Qm.QuickMarkTemplate.NAME_MAX_LENGTH,commentView:this,nextKeyView:function(){return this.getPath("commentView.expandedView.footerView.saveButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.qmTemplateSetSelectFieldView")
}.property().cacheable()}),qmTemplateSetLabelView:SC.LabelView.design({classNames:"field-label",layout:{top:46,height:15,left:0,width:70},value:"_Set".loc()}),noTemplateSetsMessageView:SC.LabelView.design({layout:{top:46,height:15,width:170,right:0},value:"_You do not currently have any QuickMark sets.".loc(),isVisibleBinding:SC.Binding.notEmpty("Cv.userController.quickMarkTemplateSets").not()}),qmTemplateSetSelectFieldView:Cv.SelectView.design({layout:{top:46,height:15,width:170,right:0},isVisibleBinding:SC.Binding.notEmpty("Cv.userController.quickMarkTemplateSets"),theme:"square",classNames:["set-select-button"],itemsBinding:SC.Binding.oneWay("Cv.commentTemplateSetsController.arrangedObjects"),itemTitleKey:"displayName",itemSortKey:"sortName",positionMenuBelow:YES,commentView:this,acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.qmTitleFieldView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("commentView.expandedView.bodyView.fieldView")
}.property().cacheable(),valueBinding:SC.Binding.oneWay("Cv.sidebarActiveSet.content")}),isVisibleBinding:".parentView.commentView.isMoreOptionsViewsVisible",isVisibleDidChange:function(){var c=this.get("parentView");
c.moreOptionsViewVisibilityChanged()}.observes("isVisible")}),footerView:SC.View.design({layout:function(){var e={bottom:0,left:15,right:15};
var c=40;if(this.get("moreOptionsLinkIsVisible")){c+=20}e.height=c;return e}.property("moreOptionsLinkIsVisible","hasHighlight").cacheable(),hasHighlightBinding:".parentView.hasHighlight",moreOptionsLinkVisibilityChanged:function(){if(this.parentView){this.parentView.adjustHeight()
}}.observes("moreOptionsLinkIsVisible"),moreOptionsLinkIsVisibleBinding:".moreOptionsButtonView.isVisible",paperBinding:"Cv.paperController.content",classNames:["comment-footer"],childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"moreOptionsButtonView".w():["moreOptionsButtonView","editButtonView","retryButtonView","saveButtonView","cancelButtonView"].join(" ").w(),moreOptionsButtonView:SC.ButtonView.design({layout:{top:0,left:0,width:225},hasHighlightBinding:".parentView.parentView.hasHighlight",isEditingBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing"),isEnabledBinding:SC.Binding.bool(".parentView.parentView.commentView.isProcessing").not(),classNames:"link-button",isMoreOptionsViewsVisibleBinding:SC.Binding.oneWay(".parentView.parentView.moreOptionsView.isVisible"),isVisible:function(){if(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")){return NO
}var e=this.get("isEditing");var f=this.get("isMoreOptionsViewsVisible");var c=e&&!f;
return c}.property("isEditing","isMoreOptionsViewsVisible").cacheable(),titleMinWidth:"30px",title:"_Save as new QuickMark".loc(),target:this,action:"showMoreOptionsView",commentView:this,acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("commentView.expandedView.bodyView.fieldView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.cancelButtonView")
}.property().cacheable()}).loc(Ip.getLocalizationHash("Cv.moreOptionsButton")),editButtonView:SC.ButtonView.design({layout:{bottom:9,right:0,width:100,height:14},isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing").not(),isEnabledBinding:SC.Binding.bool(".parentView.parentView.commentView.isProcessing").not(),titleMinWidth:"30px",title:"_Edit".loc(),target:this,action:"showExpandedViewAsEditing"}),retryButtonView:SC.ButtonView.design({layout:{bottom:9,left:0,width:100,height:14},isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isError"),titleMinWidth:"30px",title:"_Retry".loc(),target:this,action:"retrySave"}),saveButtonView:SC.ButtonView.design({layout:{bottom:9,right:108,width:100,height:14},isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing"),isEnabledBinding:SC.Binding.bool(".parentView.parentView.commentView.isProcessing").not(),classNames:["primary","edit-mode"],commentView:this,isMoreOptionsViewsVisibleBinding:".commentView.isMoreOptionsViewsVisible",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.cancelButtonView")
}.property().cacheable(),previousKeyView:function(){if(this.get("isMoreOptionsViewsVisible")){return this.getPath("commentView.expandedView.moreOptionsView.qmTitleFieldView")
}else{return this.getPath("commentView.expandedView.bodyView.fieldView")}}.property("isMoreOptionsViewsVisible").cacheable(),titleMinWidth:"30px",title:"_Save".loc(),target:this,action:"saveButtonClickHandler"}),cancelButtonView:SC.ButtonView.design({layout:{bottom:9,right:0,width:100,height:14},isVisibleBinding:SC.Binding.oneWay(".parentView.parentView.commentView.isEditing"),isEnabledBinding:SC.Binding.bool(".parentView.parentView.commentView.isProcessing").not(),classNames:"edit-mode",acceptsFirstResponder:YES,commentView:this,isMoreOptionsViewsVisibleBinding:".commentView.isMoreOptionsViewsVisible",nextKeyView:function(){if(this.get("isMoreOptionsViewsVisible")){return this.getPath("commentView.expandedView.bodyView.fieldView")
}else{return this.getPath("parentView.moreOptionsButtonView")}}.property("isMoreOptionsViewsVisible").cacheable(),previousKeyView:function(){return this.getPath("parentView.saveButtonView")
}.property().cacheable(),titleMinWidth:"30px",title:"_Cancel".loc(),target:this,action:"cancelButtonClickHandler"}).loc(Ip.getLocalizationHash("Cv.cancelButton"))}),moreOptionsViewVisibilityChanged:function(){this.adjustHeight()
}});var a=this.createChildView(b);return a}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.isEditingDidChange()},savingViaEditingRegistry:NO,closeEditViewWithSave:function(){this.saveButtonClickHandler();
this.showCollapsedView()},closeEditViewWithoutSave:function(){this.cancelButtonClickHandler();
this.showCollapsedView()},getRecord:function(){return this.get("content")},isEditingDidChange:function(){if(this.get("isEditing")){if((this.get("editText")===null)||(this.get("editText")===undefined)){var a=this.getPath("content.text");
var b=this.getPath("expandedView.bodyView.fieldView");b.set("sanitizedValue",a);this.invokeLater(function(){b.becomeFirstResponder()
},300)}this.hideMoreOptionsView()}else{this._clearEditProperties()}}.observes("isEditing"),saveCommentAndCloseEditView:function(){var b=this.getPath("expandedView.bodyView.fieldView");
var c=b.get("sanitizedValue");var e=this.get("content");e.exitErrorState();e.set("text",c);
this._clearEditProperties();this.showExpandedViewAsReadOnly();e.commitRecord();var a=e.get("highlight");
if(a){a.commitRecord()}this.executeMarkCriteriaAssociation()},retrySave:function(){var b=this.get("content");
b.exitErrorState();this._clearEditProperties();this.showExpandedViewAsReadOnly();
b.commitRecord();var a=b.get("highlight");if(a){a.commitRecord()}},showSaveError:function(b){var e="_Cannot Save Comment".loc();
var c=b;var a="_OK".loc();SC.AlertPane.warn(e,c,null,a,null,null,null)},showQuickmarkTemplateNotCreatedWarning:function(e){var i={commentView:this,alertPaneDidDismiss:function(k,j){switch(j){case SC.BUTTON1_STATUS:break;
default:break}}};var g=e;var f="_This comment will not be converted to a QuickMark.".loc();
var b=null;var a="_OK".loc();var h=null;var c=null;SC.AlertPane.warn(g,f,b,a,h,c,i)
},saveButtonClickHandler:function(){var b=this.getPath("expandedView.moreOptionsView");
if(b.get("isVisible")){try{this.convertToQuickMarkTemplate()}catch(a){this.showQuickmarkTemplateNotCreatedWarning(a)
}}else{try{this.saveCommentAndCloseEditView()}catch(a){this.showSaveError(a)}}},cancelButtonClickHandler:function(){var b=this.get("isMoreOptionsViewsVisible");
if(b){this.hideMoreOptionsView()}else{this._clearEditProperties();if(this.getPath("content.status")===SC.Record.READY_NEW){this.deleteComment()
}else{this.showExpandedViewAsReadOnly();var a=this.getPath("content.highlight");if(a){a.refresh()
}}this.resetMarkCriteriaAssociation()}},_clearEditProperties:function(){this.set("editText",null);
this.set("isMoreOptionsViewsVisible",NO);this.set("quickMarkTemplateName",null);this.set("quickMarkTemplateSet",null)
},hideMoreOptionsView:function(){var a=this.getPath("expandedView.moreOptionsView");
if(a.get("isVisible")){a.set("isVisible",NO)}},showMoreOptionsView:function(){var a=this.getPath("expandedView.moreOptionsView");
a.get("qmTitleFieldView").set("value","");a.set("isVisible",YES)},deleteComment:function(){var a=this.get("content");
if(a.get("status")!=SC.Record.DESTROYED_CLEAN){this.set("isEditing",NO);this.set("isVisible",NO);
Cv.markSetController.destroyComment(a)}},convertToQuickMarkTemplate:function(){var b=this.getPath("expandedView.bodyView.fieldView.sanitizedValue");
var f=this.getPath("expandedView.moreOptionsView.qmTitleFieldView.value");var g=this.getPath("expandedView.moreOptionsView.qmTemplateSetSelectFieldView.value");
if(!f){f="_[Untitled]".loc()}var e;if(!g.get("isNullPseudoSet")){e=Qmlib.createTemplateInSet({name:f,description:b,symbol:f},g)
}else{e=Qmlib.createTemplateNoSet({name:f,description:b,symbol:f})}var h=this.get("content");
var a=Cv.markSetController.createQuickMark({page:h.get("page"),x:h.get("x"),y:h.get("y"),template:"",use_template:YES},e);
this.set("isVisible",NO);h.set("cantUndo",YES);var c=h.get("highlight");if(c){c.set("mark",a);
h.set("highlight",null);c.addObserver("status",this,function(){if(h&&(c.get("status")===SC.Record.READY_CLEAN)){Cv.markSetController.destroyComment(h)
}});c.commitRecordWhenReady()}else{Cv.markSetController.destroyComment(h)}},collapsedViewWidth:function(){return Cv.CommentView.COMMENT_ICON_VIEW_WIDTH+(2*Cv.MarkView.COLLAPSED_VIEW_PADDING)
}.property("layout").cacheable(),collapsedViewHeight:function(){return Cv.CommentView.COLLAPSED_VIEW_HEIGHT+(2*Cv.MarkView.COLLAPSED_VIEW_PADDING)
}.property("layout").cacheable()});Cv.CommentView.COMMENT_ICON_VIEW_WIDTH=30;Cv.CommentView.COLLAPSED_VIEW_HEIGHT=20;
Cv.CommentView.CREATOR_ID_VIEW_WIDTH=30;Cv.CommentView.STATUS_ICON_VIEW_WIDTH=22;
Cv.CommentView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER=10;Cv.DynamicLabelView=SC.ScrollView.extend(SC.Control,{dynamicStyles:"",dynamicClasses:null,dynamicHeight:0,isOverflowing:NO,escapeHTML:NO,minHeight:30,maxHeight:200,padding:5,classNames:["dynamic-label-view"],contentView:function(a,b){if(b===undefined){b=SC.LabelView.design(Ip.AnchorTagActions,{valueBinding:"*parentView.parentView.value",isOverflowingBinding:"*parentView.owner.isOverflowing",dynamicHeightBinding:SC.Binding.oneWay("*parentView.owner.dynamicHeight"),escapeHTMLBinding:SC.Binding.oneWay("*parentView.owner.escapeHTML"),layout:function(){var c;
var e=this.get("isOverflowing");if(e){var f=this.get("dynamicHeight");c={left:0,right:0,top:0,height:f+12}
}else{c={left:0,right:0,top:0,bottom:0}}return c}.property("isOverflowing","dynamicHeight").cacheable()})
}return b}.property().cacheable(),_computeDynamicHeight:function(){var a=0;var g=0;
var f=this.get("value");if(f){var b=this.get("frame").width-4;g=this._computeTextDesiredHeight(f,b);
var e=NO;var c=this.get("maxHeight");if((c>0)&&(g>this.get("maxHeight"))){e=YES}a=g
}a=Math.max(a,Math.max(this.get("minHeight"),10));if(c>0){a=Math.min(a,c)}this.adjust("height",a);
this.set("dynamicHeight",g);this.set("isOverflowing",e)},_dlv_valueDidChange:function(){this._computeDynamicHeight()
}.observes("value"),_dlv_frameDidChange:function(){var a=this.get("frame");if(!this._prevFrame){this._computeDynamicHeight()
}else{if((a.width!==this._prevFrame.width)||(a.height!==this._prevFrame.height)){this._computeDynamicHeight()
}}this._prevFrame=a}.observes("frame"),_computeTextDesiredHeight:function(g,b){var e=this.get("padding");
var f="word-wrap: break-word; overflow-x: hidden; max-width: %@px; padding-top: %@px; padding-bottom: %@px; %@".fmt(b,e,e,this.get("dynamicStyles"));
var a=["dynamic-label-view-content"];var c=this.get("dynamicClasses");if(c){a=a.concat(c)
}return SC.heightForString(g,this.get("frame").width+e,f,a,YES)},init:function(){arguments.callee.base.apply(this,arguments);
this._computeDynamicHeight();this.get("verticalScrollerView").set("hasButtons",NO);
this.get("verticalScrollerView").set("buttonLength",0);this.get("verticalScrollerView").set("scrollbarThickness",10);
this.get("verticalScrollerView").set("capOverlap",16)}});Cv.ERaterMarkView=Cv.MarkView.extend(Ip.EditingInterceptor,{content:null,paperView:null,classNames:["e-rater-mark-view"],markViewProperties:["editText"],displayProperties:["classNames"],editText:null,nameBinding:".content.name",extraCommentBinding:".content.text",modifyClassNames:function(){var a=this.get("classNames").concat()||[];
if(!!this.get("extraComment")){a.pushObject("extra-comment")}else{a.removeObject("extra-comment")
}this.set("classNames",a)}.observes("extraComment"),collapsedView:function(){var a=this.createChildView(SC.View.design({displayProperties:["name","extraComment","recordStatus"],eRaterMarkView:this,nameBinding:".eRaterMarkView.name",extraCommentBinding:".eRaterMarkView.extraComment",recordStatusBinding:".eRaterMarkView.recordStatus",classNames:["collapsed-view"],render:function(b,c){b.push('<div class="feedback-name">%@</div>'.fmt(this.get("name")));
if(this.get("extraComment")){b.push('<img class="extra-comment-icon" src="%@">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/notepad.png"))
}if(this.get("recordStatus")&SC.Record.ERROR){b.push('<div class="sc-icon-alert-16 mark-error"></div>')
}else{if(this.get("recordStatus")&SC.Record.BUSY){b.push('<img src="%@" class="mark-busy">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif"))
}}}}));return a}.property().cacheable(),expandedView:function(){var b=Cv.ResizableView.design({layout:{top:0,height:170,left:0,width:this.getPath("content.width"),minWidth:Cv.ERaterMarkView.EXPANDED_VIEW_MIN_WIDTH},classNames:["expanded-view"],childViews:"headerView feedbackView commentView footerView".w(),eRaterMarkView:this,canResizeWidth:YES,init:function(){arguments.callee.base.apply(this,arguments);
this.adjustHeight()},createChildViews:function(){arguments.callee.base.apply(this,arguments);
this._hasCreatedChildViews=true},adjustHeight:function(){if(!this._hasCreatedChildViews){return
}if(!this.getPath("eRaterMarkView.isEditing")){var e=0;var f=this.commentView.get("labelView").get("frame").height;
if(f>8){var h=this.commentView.get("headingView").get("frame").height;e=f+h}this.commentView.adjust("height",e)
}else{var g=this.commentView.get("fieldView").get("frame").height;var h=this.commentView.get("headingView").get("frame").height;
this.commentView.adjust("height",g+h)}var i=SC.maxY(this.feedbackView.get("frame"));
this.commentView.adjust("top",i);var m=this.headerView.get("frame").height;var l=this.feedbackView.get("frame").height;
var k=this.commentView.get("frame").height;var j=this.footerView.get?this.footerView.get("frame").height:0;
var n=m+l+k+j+8;this.adjust("height",n)},dragDidEnd:function(c,e,g){if(c.get("type")==="resize"){var f=this.getPath("eRaterMarkView.content");
f.set("width",this.get("frame").width);this.adjustHeight()}},headerView:SC.View.design({layout:{top:0,height:19,left:0,right:0},paperBinding:"Cv.paperController.content",classNames:"expanded-view-header move-handle".w(),displayProperties:["name","extraComment","recordStatus"],eRaterMarkView:this,nameBinding:".eRaterMarkView.name",extraCommentBinding:".eRaterMarkView.extraComment",recordStatusBinding:".eRaterMarkView.recordStatus",render:function(c,f){var e=(this.get("extraComment"))?Cv.ERaterMarkView.EXPANDED_VIEW_MIN_WIDTH-60:Cv.ERaterMarkView.EXPANDED_VIEW_MIN_WIDTH-38;
c.push('<div class="feedback-name" style="max-width: %@px;">%@</div>'.fmt(e,this.get("name")));
if(this.get("extraComment")){c.push('<img class="extra-comment-icon" src="%@">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/notepad.png"))
}if(this.get("recordStatus")&SC.Record.ERROR){c.push('<div class="sc-icon-alert-16 mark-error"></div>')
}else{if(this.get("recordStatus")&SC.Record.BUSY){c.push('<img src="%@" class="mark-busy">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif"))
}}c.push('<img src="%@" style="position:absolute; right: 0px">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/ets/ets-comment.png"))
}}),feedbackView:Cv.DynamicLabelView.design({layout:{top:27,left:15,right:15,height:30},classNames:"comment-readview erater-feedback".w(),dynamicStyles:"line-height: 1.4em",dynamicClasses:["e-rater-feedback"],maxHeight:320,mark:this.get("content"),escapeHTML:NO,valueBinding:SC.Binding.transform(function(c,e){return Ip.urlsToAnchorTags(c)
}).from(".mark.feedback"),_dynamicHeightDidChange:function(){this.get("parentView").adjustHeight()
}.observes("dynamicHeight")}),commentView:SC.View.design({layout:{top:80,height:75,left:15,right:15},isVisible:Cv.config.get("ERATER_SUPPORTS_ADDITIONAL_COMMENTS"),childViews:"headingView labelView fieldView".w(),classNames:"comment-view",headingView:SC.LabelView.design({layout:{top:2,left:0,right:0,height:20},classNames:"heading-view",value:"_Additional Comments".loc()}),labelView:Cv.DynamicLabelView.design({layout:{top:17,left:0,right:0},classNames:["comment-view"],escapeHTML:NO,mark:this.get("content"),valueBinding:".mark.text",isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isEditing").not(),isReadonlyBinding:"Cv.paperController.isReadonly",eRaterMarkView:this,mouseDown:function(){if(this.get("labelViewIsEditable")){var c=evt.target;
if(!c||(c.tagName.toLowerCase()!=="a")){this.get("eRaterMarkView").showExpandedViewAsEditing()
}}},labelViewIsEditable:function(){return(this.getPath("mark.isEditable")&&!this.get("isReadonly"))?YES:NO
}.property("isReadonly","mark").cacheable(),minHeight:0,dynamicStyles:"line-height: 1.4em",_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight")}),fieldView:Ip.DynamicTextFieldView.design(Cv.EscapeValue,{layout:{top:22,bottom:0,left:0,right:0},hint:"_Enter comment here".loc(),isTextArea:YES,eRaterMarkView:this,isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isEditing"),sanitizedValueBinding:SC.Binding.oneWay(".eRaterMarkView.editText"),sanitizedValueDidChange:function(){var e=this.get("isVisible");
if(e){var c=this.get("sanitizedValue");this.setPath("eRaterMarkView.editText",c)}}.observes("sanitizedValue"),dynamicStyles:'font-family:"Lucida Sans"; font-size:11.8833px; font-weight:400; font-style:normal; line-height: 15px',minHeight:60,maxLength:Cv.ERaterMark.TEXT_MAX_LENGTH,_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight"),nextKeyView:function(){return this.getPath("parentView.parentView.footerView.saveButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.footerView.cancelButtonView")
}.property().cacheable()})}),footerView:SC.View.design({layout:function(){var f=Cv.get("inStudentMode")||this.getPath("paper.isReadonly");
var c=Cv.config.get("ERATER_SUPPORTS_ADDITIONAL_COMMENTS");var e={bottom:0,height:(f?20:c?51:30),left:15,right:15};
return e}.property("paper").cacheable(),paperBinding:"Cv.paperController.content",childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")?"handbookLinkView".w():"handbookLinkView commentButtonView retryButtonView excludeButtonView saveButtonView cancelButtonView".w(),classNames:"comment-footer",handbookLinkView:SC.ButtonView.design({layout:function(){var c=Cv.config.get("ERATER_SUPPORTS_ADDITIONAL_COMMENTS");
var e={top:0,height:15,width:150};if(c){e.left=10}else{e.right=10}return e}.property().cacheable(),eRaterMarkView:this,isEnabledBinding:SC.Binding.oneWay(".eRaterMarkView.isReady"),isVisibleBinding:SC.Binding.oneWay("Cv.classController.isInsite").not(),classNames:"link-button",titleMinWidth:"30px",title:"_View handbook".loc(),target:this,action:"openHandbookWindow"}),commentButtonView:SC.ButtonView.design({layout:{bottom:5,right:0,width:137,height:14},classNames:["comment-button"],eRaterMarkView:this,isVisibleBinding:SC.Binding.transform(function(c){return !c&&Cv.config.get("ERATER_SUPPORTS_ADDITIONAL_COMMENTS")
}).from(".eRaterMarkView.isEditing"),isEnabledBinding:SC.Binding.bool(".eRaterMarkView.isProcessing").not(),mark:this.get("content"),markTextBinding:".mark.text",titleMinWidth:"30px",title:function(){var e;
var c=this.get("markText");if(c){e="_Edit comment".loc()}else{e="_Add comment".loc()
}return e}.property("markText").cacheable(),target:this,action:"showExpandedViewAsEditing",previousKeyView:function(){return this.getPath("parentView.excludeButtonView")
}.property().cacheable()}),retryButtonView:SC.ButtonView.design({layout:{bottom:5,right:0,width:137,height:14},eRaterMarkView:this,isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isError"),titleMinWidth:"30px",title:"_Retry".loc(),target:this,action:"retryButtonClickHandler"}),excludeButtonView:SC.ButtonView.design({layout:{bottom:5,left:0,width:136,height:14},eRaterMarkView:this,isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isEditing").not(),isEnabledBinding:SC.Binding.bool(".eRaterMarkView.isProcessing").not(),classNames:"primary hide-button".w(),titleMinWidth:"30px",title:"_Dismiss".loc(),target:this,action:"excludeERaterMarkView",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.commentButtonView")
}.property().cacheable()}).loc(Ip.getLocalizationHash("Cv.saveButton")),saveButtonView:SC.ButtonView.design({layout:{bottom:5,left:0,width:136,height:14},eRaterMarkView:this,isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isEditing"),isEnabledBinding:SC.Binding.bool(".eRaterMarkView.isProcessing").not(),classNames:"primary",titleMinWidth:"30px",title:"_Save".loc(),target:this,action:"saveButtonClickHandler",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.cancelButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.commentView.fieldView")
}.property().cacheable()}).loc(Ip.getLocalizationHash("Cv.saveButton")),cancelButtonView:SC.ButtonView.design({layout:{bottom:5,right:0,width:137,height:14},eRaterMarkView:this,isVisibleBinding:SC.Binding.oneWay(".eRaterMarkView.isEditing"),isEnabledBinding:SC.Binding.bool(".eRaterMarkView.isProcessing").not(),titleMinWidth:"30px",title:"_Cancel".loc(),target:this,action:"cancelButtonClickHandler",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.parentView.commentView.fieldView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.saveButtonView")
}.property().cacheable()})}),isEditingDidChange:function(){this.invokeOnce(this.adjustHeight,this)
}.observes(".parentView.isEditing")});var a=this.createChildView(b);return a}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.isEditingDidChange()},closeEditViewWithSave:function(){this.saveButtonClickHandler();
this.showCollapsedView()},closeEditViewWithoutSave:function(){this.cancelButtonClickHandler();
this.showCollapsedView()},getRecord:function(){return this.get("content")},isEditingDidChange:function(){if(this.get("isEditing")){if((this.get("editText")===null)||(this.get("editText")===undefined)){var a=this.getPath("content.text");
var b=this.getPath("expandedView.commentView.fieldView");b.set("sanitizedValue",a);
this.invokeLater(function(){b.becomeFirstResponder()},300)}}else{this.set("editText",null)
}}.observes("isEditing"),openHandbookWindow:function(){var a=this.getPath("content.handbookUrl");
Ip.openAndFocusWindow(a,"_erater_handbook")},excludeERaterMarkView:function(a){var b=this.get("content");
Cv.excludeERaterMark(b)},saveButtonClickHandler:function(){try{var c=this.getPath("expandedView.commentView.fieldView");
var e=c.get("sanitizedValue");var b=this.get("content");b.exitErrorState();b.set("text",e);
this.set("editText",null);b.commitRecord();this.showExpandedViewAsReadOnly()}catch(a){this.showSaveError(a)
}},retryButtonClickHandler:function(){try{var b=this.get("content");b.exitErrorState();
b.commitRecord();this.showExpandedViewAsReadOnly()}catch(a){this.showSaveError(a)
}},cancelButtonClickHandler:function(){this.set("editText",null);this.showExpandedViewAsReadOnly()
},showSaveError:function(b){var e="_Cannot Save QuickMark".loc();var c=b;var a="_OK".loc();
SC.AlertPane.warn(e,c,null,a,null,null,null)},nameWidth:0,didCreateLayer:function(){this.invokeLater(function(){var a=this.$(".collapsed-view");
if(a[0]){this.set("nameWidth",a[0].offsetWidth)}})},collapsedViewWidth:function(){return this.get("nameWidth")
}.property("layout","nameWidth").cacheable(),collapsedViewHeight:function(){return Cv.ERaterMarkView.COLLAPSED_VIEW_HEIGHT+(2*Cv.MarkView.COLLAPSED_VIEW_PADDING)
}.property("layout").cacheable()});Cv.ERaterMarkView.COLLAPSED_VIEW_HEIGHT=19;Cv.ERaterMarkView.EXPANDED_VIEW_MIN_WIDTH=310;
Cv.ERaterSidebarSectionView=SC.View.extend({section:null,childViews:"headerView bodyListView".w(),classNames:"erater-sidebar-section-view sidebar-box off".w(),displayProperties:"classNames",filteredSectionsBinding:"Cv.eRaterReadFiltersController.sections",headerView:SC.View.design({layout:{height:30},classNames:["sidebar-box-header"],childViews:["checkboxView","labelView","markCountView"],checkboxView:SC.CheckboxView.design({layout:{left:5,height:20,width:20,top:9},sectionBinding:".parentView.parentView.section",filteredSectionsBinding:"Cv.eRaterReadFiltersController.sections",filteredSectionsIsLoadedBinding:"Cv.eRaterReadFiltersController.isLoaded",readBinding:"Cv.eRaterReadController.content",value:function(c,e){if(e===undefined){var g=this.get("filteredSections");
var b=this.get("filteredSectionsIsLoaded");var f=this.get("section");if(g&&g&&f){var a=(g.indexOf(f)!==-1);
e=!a}}return e}.property("section","filteredSections","filteredSectionsIsLoaded").cacheable(),_isSelectedDidChanged:function(){this.invokeOnce(this._updateFilters)
}.observes("isSelected"),_updateFilters:function(){var g=this.getPath("section");
var a=this.get("filteredSections");if(!g||!a){return}var h=a.toArray();var e=this.get("isSelected");
var c=(h.indexOf(g)!==-1);if(e&&c){h.removeObject(g)}else{if(!e&&!c){h.pushObject(g)
}}var f=this.get("read");Cv.setERaterReadFilters(f,h);var b=this.getPath("parentView.parentView");
if(b){b.updateClassNames()}}}),labelView:SC.LabelView.design({layout:{left:30,right:30,top:7,height:20},sectionBinding:".parentView.parentView.section",value:function(){var a=this.getPath("section.name");
return a}.property("section").cacheable()}),markCountView:SC.LabelView.design({layout:{right:2,width:15,top:7,height:20},classNames:["count"],sectionBinding:".parentView.parentView.section",readMarksInfoBinding:"Cv.eRaterReadMarksInfoController.content",excludedMarkCountBinding:"Cv.eRaterReadMarksInfoController.excludedMarkCount",value:function(){var c=null;
var e=this.get("section");var a=this.get("readMarksInfo");if(e&&a){var b=e.get("id");
c=a.getSectionNonexcludedMarkCount(b)||"0"}return c}.property("section","readMarksInfo","excludedMarkCount").cacheable()})}),bodyListView:SC.ListView.design({layout:{top:35},rowHeight:30,classNames:"erater-sidebar-traits-list-view",sectionBinding:".parentView.section",readMarksInfoBinding:"Cv.eRaterReadMarksInfoController.content",handbookBinding:"Cv.eRaterHandbookController.content",excludedMarkCountBinding:"Cv.eRaterReadMarksInfoController.excludedMarkCount",contentValueKey:"name",contentUnreadCountKey:"markCount",isSelectable:NO,content:function(){var c=[];
var f=this.get("section");var b=this.get("handbook");var a=this.get("readMarksInfo");
if(f&&b&&a){var e=this.getPath("handbook.traits");e.forEach(function(g){var i=(g.get("section")===f);
if(i){var j=g.get("id");var h=SC.Object.create({trait:g,name:g.get("name"),markCount:a.getTraitNonexcludedMarkCount(j)||"0"});
c.push(h)}})}return c}.property("section","handbook","readMarksInfo").cacheable(),updateMarkCount:function(){this.invokeOnce(this._updateMarkCount)
}.observes("excludedMarkCount"),_updateMarkCount:function(){var a=this.get("readMarksInfo");
if(!a){return}var b=this.get("content")||[];b.forEach(function(c){var f=c.getPath("trait.id");
var e=a.getTraitNonexcludedMarkCount(f)||"0";c.set("markCount",e)})},_lengthDidChange:function(){var c=this.get("length")||0;
var b=this.get("rowHeight");var a=c*b;this.invokeOnce(function(){this.adjust("height",a)
})}.observes("length"),_frameDidChange:function(){var a=this.get("parentView");a.updateHeight()
}.observes("frame")}),updateHeight:function(){this.invokeOnce(this._updateHeight)
},_updateHeight:function(){var b=this.getPath("bodyListView.frame");var a=b.y+b.height;
this.adjust("height",a)},updateClassNames:function(){this.invokeOnce(this._updateClassNames)
},_updateClassNames:function(){var b=this.get("section");var e=this.get("filteredSections")||[];
var a=(e.indexOf(b)!==-1);var c=this.get("classNames")||[];c=c.toArray();if(a&&(c.indexOf("off")===-1)){c.pushObject("off");
this.set("classNames",c)}else{if(!a&&(c.indexOf("off")!==-1)){c.removeObject("off");
this.set("classNames",c)}}}});sc_require("views/e_rater_sidebar_section");Cv.ERaterSidebarView=SC.View.extend({classNames:["sidebar e-rater-sidebar"],childViews:"headerView bodyView".w(),headerView:SC.View.design({layout:{top:0,height:40,left:0,right:0},childViews:"etsLabelView feedbackButtonView".w(),classNames:["gm-sidebar-header"],etsLabelView:SC.LabelView.design({layout:{left:10,height:24,centerY:0},controlSize:SC.LARGE_CONTROL_SIZE,value:"_e-rater<sup>&reg;</sup> Results %@".loc("(Beta)"),escapeHTML:NO}),feedbackButtonView:SC.ButtonView.design({classNames:["sidebar-button","header-button"],layout:{top:4,right:8,height:20,width:85},title:"_Feedback".loc(),action:"openFeedback",target:"Cv.eRaterController"}).loc(Ip.getLocalizationHash("Cv.feedbackButtonView"))}),bodyView:SC.ScrollView.design({layout:{top:41,right:0,bottom:0,left:0},classNames:"body-view",contentView:SC.View.design({childViews:"statusView scoreView restoreMarksView sectionsView".w(),updateHeightAndChildViewTops:function(){this.invokeOnce(this._updateHeightAndChildViewTops)
},_updateHeightAndChildViewTops:function(){var a=0;var b=this.get("childViews");b.forEach(function(c){if(c.get("isVisible")){c.adjust("top",a);
a+=c.get("frame").height}});this.adjust("height",a)},statusView:SC.View.design({layout:{left:0,right:0,height:275},childViews:"statusView".w(),hasSuccessStatusBinding:SC.Binding.oneWay("Cv.eRaterReadQueryController.hasSuccessStatus"),isMarkCountLimitedBinding:SC.Binding.oneWay("Cv.eRaterReadQueryController.isMarkCountLimited"),isCorruptedBinding:SC.Binding.oneWay("Cv.eRaterReadController.isCorrupted"),isVisible:function(){var e=this.get("hasSuccessStatus");
var b=this.get("isMarkCountLimited");var c=this.get("isCorrupted");var a=!e||b||c;
return a}.property("hasSuccessStatus","isMarkCountLimited","isCorrupted").cacheable(),statusView:SC.ContainerView.design({classNames:["sidebar-box"],layout:{left:10,right:10,top:20,height:250},contentView:SC.LabelView.design({layout:{left:10,right:10,top:15,bottom:15},valueBinding:"Cv.eRaterController.detailedStatusText",tagName:"div",render:function(a,b){a.push(this.get("value"))
}})}),isVisibleDidChange:function(){var a=this.get("parentView");if(a){a.updateHeightAndChildViewTops()
}}.observes("isVisible")}),scoreView:SC.View.design({layout:{left:0,right:0,height:100},classNames:["score-view"],displayProperties:["eRaterReadScore"],eRaterReadScore:null,eRaterReadScoreBinding:"Cv.eRaterReadController.score",isVisible:function(){var a=this.get("eRaterReadScore");
return(a===0||a>0)}.property("eRaterReadScore").cacheable(),render:function(a,b){a.push('<img src="%@" class="ets-icon" width=52 height=36 />'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/ets/ets-icon.png"));
a.push('<span class="score-label">');a.push("_Score".loc());a.push("</span>");a.push('<div class="score-value">');
a.push(this.get("eRaterReadScore"));a.push("</div>")},isVisibleDidChange:function(){var a=this.get("parentView");
if(a){a.updateHeightAndChildViewTops()}}.observes("isVisible")}),restoreMarksView:SC.View.design({layout:{left:0,right:0,height:75},excludedMarkCountBinding:"Cv.eRaterReadMarksInfoController.excludedMarkCount",isVisible:function(){var a=this.get("excludedMarkCount");
return(a>0)}.property("excludedMarkCount").cacheable(),childViews:"wellView".w(),wellView:SC.ContainerView.design({classNames:["sidebar-box"],layout:{top:10,right:10,height:50,left:10},contentView:SC.View.design({layout:{left:8,right:6},childViews:"labelView buttonView".w(),buttonView:SC.ButtonView.design({classNames:["sidebar-button"],layout:{top:12,right:0,width:80,height:19},title:"_Reveal All".loc(),action:"revealAll",target:"Cv.eRaterExcludedMarksController"}),labelView:SC.LabelView.design({layout:{centerY:0,height:15,right:82},classNames:["marks-dismissed-label"],readMarksInfoBinding:"Cv.eRaterReadMarksInfoController.content",excludedMarkCountBinding:"Cv.eRaterReadMarksInfoController.excludedMarkCount",value:function(){var a=this.get("excludedMarkCount");
return a===1?"_1 individual mark dismissed".loc():"_%@ individual marks dismissed".loc(a)
}.property("readMarksInfo","excludedMarkCount").cacheable()})})}),isVisibleDidChange:function(){var a=this.get("parentView");
if(a){a.updateHeightAndChildViewTops()}}.observes("isVisible")}),sectionsView:SC.View.design({layout:{left:0,right:0,top:260,height:100},hasSuccessStatusBinding:"Cv.eRaterReadQueryController.hasSuccessStatus",isCorruptedBinding:"Cv.eRaterReadController.isCorrupted",isVisible:function(){var c=this.get("hasSuccessStatus");
var b=this.get("isCorrupted");var a=c&&!b;return a}.property("hasSuccessStatus","isCorrupted").cacheable(),handbookIsLoadedBinding:SC.Binding.oneWay("Cv.eRaterHandbookController.isLoaded"),handbookBinding:SC.Binding.oneWay("Cv.eRaterHandbookController.content"),sectionsBinding:SC.Binding.oneWay("Cv.eRaterHandbookController.sections"),paddingTopBottom:10,sectionViewOffset:20,createSectionViews:function(){this.invokeOnce(this._createSectionViews)
}.observes("handbook","handbookIsLoaded"),_createSectionViews:function(){var c=this.get("sections");
var b=this.get("handbookIsLoaded");if(b){var a=c.map(function(g){var f=Cv.ERaterSidebarSectionView.design({layout:{left:10,right:10,height:90},section:g,sectionsView:this,_frameDidChange:function(){var h=this.get("sectionsView");
h.sectionViewFrameDidChange()}.observes("frame")});var e=this.createChildView(f);
return e},this);this.replaceAllChildren(a)}},_frameDidChange:function(){var a=this.get("parentView");
a.updateHeightAndChildViewTops()}.observes("frame"),sectionViewFrameDidChange:function(){this.invokeOnce(this._sectionViewFrameDidChange)
},_sectionViewFrameDidChange:function(){var b=this.get("paddingTopBottom");var c=this.get("sectionViewOffset");
var a=0;var e=this.get("childViews");e.forEach(function(f,g){if(g===0){a+=b}else{a+=c
}var h=a;f.adjust("top",h);a+=f.get("frame").height});a+=b;this.adjust("height",a)
}})})})});Cv.FlowItemView=SC.LabelView.extend(SC.Control,{classNames:["flow-item-view"],target:null,action:null,mouseDown:function(a){this.drag=null;
return YES},mouseDragged:function(a){if(!this.drag){this.drag=SC.Drag.start({event:a,source:this,dragView:this,dataSource:this.get("dragDataSource"),ghost:NO,ghostActsLikeCursor:YES})
}},mouseUp:function(a){if(this.drag){return}var c=this.get("target");var b=this.get("action");
if(SC.typeOf(b)===SC.T_STRING){b=c[b]}if(b){b.call(c,a)}}});sc_require("views/flow_item");
Cv.FlowView=SC.CollectionView.extend({classNames:["flow-view"],exampleView:Cv.FlowItemView,ghostActsLikeCursor:YES,horizontalPadding:0,verticalPadding:0,_layoutHeight:null,layoutForContentIndex:function(n){var i=this.get("content");
var s=i.objectAt(n);var p=s.get("value")||s.get(this.get("contentValueKey"));var k=Ip.metricsForString(p,"font-size: 14px;");
var q=k.height;var a=k.width+11;var m=this.get("horizontalPadding");var c=this.get("verticalPadding");
var l;var e;if(n===0){l=c;e=m}else{var j;var f=this._sc_itemViews[n-1];if(f){var h=f.get("frame");
j={top:h.y,left:h.x,height:h.height,width:h.width}}else{j=this.layoutForContentIndex(n-1)
}l=j.top;e=j.left+j.width+m;var o=e+a;var b=this.get("frame");if((o+m)>b.width){l=j.top+j.height+c;
e=m}}var g={top:l,left:e,height:q,width:a};return g},relayout:function(m){var k=this.get("frame");
var n=k.width;var g=NO;var l;var b;var p=this.get("content");if(!p){return}var f;
for(var q=0,s=p.get("length");q<s;q++){f=this.itemViewForContentIndex(q);if(!g){var a=f.get("frame");
var h=SC.minY(a);var j=SC.maxX(a);var c=a.width;if((h>l)&&(n>=(b+2*this.get("horizontalPadding")+c))){g=YES
}else{if(j>n){g=YES}}l=h;b=j}if(g){var t=this.layoutForContentIndex(q);f.adjust("top",t.top);
f.adjust("left",t.left)}}if(f){var a=f.get("frame");var o=a.y+a.height+this.get("verticalPadding");
var e=this.get("frame");var u=e.y+e.height;if(this.get("_layoutHeight")!==o){this.adjust("height",o);
this.set("_layoutHeight",o)}}}.observes("clippingFrame","horizontalPadding","verticalPadding"),getChildViewFrame:function(c){var a=SC.guidFor(c);
var b=c.get("layer");frame={x:b.offsetLeft,y:b.offsetTop,width:b.offsetWidth,height:b.offsetHeight};
return frame},insertionIndexForLocation:function(f,h){var k=-1;var g=SC.DRAG_NONE;
var j=this.get("childViews");for(var b=0,a=j.get("length");b<a;b++){var e=j[b];var l=this.getChildViewFrame(e);
if(this.intersects(l,f)){k=b;g=SC.DROP_BEFORE;var c=(f.x-l.x)/l.width;if(c>=0.5){g=SC.DROP_AFTER
}break}}return[k,g]},intersects:function(e,f){var g=e.x;var b=e.x+e.width;var a=e.y;
var c=e.y+e.height;if((f.x<g)||(f.x>b)||(f.y<a)||(f.y>c)){return NO}else{return YES
}},showInsertionPoint:function(a,b){if(!a){return}this.hideInsertionPoint();this._dropInsertionPoint=a;
if(this._dropInsertionPoint.get("layer")){if(b===SC.DROP_BEFORE){this._dropInsertionPoint.get("layer").style.borderLeft="3px solid green"
}else{this._dropInsertionPoint.get("layer").style.borderRight="3px solid green"}}},hideInsertionPoint:function(){if(this._dropInsertionPoint){var a=this._dropInsertionPoint.get("layer");
if(a){a.style.borderLeft=null;a.style.borderRight=null}}}});sc_require("controllers/editing_registry");
Cv.GeneralCommentSidebarView=SC.View.extend(Ip.EditingInterceptor,{read:null,readBindingDefault:SC.Binding.oneWay(),recordStatusBinding:"Cv.markSetController.status",isRecordingBinding:SC.Binding.from("Cv.recordingController.isRecording"),isRecordedAudioLevelOkBinding:SC.Binding.from("Cv.recordingController.isActivityLevelOk").bool(),editingRegistryControllerBinding:"Cv.editingRegistryController",isEditing:NO,editText:null,childViews:function(){var a=Cv.get("inStudentMode")?"labelView audioPlayerView textCommentView".w():"labelView audioRecordingControlsView audioPlayerView textCommentView".w();
return a}.property().cacheable(),audioRecordingControlsView:AudioTools.RecordingControlsView.design({layout:{left:10,right:10,top:52,height:77},recordingControllerBinding:"Cv.recordingController",hasAudioFileBinding:"Cv.audioPlayerController.audioFileURL",isVisible:function(){return !Cv.get("inStudentMode")&&!this.get("hasAudioFile")
}.property("hasAudioFile").cacheable(),isEditingBinding:".parentView.isEditing",paperIsEditableBinding:SC.Binding.oneWay("Cv.paperController.isReadonly").not(),isEnabled:function(){return !this.get("isEditing")&&this.get("paperIsEditable")
}.property("isEditing","paperIsEditable").cacheable()}),audioPlayerView:AudioTools.PlayerView.design({layout:{left:10,right:10,top:52,height:77},isPlayingBinding:"Cv.audioPlayerController.isPlaying",currentPercentBinding:"Cv.audioPlayerController.currentPercent",currentTimeBinding:"Cv.audioPlayerController.currentTime",durationBinding:"Cv.audioPlayerController.duration",playerControllerBinding:"Cv.audioPlayerController",hasAudioFileBinding:SC.Binding.bool("Cv.audioPlayerController.audioFileURL"),canDeleteBinding:SC.Binding.oneWay("Cv.inStudentMode").not(),deleteIsEnabledBinding:SC.Binding.bool(".parentView.isEditing").not(),flashIsAvailableBinding:SC.Binding.bool("Cv.audioPlayerController.flashIsAvailable"),isVisible:function(){return(this.get("isEnabled")&&this.get("hasAudioFile"))
}.property("hasAudioFile","isEnabled").cacheable(),isEnabledBinding:"Cv.audioPlayerController.isEnabled",playingIsGloballyDisabledBinding:"Cv.audioPlayerController.playingIsGloballyDisabled"}),paperStatusBinding:SC.Binding.oneWay("Cv.paperController.status"),isPaperReady:function(){return(this.get("paperStatus")&SC.Record.READY)
}.property("paperStatus").cacheable(),paperIdBinding:SC.Binding.oneWay("Cv.paperController.id"),isPaperReadInSync:function(){var a=this.get("read");
return(a&&(a.get("id")===this.get("paperId")))}.property("read","paperId").cacheable(),isProcessing:function(){return(this.get("recordStatus")&SC.Record.BUSY)
}.property("recordStatus").cacheable(),isError:function(){return(this.get("recordStatus")&SC.Record.ERROR)
}.property("recordStatus").cacheable(),isErrorDidChange:function(){if(this.get("isError")){this.editButtonClickHandler()
}}.observes(".isError"),labelView:SC.LabelView.design({layout:{top:0,left:0,height:40},classNames:"gm-sidebar-header",controlSize:SC.LARGE_CONTROL_SIZE,value:"_General Comments".loc()}),textCommentView:SC.View.design({hasAudioFileBinding:SC.Binding.bool("Cv.audioPlayerController.audioFileURL"),layout:function(){var a={top:52,right:10,bottom:12,left:10};
if(!Cv.get("inStudentMode")||this.get("hasAudioFile")){a.top=150}return a}.property("hasAudioFile").cacheable(),childViews:"headerView textReadOnlyView textEditFieldView footerView".w(),classNames:"text-comment sidebar-box".w(),isPaperReadyBinding:".parentView.isPaperReady",isPaperReadInSync:".parentView.isPaperReadInSync",isProcessingBinding:".parentView.isProcessing",isRecordingBinding:".parentView.isRecording",isEditable:function(){return this.get("isPaperReady")&&this.get("isPaperReadInSync")&&!this.get("isProcessing")&&!this.get("isRecording")
}.property("isPaperReady","isProcessing","isProcessing","isRecording").cacheable(),commentLength:null,headerView:SC.View.design({layout:{top:0,right:0,height:30,left:0},classNames:"sidebar-box-header",childViews:"labelView editButtonView deleteButtonView commentLengthView".w(),labelView:SC.LabelView.design({layout:function(){var a={top:5,width:192,bottom:0};
if(this.get("isEditing")){a.left=9}else{a.centerX=0}return a}.property("isEditing").cacheable(),textAlign:function(){var a;
if(this.get("isEditing")){a=SC.ALIGN_LEFT}return a}.property("isEditing").cacheable(),isEditingBinding:".parentView.parentView.parentView.isEditing",value:function(){return this.get("isEditing")?"_Edit Text".loc():"_Text Comment".loc()
}.property("isEditing").cacheable()}),editButtonView:SC.ButtonView.design({layout:{left:0,top:0,bottom:1,width:30},classNames:"edit-button",titleMinWidth:0,inStudentModeBinding:"Cv.inStudentMode",isReadonlyBinding:"Cv.paperController.isReadonly",parentIsEditingBinding:".parentView.parentView.parentView.isEditing",isVisible:function(){return !Cv.get("inStudentMode")&&!this.get("parentIsEditing")&&!this.get("isReadonly")
}.property("parentIsEditing","isReadonly").cacheable(),isEnabledBinding:".parentView.parentView.isEditable",toolTip:"_Type a comment up to 5000 characters long".loc(),action:"editButtonClickHandler",targetBinding:".parentView.parentView.parentView"}),deleteButtonView:SC.ButtonView.design({layout:{right:0,top:0,bottom:1,width:30},classNames:"delete-button",toolTip:"_Discard".loc(),titleMinWidth:0,inStudentModeBinding:"Cv.inStudentMode",isReadonlyBinding:"Cv.paperController.isReadonly",parentIsEditingBinding:".parentView.parentView.parentView.isEditing",isEnabledBinding:".parentView.parentView.isEditable",isVisible:function(){return !Cv.get("inStudentMode")&&!this.get("parentIsEditing")&&!this.get("isReadonly")
}.property("parentIsEditing","isReadonly").cacheable(),action:"deleteButtonClickHandler",targetBinding:".parentView.parentView.parentView"}),commentLengthView:SC.LabelView.design({layout:{top:5,right:5,width:70},classNames:"comment-length",textAlign:"right",value:function(){return"%@/5000".fmt(this.get("commentLength"))
}.property("commentLength").cacheable(),commentLengthBinding:".parentView.parentView.commentLength",parentIsEditingBinding:".parentView.parentView.parentView.isEditing",isVisible:function(){return !Cv.get("inStudentMode")&&this.get("parentIsEditing")
}.property("parentIsEditing").cacheable(),parentIsEditingDidChange:function(){this.set("commentLength",0)
}.observes("parentIsEditing")})}),textReadOnlyView:SC.ScrollView.design({layout:{top:30,right:0,bottom:0,left:0},isReadonlyBinding:"Cv.paperController.isReadonly",contentValueBinding:SC.Binding.oneWay(".contentView.value"),isVisibleBinding:SC.Binding.from(".parentView.parentView.isEditing").not(),___retile:function(){if(this.get("isVisibleInWindow")){this.invokeLast(this.tile)
}}.observes("contentValue"),contentView:SC.LabelView.design(SC.StaticLayout,Ip.AnchorTagActions,{layout:{minHeight:50},useStaticLayout:YES,classNames:Cv.get("inStudentMode")?["general-comments"]:["general-comments","editable"],isVisibleBinding:SC.Binding.not(".parentView.parentView.isEditing"),valueBinding:"Cv.markSetController.generalComments",hint:function(){var a="_There is no text comment for this paper. You can leave a text comment by clicking the pencil icon above or by clicking in this text field.".loc();
if(Cv.get("inStudentMode")){a="_No text comment was left for this paper.".loc()}return a
}.property("inStudentMode").cacheable(),escapeHTML:NO}),mouseDown:function(b){var a=$(b.target);
if(a.prop("tagName")==="A"){return}if(!this.get("isReadonly")&&this.getPath("parentView.isEditable")){this.getPath("parentView.parentView").editButtonClickHandler()
}}}),textEditFieldView:SC.TextFieldView.design(Cv.EscapeValue,{layout:{top:30,right:0,bottom:50,left:0},hint:"_Enter comment here".loc(),classNames:["general-comments"],parentIsEditingBinding:".parentView.parentView.isEditing",isReadonlyBinding:"Cv.paperController.isReadonly",isVisible:function(){return !Cv.get("inStudentMode")&&this.get("parentIsEditing")&&!this.get("isReadonly")
}.property("parentIsEditing","isReadonly").cacheable(),isTextArea:YES,maxLength:Cv.Read.GENERAL_COMMENTS_MAX_LENGTH,sanitizedValueBinding:SC.Binding.oneWay(".parentView.parentView.editText"),sanitizedValueDidChange:function(){var b=this.get("isVisible");
if(b){var a=this.get("sanitizedValue");if(a.length>this.get("maxLength")){a=a.substr(0,this.get("maxLength"));
this.set("sanitizedValue",a)}this.setPath("parentView.commentLength",a.length)}}.observes("sanitizedValue"),nextKeyView:function(){return this.getPath("parentView.saveButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.cancelButtonView")
}.property().cacheable()}),footerView:SC.View.design({layout:{left:0,right:0,height:50,bottom:0},classNames:["sidebar-box-footer"],childViews:"saveButtonView cancelButtonView".w(),parentIsEditingBinding:".parentView.parentView.isEditing",isReadonlyBinding:"Cv.paperController.isReadonly",isVisible:function(){return !Cv.get("inStudentMode")&&this.get("parentIsEditing")&&!this.get("isReadonly")
}.property("parentIsEditing","isReadonly").cacheable(),isEnabledBinding:SC.Binding.oneWay(".parentView.parentView.isProcessing").not(),saveButtonView:SC.ButtonView.design({layout:{left:10,bottom:10,height:22,width:120},classNames:"sidebar-button primary",isEditingBinding:SC.Binding.oneWay(".parentView.parentView.parentView.isEditing"),isErrorBinding:SC.Binding.oneWay(".parentView.parentView.parentView.isError"),title:function(){return this.get("isError")?"_Retry".loc():"_Save".loc()
}.property("isError").cacheable(),action:"saveButtonClickHandler",targetBinding:".parentView.parentView.parentView",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.parentView.cancelButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.textEditFieldView")
}.property().cacheable()}),cancelButtonView:SC.ButtonView.design({layout:{right:10,bottom:10,height:22,width:120},classNames:"sidebar-button",isVisibleBinding:".parentView.parentView.parentView.isEditing",isEnabledBinding:SC.Binding.oneWay(".parentView.parentView.parentView.isProcessing").not(),title:"_Cancel".loc(),action:"cancelButtonClickHandler",targetBinding:".parentView.parentView.parentView",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.parentView.textEditFieldView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.saveButtonView")
}.property().cacheable()})})}),isEditingDidChange:function(){if(this.get("isEditing")){var a=this.getPath("textCommentView.textEditFieldView");
this.invokeLater(function(){a.becomeFirstResponder()},200)}}.observes("isEditing"),editButtonClickHandler:function(){if(!Cv.get("inStudentMode")){this.set("editText",this.getPath("read.generalComments"));
this.set("isEditing",YES)}},saveButtonClickHandler:function(){try{var c=this.getPath("textCommentView.textEditFieldView.sanitizedValue");
c=c?c.substr(0,Cv.Read.GENERAL_COMMENTS_MAX_LENGTH):c;var b=this.get("read");b.exitErrorState();
b.set("generalComments",c);b.commitRecord();this.set("isEditing",NO);this.set("editText",null);
this.setPath("textCommentView.textEditFieldView.sanitizedValue",null)}catch(a){this.showSaveError(a)
}},cancelButtonClickHandler:function(){this.set("isEditing",NO);this.set("editText",null)
},alertPaneDidDismiss:function(b,a){switch(a){case SC.BUTTON1_STATUS:this.set("editText",null);
this.saveButtonClickHandler();break;case SC.BUTTON2_STATUS:break}},deleteButtonClickHandler:function(){SC.AlertPane.warn("_Are you sure you want to delete this comment?".loc(),"_This action cannot be undone".loc(),null,"_Delete".loc(),"_Cancel".loc(),null,this)
},showSaveError:function(b){var e="_Cannot Save General Comments".loc();var c=b;var a="_OK".loc();
SC.AlertPane.warn(e,c,null,a,null,null,null)},isRecordedAudioLevelOkDidChange:function(){if(!this.get("isRecordedAudioLevelOk")){SC.AlertPane.plain("_We can't hear you...".loc(),"_Please check your microphone. The audio level bar will be moving when sound is detected. Click the record button when you are ready to restart your recording.".loc());
Cv.recordingController.pauseRecording();Cv.recordingController.cancel()}}.observes("isRecordedAudioLevelOk"),closeEditViewWithSave:function(){this.saveButtonClickHandler()
},closeEditViewWithoutSave:function(){this.cancelButtonClickHandler()},getRecord:function(){return Cv.markSetController
}});Cv.Gm3HighlightView=SC.View.extend(Cv.Hoverable,{classNames:["gm3-highlight-outer"],displayProperties:["classNames"],content:null,childViews:function(){return Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmHighlight")?"highlightView".w():"highlightView deleteButtonView".w()
}.property().cacheable(),deleteButtonHeight:16,renderLayout:function(a,f){if(this.get("isPmHighlight")){var e=2.5;
var c=this.get("zoomController");var b=c.getZoomedValue(e)+"px";a.addStyle("border-bottom-width",b)
}arguments.callee.base.apply(this,arguments)},isPmHighlight:function(){var a=this.getPath("content.mark.read.isPeerMarkRead");
return a}.property().cacheable(),associatedMarkDestroyedDidChange:function(){if(this.getPath("content.associatedMarkDestroyed")){this.set("isVisible",NO)
}}.observes(".content.associatedMarkDestroyed"),markIsExpandedDidChange:function(){var a=this.getPath("content.markIsExpanded");
var c=this.get("classNames");c=(c?c.concat():[]);var b="mark-expanded";if(a&&(c.indexOf(b)===-1)){c.pushObject(b)
}else{if(!a&&(c.indexOf(b)!==-1)){c.removeObject(b)}}this.set("classNames",c)}.observes(".content.markIsExpanded"),layout:function(){var a=this.get("content");
var b=this.get("zoomController");return b.getZoomedLayout({top:a.get("y"),left:a.get("x"),width:a.get("width"),height:a.get("height")+this.get("deleteButtonHeight")})
}.property("content","deleteButtonHeight").cacheable(),highlightView:SC.LabelView.design({layout:function(){return{top:this.getPath("parentView.deleteButtonHeight"),right:0,bottom:0,left:0}
}.property().cacheable(),backgroundColor:function(){return this.getPath("parentView.isPmHighlight")?null:this.get("color")
}.property("color").cacheable(),_previousColorClassName:null,_backgroundColorDidChange:function(){if(this.getPath("parentView.isPmHighlight")){var a=this.get("color");
if(a){var b=this.get("parentView");var e=b.get("classNames").concat();if(this._previousColorClassName){e.removeObject(this._previousColorClassName)
}a=a.replace("#","");a=a.replace(/\s/g,"");if(a){var c="pm-color-%@".fmt(a);e.pushObject(c);
this._previousColorClassName=c}b.set("classNames",e)}}}.observes("backgroundColor"),classNames:["gm3-highlight"],colorBinding:".parentView.content.color",displayProperties:["backgroundColor"]}),deleteButtonView:SC.LabelView.design({layout:function(){return{top:0,right:0,width:35,height:this.getPath("parentView.deleteButtonHeight")}
}.property().cacheable(),classNames:["gm3-highlight-delete-button"],backgroundColorBinding:".parentView.content.color",value:"_delete".loc(),isVisibleBinding:".parentView.isHovering",click:function(a){if(Cv.get("inStudentMode")){return YES
}var e={view:this,alertPaneDidDismiss:function(h,f){switch(f){case SC.BUTTON1_STATUS:var g=this.view.getPath("parentView.content");
this.view.setPath("parentView.isVisible",NO);Cv.markSetController.destroyGm3Highlight(g);
break;default:break}}};var c="_Delete this highlight?".loc();var b='Click "OK" to delete the highlight.';
SC.AlertPane.error(c,b,null,"_OK".loc(),"_Cancel".loc(),null,e);return YES}})});sc_require("controllers/comment");
Cv.QuickMarkSidebarView=SC.View.extend({gradeMarkController:null,markSetBinding:SC.Binding.oneWay("Cv.markSetController"),isReadonlyBinding:"Cv.paperController.isReadonly",classNames:["quickmark-sidebar-view"],dragDataTypes:[Cv.QuickMarkTemplate,Cv.Comment],dragDataForType:function(c,a){var b=c.get("source");
var e=b.get("content");return e},createChildViews:function(){arguments.callee.base.apply(this,arguments);
var c=[];var b=this.getHeaderViewDesign();this.headerView=this.createChildView(b);
c.push(this.headerView);var f=this.getQuickMarkTemplateSetViewDesign();this.quickMarkTemplateSetView=this.createChildView(f);
c.push(this.quickMarkTemplateSetView);var a=this.getCommentViewDesign();this.commentView=this.createChildView(a);
c.push(this.commentView);var e=this.getQuickMarkTemplatesViewDesign();this.quickMarkTemplatesView=this.createChildView(e);
c.push(this.quickMarkTemplatesView);this.quickMarkTemplatesFlowView=this.quickMarkTemplatesView.getPath("topLeftView.contentView");
this.set("childViews",c)},getHeaderViewDesign:function(){var a=SC.View.design({layout:{top:0,height:40,left:0,right:0},childViews:"searchBoxView commentTypeToggleView".w(),classNames:"gm-sidebar-header",searchBoxView:SC.TextFieldView.design({layout:{centerY:0,height:20,left:5,right:75},hint:"_Search QuickMark templates".loc(),spellCheckEnabled:NO,defaultTabbingEnabled:NO,keyDown:function(b){var c=b.which;
if(c!==9){arguments.callee.base.apply(this,arguments)}},valueBinding:"Cv.sidebarSearchController.searchString",rightAccessoryView:Ip.ImageView.design({layout:{right:3,width:15,top:3,height:15},isVisibleBinding:".layoutView.value",isVisibleBindingDefault:SC.Binding.oneWay().bool(),value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/Button_Clear_Search_15x15.gif",mouseDown:function(){var b=this.get("layoutView");
b.set("value","");return YES}})}),commentTypeToggleView:SC.SegmentedView.design({layout:{top:8,right:0,height:30,width:70},classNames:["comment-type-toggle"],valueBinding:"Cv.commentController.inputMode",allowsMultipleSelection:NO,allowsEmptySelection:NO,items:[{title:"_Bubble".loc(),value:Cv.commentController.INPUT_MODE_BUBBLE,toolTip:"_Bubble Comment".loc()},{title:"T".loc(),value:Cv.commentController.INPUT_MODE_TEXT,toolTip:"_Text Comment".loc()}],itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip",valueDidChange:function(){Cv.userDefaults.setIfChanged("inputMode",this.get("value"));
if(this.get("value")==Cv.commentController.INPUT_MODE_TEXT){Cv.paperTextSelectionController.clearTextSelectionHighlight()
}}.observes("value")})});return a},getQuickMarkTemplateSetViewDesign:function(){var a=SC.View.design({layout:{top:40,height:30,left:0,right:0},childViews:"setSelectionButtonView setTitleView searchingLabel quickMarkLibraryLinkView".w(),classNames:"sidebar-mini-menu",searchingLabel:SC.LabelView.design({layout:{top:5,height:20,left:5,width:150},value:"_Search results...".loc(),isVisibleBinding:SC.Binding.oneWay("Cv.sidebarSearchController.isSearching").bool()}),setSelectionButtonView:Cv.SelectView.design({layout:{left:0,width:40,height:30},isVisibleBinding:SC.Binding.oneWay("Cv.sidebarSearchController.isSearching").bool().not(),itemsBinding:"Cv.sidebarTemplateSetsController.content",classNames:"set-dropdown-button",valueBinding:"Cv.sidebarActiveSet.content",itemTitleKey:"displayName",itemSortKey:"sortName",positionMenuBelow:YES,lastMenuWidth:250,toolTip:"_Change QuickMark set".loc(),isEnabledBinding:SC.Binding.oneWay("Cv.sidebarTemplateSetsController.isLoading").bool().not(),setFieldValue:function(f){var c=arguments.callee.base.apply(this,arguments);
var e=this.get("value");var b=this.get("layer");if(e&&b){b.value=SC.guidFor(e)}return c
}}),setTitleView:SC.LabelView.design({layout:{left:40,right:40,top:5,height:20},valueBinding:"Cv.sidebarActiveSet.displayName",textAlign:SC.ALIGN_CENTER,isVisibleBinding:SC.Binding.oneWay("Cv.sidebarSearchController.isSearching").bool().not()}),quickMarkLibraryLinkView:SC.ButtonView.design({layout:{right:0,width:40,height:30},titleMinWidth:null,title:"_QuickMark Manager".loc(),classNames:"manager-button",toolTip:"_Open QuickMark Manager".loc(),action:function(){if(Cv.servicesController.readonlyAlert()||Cv.demoNotice()){return
}if(this._pane){this._pane.append();return}this._pane=SC.PanelPane.create({layout:{top:100,bottom:100,left:100,right:100,minWidth:700,minHeight:431},contentView:SC.View.design({layout:{top:0,bottom:0,left:0,right:0,minWidth:700,minHeight:400},childViews:"libraryView footerView".w(),libraryView:Qmlib.LibraryView.design({layout:{top:0,bottom:30,left:0,right:0,minWidth:700,minHeight:400}}),footerView:SC.View.design({layout:{bottom:0,left:0,right:0,height:30},childViews:"helpTextView closeButtonView".w(),classNames:"manager-footer",helpTextView:SC.ButtonView.design({layout:{left:5,right:"auto",top:0,height:30},classNames:"help-button",title:"_Help".loc(),action:function(){window.open("/en_us/support/help-center/quickmark-manager","_blank")
}}),closeButtonView:SC.ButtonView.design({layout:{right:0,width:100,top:0,height:30},classNames:"close-button",title:"_Close".loc(),action:function(){this.get("pane").remove()
}})})})});this._pane.append()}})});return a},getCommentViewDesign:function(){var a=SC.View.design({layout:{top:71,height:55,left:0,right:0},childViews:"addCommentButtonView instructionsView".w(),classNames:"sidebar-pane",addCommentButtonView:SC.ButtonView.design({layout:{left:5,width:100,centerY:0,height:25},title:"_Comment".loc(),classNames:["sidebar-quickmark-template","comment-button"],quickMarkSidebarView:this,isReadonlyBinding:"Cv.paperController.isReadonly",target:this,action:"createComment",dragDataSource:this,mouseDown:function(b){this.drag=null;
return YES},mouseDragged:function(b){if(this.get("isReadonly")){return NO}else{if(!this.drag){this.drag=SC.Drag.start({event:b,source:this,dragView:this,dataSource:this.get("dragDataSource"),ghost:NO,ghostActsLikeCursor:YES})
}}}}),instructionsView:SC.LabelView.design({layout:{top:10,right:5,bottom:0,left:130},classNames:["highlight-instructions"],value:"_Select text and click the Comment button to highlight text associated with a comment.".loc(),isEditable:NO})});
return a},getQuickMarkTemplatesViewDesign:function(){var a=SC.SplitView.design({layout:{top:125,left:0,right:0,bottom:0},layoutDirection:SC.LAYOUT_VERTICAL,autoresizeBehavior:SC.RESIZE_TOP_LEFT,defaultThickness:0.25,canCollapseViews:NO,dividerView:SC.SplitDividerView,topLeftView:SC.View.design({layout:{top:80,right:0,bottom:0,left:0},classNames:["sidebar-pane"],childViews:"templatesFlowView templatesLoadingView".w(),templatesLoadingView:Ip.LoadingView.design({layout:{top:0,right:0,bottom:0,left:0},isVisibleBinding:SC.Binding.oneWay("Cv.sidebarTemplatesController.isLoading").bool(),loadingText:"_Loading QuickMarks...".loc()}),templatesFlowView:SC.ScrollView.design({layout:{top:0,right:0,bottom:0,left:0},hasHorizontalScroller:NO,contentView:Cv.FlowView.design({contentBinding:SC.Binding.oneWay("Cv.sidebarTemplatesController.arrangedObjects"),contentValueKey:"name",isReadonlyBinding:"Cv.paperController.isReadonly",horizontalPadding:15,verticalPadding:11,exampleView:Cv.FlowItemView.extend(Ip.AnchorTagActions,{quickMarkSidebarView:this,classNames:["sidebar-quickmark-template","clickable"],escapeHTML:NO,target:function(){return this
}.property().cacheable(),action:"createQuickMark",dragDataSource:this,createQuickMark:function(){var b=this.get("quickMarkSidebarView");
var c=this.get("content");b.createQuickMark(c)},textAlign:"",mouseDragged:function(){if(this.getPath("parentView.isReadonly")){return NO
}else{return arguments.callee.base.apply(this,arguments)}},mouseEntered:function(){var b=this.get("content");
var c=this.getPath("parentView.parentView.parentView.parentView.parentView.bottomRightView");
c.set("template",b)},mouseExited:function(){var b=this.get("content");var c=this.getPath("parentView.parentView.parentView.parentView.parentView.bottomRightView");
if(c&&c.get("template")===b){c.set("template",null)}}})})})}),bottomRightView:SC.LabelView.design(Ip.AnchorTagActions,{template:null,classNames:"info-pane",escapeHTML:NO,value:function(){var b=this.getPath("template.description")||"<no description>";
return b}.property("template").cacheable()})});return a},createComment:function(){if(this.get("isReadonly")){return
}var f={isExpanded:YES,isEditing:YES};var h=Cv.paperTextSelectionController.get("textSelectionHighlight");
if(h){var j=h.get("startGlyph");var e=h.get("endGlyph");var b=j.get("address");var c=e.get("address");
SC.mixin(f,{page:e.get("pageIndex")+1,x:e.get("left"),y:e.get("top"),highlight:{start_line:b.line,start_glyph:b.glyph,start_page_index:b.page,end_line:c.line,end_glyph:c.glyph,end_page_index:c.page}});
Cv.paperTextSelectionController.clearTextSelectionHighlight()}else{var a=this.get("paperView");
var g=a.getPageViewAtMidPoint();SC.mixin(f,{page:g.pageIndex+1,x:g.x,y:g.y})}var i=this.get("markSet");
i.createComment(f)},createQuickMark:function(i){if(this.get("isReadonly")){return
}var a=this.get("paperView");var f={template:i.get("id"),use_template:YES};if(i.get("id")==200051){f.isEditing=YES;
f.isExpanded=YES}var h=Cv.paperTextSelectionController.get("textSelectionHighlight");
if(h){var k=h.get("startGlyph");var e=h.get("endGlyph");var b=k.get("address");var c=e.get("address");
SC.mixin(f,{page:e.get("pageIndex")+1,x:e.get("left"),y:e.get("top"),highlight:{start_line:b.line,start_glyph:b.glyph,start_page_index:b.page,end_line:c.line,end_glyph:c.glyph,end_page_index:c.page,color:Cv.userDefaults.get("highlightLastColorSelection")}});
Cv.paperTextSelectionController.clearTextSelectionHighlight()}else{var g=a.getPageViewAtMidPoint();
SC.mixin(f,{page:g.pageIndex+1,x:g.x,y:g.y})}var j=this.get("markSet");j.createQuickMark(f)
}});Cv.RubricCriterionItemView=SC.View.extend({rubric:null,rubricScoring:null,criterion:null,classNames:"score-card-criterion-item".w(),layout:{left:0,width:280,minWidth:280,minHeight:90},childViews:"titleView criterionPercentageView studentScoreFractionView studentCriterionPercentageView cellsView scoreDescriptionView criterionMarksButtonView".w(),titleView:SC.LabelView.design({layout:function(a,b){if(b===undefined){b={top:5,left:35,height:20};
if(!this.get("displayMarkCriteriaAssociations")){b.left=10}}return b}.property("displayMarkCriteriaAssociations").cacheable(),displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",useStaticLayout:YES,tagName:"span",classNames:["criterion-title"],fontWeight:SC.BOLD_WEIGHT,valueBinding:".parentView.criterion.name",valueBindingDefault:SC.Binding.oneWay()}),criterionPercentageView:SC.LabelView.design({layout:{top:5,right:0,height:20,width:50},criterionValueBinding:".parentView.criterion.value",criterionValueBindingDefault:SC.Binding.oneWay(),scoringMethodBinding:".parentView.rubric.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),value:function(){var a=this.get("criterionValue");
a=Math.round(a*100)/100;var b="_%@%".loc(a);return b}.property("criterionValue").cacheable(),isVisible:function(){var b=this.get("scoringMethod");
var a=(b===Rb.TYPICAL_RUBRIC);return a&&!Cv.get("inStudentMode")}.property("scoringMethod").cacheable()}),studentScoreFractionView:SC.LabelView.design({layout:{top:5,right:0,height:20,width:50},classNames:["student-score-fraction"],criterionValueBinding:".parentView.criterion.value",criterionValueBindingDefault:SC.Binding.oneWay(),rubricScalesBinding:".parentView.rubric.scales",rubricScalesBindingDefault:SC.Binding.oneWay(),scoresBinding:".parentView.rubricScoring.scores",scoresBindingDefault:SC.Binding.oneWay(),criterionBinding:".parentView.criterion",criterionBindingDefault:SC.Binding.oneWay(),criterionNumBinding:".parentView.criterion.num",criterionNumBindingDefault:SC.Binding.oneWay(),criterionMaxScaleValueBinding:".parentView.criterion.rubricMaxScaleValue",criterionMaxScaleValueBindingDefault:SC.Binding.oneWay(),scoringMethodBinding:".parentView.rubric.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),escapeHTML:NO,value:function(){var b=this.get("scoringMethod");
var h=this.get("rubricScales");var e=this.get("scores");var c=this.get("criterionNum");
if(e&&c&&h){var i;var g=e[c];var a=h.find(function(l){return(l.get("num")===g)});
if(b===Rb.TYPICAL_RUBRIC){var k=a?a.get("value"):0;var f=this.get("criterionMaxScaleValue");
i='%@ <span class="criterion-max-value">/ %@</span>'.fmt(k,f)}else{var j=this.get("criterion");
var k=a?j.getCriterionScaleValue(a):0;i='%@ <span class="criterion-max-value">/ %@</span>'.fmt(k,j.get("maxPoints"))
}return i}}.property("rubricScales","criterionMaxScaleValue","scores","criterionNum").cacheable(),isVisible:function(){var b=this.get("scoringMethod");
var a=(b===Rb.TYPICAL_RUBRIC||b===Rb.CUSTOM_RUBRIC);return a&&Cv.get("inStudentMode")
}.property("scoringMethod").cacheable()}),studentCriterionPercentageView:SC.LabelView.design({layout:function(a,b){if(b===undefined){b={top:5,left:40,height:20,width:50};
if(!this.get("displayMarkCriteriaAssociations")){b.left=10}}return b}.property("displayMarkCriteriaAssociations").cacheable(),classNames:["criterion-percentage","student-criterion-percent"],useStaticLayout:YES,tagName:"span",displayMarkCriteriaAssociations:NO,displayMarkCriteriaAssociationsBinding:"Cv.readMarkCriteriaController.hasMarkCriteria",scoresBinding:".parentView.rubricScoring.scores",scoresBindingDefault:SC.Binding.oneWay(),criterionValueBinding:".parentView.criterion.value",criterionValueBindingDefault:SC.Binding.oneWay(),rubricScalesBinding:".parentView.rubric.scales",rubricScalesBindingDefault:SC.Binding.oneWay(),criterionBinding:".parentView.criterion",criterionBindingDefault:SC.Binding.oneWay(),criterionNumBinding:".parentView.criterion.num",criterionNumBindingDefault:SC.Binding.oneWay(),scoringMethodBinding:".parentView.rubric.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),value:function(){var i;
var b=this.get("scoringMethod");if(SC.none(b)){return 0}if(b===Rb.TYPICAL_RUBRIC){i=this.get("criterionValue");
i=Math.round(i*100)/100}else{var g=this.get("rubricScales");var e=this.get("scores");
var c=this.get("criterionNum");var f=e[c];var a=g.find(function(k){return(k.get("num")===f)
});var j=this.get("criterion");i=a?j.getCriterionScaleValue(a):0;i=Math.round((i/j.maxPoints)*100)
}var h="_%@%".loc(i);return"("+h+")"}.property("criterionValue").cacheable(),isVisible:function(){var b=this.get("scoringMethod");
var a=(b===Rb.TYPICAL_RUBRIC||b===Rb.CUSTOM_RUBRIC);return a&&Cv.get("inStudentMode")
}.property("scoringMethod").cacheable()}),criterionMarksButtonView:RubricManagerCore.CriterionMarksPaneButtonView.extend({layout:{top:3,left:1,height:26,width:33},criterionBinding:".parentView.criterion",criterionReadMarkSetsControllerBinding:"Cv.criterionReadMarkSetsController",emphasizedMarkControllerBinding:"Cv.emphasizedMarkController",isVisibleBinding:"Cv.readMarkCriteriaController.hasMarkCriteria"}),cellsView:SC.SegmentedView.design(SC.StaticLayout,{layout:{top:0,left:0,bottom:0},classNames:["criterion-cells"],useStaticLayout:YES,isVisible:function(){return !Cv.get("inStudentMode")
}.property().cacheable(),allowsMultipleSelection:NO,allowsEmptySelection:YES,itemTitleKey:"title",itemValueKey:"value",itemTargetKey:"target",itemActionKey:"action",rubricBinding:".parentView.rubric",rubricBindingDefault:SC.Binding.oneWay(),rubricIsLoadedBinding:".parentView.rubric.isLoaded",rubricIsLoadedBindingDefault:SC.Binding.oneWay(),scoringMethodBinding:".parentView.rubric.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),rubricScoringIsLoadedBinding:".parentView.rubricScoring.isLoaded",rubricScoringIsLoadedBindingDefault:SC.Binding.oneWay(),rubricScoringStatusBinding:".parentView.rubricScoring.status",rubricScoringStatusBindingDefault:SC.Binding.oneWay(),scoresBinding:".parentView.rubricScoring.scores",scoresBindingDefault:SC.Binding.oneWay(),criterionBinding:".parentView.criterion",criterionBindingDefault:SC.Binding.oneWay(),paperIsReadonlyBinding:"Cv.paperController.isReadonly",paperIsReadonlyBindingDefault:SC.Binding.oneWay(),isEnabled:function(){var b=NO;
if(Cv.get("inStudentMode")||this.get("paperIsReadonly")){return NO}var c=this.get("rubricScoringIsLoaded");
var a=this.get("rubricScoringStatus");if(c&&!(a&SC.Record.BUSY)){b=YES}return c}.property("rubricScoringIsLoaded","rubricScoringStatus","paperIsReadonly").cacheable(),items:function(){var a=[];
var b=this.get("rubric");if(b){var e=b.get("scales");var c=this.get("criterion");
a=e.map(function(j,f){var g=this.get("scoringMethod");var i;var k;if(g===Rb.NON_SCORING_RUBRIC){i=new String(f+1)
}else{if(g===Rb.TYPICAL_RUBRIC){k=j.get("value")}else{k=c.getCriterionScaleValue(j)
}}if((k===0)||(k>0)){k=Math.round(k*100)/100;i=new String(k)}var h=SC.Object.create({title:i,value:j,segmentedView:this,action:"updateValue",updateValue:function(){var m=this.get("value");
var l=this.get("segmentedView");l.didClickOn(m)}});h.set("target",h);return h},this)
}return a}.property("rubric","criterion").cacheable(),value:function(c,f){var e=this.get("rubricIsLoaded");
var i=this.get("rubricScoringIsLoaded");if(e&&i){var h=this.get("scores");var a=this.getPath("criterion.num");
var b=h[a];if(b){var g=this.getPath("rubric.scales");f=g.find(function(j){return(j.get("num")===b)
})}}return f}.property("rubric","rubricIsLoaded","scores","rubricScoringIsLoaded","criterion").cacheable(),didCreateLayer:function(){var a=this.get("parentView");
if(a){this.invokeLast(function(){a.cellsViewDidCreateLayer()})}},didClickOn:function(f){var a=this.get("rubricScoringStatus");
if(a&SC.Record.BUSY){return}this.propertyWillChange("scores");var e=this.get("value");
if(e===f){f=null}var c=this.get("criterion");var b=this.getPath("parentView.parentView");
b.updateValue(c,f);this.propertyDidChange("scores")},mouseMoved:function(h){var f=this.displayItemIndexForEvent(h);
var b=this.get("criterion");var a=null;if(f>=0){var c=this.get("items");var g=c.objectAt(f);
a=g.get("value")}Cv.rubricScorecardController.set("hoverCriterion",b);Cv.rubricScorecardController.set("hoverScale",a);
var e=arguments.callee.base.apply(this,arguments);return e},mouseExited:function(){var a=this.getPath("parentView.parentView");
if(a){Cv.rubricScorecardController.set("hoverCriterion",null);Cv.rubricScorecardController.set("hoverScale",null)
}return arguments.callee.base.apply(this,arguments)}}),scoreDescriptionView:SC.LabelView.design(SC.StaticLayout,{layout:{top:10,left:8,width:282,bottom:0},useStaticLayout:YES,classNames:["student-score-description"],escapeHTML:NO,displayProperties:["value"],render:function(a){if(this.get("value")){a.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(this.get("value"),["a","b","i","u","br"])))
}},isVisible:function(){return Cv.get("inStudentMode")}.property().cacheable(),criterionBinding:".parentView.criterion",value:function(){var c="";
var b=this.get("criterion");var a=Cv.rubricScoringController.getScaleForCriterion(b);
if(a){c=a.getPath("scale.name")+". ";if(a.get("description")){c+=a.get("description")
}}return c}.property()}),cellsViewDidCreateLayer:function(){var a=this.get("cellsView");
var e=a.$(".sc-segment");if(e&&(e.length>0)){var g=0;var b=e.length;if(b>0){for(var f=b-1;
f>=0;f--){var c=e[f];g+=c.offsetWidth;c=null}g+=e[0].offsetLeft;this.adjust("width",g)
}}}});sc_require("views/rubric_score_card/rubric_criterion_item");Cv.RubricScoreCardScoresView=SC.View.extend({classNames:"scores-view".w(),useStaticLayout:YES,rubricBinding:"Cv.rubricController.content",rubricBindingDefault:SC.Binding.oneWay(),rubricIsLoadedBinding:"Cv.rubricController.isLoaded",rubricIsLoadedBindingDefault:SC.Binding.oneWay(),rubricScoringBinding:"Cv.rubricScoringController.content",rubricScoringBindingDefault:SC.Binding.oneWay(),rubricScoringIsLoadedBinding:"Cv.rubricScoringController.isLoaded",rubricScoringIsLoadedBindingDefault:SC.Binding.oneWay(),isVisible:function(){var b=this.get("rubricIsLoaded");
var c=this.get("rubricScoringIsLoaded");var a=b&&c;return a}.property("rubricIsLoaded","rubricScoringIsLoaded").cacheable(),criterionItemView:Cv.RubricCriterionItemView.extend(SC.StaticLayout,{useStaticLayout:YES,_frameDidChange:function(){var a=this.get("parentView");
if(a){a.updateLayoutIfNeeded()}}.observes("frame")}),createChildViews:function(){var a=this.get("rubricIsLoaded");
var c=this.get("rubricScoringIsLoaded");if(a&&c){var b=this._generateCriterionItemViews();
this.set("childViews",b)}},_generateCriterionItemViews:function(){var c=this.get("rubric");
var a=this.get("rubricScoring");var f=c.get("criteria");var e=this.get("criterionItemView");
var b=f.map(function(i){var h=e.design({rubric:c,rubricScoring:a,rubricScoringController:Cv.rubricScoringController,criterion:i});
var g=this.createChildView(h);return g},this);return b},_reload:function(){var a=this._generateCriterionItemViews();
this.replaceAllChildren(a)},updateLayoutIfNeeded:function(){this.invokeOnce(this._updateLayout)
},_updateLayout:function(){var g=this.get("childViews");if(g){var e=g.getEach("frame").getEach("width").get("@max");
this.adjust("width",e+1);var b=g.get("length"),c,f,a;if(b===0){a=1}else{c=g.objectAt(b-1);
f=c?c.get("layer"):null;a=f?(f.offsetTop+f.offsetHeight):1;f=null}this.adjust("height",a+1)
}},rubricOrRubricScoringDidChange:function(){var a=this.get("rubricIsLoaded");var b=this.get("rubricScoringIsLoaded");
if(a&&b){this.invokeOnce(this._reload)}else{if(this.getPath("childViews.length")){this.removeAllChildren()
}}}.observes("rubric","rubricIsLoaded","rubricScoring","rubricScoringIsLoaded"),updateValue:function(a,b){Cv.rubricScoringController.updateValueAndSave(a,b)
}});Cv.RubricScoreCardSummaryView=SC.View.extend({classNames:"summary-view".w(),childViews:"numericSummaryView qualitativeSummaryView studentExpandRubricButtonView".w(),rubricIsLoadedBinding:"Cv.rubricController.isLoaded",rubricIsLoadedBindingDefault:SC.Binding.oneWay(),rubricScoringIsLoadedBinding:"Cv.rubricScoringController.isLoaded",rubricScoringIsLoadedBindingDefault:SC.Binding.oneWay(),isVisible:function(){var b=this.get("rubricIsLoaded");
var c=this.get("rubricScoringIsLoaded");var a=b&&c;return a}.property("rubricIsLoaded","rubricScoringIsLoaded").cacheable(),numericSummaryView:SC.View.design({layout:{top:0,left:0,width:285,height:100},childViews:"scoreSummaryView".w(),classNames:"numeric-summary-view".w(),scoringMethodBinding:"Cv.rubricController.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),isVisible:function(){var a=NO;
var b=this.get("scoringMethod");switch(b){case Rb.TYPICAL_RUBRIC:case Rb.CUSTOM_RUBRIC:case Rb.CRITERIA_POINTS_VS_SCALE_PERCENT:case Rb.CRITERIA_PERCENT_VS_SCALE_PERCENT:a=YES;
break;default:break}return a}.property("scoringMethod").cacheable(),scoreSummaryView:SC.View.design({layout:{top:10,height:80,left:0,right:0},classNames:"rubric-score-summary-view".w(),rubricBinding:"Cv.rubricController.content",rubricBindingDefault:SC.Binding.oneWay(),totalScoreBinding:"Cv.rubricScoringController.totalScore",totalScoreBindingDefault:SC.Binding.oneWay(),percentBinding:"Cv.rubricScoringController.percent",percentBindingDefault:SC.Binding.oneWay(),rubricScoringBinding:"Cv.rubricScoringController.content",rubricScoringBindingDefault:SC.Binding.oneWay(),displayProperties:"rubric rubricScoring totalScore percent".w(),render:function(f,i){var c=[];
var e=this.get("totalScore");var h=this.getPath("rubric.totalPoints");e=h?Math.round(e*100)/100:"--";
h=Math.round(h*100)/100;c.push('<div class="rubric-score">');c.push('<div class="label">');
c.push("_Rubric score".loc());c.push("</div>");c.push('<div class="value">');c.push('<span class="score">');
c.push(e);c.push("</span>");c.push(" / ");c.push(h);c.push("</div>");c.push("</div>");
var g=this.get("percent");g=g?Math.round(g*100)/100:"--";var a="_%@%".loc(g);c.push('<div class="rubric-percent">');
c.push('<div class="label">');c.push("_RUBRIC PERCENTAGE".loc());c.push("</div>");
c.push('<div class="value">');c.push(a);c.push("</div>");c.push("</div>");var b=c.join("");
f.push(b)}})}),qualitativeSummaryView:SC.View.design({layout:{top:0,left:0,width:285,height:100},classNames:"qualitative-rubric-summary-view".w(),childViews:"labelView".w(),scoringMethodBinding:"Cv.rubricController.scoringMethod",scoringMethodBindingDefault:SC.Binding.oneWay(),isVisible:function(){var a=NO;
var b=this.get("scoringMethod");switch(b){case Rb.NON_SCORING_RUBRIC:case Rb.NON_SCORING_GRADING_FORM:a=YES;
break;default:break}return a}.property("scoringMethod").cacheable(),labelView:SC.LabelView.design({layout:{top:15,left:15,right:15,height:175},escapeHTML:NO,value:"_This qualitative rubric will not result in a score. However, it is a valuable feedback mechanism for students and writers.".loc(),mouseDown:function(a){if(a.target.tagName.toLowerCase()==="a"){return YES
}else{return NO}}})}),studentExpandRubricButtonView:SC.ButtonView.design({useStaticLayout:YES,layout:{height:30,left:0,right:0,top:90},classNames:"student-expand-rubric-button link-button".w(),title:"_View full size rubric in a new window".loc(),target:"Cv.rubricScorecardController",action:"openExpandedScoreCard",isVisibleBinding:"Cv.inStudentMode"})});
Cv.RubricScoreCardDetailsView=SC.View.extend({classNames:"criterion-scale-details-view info-pane".w(),hoverCriterionBinding:"Cv.rubricScorecardController.hoverCriterion",hoverScaleBinding:"Cv.rubricScorecardController.hoverScale",rubricBinding:"Cv.rubricController.content",rubricBindingDefault:SC.Binding.oneWay(),displayProperties:"hoverCriterion hoverScale".w(),render:function(e,a){var m=[];
var p=this.get("hoverCriterion");var h=this.get("hoverScale");if(!p||!h){e.push("");
return}m.push('<div class="liner">');var b=p.get("name");var o=p.get("value");o=Math.round(o*100)/100;
var c=this.getPath("rubric.scoringMethod");m.push('<div class="criterion-info">');
if(c===Rb.TYPICAL_RUBRIC){m.push('<div class="value">');m.push("_%@%".loc(o));m.push("</div>")
}m.push('<div class="name">');m.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(b,["a","b","i","u","br"])));
m.push("</div>");m.push("</div>");var l;if(c===Rb.NON_SCORING_RUBRIC){var j=this.getPath("rubric.scales");
var i=j.indexOf(h);l=i+1}else{l=p.getCriterionScaleValue(h);l=Math.round(l*100)/100
}var f=h.get("name");m.push('<div class="scale-info">');m.push(l);m.push(" - ");m.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(f,["a","b","i","u","br"])));
m.push("</div>");var k=p.getCriterionScale(h).get("description");m.push('<div class="criterion-scale-description">');
if(k){m.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(k,["a","b","i","u","br"])))
}m.push("</div>");var n=p.get("description");m.push('<div class="criterion-description">');
if(n){m.push(Ip.newLinesToBreakTags(Ip.scrubHTMLWithExceptions(n,["a","b","i","u","br"])))
}m.push("</div>");m.push("</div>");var g=m.join("");e.push(g)}});Cv.RubricScoreCardContentView=SC.View.extend({childViews:"criterionScoresView summaryPanelView".w(),criterionScoresView:Cv.RubricScoreCardScoresView.design(SC.StaticLayout,{_reload:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("parentView");a.updateLayoutFromChildViews()},_isVisibleDidChange:function(){var a=this.get("parentView");
a.updateLayoutFromChildViews()}.observes("isVisible"),_frameDidChange:function(){var a=this.get("parentView");
a.updateLayoutFromChildViews()}.observes("frame")}),summaryPanelView:Cv.RubricScoreCardSummaryView.design(SC.StaticLayout,{useStaticLayout:YES,isGradingFormBinding:"Cv.rubricController.isGradingForm",layout:function(){var a=this.get("isGradingForm");
return{left:0,right:0,height:(a?20:120)}}.property("isGradingForm").cacheable(),_isVisibleDidChange:function(){var a=this.get("parentView");
a.updateLayoutFromChildViews()}.observes("isVisible")}),updateLayoutFromChildViews:function(a){this.invokeOnce(this._updateLayoutFromChildViews)
},_updateLayoutFromChildViews:function(){this.beginPropertyChanges();var c=NO;var i=this.getPath("summaryPanelView.layer");
var g=this.getPath("summaryPanelView.isVisible");if(i&&g){var a=(i.offsetTop+i.offsetHeight);
i=null;this.adjust("height",a);c=YES}var h=this.getPath("criterionScoresView.layer");
var b=this.getPath("criterionScoresView.isVisible");if(h&&b){var f=(h.offsetTop+h.offsetWidth);
h=null;this.adjust("width",f);c=YES}if(!c){var e=this.getPath("parentView.frame");
if(e){this.adjust("height",e.height);this.adjust("width",e.width)}}this.endPropertyChanges();
return this},didCreateLayer:function(){return this.updateLayoutFromChildViews()}});
sc_require("views/rubric_score_card/rubric_score_card_scores");sc_require("views/rubric_score_card/rubric_score_card_summary");
sc_require("views/rubric_score_card/rubric_score_card_details");sc_require("views/rubric_score_card/rubric_score_card_content");
sc_require("controllers/editing_registry");Cv.RubricScoreCardSidebarView=SC.View.extend({classNames:["rubric-score-card-sidebar"],displayProperties:["classNames"],_addAttachementTypeClassName:function(){var a=this.get("isGradingForm");
var b=this.get("classNames").concat()||[];b.removeObjects(["grading-form","rubric"]);
b.pushObject(a?"grading-form":"rubric");this.set("classNames",b)}.observes("isGradingForm"),childViews:"headerView titleBarView scoreCardView totalScoreView applyScoreView loadingView".w(),isGradingFormBinding:SC.Binding.oneWay("Cv.rubricController.isGradingForm"),messageType:function(){var a=this.get("isGradingForm");
if(a){return"gradingForm"}return"rubric"}.property("isGradingForm").cacheable(),headerView:SC.LabelView.design({layout:{top:0,height:40,left:0,right:0},classNames:["gm-sidebar-header"],messageTypeBinding:".parentView.messageType",controlSize:SC.LARGE_CONTROL_SIZE,value:function(){var a=this.get("messageType");
return RubricManagerCore.messages.sidebarTitle[a]}.property("messageType").cacheable()}),titleBarView:SC.View.design({layout:{top:40,height:30,left:0,right:0},childViews:"expandRubricButtonView titleView rubricManagerLinkView".w(),classNames:"sidebar-mini-menu",expandRubricButtonView:SC.ButtonView.design({layout:{height:30,left:0,width:30},titleMinWidth:null,classNames:"sc-small-size manager-button expand-rubric",messageTypeBinding:".parentView.parentView.messageType",toolTip:function(){var a=this.get("messageType");
if(!this.get("rubricIsAttached")){return RubricManagerCore.messages.cantExpandRubric[a]
}else{return RubricManagerCore.messages.expandRubric[a]}}.property("rubricIsAttached","messageType").cacheable(),isVisibleBinding:SC.Binding.not("Cv.inStudentMode"),isEnabledBinding:"Cv.rubricScorecardController.scorecardCanBeExpanded",rubricIsAttachedBinding:"Cv.rubricScorecardController.rubricIsAttached",target:"Cv.rubricScorecardController",action:"openExpandedScoreCard"}),titleView:SC.LabelView.design({layout:{top:5,left:40,right:40},classNames:["ellipsis"],valueBinding:"Cv.rubricController.name",valueBindingDefault:SC.Binding.oneWay(),isEnabledBinding:"Cv.rubricScorecardController.scorecardCanBeExpanded"}),rubricManagerLinkView:SC.ButtonView.design({layout:{height:30,right:0,width:30},titleMinWidth:null,classNames:"sc-small-size manager-button",isVisible:!Cv.get("inStudentMode"),isEnabledBinding:SC.Binding.not("Cv.rubricScorecardController.scorecardIsExpanded"),textAlign:SC.ALIGN_RIGHT,title:"_Rubric/Form Manager".loc(),toolTipBinding:".title",action:function(){if(Cv.get("inStudentMode")||Cv.servicesController.readonlyAlert()||Cv.demoNotice()){return
}if(this._pane){this._pane.append();return}this._pane=SC.PanelPane.create({layout:{top:100,bottom:100,left:100,right:100,minWidth:800,minHeight:500},contentView:SC.View.design({childViews:"libraryView".w(),libraryView:RubricManagerCore.ManagerView.design(Ip.EditingInterceptor,{editingRegistryControllerBinding:"Cv.editingRegistryController",init:function(){arguments.callee.base.apply(this,arguments);
RubricManagerCore.nestedStore=Cv.store.chain();RubricManagerCore.rubricListController.set("content",Cv.userController.get("rubrics"))
},closeAction:function(){var a={fn:function(b){this.get("pane").remove()},target:this,args:arguments,allowOtherSaves:NO};
Cv.editingRegistryController.tryToPerform(a)},isEditingBinding:"RubricManagerCore.nestedStore.hasChanges",isAutoSaveable:NO,closeEditViewWithoutSave:function(){RubricManagerCore.editingRubricController.cancelEditingSkipConfirm()
},interceptorExitContextMessage:{message:"_Are you sure you want to leave without saving your changes?".loc(),description:"_If you leave now, your unsaved changes will be lost.".loc(),continueButtonText:"_Yes".loc(),cancelButtonText:"_Cancel".loc()}})})});
this._pane.append()}})}),scoreCardView:SC.ContainerView.design({layout:function(){var f=this.get("inStudentMode"),a=this.get("isScoringRubric"),e=this.get("isGradingForm"),c=this.get("scorecardIsExpanded"),b={top:71};
if(!c){if(a&&e){b={top:71,bottom:100}}else{if(a&&!f){b={top:71,bottom:60}}}}return b
}.property("inStudentMode","isScoringRubric","isGradingForm","scorecardIsExpanded").cacheable(),nowShowing:function(){var a=this.get("rubricIsAttached"),f=this.get("inStudentMode"),e=this.get("isGradingForm"),c=this.get("scorecardIsExpanded"),b;
if(a&&!f){if(c){b=Cv.rubricScoreCardsPage.get("rubricIsExpandedView")}else{if(e){b=Cv.rubricScoreCardsPage.get("gradingFormView")
}else{b=Cv.rubricScoreCardsPage.get("rubricScoreCardView")}}}else{if(a&&f){if(c){b=Cv.rubricScoreCardsPage.get("rubricIsExpandedView")
}else{if(e){b=Cv.rubricScoreCardsPage.get("studentGradingFormView")}else{b=Cv.rubricScoreCardsPage.get("studentRubricScoreCardView")
}}}else{b=Cv.rubricScoreCardsPage.get("noRubricAttachedView")}}return b}.property("rubricIsAttached","inStudentMode","isGradingForm","scorecardIsExpanded").cacheable(),isGradingFormBinding:"Cv.rubricController.isGradingForm",inStudentModeBinding:"Cv.inStudentMode",rubricIsAttachedBinding:SC.Binding.oneWay("Cv.rubricController.hasContent"),isScoringRubricBinding:SC.Binding.oneWay("Cv.rubricController.isScoringRubric"),scorecardIsExpandedBinding:SC.Binding.oneWay("Cv.rubricScorecardController.scorecardIsExpanded")}),totalScoreView:SC.View.design({_setStudentClassName:function(){var a=this.get("inStudentMode");
var b=this.get("classNames").concat()||[];if(!a){b.removeObject("student")}else{b.pushObject("student")
}this.set("classNames",b)}.observes("inStudentMode"),displayProperties:["classNames"],layout:function(){if(this.get("inStudentMode")){return{bottom:0,height:100,left:0,right:0}
}else{return{bottom:60,height:40,left:5,right:5}}}.property("inStudentMode").cacheable(),classNames:["grading-form-total"],childViews:"labelView instructorScoreView studentScoreView".w(),labelView:SC.LabelView.design({layout:{height:40,top:0},classNames:["total-label"],textAlign:SC.ALIGN_LEFT,_setTextAlign:function(){if(this.get("inStudentMode")){this.set("textAlign",SC.ALIGN_CENTER)
}else{this.set("textAlign",SC.ALIGN_LEFT)}}.observes("inStudentMode"),inStudentModeBinding:".parentView.inStudentMode",controlSize:SC.LARGE_CONTROL_SIZE,value:"_Total Score".loc()}),instructorScoreView:SC.LabelView.design(SC.AutoResize,Ip.LabelViewAutoResizeSupport,{layout:{width:50,right:0,centerY:0,height:40},textAlign:SC.ALIGN_RIGHT,autoResizePadding:0,classNames:["score"],isVisibleBinding:SC.Binding.transform(function(a,b){return !a
}).from(".parentView.inStudentMode"),maxWidth:50,shouldAutoFitText:YES,shouldAutoResize:NO,shouldResizeHeight:YES,minFontSize:14,maxFontSize:30,valueBinding:"Cv.rubricScoringController.gradingFormTotalScoreDisplay"}),studentScoreView:SC.LabelView.design({layout:{top:40,height:60,left:0,right:0},textAlign:SC.ALIGN_CENTER,classNames:["score"],isVisibleBinding:".parentView.inStudentMode",valueBinding:"Cv.rubricScoringController.gradingFormTotalScoreDisplay"}),isGradingFormBinding:"Cv.rubricController.isGradingForm",isScoringRubricBinding:"Cv.rubricController.isScoringRubric",inStudentModeBinding:"Cv.inStudentMode",displayScorecardInMainWindowBinding:"Cv.rubricScorecardController.displayScorecardInMainWindow",isVisible:function(){return(this.get("isGradingForm")&&this.get("isScoringRubric")&&this.get("displayScorecardInMainWindow"))
}.property("isGradingForm","isScoringRubric","displayScorecardInMainWindow").cacheable()}),applyScoreView:SC.ButtonView.design({layout:{bottom:20,height:24,left:12,right:12},classNames:"sidebar-button apply-rubric-button".w(),messageTypeBinding:".parentView.messageType",title:function(){var a=this.get("messageType");
return RubricManagerCore.messages.applyScoreButton[a]}.property("messageType").cacheable(),isGradingFormBinding:"Cv.rubricController.isGradingForm",isScoringRubricBinding:"Cv.rubricController.isScoringRubric",inStudentModeBinding:"Cv.inStudentMode",displayScorecardInMainWindowBinding:"Cv.rubricScorecardController.displayScorecardInMainWindow",rubricHasContentBinding:SC.Binding.oneWay("Cv.rubricScoringController.content").bool(),gradingFormTotalScoreBinding:SC.Binding.oneWay("Cv.rubricScoringController.gradingFormTotalScore"),isVisible:function(){return(!this.get("inStudentMode")&&!Cv.paperController.get("isReadonly")&&this.get("isScoringRubric")&&this.get("displayScorecardInMainWindow"))
}.property("isScoringRubric","inStudentMode","displayScorecardInMainWindow").cacheable(),_computeIsEnabled:function(){var b=this.get("gradingFormTotalScore");
var c=this.get("isGradingForm");var a=this.get("rubricHasContent");if(a&&c){this.set("isEnabled",b===null?NO:YES)
}else{this.set("isEnabled",a?YES:NO)}}.observes("gradingFormTotalScore"),target:Cv.rubricScoringController,action:"applyToGradeAndSave"}),loadingView:Ip.LoadingView.design({rubricIsLoadingBinding:SC.Binding.oneWay("Cv.rubricController.isLoading"),rubricIsAttachedBinding:SC.Binding.oneWay("Cv.rubricController.content").bool(),rubricScoringIsUpdatingBinding:SC.Binding.oneWay("Cv.rubricScoringController.isUpdating"),isVisible:function(){return((this.get("rubricIsAttached")&&this.get("rubricIsLoading"))||this.get("rubricScoringIsUpdating"))
}.property("rubricIsLoading","rubricIsAttached","rubricScoringIsUpdating").cacheable(),loadingText:"_Loading...".loc()})});
sc_require("views/quick_mark_sidebar");sc_require("views/rubric_score_card/rubric_score_card_sidebar");
Cv.GradeMarkSidebarView=SC.TabView.extend({segmentedView:Ip.SegmentedView,gradeMarkController:null,quickMarkTemplateSetsController:null,quickMarkTemplatesController:null,studentModeBinding:"Cv.inStudentMode",eRaterProductAvailableToClassBinding:"Cv.eRaterController.productAvailableToClass",eRaterIsApplicableBinding:"Cv.eRaterController.isApplicable",paperView:null,tabLocation:SC.BOTTOM_LOCATION,itemTitleKey:"title",itemValueKey:"value",itemIsEnabledKey:"enabled",itemToolTipKey:"toolTip",tabHeight:30,itemClassNameKey:"className",classNames:"gm-sidebar",items:function(){var a=[{id:"quick_mark",title:"",value:this.get("quickMarkView"),enabled:!Cv.get("inStudentMode"),className:"quickmark",toolTip:"_Add QuickMarks or comments to this paper".loc()},{id:"general_comments",title:"",value:this.get("generalCommentsView"),enabled:YES,className:"general-comments",toolTip:"_View/edit a general comment for this entire paper".loc()},{id:"mark_list",title:"",value:this.get("markListView"),enabled:YES,className:"mark-list",toolTip:"_View all QuickMarks and comments for this paper".loc()},{id:"rubric_scorecard",title:"",value:this.get("rubricScorecardView"),enabled:YES,className:"rubric-scorecard",toolTip:"_View/edit rubric scorecard for this paper".loc()},{id:"e_rater",title:"",value:this.get("eRaterView"),enabled:(this.get("eRaterIsApplicable")&&this.get("eRaterProductAvailableToClass")&&!Cv.get("inStudentMode")&&!Cv.get("inDemoMode")),className:"e-rater",toolTip:"_e-rater%@ by ETS%@".loc("&reg;","&reg;")}];
return a}.property("studentMode","eRaterProductAvailableToClass","eRaterIsApplicable").cacheable(),nowShowing:function(b,f){if(f===undefined){var a=this.get("items");
if(a&&(a.get("length")>0)){var c=Ip.getQueryStringParameter("initial_showing_gm_sidebar");
if(c){var e=a.find(function(g){return g.id==c})||{};f=e.value}if(!f){f=Cv.get("inStudentMode")?this.get("generalCommentsView"):this.get("quickMarkView")
}}}return f}.property("items").cacheable(),nowShowingDidChange:function(){Cv.gradeMarkController.set("nowShowing",this.get("nowShowing"))
}.observes("nowShowing"),quickMarkView:function(){var a=Cv.QuickMarkSidebarView.design({layout:{top:0,bottom:0,left:0,right:0},gradeMarkController:this.get("gradeMarkController"),quickMarkTemplateSetsController:this.get("quickMarkTemplateSetsController"),quickMarkTemplatesController:this.get("quickMarkTemplatesController"),paperView:this.get("paperView")});
return this.createChildView(a)}.property().cacheable(),generalCommentsView:function(){var a=Cv.GeneralCommentSidebarView.design({layout:{top:0,bottom:0,left:0,right:0},readBinding:"Cv.markSetController.content"});
return this.createChildView(a)}.property().cacheable(),markListView:function(){var a=SC.View.design({childViews:"headerView markListView".w(),layout:{top:0,bottom:0,left:0,right:0},headerView:SC.LabelView.design({layout:{top:0,left:0,height:40},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"gm-sidebar-header",value:"_Comments List".loc()}),markListView:Cv.MarkListSidebarView.extend({layout:{top:40,bottom:0,left:0,right:0},markListController:Cv.markListController})});
return this.createChildView(a)}.property().cacheable(),rubricScorecardView:function(){var b=Cv.LazyLoadContainerView.design({lazyContentView:Cv.RubricScoreCardSidebarView.design({rubricScorecardController:Cv.rubricScorecardController}),render:function(c,e){arguments.callee.base.apply(this,arguments);
_gaq.push(["_trackEvent",Cv.GA.CATEGORY_RUBRIC,Cv.GA.ACTION_OPENED,Cv.GA.getSessionUUID()])
}});var a=this.createChildView(b);return a}.property().cacheable(),eRaterView:function(){var b=Cv.LazyLoadContainerView.design({lazyContentView:Cv.ERaterSidebarView.design({})});
var a=this.createChildView(b);return a}.property().cacheable(),createChildViews:function(){arguments.callee.base.apply(this,arguments);
var b=this.get("containerView");b.adjust("bottom",this.get("tabHeight")-1);var a=this.get("segmentedView");
a.adjust("width",210);a.adjust("right",null);var c=a.get("classNames").concat();c.push("sidebar-tabs");
a.set("classNames",c)}});Cv.InfoTileView=SC.View.extend(SCUI.ToolTip,{layout:{width:100},childViews:"topLabelView mainContentView bottomLabelView".w(),classNames:["info-tile-view"],topLabel:null,bottomLabel:null,mainContent:null,topToolTip:null,bottomToolTip:null,displayProperties:["toolTip"],topLabelView:SC.LabelView.design(SCUI.ToolTip,{layout:{top:0,height:20,left:0,right:0},classNames:["label","top-label"],textAlign:SC.ALIGN_CENTER,escapeHTML:NO,valueBinding:".parentView.topLabel",toolTipBinding:".parentView.topToolTip"}),mainContentView:SC.LabelView.design({layout:{top:14,height:30,centerX:0,width:80},textAlign:SC.ALIGN_CENTER,classNames:["infobar-value"],valueBinding:".parentView.mainContent"}),bottomLabelView:SC.LabelView.design(SCUI.ToolTip,{layout:{bottom:0,left:0,right:0,height:17},classNames:["label","bottom-label"],textAlign:SC.ALIGN_CENTER,valueBinding:".parentView.bottomLabel",toolTipBinding:".parentView.bottomToolTip"})});
sc_require("views/mark");Cv.InlineCommentView=Cv.MarkView.extend(Ip.EditingInterceptor,{content:null,paperView:null,classNames:["inline-comment-view"],markViewProperties:["editText"],activeCommentBinding:"Cv.markSetController.activeComment",isHovering:NO,currentView:function(){return this.get("collapsedView")
}.property().cacheable(),collapsedView:function(){var b=SC.View.design(Cv.MarkStatusIndicator,{childViews:["textFieldView"],classNames:(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark"))?"inline-comment-halo".w():"inline-comment-halo move-handle".w(),textFieldLayoutBinding:".textFieldView.innerSize",inlineCommentView:this,recordStatusBinding:".inlineCommentView.recordStatus",layout:function(){var e={top:0,left:0};
var f=this.get("textFieldLayout")||{width:0,height:0};var c=this.get("iconIsVisible")?Cv.InlineCommentView.STATUS_ICON_OFFSET:0;
e.height=f.height+Cv.InlineCommentView.DRAG_HANDLE_OFFSET-2;e.width=(f.width<Cv.InlineCommentView.MIN_WIDTH)?Cv.InlineCommentView.MIN_WIDTH+Cv.InlineCommentView.DRAG_HANDLE_OFFSET-2:f.width+Cv.InlineCommentView.DRAG_HANDLE_OFFSET-2;
return e}.property("textFieldLayout","iconIsVisible").cacheable(),textFieldView:SC.TextFieldView.design(Cv.EscapeValue,{displayProperties:["maxWidth","zoom"],paperBinding:"Cv.paperController.content",removeAllTags:YES,didCreateLayer:function(){if(SC.browser.isIE&&(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.getPath("parentView.parentView.isPmMark")||!Cv.gradeMarkController.get("isActive"))){var c=this.get("layer").getElementsByTagName("textarea")[0];
c.setAttribute("readOnly","readonly")}arguments.callee.base.apply(this,arguments)
},mouseDown:function(c){if(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.getPath("parentView.parentView.isPmMark")||!this.getPath("parentView.parentView.serviceIsActive")){return YES
}else{return arguments.callee.base.apply(this,arguments)}},mouseUp:function(){if(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.getPath("parentView.parentView.isPmMark")||!this.getPath("parentView.parentView.serviceIsActive")){return YES
}else{return arguments.callee.base.apply(this,arguments)}},defaultTabbingEnabled:NO,keyDown:function(c){var e=c.which;
if(e!==9){arguments.callee.base.apply(this,arguments)}},inlineCommentView:this,xPositionBinding:".inlineCommentView.content.x",pageWidth:function(){var e=this.getPath("inlineCommentView.content.pageIndex");
var c=Cv.paperController.get("pages");return c.objectAt(e).get("width")}.property().cacheable(),maxWidth:function(){var c=this.get("pageWidth");
var f=this.get("zoom");var g=this.get("xPosition");var e=(c-g-Cv.InlineCommentView.PAGE_EDGE_BUFFER<Cv.InlineCommentView.MIN_WIDTH)?Cv.InlineCommentView.MIN_WIDTH+Cv.InlineCommentView.PAGE_EDGE_BUFFER:(c-g-Cv.InlineCommentView.PAGE_EDGE_BUFFER);
return e*f}.property("xPosition","zoom").cacheable(),sanitizedValueBinding:".inlineCommentView.content.text",isTextArea:YES,zoomBinding:SC.Binding.oneWay("Cv.zoomController.zoom"),zoomedStyles:function(){var e=this.get("zoom"),c={};
c["font-size"]="%@px".fmt(Cv.InlineCommentView.FONT_SIZE*e);c["line-height"]=Cv.InlineCommentView.LINE_HEIGHT;
c["vertical-align"]="middle";c["word-wrap"]="break-word";c["max-width"]="%@px".fmt(this.get("maxWidth"));
c["min-width"]="%@px".fmt(Cv.InlineCommentView.MIN_WIDTH*e);c["min-height"]="%@px".fmt(Cv.InlineCommentView.MIN_HEIGHT*e);
return c}.property("zoom","maxWidth").cacheable(),stringComputationStyles:function(){var f=this.get("zoomedStyles"),e=[];
var g=this.get("zoom");f["font-style"]="italic";f.margin="0";f["max-width"]="%@px".fmt(this.get("maxWidth")-Cv.InlineCommentView.PAGE_EDGE_BUFFER*g);
for(var c in f){e.push("%@: %@".fmt(c,f[c]))}return(e.join("; ")+";")}.property("zoomedStyles").cacheable(),render:function(c,e){c.addStyle(this.get("zoomedStyles"));
arguments.callee.base.apply(this,arguments)},layout:{top:6,left:2,right:2,bottom:6},innerSize:function(){var e={};
var i=this.get("value")||"";var c=(i[i.length-1]==="\n")?1:0;var h=this.get("zoom");
var g=Ip.newLinesToBreakTags(Ip.scrubHTML(i,YES));if(!SC.empty(g)){var f=Ip.metricsForString(g,this.get("stringComputationStyles"),"inline-comment-textarea");
e.height=(c)?f.height+h*(10+Cv.InlineCommentView.LINE_HEIGHT*Cv.InlineCommentView.FONT_SIZE):f.height+h*10;
e.width=(f.width>50)?f.width*1.05+10*h:f.width+10*h}else{e.height=Cv.InlineCommentView.MIN_HEIGHT;
e.width=Cv.InlineCommentView.MIN_WIDTH}return e}.property("value","stringComputationStyles").cacheable(),isEditingDidChange:function(){if(this.get("isEditing")){if(this.parentView){this.setPath("parentView.parentView.isEditing",YES);
this.parentView.parentView.addClassName("editing")}Cv.commentController.setIfChanged("anInlineCommentIsBeingEdited",YES)
}else{if(this.parentView){this.setPath("parentView.parentView.isEditing",NO);this.parentView.parentView.removeClassName("editing")
}Cv.commentController.setIfChanged("anInlineCommentIsBeingEdited",NO)}}.observes("isEditing"),anInlineCommentIsBeingEditedBinding:"Cv.commentController.anInlineCommentIsBeingEdited",anInlineCommentIsBeingEditedDidChange:function(){if(!this.get("anInlineCommentIsBeingEdited")){this.fieldDidBlur()
}}.observes("anInlineCommentIsBeingEdited"),willLoseFirstResponder:function(e,c){var f=this.get("fieldValue");
if(f&&!SC.empty(Ip.stripTrailingWhitespace(f))){var g=this;this.invokeLater(function(){this.parentView.parentView.saveComment(g)
})}else{this.setPath("parentView.parentView.content.cantUndo",YES);this.parentView.parentView.deleteComment()
}arguments.callee.base.apply(this,arguments)}})});var a=this.createChildView(b);return a
}.property().cacheable(),createChildViews:function(){var c=[];if(this.get("isPmMark")){var b=this.get("creatorIdFlagView");
c.push(b)}else{if(!Cv.get("inStudentMode")&&!Cv.paperController.get("isReadonly")){var a=this.get("deletePane");
c.push(a)}}this.set("childViews",c)},creatorIdFlagView:function(){var b=SC.View.design({layout:function(){return{top:(-1*Cv.zoomController.getZoomedValue(Cv.InlineCommentView.CREATOR_ID_FONT_SIZE)-2),left:0,height:Cv.zoomController.getZoomedValue(Cv.InlineCommentView.FONT_SIZE+Cv.InlineCommentView.CREATOR_ID_FONT_SIZE+4),width:Cv.zoomController.getZoomedValue(25)}
}.property().cacheable(),zoomBinding:SC.Binding.oneWay("Cv.zoomController.zoom"),inlineCommentView:this,creatorIdBinding:".inlineCommentView.content.initials",isVisible:function(){var c=this.get("creatorId");
return !!c}.property("creatorId"),flagViewZoomedStyles:function(){var c="font-size: ";
c+=Cv.zoomController.getZoomedValue(Cv.InlineCommentView.CREATOR_ID_FONT_SIZE);c+="px; line-height: ";
c+=Cv.zoomController.getZoomedValue(Cv.InlineCommentView.CREATOR_ID_FONT_SIZE)+4;
c+="px;";return c}.property().cacheable(),render:function(c,e){arguments.callee.base.apply(this,arguments);
c.push('<div class="creator-id" style="');c.push(this.get("flagViewZoomedStyles"));
c.push(';">');c.push(this.getPath("parentView.content.initials"));c.push("</div>");
c.push('<div class="creator-id-flag-stem"></div>')}});var a=this.createChildView(b);
return a}.property().cacheable(),deletePane:function(){var b=SC.View.design({layout:{height:20,width:30,top:-22},classNames:"inline-comment-delete-pane",isVisible:NO,inlineCommentView:this,isHoveringBinding:".inlineCommentView.isHovering",isEditingBinding:".inlineCommentView.collapsedView.textFieldView.isEditing",collapsedViewIsVisibleBinding:".inlineCommentView.collapsedView.isVisible",collapsedViewLayoutBinding:".inlineCommentView.collapsedView.layout",render:function(c,e){arguments.callee.base.apply(this,arguments);
c.push('<div class="comment-delete-icon"></div>');c.push('<div class="comment-delete-pointer"></div>')
},changeVisibility:function(){if(this.get("isHovering")&&!this.get("isEditing")&&this.get("collapsedViewIsVisible")){if(!this.get("isVisible")){this.adjust("left",this.calculateLeftOffset());
this.set("isVisible",YES)}}else{this.setIfChanged("isVisible",NO)}}.observes("isHovering","isEditing","collapsedViewIsVisible"),calculateLeftOffset:function(){var c=this.get("collapsedViewLayout").width-this.get("layout").width;
return c/2},mouseDown:function(c){return YES},mouseUp:function(c){this.parentView.deleteComment();
return YES}});var a=this.createChildView(b);return a}.property().cacheable(),expandedView:null,closeEditViewWithSave:function(){this.getPath("collapsedView.textFieldView").willLoseFirstResponder();
this.showCollapsedView()},closeEditViewWithoutSave:function(){this.showCollapsedView()
},getRecord:function(){return this.get("content")},isEditingDidChange:function(){if(this.get("isEditing")){this.setPath("collapsedView.textFieldView.isEditing",YES);
this.get("content").exitErrorState();var b=this.getPath("content.text");if((b===null)||(b===undefined)){var a=this.getPath("collapsedView.textFieldView");
this.invokeLater(function(){a.becomeFirstResponder()},200)}}}.observes("isEditing"),saveComment:function(b){try{var c=b.get("value");
this.validateCommentText(c);var e=b.get("sanitizedValue");var f=this.get("content");
f.exitErrorState();f.set("text",e);f.commitRecord()}catch(a){this.showSaveError(a)
}},showSaveError:function(b){var e="_Cannot Save Comment".loc();var c=b;var a="_Continue Editing".loc();
var f={commentView:this,alertPaneDidDismiss:function(h,g){this.commentView.getPath("collapsedView.textFieldView").beginEditing();
this.commentView.invokeLater(function(){var j=this.get("collapsedView").$("textarea");
var i=j[0];var k;if(i.setSelectionRange){k=i.textLength;i.focus();i.setSelectionRange(k,k)
}else{if(i.createTextRange){k=j.val().length;range=i.createTextRange();range.collapse(true);
range.moveEnd("character",k);range.moveStart("character",k);range.select()}}},300)
}};SC.AlertPane.warn(e,c,null,a,null,null,f)},validateCommentText:function(a){if(a&&(a.length>Cv.Comment.TEXT_MAX_LENGTH)){throw"_The comment text must contain %@ characters or less.".loc(Cv.Comment.TEXT_MAX_LENGTH)
}},deleteComment:function(){var a=this.get("content");if(a.get("status")!=SC.Record.DESTROYED_CLEAN){this.set("isEditing",NO);
Cv.markSetController.destroyComment(a)}},isHoveringDidChange:function(){var a=this.get("isHovering");
if(a){this.addClassName("hover")}else{this.removeClassName("hover")}}.observes("isHovering"),mouseEntered:function(){if(!this.get("serviceIsActive")){return NO
}if(Cv.get("inStudentMode")||this.getPath("paper.isReadonly")){return NO}this.setIfChanged("isHovering",YES);
if(this._showCollapsedViewTimer){this._showCollapsedViewTimer.invalidate();this._showCollapsedViewTimer=null
}return NO},mouseExited:function(){if(!this._showCollapsedViewTimer){this._showCollapsedViewTimer=SC.Timer.schedule({target:this,action:function(){this._showCollapsedViewTimer=null;
this.set("isHovering",NO)},interval:200})}},prepForDrag:function(){var a=this.getPath("collapsedView.textFieldView").$input()[0];
if(!a){return}if(a.innerText){a.innerText=this.getPath("collapsedView.textFieldView.value")
}else{a.innerHTML=this.getPath("collapsedView.textFieldView.value")}},isDragHandle:function(c,a){var b=arguments.callee.base.apply(this,arguments);
if(b){this.prepForDrag()}return b}});Cv.InlineCommentView.FONT_SIZE=18;Cv.InlineCommentView.LINE_HEIGHT=1.3;
Cv.InlineCommentView.DRAG_HANDLE_OFFSET=6;Cv.InlineCommentView.STATUS_ICON_OFFSET=22;
Cv.InlineCommentView.PAGE_EDGE_BUFFER=10;Cv.InlineCommentView.MIN_HEIGHT=20;Cv.InlineCommentView.MIN_WIDTH=40;
Cv.InlineCommentView.CREATOR_ID_FONT_SIZE=12;Cv.InlineCommentView.CREATOR_ID_VIEW_WIDTH=20;
Cv.LazyLoadContainerView=SC.ContainerView.extend({createChildViews:function(){var a=this.get("lazyContentView");
if(a){var b=this.get("isVisibleInWindow");if(b){this.contentView=a;this.set("lazyContentView",null)
}}arguments.callee.base.apply(this,arguments)},_isVisibleInWindowDidChange:function(){var a=this.get("lazyContentView");
if(a){var b=this.get("isVisibleInWindow");if(b){a=this.createChildView(a);this.set("contentView",a);
this.set("lazyContentView",null)}}}.observes("isVisibleInWindow")});Cv.TruncatedLabelView=SC.LabelView.extend(SC.StaticLayout,{useStaticLayout:YES,tagName:"div",prependValue:"",maximumCharacters:10,isShowingFullText:NO,contentRequiresTruncation:function(){var a=this.getPath("value");
return a?a.length>this.get("maximumCharacters"):NO}.property("value").cacheable(),formatter:function(c,b){if(!b.get("isShowingFullText")&&b.get("contentRequiresTruncation")){b.appendChild(SC.LabelView.create(SC.StaticLayout,SCUI.ToolTip,{tagName:"a",classNames:"truncate-control",useStaticLayout:YES,value:"...",toolTip:"_read more".loc(),mouseDown:function(){this.parentView.set("isShowingFullText",YES)
}}));var a=c.substring(0,b.get("maximumCharacters"));while(a.substring(a.length-1,a.length)==" "){a=a.substring(0,a.length-1)
}return b.get("prependValue")+a}else{if(b.get("contentRequiresTruncation")){b.appendChild(SC.LabelView.create(SC.StaticLayout,{tagName:"a",classNames:"truncate-control",useStaticLayout:YES,value:"_read less".loc(),mouseDown:function(){this.parentView.set("isShowingFullText",NO)
}}))}}return b.get("prependValue")+c},___displayDidChange:function(){if(this.parentView.owner&&this.parentView.owner.updateHeight){this.parentView.owner.updateHeight()
}}.observes("isShowingFullText"),displayValue:function(){return arguments.callee.base.apply(this,arguments)
}.property("value","localize","formatter","escapeHTML","isShowingFullText").cacheable()});
sc_require("views/truncated_label");Cv.MarkListCommentView=SC.View.extend(SC.StaticLayout,SC.Control,Ip.AnchorTagActions,{useStaticLayout:YES,content:null,classNames:"mark-list-comment-view",isMousedOver:NO,isShowingFullText:NO,identifyMarkSource:NO,markTypeName:"_Comment".loc(),displayProperties:["isMousedOver","isShowingFullText"],showFullText:function(){this.set("isShowingFullText",YES)
},showTruncatedText:function(){this.set("isShowingFullText",NO)},heightDidChange:function(){this.get("parentView").updateHeight()
}.observes("isShowingFullText","showExpandedFeedback","showExpandedTemplateDescription"),render:function(b,e){var c=this.getPath("content.initials"),a=this.get("markTypeName");
b.push('<img class="icon" src="%@">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/marklist-comment.png"));
b.push('<span class="mark-title-view">%@</span>'.fmt(a));this.renderInitials(b,e);
this.renderAdditionalComment(b,e);this.renderIsHovering(b,e)},renderInitials:function(a,c){var b=this.getPath("content.initials");
if(b){a.push('<div class="initials">%@</div>'.fmt(b))}},renderAdditionalComment:function(b,h){var e=this.getPath("content.text")||"_(No Comment)".loc(),g=this.get("isShowingFullText"),a=e.length>200,c=g?e:e.substring(0,200),f=this.get("identifyMarkSource");
if(e){b.push('<div class="additional-comment">');if(f){b.push('<span class="source instructor">'+"_Instructor".loc()+':</span><span class="source reviewer">'+"_Reviewer".loc()+":</span>")
}b.push(c);if(a&&!g){b.push('<a class="more-content-text clickable truncate-control" title="%@">...</a>'.fmt("_read more".loc()))
}else{if(a){b.push('<a class="less-content-text clickable truncate-control">%@</a>'.fmt("_read less".loc()))
}}b.push("</div>")}},renderIsHovering:function(a,b){if(this.get("isMousedOver")){a.push('<a style="right: 10px; width: 100px; top: 10px; height: 25px; text-align: right; font-weight: normal;" class="sc-view sc-label-view show-on-paper-link sc-small-size">%@</a>'.fmt("_show on paper".loc()))
}},click:function(a){var b=SC.$(a.target);if(b.hasClass("show-on-paper-link")){this.showOnPaper()
}else{if(b.hasClass("less-content-text")){this.showTruncatedText()}else{if(b.hasClass("more-content-text")){this.showFullText()
}}}},mouseEntered:function(){this.set("isMousedOver",YES);return YES},mouseExited:function(){this.set("isMousedOver",NO);
return YES},showOnPaper:function(){var a=this.get("content");Cv.emphasizedMarkController.set("content",a)
}});sc_require("views/mark_list_comment");Cv.MarkListERaterMarkView=Cv.MarkListCommentView.extend({classNames:"mark-list-e-rater-mark-view",identifyMarkSource:YES,showExpandedFeedback:NO,displayProperties:["showExpandedFeedback"],showFullText:function(){this.set("showExpandedFeedback",YES);
arguments.callee.base.apply(this,arguments)},showTruncatedText:function(){this.set("showExpandedFeedback",NO);
arguments.callee.base.apply(this,arguments)},render:function(b,c){var a=this.getPath("content.name");
b.push('<img style="position:absolute; top: 10px; right: 5px" src="%@">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/ets/ets-marklist.png"));
b.push('<div class="mark-title-view">%@</div>'.fmt(a));this.renderFeedback(b,c);this.renderInitials(b,c);
if(this.getPath("content.text")){this.renderAdditionalComment(b,c)}this.renderIsHovering(b,c)
},renderFeedback:function(c,g){var f=this.getPath("content.feedback")||"",b=this.get("showExpandedFeedback"),a=f.length>100,e=b?f:Ip.stripTags(f).substring(0,100);
if(a&&!b){c.push('<span class="qm-description-view">%@</span>'.fmt(e));c.push('<a class="more-description-text clickable truncate-control" title="%@">...</a>'.fmt("_read more".loc()))
}else{if(a){c.push('<span class="qm-description-view">%@</span>'.fmt(e));c.push('<a class="less-description-text clickable truncate-control">%@</a>'.fmt("_read less".loc()))
}}},click:function(a){var b=SC.$(a.target);if(b.hasClass("less-description-text")){this.set("showExpandedFeedback",NO)
}else{if(b.hasClass("more-description-text")){this.set("showExpandedFeedback",YES)
}}return arguments.callee.base.apply(this,arguments)}});sc_require("views/mark_list_comment");
Cv.MarkListInlineCommentView=Cv.MarkListCommentView.extend({markTypeName:"_Text Comment".loc()});
sc_require("views/mark_list_comment");Cv.MarkListQuickMarkView=Cv.MarkListCommentView.extend({classNames:"mark-list-quickmark-view",identifyMarkSource:YES,showExpandedTemplateDescription:NO,displayProperties:["showExpandedTemplateDescription"],showFullText:function(){this.set("showExpandedTemplateDescription",YES);
arguments.callee.base.apply(this,arguments)},showTruncatedText:function(){this.set("showExpandedTemplateDescription",NO);
arguments.callee.base.apply(this,arguments)},render:function(b,e){var a=this.getPath("content.template.name"),c=this.getPath("content.template.description")||"";
b.push('<div class="mark-title-view">%@</div>'.fmt(a));this.renderTemplateDescription(b,e);
this.renderInitials(b,e);if(this.getPath("content.text")){this.renderAdditionalComment(b,e)
}this.renderIsHovering(b,e)},renderTemplateDescription:function(c,g){var f=this.getPath("content.template.description")||"",a=this.get("showExpandedTemplateDescription"),b=f.length>100,e=a?f:f.substring(0,100);
c.push('<span class="qm-description-view">%@</span>'.fmt(e));if(b&&!a){c.push('<a class="more-description-text clickable truncate-control" title="%@">...</a>'.fmt("_read more".loc()))
}else{if(b){c.push('<a class="less-description-text clickable truncate-control">%@</a>'.fmt("_read less".loc()))
}}},click:function(a){var b=SC.$(a.target);if(b.hasClass("less-description-text")){this.set("showExpandedTemplateDescription",NO)
}else{if(b.hasClass("more-description-text")){this.set("showExpandedTemplateDescription",YES)
}}return arguments.callee.base.apply(this,arguments)}});Cv.MarkListSidebarView=SC.View.design({childViews:"toolbarView noMarksMessageView scrollView".w(),classNames:["mark-list"],marksBinding:SC.Binding.oneWay("Cv.markSetController.marks"),hasMark:NO,_marksLengthDidChange:function(){var b=this.getPath("marks.length");
var a=!!b;this.set("hasMarks",a)}.observes("*marks.length"),toolbarView:SC.View.design({layout:{top:0,right:0,height:30,left:0},classNames:["sidebar-mini-menu"],childViews:"collapseAllButtonView pageCountView".w(),collapseAllButtonView:SC.ButtonView.design({layout:{top:0,left:0,width:40,height:30},classNames:["collapse-all-comments"],title:"_Collapse All".loc(),toolTip:"_Collapse All".loc(),controlSize:SC.SMALL_CONTROL_SIZE,action:function(){var a=Cv.markListController.get("treeItemChildren");
a.setEach("treeItemIsExpanded",NO)}}),pageCountView:SC.LabelView.design({layout:{top:5,height:25,left:120,right:0},pageCountBinding:"Cv.paperController.pageCount",value:function(){var b="";
var a=this.get("pageCount");if(a){if(a===1){b="_1 Page".loc()}else{b="_%@ Pages".loc(a)
}}return b}.property("pageCount").cacheable()})}),noMarksMessageView:SC.View.design({layout:{top:0,bottom:0,left:0,right:0},classNames:"gm-mark-list-no-marks-message-container",isVisibleBinding:SC.Binding.oneWay(".parentView.hasMarks").not(),render:function(a,b){a.push('<div class="gm-mark-list-no-marks-message">');
a.push("_This paper does not have any comments or QuickMarks.".loc());a.push("</div>")
}}),scrollView:SC.ScrollView.extend({isVisibleBinding:SC.Binding.oneWay(".parentView.hasMarks"),layout:{top:30,right:0,left:0},hasHorizontalScroller:NO,recalculateContentHeight:function(){this.contentView.updateHeight()
}.observes("isVerticalScrollerVisible"),contentView:SC.StackedView.design({layout:{top:0,right:0,bottom:0,left:0},useStaticLayout:YES,contentBinding:"Cv.markListController.arrangedObjects",contentExampleViewKey:"markListViewClass",contentValueKey:"text",createItemView:function(){var viewClass=arguments[0];
if(typeof viewClass=="string"){try{viewClass=eval(viewClass)}catch(e){console.error("Could not create itemView",e)
}}arguments[0]=viewClass;return arguments.callee.base.apply(this,arguments)},groupExampleView:SC.ListItemView.extend(SC.StaticLayout,{layout:{height:20},classNames:"sidebar-section-header",useStaticLayout:YES,contentUnreadCountKey:"count",expandDisclosureTitle:"_Expand All".loc(),init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("expandDisclosureTitle");this._scli_disclosureHtml={closed:'<img title="'+a+'" src="'+SC.BLANK_IMAGE_URL+'" class="disclosure button closed">'}
},renderCount:function(e,g){var b=this.getPath("content.isLoading");if(b){var a=14;
var f=14;var c="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif";
e.push('<div class="count"><img src="%@" width="%@" height="%@"></div>'.fmt(c,f,a))
}else{arguments.callee.base.apply(this,arguments)}}})})})});sc_require("views/mark_list_comment");
Cv.MarkListStrikethroughView=Cv.MarkListCommentView.extend({markTypeName:"_Strikethrough".loc(),renderAdditionalComment:function(a,b){}});
Cv.NetworkMonitorView=SC.View.design({layout:{centerY:0,width:125,height:20,centerX:0},classNames:["ajax-indicator"],childViews:"messageView spinnerView".w(),messageView:SC.LabelView.design({layout:{centerY:0,left:20,width:100,height:20},value:"_Loading...".loc()}).loc(Ip.getLocalizationHash("Cv.loadingLabel")),spinnerView:SC.View.design({layout:{centerY:0,left:0,height:16,width:16},render:function(c,g){var f=this.get("frame");
var e=f.width;var a=f.height;var b="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif";
c.push('<img src="%@" width="%@" height="%@">'.fmt(b,e,a))}}),inflightRequestsDidChanged:function(){var c=this.get("isVisible");
var b=this.getPath("messageView.value");var f=SC.Request.manager.get("inflight")||[];
var a=(f.length!==0);var e="_Loading...".loc();f.forEach(function(g){if(g.get("type")!="GET"){e="_Saving...".loc()
}});if((c!==a)||(b!==e)){SC.run(function(){this.set("isVisible",a);this.setPath("messageView.value",e)
},this)}}.observes("SC.Request.manager*inflight.[]")});sc_require("views/simple_list");
Cv.OriginalityTreeView=SC.View.extend({childViews:"matchGroupSelectorView scrollView loadingView noMatchingSourcesLabelView".w(),content:null,contentLength:null,contentLengthBinding:".content.length",contentLengthBindingDefault:SC.Binding.oneWay(),allowEmptyMatchGroup:NO,allowLanguageControl:NO,hasMatchingSources:function(){var b=this.getPath("content.length");
var a=(b>0);return a}.property("content","contentLength").cacheable(),selectedSources:function(){return[]
}.property().cacheable(),matchGroupSelectorView:Cv.OriginalityMatchGroupSelectorView.design({layout:{top:0,height:30,left:0,right:0}}),scrollView:SC.ScrollView.design({layout:{top:30,bottom:0,left:0,right:0},isVisibleBinding:".parentView.content",isVisibleBindingDefault:SC.Binding.oneWay().isNull().not(),contentView:SC.View.design({childViews:"languageControlView sourceListView".w(),updateHeight:function(){this.invokeOnce(this._updateHeight)
},_updateHeight:function(){var a=0;this.get("childViews").forEach(function(b){if(b.get("isVisible")){var c=b.get("frame");
a+=c.height}});this.adjust("height",a)},languageControlView:SC.View.design({layout:{top:0,height:100,left:0,right:0},childViews:"currentLanguageHeaderView languageToggleView matchesHeaderView".w(),allowLanguageControlBinding:".parentView.parentView.parentView.parentView.allowLanguageControl",isTranslatedMatchingApplicableBinding:"Cv.translatedMatchingController.isApplicable",isVisible:function(){var b=this.get("allowLanguageControl");
var c=this.get("isTranslatedMatchingApplicable");var a=(b&&c);return a}.property("allowLanguageControl","isTranslatedMatchingApplicable").cacheable(),currentLanguageHeaderView:SC.View.design({layout:{top:0,height:18,left:0,righgt:0},classNames:["sidebar-section-header"],childViews:["labelView"],labelView:SC.LabelView.design({layout:{top:0,left:10,right:0},translateLanguageBinding:"Cv.originalityController.translateLanguage",value:function(){var a;
if(Cv.translatedMatchingController.isNative()){a="_Currently viewing standard sources".loc()
}else{a="_Currently viewing English sources".loc()+" (Beta)"}return a}.property("translateLanguage").cacheable()})}),languageToggleView:SC.View.design({layout:{top:20,height:60,left:0,right:0},childViews:["buttonView"],buttonView:SC.ButtonView.design({layout:{centerX:0,top:15,width:260,height:26},target:"Cv.translatedMatchingController",action:"toggleTranslateLanguage",translateLanguageBinding:"Cv.originalityController.translateLanguage",displayProperties:["classNames"],title:function(){var a;
if(Cv.translatedMatchingController.isNative()){a="_View English Sources (Beta)".loc()
}else{a="_View Standard Sources".loc()}return a}.property("translateLanguage").cacheable(),toolTip:function(){var a;
if(Cv.translatedMatchingController.isNative()){a="_Switch to the Originality Report with sources for the English translation of the paper".loc()
}else{a="_Switch to the Originality Report with sources in the same language as the paper".loc()
}return a}.property("translateLanguage").cacheable(),icon:function(){var a;if(Cv.translatedMatchingController.isNative()){a="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/en.png"
}return a}.property("translateLanguage").cacheable(),translateLanguageDidChange:function(){var a=this.get("classNames")||[];
a=a.copy();if(a.indexOf("sc-view")===-1){a.push("sc-view")}if(a.indexOf("sc-button-view")===-1){a.push("sc-button-view")
}if(a.indexOf("panel-button")===-1){a.push("panel-button")}if(a.indexOf("large")===-1){a.push("large")
}if(!Cv.translatedMatchingController.isNative()){if(a.indexOf("primary")===-1){a.push("primary")
}}else{if(a.indexOf("primary")!==-1){a.removeObject("primary")}}this.set("classNames",a)
}.observes("translateLanguage")})}),matchesHeaderView:SC.View.design({layout:{top:80,height:18,left:0,right:0},classNames:["sidebar-section-header"],childViews:["labelView"],labelView:SC.LabelView.design({layout:{top:0,left:10,right:0},value:"_Matches".loc()})}),isVisibleDidChange:function(){this.get("parentView").updateHeight()
}.observes("isVisible")}),sourceListView:Cv.SimpleListView.design({layout:{top:0,bottom:0,left:0,right:0},contentBinding:".parentView.parentView.parentView.parentView.content",contentBindingDefault:SC.Binding.oneWay(),selectionBinding:"Cv.originalityDataTreeController.selection",selectedSourcesBinding:".parentView.parentView.parentView.parentView.selectedSources",expandedNodeBinding:"Cv.originalityDataTreeController.expandedNode",expandedNodeBindingDefault:SC.Binding.oneWay(),contentItemViewClassKey:"itemViewClass",itemViewHeight:function(){return this.get("SOURCE_TREE_NODE_ITEM_HEIGHT")
}.property("SOURCE_TREE_NODE_ITEM_HEIGHT").cacheable(),SOURCE_TREE_NODE_ITEM_HEIGHT:function(){return Cv.config.get("SOURCE_TREE_NODE_ITEM_HEIGHT")||60
}.property().cacheable(),SOURCE_ITEM_HEIGHT:function(){return Cv.config.get("SOURCE_ITEM_HEIGHT")||25
}.property().cacheable(),isTranslatedMatchingApplicableBinding:"Cv.translatedMatchingController.isApplicable",allowLanguageControlBinding:".parentView.parentView.parentView.parentView.allowLanguageControl",isTranslatedMatchingApplicableDidChange:function(){var a=this.get("allowLanguageControl");
if(a){var b=this.get("isTranslatedMatchingApplicable");if(b){this.adjust("top",100)
}else{this.adjust("top",0)}}}.observes("allowLanguageControl","isTranslatedMatchingApplicable"),frameDidChange:function(){this.get("parentView").updateHeight()
}.observes("frame"),contentPropertyDidChange:function(e,c,b){var a=this.getPath("parentView.parentView.parentView.parentView");
if(a.contentPropertyDidChange){a.contentPropertyDidChange.apply(a,arguments)}},_itemIndexAt:function(f){var g;
var e=this.get("expandedNode");g=arguments.callee.base.apply(this,arguments);if(e&&e.get("treeItemIsExpanded")){var i=this.get("content");
var l=this.get("SOURCE_ITEM_HEIGHT");var j=i.indexOf(e);var n=e.getPath("treeItemChildren.length");
var o=j+1;var k=o+(n-1);var h=this._itemViewTop(o);var m=this._itemViewTop(k);var c=m+l;
var b=this.getPath("content.length");if((h<f)&&(f<=c)){f=f-h;g=(f-(f%l))/l;g=g+o;
g=Math.min(g,b-1)}else{if(c<f){var a=this.get("SOURCE_TREE_NODE_ITEM_HEIGHT");f=f-c;
g=(f-(f%a))/a;g=g+k+1;g=Math.min(g,b-1)}}}return g},_itemViewTop:function(c){var n;
var b=this.get("expandedNode");if(!b||!b.get("treeItemIsExpanded")){n=arguments.callee.base.apply(this,arguments)
}else{var e=this.get("content");var f=e.indexOf(b);var k=b.getPath("treeItemChildren.length");
var l=f+1;var i=l+(k-1);var a=this.get("SOURCE_TREE_NODE_ITEM_HEIGHT");var h=this.get("SOURCE_ITEM_HEIGHT");
var j;var m;if(c<=l){n=arguments.callee.base.apply(this,arguments)}else{if(c<=i){j=((f+1)*a);
m=((c-l)*h);n=j+m}else{j=((f+1)*a);m=(k*h);var g=((c-(i+1))*a);n=j+m+g}}}return n
},_itemViewHeight:function(c){var a=this.get("SOURCE_TREE_NODE_ITEM_HEIGHT");var b=this.get("SOURCE_ITEM_HEIGHT");
var e=this.get("content").objectAt(c);if(e.isSource){a=b}return a}})}),matchGroupSelectorViewIsVisibleDidChange:function(){if(this.getPath("parentView.matchGroupSelectorView.isVisible")){this.adjust("top",30)
}else{this.adjust("top",0)}}.observes(".parentView.matchGroupSelectorView.isVisible")}),loadingView:Ip.LoadingView.design({layout:{top:0,bottom:0,left:0,right:0},showText:NO,isVisibleBinding:".parentView.content",isVisibleBindingDefault:SC.Binding.oneWay().isNull()}),noMatchingSourcesLabelView:SC.View.design({layout:{top:0,bottom:0,left:0,right:0},childViews:"labelView".w(),contentBinding:".parentView.content",contentBindingDefault:SC.Binding.oneWay(),hasMatchingSourcesBinding:".parentView.hasMatchingSources",hasMatchingSourcesBindingDefault:SC.Binding.oneWay(),isVisible:function(){var c=this.get("content");
var b=this.get("hasMatchingSources");var a=c&&!b;return a}.property("content","hasMatchingSources").cacheable(),labelView:SC.LabelView.design({layout:{centerY:0,height:35,left:0,right:0},textAlign:SC.ALIGN_CENTER,value:"_There are no matching sources for this report.".loc()}),isTranslatedMatchingApplicableBinding:"Cv.translatedMatchingController.isApplicable",allowLanguageControlBinding:".parentView.allowLanguageControl",isTranslatedMatchingApplicableDidChange:function(){var a=this.get("allowLanguageControl");
if(a){var b=this.get("isTranslatedMatchingApplicable");if(b){this.adjust("top",130)
}else{this.adjust("top",0)}}}.observes("allowLanguageControl","isTranslatedMatchingApplicable")})});
sc_require("views/originality_tree");Cv.OriginalityCumulativeSidebarView=SC.View.extend({classNames:["originality-cumulative-sidebar"],childViews:"labelView modeToggleView treeView frozenView".w(),frozenView:SC.View.design({layout:{top:0,right:0,bottom:0,left:0},backgroundColor:"#AEAEAE",classNames:"frozenView",isVisibleBinding:".parentView.parentView.isFrozen",render:function(b){if(this.get("parentView")&&this.getPath("parentView.layer")){var a=this.getPath("parentView.layer").cloneNode(true);
b.push(a.innerHTML.replace(/id="sc/gi,'id="__sc'))}}}),contentBinding:"Cv.originalityDataTreeController.cumulativeArrangedObjects",contentBindingDefault:SC.Binding.oneWay(),labelView:SC.LabelView.design({layout:{top:0,height:38,left:0,right:0},classNames:["or-sidebar-header"],value:"_Match Overview".loc()}),modeToggleView:SC.SegmentedView.design({layout:{top:8,right:0,height:30,width:70},classNames:["mode-toggle"],valueBinding:"Cv.originalityController.mode",allowsMultipleSelection:NO,allowsEmptySelection:NO,items:[{title:"_Match Overview".loc(),value:Cv.originalityController.CUMULATIVE_MODE,toolTip:"_Match Overview".loc()},{title:"_All Sources".loc(),value:Cv.originalityController.SINGLE_SOURCE_MODE,toolTip:"_All Sources".loc()}],itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip"}),treeView:Cv.OriginalityTreeView.design({layout:{top:38,bottom:0,left:0,right:0},displayProperties:["classNames"],contentBinding:".parentView.content",contentBindingDefault:SC.Binding.oneWay(),useMultiColorHighlightingBinding:"Cv.userController.useMultiColorHighlighting",useMultiColorHighlightingBindingDefault:SC.Binding.oneWay(),allowEmptyMatchGroup:YES,allowLanguageControl:YES,init:function(){arguments.callee.base.apply(this,arguments);
this.useMultiColorHighlightingDidChange()},useMultiColorHighlightingDidChange:function(){var a=this.get("useMultiColorHighlighting");
var e=this.get("classNames").concat();var c="or-multi-color-highlighting-on";var b="or-multi-color-highlighting-off";
if(a){if(e.indexOf(b)!==-1){e.removeObject(b)}if(e.indexOf(c)===-1){e.pushObject(c)
}}else{if(e.indexOf(c)!==-1){e.removeObject(c)}if(e.indexOf(b)===-1){e.pushObject(b)
}}this.set("classNames",e)}.observes("useMultiColorHighlighting")})});Cv.OriginalityExcludeSourceItemView=Cv.OriginalityNonGroupNodeItemView.extend({classNames:"originality-exclude-source".w(),showCheckbox:YES,contentTitleKey:"data.displayLinkText",contentTypeKey:"data.collection",mouseDown:function(c){var a=NO;
if(c.target.type&&(c.target.type.toLowerCase()=="checkbox")){a=YES;var b=c.target.checked;
var e=!b;this.setPath("content.treeItemIsChecked",e)}return a},contentPropertyDidChange:function(e,a){if(a==="treeItemIsChecked"){var c=this.getPath("parentView.selectedSources");
if(c){var f=this.getPath("content.treeItemIsChecked");var b=this.getPath("content.data");
if(f){if(c.indexOf(b)===-1){c.pushObject(b)}}else{if(c.indexOf(b)!==-1){c.removeObject(b)
}}}}}});Cv.OriginalityExclusionListSidebarView=SC.View.extend({classNames:["originality-exclusion-list-sidebar"],excludeSourcesBinding:"Cv.excludeSourcesController.content",excludeSourcesBindingDefault:SC.Binding.oneWay(),didRestoreSourceBinding:"Cv.excludeSourcesController.didRestoreSource",selectedSources:function(){return[]
}.property().cacheable(),childViews:"headerView bodyView emptyListView loadingView toolbarView".w(),headerView:SC.View.design({layout:{left:0,right:0,top:0,height:38},childViews:"labelView".w(),backgroundColor:"#E06165",labelView:SC.LabelView.design({layout:{top:0,height:38,left:0,right:0},tagName:"h2",classNames:["or-sidebar-header"],value:"_Excluded Sources".loc()})}),bodyView:SC.ScrollView.design({layout:{top:38,bottom:60,left:0,right:0},excludeSourcesBinding:".parentView.excludeSources",excludeSourcesBindingDefault:SC.Binding.oneWay(),isVisible:function(){var b=this.get("excludeSources");
var a=!!b&&b.length>0;return a}.property("excludeSources").cacheable(),contentView:SC.ListView.design({isSelectable:NO,contentBinding:".parentView.parentView.parentView.excludeSources",contentBindingDefault:SC.Binding.oneWay(),selectedSourcesBinding:".parentView.parentView.parentView.selectedSources",rowHeight:function(){return Cv.config.get("SOURCE_TREE_NODE_ITEM_HEIGHT")||60
}.property().cacheable(),exampleView:Cv.OriginalityExcludeSourceItemView})}),emptyListView:SC.View.design({layout:{top:38,bottom:60,left:0,right:0},excludeSourcesBinding:".parentView.excludeSources",childViews:"statusView".w(),isVisible:function(){var a=this.get("excludeSources");
return !(!!a&&a.length>0)}.property("excludeSources").cacheable(),statusView:SC.ContainerView.design({classNames:["sidebar-box"],layout:{left:10,right:10,top:20,height:250},contentView:SC.LabelView.design({layout:{left:10,right:10,top:15,bottom:15},tagName:"div",render:function(a,b){a.push("_No sources have been excluded for this report.".loc())
}})})}),loadingView:Ip.LoadingView.design({layout:{top:38,bottom:60,left:0,right:0},showText:NO,excludeSourcesBinding:".parentView.excludeSources",isVisible:function(){var a=this.get("excludeSources");
return !a}.property("excludeSources").cacheable(),isVisibleBindingDefault:SC.Binding.oneWay().bool().not()}),toolbarView:SC.View.design({layout:{bottom:0,height:60,left:0,right:0},childViews:"restoreSelectedExcludeSourcesButtonView restoreAllExcludeSourcesButtonView".w(),classNames:"panel-button-set",restoreSelectedExcludeSourcesButtonView:SC.ButtonView.design({layout:{top:10,height:24,left:10,width:135},classNames:["panel-button","primary"],sourceCountBinding:".parentView.parentView.selectedSources.length",sourceCountBindingDefault:SC.Binding.oneWay(),isEnabled:function(){var a=(this.get("sourceCount")>0);
return a}.property("sourceCount").cacheable(),title:function(){var a=this.get("sourceCount");
var b="_Restore (%@)".loc(a);return b}.property("sourceCount").cacheable(),targetBinding:".parentView.parentView",targetBindingDefault:SC.Binding.oneWay(),action:"restoreSelectedExcludeSources"}),restoreAllExcludeSourcesButtonView:SC.ButtonView.design({layout:{top:10,height:24,right:10,width:135},classNames:["panel-button","primary"],sourcesBinding:".parentView.parentView.excludeSources",sourcesBindingDefault:SC.Binding.oneWay(),_blah:function(){var a=this.getPath("sources.length");
this.set("sourceCount",a)}.observes("*sources.length"),sourceCount:0,isEnabled:function(){var a=(this.get("sourceCount")>0);
return a}.property("sourceCount").cacheable(),title:function(){var a=this.get("sourceCount");
var b="_Restore All".loc();return b}.property("sourceCount").cacheable(),targetBinding:".parentView.parentView",targetBindingDefault:SC.Binding.oneWay(),action:"restoreAllExcludeSources"})}),_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){var e=Cv.originalityController.get("mode");
if(e!==Cv.originalityController.EXCLUSION_MODE){var b=this.get("selectedSources");
var c=this.get("excludeSources");if(c&&b){var a=c.filter(function(f){var g=f.get("treeItemIsChecked");
return g});b.set("length",0);a.forEach(function(f){var g=f.data;b.push(g)})}Cv.originalityController.set("mode",Cv.originalityController.EXCLUSION_MODE)
}}}.observes("isVisibleInWindow","excludeSources"),restoreSelectedExcludeSources:function(){var b=this.get("selectedSources");
var a=b.getEach("id");this._restoreSources(a);b.set("length",0)},restoreAllExcludeSources:function(){var a=Cv.excludeSourcesController.getPath("excludeList.sources");
var b=a.getEach("id");this._restoreSources(b);this.setPath("selectedSources.length",0)
},_isWaitingForExcludeListToCommit:NO,excludeListStatusBinding:"Cv.excludeListController.status",_restoreSources:function(e){var c=Cv.excludeSourcesController.getPath("excludeList.sources");
var a=c.filter(function(i,f){var h=i.get("id");var g=(e.indexOf(h)===-1);return g
});this._isWaitingForExcludeListToCommit=YES;var b=Cv.excludeListController.get("content");
b.set("sourcesData",a);b.commitRecord();Cv.originalityController.unloadData()},excludeListStatusDidChange:function(){if(this._isWaitingForExcludeListToCommit){var a=this.get("excludeListStatus");
if(a&SC.Record.READY){this._isWaitingForExcludeListToCommit=NO;this.set("didRestoreSource",YES)
}}}.observes("excludeListStatus")});Cv.OriginalityFilterSettingsSidebarView=SC.View.extend({classNames:["originality-filter-settings-sidebar"],childViews:"headerView bodyView loadingView".w(),headerView:SC.View.design({layout:{left:0,right:0,top:0,height:38},childViews:"labelView".w(),backgroundColor:"#E06165",labelView:SC.LabelView.design({layout:{top:0,height:38,left:0,right:0},tagName:"h2",classNames:["or-sidebar-header"],value:"_Filters & Settings".loc()})}),bodyView:SC.ScrollView.design({layout:{top:38,bottom:0,left:0,right:0},isVisibleBinding:"Cv.originalityOptionsController.content",isVisibleBindingDefault:SC.Binding.oneWay().bool(),contentView:SC.View.design({childViews:function(a,b){if(b===undefined){b="generalGroupView optionalSettingsGroupView applyChangesView loadingView".w();
if(!Cv.get("inStudentMode")){b.push("refreshReportView")}}return b}.property().cacheable(),loadingView:Ip.LoadingView.design({isVisibleBinding:"Cv.originalityOptionsController.isBusy"}),saveOrCancelView:SC.View.design({layout:{centerX:0,bottom:50,width:300,height:75},childViews:"submitChangesButton cancelChangesButton".w(),submitChangesButton:SC.ButtonView.design({layout:{left:0,bottom:0,top:0,width:145},title:"Submit",isVisibleBinding:"Cv.originalityOptionsController.isDirty",action:"commitOptionChanges",target:"Cv.originalityOptionsController"}),cancelChangesButton:SC.ButtonView.design({layout:{right:0,bottom:0,top:0,width:145},title:"Submit",isVisibleBinding:"Cv.originalityOptionsController.isDirty",action:"discardOptionChanges",target:"Cv.originalityOptionsController"})}),generalGroupView:SC.View.design({layout:{top:0,height:230,left:0,right:0},childViews:"labelView quotesView bibloView smallMatchesView".w(),labelView:SC.LabelView.design({layout:{top:0,height:18,left:0,right:0},classNames:"sidebar-section-label",value:"_Filters".loc()}),quotesView:SC.View.design({layout:{top:18,height:30,left:0,right:0},childViews:"quotesLabelView quotesButtonView".w(),quotesLabelView:SC.LabelView.design({layout:{top:5,height:25,left:10,width:230},displayProperties:["classNames"],controlSize:SC.LARGE_CONTROL_SIZE,value:"_Exclude Quotes".loc(),isEnabledBinding:SC.Binding.oneWay().bool("Cv.originalityOptionsController.supportsExcludeQuotes"),isEnabledDidChange:function(){this.invokeOnce(this._updateClassNames)
}.observes("isEnabled"),_updateClassNames:function(){var a=this.get("isEnabled");
var b=this.get("classNames")||[];b=b.toArray();if(a&&(b.indexOf("disabled")!==-1)){b.removeObject("disabled");
this.set("classNames",b)}else{if(!a&&(b.indexOf("disabled")===-1)){b.pushObject("disabled");
this.set("classNames",b)}}}}),quotesButtonView:SC.CheckboxView.design({layout:{top:12,height:18,right:20,width:20},classNames:["exclude-quotes-checkbox"],valueBinding:"Cv.originalityOptionsController.excludeQuotes",isEnabledBinding:"Cv.originalityOptionsController.supportsExcludeQuotes"})}),bibloView:SC.View.design({layout:{top:55,height:30,left:0,right:0},childViews:"biblioLabelView biblioButtonView".w(),biblioLabelView:SC.LabelView.design({layout:{top:5,height:25,left:10,width:230},displayProperties:["classNames"],controlSize:SC.LARGE_CONTROL_SIZE,value:"_Exclude Bibliography".loc(),isEnabledBinding:SC.Binding.oneWay().bool("Cv.originalityOptionsController.supportsExcludeBibliography"),isEnabledDidChange:function(){this.invokeOnce(this._updateClassNames)
}.observes("isEnabled"),_updateClassNames:function(){var a=this.get("isEnabled");
var b=this.get("classNames")||[];b=b.toArray();if(a&&(b.indexOf("disabled")!==-1)){b.removeObject("disabled");
this.set("classNames",b)}else{if(!a&&(b.indexOf("disabled")===-1)){b.pushObject("disabled");
this.set("classNames",b)}}this.displayDidChange()}}),biblioButtonView:SC.CheckboxView.design({layout:{top:12,height:18,right:20,width:20},classNames:["exclude-biblio-checkbox"],isEnabledBinding:"Cv.originalityOptionsController.supportsExcludeBibliography",valueBinding:"Cv.originalityOptionsController.excludeBibliography"})}),smallMatchesView:SC.View.design({layout:{top:92,bottom:0,left:10,right:0},childViews:"smallMatchesLabelView smallMatchesRadioView limitByWordsView limitByPercentView".w(),smallMatchesLabelView:SC.LabelView.design({layout:{top:5,height:25,left:0,right:-1},displayProperties:["classNames"],controlSize:SC.LARGE_CONTROL_SIZE,value:"_Exclude matches that are less than:".loc(),isEnabledBinding:SC.Binding.oneWay().bool("Cv.originalityOptionsController.supportsSmallMatchesExclusion"),isEnabledDidChange:function(){this.invokeOnce(this._updateClassNames)
}.observes("isEnabled"),_updateClassNames:function(){var a=this.get("isEnabled");
var b=this.get("classNames")||[];b=b.toArray();if(a&&(b.indexOf("disabled")!==-1)){b.removeObject("disabled");
this.set("classNames",b)}else{if(!a&&(b.indexOf("disabled")===-1)){b.pushObject("disabled");
this.set("classNames",b)}}}}),smallMatchesRadioView:Ip.RadioView.design({layout:{top:35,bottom:0,left:0,right:0},classNames:["small-matches-radio"],itemClassNameKey:"className",items:[{value:Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT,title:"_words".loc(),className:"radio-offset-label"},{value:Cv.OriginalityOptions.LIMIT_BY_PERCENT,title:"%",className:"radio-offset-label percentage"},{value:Cv.OriginalityOptions.UNLIMITED,title:"_Don't exclude by size".loc()}],render:function(){arguments.callee.base.apply(this,arguments)
},valueBinding:"Cv.originalityOptionsController.limitType",itemTitleKey:"title",itemValueKey:"value",layoutDirection:SC.LAYOUT_VERTICAL,isEnabledBinding:"Cv.originalityOptionsController.supportsSmallMatchesExclusion"}),limitByWordsView:SC.TextFieldView.design({layout:{top:34,height:18,left:30,width:30},valueBinding:"Cv.originalityOptionsController.smallMatchWordCount",isEnabledBinding:"Cv.originalityOptionsController.supportsSmallMatchesExclusion",limitTypeBinding:"Cv.originalityOptionsController.limitType",applyImmediately:NO,didBecomeFirstResponder:function(a){this.set("limitType",Cv.OriginalityOptions.LIMIT_BY_WORD_COUNT)
},willLoseFirstResponder:function(a){var b=this.get("value");if(!b){this.set("value",0)
}}}),limitByPercentView:SC.TextFieldView.design({layout:{top:54,height:18,left:30,width:30},valueBinding:"Cv.originalityOptionsController.smallMatchPercent",isEnabledBinding:"Cv.originalityOptionsController.supportsSmallMatchesExclusion",limitTypeBinding:"Cv.originalityOptionsController.limitType",applyImmediately:NO,didBecomeFirstResponder:function(a){this.set("limitType",Cv.OriginalityOptions.LIMIT_BY_PERCENT)
},willLoseFirstResponder:function(a){var b=this.get("value");if(!b){this.set("value",0)
}}}).loc(Ip.getLocalizationHash("Cv.limitByPercentView"))})}),optionalSettingsGroupView:SC.View.design({layout:{top:230,height:80,left:0,right:0},childViews:"labelView multiColorHighlightView".w(),labelView:SC.LabelView.design({layout:{top:0,height:18,left:0,right:0},classNames:"sidebar-section-label",value:"_Optional Settings".loc()}),multiColorHighlightView:SC.View.design({layout:{top:18,height:50,left:0,right:0},childViews:"multiColorHighlightLabelView multiColorHighlightButtonView".w(),multiColorHighlightLabelView:SC.LabelView.design({layout:{top:5,height:25,left:10,width:230},controlSize:SC.LARGE_CONTROL_SIZE,value:"_Multi-color Highlighting".loc()}),multiColorHighlightButtonView:SC.CheckboxView.design({layout:{top:12,height:18,right:20,width:20},valueBinding:"Cv.originalityOptionsController.useMultiColorHighlighting"})})}),applyChangesView:SC.View.design({layout:{bottom:0,height:60,left:0,right:0},classNames:"panel-button-set",childViews:"applyChangesButtonView".w(),applyChangesButtonView:SC.ButtonView.design({layout:{top:12,height:24,left:10,width:130},icon:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/bt-icon-filter.png",title:"_Apply Changes".loc(),classNames:["panel-button","primary"],isEnabledBinding:"Cv.originalityOptionsController.isDirty",action:function(){var a=((Cv.originalityOptionsController.get("status")&SC.Record.DIRTY)!==0)&&(Cv.originalityOptionsController.get("useMultiColorHighlighting")===Cv.userController.get("useMultiColorHighlighting"));
Cv.originalityOptionsController.commitOptionChanges(a)}})}),refreshReportView:SC.View.design({layout:{bottom:0,height:60,left:150,right:0},childViews:"refreshReportButtonView".w(),refreshReportButtonView:SC.ButtonView.design({layout:{top:12,height:24,left:0,width:130},icon:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/bt-icon-reload.png",title:"_New Report".loc(),classNames:["panel-button"],target:function(){return this
}.property().cacheable(),toolTip:"_A new originality report will be produced".loc(),action:"confirmRefresh",confirmRefresh:function(){var c={editingRegistry:this,alertPaneDidDismiss:function(f,e){switch(e){case SC.BUTTON1_STATUS:Cv.originalityController.regenerateData();
break;default:break}}};var b="_Refreshing report".loc();var a="_Refreshing this report will create a completely new report based on our most recent database content. We only recommend refreshing your report if you believe there is very recent internet or database content that was not searched when this report was first generated. This report will be unavailable while it is being refreshed.\n\nDo you want to continue?".loc();
SC.AlertPane.warn(b,a,null,"_OK".loc(),"_Cancel".loc(),null,c)}})})})}),loadingView:Ip.LoadingView.design({layout:{top:38,bottom:0,left:0,right:0},showText:NO,isVisibleBinding:".parentView.bodyView.isVisible",isVisibleBindingDefault:SC.Binding.oneWay().bool().not()}),_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){var a=Cv.originalityController.get("mode");
if(a!==Cv.originalityController.FILTER_SETTINGS_MODE){Cv.originalityController.set("mode",Cv.originalityController.FILTER_SETTINGS_MODE)
}}}.observes("isVisibleInWindow")});Cv.OriginalityFullSourceItemView=Cv.OriginalityNonGroupNodeItemView.extend({classNames:"originality-full-source-item-view",contentTitleKey:"displayLinkText",contentTypeKey:"simpleCollectionDisplayText",contentPercentKey:"percent",showCheckboxOrBullet:NO,getTitleLink:function(){var a=this.getPath("content.linkUrl");
return a}});sc_require("views/originality_match_group_selector");Cv.OriginalityFullSourceSidebarView=SC.View.extend({layout:{top:0,bottom:0,left:0,right:0},classNames:"or-full-source-view-sidebar",childViews:"titleView loadingView bodyView".w(),titleView:SC.View.design({layout:{top:0,height:38,left:0,right:0},childViews:"labelView exitButtonView".w(),labelView:SC.LabelView.design({layout:{top:0,height:38,centerX:0,width:200},classNames:["sidebar-header"],value:"_Full Source Text".loc(),textAlign:SC.ALIGN_CENTER}),exitButtonView:SC.ButtonView.design({layout:{top:6,height:30,right:6,width:30},titleMinWidth:null,classNames:"panel-button",previousModeBinding:SC.Binding.oneWay("Cv.originalityFullSourceModeController.previousMode"),toolTip:function(){var b="";
var a=this.get("previousMode");var c;if(a===Cv.originalityController.CUMULATIVE_MODE){c="_Match Overview".loc()
}else{if(a===Cv.originalityController.SINGLE_SOURCE_MODE){c="_All Sources".loc()}else{if(a===Cv.originalityController.RESEARCH_MODE){c="_Match Breakdown".loc()
}}}if(c){b="_Close and return to %@".loc(c)}return b}.property("previousMode").cacheable(),target:Cv.originalityFullSourceModeController,action:"exitFullSourceMode",displayProperties:["toolTip"]})}),bodyView:SC.View.design({childViews:"sourceView matchGroupSelectorView textView".w(),layout:{top:38,bottom:30,left:8,right:8},isVisibleBinding:SC.Binding.oneWay("Cv.originalityFullSourceModeController.sourceDataIsLoading").not(),sourceView:Cv.OriginalityFullSourceItemView.design({layout:{top:0,height:60,left:0,right:0},contentBinding:SC.Binding.oneWay("Cv.originalityFullSourceDataController.source")}),matchGroupSelectorView:Cv.OriginalityMatchGroupSelectorView.design({layout:{top:60,height:30,left:0,right:0}}),textView:SC.ScrollView.design({layout:{top:90,bottom:0,left:0,right:0},contentView:SC.LabelView.design(SC.StaticLayout,{classNames:"source-text-label",layout:{minHeight:100},useStaticLayout:YES,valueBinding:SC.Binding.oneWay("Cv.originalityFullSourceDataController.displayText"),escapeHTML:NO,didCreateLayer:function(){var a=this.getPath("parentView.parentView");
a.scrollToSelectedMatchGroup()}}),modeBinding:SC.Binding.oneWay("Cv.originalityController.mode"),selectedMatchGroupBinding:SC.Binding.oneWay("Cv.originalityMatchGroupController.content"),fullSourceDataBinding:SC.Binding.oneWay("Cv.originalityFullSourceDataController.content"),scrollToSelectedMatchGroup:function(){var f=this.get("selectedMatchGroup");
var h=this.get("mode");var e=this.get("fullSourceData");if(f&&(h===Cv.originalityController.FULL_SOURCE_MODE)&&e){var b=f.get("tag");
var a=e.getGlimpseTextElementId(b,0);var c=document.getElementById(a);var g=c.offsetTop-10;
if(g<0){g=0}this._scrollContainerTo(g)}}.observes("mode","selectedMatchGroup"),_scrollContainerTo:function(a){this.invokeLater(function(){this.scrollTo(undefined,a);
this.invokeLater(this.adjustElementScroll,100)},100)}})}),loadingView:Ip.LoadingView.design({layout:{top:0,bottom:0,left:0,right:0},isVisibleBinding:SC.Binding.oneWay("Cv.originalityFullSourceModeController.sourceDataIsLoading"),loadingText:"_Loading...".loc()})});
Cv.ResizableView=SC.View.extend({isResizing:NO,canResizeWidth:NO,canResizeHeight:NO,mouseDown:function(a){if(this.get("canResizeHeight")||this.get("canResizeWidth")){if(this.isResizeHandle(a.target,"resize")){this._startX=a.pageX;
this._startY=a.pageY;this._startWidth=this.get("frame").width;this._startHeight=this.get("frame").height;
this.set("isResizing",YES);return YES}}return NO},mouseDragged:function(a){var e=NO;
if(this.get("isResizing")){if(this.get("canResizeWidth")){var c=a.pageX-this._startX;
this.adjust("width",this._startWidth+c);e=YES}if(this.get("canResizeHeight")){var b=a.pageY-this._startY;
this.adjust("height",this._startHeight+b);e=YES}}return e},mouseUp:function(a){if(this.get("isResizing")){this.set("isResizing",NO);
return YES}},isResizeHandle:function(b,a){return(b&&b.className)?(b.className.indexOf(a+"-handle")>=0)?YES:(b.parentNode===this.get("layer"))?NO:this.isResizeHandle(b.parentNode,a):NO
}});Cv.ResizableView.HANDLE_CLASSNAME="resize-handle";Cv.ResizableView.WIDTH_HANDLE_IMAGE="https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/draggable.png";
sc_require("views/resizable");Cv.OriginalityGlimpseView=Cv.ResizableView.extend({layout:{top:0,left:0,height:180,width:600},zoomController:null,acceptsFirstResponder:YES,classNames:"originality-glimpse-view".w(),displayProperties:"classNames matchGroup displayText glimpseIsLoaded glimpseHasLoadingError isAboveHighlight linerStyle".w(),isDragging:NO,isVisible:NO,isTextSelectable:YES,paperPage:null,glyphPage:null,mouseWheel:function(b){var a=this.$(".text-container")[0];
if(a){a.scrollLeft+=b.wheelDeltaX;a.scrollTop+=b.wheelDeltaY}return YES},matchGroupBinding:"Cv.originalityMatchGroupController.content",matchGroupBindingDefault:SC.Binding.oneWay().transform(function(c,f){var e=null;
var b=f._toRoot;if(c){var a=c.getPath("matchSegments.firstObject");if(a&&a.startsOnPage(b.getPath("parentView.pageIndex"))){e=c
}}return e}),glimpseIsLoadedBinding:"Cv.originalityGlimpseController.isLoaded",glimpseIsLoadedBindingDefault:SC.Binding.oneWay(),displayTextBinding:"Cv.originalityGlimpseController.displayText",displayTextBindingDefault:SC.Binding.oneWay(),glimpseHasLoadingErrorBinding:"Cv.originalityGlimpseController.hasLoadingError",glimpseHasLoadingErrorBindingDefault:SC.Binding.oneWay(),glimpseNodeContextWordsBinding:"Cv.originalityGlimpseController.nodeContextWords",glimpseNodeContextWordsBindingDefault:SC.Binding.oneWay(),useMultiColorHighlightingBinding:"Cv.userController.useMultiColorHighlighting",useMultiColorHighlightingBindingDefault:SC.Binding.oneWay(),isAboveHighlight:YES,init:function(){arguments.callee.base.apply(this,arguments);
this._useMultiColorHighlightingDidChange()},isResizingDidChange:function(){if(this.get("isResizing")){this.setIfChanged("linerLocked",YES)
}}.observes("isResizing"),linerLocked:NO,linerStyle:function(){if(this.get("linerLocked")){if(this.get("isAboveHighlight")){return["top:",SC.CoreQuery.find(".glimpse-liner",this.get("layer"))[0].offsetTop,"px;"].join("")
}else{return["bottom:",(this.get("layer").offsetHeight-SC.CoreQuery.find(".glimpse-liner",this.get("layer"))[0].offsetHeight),"px;"].join("")
}}}.property("linerLocked","isAboveHighlight").cacheable(),displayTextDidChange:function(){this.setIfChanged("linerLocked",NO);
this.adjust("width",600);this.adjust("height",180)}.observes("displayText","hasLoadingError"),render:function(c,a){var o=[];
var g;var q=this.get("isAboveHighlight");var e=this.get("glyphPage");var l=0;var m="";
if(e!=null){l=e.getPath("firstLine.isRightToLeft");if(l){m=" rtl"}}if(q){g="above-highlight"
}else{g="below-highlight"}if(this.get("linerLocked")){g+=" resized"}o.push('<div class="glimpse-liner ');
o.push(g);o.push('" style="');o.push(this.get("linerStyle"));o.push('">');o.push('<img class="'+Cv.ResizableView.HANDLE_CLASSNAME+'" src="');
o.push("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/resize_handle.gif");
o.push('" />');var p;var f=this.getPath("matchGroup.instanceMode");if(f){p=this.getPath("matchGroup.source.displayLinkText")
}else{p=this.getPath("matchGroup.sourceTreeNode.displayLinkText")}o.push('<div class="header');
if(Cv.translatedMatchingController.isEnglish()){o.push(" translated-report")}o.push('">');
o.push('<div class="translated-report-indicator">');o.push("EN");o.push("</div>");
o.push('<div class="source-tools">');var n=this.getPath("matchGroup.sourceTreeNode.simpleCollectionDisplayText");
var k=this.getPath("matchGroup.source.linkUrl");o.push('<div class="source-link">');
o.push(n);o.push("</div>");o.push('<img class="close-button" src="');o.push("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/icon_close.png");
o.push('" alt="Close Glimpse" title="');o.push("_Close Glimpse".loc());o.push('" />');
var i=SC.none(this.get("glimpseNodeContextWords"))?YES:this.get("glimpseNodeContextWords")==-1;
if(!Cv.originalityGlimpseController.get("notAvailable")&&i){o.push('<div class="view-full-source"><a class="view-full-source-link clickable">');
o.push("_Full Source View".loc());o.push("</a></div>")}o.push("</div>");o.push('<div class="source-title">');
if(k){o.push('<a class="title-link clickable ');o.push('ellipsis" title="');if(!Cv.originalityGlimpseController.get("sharedAvailable")){o.push("_Open page in new window".loc())
}o.push('">');o.push(p);o.push("</a>")}else{o.push('<div class="title-link ellipsis">');
o.push(p);o.push("</div>")}o.push("</div>");o.push("</div>");var s;var b=this.get("glimpseIsLoaded");
var h=this.get("glimpseHasLoadingError");if(b){s=this.get("displayText");o.push('<div class="text-container">');
o.push('<div class="text'+m+'">');o.push(s);o.push("</div>");o.push("</div>")}else{if(h){s="_There was an error loading the text.".loc();
o.push('<div class="text-container">');o.push('<div class="text error">');o.push(s);
o.push("</div>");o.push("</div>")}else{o.push('<div class="loading-image-container">');
o.push('<img class="loading-image" src="');o.push("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/loading_spinner_32x32.gif");
o.push('" />');o.push("</div>")}}o.push("</div>");var j=o.join("");c.push(j)},_useMultiColorHighlightingDidChange:function(){var a=this.get("useMultiColorHighlighting");
var e=this.get("classNames").concat();var c="or-multi-color-highlighting-on";var b="or-multi-color-highlighting-off";
if(a){if(e.indexOf(b)!==-1){e.removeObject(b)}if(e.indexOf(c)===-1){e.pushObject(c)
}}else{if(e.indexOf(c)!==-1){e.removeObject(c)}if(e.indexOf(b)===-1){e.pushObject(b)
}}this.set("classNames",e)}.observes("useMultiColorHighlighting"),_matchGroupDidChange:function(){if(!this.get("glyphPage")){this.glyphPageBinding=this.bind("glyphPage",SC.Binding.oneWay(".paperPage.glyphPage"));
return}var c=this.get("matchGroup");if(c&&c.get("hasGlimpses")){var a=this.getPath("parentView.pageIndex");
var b=c.getPath("matchSegments.firstObject");if(b&&b.startsOnPage(a)){this.invokeOnce(function(){this.updateClassNames();
this.alignToMatchGroup();this.set("isVisible",YES);this.scrollToVisibleLast()},this)
}}else{this.set("isVisible",NO)}}.observes("matchGroup","glyphPage"),alignToMatchGroup:function(){var c=this.get("matchGroup");
if(c){var b=this.get("zoomController");var h=this.getPath("parentView.pageIndex");
var k=c.get("matchSegments");var j=k.find(function(t){var s=t.startsOnPage(h);return s
},this);var e=600;var q=180;var n=j.getPath("startGlyph.left");var g=n+Cv.HighlightView.LABEL_OFFSET_X;
g=b.getZoomedValue(g);var p=g+e;var f=this.getPath("paperPage.width");var i=b.getZoomedValue(f);
if(g+e>i){g=i-e}if(g<0){g=0}var m=j.getPath("startGlyph.top");var o=m+Cv.HighlightView.LABEL_OFFSET_Y-8;
o=b.getZoomedValue(o);o=o-q;if((o<0)&&(h===0)){var a=j.getPath("startGlyph.bottom");
o=a+2;o=b.getZoomedValue(o);this.set("isAboveHighlight",NO)}else{this.set("isAboveHighlight",YES)
}var l={left:g,top:o};this.adjust(l)}},updateClassNames:function(){var c=this.get("classNames").concat();
if(this._previousMatchGroupColorClass){c.removeObject(this._previousMatchGroupColorClass);
this._previousMatchGroupColorClass=null}var a=this.getPath("matchGroup.groupNode.colorIndex");
if(a||(a===0)){var b="group-node-color-%@".fmt(a);if(c.indexOf(b)===-1){c.pushObject(b)
}this._previousMatchGroupColorClass=b}this.set("classNames",c)},willLoseFirstResponder:function(a){this.invokeLast(function(){var f=this.get("matchGroup");
var e=YES;var g=Cv.originalityMatchGroupController.get("content");if(f===g){var b=this.getPath("pane.firstResponder.content");
var h=Cv.originalityDataTreeController.get("arrangedObjects");if(b===h){var c=Cv.originalityDataTreeController.getPath("selectedNode.data.matchGroups");
if(c&&(c.indexOf(f)!==-1)){e=NO}}if(e){this.set("isVisible",NO)}else{this.becomeFirstResponder()
}}})},_isVisibleDidChange:function(){var a=this.get("isVisible");var b=this.get("isVisibleInWindow");
var c=a&&b;if(c&&!this._isReallyVisible){this.invokeOnce(this.scrollToVisibleLast,this)
}this._isReallyVisible=c}.observes("isVisible","isVisibleInWindow"),_scrollToVisibleFailures:0,scrollToVisible:function(){var f=NO;
if(!this.get("isVisibleInWindow")){return NO}f=Cv.originalityMatchGroupController.scrollToPageView();
var b=this.get("isAboveHighlight");if(!b){f=arguments.callee.base.apply(this,arguments)||f
}var a=this.getPath("matchGroup.matchSegments.firstObject");var e=this.getPath("parentView.highlightsView");
var c=e.getItemViewFor(a);if(!c){if(this._scrollToVisibleFailures<3){this._scrollToVisibleFailures++;
this.invokeLater(this.scrollToVisible,100)}else{this._scrollToVisibleFailures=0}return NO
}f=c.scrollToVisible()||f;if(b){f=arguments.callee.base.apply(this,arguments)||f}this.becomeFirstResponder();
return f},scrollToVisibleLast:function(){this.invokeLast(this.scrollToVisible)},mouseDown:function(a){arguments.callee.base.apply(this,arguments);
if(a.target.className.indexOf("close-button")>=0){this.set("isVisible",NO);return YES
}else{if(this.isDragHandle(a.target)){if(!this.get("isDragging")){this.beginDragging(a)
}return YES}else{if(a.target.className=="text"||a.target.className=="match-text"){a.stopPropagation();
return NO}}}return YES},mouseUp:function(a){if(arguments.callee.base.apply(this,arguments)){return YES
}var g=a.target;var c=g.tagName.toLowerCase();if(this.get("isDragging")){this.endDragging()
}else{if(c==="a"){var e=g.className;if(e.indexOf("title-link")!==-1){if(Cv.originalityController.paperSharingNotice(Cv.originalityGlimpseController.get("content"))){return NO
}var b=this.getPath("matchGroup.source.linkUrl");if(!b){return YES}var h=function(){alert("_The new window was blocked. please disable popup blockers and try again.".loc())
};b=!Ip.isAbsoluteUrl(b)?Ip.LocalizedUrl.prepareUrl(b):b;Ip.openAndFocusWindow(b,"_or_source",null,h)
}else{if(e.indexOf("view-full-source-link")!==-1){var f=this.getPath("matchGroup.source");
Cv.originalityFullSourceModeController.enterFullSourceMode(f)}}}}return YES},mouseDragged:function(a){if(arguments.callee.base.apply(this,arguments)){return YES
}if(this.get("isDragging")){var c=a.pageX-this._startX;var b=a.pageY-this._startY;
this.adjust("left",this._cachedPosition.left+c);this.adjust("top",this._cachedPosition.top+b);
return YES}},isDragHandle:function(e){var c=YES;var f=" "+e.className+" ";if((e.tagName.toUpperCase()==="A")||(f.indexOf(" text-container ")!==-1)||(f.indexOf(Cv.ResizableView.HANDLE_CLASSNAME)!==-1)){c=NO
}else{var b=this.get("layer");var a=e;while((a!==null)&&(a!==b)){f=" "+a.className+" ";
if(f.indexOf(" text-container ")!==-1){c=NO;break}a=a.parentNode}}return c},beginDragging:function(a){this.set("isDragging",YES);
this.$().addClass("dragging");this._cachedPosition=this.get("layout");this._startX=a.pageX;
this._startY=a.pageY},endDragging:function(){this.set("isDragging",NO);this.$().removeClass("dragging");
this._cachedPosition=null},canResizeWidth:YES,canResizeHeight:YES});Cv.OriginalityMatchView=Cv.HighlightView.extend({displayProperties:["classNames"],init:function(){arguments.callee.base.apply(this,arguments);
var e=this.get("classNames").concat();var f=this.getPath("content.groupNode.colorIndex");
if(f||(f===0)){var a="group-node-color-%@".fmt(f);e.push(a)}var b=this.getPath("content.isFirstMatchSegment");
if(b){e.push("first-match-segment")}var c=this.getPath("content.isLastMatchSegment");
if(c){e.push("last-match-segment")}this.set("classNames",e)},_renderLine:function(l,q,j,c,h,n){arguments.callee.base.apply(this,arguments);
var m;var i;var a;var p;var o=0;var b=Cv.userController.get("useMultiColorHighlighting");
if(b){o=this.getPath("content.groupNode.colorIndex");if(!((o>0)||(o===0))){o=0}}var g=this.get("content");
var f=g.getPath("matchGroup.matchSegments");var k=(f[0]===g);var e=(f[f.get("length")-1]===g);
if(k&&c){m=q.get("top")+Cv.OriginalityMatchView.START_STEM_OFFSET_Y;i=(n?q.get("right"):q.get("left"))-Cv.OriginalityMatchView.START_STEM_WIDTH+Cv.OriginalityMatchView.START_STEM_OFFSET_X;
m=Cv.zoomController.getZoomedValue(m);i=Cv.zoomController.getZoomedValue(i)+1;p=Cv.zoomController.getZoomedValue(Cv.OriginalityMatchView.START_STEM_HEIGHT);
l.push('<div class="match-stem" style="');l.push("top:"+m+"px;");l.push("left:"+i+"px;");
l.push("height:"+p+"px;");l.push('">&nbsp;</div>')}if(e&&h){m=j.get("top")+Cv.OriginalityMatchView.END_STEM_OFFSET_Y;
if(n){i=j.get("left")+Cv.OriginalityMatchView.END_STEM_OFFSET_X}else{i=j.get("right")+Cv.OriginalityMatchView.END_STEM_OFFSET_X
}m=Cv.zoomController.getZoomedValue(m);i=Cv.zoomController.getZoomedValue(i)+1;p=Cv.zoomController.getZoomedValue(Cv.OriginalityMatchView.END_STEM_HEIGHT);
l.push('<div class="match-stem" style="');l.push("top:"+m+"px;");l.push("left:"+i+"px;");
l.push("height:"+p+"px;");l.push('">&nbsp;</div>');l.push('<div class="match-stem-tail" style="');
l.push("top:"+(m+p)+"px;");l.push("left:"+(i-2)+"px;");l.push('">&nbsp;</div>')}},mouseDown:function(b){var a=Cv.originalityMatchGroupController.matchHightViewMouseDown(b,this);
return a}});Cv.OriginalityMatchView.mixin({START_STEM_WIDTH:5,START_STEM_HEIGHT:25,START_STEM_OFFSET_X:2,START_STEM_OFFSET_Y:-9,END_STEM_WIDTH:5,END_STEM_HEIGHT:24,END_STEM_OFFSET_X:-1,END_STEM_OFFSET_Y:-5});
sc_require("views/originality_tree");Cv.OriginalitySourceBreakDownSidebarView=SC.View.extend({classNames:["originality-source-breakdown-sidebar"],displayProperties:["classNames"],useMultiColorHighlightingBinding:"Cv.userController.useMultiColorHighlighting",useMultiColorHighlightingBindingDefault:SC.Binding.oneWay(),modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),researchSourceGroupNodeBinding:"Cv.originalityController.researchSourceGroupNode",researchSourceGroupNodeBindingDefault:SC.Binding.oneWay(),init:function(){arguments.callee.base.apply(this,arguments);
this.useMultiColorHighlightingDidChange()},useMultiColorHighlightingDidChange:function(){var a=this.get("useMultiColorHighlighting");
var e=this.get("classNames").concat();var c="or-multi-color-highlighting-on";var b="or-multi-color-highlighting-off";
if(a){if(e.indexOf(b)!==-1){e.removeObject(b)}if(e.indexOf(c)===-1){e.pushObject(c)
}}else{if(e.indexOf(c)!==-1){e.removeObject(c)}if(e.indexOf(b)===-1){e.pushObject(b)
}}this.set("classNames",e)}.observes("useMultiColorHighlighting"),childViews:function(a,b){if(b===undefined){b="headerView sourceLabelView treeView".w();
if(!Cv.get("inStudentMode")){b.push("toolbarView")}}return b}.property().cacheable(),singleSourceContentBinding:"Cv.originalityDataTreeController.singleSourceArrangedObjects",singleSourceContentBindingDefault:SC.Binding.oneWay(),researchModeContentBinding:"Cv.originalityDataTreeController.researchModeArrangedObjects",researchModeContentBindingDefault:SC.Binding.oneWay(),headerView:SC.View.design({layout:{left:0,right:0,top:0,height:38},childViews:"labelView backButtonView modeToggleView".w(),classNames:["or-sidebar-header"],labelView:SC.LabelView.design({modeBinding:SC.Binding.oneWay("Cv.originalityController.mode"),layout:function(){var a=this.get("mode")===Cv.originalityController.RESEARCH_MODE?35:0;
return{top:0,height:38,left:a,right:0}}.property("mode").cacheable(),tagName:"h2",classNames:["or-sidebar-header"],value:function(){return this.get("mode")===Cv.originalityController.RESEARCH_MODE?"_Match Breakdown".loc():"_All Sources".loc()
}.property("mode").cacheable()}),backButtonView:SC.ButtonView.design({layout:{left:10,width:22,centerY:0,height:15},classNames:["match-breakdown-back"],modeBinding:SC.Binding.oneWay("Cv.originalityController.mode"),isVisible:function(){return this.get("mode")===Cv.originalityController.RESEARCH_MODE
}.property("mode").cacheable(),titleMinWidth:0,toolTip:"_Return to Match Overview".loc(),action:function(){this.setPath("parentView.parentView.frozenView.isVisible",YES);
Cv.originalityDataTreeController.setIfChanged("isExcludingSources",NO);Cv.originalityController.set("mode",Cv.originalityController.CUMULATIVE_MODE)
}}),modeToggleView:SC.SegmentedView.design({layout:{top:8,right:0,height:30,width:70},classNames:["mode-toggle"],valueBinding:"Cv.originalityController.mode",allowsMultipleSelection:NO,allowsEmptySelection:NO,items:[{title:"_Match Overview".loc(),value:Cv.originalityController.CUMULATIVE_MODE,toolTip:"_Match Overview".loc()},{title:"_All Sources".loc(),value:Cv.originalityController.SINGLE_SOURCE_MODE,toolTip:"_All Sources".loc()}],itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip",isVisible:function(){return this.get("value")===Cv.originalityController.SINGLE_SOURCE_MODE
}.property("value").cacheable()})}),sourceLabelView:SC.View.design({layout:{top:38,height:Cv.config.get("SOURCE_TREE_NODE_ITEM_HEIGHT"),left:0,right:0},classNames:"originality-list-group-node",childViews:"researchSourceGroupNodeView".w(),modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),isVisible:function(){return this.get("mode")===Cv.originalityController.RESEARCH_MODE
}.property("mode").cacheable(),researchSourceGroupNodeView:Cv.OriginalityGroupNodeItemView.design({layout:{top:0,bottom:0,left:0,right:0},modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),researchSourceGroupNodeBinding:"Cv.originalityController.researchSourceGroupNode",researchSourceGroupNodeBindingDefault:SC.Binding.oneWay(),displayProperties:"researchSourceGroupNode".w(),content:function(){var b=null;
var a=this.get("researchSourceGroupNode");if(a){b=SC.Object.create({data:a})}return b
}.property("researchSourceGroupNode").cacheable(),isVisible:function(){var b=this.get("mode");
var a=(b===Cv.originalityController.RESEARCH_MODE);return a}.property("mode").cacheable()})}),treeView:SC.ContainerView.design({layout:function(a,b){if(b===undefined){b={top:98,left:0,right:0};
if(!Cv.get("inStudentMode")){b.bottom=60}else{b.bottom=0}var c=this.get("mode");if(c===Cv.originalityController.SINGLE_SOURCE_MODE){b.top=b.top-60
}else{if(c===Cv.originalityController.RESEARCH_MODE){b.top=(Cv.config.get("SOURCE_TREE_NODE_ITEM_HEIGHT")||60)+38
}}}return b}.property("mode").cacheable(),modeBinding:"Cv.originalityController.mode",modeBindingDefault:SC.Binding.oneWay(),contentView:function(){var a=this._contentView;
var b=this.get("mode");if(b===Cv.originalityController.SINGLE_SOURCE_MODE){a=this._contentView=this.get("singleSourceTreeView")
}else{if(b===Cv.originalityController.RESEARCH_MODE){a=this._contentView=this.get("researchModeTreeView")
}}return a}.property("mode").cacheable(),singleSourceTreeView:function(){var b=Cv.OriginalityTreeView.design({classNames:["single-source"],contentBinding:".parentView.parentView.singleSourceContent",contentBindingDefault:SC.Binding.oneWay()});
var a=this.createChildView(b);return a}.property().cacheable(),researchModeTreeView:function(){var b=Cv.OriginalityTreeView.design({classNames:["research-mode"],contentBinding:".parentView.parentView.researchModeContent",contentBindingDefault:SC.Binding.oneWay()});
var a=this.createChildView(b);return a}.property().cacheable()}),toolbarView:SC.View.design({layout:{bottom:0,height:60,left:0,right:0},classNames:"panel-button-set",childViews:"enableExcludeModeButtonView submitExcludeSourcesButtonView excludeHintsView cancelButtonView".w(),isVisibleBinding:SC.Binding.not("Cv.paperController.isReadonly"),enableExcludeModeButtonView:SC.ButtonView.design({layout:{top:10,height:24,centerX:0,width:250},classNames:["panel-button"],isVisibleBinding:"Cv.originalityDataTreeController.isExcludingSources",isVisibleBindingDefault:SC.Binding.oneWay().bool().not(),title:"_Exclude Sources".loc(),action:function(){Cv.originalityDataTreeController.set("isExcludingSources",YES);
Cv.originalityDataTreeController.updateContentIfNeeded()}}),submitExcludeSourcesButtonView:SC.ButtonView.design({layout:{top:8,height:24,left:10,width:0.45},icon:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/bt-icon-exclude.png",classNames:["panel-button","negative"],isVisibleBinding:"Cv.originalityDataTreeController.isExcludingSources",isVisibleBindingDefault:SC.Binding.oneWay().bool(),treeViewBinding:".parentView.parentView.treeView.contentView",treeViewBindingDefault:SC.Binding.oneWay(),isEnabled:NO,title:"",_selectedSourcesLengthDidChange:function(){var a=this.getPath("treeView.selectedSources.length");
var b="";if(a>0){b="_Exclude (%@)".loc(a);this.set("isEnabled",YES)}else{b="_No sources selected".loc();
this.set("isEnabled",NO)}this.set("title",b)}.observes("*treeView.selectedSources.length"),copySourceData:function(b){var a=SC.Object.create({id:b.get("id"),node:b.get("node"),linkText:b.get("linkText"),collection:b.get("collection"),linkUrl:b.get("linkUrl")});
return a},action:function(){var b=this.getPath("parentView.parentView");var f=[];
var a=[];var c=this.getPath("treeView.content");var g=this.getPath("treeView.selectedSources");
var e=function(j){var i=j.get("id");if(a.indexOf(i)===-1){var h=this.copySourceData(j);
f.push(h);a.push(i)}};g.forEach(function(h){e.call(this,h)},this);g.set("length",0);
Cv.excludeListController.addExcludeSources(f)}}),cancelButtonView:SC.ButtonView.design({layout:{top:8,height:24,right:10,width:0.45},title:"_Cancel".loc(),classNames:["panel-button"],isVisibleBinding:"Cv.originalityDataTreeController.isExcludingSources",isVisibleBindingDefault:SC.Binding.oneWay().bool(),action:function(){Cv.originalityDataTreeController.set("isExcludingSources",NO);
Cv.originalityDataTreeController.updateContentIfNeeded()}}),excludeHintsView:SC.LabelView.design({layout:{top:40,height:20,left:10,right:0},classNames:["hint-text","panel-button"],treeViewBinding:".parentView.parentView.treeView.contentView",treeViewBindingDefault:SC.Binding.oneWay(),value:"_Recalculate originality score".loc(),isVisible:NO,_selectedSourcesLengthDidChange:function(){var b=this.getPath("treeView.selectedSources.length");
var a=(b>0);this.set("isVisible",a)}.observes("*treeView.selectedSources.length")}),isExcludingSourcesBinding:"Cv.originalityDataTreeController.isExcludingSources",isExcludingSourcesDidChange:function(){var b=this.get("isExcludingSources");
if(!b){var a=this.getPath("parentView.treeView.contentView.selectedSources");if(a){a.set("length",0)
}}}.observes("isExcludingSources")}),_isVisibleInWindowDidChange:function(){if(!this.get("isVisibleInWindow")){Cv.originalityDataTreeController.setIfChanged("isExcludingSources",NO)
}}.observes("isVisibleInWindow"),openSingleSourcePickerPane:function(a){this.get("pickerPane").popup(a,SC.PICKER_POINTER,[3,0,1,2,2])
},_updateClassNames:function(){var e=this.get("classNames").concat();if(this._previousMatchGroupColorClass){e.removeObject(this._previousMatchGroupColorClass);
this._previousMatchGroupColorClass=null}var a;var c=this.get("mode");if(c===Cv.originalityController.RESEARCH_MODE){a=this.getPath("researchSourceGroupNode.colorIndex")
}if(a||(a===0)){var b="group-node-color-%@".fmt(a);if(e.indexOf(b)===-1){e.pushObject(b)
}this._previousMatchGroupColorClass=b}this.set("classNames",e)}.observes("researchSourceGroupNode","mode")});
sc_require("views/lazy_load_container");sc_require("views/originality_source_break_down_sidebar");
Cv.OriginalitySidebarView=SC.TabView.extend({segmentedView:Ip.SegmentedView,originalityController:null,originalityDataTreeController:null,isReadonlyBinding:"Cv.paperController.isReadonly",tabLocation:SC.BOTTOM_LOCATION,itemTitleKey:"title",itemValueKey:"value",itemIsEnabledKey:"enabled",itemToolTipKey:"toolTip",tabHeight:30,itemClassNameKey:"className",classNames:"or-sidebar",didRestoreSourceBinding:"Cv.excludeSourcesController.didRestoreSource",items:function(){var a=[{title:"",value:this.get("reportSourcesDisplayView"),enabled:YES,className:"cumulative",toolTip:"_View sources".loc()},{title:"",value:this.get("filterSettingsView"),enabled:!this.get("isReadonly"),className:"filter-settings",toolTip:"_View/edit filters and settings".loc()},{title:"",value:this.get("exclusionListView"),enabled:!Cv.get("inStudentMode")&&!this.get("isReadonly"),className:"exclusion-list",toolTip:"_View/edit excluded sources".loc()}];
return a}.property("isReadonly").cacheable(),nowShowing:function(b,c){if(c===undefined){var a=this.get("items");
if(a&&(a.get("length")>0)){c=this.get("reportSourcesDisplayView")}}this.setIfChanged("didRestoreSource",NO);
return c}.property("items","didRestoreSource").cacheable(),reportSourcesDisplayView:function(){var b=Ip.SceneView.design({scenes:["cumulativeView","singleSourceView"],init:function(){var c=arguments.callee.base.apply(this,arguments);
this.nowShowingDidChange();return c},transitionDuration:500,nowShowing:"cumulativeView",mode:Cv.originalityController.CUMULATIVE_MODE,cumulativeView:function(){var e=Cv.LazyLoadContainerView.design({lazyContentView:Cv.OriginalityCumulativeSidebarView.design({})});
var c=this.createChildView(e);return c}.property().cacheable(),singleSourceView:function(){var e=Cv.LazyLoadContainerView.design({lazyContentView:Cv.OriginalitySourceBreakDownSidebarView.design({})});
var c=this.createChildView(e);return c}.property().cacheable(),_isVisibleInWindowDidChange:function(){var c=Cv.originalityController.get("mode");
if(this.get("isVisibleInWindow")&&this.get("mode")!=c){Cv.originalityController.set("mode",this.get("mode"))
}}.observes("isVisibleInWindow"),displayMode:function(c){var e=this.get("mode");if(([e,c].indexOf(Cv.originalityController.CUMULATIVE_MODE)===-1)||([e,c].indexOf(Cv.originalityController.RESEARCH_MODE)===-1)){this.setIfChanged("nowShowing",null)
}if(c===Cv.originalityController.CUMULATIVE_MODE){this.setIfChanged("nowShowing","cumulativeView")
}else{if((c===Cv.originalityController.RESEARCH_MODE)){this.setIfChanged("nowShowing","singleSourceView")
}else{if((c===Cv.originalityController.SINGLE_SOURCE_MODE)){this.setIfChanged("nowShowing","singleSourceView")
}}}this.set("mode",c)}});var a=this.createChildView(b);return a}.property().cacheable(),filterSettingsView:function(){var b=Cv.LazyLoadContainerView.design({lazyContentView:Cv.OriginalityFilterSettingsSidebarView.design({})});
var a=this.createChildView(b);return a}.property().cacheable(),exclusionListView:function(){var b=Cv.LazyLoadContainerView.design({lazyContentView:Cv.OriginalityExclusionListSidebarView.design({})});
var a=this.createChildView(b);return a}.property().cacheable(),updateNowShowing:function(){var b=this.getPath("originalityController.mode");
var a=[Cv.originalityController.CUMULATIVE_MODE,Cv.originalityController.RESEARCH_MODE,Cv.originalityController.SINGLE_SOURCE_MODE];
if(a.indexOf(b)!=-1){this.setIfChanged("nowShowing",this.get("reportSourcesDisplayView"));
this.get("reportSourcesDisplayView").displayMode(b)}}.observes(".originalityController.mode"),createChildViews:function(){arguments.callee.base.apply(this,arguments);
var c=this.get("containerView");c.adjust("bottom",this.get("tabHeight")-1);var b=this.get("segmentedView");
b.adjust("width",125);b.adjust("height",30);b.adjust("right",null);var f=b.get("classNames").concat();
f.push("sidebar-tabs");b.set("classNames",f);var e=this.get("childViews");var a=this.classicReportButtonView=this.createChildView(this.classicReportButtonView);
e.push(a)},classicReportButtonView:SC.ButtonView.extend({layout:{right:30,width:130,height:24,bottom:0,maxHeight:30},classNames:["olde-version"],title:"_Text-Only Report".loc(),action:function(){var a=Cv.get("lang");
window.location="/newreport.asp?lang=%@&oid=%@&ft=1&bypass_cv=1".fmt(a,Cv.paperController.get("id"))
},target:this,toolTip:"_Navigate to text-only Originality Report".loc(),translateLanguageBinding:"Cv.originalityController.translateLanguage",isVisible:function(){var a=Cv.translatedMatchingController.isNative();
return a}.property("translateLanguage").cacheable()})});sc_require("views/simple_collection");
Cv.PageGm3HighlightsView=Cv.SimpleCollectionView.extend({classNames:["gm3-highlights-view"],content:null,zoomController:null,paperPage:null,layout:{top:0,left:0,width:0,height:0},itemViewClass:Cv.Gm3HighlightView,pageIndex:function(){var a=this.getPath("paperPage.index");
if(a===undefined){a=-1}return a}.property("paperPage").cacheable(),createItemView:function(c,a){SC.mixin(a,{zoomController:this.get("zoomController"),pageIndex:this.get("pageIndex")});
var b=arguments.callee.base.apply(this,arguments);return b}});Cv.PageReadView=SC.View.extend({classNames:["read-view"],quickMarkTemplateSetsController:null,markSet:null,markSetBindingDefault:SC.Binding.oneWay(),zoomController:null,zoomControllerBindingDefault:SC.Binding.oneWay(),paperPage:null,paperPageBindingDefault:SC.Binding.oneWay(),serviceIsActive:null,serviceIsActiveBindingDefault:SC.Binding.oneWay(),isLoadingData:NO,_updateChildViews:function(){if(!this.get("parentView")||this.getPath("parentView.isDestroyed")){var b=this.get("childViews").toArray();
b.forEach(function(f){if(f&&f.destroy){f.destroy()}});return}var e=this.get("markSet");
if(!e.areAllReadsLoaded()||!this.get("isVisibleInWindow")){if(this.getPath("childViews.length")>0){this.removeAllChildren()
}this.set("isLoadingData",NO);return}var c=this.getPath("childViews.length");if(c===0){this._createChildViews()
}else{this._updateChildViewsContent()}var a=this.getPath("paperPage.index");if(!e.isPageLoaded(a)){e.loadPageMarks(a);
this.set("isLoadingData",YES)}else{this.set("isLoadingData",NO)}},updateChildViews:function(){this.invokeOnce(this._updateChildViews)
}.observes("*markSet.reads.length","*markSet.loadedPageCount","*markSet.marks","isVisibleInWindow"),_createChildViews:function(){var c=this.get("paperPage");
var b=c.get("index");var h=this.get("markSet");var g=h.pageMarkSet(b);var f=this.get("zoomController");
var e=[];this.gm3HighlightsView=this.createChildView(Cv.PageGm3HighlightsView.design({layout:{top:0,left:0,height:this.get("frame").height,width:this.get("frame").width},paperPage:c,zoomController:f,content:g.get("gm3Highlights")}));
e.push(this.gm3HighlightsView);this.highlightsView=this.createChildView(Cv.PageHighlightsView.design({paperPage:c,zoomController:f,content:g.get("highlights")}));
e.push(this.highlightsView);this.linkLinesView=this.createChildView(Cv.PageLinkLinesView.design({paperPage:c,zoomController:f,content:g.get("highlights")}));
e.push(this.linkLinesView);this.marksView=this.createChildView(Cv.PageMarksView.design({content:g.get("marks"),paperPage:c,zoomController:f,quickMarkTemplateSetsController:this.get("quickMarkTemplateSetsController"),serviceIsActiveBinding:".parentView.serviceIsActive",createCommentTarget:this,createCommentAction:"createComment"}));
e.push(this.marksView);var a=this.get("childViews").concat();this.replaceAllChildren(e);
if(a){a.forEach(function(i){i.destroy()})}},_updateChildViewsContent:function(){var k=this.get("paperPage");
var c=k.get("index");var i=this.get("markSet");var e=i.pageMarkSet(c);var f=e.get("gm3Highlights");
var j=this.gm3HighlightsView.get("content");if(j!==f){this.gm3HighlightsView.set("content",f)
}var b=e.get("highlights");var g=this.highlightsView.get("content");if(g!==b){this.highlightsView.set("content",b);
this.linkLinesView.set("content",b)}var a=e.get("marks");var h=this.marksView.get("content");
if(h!==a){this.marksView.set("content",a)}},mouseDown:function(a){if(!this.get("serviceIsActive")){return NO
}if(this.marksView){this._wasEditingInlineComment=Cv.commentController.get("anInlineCommentIsBeingEdited");
if(this._wasEditingInlineComment){Cv.commentController.set("anInlineCommentIsBeingEdited",NO);
return YES}else{return this.marksView.tryToPerform("_mouseDown",a)}}},mouseUp:function(a){if(!this.get("serviceIsActive")){return NO
}if(this._wasEditingInlineComment){return NO}if(this.marksView){return this.marksView.tryToPerform("_mouseUp",a)
}},mouseDragged:function(a){if(!this.get("serviceIsActive")){return NO}if(this.marksView){return this.marksView.tryToPerform("_mouseDragged",a)
}},createComment:function(a){var c=this.get("markSet");var b;if(Cv.commentController.get("inputMode")==Cv.commentController.INPUT_MODE_BUBBLE){b=c.createComment(a)
}else{if(a.x<this.paperPage.get("width")-Cv.InlineCommentView.MIN_WIDTH-Cv.InlineCommentView.PAGE_EDGE_BUFFER){b=c.createInlineComment(a)
}}return b}});sc_require("views/page_read");Cv.PageGradeMarkView=Cv.PageServiceView.extend({classNames:["grademark"],childViews:["readView"],isLoadingData:NO,readView:Cv.PageReadView.design({markSetBinding:"Cv.markSetController",zoomControllerBinding:".parentView.zoomController",paperPageBinding:".parentView.paperPage",serviceIsActiveBinding:".parentView.serviceIsActive",isLoadingDataBinding:".parentView.isLoadingData"}),mouseDown:function(a){if(!this.get("serviceIsActive")){return NO
}var b=this.get("readView");if(b){return b.tryToPerform("mouseDown",a)}else{return NO
}},mouseUp:function(a){if(!this.get("serviceIsActive")){return NO}var b=this.get("readView");
if(b){return b.tryToPerform("mouseUp",a)}else{return NO}},mouseDragged:function(a){if(!this.get("serviceIsActive")){return NO
}var b=this.get("readView");if(b){return b.tryToPerform("mouseDragged",a)}else{return NO
}}});sc_require("views/simple_collection");Cv.PageHighlightsView=Cv.SimpleCollectionView.extend({classNames:["highlights-view"],content:null,zoomController:null,paperPage:null,itemViewClass:Cv.HighlightView,glyphPage:null,pageIndex:function(){var a=this.getPath("paperPage.index");
if(a===undefined){a=-1}return a}.property("paperPage").cacheable(),createItemView:function(c,a){SC.mixin(a,{zoomController:this.get("zoomController"),paperPage:this.get("paperPage")});
var b=arguments.callee.base.apply(this,arguments);return b},_updateItemViews:function(){if(!this.get("glyphPage")){this.glyphPageBinding=this.bind("glyphPage",SC.Binding.oneWay(".paperPage.glyphPage"))
}else{arguments.callee.base.apply(this,arguments)}},glyphPageDidChange:function(){if(this.get("glyphPage")){this.invokeOnce(this._updateItemViews,this)
}}.observes("glyphPage")});sc_require("views/simple_collection");Cv.PageLinkLinesView=Cv.SimpleCollectionView.extend({classNames:["page-link-lines-view"],content:null,glyphPage:null,createItemView:function(c,b){if(this.get("parentView")){var a=this.getPath("parentView.marksView").getItemViewFor(c.get("mark"));
SC.mixin(b,{markView:a,highlightsView:this.getPath("parentView.highlightsView"),pageIndex:this.getPath("paperPage.index")})
}return arguments.callee.base.apply(this,arguments)},itemViewClass:Sai.CanvasView.extend({classNames:["link-lines-view"],displayProperties:["path","color","gradeMarkIsActive"],willDestroyLayer:function(){if(this.canvas){return arguments.callee.base.apply(this,arguments)
}},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("markView")){this.markViewDidChange()
}},content:null,pageIndex:null,highlightsView:null,highlightView:function(){return this.get("highlightsView").getItemViewFor(this.get("content"))
}.property("content").cacheable(),markBinding:".content.mark",markView:null,markViewFrameBindingDefault:SC.Binding.oneWay(),markViewFrame:null,markIsDraggingBindingDefault:SC.Binding.oneWay(),markIsDragging:NO,colorBinding:".content.color",markViewDidChange:function(){if(this.markViewFrameBinding){this.markViewFrameBinding.disconnect()
}if(this.markIsDraggingBinding){this.markIsDraggingBinding.disconnect()}if(this.get("markView")){this.markViewFrameBinding=this.bind("markViewFrame",".markView.collapsedViewFrame");
this.markIsDraggingBinding=this.bind("markIsDragging",".markView.isDragging")}}.observes("markView"),markDidChange:function(){this.invokeLast(function(){var b=this.getPath("parentView.parentView");
if(!b){return}var a=b.get("marksView").getItemViewFor(this.get("mark"));if(a!=this.get("markView")){this.set("markView",a);
this.markViewFrameBinding.disconnect();this.markViewFrameBinding=this.bind("markViewFrame",".markView.collapsedViewFrame");
this.markIsDraggingBinding.disconnect();this.markIsDraggingBinding=this.bind("markIsDragging",".markView.isDragging")
}})}.observes("mark"),endPoint:function(){var b=this.getPath("content.highlightLinkLineAttachmentPoint");
if(!this.get("highlightView")||!this.get("markView")){return null}var a=this.getPath("markView.collapsedViewFrame");
var c={x:a.x+(a.width/2),y:a.y+(a.height/2)};return this.get("highlightView").getClosestEdgeTo(c)
}.property("highlightView","Cv.zoomController.zoom","markView","markViewFrame").cacheable(),startPoint:function(){var c=this.getPath("markView.collapsedViewFrame"),f=this.get("endPoint"),b,g,h,a,e,i;
if(!c||!f){return null}i={left:c.x+(c.width/2),top:c.y+(c.height/2)};e=[f.left-i.left,i.left-f.left,f.top-i.top,i.top-f.top];
h=["right","left","bottom","top"][e.indexOf(e.get("@max"))];switch(h){case"right":a={left:c.x+c.width,top:c.y+(c.height/2)};
break;case"bottom":a={left:c.x+(c.width/2),top:c.y+c.height};break;case"top":a={left:c.x+(c.width/2),top:c.y};
break;default:a={left:c.x,top:c.y+(c.height/2)};break}return a}.property("markViewFrame","endPoint").cacheable(),gradeMarkIsActiveBinding:"Cv.gradeMarkController.isActive",gradeMarkIsVisibleBinding:"Cv.gradeMarkController.isVisible",renderCanvas:function(b,a){if(!a){b.clear()
}var i=this.get("markView");if(i.get("noLinkLines")){return}if(!this.get("markIsDragging")){var j=this.get("path");
if(!j){return}var g=Cv.config.HIGHLIGHT_COLORS;var e=this.get("color")||Cv.config.HIGHLIGHT_COLORS_DEFAULT;
var f=Cv.config.HIGHLIGHT_COLORS[Cv.get("defaultHighlightColorIndex")];var c=Cv.getHighlightColorObjectForValue(e);
var h=this.getPath("content.highlightLinkLineColor")||c.hex;if(!this.get("gradeMarkIsActive")&&this.get("gradeMarkIsVisible")){h=f.hex
}b.path(j,{stroke:h,strokeWidth:1})}},path:null,_calculatePath:function(){var b=this.get("startPoint"),a=this.get("endPoint"),c=this.get("markIsDragging");
if(!b||!a||c){this.set("path",null)}else{if(this.pageIndex!==this.getPath("markView.content.pageIndex")){this.set("path",null)
}else{this.set("path","M%@ %@L%@ %@".fmt(b.left,b.top,a.left,a.top))}}}.observes("startPoint","endPoint","markIsDragging"),render:function(a,b){if(this.get("lineLength")<Cv.PageLinkLinesView.MINIMUM_LINE_LENGTH){return
}arguments.callee.base.apply(this,arguments)},didCreateLayer:function(a,b){if(this.get("lineLength")<Cv.PageLinkLinesView.MINIMUM_LINE_LENGTH){return
}arguments.callee.base.apply(this,arguments)},didUpdateLayer:function(a,b){if(this.get("lineLength")<Cv.PageLinkLinesView.MINIMUM_LINE_LENGTH){return
}if(!this.canvas){this.didCreateLayer();return}arguments.callee.base.apply(this,arguments)
},lineLength:function(){var f=this.get("startPoint"),b=this.get("endPoint");if(!f||!b){return 0
}var e=Math.abs(f.left-b.left);var c=Math.abs(f.top-b.top);var a=Math.sqrt(e*e+c*c);
return a}.property("startPoint","endPoint").cacheable(),destroy:function(){this.canvas=null;
return arguments.callee.base.apply(this,arguments)}}),_updateItemViews:function(){if(!this.get("glyphPage")){this.glyphPageBinding=this.bind("glyphPage",SC.Binding.oneWay(".paperPage.glyphPage"))
}else{arguments.callee.base.apply(this,arguments)}},glyphPageDidChange:function(){if(this.get("glyphPage")){this.invokeOnce(this._updateItemViews,this)
}}.observes("glyphPage")});Cv.PageLinkLinesView.MINIMUM_LINE_LENGTH=10;sc_require("views/simple_collection");
Cv.PageMarksView=Cv.SimpleCollectionView.extend(Cv.TextSelectable,{content:null,userCanEdit:function(){return !Cv.get("inStudentMode")&&Cv.config.get("ALLOW_TEXT_SELECTION")&&!Cv.paperController.get("isReadonly")
}.property().cacheable(),quickMarkTemplateSetsController:null,paperPage:null,zoomController:null,serviceIsActive:null,classNames:["marks-view"],contentItemViewClassKey:"viewClass",createCommentTarget:this,createCommentAction:null,acceptsFirstResponder:YES,isKeyResponder:YES,pageIndex:function(){var a=this.getPath("paperPage.index");
if(a===undefined){a=-1}return a}.property("paperPage").cacheable(),createItemView:function(b,a){SC.mixin(a,{zoomController:this.get("zoomController"),quickMarkTemplateSetsController:this.get("quickMarkTemplateSetsController"),pageMarksView:this,serviceIsActiveBinding:".pageMarksView.serviceIsActive",editingRegistryController:Cv.editingRegistryController});
return arguments.callee.base.apply(this,arguments)},_mouseDown:function(b){var c=Cv.paperTextSelectionController.get("textSelectionHighlight");
var a=Cv.TextSelectable._mouseDown.apply(this,arguments);this._shouldCreateCommentOnMouseUp=!a||!c;
this._wasSelectingText=NO;return YES},_mouseDragged:function(b){if(Cv.peerMarkController.get("isActive")||Cv.gradeMarkController.get("isActive")&&Cv.commentController.get("inputMode")==Cv.commentController.INPUT_MODE_TEXT){return NO
}var a=Cv.TextSelectable._mouseDragged.apply(this,arguments);this._wasSelectingText=this._wasSelectingText||a;
return a},_mouseUp:function(c){var o=Cv.TextSelectable._mouseUp.apply(this,arguments);
if(!o||Cv.get("inStudentMode")||Cv.peerMarkController.get("isActive")){return o}if(!this._shouldCreateCommentOnMouseUp||this._wasSelectingText){return o
}var n=this.get("createCommentTarget");var j=this.get("createCommentAction");if(SC.typeOf(j)===SC.T_STRING){j=n[j]
}if(j){var q=this.get("paperPage");var h=q.get("index");var e={x:c.pageX,y:c.pageY};
var k=this.convertFrameFromView(e);var b=this.get("zoomController");var i=b.getUnzoomedValue(k.x);
var g=b.getUnzoomedValue(k.y);var a={page:h+1,x:i,y:g,isExpanded:YES,isEditing:YES};
var p=Cv.paperTextSelectionController.get("textSelectionHighlight");if(p){var s=p.get("startGlyph");
var m=p.get("endGlyph");var f=s.get("address");var l=m.get("address");SC.mixin(a,{highlight:{start_line:f.line,start_glyph:f.glyph,start_page_index:f.page,end_line:l.line,end_glyph:l.glyph,end_page_index:l.page}});
Cv.paperTextSelectionController.clearTextSelectionHighlight()}j.call(n,a);o=YES}return o
},isDropTarget:YES,acceptDragOperation:function(a,b){return YES},computeDragOperations:function(b,a){return SC.DRAG_ANY
},performDragOperation:function(c,e){var g=SC.DRAG_NONE;if(c.hasDataType(Cv.QuickMarkTemplate)||c.hasDataType(Cv.Comment)){var f=c.get("location");
var j=this.convertFrameFromView(f);var a=this.get("zoomController");var i=j.x-c.get("ghostOffset").x;
var h=j.y-c.get("ghostOffset").y;i=a.getUnzoomedValue(i);h=a.getUnzoomedValue(h);
var b=c.dataForType(Cv.QuickMarkTemplate);if(b){Cv.markSetController.createQuickMark({page:this.getPath("paperPage.number"),x:i,y:h,template:b.get("id"),use_template:YES})
}else{Cv.markSetController.createComment({page:this.getPath("paperPage.number"),x:i,y:h,isExpanded:YES,isEditing:YES})
}g=SC.DRAG_COPY}return g},dragStarted:function(b,a){},dragEntered:function(b,a){},dragUpdated:function(b,a){},dragExited:function(b,a){},dragEnded:function(g,l){if(g.hasDataType(Cv.Mark)&&g.get("type")==="move"){var f=g.dataForType(Cv.Mark);
if((this.getPath("paperPage.paper")!==f.getPath("read.paper"))||!this.get("pane")){return
}var h={x:parseInt(l.pageX,10),y:parseInt(l.pageY,10)};var k=this.convertFrameFromView(h);
var j=k.x-g.get("ghostOffset").x;var i=k.y-g.get("ghostOffset").y;var b=this.get("frame");
var e=this.getPath("paperPage.index");var c=this.getPath("paperPage.paper.pages.length");
if(((i>0)||(e===0))&&((i<b.height)||(e===(c-1)))){if(j<0){j=0}if(j+50>b.width){j=b.width-50
}if(i<0){i=0}if(i+14>b.height){i=b.height-14}var a=this.get("zoomController");j=a.getUnzoomedValue(j);
i=a.getUnzoomedValue(i);f.set("x",j);f.set("y",i);f.set("pageIndex",e);if(!Cv.get("inStudentMode")&&!Cv.paperController.get("isReadonly")&&(f.get("status")!==SC.Record.READY_NEW)&&Cv.config.get("MARK_POSITIONS_EDITABLE")){f.commitRecord()
}}}}});Cv.PageOriginalityHighlightsView=Cv.PageHighlightsView.extend({displayProperties:["classNames"],paperPage:null,paperPageBindingDefault:SC.Binding.oneWay(),zoomController:null,zoomControllerBindingDefault:SC.Binding.oneWay(),glimpseView:function(){var a=this.getPath("parentView.glimpseView");
return a}.property("parentView").cacheable(),itemViewClass:Cv.OriginalityMatchView.extend({showGlimpseView:function(){var a=this.getPath("parentView.glimpseView");
if(a.get("matchGroup")===this.getPath("content.matchGroup")){a.set("isVisible",YES)
}}}),useMultiColorHighlightingBinding:"Cv.userController.useMultiColorHighlighting",useMultiColorHighlightingBindingDefault:SC.Binding.oneWay(),allPageMatchesBinding:"Cv.originalityAllPageMatchesController.content",allPageMatchesBindingDefault:SC.Binding.oneWay(),allPageMatchesLength:null,allPageMatchesLengthBinding:"Cv.originalityAllPageMatchesController.length",allPageMatchesLengthBindingDefault:SC.Binding.oneWay(),allPageMatchesPaperIdBinding:"Cv.originalityAllPageMatchesController.contentPaperId",allPageMatchesPaperIdBindingDefault:SC.Binding.oneWay(),activeMatchGroups:null,activeMatchGroupsBinding:"Cv.originalityActiveMatchGroupsController.content",activeMatchGroupsBindingDefault:SC.Binding.oneWay(),activeMatchGroupsStatus:null,activeMatchGroupsStatusBinding:"Cv.originalityActiveMatchGroupsController.status",activeMatchGroupsStatusBindingDefault:SC.Binding.oneWay(),selectedMatchGroup:null,selectedMatchGroupBinding:"Cv.originalityMatchGroupController.content",selectedMatchGroupBindingDefault:SC.Binding.oneWay(),init:function(){arguments.callee.base.apply(this,arguments);
this.useMultiColorHighlightingDidChange()},_updateItemViews:function(){var a=this.get("allPageMatchesPaperId");
var b=Cv.paperController.get("id");if(a===b){arguments.callee.base.apply(this,arguments)
}},highlightsDidChange:function(){var c=this.get("paperPage");var e=this.get("allPageMatches");
if(c&&e){var b=Cv.originalityMatchGroupsController.get("content");if(b){var a=this.getPath("paperPage.index");
var f=e[a];this.set("content",f)}}else{this.set("content",null)}}.observes("allPageMatches","allPageMatchesLength","paperPage"),useMultiColorHighlightingDidChange:function(){var a=this.get("useMultiColorHighlighting");
var e=this.get("classNames").concat();var c="or-multi-color-highlighting-on";var b="or-multi-color-highlighting-off";
if(a){if(e.indexOf(b)!==-1){e.removeObject(b)}if(e.indexOf(c)===-1){e.pushObject(c)
}}else{if(e.indexOf(c)!==-1){e.removeObject(c)}if(e.indexOf(b)===-1){e.pushObject(b)
}}this.set("classNames",e)}.observes("useMultiColorHighlighting"),createItemView:function(f,c){var a=f;
var b=this.getMatchSegmentLabel(a);if(b||(b===0)){c.label=b}var e=arguments.callee.base.apply(this,arguments);
return e},getMatchSegmentLabel:function(b){var a="";var f=Cv.originalityController.get("mode");
if(b.get("isFirstMatchSegment")){if(Cv.config.get("SHOW_MATCH_GROUP_PERCENT_IN_LABEL")){var c=b.getPath("matchGroup.percent");
if(parseInt(c)===0){c="<1"}a="_%@%".loc(c)}else{var e=b.getPath("groupNode.index");
if(f===Cv.originalityController.CUMULATIVE_MODE){a=e+1}else{if(f===Cv.originalityController.SINGLE_SOURCE_MODE){a="."
}else{if(f===Cv.originalityController.RESEARCH_MODE){if(b.getPath("sourceTreeNode.isPrimarySource")){a=e+1
}else{a="."}}else{if(f===Cv.originalityController.FULL_SOURCE_MODE){a="."}}}}}}return a
},_updateHighlightIsBright:function(){var a=this.get("activeMatchGroupsStatus");if(a&SC.Record.READY){var b=this.get("childViews");
b.forEach(function(f){var e=f.get("content");var c=Cv.originalityMatchGroupController.isMatchBright(e);
f.set("isBright",c)},this)}},_updateHighlightIsBrightIfNeeded:function(){this.invokeLast(this._updateHighlightIsBright)
}.observes("activeMatchGroups","activeMatchGroupsStatus","selectedMatchGroup")});
Cv.PagePeerMarkView=Cv.PageGradeMarkView.extend({classNames:["peermark"],readView:Cv.PageReadView.design({markSetBinding:"Cv.pmMarkSetController",zoomControllerBinding:".parentView.zoomController",paperPageBinding:".parentView.paperPage",serviceIsActiveBinding:".parentView.serviceIsActive",reviewBinding:SC.Binding.oneWay("Cv.pmReviewController.content"),reviewDidChange:function(){this.invokeOnce(this.updateChildViews)
}.observes("review")}),mouseDown:function(a){if(!this.get("serviceIsActive")){return NO
}var b=this.get("readView");if(b){return b.tryToPerform("mouseDown",a)}else{return NO
}},mouseUp:function(a){if(!this.get("serviceIsActive")){return NO}var b=this.get("readView");
if(b){return b.tryToPerform("mouseUp",a)}else{return NO}},mouseDragged:function(a){if(!this.get("serviceIsActive")){return NO
}var b=this.get("readView");if(b){return b.tryToPerform("mouseDragged",a)}else{return NO
}}});sc_require("views/simple_collection");Cv.PageStrikethroughsView=Cv.SimpleCollectionView.extend({classNames:["strikethroughs-view"],content:null,zoomController:null,paperPage:null,itemViewClass:Cv.StrikethroughView,glyphPage:null,pageIndex:function(){var a=this.getPath("paperPage.index");
if(a===undefined){a=-1}return a}.property("paperPage").cacheable(),createItemView:function(c,a){SC.mixin(a,{zoomController:this.get("zoomController"),paperPage:this.get("paperPage")});
var b=arguments.callee.base.apply(this,arguments);return b},_updateItemViews:function(){if(!this.get("glyphPage")){this.glyphPageBinding=this.bind("glyphPage",SC.Binding.oneWay(".paperPage.glyphPage"))
}else{arguments.callee.base.apply(this,arguments)}},glyphPageDidChange:function(){if(this.get("glyphPage")){this.invokeOnce(this._updateItemViews,this)
}}.observes("glyphPage")});Cv.PaperView=SC.ScrollView.extend({paper:null,_previousPaper:null,zoomController:null,servicesController:null,paperTextSelectionController:null,acceptsFirstResponder:YES,isKeyResponder:YES,_updateScrollOffsets:function(){var e=this.getPath("paper.content");
if(this._previousPaper){var b=this.get("verticalScrollOffset");var a=this.get("horizontalScrollOffset");
this._previousPaper.set("verticalScrollOffset",b);this._previousPaper.set("horizontalScrollOffset",a);
this._previousPaper=null}var c=(e&&(this.get("contentView")===this.listContainerView));
if(c&&(this._previousPaper!==e)){this.invokeLast(function(){var g=e.get("verticalScrollOffset")||0;
var f=e.get("horizontalScrollOffset")||0;this.set("verticalScrollOffset",g);this.set("horizontalScrollOffset",f);
this._previousPaper=e})}else{this.set("verticalScrollOffset",0);this.set("horizontalScrollOffset",0)
}}.observes("Cv.paperController.content"),updateContentView:function(){this.invokeLast(function(){var a=this.getPath("paper.content");
if(a&&a.get("isLoaded")&&a.get("imagesAvailable")){this.setIfChanged("contentView",this.getListContainerView());
this._updateScrollOffsets()}else{this.setIfChanged("contentView",Cv.paperViewPage.get("emptyPaperLabelView"))
}})}.observes("Cv.paperController.content","Cv.paperController.isLoaded","Cv.paperController.imagesAvailable"),getListContainerView:function(){if(!this.listContainerView){this.listContainerView=Cv.paperViewPage.get("listContainerView");
this.pageListView=this.listContainerView.get("pageList");this.pageListView.set("paperView",this);
this.pageListView.set("paperTextSelectionController",this.get("paperTextSelectionController"));
this.pageListView.set("zoomController",this.get("zoomController"));this.pageListView.set("servicesController",this.get("servicesController"));
this.pageListView.set("listEndBufferHeight",Cv.config.PAPER_BOTTOM_BUFFER);this.nowShowingPageBinding=this.bind("nowShowingPage",".pageListView.nowShowingPage")
}return this.listContainerView},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)
}var e=this.get("contentView");if(!e){return NO}var a=b.get("frame");if(!a){return NO
}a=e.convertFrameFromView(a,b.get("parentView"));var c=SC.cloneRect(this.get("containerView").get("frame"));
c.x=this.get("horizontalScrollOffset");c.y=this.get("verticalScrollOffset");var g=c.x,f=c.y;
c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c)+100);c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c)+100);
c.y-=Math.max(0,SC.minY(c)-SC.minY(a)+100);c.x-=Math.max(0,SC.minX(c)-SC.minX(a)+100);
if((g!==c.x)||(f!==c.y)){this.scrollTo(c.x,c.y);return YES}else{return NO}},getPageViewAtMidPoint:function(){var b=this.get("pageListView");
var c=b.getClippingFrameMidPoint();var a=b.convertPointToPageView(c);return a},getPageServicesView:function(a){var b=this.getPath("pageListView.childViews."+a+".childViews.1");
return b},adjustElementScroll:function(){var a=this.get("containerView").$()[0];this._real_horizontalScrollOffset=this.get("horizontalScrollOffset");
this._real_verticalScrollOffset=this.get("verticalScrollOffset");arguments.callee.base.apply(this,arguments);
var a=this.get("containerView").$()[0];if(a.scrollLeft!==this._real_horizontalScrollOffset){a.scrollLeft=this._real_horizontalScrollOffset
}if(a.scrollTop!==this._real_verticalScrollOffset){a.scrollTop=this._real_verticalScrollOffset
}if(this._horizontalScrollOffset!==this._real_horizontalScrollOffset){this._horizontalScrollOffset=this._real_horizontalScrollOffset
}if(this._verticalScrollOffset!==this._real_verticalScrollOffset){this._verticalScrollOffset=this._real_verticalScrollOffset
}},keyDown:function(b){var a=50;var c=b.commandCodes()[0];if(c==="down"){this.scrollBy(0,a);
return YES}else{if(c==="up"){this.scrollBy(0,-a);return YES}else{if(c==="right"){this.scrollBy(a,0);
return YES}else{if(c==="left"){this.scrollBy(-a,0);return YES}else{if(c==="pageup"){this.scrollUpPage(1);
return YES}else{if(c==="pagedown"){this.scrollDownPage(1);return YES}}}}}}return NO
}});Cv.paperViewPage=SC.Page.create({listContainerView:SC.View.design({childViews:"downloadHeader pageList".w(),pageList:Cv.PageListView,downloadHeader:SC.View.design({classNames:["download-container"],tagName:"a",layout:{top:7,height:50},isVisibleBinding:"Cv.paperController.isAnythingSubmission",downloadTitleBinding:"Cv.paperController.filename",downloadSizeBinding:"Cv.paperController.fileSize",submissionUrlBinding:"Cv.paperController.submissionUrl",displayProperties:["downloadTitle","submissionUrl","downloadSize"],render:function(a,b){a.push('<img class="download-icon" src="%@" />'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/download-icon.png"));
a.push('<div class="download-filename ellipsis">');a.push("_Download submitted file:".loc());
a.push(" ");a.text(this.get("downloadTitle"));if(this.get("downloadSize")){a.push(' <span class="download-file-size">(%@)</span>'.fmt(this.get("downloadSize")))
}a.push("</div>")},click:function(){Cv.paperController.downloadOriginalSubmission()
}}),downloadHeaderIsVisibleBinding:".downloadHeader.isVisible",pageListViewFrameBinding:".pageList.frame",headerSpaceVisible:NO,headerVisibilityDidChange:function(){var b=this.get("downloadHeaderIsVisible"),a=this.get("headerSpaceVisible");
if(b&&!a){this.get("pageList").adjust("top",this.getPath("downloadHeader.layout").height+this.getPath("downloadHeader.layout").top);
this.set("headerSpaceVisible",YES)}else{if(!b&&a){this.get("pageList").adjust("top",0);
this.set("headerSpaceVisible",NO)}}}.observes("downloadHeaderIsVisible"),pageListViewFrameDidChange:function(){var a=this.get("pageListViewFrame");
if(a){this.adjust("height",a.height);var b=a.width<this.get("frame").width?null:a.width;
this.adjust("width",b);this.get("downloadHeader").adjust("width",a.width)}}.observes("pageListViewFrame".w())}),emptyPaperLabelView:SC.LabelView.design({layout:{centerY:0,height:50,right:0,left:0},textAlign:SC.ALIGN_CENTER,dprStatusCodeBinding:"Cv.paperController.dprStatusCode",mainLoadingIsVisibleBinding:"Cv.loadingViewController.isShowing",value:function(){if(this.get("mainLoadingIsVisible")){return""
}var a=Cv.paperController.get("content");if(!a){return"_This student has not submitted a paper to the assignment.".loc()
}else{if(a.get("imagedPreDpr")){return"_This paper cannot be viewed in the %@ Document Viewer".loc(Cv.config.get("APP_NAME"))
}else{if(a.get("dprImagingFailed")){return"_This paper is not available.".loc()}else{if(a.get("dprImagingInProcess")){return"_Images of this paper are being generated.".loc()
}else{return"_Loading...".loc()}}}}}.property("dprStatusCode","mainLoadingIsVisible").cacheable()})});
Cv.SelectView=SC.SelectView.extend({exampleView:function(){var a=SC.MenuItemView.extend({selectView:this,contentDidChange:function(){this.setPath("content.target",this.get("selectView"))
}.observes("content")});return a}.property().cacheable(),displaySelectedItem:function(a){var b=a.get("selectedItem");
this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("itemIdx",b.get("contentIndex"))
},render:function(a,b){arguments.callee.base.apply(this,arguments);if(b){this.invokeLast(function(){var c=this.get("value");
if(SC.none(c)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);
this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this._itemIdx)
},updateItemList:function(){var b,i,m,o,s,f,e,q,g,k,a,j,c,h,t,n,l,p;i=this.get("items");
i=this.sortObjects(i);m=i.length;o=this.get("itemTitleKey");s=this.get("itemIconKey");
f=this.get("itemValueKey");e=this.get("itemSeparatorKey");q=this.get("showCheckbox");
g=this.get("value");k=this.get("localize");j=[];c=YES;h=0;i.forEach(function(u){if(u){t=o?(u.get?u.get(o):u[o]):u.toString();
t=k?t.loc():t;n=s?(u.get?u.get(s):u[s]):null;if(SC.none(u[s])){n=null}l=(f)?(u.get?u.get(f):u[f]):u;
if(!SC.none(g)&&!SC.none(l)){if(g===l){this.set("title",t);this.set("icon",n)}}if(l===this.get("value")){this.set("_itemIdx",h);
c=!q?NO:YES}else{c=NO}a=e?(u.get?u.get(e):u[e]):NO;if(h===0){this._defaultVal=l;this._defaultTitle=t;
this._defaultIcon=n}var v=SC.Object.create({separator:a,title:t,icon:n,value:l,isEnabled:YES,checkbox:c,action:this.displaySelectedItem});
j.push(v)}h+=1},this);this.set("_itemList",j)}.observes("*items.[]"),_action:function(m){var i,a,j,k,s,o,z,f,y,c,n,u,p,w,g,h,l,b,x;
i=this.$(".sc-button-label")[0];a=this.get("layer").offsetWidth;j=i.scrollWidth;k=this.get("lastMenuWidth");
if(j){s=i.offsetWidth;if(j&&s){a=a+j-s}}if(!k||(a>k)){k=a}o=this.get("_itemList");
var t=this.get("customViewClassName");var q=this.get("customViewMenuOffsetWidth");
var e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";
e=t?(e+" "+t):e;if(parseInt(SC.browser.msie,0)!==7){SC.prepareStringMeasurement("",e);
for(n=0,x=o.length;n<x;++n){y=o.objectAt(n);z=SC.measureString(y.title).width;if(!f||(z>f)){f=z
}}SC.teardownStringMeasurement()}k=(f+this.menuItemPadding>k)?f+this.menuItemPadding:k;
var v=SC.RootResponder.responder.get("currentWindowSize").width;if(k>v){k=(v-25)}this.set("lastMenuWidth",k);
u=this.get("_currentSelItem");p=this.get("_itemList");w=this.get("controlSize");g=this.get("menuPaneHeightPadding");
h=this.get("exampleView");l=h?h:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:p,exampleView:l,isEnabled:YES,menuHeightPadding:g,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:k},controlSize:w,itemWidth:k,contentView:SC.View.extend({})});
if(!b){return NO}b.popup(this,this.preferMatrix);b.set("currentSelectedMenuItem",u);
return YES}});sc_require("views/select");Cv.PmSidebarTabView=SC.View.design({layout:{top:0,right:0,bottom:0,left:0},childViews:function(){return Cv.get("inStudentMode")||this.get("isReadonly")?"assignmentSelectView labelView reviewSelectView selectedReviewTitleView scrollView noReviewsView loadingView".w():"assignmentSelectView labelView reviewSelectView selectedReviewTitleView reviewScoreView scrollView noReviewsView loadingView".w()
}.property().cacheable(),classNames:["sidebar-mini-menu"],isReadonlyBinding:"Cv.paperController.isReadonly",labelView:SC.LabelView.design({layout:{top:0,left:0,height:40},classNames:"pm-sidebar-header",valueBinding:".parentView.tabName"}),noReviewsView:SC.View.design({layout:function(){var a=this.get("hasMultipleAssignments")?90:70;
return{left:0,right:0,top:a,bottom:0}}.property("hasMultipleAssignments").cacheable(),classNames:"pm-sidebar-message-container",hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",reviewsAreLoadingBinding:"Cv.pmIndividualReviewsController.isBusy",isVisible:function(){return(this.get("reviewsLength")<1&&!this.get("reviewsAreLoading"))
}.property("reviewsLength","reviewsAreLoading").cacheable(),render:function(a,c){a.push('<div class="pm-sidebar-message">');
var b;if(Cv.get("inStudentMode")){b="_No reviews are available for this paper.".loc()
}else{b="_No reviews have been submitted for this paper.".loc()}a.push(b);a.push("</div>")
}}),assignmentSelectView:Cv.SelectView.design({layout:{left:0,right:0,top:40,height:20},isVisibleBinding:"Cv.pmAssignmentsController.hasMultiple",backgroundColor:"black",itemsBinding:"Cv.pmAssignmentsController.arrangedObjects",valueBinding:"Cv.pmAssignmentController.content",itemTitleKey:"displayTitle",positionMenuBelow:YES,lastMenuWidth:250,isEnabledBinding:"Cv.pmAssignmentsController.hasContent"}),reviewSelectView:Cv.SelectView.design({layout:function(){var a=this.get("hasMultipleAssignments")?60:40;
return{left:0,width:40,top:a,height:30}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",reviewsAreLoadingBinding:"Cv.pmIndividualReviewsController.isBusy",itemsBinding:"Cv.pmReviewsController.arrangedObjects",classNames:"set-dropdown-button",valueBinding:"Cv.pmReviewsController.selectedReview",itemTitleKey:"title",positionMenuBelow:YES,lastMenuWidth:250,isEnabled:function(){return this.get("reviewsLength")>0
}.property("reviewsLength").cacheable(),isEnabledDidChange:function(){var a=(this.get("reviewsLength")<1&&!this.get("reviewsAreLoading"));
var b=this.get("classNames").concat()||[];if(a){b.pushObject("disabled")}else{b.removeObject("disabled")
}this.set("classNames",b)}.observes("isEnabled")}),selectedReviewTitleView:SC.LabelView.design({layout:function(){var a=this.get("hasMultipleAssignments")?65:45;
return{left:40,right:50,top:a,height:20}}.property("hasMultipleAssignments").cacheable(),classNames:"mini-menu-header".w(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",valueBinding:"Cv.pmReviewController.title",textAlign:SC.ALIGN_CENTER,isVisible:function(){return this.get("reviewsLength")>0
}.property("reviewsLength").cacheable()}),reviewScoreView:SC.View.design({layout:function(){var a=this.get("hasMultipleAssignments")?60:40;
return{width:50,right:0,top:a,height:30}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",classNames:"mini-menu-header review-score clickable".w(),isVisible:function(){return(!this.get("isAllReviews")&&this.get("reviewsLength")>0&&this.get("reviewType")!==4)
}.property("isAllReviews","reviewsLength","reviewType").cacheable(),isAllReviewsBinding:"Cv.pmReviewController.isAllReviews",reviewTypeBinding:"Cv.pmReviewController.type",childViews:"scoreView".w(),scoreView:SC.LabelView.design({layout:{top:5,right:0,bottom:5,left:0},isEditable:YES,validator:SC.Validator.Number,valueBinding:"Cv.pmReviewController.score",isAllReviewsBinding:"Cv.pmReviewController.isAllReviews",reviewTypeBinding:"Cv.pmReviewController.type",displayValue:function(){if(this.get("isAllReviews")||this.get("reviewType")==4){return""
}var a="--";if(!SC.none(this.get("value"))){a="%@/%@".fmt(this.get("value"),Cv.Review.MAX_SCORE)
}return a}.property("isAllReviews","value","reviewType").cacheable(),textAlign:SC.ALIGN_CENTER,inlineEditorDidEndEditing:function(a,b){this.invokeLast(function(){Cv.pmReviewController.saveScore()
});return arguments.callee.base.apply(this,arguments)},exampleInlineTextFieldView:SC.InlineTextFieldView.extend({getValidatedValueFromFieldValue:function(a){var c=this.getFieldValue();
if(!a){var b=parseInt(c,10);if(b!=c){b=""}}else{b=c}return b},didLoseKeyResponderTo:function(a){if(this.$input()[0]){arguments.callee.base.apply(this,arguments)
}}}),click:function(a){return this.beginEditing()}})}),scrollView:SC.ScrollView.extend({layout:function(){var a=this.get("hasMultipleAssignments")?90:70;
return{left:0,right:0,top:a,bottom:0}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",contentViewBinding:".parentView.bodyContentView",isVisible:function(){return this.get("reviewsLength")>0
}.property("reviewsLength").cacheable()}),assignmentsIsBusyBinding:"Cv.pmAssignmentsController.isBusy",reviewsIsBusyBinding:"Cv.pmIndividualReviewsController.isBusy",isBusy:function(){return this.get("assignmentsIsBusy")||this.get("reviewsIsBusy")
}.property("assignmentsIsBusy","reviewsIsBusy").cacheable(),loadingView:Ip.LoadingView.extend({layout:function(){var a=this.get("hasMultipleAssignments")?60:40;
return{top:a}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",parentViewBusyBinding:".parentView.isBusy",anwersIsBusyBinding:"Cv.pmAnswersController.isBusy",isVisible:function(){var b=this.get("parentViewBusy"),a=this.get("anwersIsBusy");
if(this.get("parentView").constructor==="Cv.PmQuestionsSidebarView"){if(b||a){return YES
}return NO}if(b){return YES}return NO}.property("parentViewBusy","anwersIsBusy").cacheable(),})});
sc_require("views/pm/pm_sidebar_tab");Cv.PmMarkListSidebarView=Cv.PmSidebarTabView.extend({tabName:"_Comments List".loc(),scrollView:SC.View.design({childViews:"toolbarView noMarksMessageView scrollView".w(),layout:function(){var a=this.get("hasMultipleAssignments")?90:70;
return{left:0,right:0,top:a,bottom:0}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",isVisible:function(){return this.get("reviewsLength")>0
}.property("reviewsLength").cacheable(),hasMarksBinding:SC.Binding.transform(function(a,b){return(a&&a.get("length"))
}).from("Cv.pmMarkSetController.marks"),toolbarView:SC.View.design({layout:{top:0,right:0,height:20,left:0},isVisibleBinding:SC.Binding.oneWay(".parentView.hasMarks"),classNames:["sidebar-mini-menu"],childViews:"expandAll collapseAll".w(),expandAll:SC.ButtonView.design({layout:{top:0,width:80,height:20,left:5},title:"_Expand All".loc(),controlSize:SC.SMALL_CONTROL_SIZE,action:"showFullTextForAllItems",targetBinding:SC.Binding.oneWay(".parentView.parentView.scrollView.contentView")}).loc(Ip.getLocalizationHash("Cv.expandAllButton")),collapseAll:SC.ButtonView.design({layout:{top:0,width:80,height:20,left:75},title:"_Collapse All".loc(),controlSize:SC.SMALL_CONTROL_SIZE,action:"showTruncatedTextForAllItems",targetBinding:SC.Binding.oneWay(".parentView.parentView.scrollView.contentView")}).loc(Ip.getLocalizationHash("Cv.collapseAllButton"))}),noMarksMessageView:SC.View.design({layout:{top:0,bottom:0,left:0,right:0},classNames:"pm-sidebar-message-container",isVisibleBinding:SC.Binding.oneWay(".parentView.hasMarks").not(),render:function(a,b){a.push('<div class="pm-sidebar-message pm-no-marks-message">');
a.push("_This paper does not have any comments or QuickMarks.".loc());a.push("</div>")
}}),scrollView:SC.ScrollView.extend({isVisibleBinding:SC.Binding.oneWay(".parentView.hasMarks"),layout:{top:20,right:0,left:0},contentView:SC.StackedView.design({layout:{top:0,right:0,bottom:0,left:0},useStaticLayout:YES,classNames:"mark-list".w(),contentBinding:"Cv.pmMarkListController.arrangedObjects",contentExampleViewKey:"markListViewClass",contentValueKey:"text",createItemView:function(){var viewClass=arguments[0];
if(typeof viewClass=="string"){try{viewClass=eval(viewClass)}catch(e){console.error("Could not create itemView",e)
}}arguments[0]=viewClass;return arguments.callee.base.apply(this,arguments)},groupExampleView:SC.ListItemView.extend(SC.StaticLayout,{layout:{height:20},classNames:"sidebar-section-header",useStaticLayout:YES,contentUnreadCountKey:"count",outlineIndent:0,renderCount:function(a,b){a.push('<span class="count"><span class="inner">').push(b.toString()).push("</span></span>")
}}),showTruncatedTextForAllItems:function(){var a=this.get("childViews");a.forEach(function(b,c){if(b.collapse){b.collapse()
}})},showFullTextForAllItems:function(){var a=this.get("childViews");a.forEach(function(b,c){if(b.expand){b.expand()
}})}})})}),isVisibleDidChange:function(){Cv.peerMarkController.set("isShowingMarkList",this.get("isVisibleInWindow"))
}.observes("isVisibleInWindow")});sc_require("views/pm/pm_sidebar_tab");Cv.PmOverviewSidebarView=Cv.PmSidebarTabView.extend({childViews:function(){return Cv.get("inStudentMode")||this.get("isReadonly")?"assignmentSelectView labelView reviewSelectView selectedReviewTitleView splitView noReviewsView loadingView".w():"assignmentSelectView labelView reviewSelectView selectedReviewTitleView reviewScoreView splitView noReviewsView loadingView".w()
}.property().cacheable(),classNames:"pm-overview".w(),tabName:"_Reviews".loc(),splitView:SC.SplitView.design({layout:function(){var a=this.get("hasMultipleAssignments")?90:70;
return{left:0,right:0,top:a,bottom:0}}.property("hasMultipleAssignments").cacheable(),hasMultipleAssignmentsBinding:"Cv.pmAssignmentsController.hasMultiple",reviewsLengthBinding:"Cv.pmIndividualReviewsController.length",isVisible:function(){return this.get("reviewsLength")>0
}.property("reviewsLength").cacheable(),isVisibleDidChange:function(){if(this.get("isVisible")){if(Cv.pmReviewController.get("isSingleReview")){this.showBottomRightView()
}else{this.hideBottomRightView()}}}.observes("isVisible"),layoutDirection:SC.LAYOUT_VERTICAL,autoresizeBehavior:SC.RESIZE_TOP_LEFT,defaultThickness:0,standardThickness:0.25,dividerView:SC.SplitDividerView,canCollapseViews:NO,showBottomRightView:function(){if(!this.bottomRightView.get("isVisible")||!this.dividerView.get("isVisible")){var a=Math.floor(this.get("frame").height*this.get("standardThickness"));
this.topLeftView.adjust("height",this.get("frame").height-a-this.dividerView.get("layout").height);
this.dividerView.set("isVisible",YES);this.dividerView.adjust("bottom",a);this.bottomRightView.set("isVisible",YES);
this.bottomRightView.adjust("height",a)}},hideBottomRightView:function(){this.invokeLast(function(){if(!!this.bottomRightView.get("isVisible")||!!this.dividerView.get("isVisible")){this.dividerView.set("isVisible",NO);
this.bottomRightView.set("isVisible",NO);this.topLeftView.adjust("height",this.get("frame").height)
}})},allReviewsIsToggled:function(){if(Cv.pmReviewController.get("isSingleReview")){this.showBottomRightView()
}else{this.hideBottomRightView()}}.observes("Cv.pmReviewController.content"),topLeftView:SC.ScrollView.design({layout:{left:0,right:0,top:0,bottom:0},classNames:"review-list".w(),contentView:SC.StackedView.design({layout:{top:0,right:0,bottom:0,left:0},useStaticLayout:YES,contentBinding:"Cv.pmReviewsController.reviews",reviewsSelectionBinding:"Cv.pmReviewsController.selection",selectionBinding:"Cv.pmReviewsController.selection",contentValueKey:"title",exampleView:SC.ListItemView.extend(SC.StaticLayout,{useStaticLayout:YES,displayProperties:["score"],titleBinding:".content.title",scoreBinding:".content.score",isAllReviewsBinding:".content.isAllReviews",classNames:"review-item".w(),render:function(a,c){a.push('<span class="reviewer">');
a.push(this.get("title"));a.push("</span>");if(!this.get("isAllReviews")&&!Cv.get("inStudentMode")&&(this.getPath("content.type")!==4)){var b=SC.none(this.get("score"))?"--":this.get("score");
a.push('<span class="score">');a.push("%@/%@".fmt(b,Cv.Review.MAX_SCORE));a.push("</span>")
}}})})}),bottomRightView:SC.View.design({layout:{top:0,right:0,bottom:0,left:0},classNames:["pm-detail-panel"],displayProperties:["review"],reviewBinding:"Cv.pmReviewController.content",submittedOnDateBinding:SC.Binding.notNull("Cv.pmReviewController.submittedOnDate","--"),isVisible:NO,render:function(b,e){var a=this.get("submittedOnDate");
if(a&&a!="--"){var c=Cv.classController.get("displayTimeIn24Hr")?"__ipDefaultFullDateTime24HrFormat".loc():"__ipDefaultFullDateTimeFormat".loc();
a=a.toFormattedString(c)}b.push("<h3>%@</h3>".fmt(this.getPath("review.reviewerFullName")));
b.push("<dl>");b.push("<dt>").push("_type".loc()).push("</dt>");b.push("<dd>%@</dd>".fmt(this.getPath("review.typeString")));
b.push("<dt>").push("_submitted on".loc()).push("</dt>");b.push("<dd>").push(a).push("</dd>");
b.push("</dl>")}})})});sc_require("views/pm/pm_sidebar_tab");Cv.PmQuestionsSidebarView=Cv.PmSidebarTabView.extend({tabName:"_Questions & Answers".loc(),reviewBinding:SC.Binding.oneWay("Cv.pmReviewController.content"),answersLengthBinding:SC.Binding.oneWay("Cv.pmAnswersController.length"),questionsLengthBinding:SC.Binding.oneWay("Cv.pmQuestionsController.questionsLength"),questionsBinding:SC.Binding.oneWay("Cv.pmQuestionsController.questions"),bodyContentView:function(){var b=this.get("questions");
var a=this.get("review");var c=SC.View.create(SC.StaticLayout,{layout:{top:0,right:0,bottom:0,left:0},classNames:"pm-questions-answers",useStaticLayout:YES,render:function(e,f){e.push("<dl>");
if(b){b.forEach(function(g){e.push("<dt>").push(g.get("text")).push("</dt>");var h=Cv.pmAnswersController.getAnswersForQuestion(g);
if(g.get("type")==1){h.forEach(function(i){e.push("<dd>");if(a.get("isAllReviews")){e.push("<span>").push(i.getPath("review.reviewerInitials")).push("</span>")
}e.push(i.get("value"));e.push("</dd>")})}else{if(g.get("type")==2){h.forEach(function(j){var i=j.get("value");
i=parseInt(i)+1;if(isNaN(i)){return}e.push("<dd>");if(a.get("isAllReviews")){e.push("<span>").push(j.getPath("review.reviewerInitials")).push("</span>")
}e.push('<div class="scale-value">').push(i).push("</div>");var k=g.get("options");
if(k){e.push('<div class="scale-range">');e.push("<div>").push(1).push(" = ").push(k[0]).push("</div>");
e.push("<div>").push(k.length).push(" = ").push(k[k.length-1]).push("</div>");e.push("</div>")
}e.push("</dd>")})}}})}e.push("</dl>")}});return c}.property("review","questionsLength","answersLength").cacheable(),isVisibleDidChange:function(){Cv.peerMarkController.set("isViewingQuestions",this.get("isVisibleInWindow"))
}.observes("isVisibleInWindow")});Cv.PmSidebarView=SC.TabView.extend({segmentedView:Ip.SegmentedView,tabLocation:SC.BOTTOM_LOCATION,itemTitleKey:"title",itemValueKey:"value",itemIsEnabledKey:"enabled",itemToolTipKey:"toolTip",tabHeight:30,itemClassNameKey:"className",classNames:"pm-sidebar",items:function(){var a=[{title:"",value:this.get("overviewView"),enabled:YES,className:"overview",toolTip:"_Overview".loc()},{title:"",value:this.get("questionsView"),enabled:YES,className:"questions",toolTip:"_Questions and Answers".loc()},{title:"",value:this.get("markListView"),enabled:YES,className:"mark-list",toolTip:"_Mark List".loc()}];
return a}.property().cacheable(),nowShowing:"overviewView",nowShowing:function(b,c){if(c===undefined){var a=this.get("items");
if(a&&(a.get("length")>0)){c=this.get("overviewView")}}return c}.property("items").cacheable(),overviewView:function(){var a=Cv.PmOverviewSidebarView.design({});
return this.createChildView(a)}.property().cacheable(),questionsView:function(){var a=Cv.PmQuestionsSidebarView.design({});
return this.createChildView(a)}.property().cacheable(),markListView:function(){var a=Cv.PmMarkListSidebarView.design({});
return this.createChildView(a)}.property().cacheable(),createChildViews:function(){arguments.callee.base.apply(this,arguments);
var b=this.get("containerView");b.adjust("bottom",this.get("tabHeight")-1);var a=this.get("segmentedView");
a.adjust("width",126);a.adjust("right",null);var c=a.get("classNames").concat();c.push("sidebar-tabs");
a.set("classNames",c)}});sc_require("views/mark");sc_require("views/mark_criterion/mark_criterion_select");
Cv.QuickMarkView=Cv.MarkView.extend(Ip.EditingInterceptor,{content:null,paperView:null,classNames:["quickmark-view"],markViewProperties:["editText"],displayProperties:["classNames"],editText:null,templateNameBinding:".content.template.name",extraCommentBinding:".content.text",modifyClassNames:function(){var a=this.get("classNames").concat()||[];
if(!!this.get("extraComment")){a.pushObject("extra-comment")}else{a.removeObject("extra-comment")
}this.set("classNames",a)}.observes("extraComment"),creatorId:function(){return this.getPath("content.initials")
}.property("content").cacheable(),collapsedView:function(){var a=this.createChildView(SC.View.design(Cv.MarkStatusIndicator,Cv.MarkIcon,{displayProperties:["templateName","extraComment","recordStatus","templateRecordStatus"],markView:this,templateNameBinding:".markView.templateName",creatorIdBinding:".markView.creatorId",extraCommentBinding:".markView.extraComment",classNames:["collapsed-view"],templateRecordStatusBinding:".markView.content.template.status",render:function(b,c){b.push('<div class="template-name">').push(this.get("templateName")).push("</div>");
if(this.get("creatorId")){b.push('<div class="template-name">').push("| %@".fmt(this.get("creatorId"))).push("</div>")
}b.push('<div class="mark-icon"></div>');if(this.get("recordStatus")&SC.Record.ERROR||this.get("templateRecordStatus")&SC.Record.ERROR){b.push('<div class="sc-icon-alert-16 mark-error"></div>')
}else{if(this.get("recordStatus")&SC.Record.BUSY){b.push('<img src="%@" class="mark-busy">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif"))
}}},recordStatusBinding:".markView.recordStatus"}));return a}.property().cacheable(),expandedView:function(){var b=Cv.ResizableView.design({layout:{top:0,height:180,left:0,minWidth:Cv.QuickMarkView.EXPANDED_VIEW_MIN_WIDTH,maxWidth:340},classNames:["expanded-view"],childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"headerView descriptionView commentView colorSelectionView criteriaView".w():"headerView descriptionView criteriaView commentView colorSelectionView footerView".w(),quickMarkView:this,hasHighlight:function(){return !!this.getPath("quickMarkView.content.highlight")
}.property().cacheable(),canResizeWidth:YES,isEditingBinding:".quickMarkView.isEditing",isEditingObserver:function(){if(this.get("isEditing")){this.$().addClass("editing")
}else{this.$().removeClass("editing")}}.observes("isEditing"),init:function(){arguments.callee.base.apply(this,arguments);
this.adjustWidth();this.adjustHeight()},createChildViews:function(){arguments.callee.base.apply(this,arguments);
this._hasCreatedChildViews=true},adjustWidth:function(){var f=this.getPath("descriptionView.value");
var e=this.getPath("descriptionView.layer")||"";var c=this.getPath("quickMarkView.isEditing")?340:SC.metricsForString(f,e,null,YES).width+10;
this.adjust("width",c)}.observes(".quickMarkView.isEditing"),adjustHeight:function(){if(!this._hasCreatedChildViews){return
}var k=this.commentView.get("headingView").get("frame").height;if(!this.getPath("quickMarkView.isEditing")){var c=0;
var h=this.commentView.get("labelView").get("frame").height;if(Cv.get("inStudentMode")){h=h+10
}else{h=h+1}if(h>8){c=h+k}this.commentView.adjust("height",c+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER)
}else{var i=this.commentView.get("fieldView").get("frame").height;this.commentView.adjust("height",i+k+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER)
}var q=SC.maxY(this.descriptionView.get("frame"));this.commentView.adjust("top",q);
var f=this.headerView.get("frame").height;var g=this.descriptionView.get("frame").height;
var e=this.commentView.get("isVisible")?this.commentView.get("frame").height:0;var m=this.footerView.get?this.footerView.get("frame").height:0;
var p=this.colorSelectionView.get("isVisible")?this.colorSelectionView.get("frame").height:0;
var l=this.criteriaView.get("isVisible")?this.criteriaView.get("frame").height:0;
var q=SC.maxY(this.descriptionView.get("frame"));if(this.criteriaView.get("isVisible")){this.criteriaView.adjust("top",q+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER);
var j=SC.maxY(this.criteriaView.get("frame"));this.commentView.adjust("top",j)}else{this.commentView.adjust("top",q+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER)
}var o=SC.maxY(this.commentView.get("frame"));this.colorSelectionView.adjust("top",(o+Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER));
var n=f+g+e+m+p+l+20;this.adjust("height",n)},dragDidEnd:function(c,e,g){if(c.get("type")==="resize"){var f=this.getPath("quickMarkView.content");
f.set("width",this.get("frame").width);this.adjustHeight()}},headerView:SC.View.design({layout:{top:0,height:19,left:0,right:0},paperBinding:"Cv.paperController.content",classNames:"expanded-view-header move-handle".w(),childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"dataView".w():"dataView deleteButtonView".w(),displayProperties:["templateName","extraComment","recordStatus"],quickMarkViewBinding:".parentView.quickMarkView",dataView:SC.View.design(Cv.MarkIcon,Ip.AnchorTagActions,{layout:{top:3,left:3},markView:this,displayProperties:["templateName","extraComment","recordStatus"],nameBinding:".markView.templateName",extraCommentBinding:".markView.extraComment",recordStatusBinding:".markView.recordStatus",templateRecordStatusBinding:".markView.content.template.status",render:function(c,f){var e=this.get("extraComment")?Cv.QuickMarkView.EXPANDED_VIEW_MIN_WIDTH-52:Cv.QuickMarkView.EXPANDED_VIEW_MIN_WIDTH-30;
c.push('<div class="template-name" style="max-width: %@px">'.fmt(e)).push(this.getPath("markView.templateName")).push("</div>");
if(this.get("creatorId")){c.push('<div class="template-name">').push("| %@".fmt(this.getPath("markView.creatorId"))).push("</div>")
}c.push('<div class="mark-icon"></div>');if(this.get("recordStatus")&SC.Record.ERROR||this.get("templateRecordStatus")&SC.Record.ERROR){c.push('<div class="sc-icon-alert-16 mark-error"></div>')
}else{if(this.get("recordStatus")&SC.Record.BUSY){c.push('<img src="%@" class="mark-busy">'.fmt("https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/loading-spinner.gif"))
}}}}),deleteButtonView:SC.ButtonView.design({layout:{top:0,right:5,width:15},isEnabledBinding:SC.Binding.bool(".quickMarkView.isProcessing").not(),isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isNewlyCreated").not(),classNames:"comment-delete",titleMinWidth:"15px",quickMarkView:this,action:function(){var c=this.get("quickMarkView");
c.deleteQuickMark()}})}),descriptionView:Cv.DynamicLabelView.design({layout:{top:33,left:15,right:15,height:25},classNames:["comment-readview"],dynamicStyles:"line-height: 1.4em",maxHeight:270,mark:this.get("content"),escapeHTML:NO,valueBinding:SC.Binding.transform(function(c,e){return Ip.urlsToAnchorTags(c)
}).from(".mark.template.description"),_dynamicHeightDidChange:function(){this.get("parentView").adjustHeight()
}.observes("dynamicHeight")}),criteriaView:Cv.MarkCriterionSelectView.design({markView:this,frameDidChange:function(){this.get("parentView").adjustHeight()
}.observes("frame")}),commentView:SC.View.design({layout:{top:85,height:90,left:14,right:14},childViews:"headingView labelView fieldView".w(),classNames:"comment-edit-view",quickMarkView:this,shouldBeVisibleObserver:function(){if(this.getPath("quickMarkView.content.text")||this.getPath("quickMarkView.isEditing")){this.set("isVisible",YES)
}else{this.set("isVisible",NO)}}.observes(".quickMarkView.content.text",".quickMarkView.isEditing",".quickMarkView.isExpanded"),headingView:SC.LabelView.design({layout:{top:2,left:0,right:0,height:20},classNames:"heading-view",value:"_Additional Comments".loc()}),labelView:Cv.DynamicLabelView.design({layout:{top:27,left:0,right:0},classNames:["comment-view"],escapeHTML:NO,mark:this.get("content"),valueBinding:".mark.text",quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isEditing").not(),isReadonlyBinding:"Cv.paperController.isReadonly",mouseDown:function(c){if(this.get("labelViewIsEditable")){var e=c.target;
if(!e||(e.tagName.toLowerCase()!=="a")){this.get("quickMarkView").showExpandedViewAsEditing()
}}},labelViewIsEditable:function(){return(!this.get("isProcessing")&&!this.getPath("quickMarkView.isPmMark"))?YES:NO
}.property("isProcessing","mark").cacheable(),minHeight:0,dynamicStyles:"line-height: 1.4em",_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight")}),fieldView:Ip.DynamicTextFieldView.design(Cv.EscapeValue,{layout:{top:27,bottom:0,left:1,right:1},hint:"_Enter comment here".loc(),isTextArea:YES,quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isEditing"),sanitizedValueBinding:SC.Binding.oneWay(".quickMarkView.editText"),sanitizedValueDidChange:function(){var e=this.get("isVisible");
if(e){var c=this.get("sanitizedValue");this.setPath("quickMarkView.editText",c)}}.observes("sanitizedValue"),dynamicStyles:'font-family:"Lucida Sans"; font-size:11.8833px; font-weight:400; font-style:normal; line-height: 15px',minHeight:60,maxLength:Cv.QuickMark.TEXT_MAX_LENGTH,_dynamicHeightDidChange:function(){var c=this.getPath("parentView.parentView");
if(c){c.adjustHeight()}}.observes("dynamicHeight"),nextKeyView:function(){return this.getPath("parentView.parentView.footerView.saveButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.footerView.cancelButtonView")
}.property().cacheable()})}),colorSelectionView:SC.RadioView.design({init:function(){arguments.callee.base.apply(this,arguments);
this.highlightWasSet()},layout:{top:7,right:0,height:35,left:20},classNames:["highlight-color-select"],isEditingBinding:".parentView.parentView.isEditing",isEditingDidChange:function(){this.get("parentView").adjustHeight()
}.observes("isEditing"),hasHighlightBinding:".parentView.hasHighlight",isVisible:function(){return this.get("isEditing")&&this.get("hasHighlight")
}.property("isEditing","hasHighlight").cacheable(),layoutDirection:SC.LAYOUT_HORIZONTAL,highlight:this.getPath("content.highlight"),colorStatus:null,highlightWasSet:function(){if(this.get("highlight")&&!this.colorStatusBinding){this.colorStatusBinding=this.bind("colorStatus",SC.Binding.oneWay(".highlight.status"))
}}.observes("highlight"),highlightLastColorSelectionBinding:"Cv.userDefaults.highlightLastColorSelection",value:function(e,f){if(f){this.setPath("highlight.color",f);
this.set("highlightLastColorSelection",f)}else{if(this.get("highlightLastColorSelection")){var c=(this.get("highlight")&&(this.getPath("highlight.id")))?this.getPath("highlight.color"):this.get("highlightLastColorSelection");
this.setPath("highlight.color",c);f=c}else{f=(this.get("highlight")&&(this.getPath("highlight.id")))?this.getPath("highlight.color"):Cv.config.HIGHLIGHT_COLORS_DEFAULT
}}return f}.property("highlight").cacheable(),items:Cv.config.HIGHLIGHT_COLORS.slice(1,Cv.config.HIGHLIGHT_COLORS.length),itemTitleKey:"title",itemValueKey:"value",itemIconKey:"icon"}),footerView:SC.View.design({layout:{height:35,bottom:0,left:7,right:7},quickMarkIsEditingBinding:".parentView.parentView.isEditing",quickMarkIsEditingDidChange:function(){this.get("parentView").adjustHeight()
}.observes("quickMarkIsEditing"),hasHighlightBinding:".parentView.hasHighlight",paperBinding:"Cv.paperController.content",childViews:Cv.get("inStudentMode")||this.getPath("paper.isReadonly")||this.get("isPmMark")?"".w():"commentButtonView retryButtonView saveButtonView cancelButtonView".w(),classNames:"comment-footer",commentButtonView:SC.ButtonView.design({layout:{bottom:5,right:8,width:100,height:14},quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isEditing").not(),isEnabledBinding:SC.Binding.bool(".quickMarkView.isProcessing").not(),titleMinWidth:"30px",title:"_Edit".loc(),target:this,action:"showExpandedViewAsEditing"}),retryButtonView:SC.ButtonView.design({layout:{bottom:5,right:8,width:100,height:14},quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isError"),titleMinWidth:"30px",title:"_Retry".loc(),target:this,action:"retryButtonClickHandler"}),saveButtonView:SC.ButtonView.design({layout:{bottom:5,left:8,width:136,height:14},quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isEditing"),isEnabledBinding:SC.Binding.bool(".quickMarkView.isProcessing").not(),classNames:"primary",titleMinWidth:"30px",title:"_Save".loc(),target:this,action:"saveButtonClickHandler",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.cancelButtonView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.parentView.commentView.fieldView")
}.property().cacheable()}).loc(Ip.getLocalizationHash("Cv.saveButton")),cancelButtonView:SC.ButtonView.design({layout:{bottom:5,right:8,width:136,height:14},quickMarkView:this,isVisibleBinding:SC.Binding.oneWay(".quickMarkView.isEditing"),isEnabledBinding:SC.Binding.bool(".quickMarkView.isProcessing").not(),titleMinWidth:"30px",title:"_Cancel".loc(),target:this,action:"cancelButtonClickHandler",acceptsFirstResponder:YES,nextKeyView:function(){return this.getPath("parentView.parentView.commentView.fieldView")
}.property().cacheable(),previousKeyView:function(){return this.getPath("parentView.saveButtonView")
}.property().cacheable()})}),isEditingDidChange:function(){this.invokeOnce(this.adjustHeight,this)
}.observes(".parentView.isEditing")});var a=this.createChildView(b);return a}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.isEditingDidChange()},closeEditViewWithSave:function(){this.saveButtonClickHandler();
this.showCollapsedView()},closeEditViewWithoutSave:function(){this.cancelButtonClickHandler();
this.showCollapsedView()},getRecord:function(){return this.get("content")},isEditingDidChange:function(){if(this.get("isEditing")){if((this.get("editText")===null)||(this.get("editText")===undefined)){var a=this.getPath("content.text");
var b=this.getPath("expandedView.commentView.fieldView");b.set("sanitizedValue",a);
this.invokeLater(function(){b.becomeFirstResponder()},300)}}else{this.set("editText",null)
}}.observes("isEditing"),saveButtonClickHandler:function(){try{var e=this.getPath("expandedView.commentView.fieldView");
var f=e.get("sanitizedValue");var a=this.get("content");a.exitErrorState();a.set("text",f);
this.set("editText",null);a.commitRecord();var b=a.get("highlight");if(b){b.commitRecord()
}this.executeMarkCriteriaAssociation();this.showExpandedViewAsReadOnly()}catch(c){this.showSaveError(c)
}},retryButtonClickHandler:function(){try{var a=this.get("content");a.exitErrorState();
a.commitRecord();var b=a.get("highlight");if(b){b.commitRecord()}this.executeMarkCriteriaAssociation();
this.showExpandedViewAsReadOnly()}catch(c){this.showSaveError(c)}},cancelButtonClickHandler:function(){this.set("editText",null);
var a=this.getPath("content.highlight");if(a){a.refresh()}this.resetMarkCriteriaAssociation();
this.showExpandedViewAsReadOnly()},deleteQuickMark:function(){var a=this.get("content");
Cv.markSetController.destroyQuickMark(a)},showSaveError:function(b){var e="_Cannot Save QuickMark".loc();
var c=b;var a="_OK".loc();SC.AlertPane.warn(e,c,null,a,null,null,null)},nameWidth:0,didCreateLayer:function(){this.invokeLater(function(){var a=this.$(".collapsed-view");
if(a[0]){this.set("nameWidth",a[0].offsetWidth)}})},didUpdateLayer:function(){this.invokeLater(function(){var a=this.$(".collapsed-view");
if(a[0]){this.set("nameWidth",a[0].offsetWidth)}})},collapsedViewWidth:function(){return this.get("nameWidth")
}.property("layout","nameWidth").cacheable(),collapsedViewHeight:function(){return Cv.QuickMarkView.COLLAPSED_VIEW_HEIGHT+(2*Cv.MarkView.COLLAPSED_VIEW_PADDING)
}.property("layout").cacheable()});Cv.QuickMarkView.COLLAPSED_VIEW_HEIGHT=19;Cv.QuickMarkView.CREATOR_ID_VIEW_WIDTH=30;
Cv.QuickMarkView.EXPANDED_VIEW_MIN_WIDTH=340;Cv.QuickMarkView.COMMENT_LABEL_FIELD_HEIGHT_BUFFER=10;
Cv.ResizableQuickMarkView=Cv.QuickMarkView.extend({classNames:["resizable-quickmark"],layout:function(){var a=this.get("content");
var b=this.get("zoomController");return b.getZoomedLayout({top:a.get("y"),left:a.get("x"),width:a.get("width"),height:a.get("height")})
}.property("content").cacheable()});Cv.rubricScoreCardsPage=SC.Page.create({studentRubricScoreCardView:SC.ScrollView.design({scoringMethodBinding:"Cv.rubricController.scoringMethod",contentView:Cv.RubricScoreCardContentView.design()}),rubricScoreCardView:Ip.SplitView.design({gradingFormAttachedFormAttachedBinding:"Cv.rubricController.isGradingForm",displayScorecardInMainWindowBinding:"Cv.rubricScorecardController.displayScorecardInMainWindow",isScoringRubricBinding:"Cv.rubricController.isScoringRubric",inStudentModeBinding:"Cv.inStudentMode",layoutDirection:SC.LAYOUT_VERTICAL,autoresizeBehavior:SC.RESIZE_TOP_LEFT,defaultThickness:150,dividerView:SC.SplitDividerView,canCollapseViews:NO,topLeftView:SC.ScrollView.design({contentView:Cv.RubricScoreCardContentView.design()}),bottomRightView:Cv.RubricScoreCardDetailsView.design()}),gradingFormView:RubricManagerCore.GradingFormCanvasView.design({isScoringRubricBinding:"Cv.rubricController.isScoringRubric",mode:RubricManagerCore.RubricCanvasMode.SCORING_MODE,criteriaBinding:"Cv.rubricController.criteria",rubricController:Cv.rubricController,rubricScoringController:Cv.rubricScoringController,rubricScoringFeedbackObjectsControllerBinding:"Cv.rubricScoringFeedbackObjectsController",itemLayout:{minHeight:90,maxHeight:280}}),studentGradingFormView:RubricManagerCore.GradingFormCanvasView.design({isScoringRubricBinding:"Cv.rubricController.isScoringRubric",inStudentModeBinding:"Cv.inStudentMode",criteriaBinding:"Cv.rubricController.criteria",rubricController:Cv.rubricController,rubricScoringController:Cv.rubricScoringController,rubricScoringFeedbackObjectsControllerBinding:"Cv.rubricScoringFeedbackObjectsController",itemLayout:{minHeight:90,maxHeight:280}}),noRubricAttachedView:SC.View.design({classNames:"no-rubric-attached".w(),childViews:"noRubricAttachedMessageView commonCoreRubricMessageView".w(),noRubricAttachedMessageView:SC.LabelView.design({layout:{centerY:0,centerX:0,width:200,height:75},textAlign:SC.ALIGN_CENTER,isVisibleBinding:SC.Binding.oneWay("Cv.userController.isUSSecondaryInstructor").not(),value:"_No rubric or grading form is attached to this assignment.".loc()}),commonCoreRubricMessageView:SC.View.design({layout:{top:10,bottom:10,left:10,right:10},isVisibleBinding:SC.Binding.oneWay("Cv.userController.isUSSecondaryInstructor"),render:function(a){a.push('<h3 class="heading">').push("_Use Common Core State Standards?".loc()).push("</h3>");
a.push("<div>").push("_Turnitin now offers six rubrics aligned with Common Core State Standards. Click on the Rubric/Form Manager icon above to get started using them on this assignment!".loc()).push("</div>")
}})}),rubricIsExpandedView:SC.View.design({layout:{top:15,left:10,right:10,height:330},classNames:["sidebar-message"],messageTypeBinding:SC.Binding.transform(function(a){return a?"gradingForm":"rubric"
}).from("Cv.rubricController.isGradingForm"),click:function(a){if(a.target.id==="focus_expanded_rubric"){Cv.rubricScorecardController.focusExpandedRubricWindow()
}},render:function(b){var a=this.get("messageType");b.push('<h3 class="heading">').push(RubricManagerCore.messages.rubricIsExpandedHeader[a]).push("</h3>");
b.push('<p><a id="focus_expanded_rubric" class="link-button">').push(RubricManagerCore.messages.rubricIsExpandedLink[a]).push("</a></p>");
b.push("<div>").push(RubricManagerCore.messages.rubricIsExpandedText[a]).push("</div>");
b.push('<div class="divider"></div>');if(!Cv.get("inStudentMode")){b.push('<div class="tip">').push(RubricManagerCore.messages.rubricIsExpandedTip[a]).push("</div>")
}else{b.push('<div class="tip">').push(RubricManagerCore.messages.rubricIsExpandedStudentTip[a]).push("</div>")
}},displayProperties:["messageType"]})});sc_require("views/mark");Cv.StrikethroughView=Cv.MarkView.extend({content:null,paperView:null,classNames:["strikethrough-view"],isHoveringHighlightBinding:".content.isHoveringHighlight",isHovering:NO,noLinkLines:YES,mouseEntered:function(){return YES
},mouseExited:function(){return YES},expandedView:null,collapsedView:function(){var b=SC.View.design(Ip.Hoverable,{layout:{height:Cv.StrikethroughView.MARK_VIEW_HEIGHT,width:Cv.StrikethroughView.MARK_VIEW_WIDTH,top:-22,left:-(Cv.StrikethroughView.MARK_VIEW_WIDTH/2)},strikethroughMarkView:this,classNames:["strikethrough-delete-pane"],isHoveringHighlightBinding:".parentView.isHoveringHighlight",isHoveringBinding:".strikethroughMarkView.isHovering",isHoveringHighlightTimerExpired:YES,_firstTime:YES,isHoveringHighlightDidChange:function(){if(this._firstTime){this._firstTime=NO;
return NO}if(!this.get("isHoveringHighlight")){this.set("isHoveringHighlightTimerExpired",NO);
if(this._isHoveringHighlightTimer){this._isHoveringHighlightTimer.invalidate()}this._isHoveringHighlightTimer=SC.Timer.schedule({target:this,action:function(){this.set("isHoveringHighlightTimerExpired",YES)
},interval:500})}return NO}.observes("isHoveringHighlight"),isVisible:function(){if(Cv.get("inStudentMode")||(this.get("isHoveringHighlightTimerExpired")&&!this.get("isHovering")&&!this.get("isHoveringHighlight"))||!this.getPath("parentView.parentView.serviceIsActive")){return NO
}return YES}.property("isHoveringHighlightTimerExpired","isHoveringHighlight","isHovering").cacheable(),collapsedViewWidth:function(){return Cv.StrikethroughView.MARK_VIEW_WIDTH
}.property().cacheable(),collapsedViewHeight:function(){return Cv.StrikethroughView.MARK_VIEW_HEIGHT
}.property().cacheable(),render:function(c,e){arguments.callee.base.apply(this,arguments);
c.push('<div class="comment-delete-icon"></div>');c.push('<div class="comment-delete-pointer"></div>')
},mouseDown:function(c){var e=this.get("strikethroughMarkView");e.deleteStrikethrough()
}});var a=this.createChildView(b);return a}.property().cacheable(),isHoveringDidChange:function(){var a=this.get("isHovering");
if(a){this.addClassName("hover")}else{this.removeClassName("hover")}}.observes("isHovering"),init:function(){arguments.callee.base.apply(this,arguments)
},getRecord:function(){return this.get("content")},deleteStrikethrough:function(){var a=this.get("content");
if(a.get("status")!=SC.Record.DESTROYED_CLEAN){this.set("isVisible",NO);Cv.markSetController.destroyStrikethrough(a)
}},collapsedViewWidth:function(){return Cv.StrikethroughView.MARK_ICON_VIEW_WIDTH
}.property().cacheable(),collapsedViewHeight:function(){return Cv.StrikethroughView.MARK_ICON_VIEW_HEIGHT
}.property().cacheable()});Cv.StrikethroughView.MARK_VIEW_WIDTH=30;Cv.StrikethroughView.MARK_VIEW_HEIGHT=20;
Cv.StrikethroughView.MARK_ICON_VIEW_WIDTH=26;Cv.StrikethroughView.MARK_ICON_VIEW_HEIGHT=20;
Cv.StrikethroughView.COLLAPSED_VIEW_HEIGHT=20;Cv.StrikethroughView.STATUS_ICON_VIEW_WIDTH=22;
Cv.ZoomControlsView=SC.View.extend(SC.Animatable,{paperView:null,childViews:"zoomOutImageView zoomSelectorView zoomInImageView".w(),transitions:{right:{duration:0.15,timing:SC.TRANSITION_CSS_EASE}},zoomOutImageView:Ip.ImageView.design({layout:{centerY:0,left:0,width:17,height:17},value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/zoom-out.png"}),zoomInImageView:Ip.ImageView.design({layout:{centerY:0,right:0,width:17,height:17},value:"https://www.turnitincdn.com/800404/static.turnitin.com/cv/20141205.1016/cv/en_us/A/resources/images/zoom-in.png"}),zoomSelectorView:SC.SliderView.design(SCUI.ToolTip,{layout:{centerY:0,right:20,left:20,height:21},maximum:1.4,minimum:0.6,step:0.2,itemValueKey:"value",toolTip:"_Change zoom level".loc(),paperBinding:"Cv.paperController",paperViewBinding:SC.Binding.oneWay(".parentView.paperView"),valueBinding:"Cv.zoomController.zoom",fitToWidthOnce:function(){if(!this._hasLoadedOnce&&(this.getPath("paper.pages.length")>0)){this._hasLoadedOnce=YES;
this.fitToWidth()}}.observes("*paper.pages.length"),fitToWidth:function(){var f=this.get("paperView");
var b=this.getPath("paperView.frame").width;var a=this.getPath("paper.pages.firstObject.width");
var c=b/a;var e=this.getZoomLevel(c);Cv.zoomController.set("zoom",e)},getZoomLevel:function(b){var g=[0.6,0.8,1,1.2,1.4];
var e=function(i){var j=b-i;return(j<0)?Infinity:j};var h=g.map(e);var c=h.get("@min");
var f=(c==Infinity)?0:h.indexOf(c);var a=Cv.config.get("PAPER_ZOOM_DEFAULT");if(a&&f>0){f+=a
}return g[f]}})});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("cv")
};